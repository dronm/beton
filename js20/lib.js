
function getPasteEvent(){var el=document.createElement('input'),name='onpaste';el.setAttribute(name,'');return(typeof el[name]==='function')?'paste':'input';}
var pasteEventName=getPasteEvent()+".mask",ua=navigator.userAgent,iPhone=/iphone/i.test(ua),android=/android/i.test(ua),caretTimeoutId;$.mask={definitions:{'9':"[0-9]",'a':"[A-Za-z]",'*':"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:'_',};$.fn.extend({caret:function(begin,end){var range;if(this.length===0||this.is(":hidden")){return;}
if(typeof begin=='number'){end=(typeof end==='number')?end:begin;return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(begin,end);}else if(this.createTextRange){range=this.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',begin);range.select();}});}else{if(this[0].setSelectionRange){begin=this[0].selectionStart;end=this[0].selectionEnd;}else if(document.selection&&document.selection.createRange){range=document.selection.createRange();begin=0-range.duplicate().moveStart('character',-100000);end=begin+range.text.length;}
return{begin:begin,end:end};}},unmask:function(){return this.trigger("unmask");},mask:function(mask,settings){var input,defs,tests,partialPosition,firstNonMaskPos,len;if(!mask&&this.length>0){input=$(this[0]);var f=input.data($.mask.dataName);return f?f():null;}
settings=$.extend({placeholder:$.mask.placeholder,completed:null},settings);defs=$.mask.definitions;tests=[];partialPosition=len=mask.length;firstNonMaskPos=null;$.each(mask.split(""),function(i,c){if(c=='?'){len--;partialPosition=i;}else if(defs[c]){tests.push(new RegExp(defs[c]));if(firstNonMaskPos===null){firstNonMaskPos=tests.length-1;}}else{tests.push(null);}});return this.trigger("unmask").each(function(){var input=$(this),buffer=$.map(mask.split(""),function(c,i){if(c!='?'){return defs[c]?settings.placeholder:c;}}),focusText=input.val();function seekNext(pos){while(++pos<len&&!tests[pos]);return pos;}
function seekPrev(pos){while(--pos>=0&&!tests[pos]);return pos;}
function shiftL(begin,end){var i,j;if(begin<0){return;}
for(i=begin,j=seekNext(end);i<len;i++){if(tests[i]){if(j<len&&tests[i].test(buffer[j])){buffer[i]=buffer[j];buffer[j]=settings.placeholder;}else{break;}
j=seekNext(j);}}
writeBuffer();input.caret(Math.max(firstNonMaskPos,begin));}
function shiftR(pos){var i,c,j,t;for(i=pos,c=settings.placeholder;i<len;i++){if(tests[i]){j=seekNext(i);t=buffer[i];buffer[i]=c;if(j<len&&tests[j].test(t)){c=t;}else{break;}}}}
function keydownEvent(e){var k=e.which,pos,begin,end;if(k===8||k===46||(iPhone&&k===127)){pos=input.caret();begin=pos.begin;end=pos.end;if(end-begin===0){begin=k!==46?seekPrev(begin):(end=seekNext(begin-1));end=k===46?seekNext(end):end;}
clearBuffer(begin,end);shiftL(begin,end-1);e.preventDefault();}else if(k==27){input.val(focusText);input.caret(0,checkVal());e.preventDefault();}}
function keypressEvent(e){var k=e.which,pos=input.caret(),p,c,next;if(e.ctrlKey||e.altKey||e.metaKey||k<32){return;}else if(k){if(pos.end-pos.begin!==0){clearBuffer(pos.begin,pos.end);shiftL(pos.begin,pos.end-1);}
p=seekNext(pos.begin-1);if(p<len){c=String.fromCharCode(k);if(tests[p].test(c)){shiftR(p);buffer[p]=c;writeBuffer();next=seekNext(p);if(android){setTimeout($.proxy($.fn.caret,input,next),0);}else{input.caret(next);}
if(settings.completed&&next>=len){settings.completed.call(input);}}}
e.preventDefault();}}
function clearBuffer(start,end){var i;for(i=start;i<end&&i<len;i++){if(tests[i]){buffer[i]=settings.placeholder;}}}
function writeBuffer(){input.val(buffer.join(''));}
function checkVal(allow){var test=input.val(),lastMatch=-1,i,c;for(i=0,pos=0;i<len;i++){if(tests[i]){buffer[i]=settings.placeholder;while(pos++<test.length){c=test.charAt(pos-1);if(tests[i].test(c)){buffer[i]=c;lastMatch=i;break;}}
if(pos>test.length){break;}}else if(buffer[i]===test.charAt(pos)&&i!==partialPosition){pos++;lastMatch=i;}}
if(allow){writeBuffer();}else if(lastMatch+1<partialPosition){input.val("");clearBuffer(0,len);}else{writeBuffer();input.val(input.val().substring(0,lastMatch+1));}
return(partialPosition?i:firstNonMaskPos);}
input.data($.mask.dataName,function(){return $.map(buffer,function(c,i){return tests[i]&&c!=settings.placeholder?c:null;}).join('');});if(!input.attr("readonly"))
input.one("unmask",function(){input.unbind(".mask").removeData($.mask.dataName);}).bind("focus.mask",function(){clearTimeout(caretTimeoutId);var pos,moveCaret;focusText=input.val();pos=checkVal();caretTimeoutId=setTimeout(function(){writeBuffer();if(pos==mask.length){input.caret(0,pos);}else{input.caret(pos);}},10);}).bind("blur.mask",function(){checkVal();if(input.val()!=focusText)
input.change();}).bind("keydown.mask",keydownEvent).bind("keypress.mask",keypressEvent).bind(pasteEventName,function(){setTimeout(function(){var pos=checkVal(true);input.caret(pos);if(settings.completed&&pos==input.val().length)
settings.completed.call(input);},0);});checkVal();});}});     
var DragMaster=(function(){var dragObject;var mouseDownAt;var currentDropTarget;function mouseDown(e){e=EventHelper.fixMouseEvent(e);if(e.which!=1)return;mouseDownAt={x:e.pageX,y:e.pageY,element:this}
addDocumentEventHandlers();return false;}
function mouseMove(e){if(mouseDownAt){if(Math.abs(mouseDownAt.x-e.pageX)<5&&Math.abs(mouseDownAt.y-e.pageY)<5){return false;}
var elem=mouseDownAt.element;dragObject=elem.dragObject;var mouseOffset=getMouseOffset(elem,mouseDownAt.x,mouseDownAt.y);mouseDownAt=null;dragObject.onDragStart(mouseOffset);}
dragObject.onDragMove(e.pageX,e.pageY);var newTarget=getCurrentTarget(e);if(currentDropTarget!=newTarget){if(currentDropTarget){currentDropTarget.onLeave()}
if(newTarget){newTarget.onEnter();}
currentDropTarget=newTarget;}
return false;}
function mouseUp(){if(!dragObject){mouseDownAt=null;}else{if(currentDropTarget&&currentDropTarget.accept(dragObject)){dragObject.onDragSuccess(currentDropTarget);}else{dragObject.onDragFail(currentDropTarget);}
dragObject=null;}
removeDocumentEventHandlers();}
function getMouseOffset(target,x,y){var docPos=DOMHelper.getOffset(target)
return{x:x-docPos.left,y:y-docPos.top}}
function getMouseOffset(target,x,y){var docPos=DOMHelper.getOffset(target)
return{x:x-docPos.left,y:y-docPos.top}}
function getCurrentTarget(e){var elem=e.target;while(elem){if(elem.dropTarget&&elem.dropTarget.canAccept(dragObject)){return elem.dropTarget}
elem=elem.parentNode}
return null;}
function addDocumentEventHandlers(){document.onmousemove=mouseMove;document.onmouseup=mouseUp;document.ondragstart=document.body.onselectstart=function(){return false};}
function removeDocumentEventHandlers(){document.onmousemove=document.onmouseup=document.ondragstart=document.body.onselectstart=null;}
return{makeDraggable:function(element){EventHelper.add(element,"mousedown",mouseDown,true);}}}()) 
function DragObject(element,options){element.dragObject=this;this.element=element;this.m_offsetX=(options&&options.offsetX!=undefined)?options.offsetX:0;this.m_offsetY=(options&&options.offsetY!=undefined)?options.offsetY:0;this.m_position=options.position||this.DEF_POSITION;this.m_onDragMove=options.onDragMove;DragMaster.makeDraggable(element);}
DragObject.prototype.DRAG_CLASS="dragging";DragObject.prototype.DEF_POSITION="absolute";DragObject.prototype.rememberPosition;DragObject.prototype.mouseOffset;DragObject.prototype.position;DragObject.prototype.onDragStart=function(offset){var s=this.element.style;this.rememberPosition={top:s.top,left:s.left,position:s.position,h:this.element.clientHeight,w:this.element.clientWidth};s.position=this.m_position;this.mouseOffset=offset;DOMHelper.addClass(this.element,this.DRAG_CLASS);}
DragObject.prototype.hide=function(){this.element.style.display="none";}
DragObject.prototype.show=function(){this.element.style.display="";}
DragObject.prototype.onDragMove=function(x,y){if(this.m_onDragMove){this.m_onDragMove.call(this,x,y);}else{this.element.style.top=(y-this.mouseOffset.y-this.m_offsetY)+"px";this.element.style.left=(x-this.mouseOffset.x-this.m_offsetX)+"px";}}
DragObject.prototype.onDragSuccess=function(dropTarget){DOMHelper.delClass(this.element,this.DRAG_CLASS);}
DragObject.prototype.onDragFail=function(dropObject){var s=this.element.style;s.top=this.rememberPosition.top;s.left=this.rememberPosition.left;s.position=this.rememberPosition.position;DOMHelper.delClass(this.element,this.DRAG_CLASS);if(dropObject){dropObject.onLeave();}}
DragObject.prototype.toString=function(){return element.id;} 
function DropTarget(element){this.element=element;element.dropTarget=this;}
DropTarget.prototype.CLASS_NAME='uponMe';DropTarget.prototype.canAccept=function(dragObject){return true;}
DropTarget.prototype.accept=function(dragObject){this.onLeave();dragObject.hide();return true;}
DropTarget.prototype.onLeave=function(){DOMHelper.delClass(this.element,this.CLASS_NAME);}
DropTarget.prototype.onEnter=function(){DOMHelper.addClass(this.element,this.CLASS_NAME);}
DropTarget.prototype.toString=function(){return this.element.id;} 
function decodeLine(encoded){var len=encoded.length;var index=0;var array=[];var lat=0;var lng=0;while(index<len){var b;var shift=0;var result=0;do{b=encoded.charCodeAt(index++)-63;result|=(b&0x1f)<<shift;shift+=5;}while(b>=0x20);var dlat=((result&1)?~(result>>1):(result>>1));lat+=dlat;shift=0;result=0;do{b=encoded.charCodeAt(index++)-63;result|=(b&0x1f)<<shift;shift+=5;}while(b>=0x20);var dlng=((result&1)?~(result>>1):(result>>1));lng+=dlng;array.push([lat*1e-5,lng*1e-5]);}
return array;} 
function extend(Child,Parent){var F=function(){};F.prototype=Parent.prototype;Child.prototype=new F();Child.prototype.constructor=Child;Child.superclass=Parent.prototype;} 
function App(id,options){this.setId(id);options=options||{};options.servVars=options.servVars||{};options.servVars.basePath=(options.servVars.basePath&&options.servVars.basePath.length)?options.servVars.basePath:window.location.origin;this.setHost(options.servVars.basePath);this.setScript(options.script);this.m_servVars=options.servVars;var con_opts={"host":options.servVars.basePath,"token":this.m_servVars.token,"tokenr":this.m_servVars.tokenr,"tokenExpires":DateHelper.strtotime(this.m_servVars.tokenExpires)};this.setServConnector(new ServConnector(con_opts));this.m_constantManager=new ConstantManager({"XMLString":options.constantXMLString});if(window["SessionVarManager"]){this.m_sessionVarManager=new SessionVarManager();}
this.m_cashData={};this.m_openedForms={};this.m_templateParams={};this.setPaginationClass(options.paginationClass||GridPagination);window.addEventListener("offline",(event)=>{console.log("The network connection has been lost.",DateHelper.time());});window.addEventListener("online",(event)=>{console.log("The network connection has been restored.",DateHelper.time());});this.m_soundEnabled=options.soundEnabled;}
App.prototype.DEF_dateEditMask="99/99/9999";App.prototype.DEF_dateFormat="d/m/Y";App.prototype.DEF_dateTimeEditMask="99/99/9999 99:99:99";App.prototype.DEF_dateTimeFormat="d/m/Y H:i:s";App.prototype.DEF_phoneEditMask="+7-(999)-999-99-99";App.prototype.DEF_timeEditMask="99:99";App.prototype.DEF_timeFormat="H:i:s";App.prototype.DEF_LOCALE="ru";App.prototype.VERSION="2.1.014";App.prototype.HISTORY_KEEP_LEN=20;App.prototype.WIN_MES_WIDTH_DEF=18;App.prototype.WIN_MES_POS_DEF="overlap";App.prototype.UPDATE_INST_POSTPONE_DELAY=5*60*1000;App.prototype.SERV_RESPONSE_MODEL_ID="ModelServResponse";App.prototype.EVENT_MODEL_ID="Event_Model";App.prototype.INSERTED_KEY_MODEL_ID="InsertedId_Model";App.prototype.METH_RES_MODEL_ID="MethodResult";App.prototype.CON_ER_SHOW_FREQ=60*5*1000;App.prototype.LOGOUT_EVNT_PREF="User.logout."
App.prototype.m_id;App.prototype.m_host;App.prototype.m_script;App.prototype.m_bsCol;App.prototype.m_winClass;App.prototype.m_servVars;App.prototype.m_constantManager;App.prototype.m_sessionVarManager;App.prototype.m_servConnector;App.prototype.m_dateEditMask;App.prototype.m_dateFormat;App.prototype.m_dateTimeEditMask;App.prototype.m_dateTimeFormat;App.prototype.m_timeFormat;App.prototype.m_phoneEditMask;App.prototype.m_timeEditMask;App.prototype.m_locale;App.prototype.m_cashData;App.prototype.m_openedForms;App.prototype.m_templates;App.prototype.m_templateParams;App.prototype.m_paginationClass;App.prototype.m_enums;App.prototype.m_predefinedItems;App.prototype.m_tabManager;App.prototype.m_updateInstPostponed;App.prototype.m_appSrv;App.prototype.m_phpAppServer=false;App.prototype.m_soundEnabled;App.prototype.m_openedWindows={};App.prototype.setHost=function(host){this.m_host=host;}
App.prototype.getHost=function(){return this.m_host;}
App.prototype.setScript=function(v){this.m_script=v;}
App.prototype.getScript=function(){return this.m_script;}
App.prototype.getBsCol=function(v){return window.getBsCol(v);}
App.prototype.setWinClass=function(winClass){this.m_winClass=winClass;}
App.prototype.getWinClass=function(winClass){return this.m_winClass;}
App.prototype.getServVars=function(){return this.m_servVars;}
App.prototype.getServVar=function(id){return this.m_servVars[id];}
App.prototype.setServVar=function(id,val){this.m_servVars[id]=val;}
App.prototype.getConstantManager=function(){return this.m_constantManager;}
App.prototype.getSessionVarManager=function(){return this.m_sessionVarManager;}
App.prototype.getServConnector=function(){return this.m_servConnector;}
App.prototype.setServConnector=function(v){this.m_servConnector=v;}
App.prototype.getId=function(){return this.m_id;}
App.prototype.setId=function(id){this.m_id=id;}
App.prototype.setDateEditMask=function(v){this.m_dateEditMask=v;}
App.prototype.getDateEditMask=function(){return(this.m_dateEditMask)?this.m_dateEditMask:this.DEF_dateEditMask;}
App.prototype.setDateTimeEditMask=function(v){this.m_dateTimeEditMask=v;}
App.prototype.getDateTimeEditMask=function(){return(this.m_dateTimeEditMask)?this.m_dateTimeEditMask:this.DEF_dateTimeEditMask;}
App.prototype.setDateFormat=function(v){this.m_dateFormat=v;}
App.prototype.getDateFormat=function(){return(this.m_dateFormat)?this.m_dateFormat:this.DEF_dateFormat;}
App.prototype.setDateTimeFormat=function(v){this.m_dateTimeFormat=v;}
App.prototype.getDateTimeFormat=function(){return(this.m_dateTimeFormat)?this.m_dateTimeFormat:this.DEF_dateTimeFormat;}
App.prototype.setTimeFormat=function(v){this.m_timeFormat=v;}
App.prototype.getTimeFormat=function(){return(this.m_timeFormat)?this.m_timeFormat:this.DEF_timeFormat;}
App.prototype.setPhoneEditMask=function(v){this.m_phoneEditMask=v;}
App.prototype.getPhoneEditMask=function(){return(this.m_phoneEditMask)?this.m_phoneEditMask:this.DEF_phoneEditMask;}
App.prototype.setTimeEditMask=function(v){this.m_timeEditMask=v;}
App.prototype.getTimeEditMask=function(){return(this.m_timeEditMask)?this.m_timeEditMask:this.DEF_timeEditMask;}
App.prototype.getLocale=function(){return this.m_servVars["locale_id"]||this.DEF_LOCALE;}
App.prototype.formatError=function(erCode,erStr){var p=erStr.indexOf(" (SQLSTATE P0001)");if(p>=0){erStr=erStr.substring(0,p+1);}
p=erStr.indexOf("ERROR: ");if(p>=0){erStr=erStr.substring(p+"ERROR: ".length);}
erCode=undefined;return(erStr+((erCode)?(", код:"+erCode):""));}
App.prototype.getCashData=function(id){return this.m_cashData[id];}
App.prototype.setCashData=function(id,val){this.m_cashData[id]=val;}
App.prototype.getOpenedForms=function(){return this.m_openedForms;}
App.prototype.addOpenedForm=function(id,form){this.m_openedForms[id]=form;}
App.prototype.delOpenedForm=function(id){delete this.m_openedForms[id];}
App.prototype.numberFormat=function(val,prec){return CommonHelper.numberFormat(val,prec,CommonHelper.getDecimalSeparator()," ");}
App.prototype.addTemplate=function(id,tmpl){this.m_templates[id]=tmpl;}
App.prototype.downloadServerTemplate=function(serverTemplateId,classId,callBack){var self=this;this.getServConnector().sendGet({"t":serverTemplateId,"v":"ViewXML"},(callBack!=undefined),(function(serverTemplateId,classId,callBack){return function(eN,eS,resp){var m_list=resp.getModels();if(m_list&&m_list[serverTemplateId+"-template"]){self.m_templates[classId]=m_list[serverTemplateId+"-template"].innerHTML;if(callBack){callBack(self.m_templates[classId]);}}}})(serverTemplateId,classId,callBack),"xml");}
App.prototype.getTemplate=function(id,callBack){var tmpl=this.m_templates?this.m_templates[id]:null;if(!tmpl&&this.m_serverTemplateIds){var srv_tmpl_id,srv_tmpl_exists;if(CommonHelper.inArray(id,this.m_serverTemplateIds)>=0){srv_tmpl_id=id;srv_tmpl_exists=true;}else{var v_pos=id.lastIndexOf("_View");if(v_pos>=0){var srv_tmpl_id=id.substring(0,v_pos);if(CommonHelper.inArray(srv_tmpl_id,this.m_serverTemplateIds)>=0){srv_tmpl_exists=true;}}}
if(srv_tmpl_exists){console.log("App.prototype.getTemplate downloadServerTemplate srv_tmpl_id="+srv_tmpl_id)
this.downloadServerTemplate(srv_tmpl_id,id,callBack);if(!callBack){tmpl=this.m_templates[id];}}}
return tmpl;}
App.prototype.setTemplate=function(id,v){this.m_templates[id]=v;}
App.prototype.getPaginationClass=function(id){return this.m_paginationClass;}
App.prototype.setPaginationClass=function(v){this.m_paginationClass=v;}
App.prototype.getDataTypes=function(){return this.m_dataTypes;}
App.prototype.setDataTypes=function(v){this.m_dataTypes=v;}
App.prototype.getDataType=function(id){return this.m_dataTypes[id];}
App.prototype.setEnums=function(v){this.m_enums=v;}
App.prototype.getEnums=function(){return this.m_enums;}
App.prototype.getEnum=function(enumId,valId){if(!this.m_enums[enumId])throw Error("Enum not found "+enumId)
return this.m_enums[enumId][this.getLocale()+"_"+valId];}
App.prototype.setPredefinedItems=function(v){this.m_predefinedItems=v;}
App.prototype.getPredefinedItems=function(){return this.m_predefinedItems;}
App.prototype.getPredefinedItem=function(dataType,item){return this.m_predefinedItems[dataType][item];}
App.prototype.storageSet=function(id,val){if(localStorage)localStorage.setItem(id,val);}
App.prototype.storageGet=function(id){if(localStorage)return localStorage.getItem(id);}
App.prototype.getTimeZoneOffsetStr=function(){return DateHelper.getTimeZoneOffsetStr();}
App.prototype.historyPush=function(stateObj){if(window.history){stateObj.urlHash=CommonHelper.hash(stateObj.url);if(!window.history.length||!window.history.state||(window.history.state&&window.history.state.urlHash!=stateObj.urlHash)){window.history.pushState(stateObj,stateObj.title,"");}}}
App.prototype.showMenuItem=function(itemNode,c,f,t,extra,title){window.setGlobalWait(true);var self=this;var url_str="?c="+c;var par_v="ViewXML";var par={"v":"ViewXML"};if(c)par.c=c;if(f){par.f=f;url_str+="&f="+f;}
if(extra){var par_ar=extra.split("&");for(var i=0;i<par_ar.length;i++){var par_pair=par_ar[i].split("=");if(par_pair.length==2&&par_pair[1]){par[par_pair[0]]=par_pair[1];url_str+="&"+par_pair[0]+"="+par_pair[1];if(par_pair[0]=="v"){par_v=par_pair[1];}}}}
this.m_storedTemplate={"id":t,"template":null,"dataModelId":null,"variantStorage":null};par.t=t;url_str+="&t="+t;url_str+="&v="+par_v;this.historyPush({"c":c,"f":f,"t":t,"extra":extra,"title":title,"url":url_str});this.getServConnector().sendGet(par,false,function(eN,eS,resp){if(eN!=0){window.setGlobalWait(false);window.showError(eS);}
else{self.renderContentXML(resp);window.setGlobalWait(false);}},"xml");return false;}
App.prototype.renderContentXML=function(resp){try{var data_n=CommonHelper.nd("windowData");if(!data_n)return;if(this.m_view){this.m_view.delDOM();delete this.m_view;}
if(window["page_views"]){for(var v_id in window["page_views"]){window["page_views"][v_id].delDOM();delete window["page_views"][v_id];}
delete window["page_views"];}
while(data_n.firstChild){data_n.removeChild(data_n.firstChild);}
var v_opts={"models":{}};var resp_models=resp.getModels();for(var m_id in resp_models){var sys_model=resp_models[m_id].getAttribute("sysModel");if(sys_model=="1"&&resp_models[m_id].getAttribute("templateId")){v_opts.template=resp_models[m_id].innerHTML;}
else if(sys_model=="1"){}
else{if(window[m_id]){var model_constr=eval(m_id);v_opts.models[m_id]=new model_constr({"data":resp.getModelData(m_id)});}
else{v_opts.models[m_id]=new ModelXML(m_id,{"data":resp.getModelData(m_id)});}}}
this.m_storedTemplate.variantStorage={"name":this.m_storedTemplate.id,"model":null};if(v_opts.models.VariantStorage_Model){this.m_storedTemplate.variantStorage.model=v_opts.models.VariantStorage_Model;this.m_storedTemplate.variantStorage.model.getRow(0);}
v_opts.variantStorage=this.m_storedTemplate.variantStorage;var view=eval(this.m_storedTemplate.id+"_View");this.m_view=new view(this.m_storedTemplate.id,v_opts);this.m_view.toDOM(data_n);}
catch(e){window.onerror(e.message,"App.js",369,1);}
return false;}
App.prototype.showAbout=function(){window.setGlobalWait(true);var contr=new About_Controller(this);contr.run("get_object",{"t":"About","ok":function(resp){var v=new About_View("About_View",{"template":resp.getModelData("About-template").innerHTML,"models":{"About_Model":new About_Model({"data":resp.getModelData("About_Model")})}});window.setGlobalWait(false);WindowAbout.show(v);},"fail":function(){window.setGlobalWait(false);}})}
App.prototype.initPage=function(){if(this.m_appSrv){this.m_appSrv.disconnect();}
this.getServConnector().quit();if(this.m_openedWindows){for(var id in this.m_openedWindows){if(this.m_openedWindows[id]){this.m_openedWindows[id].close();}}}
window.location.href=this.getServVar("basePath");}
App.prototype.quit=function(){var self=this;(new User_Controller()).run("logout",{"all":function(){self.initPage();}});window.setGlobalWait(true);return false;}
App.prototype.getCurrentView=function(){return this.m_view;}
App.prototype.setWinMessageStyle=function(v){this.m_winMessageStyle=v}
App.prototype.getWinMessageStyle=function(){if(!this.m_winMessageStyle){var s_var=this.getServVar("win_message_style");this.m_winMessageStyle=CommonHelper.unserialize(s_var);if(CommonHelper.isEmpty(this.m_winMessageStyle)){this.m_winMessageStyle={"win_width":18,"win_position":"overlap"}}}
return this.m_winMessageStyle;}
App.prototype.setUpdateInstPostponed=function(v,delay){this.m_updateInstPostponed=v;if(v){var self=this;setTimeout(function(){self.setUpdateInstPostponed(false);},delay);}}
App.prototype.getUpdateInstPostponed=function(v){return this.m_updateInstPostponed;}
App.prototype.getUpdateInstPostponeDelay=function(){if(!this.m_updateInstPostponeDelay){this.m_updateInstPostponeDelay=this.UPDATE_INST_POSTPONE_DELAY;}
return this.m_updateInstPostponeDelay;}
App.prototype.getAppSrv=function(){return this.m_appSrv;}
App.prototype.initAppSrv=function(appSrvOptions){if(window["AppSrv"]&&appSrvOptions){console.log("App.prototype.initAppSrv")
var self=this;try{this.m_appSrv=new AppSrv(appSrvOptions);this.m_appSrv.connect();this.subscribeToEventSrv();}
catch(e){if(window.showTempError){window.showTempError(this.ER_WS_NOT_SUPPERTED);}
else{throw new Error(this.ER_WS_NOT_SUPPERTED);}}}}
App.prototype.subscribeToEventSrv=function(clientId){console.log("App.prototype.subscribeToEventSrv")
var self=this;this.m_appSrv.subscribe({"events":[{"id":"Constant.update"},{"id":CommonHelper.md5("SessionVar.update."+this.getServConnector().getAccessToken())},{"id":this.LOGOUT_EVNT_PREF+self.getServConnector().getAccessToken()},this.m_phpAppServer?{"id":"SessionVar.setEmitterId"}:null],"onEvent":function(json){console.log("App.prototype.subscribeToEventSrv onEvent")
console.log(json)
if(json.eventId==(self.LOGOUT_EVNT_PREF+self.getServConnector().getAccessToken())){self.initPage();}else if(json.eventId=="SessionVar.setEmitterId"&&json.params&&json.params.emitterId&&self.m_sessionVarManager){CookieManager.set("eventServerEmitterId",json.params.emitterId,{"expires":self.m_servVars.tokenExpires});}else if(json.eventId=="Constant.update"&&self.m_constantManager){self.m_constantManager.onEventSrvMessage(json);}else if(json.eventId==CommonHelper.md5("SessionVar.update."+self.getServConnector().getAccessToken())&&self.m_sessionVarManager){self.m_sessionVarManager.onEventSrvMessage(json);}},"onOpen":function(){console.log("App.onSrvOpen")
var tm=(new Date()).getTime();if(!self.m_lastConnOpenTime||(tm-self.m_lastConnOpenTime)>self.CON_ER_SHOW_FREQ){window.showTempNote(self.NT_WS_CONNECTED);}
self.m_lastConnOpenTime=tm;},"onClose":function(message){if(message.code!=undefined&&message.code>1000){var tm=(new Date()).getTime();if(!self.m_lastConnErrTime||(tm-self.m_lastConnErrTime)>self.CON_ER_SHOW_FREQ){window.showTempError(self.ER_WS_NOT_CONNECTED);}
self.m_lastConnErrTime=tm;}}});}
App.prototype.getEventIdOnController=function(contr,methId){var contr_name=this.getEventPrefOnController(contr);return(contr_name?contr_name+"."+methId:null);}
App.prototype.getEventPrefOnController=function(contr){var contr_name=contr?contr.constructor.name||CommonHelper.functionName(contr.constructor):null;return contr_name?contr_name.substr(0,contr_name.indexOf("_")):null;}
App.prototype.onGUIError=function(erObj){if(window["GUIError_Controller"]){var pm=(new GUIError_Controller()).getPublicMethod("notify");pm.setFieldValue("error",JSON.stringify(erObj));pm.run();}}
App.prototype.hideDbExceptionForm=function(){if(this.m_dbExceptionForm){this.m_dbExceptionForm.close();}}
App.prototype.getLsnValueFromResponse=function(resp){if(resp&&typeof(resp)=="object"&&resp.modelExists&&resp.modelExists(this.METH_RES_MODEL_ID)){var lsn_model;if(CommonHelper.constructorName(resp)=="ResponseXML"&&window['ModelXML']){lsn_model=new ModelXML(this.METH_RES_MODEL_ID,{"data":resp.getModelData(this.METH_RES_MODEL_ID)});}else if(CommonHelper.constructorName(resp)=="ResponseJSON"&&window['ModelJSON']){lsn_model=new ModelJSON(this.METH_RES_MODEL_ID,{"data":resp.getModelData(this.METH_RES_MODEL_ID)});}
if(lsn_model&&lsn_model.getNextRow()){return lsn_model.getFieldValue("lsn");}}
return undefined;}
App.prototype.getSoundEnabled=function(){return this.m_soundEnabled;} 
function AppWin(options){options=options||{};this.m_msg=new WindowMessage();this.m_tempMsg=new WindowTempMessage();var self=this;window.onerror=function(msg,url,line,col,error){self.onError(msg,url,line,col,error);};if(window.history){window.onpopstate=function(e){if(e.state){window.getApp().showMenuItem(null,e.state.c,e.state.f,e.state.t,e.state.extra,e.state.title);}}}
window.getApp=function(){return options.app;}
window.getWidthType=function(){return options.widthType?options.widthType:"sm";}
window.getBsCol=function(v){return(options.bsCol?(options.bsCol+((v!=undefined)?v.toString():"")):("col-"+this.getWidthType()+"-"+((v!=undefined)?v.toString():"")));};window.showMsg=function(opts){opts.bsCol=window.getBsCol();self.m_msg.show(opts);};window.showError=function(msg,callBack,timeout){window.showMsg({"type":self.m_msg.TP_ER,"text":msg,"callBack":callBack,"timeout":timeout});};window.showWarn=function(msg,callBack,timeout){window.showMsg({"type":self.m_msg.TP_WARN,"text":msg,"callBack":callBack,"timeout":timeout});};window.showNote=function(msg,callBack,timeout){window.showMsg({"type":self.m_msg.TP_NOTE,"text":msg,"callBack":callBack,"timeout":timeout});};window.showOk=function(msg,callBack,timeout){window.showMsg({"type":self.m_msg.TP_OK,"text":msg,"callBack":callBack,"timeout":timeout});};window.showTempMsg=function(opts){self.m_tempMsg.show(opts);};window.showTempNote=function(msg,callBack,timeout){window.showTempMsg({"type":self.m_tempMsg.TP_NOTE,"content":msg,"callBack":callBack,"timeout":timeout});};window.showTempOk=function(msg,callBack,timeout){window.showTempMsg({"type":self.m_tempMsg.TP_OK,"content":msg,"callBack":callBack,"timeout":timeout});if(window.getApp().getSoundEnabled()){var audio=new Audio('sounds/mixkit-long-pop-2358.mp3');audio.play();}};window.showTempError=function(msg,callBack,timeout){window.showTempMsg({"type":self.m_tempMsg.TP_ER,"content":msg,"callBack":callBack,"timeout":timeout});if(window.getApp().getSoundEnabled()){var audio=new Audio('sounds/mixkit-software-interface-start-2574.mp3');audio.play();}};window.showTempWarn=function(msg,callBack,timeout){window.showTempMsg({"type":self.m_tempMsg.TP_WARN,"content":msg,"callBack":callBack,"timeout":timeout})};window.resetError=function(){};window.setGlobalWait=function(isWait){var n=document.getElementById("waiting");if(n)n.style=isWait?"display:block;":"display:none;"}}
AppWin.prototype.onError=function(msg,url,line,col,error){var app=window.getApp();var d=app.getServVar("debug");var m_debug=(d=="1"||d===true||d===undefined);if(error instanceof FatalException){error.show();}
else{var str=msg;if(m_debug){str=str+"\nurl: "+url+"\nline: "+line;if(console){console.log(str);if(error&&error.stack)console.log(error.stack);if(console.trace)console.trace();}}
else{var er_pref="Error: ";if(str.substr(0,er_pref.length)==er_pref){str=str.substr(er_pref.length);}
er_pref="Uncaught Error";if(str.substr(0,er_pref.length)==er_pref){str=str.substr(er_pref.length);}
var er_postf=" (SQLSTATE P0001)";if(str.substr(str.length-er_postf.length+1)==er_postf){str=str.substr(0,str.length-er_postf.length+1);}}
window.showError(str);}
if(!m_debug&&app.onGUIError){app.onGUIError({"msg":msg,"url":url,"col":col,"error":error});}
return false;} 
var CommonHelper={format:function(str,params){if(!str)return"";var r=str;if(typeof(params)=="string"){params=[params];}
for(var i=0;i<params.length;i++){r=r.replace("%",params[i]);}
return r;},numberFormat:function(number,decimals,dec_point,thousands_sep){var i,j,kw,kd,km;var neg=(number<0);if(neg){number*=-1;}
if(isNaN(decimals=Math.abs(decimals))){decimals=2;}
if(dec_point==undefined){dec_point=",";}
if(thousands_sep==undefined){thousands_sep=".";}
i=parseInt(number=(+number||0).toFixed(decimals))+"";if((j=i.length)>3){j=j%3;}else{j=0;}
km=(j?i.substr(0,j)+thousands_sep:"");kw=i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+thousands_sep);kd=(decimals?dec_point+Math.abs(number-i).toFixed(decimals).replace(/-/,0).slice(2):"");return(neg?"-":"")+km+kw+kd;},byteForamt:function(size,precision){return this.byteFormat(size,precision);},byteFormat:function(size,precision,rightPad){precision=(precision==undefined)?2:precision;var i=Math.floor(Math.log(size)/Math.log(1024));return(size/Math.pow(1024,i)).toFixed(precision)*1+(rightPad?" ":"")+['B','kB','MB','GB','TB'][i];},maskFormat:function(val,mask){var input=new Control(null,"INPUT",{"attrs":{"value":val},"visible":false});$(input.getNode()).mask(mask);return input.m_node.value;},nd:function(x,docum){if(docum==undefined){docum=window.document;}
return(x)?docum.getElementById(x):null;},isIE:function(){var browserSpecs=this.getBrowser();return(browserSpecs.name=='IE'||browserSpecs.name=='MSIE');},getIEVersion:function(){var browserSpecs=this.getBrowser();return browserSpecs.version;},getBrowser:function(){var ua=navigator.userAgent,tem,M=ua.match(/(opera|chrome|safari|firefox|msie|yabrowser|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(M[1])){tem=/\brv[ :]+(\d+)/g.exec(ua)||[];return{name:'IE',version:(tem[1]||'')};}
if(M[1]==='Chrome'){tem=ua.match(/\b(OPR|Edge)\/(\d+)/);if(tem!=null)return{name:tem[1].replace('OPR','Opera'),version:tem[2]};}
M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,'-?'];if((tem=ua.match(/version\/(\d+)/i))!=null)M.splice(1,1,tem[1]);return{name:M[0],version:M[1]};},createXHR:function(){var xhr;if(window.XMLHttpRequest){xhr=new XMLHttpRequest();}
else{xhr=new ActiveXObject("Microsoft.XMLHTTP");}
return xhr;},createCORS:function(){var xhr=new XMLHttpRequest();if("withCredentials"in xhr){}
else if(typeof XDomainRequest!="undefined"){xhr=new XDomainRequest();}
else{xhr=null;throw new Error("CORS is not supported by the browser");}
return xhr;},isEmpty:function(x,p){for(p in x)return!1;return!0;},isArray:function(o){if(Array.isArray){return Array.isArray(o);}
else{return(Object.prototype.toString.call(o)==='[object Array]');}},clone:function(obj){var F=function(){};F.prototype=obj;return new F();},uniqid:function(){var chars='0123456789abcdef'.split('');var uuid=[],rnd=Math.random,r;uuid[8]=uuid[13]=uuid[18]=uuid[23]='-';uuid[14]='4';for(var i=0;i<36;i++){if(!uuid[i]){r=0|rnd()*16;uuid[i]=chars[(i==19)?(r&0x3)|0x8:r&0xf];}}
return uuid.join('');},array2json:function(arr){return JSON.stringify(arr);},json2obj:function(json_string){return(json_string)?JSON.parse(json_string):json_string;},serialize:function(o){if(typeof(o)==="string"){return o;}
else if(typeof(o)==="number"||typeof(o)==="boolean"){return o.toString();}
else if(typeof(o)==="object"&&DateHelper.isValidDate(o)){if(window["FieldDateTimeTZ"]){return(FieldDateTimeTZ({"value":o})).getValueXHR();}
else{return o;}}
else{return JSON.stringify(o);}},unserialize:function(json_string){return(json_string&&typeof(json_string)=="string"&&json_string.length&&(json_string.substring(0,1)=="{"||json_string.substring(0,1)=="["))?JSON.parse(json_string,function(key,val){if(val&&typeof val=="object"&&"descr"in val&&"keys"in val){if("dataType"in val&&window[val.dataType]){val=new window[val.dataType](val);}
else{val=new RefType(val);}}
return val;}):json_string;},findPosX:function(obj){var curleft=0;if(obj.offsetParent){while(1){curleft+=obj.offsetLeft;if(!obj.offsetParent){break;}
obj=obj.offsetParent;}}else if(obj.x){curleft+=obj.x;}
return curleft;},findPosY:function(obj){var curtop=0;if(obj.offsetParent){while(1){curtop+=obj.offsetTop;if(!obj.offsetParent){break;}
obj=obj.offsetParent;}}else if(obj.y){curtop+=obj.y;}
return curtop;},getDecimalSeparator:function(){var n=1.1;n=n.toLocaleString().substring(1,2);return n;},escapeDoubleQuotes:function(str){return str.replace(/\\([\s\S])|(")/g,"\\$1$2");},longString:function(funcWrapper){var funcString=funcWrapper.toString();var funcDefinitionRe=/^function\s*[a-zA-Z0-9_$]*\s*\(\s*\)\s*{\s*\/\*([\s\S]*)\*\/\s*}\s*$/g;var wantedString=funcString.replace(funcDefinitionRe,"$1").trim();return wantedString;},merge:function(o1,o2){for(var id in o2){o1[id]=o2[id];}},getClassName:function(o){return Object.prototype.toString.call(o).match(/^\[object\s(.*)\]$/)[1];},md5:function(s){return hex_md5(s);},dateInArray:function(needle,haystack){for(var i=0;i<haystack.length;i++){if(needle.getTime()===haystack[i].getTime()){return i;}}
return-1;},inArray:function(v,ar){var res;if(typeof(v)=="object"&&DateHelper.isValidDate(v)){res=this.dateInArray(v,ar);}
else{res=$.inArray(v,ar);}
return res;},var_export:function(o){var output="";if(typeof(o)=="object"){for(var property in o){output+=property+": "+o[property]+"; ";}}
else{output=(o)?o.toString():"<undefined>";}
return output;},log:function(msg){if(console&&console.log){console.log(CommonHelper.var_export(msg));}},include_js:function(fl){var h=document.getElementsByTagName("head")[0];if(DOMHelper.getElementsByAttr(fl,h,"src",true,"script").length)
return;var fileref=document.createElement("script");fileref.setAttribute("type","text/javascript");fileref.setAttribute("src",fl);alert("appending "+fl)
h.appendChild(fileref);console.dir(fileref)},functionName:function(func){var result=/^function\s+([\w\$]+)\s*\(/.exec(func.toString());return result?result[1]:undefined;},constructorName:function(o){return(o.constructor&&o.constructor.name&&o.constructor.name.length)?o.constructor.name:this.functionName(o.constructor);},hash:function(str){var hash=0,i,chr;if(str.length===0)return hash;for(i=0;i<str.length;i++){chr=str.charCodeAt(i);hash=((hash<<5)-hash)+chr;hash|=0;}
return hash;},ID:function(){return'_'+Math.random().toString(36).substr(2,9);},getCookie:function(c_name){var c_value=" "+document.cookie;var c_start=c_value.indexOf(" "+c_name+"=");if(c_start==-1){c_value=null;}
else{c_start=c_value.indexOf("=",c_start)+1;var c_end=c_value.indexOf(";",c_start);if(c_end==-1){c_end=c_value.length;}
c_value=unescape(c_value.substring(c_start,c_end));}
return c_value;},setCookie:function(c_name,c_val,c_age,c_path){if(!c_path){c_path='/';}
if(c_age==undefined){c_age='0';}
document.cookie=c_name+'='+encodeURIComponent(c_val)+'; Max-Age='+c_age+'; path='+c_path+';SameSite=None;';},unsetCookie:function(c_name,c_path){if(!c_path){c_path='/';}
document.cookie=c_name+'=; Max-Age=0; path='+c_path;},calculateImgRatioFit:function(srcWidth,srcHeight,maxWidth,maxHeight){var ratio=Math.min(maxWidth/srcWidth,maxHeight/srcHeight);return{width:srcWidth*ratio,height:srcHeight*ratio};}} 
var DOMHelper={INVIS_CLASS:"hidden",elem:function(tagName,opts){var e=document.createElement(tagName);opts=opts||{};for(var i in opts){e.setAttribute(i,opts[i]);}
return(e);},setAttr:function(node,attrName,attrValue){if(typeof(node)=="string"){node=document.getElementById(node);}
if(node){node.setAttribute(attrName,attrValue);}},getAttr:function(node,name){if(typeof(node)=="string"){node=document.getElementById(node);}
if(node&&node.attributes){return node.getAttribute(name);}},delAttr:function(node,name){if(typeof(node)=="string"){node=document.getElementById(node);}
if(node){return node.removeAttribute(name);}},addAttr:function(node,name,val){this.setAttr(node,name,val);},delNode:function(node){if(typeof(node)=="string"){node=document.getElementById(node);}
if(node&&node.parentNode)
node.parentNode.removeChild(node);},delNodesOnClass:function(classVal){this.delNodesOnAttr("class",classVal)},delNodesOnAttr:function(attrName,attrVal){var body=document.getElementsByTagName("body")[0];var list=this.getElementsByAttr(attrVal,body,attrName);for(var i=0;i<list.length;i++){this.delNode(list[i]);}},delAllChildren:function(node){if(typeof(node)=="string"){node=document.getElementById(node);}
while(node&&node.firstChild){node.removeChild(node.firstChild);}},getElementsByAttr:function(classStr,node,attrName,uniq,tag){if(typeof(node)=="string"){node=document.getElementById(node);}
tag=tag||"*";var node=node||document;var list=node.getElementsByTagName(tag);var length=list.length;var classArray=classStr.split(/\s+/);var classes=classArray.length;var result=new Array();for(var i=0;i<length;i++){if(uniq&&result.length>0)break;for(var j=0;j<classes;j++){if(((attrName=='class')&&(list[i].className!=undefined&&typeof list[i].className=='string')&&(list[i].className.search('\\b'+classArray[j]+'\\b')!=-1))||((list[i].attributes!=undefined)&&(list[i].getAttribute(attrName)!=undefined)&&(list[i].getAttribute(attrName).search('\\b'+classArray[j]+'\\b')!=-1))){result.push(list[i]);break;}}}
return result;},swapClasses:function(node,new_class,old_class){if(typeof(node)=="string"){node=document.getElementById(node);}
if(node)node.className=node.className.replace(old_class,new_class);},addClass:function(node,classToAdd){var re=new RegExp("(^|\\s)"+classToAdd+"(\\s|$)","g");if(!node||re.test(node.className))return;node.className=(node.className+" "+classToAdd).replace(/\s+/g," ").replace(/(^ | $)/g,"");},delClass:function(node,classToRemove){if(typeof(node)=="string"){node=document.getElementById(node);}
if(!node||!node.className)return;var re=new RegExp("(^|\\s)"+classToRemove+"(\\s|$)","g");node.className=node.className.replace(re,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"");},hasClass:function(node,classToCheck){return(node)?(node.className&&new RegExp("(^|\\s)"+classToCheck+"(\\s|$)").test(node.className)):null;},getParentByTagName:function(node,tagName){if(typeof(node)=="string"){node=document.getElementById(node);}
var p=node.parentNode;if(p){var tn=tagName.toLowerCase();while(p&&p.nodeName.toLowerCase()!=tn){p=p.parentNode;}
return((p&&p.nodeName.toLowerCase()==tn)?p:null);}},getParentByAttrValue:function(node,attrName,attrVal){if(typeof(node)=="string"){node=document.getElementById(node);}
var p=node;if(p){while(p&&p.attributes&&p.getAttribute(attrName)!=attrVal){p=p.parentNode;}
return((p&&p.attributes&&p.getAttribute(attrName)==attrVal)?p:null);}},getElementIndex:function(node){var i=0;while(node=node.previousSibling){if(node.nodeType===1){i++;}}
return i;},xmlDocFromString:function(txt){return $.parseXML(txt);},htmlDocFromString:function(txt){return $.parseHTML(txt);},setTagName:function(node,tag){if(typeof(node)=="string"){node=document.getElementById(node);}
var oHTML=node.outerHTML;var tempTag=document.createElement(tag);var tName={original:node.tagName.toUpperCase(),change:tag.toUpperCase()};if(tName.original==tName.change)return;oHTML=oHTML.replace(RegExp("(^\<"+tName.original+")|("+tName.original+"\>$)","gi"),function(x){return(x.toUpperCase().replace(tName.original,tName.change));});tempTag.innerHTML=oHTML;if(tempTag.firstChild)node.parentElement.replaceChild(tempTag.firstChild,node);},swapNodes:function(a,b){var aParent=a.parentNode;var bParent=b.parentNode;var aHolder=document.createElement("div");var bHolder=document.createElement("div");aParent.replaceChild(aHolder,a);bParent.replaceChild(bHolder,b);aParent.replaceChild(b,aHolder);bParent.replaceChild(a,bHolder);},setParent:function(el,newParent){newParent.appendChild(el);},inViewport:function(el,fullyInView){var pageTop=$(window).scrollTop();var pageBottom=pageTop+$(window).height();var elementTop=$(el).offset().top;var elementBottom=elementTop+$(el).height();if(fullyInView===true){return((pageTop<elementTop)&&(pageBottom>elementBottom));}else{return((elementTop<=pageBottom)&&(elementBottom>=pageTop));}},getViewportHeight:function(){if(window.innerHeight!=window.undefined)return window.innerHeight;if(document.compatMode=='CSS1Compat')return document.documentElement.clientHeight;if(document.body)return document.body.clientHeight;return window.undefined;},getViewportWidth:function(){var offset=17;var width=null;if(window.innerWidth!=window.undefined)return window.innerWidth;if(document.compatMode=='CSS1Compat')return document.documentElement.clientWidth;if(document.body)return document.body.clientWidth;},getOffset:function(elem){if(elem.getBoundingClientRect){return this.getOffsetRect(elem);}
else{return this.getOffsetSum(elem);}},getOffsetRect:function(elem){var box=elem.getBoundingClientRect();var body=document.body;var docElem=document.documentElement;var scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop;var scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft;var clientTop=docElem.clientTop||body.clientTop||0;var clientLeft=docElem.clientLeft||body.clientLeft||0;var top=box.top+scrollTop-clientTop;var left=box.left+scrollLeft-clientLeft;return{top:Math.round(top),left:Math.round(left)};},getOffsetSum:function(elem){var top=0,left=0;while(elem){top=top+parseInt(elem.offsetTop);left=left+parseInt(elem.offsetLeft);elem=elem.offsetParent;}
return{top:top,left:left};},parseTemplate:function(t,nId){var res=t.replace(/{{id}}/g,nId);var matches=res.match(/{{.*}}/g);if(matches){for(var i=0;i<matches.length;i++){res=res.split(matches[i]).join(eval(matches[i].substring(2,matches[i].length-2)));}}
return res;},firstChildElement:function(n,nodeType){if(typeof(n)=="string"){n=document.getElementById(n);}
if(n&&n.childNodes){nodeType=(nodeType==undefined)?1:nodeType;for(var i=0;i<n.childNodes.length;i++){if(n.childNodes[i].nodeType==nodeType){return n.childNodes[i];}}}},lastChildElement:function(n){if(typeof(n)=="string"){n=document.getElementById(n);}
if(n&&n.childNodes){for(var i=n.childNodes.length-1;i>=0;i--){if(n.childNodes[i].nodeType==1){return n.childNodes[i];}}}},lastText:function(n){return this.getText(n);},getText:function(n){if(typeof(n)=="string"){n=document.getElementById(n);}
if(n&&n.tagName=="INPUT"){return n.value;}else if(n&&n.childNodes){for(var i=n.childNodes.length-1;i>=0;i--){if(n.childNodes[i].nodeType==3){return n.childNodes[i].nodeValue;}}}},setText:function(n,t){if(typeof(n)=="string"){n=document.getElementById(n);}
var v_set=false;var t_n;if(n&&n.tagName=="INPUT"){n.value=t;v_set=true;}else if(n&&n.childNodes){for(var i=n.childNodes.length-1;i>=0;i--){if(n.childNodes[i].nodeType==3){n.childNodes[i].nodeValue=t;v_set=true;t_n=n.childNodes[i];break;}}}
if(n&&!v_set){t_n=document.createTextNode(t);n.appendChild(t_n);}
return t_n;},insertAfter:function(elem,refElem){if(!refElem)return;var parent=refElem.parentNode;var next=refElem.nextSibling;if(next){return parent.insertBefore(elem,next);}else{return parent.appendChild(elem);}},show:function(n){if(typeof(n)=="string"){n=document.getElementById(n);}
if(n){this.delClass(n,this.INVIS_CLASS);}},hide:function(n){if(typeof(n)=="string"){n=document.getElementById(n);}
if(n){this.addClass(n,this.INVIS_CLASS);}},visible:function(n){if(typeof(n)=="string"){n=document.getElementById(n);}
return!this.hasClass(n,this.INVIS_CLASS);},toggle:function(n){if(typeof(n)=="string"){n=document.getElementById(n);}
if(this.visible(n)){this.hide(n);}
else{this.show(n);}},init:function(){Node=Node||{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};},previewImage:function(fileInput,imgNode){if(fileInput.files&&fileInput.files[0]){var reader=new FileReader();reader.onload=function(e){DOMHelper.addAttr(imgNode,"src",e.target.result);}
reader.readAsDataURL(fileInput.files[0]);}},tableToExcel:function(table,name,fileName){var uri='data:application/vnd.ms-excel;base64,',template='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><meta http-equiv="content-type" content="text/plain; charset=UTF-8"/></head><body><table>{table}</table></body></html>',base64=function(s){return window.btoa(unescape(encodeURIComponent(s)))},format=function(s,c){return s.replace(/{(\w+)}/g,function(m,p){return c[p];})},downloadURI=function(uri,name){var link=document.createElement("a");link.download=name;link.href=uri;link.click();}
if(!table.nodeType)table=document.getElementById(table);var ctx={worksheet:name||'Worksheet',table:table.innerHTML};var resuri=uri+base64(format(template,ctx));downloadURI(resuri,fileName);},changeTagName:function(node,newTagName){debugger
var renamed=document.createElement(newTagName);if(node.attributes){[...node.attributes].map(({name,value})=>{renamed.setAttribute(name,value);});}
while(node.firstChild){renamed.appendChild(node.firstChild);}
return node.parentNode.replaceChild(renamed,node);}} 
var DateHelper={DEF_FORMAT:"Y-m-dTH:i:s",time:function(){return new Date();},strtotime:function(dateStr){if(typeof(dateStr)==="object"&&this.isValidDate(dateStr)){return dateStr;}
else if(!dateStr||!dateStr.length){return;}
var parsed=Date.parse(dateStr);if(isNaN(parsed)){var parts=dateStr.match(/^(\d{4})[\.|\\/|-](\d{2})[\.|\\/|-](\d{2})[T|\s](\d{2})\:(\d{2})\:?(\d{0,2})\.?(\d{0,6})([+-])(\d{2})\:?(\d{2})?$/);if(parts){if(parts[5]==undefined||parts[5]=="")parts[5]="00";if(parts[6]==undefined||parts[6]=="")parts[6]="00";if(parts[7]==undefined||parts[7]=="")parts[7]="0";if(parts[10]==undefined)parts[10]="00";parsed=Date.parse(parts[1]+"-"+parts[2]+"-"+parts[3]+"T"+parts[4]+":"+parts[5]+":"+parts[6]+"."+parts[7]+parts[8]+parts[9]+":"+parts[10]);}
else{var parts=dateStr.split(/\D+/);for(i=0;i<parts.length;i++){if(parts[i]==undefined)parts[i]="00";}
if(parts.length<7)parts[6]="0000";parsed=Date.parse(parts[0]+"-"+parts[1]+"-"+parts[2]+"T"+parts[3]+":"+parts[4]+":"+parts[5]+"."+parts[6]);}}
return new Date(parsed);},getTimeZoneOffsetStr:function(){if(!this.m_timeZoneOffsetStr){var h_offset=-(new Date()).getTimezoneOffset()/60;var h_offset_h=Math.floor(h_offset);function to_str(a){return((a.toString().length==1)?"0":"")+a.toString();}
this.m_timeZoneOffsetStr=((h_offset_h<0)?"-":"+")+to_str(Math.abs(h_offset_h))+":"+to_str(Math.abs((h_offset-h_offset_h)*60));}
return this.m_timeZoneOffsetStr;},userStrToDate:function(dateStr){var SHORT_YEAR_LEN=8;var FULL_YEAR_LEN=10;var time=new Array(0,0,0);var date=new Array(0,0,0);var time_part='',date_part='';var TIME_DELIM=':';var DATE_DELIM='.';var PARTS_DELIM=' ';var NEXT_MIL_BOUND=40;var str_replace_delim=function(str,delim_ar,new_delim){if(str&&str.length){for(var i=0;i<delim_ar.length;i++){while(str.search(delim_ar[i])>=00){str=str.replace(delim_ar[i],new_delim);}}}
return str;};var date_str_copy=str_replace_delim(dateStr,new Array(/T/),PARTS_DELIM);var separ=date_str_copy.indexOf(PARTS_DELIM);if(separ>=0){date_part=date_str_copy.slice(0,separ);time_part=date_str_copy.substr(separ+1);}
else{if(date_str_copy.indexOf(TIME_DELIM)==-1){date_part=date_str_copy;}
else{time_part=date_str_copy;}}
date_part=str_replace_delim(date_part,new Array(/\//,/-/,/:/),DATE_DELIM);time_part=str_replace_delim(time_part,new Array(/ /,/-/,/\//),TIME_DELIM);if(date_part.length>0){date=date_part.split(DATE_DELIM);}
if(time_part.length>0){time=time_part.split(TIME_DELIM);}
if(date.length&&date[0].length==4){var y=date[0];date[0]=date[2];date[2]=y;}
else if(date.length>=3&&date[2].length==2){date[2]=parseInt(date[2],10);date[2]+=(date[2]<=NEXT_MIL_BOUND)?2000:1900;}
if(time[2]==undefined){time[2]=0;}
date[1]=(date[1]==0)?0:date[1]-1;return(new Date(date[2],date[1],date[0],time[0],time[1],time[2]));},format:function(dt,fs,localeId){var add_zero=function(arg){var s=arg.toString();return((s.length<2)?"0":"")+s;};if(!dt||!dt.getDate){return"";}
if(!fs){fs=this.DEF_FORMAT;}
var s;s=fs.replace(/d/,add_zero(dt.getDate()));s=s.replace(/j/,dt.getDate());s=s.replace(/FF/,DateHelper.MON_LIST[dt.getMonth()]);s=s.replace(/F/,DateHelper.MON_DATE_LIST[dt.getMonth()]);s=s.replace(/l/,DateHelper.WEEK_LIST[dt.getDay()]);s=s.replace(/m/,add_zero(dt.getMonth()+1));s=s.replace(/n/,dt.getMonth()+1);s=s.replace(/Y/,dt.getFullYear());s=s.replace(/y/,dt.getFullYear()-2000);s=s.replace(/H/,add_zero(dt.getHours()));s=s.replace(/i/,add_zero(dt.getMinutes()));s=s.replace(/s/,add_zero(dt.getSeconds()));s=s.replace(/u/,add_zero(dt.getMilliseconds()));return s;},timeToMS:function(timeStr){if(timeStr==undefined||!timeStr.split){return 0;}
var h,m;var time_ar=timeStr.split(":");var h=0;var m=0;var s=0;var ms=0;if(time_ar.length>=1){h=parseInt(time_ar[0][0],10)*10+
parseInt(time_ar[0][1],10);h=(isNaN(h)?0:h);}
if(time_ar.length>=2){m=parseInt(time_ar[1][0],10)*10+
parseInt(time_ar[1][1],10);m=(isNaN(m)?0:m);}
if(time_ar.length>=3){s=parseInt(time_ar[2][0],10)*10+
parseInt(time_ar[2][1],10);s=(isNaN(s)?0:s);}
return(h*60*60*1000+m*60*1000+s*1000+ms);},dateEnd:function(dt){if(!dt)dt=this.time();return new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),23,59,59,999);},dateStart:function(dt){if(!dt)dt=this.time();return new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),0,0,0,0);},weekStart:function(dt){if(!dt)dt=this.time();var dow=dt.getDay();var dif=dow-1;if(dif<0)dif=6;return(new Date(dt.getTime()-dif*24*60*60*1000));},weekEnd:function(dt){return new Date(this.weekStart(dt).getTime()+6*24*60*60*1000);},monthStart:function(dt){if(!dt)dt=this.time();return(new Date(dt.getFullYear(),dt.getMonth(),1));},monthEnd:function(dt){if(!dt)dt=this.time();return(new Date(dt.getFullYear(),dt.getMonth()+1,0));},daysInMonth:function(dt){return new Date(dt.getFullYear(),dt.getMonth()+1,0).getDate();},quarterStart:function(dt){if(!dt)dt=this.time();var m=dt.getMonth();if(m==1||m==2){m=0;}
else if(m==4||m==5){m=3;}
else if(m==7||m==8){m=6;}
else if(m==10||m==11){m=9;};return(new Date(dt.getFullYear(),m,1));},quarterEnd:function(dt){if(!dt)dt=this.time();var m=dt.getMonth();if(m==0||m==1){m=2;}
else if(m==3||m==4){m=5;}
else if(m==6||m==7){m=8;}
else if(m==9||m==10){m=11;};return this.monthEnd(new Date(dt.getFullYear(),m,1));},yearStart:function(dt){if(!dt)dt=this.time();return new Date(dt.getFullYear(),0,1);},yearEnd:function(dt){if(!dt)dt=this.time();return(new Date(dt.getFullYear(),12,0));},addBusinessDays:function(d,n){d=new Date(d.getTime());var day=d.getDay();d.setDate(d.getDate()+n+((day===6)?2:(+!day))+(Math.floor((n-1+(day%6||1))/5)*2));return d;},isValidDate:function(d){return d instanceof Date&&!isNaN(d);},isLeapYear:function(d){var year=(typeof(d)=="object")?d.getFullYear():d;return year%400===0||(year%100!==0&&year%4===0);},daysOfAYear:function(d){return this.isLeapYear(d)?366:365;},formatInterval(v){}} 
var EventHelper={add:function(obj,evType,fn,capture){if(!fn)return;if(typeof(obj)=="string"){obj=document.getElementById(obj);}
if(CommonHelper.isIE()){$(obj).on(evType,fn);}
else{if(obj&&obj.addEventListener){obj.addEventListener(evType,fn,capture);return true;}else if(obj&&obj.attachEvent){var r=obj.attachEvent("on"+evType,fn);return r;}else{return false;}}},del:function(obj,evType,fn,useCapture){if(typeof(obj)=="string"){obj=document.getElementById(obj);}
if(CommonHelper.isIE()){$(obj).off(evType,fn);}
else{if(obj&&obj.removeEventListener){obj.removeEventListener(evType,fn,useCapture);return true;}else if(obj&&obj.detachEvent){var r=obj.detachEvent("on"+evType,fn);return r;}else{throw new Error(this.DEL_ERR);}}},fixMouseEvent:function(e){e=e||window.event;if(e.target===undefined){e.target=e.srcElement;}
if(e.pageX==null&&e.clientX!=null){var html=document.documentElement;var body=document.body;e.pageX=e.clientX+(html&&html.scrollLeft||body&&body.scrollLeft||0)-(html.clientLeft||0);e.pageY=e.clientY+(html&&html.scrollTop||body&&body.scrollTop||0)-(html.clientTop||0);}
if(!e.which&&e.button){e.which=e.button&1?1:(e.button&2?3:(e.button&4?2:0));}
return(e);},fixKeyEvent:function(e){e=e||window.event;if(e.target===undefined){e.target=e.srcElement;}
if(e.which==null&&e.keyCode>=32){e.char=String.fromCharCode(event.keyCode);}
else if(e.which!=0&&e.charCode!=0&&e.which>=32){e.char=String.fromCharCode(e.which);}
return(e);},fixWheelEvent:function(e){e.delta=e.deltaY||e.detail||e.wheelDelta;return(e);},getWheelEventName:function(){var res;if("onwheel"in document){res="wheel";}else if("onmousewheel"in document){res="mousewheel";}else{res="MozMousePixelScroll";}
return(res);},addWheelEvent:function(obj,fn,capture){this.add(obj,this.getWheelEventName(),fn,capture);},delWheelEvent:function(obj,fn,capture){this.del(obj,this.getWheelEventName(),fn,capture);},stopPropagation:function(e){if(e.preventDefault){e.preventDefault();}
else if(e.stopPropagation){e.stopPropagation();}
else{e.cancelBubble=true;}
return false;},fireEvent:function(element,eventStr){if("createEvent"in document){var evt=document.createEvent("HTMLEvents");evt.initEvent(eventStr,false,true);element.dispatchEvent(evt);}
else{element.fireEvent("on"+eventStr);}}}; 
function FatalException(options){this.m_code=options.code;this.m_message=options["message"];this.m_cmdOk=options.cmdOk;this.m_templateOptions=options.templateOptions;this.m_viewAddElement=options.viewAddElement;}
FatalException.prototype.TEMPLATE_ID="FatalException";FatalException.prototype.show=function(){if(CommonHelper.nd("ex_"+this.m_code+":form")){return;}
var p=window.location.href.indexOf("?");var redir;if(p>=0){redir=CommonHelper.serialize({"ref":window.location.href.substr(p+1)});}
var opts=this.m_templateOptions||{};if(this.m_code){opts.code=this.m_code;}
if(this.m_message){opts["message"]=this.m_message;}
var app=window.getApp();opts.url=app.getServVar("basePath")+(redir?"?redir="+redir:"");var view_opts={"template":app.getTemplate(this.TEMPLATE_ID),"templateOptions":opts};var self=this;if(this.m_viewAddElement){view_opts.addElement=function(){self.m_viewAddElement.call(this);}}
app.m_dbExceptionForm=new WindowFormModalBS("ex_"+this.m_code+":form",{"cmdCancel":false,"cmdOk":this.m_cmdOk,"content":new ControlContainer("ex_"+this.m_code+":view:body:view","TEMPLATE",view_opts),"contentHead":this.HEADER,"onClickOk":!this.m_cmdOk?null:(function(form){return function(){form.close();}})(app.m_dbExceptionForm)});app.m_dbExceptionForm.open();} 
function DbException(options){options.cmdOk=true;DbException.superclass.constructor.call(this,options);}
extend(DbException,FatalException);DbException.prototype.TEMPLATE_ID="DbException"; 
function VersException(){options={};options.cmdOk=false;options.cmdCancel=false;var self=this;options.viewAddElement=function(){var delay=window.getApp().getUpdateInstPostponeDelay();this.addElement(new ButtonCmd("versException:postpone",{"caption":CommonHelper.format(self.CAP_POSTPONE,[delay/1000/60])+" ","onClick":function(){var app=window.getApp();app.setUpdateInstPostponed(true,delay);if(app.m_dbExceptionForm){app.m_dbExceptionForm.close();}
window.showTempNote(self.NOTE,null,self.NOTE_DISAPPEAR);},"glyph":"glyphicon-time","title":CommonHelper.format(self.TITLE_POSTPONE,[delay/1000/60])}));this.addElement(new ButtonCmd("versException:reload",{"caption":self.CAP_RELOAD+" ","onClick":function(){document.location.reload(true);},"glyph":"glyphicon-ok","title":self.TITLE_RELOAD}))}
VersException.superclass.constructor.call(this,options);}
extend(VersException,FatalException);VersException.prototype.TEMPLATE_ID="VersException";VersException.prototype.NOTE_DISAPPEAR=4000; 
function ConstantManager(options){options=options||{};this.m_values=options.values||{};if(options.XMLString){this.fillFromXML(options.XMLString);}}
ConstantManager.prototype.m_values;ConstantManager.prototype.fillFromXML=function(xml){var m=new ModelXML("ConstantValueList_Model",{"data":xml,"fields":{"id":new FieldString(),"val":new FieldString(),"val_type":new FieldString()}});while(m.getNextRow()){var v_t=m.getFieldValue("val_type");var v=m.getFieldValue("val");var v_class;var v_id=m.getFieldValue("id");if(v_t=="Int"){v_class=FieldInt;}
else if(v_t=="Float"){v_class=FieldFloat;}
else if(v_t=="DateTime"){v_class=FieldDateTime;}
else if(v_t=="Date"){v_class=FieldDate;}
else if(v_t=="Bool"){v_class=FieldBool;}
else if(v_t=="JSON"||v_t=="JSONB"){v_class=FieldJSON;}
else{v_class=FieldString;}
this.m_values[v_id]=new v_class(v_id,{"value":v});}}
ConstantManager.prototype.get=function(constants){var not_found="";var not_found_ar=[];var QUERY_SEP=",";for(var id in constants){if(this.m_values[id]){constants[id]=this.m_values[id];}
else{not_found+=(not_found=="")?"":QUERY_SEP;not_found+=id;not_found_ar.push(id);}}
if(not_found!=""){var self=this;var pm=(new Constant_Controller()).getPublicMethod("get_values");pm.setFieldValue("id_list",not_found);pm.run({"async":false,"ok":function(resp){self.fillFromXML(resp.getModelData("ConstantValueList_Model"));for(var i=0;i<not_found_ar.length;i++){constants[not_found_ar[i]]=self.m_values[not_found_ar[i]];}},"fail":function(resp,errCode,errStr){throw Error(errStr);}});}}
ConstantManager.prototype.set=function(id,val,callBack){var self=this;var pm=(new Constant_Controller()).getPublicMethod("set_value");pm.setFieldValue("id",id);pm.setFieldValue("val",CommonHelper.serialize(val));pm.run({"ok":function(resp){if(self.m_values[id]){self.m_values[id]=val;}
if(callBack){callBack();}}});}
ConstantManager.prototype.onEventSrvMessage=function(json){if(json.params&&json.params.id&&json.params.val){this.m_values[json.params.id]=CommonHelper.unserialize(json.params.val);}} 
function SessionVarManager(){this.m_values={};this.m_keys=[];}
SessionVarManager.prototype.m_values;SessionVarManager.prototype.getCont=function(resp,varList,callBack){var m=resp.getModel("SessionVarList_Model");while(m.getNextRow()){var id=m.getFieldValue("id");this.setValue(id,CommonHelper.unserialize(m.getFieldValue("val")));varList[id]=this.m_values[id];}
if(callBack){callBack(varList);}}
SessionVarManager.prototype.get=function(varList,callBack){var not_found="";var not_found_ar=[];var QUERY_SEP=",";for(var id in varList){if(CommonHelper.inArray(id,this.m_keys)>=0){varList[id]=this.m_values[id];}else{not_found+=(not_found=="")?"":QUERY_SEP;not_found+=id;not_found_ar.push(id);}}
if(not_found!=""){var self=this;var pm=(new SessionVar_Controller()).getPublicMethod("get_values");pm.setFieldValue("id_list",not_found);pm.run({"async":(callBack?true:false),"ok":function(resp){self.getCont(resp,varList,callBack);}});}
else if(callBack){callBack(varList);}}
SessionVarManager.prototype.set=function(id,val,callBack){console.log("SessionVarManager.prototype.set id="+id+", val="+val)
var self=this;var pm=(new SessionVar_Controller()).getPublicMethod("set_value");pm.setFieldValue("id",id);pm.setFieldValue("val",CommonHelper.serialize(val));pm.run({"ok":function(resp){self.setValue(id,val)
if(callBack){callBack();}}});}
SessionVarManager.prototype.setValue=function(key,val){this.m_values[key]=val;if(CommonHelper.inArray(key,this.m_keys)==-1){this.m_keys.push(key);}}
SessionVarManager.prototype.onEventSrvMessage=function(json){if(json.params&&json.params.id&&json.params.val!==undefined){this.setValue(json.params.id,CommonHelper.unserialize(json.params.val));console.log("SessionVar "+json.params.id+" set to val ",this.m_values[json.params.id])}} 
var CookieManager={get:function(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,'\\$1')+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined;},set:function(name,value,options){CommonHelper.merge(options,{"path":"/"});if(options.expires&&options.expires.toUTCString){options.expires=options.expires.toUTCString();}
var updated_cookie=encodeURIComponent(name)+"="+encodeURIComponent(value);for(var option_key in options){updated_cookie+="; "+option_key;var option_value=options[option_key];if(option_value!==true){updated_cookie+="="+option_value;}}
document.cookie=updated_cookie;},del:function(name){this.set(name,"",{"max-age":-1});}} 
function ServConnector(options){options=options||{};this.setHost(options.host||"");this.setScript(options.script||this.DEF_SCRIPT);this.setCORS((options.CORS!==undefined)?options.CORS:false);if(options.token){this.m_accessToken=options.token;if(navigator.cookieEnabled&&CookieManager.get("token")!=this.m_accessToken){CookieManager.set("token",this.m_accessToken,{"expires":options.tokenExpires});}
if(options.tokenr){this.m_refreshToken=options.tokenr;}}
this.m_xhrStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};}
ServConnector.prototype.DEF_SCRIPT="";ServConnector.prototype.ERR_AUTH=100;ServConnector.prototype.ERR_AUTH_NOT_LOGGED=102;ServConnector.prototype.ERR_AUTH_EXP=101;ServConnector.prototype.ERR_SQL_SERVER=105;ServConnector.prototype.ERR_VERSION=107;ServConnector.prototype.ENCTYPES={ENCODED:"application/x-www-form-urlencoded",MULTIPART:"multipart/form-data",TEXT:"text-plain"};ServConnector.prototype.m_xhrStates;ServConnector.prototype.m_CORS;ServConnector.prototype.m_host;ServConnector.prototype.m_script;ServConnector.prototype.m_port;ServConnector.prototype.m_quit;ServConnector.prototype.m_accessToken;ServConnector.prototype.m_refreshToken;ServConnector.prototype.getCORS=function(){return this.m_CORS;}
ServConnector.prototype.setCORS=function(v){this.m_CORS=v;}
ServConnector.prototype.getHost=function(){return this.m_host;}
ServConnector.prototype.setHost=function(host){this.m_host=host;}
ServConnector.prototype.getScript=function(){return this.m_script;}
ServConnector.prototype.setScript=function(script){this.m_script=script;}
ServConnector.prototype.queryParamsAsStr=function(params,encode){var param_str="";for(var par_id in params){param_str+=(param_str=="")?"":"&";param_str+=par_id+"=";param_str+=(encode)?encodeURIComponent(params[par_id]):params[par_id];}
return param_str;}
ServConnector.prototype.refreshToken=function(){var self=this;this.execRequest(true,{"c":"User_Controller","f":"login_refresh","token":this.m_accessToken,"refresh_token":this.m_refreshToken,"v":"ViewXML"},false,function(ref_e_n,ref_e_s,ref_resp){if(!ref_e_n){var m=ref_resp.getModel("Auth");if(m.getNextRow()){self.m_accessToken=m.getFieldValue("access_token");self.m_refreshToken=m.getFieldValue("refresh_token");if(navigator.cookieEnabled){CookieManager.set("token",self.m_accessToken,{"expires":DateHelper.strtotime(m.getFieldValue("tokenExpires"))});}}}});}
ServConnector.prototype.sendRequest=function(isGet,params,async,onReturn,retContentType,enctype){this.m_requestId=CommonHelper.uniqid();async=(async==undefined)?true:async;if(this.m_accessToken&&!navigator.cookieEnabled){params["token"]=this.m_accessToken;}
if(this.m_accessToken&&this.m_refreshToken&&navigator.cookieEnabled&&CookieManager.get("token")==undefined){this.refreshToken();}
return this.execRequest(isGet,params,async,onReturn,retContentType,enctype);}
ServConnector.prototype.execRequest=function(isGet,params,async,onReturn,retContentType,enctype,URLResource){var url=this.getHost()+(URLResource?URLResource:this.getScript());var send_param;var xhr=(this.m_CORS===true)?CommonHelper.createCORS():CommonHelper.createXHR();var self=this;var stat0_tries=10;var stat0_delay=100;xhr.onreadystatechange=function(){if(xhr.readyState==self.m_xhrStates.HEADERS_RECEIVED){}
else if(xhr.readyState==self.m_xhrStates.DONE){var error_n;var error_s;var resp;if(xhr.status==0){stat0_tries--;if(stat0_tries){setTimeout(function(){xhr.open(isGet?"GET":"POST",url,(self.getCORS())?true:async);xhr.send(send_param);},stat0_delay);stat0_delay=stat0_delay*2;return;}
error_s=self.ER_STATUS0;error_n=-1;}
else{error_n=(xhr.status>=200&&xhr.status<300)?0:xhr.status;if(error_n!=0){error_s=xhr.statusText;}
var vers_error=false;try{var tr=xhr.getResponseHeader("content-type");if(retContentType=="arraybuffer"||retContentType=="blob"){resp=xhr.response;}
else if(tr&&tr.indexOf("xml")>=0){var resp_model_id;resp=new ResponseXML(xhr.responseXML);if(resp.modelExists("ModelServResponse")){resp_model_id="ModelServResponse";}else if(resp.modelExists("Response")){resp_model_id="Response";}
if(resp_model_id){var m=new ModelServRespXML(resp.getModelData(resp_model_id));error_n=error_n?error_n:m.result;error_s=m.descr;vers_error=(!error_n&&m.app_version&&m.app_version!=window.getApp().getServVar("version")&&!window.getApp().getUpdateInstPostponed());}else{resp=xhr.responseXML;}}
else if(tr&&tr.indexOf("json")>=0){var resp_o=CommonHelper.unserialize(xhr.responseText);if(resp_o.models){resp=new ResponseJSON(resp_o);var resp_model_id=window.getApp().SERV_RESPONSE_MODEL_ID;if(resp.modelExists(resp_model_id)){var m=new ModelServRespJSON(resp.getModelData(resp_model_id));error_n=error_n?error_n:m.result;error_s=m.descr;vers_error=(!error_n&&m.app_version&&m.app_version!=window.getApp().getServVar("version")&&!window.getApp().getUpdateInstPostponed());}}
else{resp=resp_o;}}
else{if(retContentType!=undefined&&tr&&tr.indexOf(retContentType)<0){error_n=error_n?error_n:-1;error_s=xhr.responseText;}
else{resp=xhr.responseText;}}}
catch(e){error_n=error_n?error_n:-1;error_s=e.message;}}
if(onReturn){onReturn.call(self,error_n,error_s,resp,self.m_requestId,vers_error);}
if(error_n==self.ERR_AUTH_NOT_LOGGED||(error_n==self.ERR_AUTH_EXP&&!self.m_refreshToken)){throw new FatalException({"code":error_n,"message":error_s});}
else if(error_n==self.ERR_AUTH_EXP){self.refreshToken();self.execRequest(isGet,params,async,onReturn,retContentType,enctype);return;}
else if(error_n==self.ERR_SQL_SERVER){self.m_lastErrdbException=true;throw new DbException({"code":error_n,"message":error_s});}
else if(vers_error){throw new VersException();}
if(error_n==0&&self.m_lastErrdbException){self.m_lastErrdbException=false;window.getApp().hideDbExceptionForm();}}}
if(isGet){if(params&&!CommonHelper.isEmpty(params)){url=url+"?"+this.queryParamsAsStr(params,true);}
send_param=null;}
xhr.open(isGet?"GET":"POST",url,(this.getCORS())?true:async);if(!isGet){enctype=enctype||this.ENCTYPES.ENCODED;if(enctype==this.ENCTYPES.ENCODED){xhr.setRequestHeader("Content-Type",enctype);send_param=this.queryParamsAsStr(params,true);}
if(enctype==this.ENCTYPES.MULTIPART){if(typeof FormData!=='undefined'){send_param=new FormData();for(var par_id in params){if(params[par_id]&&typeof params[par_id]=="object"){for(var fi=0;fi<params[par_id].length;fi++){send_param.append(par_id+"[]",params[par_id][fi]);}}
else{send_param.append(par_id,params[par_id]);}}}
else{var boundary=String(Math.random()).slice(2);var boundaryMiddle='--'+boundary+'\r\n';var boundaryLast='--'+boundary+'--\r\n';send_param=['\r\n'];for(var key in params){send_param.push('Content-Disposition: form-data; name="'+key+'"\r\n\r\n'+params[key]+'\r\n');}
send_param=send_param.join(boundaryMiddle)+boundaryLast;xhr.setRequestHeader('Content-Type','multipart/form-data; boundary='+boundary);}}}
if(!this.getCORS&&xhr.setRequestHeader){xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");}
if(async&&(retContentType=="arraybuffer"||retContentType=="blob")){xhr.responseType=retContentType;}
xhr.send(send_param);return this.m_requestId;}
ServConnector.prototype.sendPost=function(params,async,onReturn,retContentType,enctype){if(this.m_quit)return;return this.sendRequest(false,params,async,onReturn,retContentType,enctype);}
ServConnector.prototype.sendGet=function(params,async,onReturn,retContentType){if(this.m_quit)return;return this.sendRequest(true,params,async,onReturn,retContentType);}
ServConnector.prototype.openHref=function(params,winParams,winName){if(this.m_quit)return;return window.open(this.getHost()+this.getScript()+"?"+this.queryParamsAsStr(params,true),winName?winName:"_blank",winParams?winParams:"location=0,menubar=0,status=0,titlebar=0");}
ServConnector.prototype.quit=function(){this.m_quit=true;if(this.m_accessToken&&navigator.cookieEnabled){CookieManager.del("token");}}
ServConnector.prototype.getAccessToken=function(){return this.m_accessToken;}
ServConnector.prototype.getPublicKey=function(){var p=this.m_accessToken.indexOf(":");if(p>=0){return this.m_accessToken.substring(0,p);}} 
function AppSrv(options){options=options||{};window.WebSocket=window.WebSocket||window.MozWebSocket;if(!window.WebSocket){throw Error(this.NOT_SUPPOERTED);}
this.m_host=options.host||this.DEF_HOST;this.m_port=options.port||this.DEF_PORT;this.m_appId=options.appId;this.m_token=options.token;this.m_tokenExpires=options.tokenExpires;if(Worker in window){var self=this;var myWorker=new Worker("DetectWakeup.js");myWorker.onmessage=function(ev){if(ev&&ev.data==='wakeup'){self.notifyOnConnEvent("onWakeup");}}}}
AppSrv.prototype.DEF_HOST="127.0.0.1";AppSrv.prototype.DEF_PORT="1337";AppSrv.prototype.METH_STATUS={"end":0,"progress":1}
AppSrv.prototype.m_connection;AppSrv.prototype.m_host;AppSrv.prototype.m_port;AppSrv.prototype.m_subscribeEvents;AppSrv.prototype.m_subscriptions;AppSrv.prototype.getState=function(){return this.m_connection.readyState;}
AppSrv.prototype.connActive=function(){return(this.m_connection&&this.m_connection.readyState==WebSocket.OPEN);}
AppSrv.prototype.connect=function(){this.m_lastConnErrTime=undefined;this.m_doNotReconnect=false;this.do_connect();}
AppSrv.prototype.disconnect=function(doNotReconnect){if(this.connActive()){this.m_doNotReconnect=doNotReconnect;this.m_connection.close();}
this.clear();}
AppSrv.prototype.notifyOnConnEvent=function(conEvnt,par){console.log("AppSrv.prototype.notifyOnConnEvent evnt="+conEvnt)
var called={};for(var ev_id in this.m_subscriptions){if(!this.m_subscriptions[ev_id]){continue;}
var groups=this.m_subscriptions[ev_id].groups;for(gr_id in groups){if(!called[gr_id]&&groups[gr_id][conEvnt]&&typeof(groups[gr_id][conEvnt])==="function"){console.log("Calling m_subscriptions event ")
groups[gr_id][conEvnt].call(this,par);called[gr_id]=true;}}}
if(this.m_subscribeEvents&&conEvnt=="onClose"){for(var ev_id in this.m_subscribeEvents){if(this.m_subscribeEvents[ev_id]&&this.m_subscribeEvents[ev_id][conEvnt]&&typeof(this.m_subscribeEvents[ev_id][conEvnt])==="function"){console.log("Calling m_subscribeEvents event ")
this.m_subscribeEvents[ev_id][conEvnt].call(this,par);}}}}
AppSrv.prototype.do_connect=function(){console.log("AppSrv.prototype.do_connect")
if(this.m_connection&&(this.m_connection.readyState===WebSocket.OPEN||this.m_connection.readyState===WebSocket.CONNECTING)){return;}
var protocol=(location.protocol!=="https:")?"ws":"wss";var self=this;this.m_connection=new WebSocket(protocol+"://"+this.m_host+":"+this.m_port+"/"+this.m_appId+(this.m_token?"/"+this.m_token:""));this.m_connection.onopen=function(){console.log("this.m_connection.onopen")
self.onOpen();self.notifyOnConnEvent("onOpen");};this.m_connection.onerror=function(error){console.log("WSConn.onerror error=")
self.notifyOnConnEvent("onError",error);};this.m_connection.onmessage=function(message){self.onMessage(message);};this.m_connection.onclose=function(message){console.log("onclose message=")
self.notifyOnConnEvent("onClose",message);if(message.code!=undefined&&message.code>1000&&!self.m_doNotReconnect){self.do_connect();}};}
AppSrv.prototype.subscribe=function(srvEvents,id){if(!id){id=CommonHelper.ID();}
if(this.m_connection.readyState!==WebSocket.OPEN){this.m_subscribeEvents=this.m_subscribeEvents||{};this.m_subscribeEvents[id]=srvEvents;console.log("subscribe postponed")
return id;}
console.log("AppSrv.prototype.subscribe")
var events_srv=[];this.m_subscriptions=this.m_subscriptions||{};for(var i=0;i<srvEvents.events.length;i++){if(!srvEvents.events[i]){continue;}
if(!this.m_subscriptions[srvEvents.events[i].id]){events_srv.push({"id":srvEvents.events[i].id});this.m_subscriptions[srvEvents.events[i].id]={"groups":{},"cnt":0};}
this.m_subscriptions[srvEvents.events[i].id].groups[id]=srvEvents;this.m_subscriptions[srvEvents.events[i].id].cnt++;}
if(events_srv.length){console.log("Events:",events_srv)
this.send("Event.subscribe",{"events":events_srv});if(srvEvents.onSubscribed&&typeof(srvEvents.onSubscribed)==="function"){console.log("Calling onSubscribed function")
srvEvents.onSubscribed.call(this);}}
return id;}
AppSrv.prototype.clear=function(){if(this.m_subscriptions){this.m_subscriptions={};}}
AppSrv.prototype.unsubscribe=function(id){console.log("AppSrv.prototype.unsubscribe")
if(this.m_subscribeEvents&&this.m_subscribeEvents[id]){this.m_subscribeEvents[id]=undefined;delete this.m_subscribeEvents[id];console.log("AppSrv.prototype.unsubscribe cleared postponed subscription")}else if(this.m_connection.readyState!==WebSocket.OPEN){this.m_unsubscribeEvents=this.m_unsubscribeEvents||[];this.m_unsubscribeEvents.push(id);console.log("unsubscribe postponed")
return;}
if(this.m_subscriptions){var events_srv=[];for(var ev_id in this.m_subscriptions){if(this.m_subscriptions[ev_id].groups[id]){this.m_subscriptions[ev_id].groups[id]=undefined;delete this.m_subscriptions[ev_id].groups[id];this.m_subscriptions[ev_id].cnt--;if(!this.m_subscriptions[ev_id].cnt){events_srv.push({"id":ev_id});this.m_subscriptions[ev_id]=undefined;delete this.m_subscriptions[ev_id];}}}
if(events_srv.length){this.send("Event.unsubscribe",{"events":events_srv});}}}
AppSrv.prototype.onOpen=function(){console.log("AppSrv.prototype.onOpen")
this.m_lastConnErrTime=undefined;if(this.m_subscriptions){console.log("Reregistering events!")
var groups={};var cnt=0;for(var ev_id in this.m_subscriptions){for(gr_id in this.m_subscriptions[ev_id].groups){groups[gr_id]=groups[gr_id]||{"events":[],"onEvent":this.m_subscriptions[ev_id].groups[gr_id].onEvent,"onOpen":this.m_subscriptions[ev_id].groups[gr_id].onOpen,"onClose":this.m_subscriptions[ev_id].groups[gr_id].onClose,"onError":this.m_subscriptions[ev_id].groups[gr_id].onError,"onSubscribed":this.m_subscriptions[ev_id].groups[gr_id].onSubscribed};groups[gr_id].events.push({"id":ev_id});}
cnt++;}
if(cnt){this.m_subscriptions={};for(var gr_id in groups){this.subscribe(groups[gr_id],gr_id);}}}
if(this.m_subscribeEvents){for(var ev_id in this.m_subscribeEvents){if(this.m_subscribeEvents[ev_id]){this.subscribe(this.m_subscribeEvents[ev_id],ev_id);this.m_subscribeEvents[ev_id]=undefined;}}
delete this.m_subscribeEvents;}
if(this.m_unsubscribeEvents){if(this.m_unsubscribeEvents[i]){for(var i=0;i<this.m_unsubscribeEvents.length;i++){this.unsubscribe(this.m_unsubscribeEvents[i]);this.m_unsubscribeEvents[i]=undefined;}}
delete this.m_unsubscribeEvents;}}
AppSrv.prototype.send=function(func,argv,queryId,viewId){var struct={"func":func}
if(argv){struct.argv=argv;}
if(queryId){struct.query_id=queryId;}
if(viewId){struct.view_id=viewId;}
this.m_connection.send(JSON.stringify(struct));}
AppSrv.prototype.onMessage=function(message){console.log("AppSrv.prototype.onMessage RawJson="+message.data)
if(!message.data||!message.data.length){return;}
var resp;var query_id,error_n,error_s,vers_error;var app=window.getApp();var resp_o;if(message.data[0]=="{"&&message.data[message.data.length-1]=="}"||message.data[0]=="["&&message.data[message.data.length-1]=="]"){resp_o=CommonHelper.unserialize(message.data);if(resp_o.models){resp=new ResponseJSON(resp_o);var resp_model_id=app.SERV_RESPONSE_MODEL_ID;if(resp.modelExists(resp_model_id)){var m=new ModelServRespJSON(resp.getModelData(resp_model_id));error_n=error_n?error_n:m.result;error_s=m.descr;vers_error=(!error_n&&m.app_version&&m.app_version!=app.getServVar("version")&&!app.getUpdateInstPostponed());query_id=m.query_id;}}
else{resp=resp_o;}}else if(message.data[0]=="<"&&message.data[message.data.length-1]==">"){if(!window["ResponseXML"]){throw new Error("AppSrv: message.data is of type XML, but ResponseXML is not defined");}
if(!window["DOMParser"]){throw new Error("AppSrv: message.data is of type XML, but DOMParser is not defined");}
var xml=(new DOMParser()).parseFromString(message.data,"text/xml")
resp=new ResponseXML(xml);var resp_model_id;if(resp.modelExists("ModelServResponse")){resp_model_id="ModelServResponse";}else if(resp.modelExists("Response")){resp_model_id="Response";}
if(resp_model_id){var m=new ModelServRespXML(resp.getModelData(resp_model_id));error_n=error_n?error_n:m.result;error_s=m.descr;vers_error=(!error_n&&m.app_version&&m.app_version!=app.getServVar("version")&&!app.getUpdateInstPostponed());query_id=m.query_id;}else{resp=xml.documentElement;}}else{resp=message.data;}
if(error_n==ServConnector.prototype.ERR_AUTH_NOT_LOGGED||error_n==ServConnector.prototype.ERR_AUTH||(error_n==ServConnector.prototype.ERR_AUTH_EXP&&!ServConnector.prototype.m_refreshToken)){app.initPage();}
else if(error_n==ServConnector.prototype.ERR_AUTH_EXP){}
else if(error_n==ServConnector.prototype.ERR_SQL_SERVER){throw new DbException({"code":error_n,"message":error_s});}
else if(vers_error){throw new VersException();}
var ev_model_id=app.EVENT_MODEL_ID;if(resp_o&&resp_o.models&&resp_o.models[ev_model_id]&&resp_o.models[ev_model_id].rows&&resp_o.models[ev_model_id].rows.length&&resp_o.models[ev_model_id].rows[0].id){var ev_id=resp_o.models[ev_model_id].rows[0].id;var json={"eventId":ev_id,"params":resp_o.models[ev_model_id].rows[0].params};var sep=ev_id.indexOf(".");if(sep){json.controllerId=json.eventId.substr(0,sep);json.methodId=json.eventId.substr(sep+1);}
if(this.m_subscriptions[json.eventId]&&this.m_subscriptions[json.eventId].groups){for(gr_id in this.m_subscriptions[json.eventId].groups){if(this.m_subscriptions[json.eventId].groups[gr_id].onEvent&&typeof(this.m_subscriptions[json.eventId].groups[gr_id].onEvent)==="function"){this.m_subscriptions[json.eventId].groups[gr_id].onEvent(json);}}}}else if(query_id&&this.m_subscriptions[query_id]&&this.m_subscriptions[query_id].groups&&this.m_subscriptions[query_id].groups.callBack){this.m_subscriptions[query_id].groups.callBack(error_n,error_s,resp,query_id);}}
AppSrv.prototype.runPublicMethod=function(func,argv,viewId,progressCallBack,callBack){var d=new Date();var query_id=func+"_"+d.getHours().toString()+d.getMinutes().toString()+d.getMilliseconds().toString();this.m_subscriptions[query_id]={"groups":{"callBack":(function(self,progressCallBack,callBack){return function(errCode,errStr,resp,queryId){self.m_subscriptions[queryId]=undefined;delete self.m_subscriptions[queryId];if(callBack){callBack(errCode,errStr,resp,queryId)}}})(this,progressCallBack,callBack)},"cnt":0};this.send(func,argv,query_id,viewId);} 
AppSrv.prototype.NOT_SUPPOERTED="Браузер не поддерживает работу WebSocket";AppSrv.prototype.MES_CONNECTING="Попытка соединения с сервером...";AppSrv.prototype.MES_CONNECTED="Соединение с сервером установлено";AppSrv.prototype.ER_NOT_CONNECTED="Ошибка соединения с сервером";AppSrv.prototype.ER_CON_FAIL="Невозможно установить соединение с сервером"; 
function Response(resp){this.m_models={};this.m_modelInstances={};this.setResponse(resp);}
Response.prototype.m_resp;Response.prototype.m_models;Response.prototype.m_modelInstances;Response.prototype.getInitResponse=function(){}
Response.prototype.setResponse=function(resp){this.m_resp=resp?resp:this.getInitResponse();}
Response.prototype.modelExists=function(id){return(this.m_models[id])?true:false;}
Response.prototype.setModelData=function(id,data){this.m_models[id]=data;}
Response.prototype.getModelData=function(id){if(!this.m_models[id]){throw new Error(CommonHelper.format(this.ERR_NO_MODEL,[id]));}
return this.m_modelInstances[id]?this.m_modelInstances[id].getData():this.m_models[id];}
Response.prototype.getModels=function(){return this.m_models;}
Response.prototype.getModel=function(id,modelOptions){if(this.modelExists(id)&&window[id]&&!this.m_modelInstances[id]){modelOptions=modelOptions||{};modelOptions.data=this.m_models[id];this.m_modelInstances[id]=new window[id](modelOptions);}
return this.m_modelInstances[id];} 
function ResponseXML(resp){ResponseXML.superclass.constructor.call(this,resp);}
extend(ResponseXML,Response);ResponseXML.prototype.TAG_ROOT="document";ResponseXML.prototype.TAG_MODEL="model";ResponseXML.prototype.getInitResponse=function(){return DOMHelper.xmlDocFromString("<"+this.TAG_ROOT+"></"+this.TAG_ROOT+">");}
ResponseXML.prototype.setModelData=function(id,node){this.m_resp.firstChild.appendChild(node);ResponseXML.superclass.setModelData.call(this,id,node);}
ResponseXML.prototype.setResponse=function(resp){ResponseXML.superclass.setResponse.call(this,resp);var models=this.m_resp.documentElement.getElementsByTagName(this.TAG_MODEL);for(var i=0;i<models.length;i++){if(models[i].parentNode==this.m_resp.documentElement){this.m_models[models[i].getAttribute("id")]=models[i];}}}
ResponseXML.prototype.getModel=function(id,modelOptions){if(this.modelExists(id)&&!this.m_modelInstances[id]){modelOptions=modelOptions||{};modelOptions.data=this.m_models[id];this.m_modelInstances[id]=(window[id]?new window[id](modelOptions):new ModelXML(id,modelOptions));}
return this.m_modelInstances[id];} 
function ResponseJSON(resp){ResponseJSON.superclass.constructor.call(this,resp);}
extend(ResponseJSON,Response);ResponseJSON.prototype.getInitResponse=function(){return{"models":[]};}
ResponseJSON.prototype.setResponse=function(resp){var o;if(typeof(resp)=="string"){o=CommonHelper.unserialize(resp);}
else{o=resp;}
ResponseJSON.superclass.setResponse.call(this,o);if(o)this.m_models=o.models;}
ResponseJSON.prototype.getModel=function(id,modelOptions){if(this.modelExists(id)&&!this.m_modelInstances[id]){modelOptions=modelOptions||{};modelOptions.data=this.m_models[id];this.m_modelInstances[id]=(window[id]?new window[id](modelOptions):new ModelJSON(id,modelOptions));}
return this.m_modelInstances[id];} 
function PublicMethod(id,options){this.setId(id);options=options||{};this.m_fields=options.fields||{};this.setController(options.controller);}
PublicMethod.prototype.m_id;PublicMethod.prototype.m_fields;PublicMethod.prototype.m_controller;PublicMethod.prototype.fieldExists=function(id){return(this.m_fields[id]!=undefined);}
PublicMethod.prototype.getId=function(){return this.m_id;}
PublicMethod.prototype.setId=function(id){this.m_id=id;}
PublicMethod.prototype.addField=function(field){this.m_fields[field.getId()]=field;}
PublicMethod.prototype.checkField=function(id){if(!this.fieldExists(id)){throw Error(CommonHelper.format(this.ER_NO_FIELD,Array(this.m_controller.getId(),this.getId(),id)));}
return true;}
PublicMethod.prototype.getField=function(id){this.checkField(id);return this.m_fields[id];}
PublicMethod.prototype.getFields=function(){return this.m_fields;}
PublicMethod.prototype.setFields=function(v){this.m_fields=v;}
PublicMethod.prototype.setFieldValue=function(id,value){this.checkField(id);this.m_fields[id].setValue(value);}
PublicMethod.prototype.getFieldValue=function(id){return this.getField(id).getValue();}
PublicMethod.prototype.resetFieldValue=function(id){this.checkField(id);this.m_fields[id].resetValue();}
PublicMethod.prototype.unsetFieldValue=function(id){this.checkField(id);this.m_fields[id].unsetValue();}
PublicMethod.prototype.getController=function(){return this.m_controller;}
PublicMethod.prototype.setController=function(c){this.m_controller=c;}
PublicMethod.prototype.run=function(options){} 
function PublicMethodServer(id,options){options=options||{};if(!options.controller){throw Error(CommonHelper.format(this.ER_NO_CONTROLLER,Array(id)));}
this.setRequestType(options.requestType);this.setAsync(options.async);this.setEncType(options.encType);this.setWS(options.ws);PublicMethodServer.superclass.constructor.call(this,id,options);}
extend(PublicMethodServer,PublicMethod);PublicMethodServer.prototype.m_requestType;PublicMethodServer.prototype.m_sync;PublicMethodServer.prototype.m_encType;PublicMethodServer.prototype.m_ws;PublicMethodServer.prototype.getRequestType=function(){return this.m_requestType;}
PublicMethodServer.prototype.setRequestType=function(v){this.m_requestType=v;}
PublicMethodServer.prototype.getAsync=function(){return this.m_async;}
PublicMethodServer.prototype.setAsync=function(v){this.m_async=v;}
PublicMethodServer.prototype.getEncType=function(){return this.m_encType;}
PublicMethodServer.prototype.setEncType=function(v){this.m_encType=v;}
PublicMethodServer.prototype.download=function(viewId,ind,callBack){this.getController().download(this.getId(),viewId,ind,callBack);}
PublicMethodServer.prototype.openHref=function(viewId,winParams,winName){return this.getController().openHref(this.getId(),viewId,winParams,winName);}
PublicMethodServer.prototype.run=function(options){if(this.m_ws===true&&options.ws==undefined){options.ws=true;}
return this.getController().run(this.getId(),options);}
PublicMethodServer.prototype.getWS=function(){return this.m_ws;}
PublicMethodServer.prototype.setWS=function(v){this.m_ws=v;} 
function Controller(options){this.m_publicMethods=options.publicMethods||{};this.setPublicMethodClass(options.publicMethodClass||PublicMethod);}
Controller.prototype.m_publicMethods;Controller.prototype.getId=function(){return this.constructor.toString().match(/function (\w*)/)[1];}
Controller.prototype.publicMethodExists=function(id){return(this.m_publicMethods[id]!=undefined);}
Controller.prototype.addPublicMethod=function(pm){this.m_publicMethods[pm.getId()]=pm;}
Controller.prototype.checkPublicMethod=function(id){if(!this.publicMethodExists(id)){throw new Error(CommonHelper.format(this.ER_NO_METHOD,[id,this.getId()]));}
return true;}
Controller.prototype.getPublicMethod=function(id){this.checkPublicMethod(id);return this.m_publicMethods[id];}
Controller.prototype.getPublicMethods=function(){return this.m_publicMethods;}
Controller.prototype.run=function(meth,options){this.getPublicMethod(meth).run(options);}
Controller.prototype.getPublicMethodClass=function(){return this.m_publicMethodClass;}
Controller.prototype.setPublicMethodClass=function(v){this.m_publicMethodClass=v;} 
function ControllerObj(options){options=options||{};this.setListModelClass(options.listModelClass);this.setObjModelClass(options.objModelClass);this.setWS(options.ws);ControllerObj.superclass.constructor.call(this,options);}
extend(ControllerObj,Controller);ControllerObj.prototype.METH_INSERT="insert";ControllerObj.prototype.METH_UPDATE="update";ControllerObj.prototype.METH_GET_OBJ="get_object";ControllerObj.prototype.METH_GET_LIST="get_list";ControllerObj.prototype.METH_DELETE="delete";ControllerObj.prototype.METH_COMPLETE="complete";ControllerObj.prototype.PARAM_COUNT="count";ControllerObj.prototype.PARAM_FROM="from";ControllerObj.prototype.PARAM_IC="ic";ControllerObj.prototype.PARAM_MID="mid";ControllerObj.prototype.PARAM_ORD_FIELDS="ord_fields";ControllerObj.prototype.PARAM_ORD_DIRECTS="ord_directs";ControllerObj.prototype.PARAM_FIELD_SEP_VAL="@@";ControllerObj.prototype.PARAM_COND_FIELDS="cond_fields";ControllerObj.prototype.PARAM_COND_SGNS="cond_sgns";ControllerObj.prototype.PARAM_COND_VALS="cond_vals";ControllerObj.prototype.PARAM_COND_JOINS="cond_joins";ControllerObj.prototype.PARAM_COND_ICASE="cond_ic";ControllerObj.prototype.PARAM_SGN_EQUAL="e";ControllerObj.prototype.PARAM_SGN_LESS="l";ControllerObj.prototype.PARAM_SGN_GREATER="g";ControllerObj.prototype.PARAM_SGN_LESS_EQUAL="le";ControllerObj.prototype.PARAM_SGN_GREATER_EQUAL="ge";ControllerObj.prototype.PARAM_SGN_LIKE="lk";ControllerObj.prototype.PARAM_SGN_NOT_EQUAL="ne";ControllerObj.prototype.PARAM_SGN_IS="i";ControllerObj.prototype.PARAM_SGN_IS_NOT="in";ControllerObj.prototype.PARAM_SGN_ANY="any";ControllerObj.prototype.PARAM_ORD_ASC="a";ControllerObj.prototype.PARAM_ORD_DESC="d";ControllerObj.prototype.PARAM_GRP_FIELDS="grp_fields";ControllerObj.prototype.PARAM_AGG_FIELDS="agg_fields";ControllerObj.prototype.PARAM_AGG_TYPES="agg_types";ControllerObj.prototype.PARAM_RET_ID="ret_id";ControllerObj.prototype.PARAM_FIELD_SEP="field_sep";ControllerObj.prototype.PARAM_FIELD_LSN="lsn";ControllerObj.prototype.PARAM_JOIN_AND="a";ControllerObj.prototype.PARAM_JOIN_OR="o";ControllerObj.prototype.PARAM_EXP_FNAME="fname";ControllerObj.prototype.m_listModelClass;ControllerObj.prototype.m_objModelClass;ControllerObj.prototype.m_ws;ControllerObj.prototype.addDefParams=function(){}
ControllerObj.prototype.addInsert=function(){return this.addMethod(this.METH_INSERT,"post");}
ControllerObj.prototype.getInsert=function(){return this.getPublicMethod(this.METH_INSERT);}
ControllerObj.prototype.addUpdate=function(){return this.addMethod(this.METH_UPDATE,"post");}
ControllerObj.prototype.getUpdate=function(){return this.getPublicMethod(this.METH_UPDATE);}
ControllerObj.prototype.addDelete=function(){return this.addMethod(this.METH_DELETE);}
ControllerObj.prototype.getDelete=function(){return this.getPublicMethod(this.METH_DELETE);}
ControllerObj.prototype.addGetObject=function(){return this.addMethod(this.METH_GET_OBJ);}
ControllerObj.prototype.getGetObject=function(){return this.getPublicMethod(this.METH_GET_OBJ);}
ControllerObj.prototype.addGetList=function(){var pm=this.addMethod(this.METH_GET_LIST);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_FIELD_SEP));return pm;}
ControllerObj.prototype.getGetList=function(){return this.getPublicMethod(this.METH_GET_LIST,{controller:this});}
ControllerObj.prototype.setObjModelClass=function(v){this.m_objModelClass=v;}
ControllerObj.prototype.getObjModelClass=function(){return this.m_objModelClass;}
ControllerObj.prototype.setListModelClass=function(v){this.m_listModelClass=v;}
ControllerObj.prototype.getListModelClass=function(){return this.m_listModelClass;}
ControllerObj.prototype.addComplete=function(){var pm=this.addMethod(this.METH_COMPLETE);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_IC));pm.addField(new FieldInt(this.PARAM_MID));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));return pm;}
ControllerObj.prototype.getComplete=function(){return this.getPublicMethod(this.METH_COMPLETE);}
ControllerObj.prototype.addMethod=function(methId,requestType){var pm_class=this.getPublicMethodClass();var pm=new pm_class(methId,{"controller":this,"requestType":requestType});this.addDefParams(pm);this.addPublicMethod(pm);return pm;}
ControllerObj.prototype.getPrintList=function(){return null;}
ControllerObj.prototype.getWS=function(){return this.m_ws;}
ControllerObj.prototype.setWS=function(v){this.m_ws=v;} 
function ControllerObjServer(options){options=options||{};options.publicMethodClass=options.publicMethodClass||PublicMethodServer;this.setServConnector(options.servConnector);ControllerObjServer.superclass.constructor.call(this,options);}
extend(ControllerObjServer,ControllerObj);ControllerObjServer.prototype.PARAM_DEF_VIEW="ViewXML";ControllerObjServer.prototype.PARAM_CONTROLLER="c";ControllerObjServer.prototype.PARAM_METH="f";ControllerObjServer.prototype.PARAM_VIEW="v";ControllerObjServer.prototype.m_servConnector;ControllerObjServer.prototype.m_resp;ControllerObjServer.prototype.addDefParams=function(pm){pm.addField(new FieldString(this.PARAM_CONTROLLER,{"value":this.getId()}));pm.addField(new FieldString(this.PARAM_METH,{"value":pm.getId()}));pm.addField(new FieldString(this.PARAM_VIEW,{"value":this.PARAM_VIEW_VALUE}));}
ControllerObjServer.prototype.checkMethodParams=function(methId,viewId,params){var param_cnt=0;var pm=this.getPublicMethod(methId);for(var id in pm.getFields()){if(id==this.PARAM_CONTROLLER||id==this.PARAM_METH||id==this.PARAM_VIEW){continue;}
var f=pm.getField(id);var is_null=f.isNull();if(is_null&&f.getValidator().getRequired()){throw Error(CommonHelper.format(this.ER_EMPTY,Array(this.getId(),methId,f.getId())));}
if(f.isSet()){params[id]=f.getValueXHR();param_cnt++;}}
return param_cnt;}
ControllerObjServer.prototype.getParams=function(methId,viewId){var params={};params[this.PARAM_CONTROLLER]=this.getId();params[this.PARAM_METH]=methId;params[this.PARAM_VIEW]=viewId||this.PARAM_DEF_VIEW;this.checkMethodParams(methId,viewId,params);return params;}
ControllerObjServer.prototype.getServConnector=function(){return(this.m_servConnector)?this.m_servConnector:window.getApp().getServConnector();}
ControllerObjServer.prototype.setServConnector=function(v){this.m_servConnector=v;}
ControllerObjServer.prototype.run=function(methId,options){options=options||{};var meth=this.getPublicMethod(methId);if(options.requestType==undefined){options.requestType=(meth.getRequestType()!=undefined)?meth.getRequestType():"get";}
if(options.async==undefined){options.async=(meth.getAsync()!=undefined)?meth.getAsync():true;}
if(options.encType==undefined){options.encType=(meth.getEncType()!=undefined)?meth.getEncType():null;}
options.retContentType=(options.retContentType==undefined||options.retContentType=="xml")?"document":options.retContentType;var self=this;options.fail=options.fail||function(resp,errCode,errStr){window.showError(errCode+" "+errStr);};var ret_func=function(errCode,errStr,resp,requestId){if(!options.async){window.setGlobalWait(false);}
if(errCode!=0){options.fail.call(self,resp,errCode,errStr,requestId);}
else if(options.ok){self.m_resp=requestId;options.ok.call(self,resp,requestId);}
else{self.m_resp=resp;}
if(options.all){options.all.call(self,resp,errCode,errStr,requestId);}}
var app_srv=false;if(window["AppSrv"]&&(options.ws===true||(meth.getWS&&meth.getWS()===true))){app_srv=window.getApp().getAppSrv();}
if(app_srv&&app_srv.connActive&&app_srv.connActive()){var argv={};this.checkMethodParams(methId,options.viewId,argv);var contr_id=this.getId();contr_id=contr_id.substring(0,contr_id.indexOf("_Controller"));app_srv.runPublicMethod(contr_id+"."+methId,argv,options.viewId||this.PARAM_DEF_VIEW,options.progress,ret_func)}else{if(!options["async"]){window.setGlobalWait(true);}
var params=this.getParams(methId,options.viewId);if(options.t){params.t=options.t;}
var conn=this.getServConnector();var con_func=(options.requestType=="post")?conn.sendPost:conn.sendGet;this.m_resp=null;return con_func.call(conn,params,options["async"],ret_func,options.retContentType,options.encType);}}
ControllerObjServer.prototype.download=function(methId,viewId,ind,callBack){const params=this.getParams(methId,viewId);const parStr=this.getServConnector().queryParamsAsStr(params,true);const source=window.getApp().getServConnector().getScript()+"?"+parStr;fetch(source,{method:'GET'}).then(response=>{const contentType=response.headers.get('content-type');if(contentType&&contentType.includes('text/xml')){response.text().then(xmlText=>{const parser=new DOMParser();const xmlDocument=parser.parseFromString(xmlText,"application/xml");const resp=new ResponseXML(xmlDocument);const respModelId=window.getApp().SERV_RESPONSE_MODEL_ID;const m=resp.modelExists(respModelId)?new ModelServRespXML(resp.getModelData(respModelId)):null;if(m&&m.result){if(callBack){callBack(m.result);}
window.showError(m.descr,null,10000);};});}
const contentDisposition=response.headers.get('Content-Disposition');let filename='downloaded-file';if(contentDisposition){let match=contentDisposition.match(/filename\*=(?:UTF-8'')?([^;]+)/);if(match){filename=decodeURIComponent(match[1]);}else{match=contentDisposition.match(/filename="(.+?)"/);if(match){filename=match[1];}}}
return response.blob().then(blob=>({blob,filename}));}).then(({blob,filename})=>{const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=filename;document.body.appendChild(a);a.click();URL.revokeObjectURL(url);if(callBack){callBack(0);}});}
ControllerObjServer.prototype.openHref=function(methId,viewId,winParams){var meth=this.getPublicMethod(methId);return window.getApp().getServConnector().openHref(this.getParams(methId,viewId),winParams);}
ControllerObjServer.prototype.getResponse=function(){return this.m_resp;} 
function ControllerObjClient(options){options=options||{};this.setClientModel(options.clientModel);ControllerObjClient.superclass.constructor.call(this,options);}
extend(ControllerObjClient,ControllerObj);ControllerObjClient.prototype.UPD_PARAM_PREF="old_";ControllerObjClient.prototype.m_clientModel;ControllerObjClient.prototype.addInsert=function(){var pm=this.addMethod(this.METH_INSERT);var self=this;pm.run=function(options){if(self.m_clientModel){self.m_clientModel.reset();self.publicMethodFieldsToModel(this.getFields(),self.m_clientModel.getFields());self.m_clientModel.recInsert();if(options.ok){var key_model_fields={};var fields=self.m_clientModel.getFields();for(var fid in fields){if(fields[fid].getPrimaryKey()){var ft=fields[fid].getDataType();var fcl;if(ft==fields[fid].DT_INT){fcl=FieldInt;}
else{fcl=FieldString;}
key_model_fields[fid]=new fcl(fid,{"value":fields[fid].getValue()});}}
var resp,model;if(self.m_clientModel instanceof ModelXML){resp=new ResponseXML();model=new ModelXML("InsertedId_Model",{"fields":key_model_fields});}
else if(self.m_clientModel instanceof ModelJSON){resp=new ResponseJSON();model=new ModelJSON("InsertedId_Model",{"fields":key_model_fields});}
else{throw new Error(this.ER_UNSUPPORTED_CLIENT_MODEL);}
model.recInsert();resp.setModelData("InsertedId_Model",model.getData());options.ok(resp);}}}
return pm;}
ControllerObjClient.prototype.addUpdate=function(){var pm=this.addMethod(this.METH_UPDATE);var self=this;pm.run=function(options){if(self.m_clientModel){self.m_clientModel.reset();var keyFields={};self.publicMethodFieldsToModel(this.getFields(),null,keyFields);self.m_clientModel.recLocate(keyFields);self.publicMethodFieldsToModel(this.getFields(),self.m_clientModel.getFields());self.m_clientModel.recUpdate();if(options.ok){options.ok();}}}
return pm;}
ControllerObjClient.prototype.addDelete=function(){var pm=this.addMethod(this.METH_DELETE);var self=this;pm.run=function(options){if(self.m_clientModel){self.m_clientModel.recDelete(this.m_fields);if(options.ok){options.ok();}}}
return pm;}
ControllerObjClient.prototype.addGetList=function(){var pm=this.addMethod(this.METH_GET_LIST);var self=this;pm.run=function(options){if(self.m_clientModel){var rows=[];self.m_clientModel.reset();if(options[self.PARAM_COND_FIELDS]){var keys=options[self.PARAM_COND_FIELDS].split(options[self.PARAM_FIELD_SEP]);var vals=options[self.PARAM_COND_VALS].split(options[self.PARAM_FIELD_SEP]);var sgns=options[self.PARAM_COND_SGNS].split(options[self.PARAM_FIELD_SEP]);var opts={};for(var key in options[self.PARAM_COND_FIELDS]){opts[key]=options[self.PARAM_COND_VALS]}}
else{while(self.m_clientModel.getNextRow()){rows.push(self.m_clientModel.m_currentRow);}}
if(options.ok){options.ok(self.makeResponse(rows));}}}
return pm;}
ControllerObjClient.prototype.addGetObject=function(){var pm=this.addMethod(this.METH_GET_OBJ);var self=this;pm.run=function(options){if(self.m_clientModel){if(options.ok){options.ok(self.makeResponse(self.m_clientModel.getFields()));}}}
return pm;}
ControllerObjClient.prototype.setClientModel=function(v){this.m_clientModel=v;}
ControllerObjClient.prototype.getClientModel=function(){return this.m_clientModel;}
ControllerObjClient.prototype.publicMethodFieldsToModel=function(sFields,tFields,keyFields){for(var id in sFields){if(keyFields&&id.substr(0,this.UPD_PARAM_PREF.length)==this.UPD_PARAM_PREF){keyFields[id.substr(this.UPD_PARAM_PREF.length)]=sFields[id];}
else if(tFields&&tFields[id]&&sFields[id].isSet()){tFields[id].setValue(sFields[id].getValue());}}}
ControllerObjClient.prototype.makeResponse=function(rows){var resp_class;if(this.m_clientModel instanceof ModelXML){resp_class=ResponseXML;}
else if(this.m_clientModel instanceof ModelJSON){resp_class=ResponseJSON;}
else{throw new Error(this.ER_UNSUPPORTED_CLIENT_MODEL);}
var resp=new resp_class();resp.setModelData(this.m_clientModel.getId(),this.m_clientModel.getData());return resp;} 
function Model(id,options){options=options||{};this.setId(id);this.setFields(options.fields);this.m_sequences=options.sequences||{};this.setMarkOnDelete((options.markOnDelete!=undefined)?options.markOnDelete:false);this.setData(options.data);this.setCalcHash(options.calcHash);}
Model.prototype.m_fields;Model.prototype.m_id;Model.prototype.m_locked;Model.prototype.m_sequences;Model.prototype.m_currentRow;Model.prototype.m_rowIndex;Model.prototype.m_markOnDelete;Model.prototype.deleteRow=function(row,mark){}
Model.prototype.addRow=function(row){}
Model.prototype.setRowValues=function(row){}
Model.prototype.updateRow=function(row){this.setRowValues(row);}
Model.prototype.resetFields=function(){if(this.m_fields){for(var id in this.m_fields){if(this.m_fields[id].unsetValue){this.m_fields[id].unsetValue();}}}}
Model.prototype.copyRow=function(row){}
Model.prototype.setData=function(data){this.reset();}
Model.prototype.getData=function(){}
Model.prototype.getNextRow=function(){if(this.m_rowIndex+1==this.getRowCount()){return null;}
this.m_rowIndex++;return this.recFetch();}
Model.prototype.getPreviousRow=function(){if(this.m_rowIndex==0){return null;}
this.m_rowIndex--;return this.recFetch();}
Model.prototype.getRows=function(includeDeleted){}
Model.prototype.getRow=function(ind){if(isNaN(ind)||ind<0||ind>=this.getRowCount()){this.reset();return null;}
this.m_rowIndex=ind;return this.recFetch();}
Model.prototype.recFetch=function(){var rows=this.getRows();if(!rows||!rows.length){return;}
this.m_currentRow=rows[this.m_rowIndex];return this.fetchRow(this.m_currentRow);}
Model.prototype.getRowCount=function(includeDeleted){}
Model.prototype.getTotCount=function(){}
Model.prototype.getPageFrom=function(){}
Model.prototype.getPageCount=function(){}
Model.prototype.getFields=function(){return this.m_fields;}
Model.prototype.getRowIndex=function(){return this.m_rowIndex;}
Model.prototype.setRowIndex=function(ind){return this.getRow(ind);}
Model.prototype.fieldExists=function(id){return(this.m_fields&&this.m_fields[id]!=undefined);}
Model.prototype.getField=function(id){if(!this.m_fields){throw new Error(CommonHelper.format(this.ER_NO_FIELDS,[this.getId()]));}
if(!this.m_fields[id]){throw new Error(CommonHelper.format(this.ER_NO_FIELD,[id,this.getId()]));}
return this.m_fields[id];}
Model.prototype.setFields=function(v){if(CommonHelper.isArray(v)){this.m_fields={};for(var i=0;i<v.length;i++){if(typeof(v[i])=="object"){this.addField(v[i]);}else{var f=new FieldString(v[i]);this.addField(f);}}}
else if(typeof(v)=="object"){this.m_fields=v;}}
Model.prototype.addField=function(f){if(!this.m_fields){throw new Error(CommonHelper.format(this.ER_NO_FIELDS,[this.getId()]));}
this.m_fields[f.getId()]=f;}
Model.prototype.getFieldValue=function(id){return this.getField(id).getValue();}
Model.prototype.setFieldValue=function(id,v){this.getField(id).setValue(v);}
Model.prototype.reset=function(){this.resetFields();this.m_rowIndex=-1;this.m_currentRow=undefined;}
Model.prototype.recDelete=function(keyFields,mark){mark=(mark!=undefined)?mark:this.getMarkOnDelete();var row=this.recLocate(keyFields,true);this.deleteRow(this.m_currentRow,mark);}
Model.prototype.recUndelete=function(keyFields){var row=this.recLocate(keyFields,true);this.undeleteRow(this.m_currentRow);}
Model.prototype.recInsert=function(){for(var sid in this.m_sequences){if(this.m_fields[sid]&&!this.m_fields[sid].isSet()){this.m_sequences[sid]++;this.m_fields[sid].setValue(this.m_sequences[sid]);}}
this.m_currentRow=this.makeRow();this.addRow(this.m_currentRow);this.m_rowIndex=this.getRowCount()-1;}
Model.prototype.recUpdate=function(){this.updateRow(this.m_currentRow);}
Model.prototype.locate=function(keyFields,unique){var res;this.setLocked(true);var cur_ind=this.getRowIndex();try{this.reset();var row_i=0;while(this.getNextRow()){var key_found=true;for(var fid in keyFields){if(this.fieldExists(fid)){var dt=keyFields[fid].getDataType?keyFields[fid].getDataType():Field.prototype.DT_STRING;var is_date=(dt==keyFields[fid].DT_DATETIME||dt==keyFields[fid].DT_DATE||dt==keyFields[fid].DT_DATETIMETZ);var m_v=this.getFieldValue(fid);var k_v=keyFields[fid].getValue?keyFields[fid].getValue():keyFields[fid];if((!is_date&&m_v!=k_v)||(is_date&&m_v.getTime()!=k_v.getTime())){key_found=false;break;}}}
if(key_found){if(!res){res=[];}
res.push(row_i);if(unique){break;}}
row_i++;}}
finally{this.setLocked(false);}
this.setRowIndex(cur_ind);return res;}
Model.prototype.recLocate=function(keyFields,unique){var res=this.locate(keyFields,unique);if(!res&&unique){throw Error(this.ER_REС_NOT_FOUND);}
else if(res){this.getRow(res[0]);}
return res;}
Model.prototype.setLocked=function(v){this.m_locked=v;}
Model.prototype.getLocked=function(){return this.m_locked;}
Model.prototype.setId=function(id){this.m_id=id;}
Model.prototype.getMarkOnDelete=function(){return this.m_markOnDelete;}
Model.prototype.setMarkOnDelete=function(v){this.m_markOnDelete=v;}
Model.prototype.getId=function(){return this.m_id;}
Model.prototype.clear=function(){this.reset();}
Model.prototype.recMove=function(ind,cnt){}
Model.prototype.recMoveUp=function(ind){this.recMove(ind,-1);}
Model.prototype.recMoveDown=function(ind){this.recMove(ind,1);}
Model.prototype.getCalcHash=function(){return this.m_calcHash;}
Model.prototype.setCalcHash=function(v){this.m_calcHash=v;}
Model.prototype.appendModelData=function(targetModel){}
Model.prototype.insertModelData=function(targetModel){} 
function ModelXML(id,options){options=options||{};this.setTagModel(options.tagModel||this.DEF_TAG_MODEL);this.setTagRow(options.tagRow||this.DEF_TAG_ROW);this.m_namespace=options.namespace||this.DEF_NAMESPACE;ModelXML.superclass.constructor.call(this,id,options);}
extend(ModelXML,Model);ModelXML.prototype.ATTR_TOT_COUNT="totalCount";ModelXML.prototype.ATTR_PG_COUNT="rowsPerPage";ModelXML.prototype.ATTR_PG_FROM="listFrom";ModelXML.prototype.ATTR_DELETED="deleted";ModelXML.prototype.ATTR_INSERTED="inserted";ModelXML.prototype.ATTR_UPDATED="updated";ModelXML.prototype.ATTR_HASH="hash";ModelXML.prototype.DEF_TAG_MODEL="model";ModelXML.prototype.DEF_TAG_ROW="row";ModelXML.prototype.TAG_AT_ID="id";ModelXML.prototype.DEF_NAMESPACE="http://www.w3.org/1999/xhtml";ModelXML.prototype.m_node;ModelXML.prototype.m_tagModel;ModelXML.prototype.m_tagRow;ModelXML.prototype.m_namespace;ModelXML.prototype.fetchRow=function(row){this.resetFields();var f=row.childNodes;for(var i=0;i<f.length;i++){if(f[i].nodeType==1){var fid=f[i].nodeName;if(!this.m_fields[fid]){continue;}
var t_val=null;if(this.m_fields[fid].getDataType()==this.m_fields[fid].DT_ARRAY){if(f[i].childNodes.length){for(var t_ind=0;t_ind<f[i].childNodes.length;t_ind++){if(f[i].childNodes[t_ind].nodeType==3){if(!t_val){t_val="";}
t_val+=f[i].childNodes[t_ind].nodeValue;}
else if(f[i].childNodes[t_ind].nodeType==1){var ar_node=f[i].childNodes[t_ind];for(var j=0;j<ar_node.childNodes.length;j++){if(ar_node.childNodes[j].nodeType==3){if(!t_val){t_val=[];}
t_val.push(ar_node.childNodes[j].nodeValue);}}}}}}else if(f[i].nodeType==1&&f[i].childNodes.length){if(f[i].childNodes[0].nodeType==3){t_val=f[i].childNodes[0].nodeValue;}
else{t_val=f[i].innerHTML;}}
if(t_val==undefined&&this.m_fields[fid].getValidator()&&this.m_fields[fid].getValidator().getRequired()){}else if(t_val!==null){this.m_fields[fid].setValue(t_val);}}}
return true;}
ModelXML.prototype.getRows=function(includeDeleted){includeDeleted=(includeDeleted!=undefined)?includeDeleted:true;var rows=[];for(var i=0;i<this.m_node.childNodes.length;i++){if(this.m_node.childNodes[i].nodeType==1){if(!includeDeleted&&this.m_node.childNodes[i].getAttribute(this.ATTR_DELETED)=="1"){continue;}
rows.push(this.m_node.childNodes[i]);}}
return rows;}
ModelXML.prototype.getRowsJSON=function(includeDeleted){includeDeleted=(includeDeleted!=undefined)?includeDeleted:false;var rows=[];for(var i=0;i<this.m_node.childNodes.length;i++){if(this.m_node.childNodes[i].nodeType==1){if(!includeDeleted&&this.m_node.childNodes[i].getAttribute(this.ATTR_DELETED)=="1"){continue;}
var fields={};for(var j=0;j<this.m_node.childNodes[i].childNodes.length;j++){fields[this.m_node.childNodes[i].childNodes[j].nodeName]=this.m_node.childNodes[i].childNodes[j].nodeValue;}
rows.push(fields);}}
return rows;}
ModelXML.prototype.deleteRow=function(row,mark){ModelXML.superclass.deleteRow.call(this,row,mark);if(mark){row.setAttribute(this.ATTR_DELETED,"1");}
else if(row.parentNode){row.parentNode.removeChild(row);}}
ModelXML.prototype.undeleteRow=function(row){row.removeAttribute(this.ATTR_DELETED);}
ModelXML.prototype.addRow=function(row){row.setAttribute(this.ATTR_INSERTED,"1");this.m_node.appendChild(row);}
ModelXML.prototype.copyRow=function(row){this.addRow(row.cloneNode(true));}
ModelXML.prototype.updateRow=function(row){ModelXML.superclass.updateRow.call(this,row);row.setAttribute(this.ATTR_UPDATED,"1");}
ModelXML.prototype.appendFieldToRow=function(field,row){var cell=document.createElement(field.getId());var v="";if(field.isSet()){v=field.getValueXHR();}
var cell_t=document.createTextNode(v);cell.appendChild(cell_t);row.appendChild(cell);}
ModelXML.prototype.makeRow=function(){var row=document.createElement(this.getTagRow());for(var fid in this.m_fields){this.appendFieldToRow(this.m_fields[fid],row);}
return row;}
ModelXML.prototype.setRowValues=function(row){for(var id in this.m_fields){var found=false;for(var rcells=0;rcells<row.childNodes.length;rcells++){if(row.childNodes[rcells].nodeName==id&&row.childNodes[rcells].nodeType==1){if(this.m_fields[id].isSet()){if(row.childNodes[rcells].firstChild){row.childNodes[rcells].firstChild.nodeValue=this.m_fields[id].getValueXHR();}
else{row.childNodes[rcells].appendChild(document.createTextNode(this.m_fields[id].getValueXHR()));}}
found=true;break;}}
if(!found){this.appendFieldToRow(this.m_fields[id],row);}}}
ModelXML.prototype.initSequences=function(){for(sid in this.m_sequences){this.m_sequences[sid]=(this.m_sequences[sid]==undefined)?0:this.m_sequences[sid];var fields=this.m_node.getElementsByTagName(sid);for(var f=0;f<fields.length;f++){if(fields[f].firstChild){var dv=parseInt(fields[f].firstChild.nodeValue,10);if(this.m_sequences[sid]<dv){this.m_sequences[sid]=dv;}}}}}
ModelXML.prototype.setData=function(data){var no_data=false;if(!data){data='<'+this.getTagModel()+' '+this.TAG_AT_ID+'="'+this.getId()+'" xmlns="'+this.m_namespace+'"/>';no_data=true;}
if(typeof(data)=="string"){var xml=DOMHelper.xmlDocFromString(data);if(xml&&xml.getElementById){this.m_node=xml.getElementById(this.getId());}
if(xml&&!this.m_node){var models=xml.getElementsByTagName(this.getTagModel());var id=this.getId();for(var i=0;i<models.length;i++){if(models[i].getAttribute(this.TAG_AT_ID)==id){this.m_node=models[i];break;}}}}
else{this.m_node=data;}
if(!this.m_node){throw new Error(CommonHelper.format(this.ER_NO_MODEL,[this.getId()]));}
if(!this.m_fields&&this.m_node.childNodes&&this.m_node.childNodes.length&&this.m_node.childNodes[0].nodeName==this.getTagRow()&&this.m_node.childNodes[0].childNodes){this.m_fields={};for(var i=0;i<this.m_node.childNodes[0].childNodes.length;i++){var fid=this.m_node.childNodes[0].childNodes[i].nodeName;this.m_fields[fid]=new FieldString(fid);}}
if(this.m_node["toString"]){this.m_node["toString"]=function(){return this.outerHTML;}}
if(!no_data){this.initSequences();}
ModelXML.superclass.setData.call(this,data);}
ModelXML.prototype.getData=function(){return this.m_node;}
ModelXML.prototype.getRowCount=function(includeDeleted){includeDeleted=(includeDeleted!=undefined)?includeDeleted:true;if(includeDeleted){return(this.m_node&&this.m_node.children)?this.m_node.children.length:0;}
else{var rows=this.getRows(includeDeleted);return rows?rows.length:0;}}
ModelXML.prototype.getTotCount=function(){return this.getAttr(this.ATTR_TOT_COUNT);}
ModelXML.prototype.getPageCount=function(){return this.getAttr(this.ATTR_PG_COUNT);}
ModelXML.prototype.getPageFrom=function(){return this.getAttr(this.ATTR_PG_FROM);}
ModelXML.prototype.getAttr=function(attr){if(this.m_node){return this.m_node.getAttribute(attr);}}
ModelXML.prototype.clear=function(){while(this.m_node.children.length){this.m_node.removeChild(this.m_node.children[0]);}}
ModelXML.prototype.getTagModel=function(){return this.m_tagModel;}
ModelXML.prototype.setTagModel=function(v){this.m_tagModel=v;}
ModelXML.prototype.getTagRow=function(){return this.m_tagRow;}
ModelXML.prototype.setTagRow=function(v){this.m_tagRow=v;}
ModelXML.prototype.getHash=function(){return this.getAttr(this.ATTR_HASH);}
ModelXML.prototype.appendModelData=function(targetModel){for(var i=0;i<targetModel.m_node.children.length;i++){this.m_node.appendChild(targetModel.m_node.children[i].cloneNode(true));}}
ModelXML.prototype.insertModelData=function(targetModel){var before_n=this.m_node.children[0];for(var i=0;i<targetModel.m_node.children.length;i++){this.m_node.insertBefore(targetModel.m_node.children[i].cloneNode(true),before_n);}}
ModelXML.prototype.deleteRowByIndex=function(ind,mark){if(this.m_node.children&&this.m_node.children[ind]){this.deleteRow(this.m_node.children[ind],mark);}} 
function ModelObjectXML(id,options){ModelObjectXML.superclass.constructor.call(this,id,options);}
extend(ModelObjectXML,ModelXML);ModelObjectXML.prototype.setData=function(data){ModelObjectXML.superclass.setData.call(this,data);this.getNextRow();} 
function ModelServRespXML(data){ModelServRespXML.superclass.constructor.call(this,window.getApp().SERV_RESPONSE_MODEL_ID,{"data":data,"fields":{"result":new FieldInt("result"),"descr":new FieldString("descr"),"app_version":new FieldString("app_version"),"query_id":new FieldString("query_id")}});}
extend(ModelServRespXML,ModelObjectXML);ModelServRespXML.prototype.result;ModelServRespXML.prototype.descr;ModelServRespXML.prototype.setData=function(data){ModelServRespXML.superclass.setData.call(this,data);this.result=this.getFieldValue("result");this.descr=this.getFieldValue("descr");this.app_version=this.fieldExists("app_version")?this.getFieldValue("app_version"):null;this.query_id=this.fieldExists("query_id")?this.getFieldValue("query_id"):null;} 
function ModelJSON(id,options){if(id&&!options&&typeof(id)=="object"&&id.data&&id.data.id){options=CommonHelper.clone(id);id=id.data.id;}
this.setTagRow(options.tagRow||this.DEF_TAG_ROW);this.setTagRows(options.tagRows||this.DEF_TAG_ROWS);this.m_simpleStructure=(options.simpleStructure===true);options.markOnDelete=(options.markOnDelete!=undefined)?options.markOnDelete:false;ModelJSON.superclass.constructor.call(this,id,options);}
extend(ModelJSON,Model);ModelJSON.prototype.ATTR_TOT_COUNT="totalCount";ModelJSON.prototype.ATTR_PG_COUNT="rowsPerPage";ModelJSON.prototype.ATTR_PG_FROM="listFrom";ModelJSON.prototype.ATTR_DELETED="deleted";ModelJSON.prototype.ATTR_INSERTED="inserted";ModelJSON.prototype.ATTR_UPDATED="updated";ModelJSON.prototype.DEF_TAG_ROW="row";ModelJSON.prototype.DEF_TAG_ROWS="rows";ModelJSON.prototype.TAG_AT_ID="id";ModelJSON.prototype.m_model;ModelJSON.prototype.m_tagModel;ModelJSON.prototype.m_tagRow;ModelJSON.prototype.m_tagRows;ModelJSON.prototype.fetchRow=function(row){this.resetFields();var fields=row.fields?row.fields:row;for(fid in fields){if(!this.m_fields[fid]){continue;}
var t_val=null;if(fields[fid]!=undefined){t_val=fields[fid];}
if(t_val==""&&this.m_fields[fid].getValidator()&&this.m_fields[fid].getValidator().getRequired()){}
else if(t_val!==null){this.m_fields[fid].setValue(t_val);}}
return true;}
ModelJSON.prototype.getRows=function(includeDeleted){return this.m_model[this.getTagRows()];}
ModelJSON.prototype.getRowsJSON=function(includeDeleted){return this.getRows[includeDeleted];}
ModelJSON.prototype.copyRow=function(row){this.m_model[this.getTagRows()].push(JSON.parse(JSON.stringify(row)));}
ModelJSON.prototype.deleteRow=function(row,mark){ModelJSON.superclass.deleteRow.call(this,row,mark);if(mark){row[this.ATTR_DELETED]="1";}
else{var ind=CommonHelper.inArray(row,this.m_model[this.getTagRows()]);if(ind>=0){this.m_model[this.getTagRows()].splice(ind,1);}}}
ModelJSON.prototype.undeleteRow=function(row){row[this.ATTR_DELETED]="0";}
ModelJSON.prototype.addRow=function(row){this.m_model[this.getTagRows()].push(row);}
ModelJSON.prototype.updateRow=function(row){ModelJSON.superclass.updateRow.call(this,row);}
ModelJSON.prototype.makeRow=function(){var row=this.m_simpleStructure?{}:{"fields":{}};for(var fid in this.m_fields){if(row.fields){row.fields[fid]=this.m_fields[fid].getValue();}else{row[fid]=this.m_fields[fid].getValue();}}
return row;}
ModelJSON.prototype.setRowValues=function(row){var fields=row.fields?row.fields:row;for(var id in this.m_fields){if(this.m_fields[id].isSet()){fields[id]=this.m_fields[id].getValue();}}}
ModelJSON.prototype.initSequences=function(){for(sid in this.m_sequences){this.m_sequences[sid]=(this.m_sequences[sid]==undefined)?0:this.m_sequences[sid];if(!this.m_model[this.getTagRows()]){return;}
for(var r=0;r<this.m_model[this.getTagRows()].length;r++){var row=this.m_model[this.getTagRows()][r];var fields=row.fields?row.fields:row;for(var c in fields){if(c==sid){var dv=parseInt(fields[c],10);if(this.m_sequences[sid]<dv){this.m_sequences[sid]=dv;}
break;}}}}}
ModelJSON.prototype.setData=function(data){var no_data=false;if(!data){data={"id":this.getId()};data[this.getTagRows()]=[];no_data=true;}
if(typeof(data)=="string"){var data_o=CommonHelper.unserialize(data);var t_rows=this.getTagRows();if(!data_o[t_rows]){this.m_model={"id":this.getId()};this.m_model[t_rows]=data_o;}else{this.m_model=data_o;}}else if(CommonHelper.isArray(data)){this.m_model={"id":this.getId()};this.m_model[this.getTagRows()]=data;}else{this.m_model=data;}
if(!this.m_model.id){this.m_model.id=this.getId();}
if(!this.m_fields&&this.m_model.rows&&this.m_model.rows.length){var fields=this.m_model.rows[0].fields?this.m_model.rows[0].fields:this.m_model.rows[0];if(fields){this.m_fields={};for(fid in fields){this.m_fields[fid]=new FieldString(fid,{"value":fields[fid]});}}}
if(this.m_model["toString"]){var self=this;this.m_model["toString"]=function(){return CommonHelper.serialize(self.m_model);}}
if(!no_data){this.initSequences();}
ModelJSON.superclass.setData.call(this,data);}
ModelJSON.prototype.getData=function(){return this.m_simpleStructure?this.m_model.rows:this.m_model;}
ModelJSON.prototype.getRowCount=function(includeDeleted){var rows=this.getRows(includeDeleted);return rows?rows.length:0;}
ModelJSON.prototype.getTotCount=function(){return this.getAttr(this.ATTR_TOT_COUNT);}
ModelJSON.prototype.getPageCount=function(){return this.getAttr(this.ATTR_PG_COUNT);}
ModelJSON.prototype.getPageFrom=function(){return this.getAttr(this.ATTR_PG_FROM);}
ModelJSON.prototype.getAttr=function(attr){if(this.m_model){return this.m_model[attr];}}
ModelJSON.prototype.clear=function(){this.m_model[this.getTagRows()]=[];}
ModelJSON.prototype.getTagRow=function(){return this.m_tagRow;}
ModelJSON.prototype.setTagRow=function(v){this.m_tagRow=v;}
ModelJSON.prototype.getTagRows=function(){return this.m_tagRows;}
ModelJSON.prototype.setTagRows=function(v){this.m_tagRows=v;}
ModelJSON.prototype.recMove=function(ind,cnt){var mv_ind=this.getRowIndex()+cnt;if(mv_ind>=0&&mv_ind<this.getRowCount()){var tag=this.getTagRows();var elem=JSON.parse(JSON.stringify(this.m_model[tag][ind]));this.m_model[tag].splice(ind,1);this.m_model[tag].splice(mv_ind,0,elem);}} 
function ModelObjectJSON(id,options){ModelObjectJSON.superclass.constructor.call(this,id,options);}
extend(ModelObjectJSON,ModelJSON);ModelObjectJSON.prototype.setData=function(data){ModelObjectJSON.superclass.setData.call(this,data);this.getNextRow();} 
function ModelServRespJSON(data){ModelServRespJSON.superclass.constructor.call(this,window.getApp().SERV_RESPONSE_MODEL_ID,{"data":data,"fields":{"result":new FieldInt("result"),"descr":new FieldString("descr"),"query_id":new FieldString("query_id"),"app_version":new FieldString("app_version")}});}
extend(ModelServRespJSON,ModelObjectJSON);ModelServRespJSON.prototype.result;ModelServRespJSON.prototype.descr;ModelServRespJSON.prototype.query_id;ModelServRespJSON.prototype.setData=function(data){ModelServRespJSON.superclass.setData.call(this,data);this.result=this.getFieldValue("result");this.descr=this.getFieldValue("descr");this.query_id=this.getFieldValue("query_id");this.app_version=this.fieldExists("app_version")?this.getFieldValue("app_version"):null;} 
function ModelXMLTree(id,options){ModelXMLTree.superclass.constructor.call(this,id,options);}
extend(ModelXMLTree,ModelXML);ModelXMLTree.prototype.DEF_TAG_MODEL="root";ModelXMLTree.prototype.DEF_TAG_ROW="item";ModelXMLTree.prototype.m_parentNode;ModelXMLTree.prototype.m_keyField;ModelXMLTree.prototype.getKeyField=function(){if(!this.m_keyField){for(var fid in this.m_fields){if(this.m_fields[fid].getPrimaryKey()){this.m_keyField=this.m_fields[fid];break;}}}
return this.m_keyField;}
ModelXMLTree.prototype.getRow=function(ind){ModelXMLTree.superclass.getRow.call(this,ind);this.m_parentNode=(this.m_currentRow)?this.m_currentRow:this.m_node;}
ModelXMLTree.prototype.addRow=function(row){if(!this.m_parentNode)this.m_parentNode=this.m_node;this.m_parentNode.appendChild(row);}
ModelXMLTree.prototype.getParentId=function(){var par_id;if(this.m_currentRow&&this.m_currentRow.parentNode&&this.m_currentRow.parentNode!=this.m_node){var key_id=this.getKeyField().getId();var na=this.m_currentRow.parentNode.getElementsByTagName(key_id);if(na&&na.length){var tn=DOMHelper.firstChildElement(na[0],3);if(tn)par_id=tn.nodeValue;}}
return par_id;}
ModelXMLTree.prototype.getRows=function(includeDeleted){return this.m_node.getElementsByTagName(this.getTagRow());}
ModelXMLTree.prototype.makeRow=function(){var row=document.createElement(this.getTagRow());var key_field=this.getKeyField();var key_id=key_field.getId();for(var fid in this.m_fields){var cell=document.createElement(fid);var v="";var f_set=this.m_fields[fid].isSet();if(!f_set&&fid==key_id&&!this.m_sequences[fid]){v=CommonHelper.uniqid();}
else if(f_set){v=this.m_fields[fid].getValue();}
cell.appendChild(document.createTextNode(v));row.appendChild(cell);}
return row;}
ModelXMLTree.prototype.getRowCount=function(includeDeleted){includeDeleted=(includeDeleted!=undefined)?includeDeleted:true;var rows=this.getRows(includeDeleted);return rows?rows.length:0;} 
function ModelJSONTree(id,options){this.setTagParent(options.tagParent||this.DEF_TAG_PARENT);ModelJSONTree.superclass.constructor.call(this,id,options);}
extend(ModelJSONTree,ModelJSON);ModelJSONTree.prototype.DEF_TAG_MODEL="root";ModelJSONTree.prototype.DEF_TAG_ROW="item";ModelJSONTree.prototype.DEF_TAG_ROWS="items";ModelJSONTree.prototype.DEF_TAG_PARENT="parent_id";ModelJSONTree.prototype.m_parentNode;ModelJSONTree.prototype.m_keyField;ModelJSONTree.prototype.m_tagParent;ModelJSONTree.prototype.getKeyField=function(){if(!this.m_keyField){for(var fid in this.m_fields){if(this.m_fields[fid].getPrimaryKey()){this.m_keyField=this.m_fields[fid];break;}}}
return this.m_keyField;}
ModelJSONTree.prototype.getRow=function(ind){ModelJSONTree.superclass.getRow.call(this,ind);this.m_parentNode=(this.m_currentRow)?this.m_currentRow:this.m_model;}
ModelJSONTree.prototype.addRow=function(row){var tags=this.getTagRows();if(!this.m_parentNode){this.m_parentNode=this.m_model;}
this.m_parentNode[tags]=this.m_parentNode[tags]||[];this.m_parentNode[tags].push(row);}
ModelJSONTree.prototype.getParentId=function(){var par_id;if(this.m_currentRow&&this.m_currentRow[this.getTagParent()]){par_id=this.m_currentRow[this.getTagParent()];}
return par_id;}
ModelJSONTree.prototype.fillRows=function(arToFill,row){var t=this.getTagRows();for(row_id in row[t]){arToFill.push(row[t][row_id]);if(row[t][row_id][t]){this.fillRows(arToFill,row[t][row_id]);}}}
ModelJSONTree.prototype.getRows=function(includeDeleted){var rows=[];this.fillRows(rows,this.m_model);return rows;}
ModelJSONTree.prototype.makeRow=function(){var key_field=this.getKeyField();var key_id=key_field.getId();var row={"fields":{}};for(var fid in this.m_fields){var v="";var f_set=this.m_fields[fid].isSet();if(!f_set&&fid==key_id&&!this.m_sequences[fid]){v=CommonHelper.uniqid();}
else if(f_set){v=this.m_fields[fid].getValue();}
if(row.fields){row.fields[fid]=v;}else{row[fid]=v;}}
row[this.getTagParent()]=(this.m_parentNode)?this.m_parentNode[this.getKeyField().getId()]:null;return row;}
ModelJSONTree.prototype.getTagParent=function(){return this.m_tagParent;}
ModelJSONTree.prototype.setTagParent=function(v){this.m_tagParent=v;} 
function Validator(options){options=options||{};this.setRequired(options.required);this.setMinLength(options.minLength);this.setFixLength(options.fixLength);this.setMaxLength(options.maxLength);}
Validator.prototype.m_required;Validator.prototype.m_minLength;Validator.prototype.m_maxLength;Validator.prototype.m_fixLength;Validator.prototype.setRequired=function(v){this.m_required=v;}
Validator.prototype.getRequired=function(){return this.m_required;}
Validator.prototype.setMinLength=function(v){this.m_minLength=v;}
Validator.prototype.getMinLength=function(){return this.m_minLength;}
Validator.prototype.setMaxLength=function(v){this.m_maxLength=v;}
Validator.prototype.getMaxLength=function(){return this.m_maxLength;}
Validator.prototype.setFixLength=function(v){this.m_fixLength=v;}
Validator.prototype.getFixLength=function(){return this.m_fixLength;}
Validator.prototype.isTooLong=function(val){return(val&&this.m_maxLength&&val.length&&val.length>this.m_maxLength);}
Validator.prototype.isTooShort=function(val){return(val&&this.m_minLength&&val.length&&val.length<this.m_minLength);}
Validator.prototype.isNotFixed=function(val){return(val&&this.m_fixLength&&val.length&&val.length!=this.m_maxLength);}
Validator.prototype.validate=function(val){if(this.getRequired()&&val===null){throw new Error(this.ER_EMPTY);}
if(this.isTooLong(val)){throw new Error(this.ER_TOO_LONG);}
if(this.isTooShort(val)){throw new Error(this.ER_TOO_SHORT);}
if(this.isNotFixed(val)){throw new Error(this.ER_INVALID);}}
Validator.prototype.correctValue=function(v){return v;} 
function ValidatorString(options){ValidatorString.superclass.constructor.call(this,options);}
extend(ValidatorString,Validator);ValidatorString.prototype.validate=function(val){ValidatorString.superclass.validate.call(this,val);if(this.getRequired()&&val==""){throw new Error(this.ER_EMPTY);}} 
function ValidatorBool(options){this.TRUE_VALS=[];ValidatorBool.superclass.constructor.call(this,options);this.TRUE_VALS.push("1");this.TRUE_VALS.push("true");this.TRUE_VALS.push("t");this.TRUE_VALS.push("yes");this.TRUE_VALS.push("y");}
extend(ValidatorBool,Validator);ValidatorBool.prototype.correctValue=function(v){return(v===null||v===undefined||v===true||v===false)?v:((!isNaN(v)&&v>0)?true:(jQuery.inArray(v.toString().toLowerCase(),this.TRUE_VALS)>=0));} 
function ValidatorDate(options){ValidatorDate.superclass.constructor.call(this,options);}
extend(ValidatorDate,Validator);ValidatorDate.prototype.correctValue=function(v){var ret=null;if(v&&typeof v=="object"){ret=v;}
else if(v){ret=DateHelper.strtotime(v);}
return ret;}
ValidatorDate.prototype.validate=function(val){ValidatorDate.superclass.validate.call(this,val);if(this.getRequired()&&val==undefined){throw new Error(this.ER_EMPTY);}} 
function ValidatorDateTime(options){ValidatorDateTime.superclass.constructor.call(this,options);}
extend(ValidatorDateTime,ValidatorDate); 
function ValidatorTime(options){ValidatorTime.superclass.constructor.call(this,options);}
extend(ValidatorTime,ValidatorDate);ValidatorTime.prototype.correctValue=function(v){if(v instanceof Date)return v;return DateHelper.strtotime("1970-01-01T"+v);} 
function ValidatorInterval(options){ValidatorInterval.superclass.constructor.call(this,options);}
extend(ValidatorInterval,ValidatorString); 
function ValidatorInt(options){ValidatorInt.superclass.constructor.call(this,options);if(options.maxValue){this.setMaxValue(options.maxValue);}
if(options.minValue){this.setMinValue(options.minValue);}
if(options.notZero!=undefined){this.setNotZero(options.notZero);}
if(options.unsigned!=undefined){this.setUnsigned(options.unsigned);}}
extend(ValidatorInt,Validator);ValidatorInt.prototype.m_maxValue;ValidatorInt.prototype.m_minValue;ValidatorInt.prototype.m_notZero;ValidatorInt.prototype.m_unsigned;ValidatorInt.prototype.correctValue=function(v){v=this.toNumber(v);if(isNaN(v))v=null;return v;}
ValidatorInt.prototype.toNumber=function(v){return parseInt(v);}
ValidatorInt.prototype.validate=function(v){var n=this.toNumber(v);if(this.getRequired()&&isNaN(n)){throw new Error(this.ER_INVALID);}
if(this.m_maxValue&&n>this.m_maxValue){throw new Error(CommonHelper.format(this.ER_VIOL_MAX,[n]));}
if(this.m_minValue&&n<this.m_minValue){throw new Error(CommonHelper.format(this.ER_VIOL_MIN,[n]));}
if(this.m_notZero&&n==0){throw new Error(this.ER_VIOL_NOT_ZERO);}
if(this.m_unsigned&&n<0){throw new Error(this.ER_VIOL_UNSIGNED);}
return n;}
ValidatorInt.prototype.getMaxValue=function(){return this.m_maxValue;}
ValidatorInt.prototype.setMaxValue=function(v){this.m_maxValue=v;}
ValidatorInt.prototype.getMinValue=function(){return this.m_minValue;}
ValidatorInt.prototype.setMinValue=function(v){this.m_minValue=v;}
ValidatorInt.prototype.getUnsigned=function(){return this.m_unsigned;}
ValidatorInt.prototype.setUnsigned=function(v){this.m_unsigned=v;}
ValidatorInt.prototype.getNotZero=function(){return this.m_notZero;}
ValidatorInt.prototype.setNotZero=function(v){this.m_notZero=v;} 
function ValidatorFloat(options){ValidatorFloat.superclass.constructor.call(this,options);}
extend(ValidatorFloat,ValidatorInt);ValidatorFloat.prototype.toNumber=function(v){return parseFloat(v);}
ValidatorFloat.prototype.correctValue=function(v){var this_dig_sep;var v_str=String(v);if(v_str.indexOf(".")>=0){this_dig_sep=".";}
else if(v_str.indexOf(",")>=0){this_dig_sep=",";}
if(this_dig_sep){var js_sep=".";if(js_sep!=this_dig_sep){v=v_str.replace(this_dig_sep,js_sep);}}
return this.toNumber(v);} 
function ValidatorEnum(options){options=options||{};this.setEnumValues(options.enumValues);ValidatorEnum.superclass.constructor.call(this,options);}
extend(ValidatorEnum,Validator);ValidatorEnum.prototype.m_enumValues;ValidatorEnum.prototype.setEnumValues=function(v){this.m_enumValues=v;}
ValidatorEnum.prototype.getEnumValues=function(){return this.m_enumValues;}
ValidatorEnum.prototype.validate=function(val){ValidatorEnum.superclass.validate.call(this,val);var vals=this.getEnumValues();if(vals!==undefined&&val!=undefined&&vals.indexOf(val)<0){throw new Error(this.ER_INVALID);}} 
function ValidatorJSON(options){ValidatorJSON.superclass.constructor.call(this,options);}
extend(ValidatorJSON,Validator);ValidatorJSON.prototype.correctValue=function(v){return CommonHelper.unserialize(v);} 
function ValidatorArray(options){ValidatorArray.superclass.constructor.call(this,options);}
extend(ValidatorArray,Validator);ValidatorArray.prototype.correctValue=function(v){return eval(v);} 
function ValidatorEmail(options){options.maxLength=this.MAX_LENGTH;ValidatorEmail.superclass.constructor.call(this,options);}
extend(ValidatorEmail,ValidatorString);ValidatorEmail.prototype.MAX_LENGTH=100;ValidatorEmail.prototype.validate=function(val){ValidatorEmail.superclass.validate.call(this,val);var re=/\S+@\S+\.\S+/;if(val&&val.length&&!re.test(val)){throw new Error(this.ER_INVALID);}} 
function ValidatorXML(options){ValidatorXML.superclass.constructor.call(this,options);}
extend(ValidatorXML,Validator);ValidatorXML.prototype.correctValue=function(v){if(typeof v==="string"){v=DOMHelper.xmlDocFromString(v);}
return v;} 
function Field(id,options){options=options||{};if(!options.validator){throw new Error(CommonHelper.format(this.ER_NO_VALIDATOR,[id]));}
this.setId(id);this.setValidator(options.validator);this.setDataType(options.dataType);this.setAlias(options.alias);if(options.defValue!=undefined){this.setDefValue(options.defValue);}
else{this.m_defValue=undefined;}
if(options.value!=undefined){this.setValue(options.value);}
else{this.m_value=undefined;}
this.setPrimaryKey((options.primaryKey!=undefined)?options.primaryKey:false);this.setAutoInc((options.autoInc!=undefined)?options.autoInc:false);}
Field.prototype.DT_INT=0;Field.prototype.DT_INT_UNSIGNED=1;Field.prototype.DT_STRING=2;Field.prototype.DT_FLOAT_UNSIGNED=3;Field.prototype.DT_FLOAT=4;Field.prototype.DT_CUR_RUR=5;Field.prototype.DT_CUR_USD=6;Field.prototype.DT_BOOL=7;Field.prototype.DT_TEXT=8;Field.prototype.DT_DATETIME=9;Field.prototype.DT_DATE=10;Field.prototype.DT_TIME=11;Field.prototype.DT_OBJECT=12;Field.prototype.DT_FILE=13;Field.prototype.DT_PWD=14;Field.prototype.DT_EMAIL=15;Field.prototype.DT_ENUM=16;Field.prototype.DT_GEOM_POLYGON=17;Field.prototype.DT_GEOM_POINT=18;Field.prototype.DT_INTERVAL=19;Field.prototype.DT_DATETIMETZ=20;Field.prototype.DT_JSON=21;Field.prototype.DT_JSONB=22;Field.prototype.DT_ARRAY=23;Field.prototype.DT_XML=24;Field.prototype.DT_INT_BIG=25;Field.prototype.DT_INT_SMALL=26;Field.prototype.DT_BYTEA=27;Field.prototype.OLD_PREF="old_";Field.prototype.m_id;Field.prototype.m_alias;Field.prototype.m_value;Field.prototype.m_primaryKey;Field.prototype.m_defValue;Field.prototype.m_validator;Field.prototype.m_dataType;Field.prototype.setId=function(id){this.m_id=id;}
Field.prototype.getId=function(){return this.m_id;}
Field.prototype.getOldId=function(){return this.OLD_PREF+this.m_id;}
Field.prototype.setPrimaryKey=function(v){this.m_primaryKey=v;}
Field.prototype.getPrimaryKey=function(){return this.m_primaryKey;}
Field.prototype.setDefValue=function(v){v=this.m_validator.correctValue(v);this.m_validator.validate(v);this.m_defValue=v;}
Field.prototype.getDefValue=function(){return this.m_defValue;}
Field.prototype.setAlias=function(v){this.m_alias=v;}
Field.prototype.getAlias=function(){return this.m_alias||this.m_id;}
Field.prototype.setValidator=function(v){this.m_validator=v;}
Field.prototype.getValidator=function(){return this.m_validator;}
Field.prototype.setDataType=function(v){this.m_dataType=v;}
Field.prototype.getDataType=function(){return this.m_dataType;}
Field.prototype.setValue=function(v){try{v=this.m_validator.correctValue(v);this.m_validator.validate(v);}
catch(e){throw new Error(CommonHelper.format(this.ER_SET_VAL,[this.getAlias(),e.message]));}
this.m_value=v;}
Field.prototype.resetValue=function(){var req=this.m_validator.getRequired();if(req)this.m_validator.setRequired(false);this.setValue(null);this.m_validator.setRequired(req);}
Field.prototype.validate=function(value){this.getValidator().validate(value);}
Field.prototype.getValue=function(arInd){if(arInd&&this.m_value&&this.m_value.length>arInd){return this.m_value[arInd];}
else{return this.m_value;}}
Field.prototype.getValueXHR=function(){return this.getValue();}
Field.prototype.isNull=function(){return((this.getValue()===null)&&(this.getDefValue()===null));}
Field.prototype.isSet=function(){return(this.getValue()!==undefined||this.getDefValue()!==undefined);}
Field.prototype.setAutoInc=function(v){this.m_autoInc=v;}
Field.prototype.getAutoInc=function(){return this.m_autoInc;}
Field.prototype.unsetValue=function(){this.m_value=undefined;} 
function FieldString(id,options){options=options||{};options.validator=options.validator||new ValidatorString(options);options.dataType=this.DT_STRING;FieldString.superclass.constructor.call(this,id,options);}
extend(FieldString,Field); 
function FieldEnum(id,options){options.dataType=this.DT_ENUM;options.validator=options.validator||new ValidatorEnum(options);options.dataType=this.DT_ENUM;FieldEnum.superclass.constructor.call(this,id,options);}
extend(FieldEnum,FieldString); 
function FieldBool(id,options){options=options||{};options.validator=options.validator||new ValidatorBool(options);options.dataType=this.DT_BOOL;FieldBool.superclass.constructor.call(this,id,options);}
extend(FieldBool,Field);FieldBool.prototype.getValueXHR=function(){return((this.getValue())?"1":"0");} 
function FieldDate(id,options){options=options||{};options.validator=options.validator||new ValidatorDate(options);options.dataType=options.dataType||this.DT_DATE;FieldDate.superclass.constructor.call(this,id,options);}
extend(FieldDate,Field);FieldDate.prototype.XHR_FORMAT="Y-m-d";FieldDate.prototype.getValueXHR=function(){var v=this.getValue();return v?DateHelper.format(v,this.XHR_FORMAT):null;} 
function FieldDateTime(id,options){options=options||{};options.dataType=options.dataType||this.DT_DATETIME;FieldDateTime.superclass.constructor.call(this,id,options);}
extend(FieldDateTime,FieldDate);FieldDateTime.prototype.XHR_FORMAT="Y-m-dTH:i:s"; 
function FieldDateTimeTZ(id,options){options=options||{};options.dataType=this.DT_DATETIMETZ;this.XHR_FORMAT="Y-m-dTH:i:s"+window.getApp().getTimeZoneOffsetStr();FieldDateTimeTZ.superclass.constructor.call(this,id,options);}
extend(FieldDateTimeTZ,FieldDateTime); 
function FieldTime(id,options){options=options||{};options.dataType=this.DT_TIME;options.validator=options.validator||new ValidatorTime(options);FieldTime.superclass.constructor.call(this,id,options);}
extend(FieldTime,FieldDate);FieldTime.prototype.XHR_FORMAT="H:i:s"; 
function FieldInt(id,options){options=options||{};options.validator=options.validator||new ValidatorInt(options);options.dataType=this.DT_INT;FieldInt.superclass.constructor.call(this,id,options);}
extend(FieldInt,Field); 
function FieldBigInt(id,options){options=options||{};options.validator=options.validator||new ValidatorInt(options);options.dataType=this.DT_INT_BIG;FieldBigInt.superclass.constructor.call(this,id,options);}
extend(FieldBigInt,Field); 
function FieldSmallInt(id,options){options=options||{};options.validator=options.validator||new ValidatorInt(options);options.dataType=this.DT_INT_SMALL;FieldSmallInt.superclass.constructor.call(this,id,options);}
extend(FieldSmallInt,Field); 
function FieldFloat(id,options){options=options||{};options.validator=options.validator||new ValidatorFloat(options);options.dataType=options.dataType||this.DT_FLOAT;FieldFloat.superclass.constructor.call(this,id,options);}
extend(FieldFloat,Field); 
function FieldPassword(id,options){options=options||{};options.dataType=this.DT_PWD;FieldPassword.superclass.constructor.call(this,id,options);}
extend(FieldPassword,FieldString); 
function FieldText(id,options){options=options||{};options.dataType=this.DT_TEXT;FieldText.superclass.constructor.call(this,id,options);}
extend(FieldText,FieldString); 
function FieldInterval(id,options){options=options||{};options.dataType=this.DT_INTERVAL;FieldInterval.superclass.constructor.call(this,id,options);}
extend(FieldInterval,FieldString); 
function FieldJSON(id,options){options=options||{};options.validator=options.validator||new ValidatorJSON(options);options.dataType=this.DT_JSON;FieldJSON.superclass.constructor.call(this,id,options);}
extend(FieldJSON,Field);FieldJSON.prototype.getValueXHR=function(){return(CommonHelper.serialize(this.getValue()));}
FieldJSON.prototype.setValue=function(id,v){if(!v&&typeof(id)=="object"){this.m_value=id;}
else if(!v&&typeof(id)=="string"&&id.length){this.m_value=CommonHelper.unserialize(id);}
else if(v){this.m_value=this.m_value||{};this.m_value[id]=v;}}
FieldJSON.prototype.isEmpty=function(val,checkNull){val=(val&&val.getKeys)?val.getKeys():val;var r=(val==undefined);if(!r){r=true;for(v in val){if(checkNull&&val[v]!==null||!checkNull&&val[v]!==undefined){r=false;break;}}}
return r;}
FieldJSON.prototype.isNull=function(){var r=this.isEmpty(this.getValue(),true);if(r){r=this.isEmpty(this.getDefValue(),true);}
return r;}
FieldJSON.prototype.isSet=function(){var r=this.isEmpty(this.getValue(),false);if(r){r=this.isEmpty(this.getDefValue(),false);}
return!r;} 
function FieldJSONB(id,options){options=options||{};options.dataType=this.DT_JSONB;FieldJSONB.superclass.constructor.call(this,id,options);}
extend(FieldJSONB,FieldJSON); 
function FieldArray(id,options){options=options||{};options.validator=options.validator||new ValidatorArray(options);options.dataType=this.DT_ARRAY;FieldArray.superclass.constructor.call(this,id,options);}
extend(FieldArray,Field);FieldArray.prototype.getValueXHR=function(){return(CommonHelper.serialize(this.getValue()));} 
function FieldXML(id,options){options=options||{};options.validator=options.validator||new ValidatorXML(options);options.dataType=this.DT_XML;FieldXML.superclass.constructor.call(this,id,options);}
extend(FieldXML,Field);FieldXML.prototype.getValueXHR=function(){var xml=this.getValue();if(xml){var serializer=new XMLSerializer();return serializer.serializeToString(xml);}}
FieldXML.prototype.setValue=function(id,v){if(!v&&typeof(id)=="object"){this.m_value=id;}else if(!v&&typeof(id)=="string"&&id.length){this.m_value=DOMHelper.xmlDocFromString(id);}
else if(v){this.m_value=v;}}
FieldXML.prototype.isEmpty=function(val,checkNull){return!(typeof val==="object"&&val instanceof EditXML&&val.childNodes&&val.childNodes[0].childNodes&&val.childNodes[0].childNodes.length);} 
function FieldBytea(id,options){options=options||{};options.validator=options.validator||new Validator(options);options.dataType=this.DT_BYTEA;FieldBytea.superclass.constructor.call(this,id,options);}
extend(FieldBytea,Field); 
function ModelFilter(options){options=options||{};this.setFilters(options.filters);}
ModelFilter.prototype.m_filters;ModelFilter.prototype.getFilterVal=function(filter){var ctrl=filter.binding.getControl();if(!ctrl){throw Error(CommonHelper.format(this.ER_NO_CTRL,[id]));}
var f=filter.binding.getField();var res={"field":f.getId(),"sign":filter.sign,"val":undefined,"icase":undefined,"incorrect_val":false};if(!ctrl.isNull()){ctrl.setValid();try{var fv;if(!ctrl.getIsRef()){fv=ctrl.getValue();}
else{var keys=ctrl.getKeys();for(var kid in keys){fv=keys[kid];break;}}
if(ctrl.getValidator&&ctrl.getValidator()instanceof ValidatorDate&&(f instanceof FieldDateTime||f instanceof FieldDateTimeTZ)&&ctrl.getTimeValueStr&&ctrl.getTimeValueStr()){fv.setHours(0);fv.setMinutes(0);fv.setSeconds(0);fv=new Date(fv.getTime()+DateHelper.timeToMS(ctrl.getTimeValueStr()));}
if(fv===false&&filter.falseValueNoFilter){return res;}
f.setValue(fv);}catch(e){ctrl.setNotValid(e.message);res.incorrect_val=true;}
res.val=f.getValueXHR();if(filter.sign=="lk"||filter.sign=="ilk"){res.val=(filter.lwcards?"%":"")+res.val+(filter.rwcards?"%":"")}
res.icase=filter.icase?"1":"0";}
else if(ctrl.getRequired()||f.getValidator().getRequired()){ctrl.setNotValid(f.getValidator().ER_EMPTY);res.incorrect_val=true;}
return res;}
ModelFilter.prototype.setFilter=function(id,filter){this.m_filters[id]=filter;}
ModelFilter.prototype.getFilter=function(id){return this.m_filters[id];}
ModelFilter.prototype.getFilters=function(){return this.m_filters;}
ModelFilter.prototype.setFilters=function(v){this.m_filters=v;}
ModelFilter.prototype.applyFilters=function(grid){var set_cnt=0;for(var id in this.m_filters){if(this.m_filters[id]&&this.m_filters[id].bindings){for(var i=0;i<this.m_filters[id].bindings.length;i++){var struc=this.getFilterVal(this.m_filters[id].bindings[i]);if(!struc.incorrect_val&&struc.val!==undefined){grid.setFilter(struc);set_cnt++;}
else{grid.unsetFilter(struc);}}}
else if(this.m_filters[id]){var struc=this.getFilterVal(this.m_filters[id]);if(!struc.incorrect_val&&struc.val!==undefined){grid.setFilter(struc);set_cnt++;}
else{grid.unsetFilter(struc);}}}
return set_cnt;}
ModelFilter.prototype.applyFiltersToPublicMethod=function(pm){var set_cnt=0;var contr=pm.getController();var s_fields,s_signs,s_vals,s_icases;var sep=contr.PARAM_FIELD_SEP_VAL;var incorrect_val=false;for(var id in this.m_filters){if(this.m_filters[id].bindings){for(var i=0;i<this.m_filters[id].bindings.length;i++){var struc=this.getFilterVal(this.m_filters[id].bindings[i]);if(struc.incorrect_val){incorrect_val=true;}
else{s_fields=((!s_fields)?"":s_fields+sep)+struc.field;s_signs=((!s_signs)?"":s_signs+sep)+struc.sign;s_vals=((!s_vals)?"":s_vals+sep)+struc.val;s_icases=((!s_icases)?"":s_icases+sep)+(struc.icase||"0");set_cnt++;}}}
else{var struc=this.getFilterVal(this.m_filters[id]);if(struc.incorrect_val){incorrect_val=true;}
else if(struc.val||(!struc.val&&this.m_filters[id].binding.getSendNull())){s_fields=((!s_fields)?"":s_fields+sep)+struc.field;s_signs=((!s_signs)?"":s_signs+sep)+struc.sign;s_vals=((!s_vals)?"":s_vals+sep)+struc.val;s_icases=((!s_icases)?"":s_icases+sep)+(struc.icase||"0");set_cnt++;}}}
if(incorrect_val){throw Error(this.ER_INVALID_CTRL);}
pm.setFieldValue(contr.PARAM_COND_FIELDS,s_fields);pm.setFieldValue(contr.PARAM_COND_SGNS,s_signs);pm.setFieldValue(contr.PARAM_COND_VALS,s_vals);pm.setFieldValue(contr.PARAM_COND_ICASE,s_icases);pm.setFieldValue(contr.PARAM_FIELD_SEP,sep);return set_cnt;}
ModelFilter.prototype.resetFilter=function(id,grid){var bind=this.m_filters[id].binding;var ctrl=bind.getControl();if(!ctrl){throw Error(CommonHelper.format(this.ER_NO_CTRL,[id]));}
ctrl.reset();if(this.m_filters[id].bindings){for(var i=0;i<this.m_filters[id].bindings.length;i++){var filter=this.m_filters[id].bindings[i];grid.unsetFilter({"field":filter.binding.getField().getId(),"sign":filter.sign});}}
else{var filter=this.m_filters[id];grid.unsetFilter({"field":filter.binding.getField().getId(),"sign":filter.sign});}}
ModelFilter.prototype.resetFilters=function(grid){for(var id in this.m_filters){this.resetFilter(id,grid);}}
ModelFilter.prototype.serialize=function(){return CommonHelper.serialize(this.getValue());}
ModelFilter.prototype.getValue=function(){var o={};for(var id in this.m_filters){var ctrl=this.m_filters[id].binding.getControl();if(ctrl&&!ctrl.isNull()){if(this.m_filters[id].bindings){o[id]={"value":ctrl.getValue()};o[id].bindings=[];for(var i=0;i<this.m_filters[id].bindings.length;i++){var ctrl=this.m_filters[id].bindings[i].binding.getControl();if(ctrl&&!ctrl.isNull()){var v=ctrl.getValue();if(v instanceof Date){v=DateHelper.format(v,FieldDateTime.XHR_FORMAT);}
o[id].bindings[i]={"field":this.m_filters[id].bindings[i].binding.getField().getId(),"sign":this.m_filters[id].bindings[i].sign,"value":v};}}}
else{var v=ctrl.getValue();if(v instanceof Date){v=DateHelper.format(v,FieldDateTime.XHR_FORMAT);}
o[id]={"field":this.m_filters[id].binding.getField().getId(),"sign":this.m_filters[id].sign,"value":v};}}}
return o;}
ModelFilter.prototype.unserialize=function(str){return this.setValue(CommonHelper.unserialize(str));}
ModelFilter.prototype.setValue=function(o){var set_cnt=0;if(!o)return;for(var id in this.m_filters){var ctrl=this.m_filters[id].binding.getControl();if(ctrl){if(o[id]){if(this.m_filters[id].bindings){if(o[id].value.period)ctrl.setValue(o[id].value.period);for(var i=0;i<this.m_filters[id].bindings.length;i++){ctrl=this.m_filters[id].bindings[i].binding.getControl();if(ctrl){if(o[id].bindings[i]){ctrl.setInitValue(o[id].bindings[i].value);set_cnt++;}
else{ctrl.reset();}}}}
else{ctrl.setInitValue(o[id].value);set_cnt++;}}
else{ctrl.reset();}}}
return set_cnt;} 
function RefType(options){options=options||{};this.setKeys(options.keys);this.setDescr(options.descr);this.setDataType(options.dataType);}
RefType.prototype.m_keys;RefType.prototype.m_descr;RefType.prototype.m_dataType;RefType.prototype.setKeys=function(v){this.m_keys=v;}
RefType.prototype.getKeys=function(){return this.m_keys;}
RefType.prototype.setDescr=function(v){this.m_descr=v;}
RefType.prototype.getDescr=function(){return this.m_descr;}
RefType.prototype.setDataType=function(v){this.m_dataType=v;}
RefType.prototype.getDataType=function(){return this.m_dataType;}
RefType.prototype.getKey=function(v){var val;if(this.m_keys&&v){val=this.m_keys[v];}
else if(this.m_keys&&!v){for(var k in this.m_keys){val=this.m_keys[k];break;}}
return val;}
RefType.prototype.isNull=function(){var k=this.getKeys();var r=(k==undefined||k==null||CommonHelper.isEmpty(k));if(!r){for(v in k){r=(k[v]===null||k[v]==="null");if(r){break;}}}
return r;}
RefType.prototype.toJSON=function(){return{"keys":this.getKeys(),"descr":this.getDescr(),"dataType":this.getDataType()};}
RefType.prototype.getFormattedValue=function(){return this.getDescr();} 
App.prototype.ER_WS_NOT_SUPPERTED="Браузер не поддерживает работу с вэб сокетами. Функциональность приложения ограничена.";App.prototype.NT_WS_CONNECTED="Соединение с сервером установлено.";App.prototype.ER_WS_NOT_CONNECTED="Ошибка соединения с сервером.";FatalException.prototype.HEADER="Критическая ошибка";ServConnector.prototype.ER_STATUS0="Ошибка установки оединения с сервером";ServConnector.prototype.ER_NO_RESP_MODEL="Неверный ответ сервера";Model.prototype.ER_NO_MODEL="Модель % не найдена.";Model.prototype.ER_NO_FIELD="Поле % модели % не найдено.";Model.prototype.ER_NO_FIELDS="Поля модели % не определены.";Model.prototype.ER_LOCKED="Модель заблокирована.";Model.prototype.ER_REС_NOT_FOUND="Запись не найдена.";Validator.prototype.ER_EMPTY="пустое значение";Validator.prototype.ER_TOO_LONG="значение слишком длинное";Validator.prototype.ER_TOO_SHORT="значение слишком короткое";Validator.prototype.ER_INVALID="неверное значение.";ValidatorBool.prototype.TRUE_VALS=["да","д","истина"];ValidatorInt.prototype.ER_VIOL_NOT_ZERO="значение равно нулю";ValidatorInt.prototype.ER_VIOL_MAX="значение больше %";ValidatorInt.prototype.ER_VIOL_MIN="значение меньше %";ValidatorInt.prototype.ER_VIOL_UNSIGNED="значение меньше нуля";Field.prototype.ER_NO_VALIDATOR="Поле:%, не задан валидатор.";Field.prototype.ER_SET_VAL="Ошибка установки значения, поле:%, %";DateHelper.MON_DATE_LIST=Array("Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря");DateHelper.MON_LIST=Array("Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь");DateHelper.WEEK_LIST=Array("Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота");DateHelper.FORMAT_STR="d/m/Y H:i:s";EventHelper.DEL_ERR="Невозможно удалить событие.";Response.prototype.ERR_NO_MODEL="Модель % не найдена.";PublicMethod.prototype.ER_NO_FIELD="Контроллер %, метод %, поле % не найдено.";PublicMethod.prototype.ER_NO_CONTROLLER="Метод %, не задан контроллер.";Controller.prototype.ER_NO_METHOD="Метод % контроллера % не найден.";Controller.prototype.ER_EMPTY="Контроллер %, метод %, поле %, не задано обязательное значение.";ControllerObjClient.prototype.ER_UNSUPPORTED_CLIENT_MODEL="Не поддерживоемый тип клиентской модели.";ModelFilter.prototype.ER_NO_CTRL="Фильтр %, не указан контрол.";ModelFilter.prototype.ER_INVALID_CTRL="Есть неправильные значения в фильтре.";VersException.prototype.HEADER="Обновление программы";VersException.prototype.NOTE="Сохраните все данные и обновите страницу!";VersException.prototype.CAP_POSTPONE="Отложить на % мин.";VersException.prototype.TITLE_POSTPONE="Дать возможность сохранить данные, задать вопрос через % мин.";VersException.prototype.CAP_RELOAD="Обновить сейчас";VersException.prototype.TITLE_RELOAD="Перезагрузить страницу сейчас"; 
function DataBinding(options){options=options||{};this.m_control=options.control;this.m_field=options.field;this.m_fieldId=options.fieldId;this.m_model=options.model;this.m_keyIds=options.keyIds;this.m_assocIndex=options.assocIndex;}
DataBinding.prototype.m_control;DataBinding.prototype.m_field;DataBinding.prototype.m_fieldId;DataBinding.prototype.m_model;DataBinding.prototype.m_keyIds;DataBinding.prototype.getControl=function(){return this.m_control;}
DataBinding.prototype.setControl=function(v){this.m_control=v;}
DataBinding.prototype.getField=function(){return this.m_field;}
DataBinding.prototype.setField=function(v){this.m_field=v;}
DataBinding.prototype.getFieldId=function(){return this.m_fieldId;}
DataBinding.prototype.setFieldId=function(v){this.m_fieldId=v;}
DataBinding.prototype.getModel=function(){return this.m_model;}
DataBinding.prototype.setModel=function(v){this.m_model=v;}
DataBinding.prototype.getKeyIds=function(){return(this.m_keyIds)?this.m_keyIds:((this.m_control&&this.m_control.getKeyIds)?this.m_control.getKeyIds():null);}
DataBinding.prototype.setKeyIds=function(v){this.m_keyIds=v;}
DataBinding.prototype.getAssocIndex=function(){return this.m_assocIndex;}
DataBinding.prototype.setAssocIndex=function(v){this.m_assocIndex=v;} 
function Command(id,options){if(typeof(id)=="object"){options=id;if(!options.id){options.id=options.publicMethod.getId();}}
else{options=options||{};options.id=id;}
this.setId(options.id);this.setControl(options.control);this.setPublicMethod(options.publicMethod);this.setBindings(options.bindings||[]);this.setAsync(options.async);}
Command.prototype.m_id;Command.prototype.m_control;Command.prototype.m_publicMethod;Command.prototype.m_bindings;Command.prototype.m_async;Command.prototype.getPublicMethod=function(){return this.m_publicMethod;}
Command.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
Command.prototype.getBindings=function(){return this.m_bindings;}
Command.prototype.setBindings=function(v){this.m_bindings=v;}
Command.prototype.addBinding=function(binding){this.m_bindings.push(binding);}
Command.prototype.getAsync=function(){return this.m_async;}
Command.prototype.setAsync=function(v){this.m_async=v;}
Command.prototype.getControl=function(){return this.m_control;}
Command.prototype.setControl=function(v){this.m_control=v;}
Command.prototype.getId=function(){return this.m_id;}
Command.prototype.setId=function(v){this.m_id=v;}
Command.prototype.run=function(opts){this.m_publicMethod.run(opts);} 
function CommandBinding(options){options=options||{};this.m_control=options.control;this.m_field=options.field;this.m_fieldId=options.fieldId;this.m_func=options.func;if(!this.m_fieldId&&!this.m_field&&this.m_control){if(this.m_control.getKeyIds&&this.m_control.getKeyIds().length){this.m_fieldId=this.m_control.getKeyIds()[0];}
else{this.m_fieldId=this.m_control.getName();}}
this.m_assocIndex=options.assocIndex;this.m_sendNull=(options.sendNull!=undefined)?options.sendNull:true;}
CommandBinding.prototype.m_control;CommandBinding.prototype.m_field;CommandBinding.prototype.m_fieldId;CommandBinding.prototype.m_func;CommandBinding.prototype.m_sendNull;CommandBinding.prototype.getControl=function(){return this.m_control;}
CommandBinding.prototype.setControl=function(v){this.m_control=v;}
CommandBinding.prototype.getField=function(){return this.m_field;}
CommandBinding.prototype.setField=function(v){this.m_field=v;}
CommandBinding.prototype.getFieldId=function(){return this.m_fieldId;}
CommandBinding.prototype.setFieldId=function(v){this.m_fieldId=v;}
CommandBinding.prototype.getAssocIndex=function(){return this.m_assocIndex;}
CommandBinding.prototype.setAssocIndex=function(v){this.m_assocIndex=v;}
CommandBinding.prototype.getFunc=function(){return this.m_func;}
CommandBinding.prototype.setFunc=function(v){this.m_func=v;}
CommandBinding.prototype.getSendNull=function(){return this.m_sendNull;}
CommandBinding.prototype.setSendNull=function(v){this.m_sendNull=v;} 
function Control(id,tagName,options){options=options||{};tagName=tagName||this.DEF_TAG_NAME;this.m_template=options.template||window.getApp().getTemplate(options.templateId||CommonHelper.constructorName(this));this.setTemplateOptions(options.templateOptions);options.attrs=options.attrs||{};this.m_node=options.node;if(!this.m_node&&id){this.m_node=CommonHelper.nd(id,this.getWinObjDocument());}
if(this.m_node){for(var i=0;i<this.m_node.attributes.length;i++){if(this.m_node.attributes[i].name.toLowerCase()=="options"){var html_opts=JSON.parse(this.m_node.attributes[i].value.replace(new RegExp("'",'g'),'"'));for(var html_opt_id in html_opts){options[html_opt_id]=html_opts[html_opt_id];}}
else{options.attrs[this.m_node.attributes[i].name]=this.m_node.attributes[i].value;}}
if(this.m_template||options.html){var _html=(options.html!=undefined)?options.html:this.getTemplateHTML(this.m_template,id);var tempDiv=document.createElement("TEMPLATE");tempDiv.className=this.CLASS_INVISIBLE;if(!tempDiv.insertAdjacentHTML){tempDiv.innerHTML=(options.html!=undefined)?options.html:this.getTemplateHTML(this.m_template,id);}else{tempDiv.insertAdjacentHTML("afterbegin",(options.html!=undefined)?options.html:this.getTemplateHTML(this.m_template,id));}
var new_node=DOMHelper.firstChildElement(tempDiv);if(!new_node){throw new Error("Control "+id+" template head node not found!");}
var par=this.m_node.parentNode;var sib=this.m_node.nextSibling;this.m_node.parentNode.removeChild(this.m_node);if(sib){par.insertBefore(new_node,sib);}
else{par.appendChild(new_node);}
this.m_node=new_node;}}
else if(this.m_template==undefined&&options.html==undefined){try{this.m_node=document.createElement(tagName);}
catch(e){this.m_node=document.createElement("DIV");}
this.setId(id);}else{this.m_tempDiv=document.createElement("DIV");this.m_tempDiv.className=this.CLASS_INVISIBLE;this.m_tempDiv.innerHTML=(options.html!=undefined)?options.html:this.getTemplateHTML(this.m_template,id);this.m_node=DOMHelper.lastChildElement(this.m_tempDiv);document.body.appendChild(this.m_tempDiv);}
this.setClassName(options.className);if(options.value!=undefined){this.setValue(options.value);}
if(options.name){options.attrs.name=options.name;}
if(!options.attrs.name&&id){if(typeof(id)!="string"){console.log("Control ID is not a string!")}
var id_ar=id.split(this.NAMESPACE_SEP);if(id_ar.length){options.attrs.name=id_ar[id_ar.length-1];}
else{options.attrs.name=id;}}
options.attrs.maxlength=options.attrs.maxlength||options.maxLength||options.maxlength;options.attrs.placeholder=options.attrs.placeholder||options.placeholder;options.attrs.title=options.attrs.title||options.title;options.attrs.autofocus=options.attrs.autofocus||((options.focus||options.autofocus||options.focused)?"autofocus":undefined);options.attrs.tabIndex=options.attrs.tabIndex||options.tabIndex;if(options.attrs.disabled&&options.attrs.disabled==this.ATTR_DISABLED){options.enabled=false;}
this.setEnabled((options.enabled!=undefined)?options.enabled:true);this.setVisible((options.visible!=undefined)?options.visible:true);if(options.hidden===true){this.hide();}
if(options.required!=undefined){this.setRequired(options.required);}
for(var attr in options.attrs){if(attr!="disabled"){var av;if(attr=="class"){av=DOMHelper.getAttr("class")||"";av=av+((av=="")?"":" ")+options.attrs[attr];if(options.visible===false){av+=" "+this.CLASS_INVISIBLE;}}
else if(attr=="style"){av=DOMHelper.getAttr("style")||"";av=av+options.attrs[attr];}
else{av=options.attrs[attr];}
this.setAttr(attr,av);}}
this.setOnValueChange(options.onValueChange);this.setEvents(options.events);this.setSrvEvents(options.srvEvents);}
Control.prototype.DEF_TAG_NAME="DIV";Control.prototype.ATTR_DISABLED="disabled";Control.prototype.ATTR_REQ="required";Control.prototype.CLASS_INVISIBLE="hidden";Control.prototype.NAMESPACE_SEP=":";Control.prototype.m_node;Control.prototype.m_events;Control.prototype.m_eventFuncs;Control.prototype.m_onValueChange;Control.prototype.m_locked;Control.prototype.m_beforeLockEnabled;Control.prototype.m_html;Control.prototype.m_srvEvents;Control.prototype.m_srvEventsId;Control.prototype.m_enableLock;Control.prototype.correctEvId=function(ev){var id=ev.toLowerCase();if(id.substring(0,2)=="on"){id=id.substring(2);}
return id;}
Control.prototype.eventsToDOM=function(){for(var ev in this.m_events){var id=this.correctEvId(ev);var self=this;if(this.m_eventFuncs[id]){EventHelper.del(this.m_node,id,this.m_eventFuncs[id],false);}
this.m_eventFuncs[id]=(function(self,ev){return function(e){self.m_events[ev].call(self,e);}})(self,ev);EventHelper.add(this.m_node,id,this.m_eventFuncs[id],false);}}
Control.prototype.eventsFromDOM=function(){for(var ev in this.m_events){var id=this.correctEvId(ev);if(this.m_eventFuncs[id]){EventHelper.del(this.m_node,id,this.m_eventFuncs[id],false);}}}
Control.prototype.nodeToDOM=function(parent,beforeNode){if(this.m_tempDiv){DOMHelper.setParent(this.m_node,parent);DOMHelper.delNode(this.m_tempDiv);}
else{var n=CommonHelper.nd(this.getId(),this.getWinObjDocument());if(!n&&!parent){throw new Error("Neither node nor parent found! ID="+this.getId());}
else if(!n){if(beforeNode){parent.insertBefore(this.m_node,beforeNode);}
else{parent.appendChild(this.m_node);}}}
if(this.getAttr("autofocus")){this.focus();}}
Control.prototype.setText=function(val){if(this.m_node.childNodes!=undefined&&this.m_node.childNodes.length){this.m_node.childNodes[0].nodeValue=val;}
else{var tn=document.createTextNode(val);if(this.m_node.nodeName=="IMG"){}
else{this.m_node.appendChild(tn);}}}
Control.prototype.getText=function(){if(this.m_node.childNodes&&this.m_node.childNodes.length){return this.m_node.childNodes[0].nodeValue;}}
Control.prototype.valueChanged=function(){if(this.m_onValueChange){this.m_onValueChange.call(this);}}
Control.prototype.setId=function(id){if(id)this.m_node.id=id;}
Control.prototype.getId=function(){return DOMHelper.getAttr(this.getNode(),"id");}
Control.prototype.setTagName=function(v){if(this.m_node.nodeName!=v){this.m_node.nodeName=v;}}
Control.prototype.setName=function(v){DOMHelper.setAttr(this.getNode(),"name",v);}
Control.prototype.getName=function(){return DOMHelper.getAttr(this.getNode(),"name");}
Control.prototype.setTabIndex=function(v){DOMHelper.setAttr(this.getNode(),"tabindex",v);}
Control.prototype.getTabIndex=function(){return DOMHelper.getAttr(this.getNode(),"tabindex");}
Control.prototype.setEnabled=function(v){if(!this.getEnableLock()){if(v){DOMHelper.delAttr(this.getNode(),this.ATTR_DISABLED);}
else{DOMHelper.setAttr(this.getNode(),this.ATTR_DISABLED,this.ATTR_DISABLED);}
return true;}else{return false;}}
Control.prototype.setEnableLock=function(v){this.m_enableLock=v;}
Control.prototype.getEnableLock=function(){return this.m_enableLock;}
Control.prototype.getEnabled=function(){return!(DOMHelper.getAttr(this.getNode(),this.ATTR_DISABLED));}
Control.prototype.setVisible=function(v){if(v){DOMHelper.delClass(this.m_node,this.CLASS_INVISIBLE);}
else{DOMHelper.addClass(this.m_node,this.CLASS_INVISIBLE);}}
Control.prototype.setRequired=function(v){if(!v){DOMHelper.delAttr(this.m_node,this.ATTR_REQ);}
else{DOMHelper.addAttr(this.m_node,this.ATTR_REQ,this.ATTR_REQ);}}
Control.prototype.getRequired=function(){return(DOMHelper.getAttr(this.m_node,this.ATTR_REQ)!=undefined);}
Control.prototype.getVisible=function(){return!DOMHelper.hasClass(this.m_node,this.CLASS_INVISIBLE);}
Control.prototype.getNode=function(){return this.m_node;}
Control.prototype.appendToNode=function(parent){parent.appendChild(this.m_node);}
Control.prototype.setValue=function(val){if(val instanceof HTMLDocument){console.log(val)
this.m_node.parentNode.appendChild(val.body)}else{this.setText(val);}
this.valueChanged();}
Control.prototype.getValue=function(){return this.getText();}
Control.prototype.toDOMBefore=function(node){this.nodeToDOM(node.parentNode,node);this.eventsToDOM();}
Control.prototype.toDOMAfter=function(node){this.nodeToDOM(node.parentNode,node.nextSibling);this.eventsToDOM();}
Control.prototype.toDOMInstead=function(node){node.parentNode.replaceChild(this.m_node,node);this.eventsToDOM();}
Control.prototype.toDOM=function(parent){this.nodeToDOM(parent);this.eventsToDOM();this.subscribeToSrvEvents(this.m_srvEvents);}
Control.prototype.setAttr=function(name,value){if(value!=undefined){DOMHelper.setAttr(this.m_node,name,value);}}
Control.prototype.getAttr=function(name){return DOMHelper.getAttr(this.m_node,name);}
Control.prototype.delAttr=function(name){DOMHelper.delAttr(this.m_node,name);}
Control.prototype.setClassName=function(className){if(className&&className.length>0){DOMHelper.addClass(this.m_node,className);}}
Control.prototype.getClassName=function(){return this.m_node.className;}
Control.prototype.delDOM=function(){DOMHelper.delNode(this.m_node);this.unsubscribeFromSrvEvents();}
Control.prototype.setWinObj=function(winObj){this.m_winObj=winObj;}
Control.prototype.getWinObj=function(winObj){return this.m_winObj;}
Control.prototype.getWinObjDocument=function(){if(this.m_winObj&&this.m_winObj.getWindowForm){return this.m_winObj.getWindowForm().document;}
else{return window.document;}}
Control.prototype.setEvents=function(e){this.m_events=e;this.m_eventFuncs={};}
Control.prototype.getEvents=function(){return this.m_events;}
Control.prototype.getEvent=function(id){return this.m_events?this.m_events[id]:null;}
Control.prototype.fireEvent=function(id,e){if(this.m_events[id]){this.m_events[id](e);}}
Control.prototype.focus=function(){if(this.m_node.focus&&this.getEnabled()){this.m_node.focus();}}
Control.prototype.serialize=function(o){var o=o||{};o.value=this.getValue();for(var a in this.m_node.attributes){if(typeof this.m_node.attributes[a]!="object"&&typeof this.m_node.attributes[a]!="function"){o[a]=this.m_node.attributes[a];}}
return CommonHelper.serialize(o);}
Control.prototype.unserialize=function(str){var o=CommonHelper.unserialize(str);for(var a in o){if(a=="value")continue;this.m_node.attributes[a]=o[a];}
if(o.value){this.setValue(o.value);}
return o;}
Control.prototype.getHtml=function(){return this.m_node.innerHTML;}
Control.prototype.setHtml=function(v){if(v){this.m_node.innerHTML=v;this.m_html=v;}}
Control.prototype.getTemplateHTML=function(t,nId){var v_opts={};CommonHelper.merge(v_opts,this.m_templateOptions);v_opts.id=((nId)?nId:this.getId());v_opts.bsCol=window.getBsCol();v_opts.widthType=window.getWidthType();Mustache.parse(t);return Mustache.render(t,v_opts);}
Control.prototype.setTemplate=function(v){if(v){this.m_template=v;this.setHtml(this.getTemplateHTML(v));}}
Control.prototype.updateHTML=function(){this.setTemplate(this.m_template);}
Control.prototype.getTemplateOptions=function(){return this.m_templateOptions;}
Control.prototype.setTemplateOptions=function(v){this.m_templateOptions=v;}
Control.prototype.getOnValueChange=function(){return this.m_onValueChange;}
Control.prototype.setOnValueChange=function(v){this.m_onValueChange=v;}
Control.prototype.setLocked=function(v){if(v){this.m_beforeLockEnabled=this.getEnabled();}
if((v&&this.m_beforeLockEnabled)||(!v&&this.m_beforeLockEnabled)){if(!v){DOMHelper.delAttr(this.getNode(),this.ATTR_DISABLED);}
else{DOMHelper.setAttr(this.getNode(),this.ATTR_DISABLED,this.ATTR_DISABLED);}}
this.m_locked=v;}
Control.prototype.getLocked=function(){return this.m_locked;}
Control.prototype.setHidden=function(v){if(v){this.hide();}
else{this.show();}}
Control.prototype.hide=function(){this.m_oldStyleDisplay=this.m_node.style.display;this.m_node.style.display="none";}
Control.prototype.show=function(display){if(display){this.m_node.style.display=display;}
else if(this.m_oldStyleDisplay){this.m_node.style.display=this.m_oldStyleDisplay;}
else{this.m_node.style.display="";}}
Control.prototype.setSrvEvents=function(v){this.m_srvEvents=v;}
Control.prototype.getSrvEvents=function(){return this.m_srvEvents;}
Control.prototype.getSrvEventsId=function(){return this.m_srvEventsId;}
Control.prototype.unsubscribeFromSrvEvents=function(){if(this.m_srvEventsId&&window.getApp().getAppSrv()){console.log("Control.prototype.unsubscribeFromSrvEvents")
window.getApp().getAppSrv().unsubscribe(this.m_srvEventsId);this.m_srvEventsId=undefined;}}
Control.prototype.subscribeToSrvEvents=function(srvEvents){if(srvEvents&&srvEvents.events&&srvEvents.events.length&&srvEvents.onEvent&&window.getApp().getAppSrv()){this.m_srvEventsId=window.getApp().getAppSrv().subscribe(srvEvents);}} 
Control.prototype.ER_NO_PARENT="Контрол %, родитель не определен.";Control.prototype.ER_NO_AP="Контрол %, параметр app не задан."; 
function ControlContainer(id,tagName,options){if(!id){id=CommonHelper.uniqid();}
options=options||{};ControlContainer.superclass.constructor.call(this,id,tagName,options);this.m_elements={};if(options.elements&&CommonHelper.isArray(options.elements)&&options.elements.length){this.addElements(options.elements);}
if(options.addElement){options.addElement.call(this);}}
extend(ControlContainer,Control);ControlContainer.prototype.m_elements;ControlContainer.prototype.elementExists=function(id){return(this.m_elements[id]!=undefined);}
ControlContainer.prototype.checkElement=function(id){if(!this.elementExists(id)){throw new Error(CommonHelper.format(this.ER_NO_ELEMENT,Array(id,this.getId())));}
return true;}
ControlContainer.prototype.isEmpty=function(){return CommonHelper.isEmpty(this.m_elements);}
ControlContainer.prototype.getElement=function(id){return this.m_elements[id];}
ControlContainer.prototype.getElements=function(){return this.m_elements;}
ControlContainer.prototype.getElementByIndex=function(ind){var i=0;for(var k in this.m_elements){if(i==ind){return this.m_elements[k];}
i++;}}
ControlContainer.prototype.setElement=function(id,elem){this.m_elements[id||CommonHelper.uniqid()]=elem;}
ControlContainer.prototype.delElement=function(elName){var res=false;for(var elem_id in this.m_elements){if(this.m_elements[elem_id]){if(this.m_elements[elem_id].getName()==elName){this.m_elements[elem_id].delDOM();delete this.m_elements[elem_id];this.m_elements[elem_id]=undefined;res=true;break;}}}
return res;}
ControlContainer.prototype.addElement=function(ctrl){if(ctrl&&ctrl.getName)this.setElement(ctrl.getName(),ctrl);}
ControlContainer.prototype.addElements=function(a){for(var i=0;i<a.length;i++){this.addElement(a[i]);}}
ControlContainer.prototype.appendToNode=function(parent){for(var elem_id in this.m_elements){this.m_elements[elem_id].appendToNode(this.m_node);}
parent.appendChild(this.m_node);}
ControlContainer.prototype.elementsToDOM=function(){var elem;var focus_elem;for(var elem_id in this.m_elements){elem=this.m_elements[elem_id];if(elem){elem.toDOM(this.m_node);if(!focus_elem&&elem.getAttr("autofocus")){focus_elem=elem;}}}
return focus_elem;}
ControlContainer.prototype.toDOMAfter=function(node){ControlContainer.superclass.toDOMAfter.call(this,node);this.elementsToDOM();}
ControlContainer.prototype.toDOMBefore=function(node){ControlContainer.superclass.toDOMBefore.call(this,node);this.elementsToDOM();}
ControlContainer.prototype.toDOM=function(parent){var focus_elem=this.elementsToDOM();this.nodeToDOM(parent);if(focus_elem)focus_elem.focus();this.eventsToDOM();this.subscribeToSrvEvents(this.m_srvEvents);}
ControlContainer.prototype.clear=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id])this.m_elements[elem_id].delDOM();}
this.m_elements={};}
ControlContainer.prototype.getCount=function(){var len=0;for(var k in this.m_elements)if(this.m_elements[k])len++;return len;}
ControlContainer.prototype.delDOM=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id])this.m_elements[elem_id].delDOM();}
ControlContainer.superclass.delDOM.call(this);}
ControlContainer.prototype.setEnabled=function(v){for(var elem_id in this.m_elements){if(this.m_elements[elem_id])
this.m_elements[elem_id].setEnabled(v);}
ControlContainer.superclass.setEnabled.call(this,v);}
ControlContainer.prototype.setTempDisabled=function(){this.m_tempDisabledList=[];for(var elem_id in this.m_elements){if(this.m_elements[elem_id]&&this.m_elements[elem_id].getEnabled()){this.m_tempDisabledList.push(elem_id);this.m_elements[elem_id].setEnabled(false);}}}
ControlContainer.prototype.setTempEnabled=function(){for(i=0;i<this.m_tempDisabledList.length;i++){this.m_elements[this.m_tempDisabledList[i]].setEnabled(true);}}
ControlContainer.prototype.setLocked=function(v){for(var elem_id in this.m_elements){if(this.m_elements[elem_id])this.m_elements[elem_id].setLocked(v);}
ControlContainer.superclass.setLocked.call(this,v);}
ControlContainer.prototype.serialize=function(){var o={};o.elements={};for(var elem_id in this.m_elements){if(this.m_elements[elem_id]){o.elements[elem_id]=this.m_elements[elem_id].serialize();}}
return ControlContainer.superclass.serialize.call(this,o);}
ControlContainer.prototype.unserialize=function(str){var o=ControlContainer.superclass.unserialize.call(this,str);for(var id in o.elements){if(this.m_elements[id]){this.m_elements[id].unserialize(o.elements[id]);}}} 
ControlContainer.prototype.ER_NO_ELEMENT="Элемент % контейнера % не найден."; 
function View(id,options){options=options||{};var title=this.HEAD_TITLE||options.HEAD_TITLE;if(title){options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE=title;}
this.setDataBindings(options.dataBindings||[]);this.m_editResult={"newKeys":null,"updated":false};View.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(View,ControlContainer);View.prototype.DEF_TAG_NAME="DIV";View.prototype.m_controlStates;View.prototype.m_dataBindings;View.prototype.m_editResult;View.prototype.onGetData=function(resp){}
View.prototype.setFocus=function(){var set=false,cnt=0;for(var id in this.m_elements){cnt++;if(this.m_elements[id].getAttr("autofocus")){this.m_elements[id].focus();set=true;break;}}
if(!set&&cnt){this.getElementByIndex(0).focus();}}
View.prototype.setReadTempDisabled=function(){this.m_controlStates=[];if(this.m_dataBindings){for(var i=0;i<this.m_dataBindings.length;i++){var ctrl=this.m_dataBindings[i].getControl();if(ctrl){this.m_controlStates.push({"ctrl":ctrl,"enabled":ctrl.getEnabled(),"inputEnabled":ctrl.getInputEnabled?ctrl.getInputEnabled():true});ctrl.setEnabled(false);}}}}
View.prototype.setReadTempEnabled=function(){if(this.m_controlStates){for(var i=0;i<this.m_controlStates.length;i++){if(this.m_controlStates[i].enabled){this.m_controlStates[i].ctrl.setEnabled(true);}
if(this.m_controlStates[i].ctrl.setInputEnabled)this.m_controlStates[i].ctrl.setInputEnabled(this.m_controlStates[i].inputEnabled);}}}
View.prototype.setError=function(s,delay){window.showError(s,null,delay);}
View.prototype.resetError=function(){window.resetError();}
View.prototype.toDOM=function(parent){View.superclass.toDOM.call(this,parent);this.setFocus();}
View.prototype.getDataBindings=function(){return this.m_dataBindings;}
View.prototype.setDataBindings=function(v){this.m_dataBindings=v;}
View.prototype.addDataBinding=function(binding){this.m_dataBindings.push(binding);}
View.prototype.clearDataBinding=function(){this.setDataBindings([]);}
View.prototype.validate=function(){var res=true;var el_list=this.getElements();for(var id in el_list){if(!el_list[id].getValue){continue;}
if(el_list[id].setValid){el_list[id].setValid();}
if(el_list[id].validate&&!el_list[id].validate()){res=false;continue;}
var v=el_list[id].getValue()
if((el_list[id].getIsRef&&el_list[id].getIsRef()&&!v||v.isNull())||((!el_list[id].getIsRef||!el_list[id].getIsRef())&&v===null)){el_list[id].setNotValid(Validator?Validator.prototype.ER_EMPTY:"emty value");res=false;}}
return res;} 
function ViewAjx(id,options){options=options||{};this.setCommands(options.commands||{});this.setOnBeforeExecCommand(options.onBeforeExecCommand);ViewAjx.superclass.constructor.call(this,id,options);}
extend(ViewAjx,View);ViewAjx.prototype.m_commands;ViewAjx.prototype.m_cmdCtrlState;ViewAjx.prototype.m_onBeforeExecCommand;ViewAjx.prototype.defineField=function(i){var f=this.m_dataBindings[i].getField();var m=this.m_dataBindings[i].getModel();if(!f&&this.m_dataBindings[i].getFieldId()&&m.fieldExists(this.m_dataBindings[i].getFieldId())){this.m_dataBindings[i].setField(m.getField(this.m_dataBindings[i].getFieldId()));}
else if(!f&&this.m_dataBindings[i].getControl()&&m.fieldExists(this.m_dataBindings[i].getControl().getName())){this.m_dataBindings[i].setField(m.getField(this.m_dataBindings[i].getControl().getName()));}}
ViewAjx.prototype.onGetData=function(resp,cmd){cmd=(cmd===true)?"copy":cmd;var cmdCopy=(cmd=="copy");var cmdInsert=(cmd=="insert");var models={};for(var i=0;i<this.m_dataBindings.length;i++){var m=this.m_dataBindings[i].getModel();if(!m){throw new Error(CommonHelper.format(this.ER_NO_BINDING_MODEL,[i]));}
var m_id=m.getId();if(models[m_id]==undefined&&resp&&resp.modelExists(m_id)){m.setData(resp.getModelData(m_id));models[m_id]=m.getRowCount();m.getNextRow();}
else if(models[m_id]==undefined&&!resp){models[m_id]=m.getRowCount();if(models[m_id]){m.getNextRow();}}
if(models[m_id]>0){var ctrl=this.m_dataBindings[i].getControl();if(ctrl){var init_val=null;var ctrl_format_f=(ctrl.getFormatFunction)?ctrl.getFormatFunction():null;if(ctrl_format_f){init_val=ctrl_format_f.call(ctrl,this.m_dataBindings[i].getModel().getFields());}
else if(this.m_dataBindings[i].getValue){init_val=this.m_dataBindings[i].getValue.call(this.m_dataBindings[i]);}
else{this.defineField(i);if(this.m_dataBindings[i].getField()&&!(cmdCopy&&this.m_dataBindings[i].getField().getPrimaryKey())){init_val=this.m_dataBindings[i].getField().getValue();if(init_val!=undefined&&this.m_dataBindings[i].getAssocIndex()!==undefined){init_val=init_val[this.m_dataBindings[i].getAssocIndex()];}}}
if(init_val!=undefined&&(!ctrl.getIsRef||!ctrl.getIsRef())){if(ctrl.setInitValue&&!cmdCopy&&!cmdInsert){ctrl.setInitValue(init_val);}
else{ctrl.setValue(init_val);}}
else if(ctrl.getIsRef&&ctrl.getIsRef()&&this.m_dataBindings[i].getKeyIds()){var init_val_o;if(typeof init_val=="string"&&init_val.substring(0,1)=="{"&&init_val.substring(init_val.length-1)=="}"){init_val=CommonHelper.unserialize(init_val);}
if(init_val!=undefined&&typeof init_val=="object"){init_val_o=init_val;if(ctrl.getModelKeyFields){var model_keys=ctrl.getModelKeyFields();var o_keys={};var init_val_k_ind=0;for(var init_val_k_id in init_val.m_keys){if(model_keys.length<init_val_k_ind){break;}
o_keys[model_keys[init_val_k_ind].getId()]=init_val.m_keys[init_val_k_id];init_val_k_ind++;}
init_val_o.m_keys=o_keys;}}else{var key_ids=this.m_dataBindings[i].getKeyIds();if(!key_ids){throw Error(CommonHelper.format(this.ER_CTRL_KEYS_NOT_BOUND,[ctrl.getName()]));}
var m_keys;if(ctrl.getModelKeyFields){m_keys=ctrl.getModelKeyFields();}
var keys={};for(var n=0;n<key_ids.length;n++){var k_id;if(m_keys){k_id=m_keys[n].getId();}
else{k_id=key_ids[n];}
if(!m.fieldExists(key_ids[n])){throw new Error("ViewAjx: modelID: "+m.getId()+", fieldID: "+key_ids[n]+" does not exist. Read bind index: "+i);}
keys[k_id]=m.getFieldValue(key_ids[n]);}
init_val_o=new RefType({"keys":keys,"descr":init_val,"dataType":undefined});}
if(ctrl.setInitValue&&!cmdCopy&&!cmdInsert){if(ctrl.setValue){ctrl.setValue(null);}
ctrl.setInitValue(init_val_o);}
else{ctrl.setValue(init_val_o);}}}}}
this.setReadTempEnabled();}
ViewAjx.prototype.setTempDisabled=function(cmd){if(this.m_commands[cmd]){var cmd_ctrl=this.m_commands[cmd].getControl();if(cmd_ctrl){this.m_cmdCtrlState=cmd_ctrl.getEnabled();cmd_ctrl.setEnabled(false);}}
this.m_controlStates=this.m_controlStates||{};this.m_controlStates[cmd]=[];if(this.m_commands[cmd].getBindings()){var b=this.m_commands[cmd].getBindings();for(var i=0;i<b.length;i++){var ctrl=b[i].getControl();if(!ctrl||ctrl.getEnableLock()){continue;}
this.m_controlStates[cmd].push({"ctrl":ctrl,"enabled":ctrl.getEnabled(),"inputEnabled":(ctrl.getInputEnabled)?ctrl.getInputEnabled():true});ctrl.setEnabled(false);ctrl.setEnableLock(true)}}}
ViewAjx.prototype.setTempEnabled=function(cmd){if(this.m_commands[cmd]){var cmd_ctrl=this.m_commands[cmd].getControl();if(cmd_ctrl&&this.m_cmdCtrlState){cmd_ctrl.setEnabled(true);}}
if(this.m_controlStates&&this.m_controlStates[cmd]){for(var i=0;i<this.m_controlStates[cmd].length;i++){if(this.m_controlStates[cmd][i].enabled){this.m_controlStates[cmd][i].ctrl.setEnableLock(false);this.m_controlStates[cmd][i].ctrl.setEnabled(true);}
if(this.m_controlStates[cmd][i].ctrl.setInputEnabled){this.m_controlStates[cmd][i].ctrl.setInputEnabled(this.m_controlStates[cmd][i].inputEnabled);}}
this.m_controlStates[cmd]=undefined;delete this.m_controlStates[cmd];}}
ViewAjx.prototype.getModified=function(cmd){if(this.m_commands[cmd].getBindings()){var b=this.m_commands[cmd].getBindings();var pm=this.m_commands[cmd].getPublicMethod();for(var i=0;i<b.length;i++){if(b[i].m_control&&b[i].m_control.getModified&&b[i].getControl().getModified()){return true;}else if(b[i].getFunc&&pm){var f=b[i].getFunc();if(f&&f.call(this,pm,b[i].getControl?b[i].getControl():null)){return true;}}}}}
ViewAjx.prototype.validate=function(cmd,validate_res){validate_res=validate_res||{};validate_res.incorrect_vals=false;var pm=this.m_commands[cmd].getPublicMethod();if(!pm){throw Error(this.ER_NO_PM);}
var bindings=this.m_commands[cmd].getBindings();if(bindings&&bindings.length){this.resetError();for(var i=0;i<bindings.length;i++){var bind=bindings[i];var ctrl=bind.getControl();if(bind.getFunc&&bind.getFunc()){bind.getFunc().call(this,pm,ctrl);}else if(!ctrl){throw Error(CommonHelper.format(this.ER_NO_CTRL,[cmd,i]));}else{var f=bind.getField();if(!f&&bind.getFieldId()){f=pm.getField(bind.getFieldId());}
else if(!f&&pm.fieldExists(ctrl.getName())){f=pm.getField(ctrl.getName());}
else if(!f){throw Error(CommonHelper.format(this.ER_CTRL_NOT_BOUND,[ctrl.getName()]));}
if(ctrl.getModified&&ctrl.getModified()){try{if(ctrl.getIsRef&&ctrl.getIsRef()&&!(f.getDataType()==Field.prototype.DT_JSON||f.getDataType()==Field.prototype.DT_JSONB)){var keyIds=ctrl.getKeyIds();if(keyIds.length>=1){var ctrl_keys=ctrl.getKeys();var key_val=(ctrl_keys&&ctrl_keys!="{}")?ctrl_keys[keyIds[0]]:null;key_val=(key_val=="null")?null:key_val;if(ctrl.getRequired&&ctrl.getRequired()&&key_val===null){throw new Error(f.getValidator().ER_EMPTY);}
var f_dt=f.getDataType();if((f_dt==Field.prototype.DT_STRING||f_dt==Field.prototype.DT_TEXT)&&typeof(key_val)=="number"){f.setValue(CommonHelper.serialize(ctrl.getValue()));}else{f.setValue(key_val);}}}
else{if(ctrl.setValid)ctrl.setValid();var val=ctrl.getValue();if(ctrl.validate){if(!ctrl.validate()){validate_res.incorrect_vals=true;continue;}}
else if(ctrl.getValidator&&ctrl.getValidator()){ctrl.getValidator().validate(val);}
if(ctrl.getRequired&&ctrl.getRequired()&&val===null){throw new Error(f.getValidator().ER_EMPTY);}
if(bind.getAssocIndex()){f.setValue(bind.getAssocIndex(),val);}
else{f.setValue(val);}}}
catch(e){if(ctrl.setNotValid)ctrl.setNotValid(e.message);validate_res.incorrect_vals=true;}}
else if(ctrl.isNull&&ctrl.isNull()&&(ctrl.getRequired()||f.getValidator().getRequired())&&ctrl.setNotValid){ctrl.setNotValid(f.getValidator().ER_EMPTY);validate_res.incorrect_vals=true;}
else if(f.isSet()){f.m_value=undefined;}
if(validate_res.old_keys&&!validate_res.incorrect_vals&&f.getPrimaryKey()&&pm.fieldExists(f.getOldId())){var init_val=ctrl.getInitValue();if(typeof init_val=="object"){if(init_val instanceof RefType){init_val=init_val.getKey();}
else{for(var init_val_id in init_val){init_val=init_val[init_val_id];break;}}}
validate_res.old_keys[f.getOldId()]=init_val;}}}}
return!validate_res.incorrect_vals;}
ViewAjx.prototype.execCommand=function(cmd,sucFunc,failFunc,allFunc){if(!this.m_commands[cmd]){throw Error(this.ER_CMD_NOT_FOUND);}
var pm=this.m_commands[cmd].getPublicMethod();if(!pm){throw Error(this.ER_NO_PM);}
var validate_res={"incorrect_vals":false,"modified":this.getModified(cmd),"old_keys":{}};if(!validate_res.modified){var pm_fields=pm.getFields();if(pm_fields["f"]&&pm_fields["f"].m_value&&pm_fields["f"].m_value=="insert"){for(var fid in pm_fields){if(fid=="c"||fid=="f"||fid=="v"||fid.substring(0,4)=="old_")continue;if(pm_fields[fid].isSet()){validate_res.modified=true;break;}}}}
if(validate_res.modified){this.validate(cmd,validate_res);}
if(validate_res.incorrect_vals){if(failFunc){failFunc.call(this,null,null,this.ER_ERRORS);}
if(allFunc){allFunc.call(this);}}
else if(validate_res.modified){if(!this.m_commands[cmd].getAsync()){this.setTempDisabled(cmd);}
for(oldid in validate_res.old_keys){pm.setFieldValue(oldid,validate_res.old_keys[oldid]);}
var self=this;try{this.beforeExecCommand(cmd,pm);var pm_opts={"async":this.m_commands[cmd].getAsync(),"fail":function(resp,errCode,errStr){self.onRequestFail(failFunc,cmd,resp,errCode,errStr);}};if(!this.m_commands[cmd].getAsync()&&allFunc){pm_opts.all=function(){self.setTempEnabled(cmd);allFunc.call(this);}}
else if(!this.m_commands[cmd].getAsync()&&!allFunc){pm_opts.all=function(){self.setTempEnabled(cmd);}}
else if(this.m_commands[cmd].getAsync()&&allFunc){pm_opts.all=function(){allFunc.call(this);}}
if(sucFunc){pm_opts.ok=function(resp){sucFunc.call(this,resp);}}
pm.run(pm_opts);}
catch(e){this.onRequestFail(failFunc,cmd,null,null,e.message);if(allFunc){allFunc.call(this);}}}
else{if(sucFunc){sucFunc.call(this,null);}
if(allFunc){allFunc.call(this);}}}
ViewAjx.prototype.onRequestFail=function(failFunc,cmd,resp,errCode,errStr){if(failFunc){failFunc.call(this,resp,errCode,errStr);}
else{this.setError(window.getApp().formatError(errCode,errStr));}}
ViewAjx.prototype.getCommands=function(){return this.m_commands;}
ViewAjx.prototype.setCommands=function(v){this.m_commands=v;}
ViewAjx.prototype.addCommand=function(cmd){this.m_commands[cmd.getId()]=cmd;}
ViewAjx.prototype.getCommand=function(id){return this.m_commands[id];}
ViewAjx.prototype.toDOM=function(parent,cmd){cmd=(cmd===true)?"copy":cmd;ViewAjx.superclass.toDOM.call(this,parent);this.onGetData(null,cmd);}
ViewAjx.prototype.beforeExecCommand=function(cmd,pm){if(this.getOnBeforeExecCommand()){this.getOnBeforeExecCommand().call(this,cmd,pm);}}
ViewAjx.prototype.setOnBeforeExecCommand=function(v){this.m_onBeforeExecCommand=v;}
ViewAjx.prototype.getOnBeforeExecCommand=function(v){return this.m_onBeforeExecCommand;} 
ViewAjx.prototype.ER_KEY_NOT_FOUND="Ключ % не найден у контрола %";ViewAjx.prototype.ER_ERRORS="Обнаружены ошибки.";ViewAjx.prototype.ER_NO_PM="Серверный метод не задан.";ViewAjx.prototype.ER_CTRL_NOT_BOUND="Элемент управления % не привязан к полю модели контроллера.";ViewAjx.prototype.ER_NO_CTRL="Команда % с индексом % не имеет связи с элементом формы.";ViewAjx.prototype.ER_CTRL_KEYS_NOT_BOUND="Не заданы ключи ссылочного элемента формы %.";ViewAjx.prototype.ER_NO_BINDING_MODEL="Для связывания с индексом % модель не определена."; 
function ViewAjxList(id,options){options=options||{};var self=this;if(window.onSelect||options.modalSelect){options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:true;if(options.controlSelect||options.cmdSelect){this.setControlSelect(options.controlSelect||new ButtonMakeSelection(id+":cmdSelect",{"onClick":function(){var list=self.getElements();var res=false;for(var id in list){if(list[id].onSelect){list[id].onSelect();res=true;break;}}
window.closeResult=res;window.close();}}));}
options.cmdCancel=(options.cmdCancel!=undefined)?options.cmdCancel:true;if(options.controlCancel||options.cmdCancel){this.setControlCancel(options.controlCancel||new ButtonCancel(id+":cmdCancel",{"onClick":function(){window.closeResult=false;window.close();}}));}
if(options.commandContainer||options.commandElements||options.cmdSelect||options.cmdCancel){this.m_commandContainer=options.commandContainer||new ControlContainer(id+":cmd-cont","DIV",{"elements":options.commandElements});}}
ViewAjxList.superclass.constructor.call(this,id,options);this.addControls();}
extend(ViewAjxList,ViewAjx);ViewAjxList.prototype.m_controlCancel;ViewAjxList.prototype.m_controlSelect;ViewAjxList.prototype.m_onClose;ViewAjxList.prototype.m_commandContainer;ViewAjxList.prototype.addControls=function(){if(this.m_commandContainer){if(this.m_controlSelect)this.m_commandContainer.addElement(this.m_controlSelect);if(this.m_controlCancel)this.m_commandContainer.addElement(this.m_controlCancel);}}
ViewAjxList.prototype.toDOM=function(parent){ViewAjxList.superclass.toDOM.call(this,parent);if(this.m_commandContainer)this.m_commandContainer.toDOM(parent);}
ViewAjxList.prototype.delDOM=function(){if(this.m_commandContainer)this.m_commandContainer.delDOM();ViewAjxList.superclass.delDOM.call(this);}
ViewAjxList.prototype.setControlSelect=function(v){this.m_controlSelect=v;}
ViewAjxList.prototype.getControlSelect=function(){return this.m_controlSelect;}
ViewAjxList.prototype.setControlCancel=function(v){this.m_controlCancel=v;}
ViewAjxList.prototype.getControlCancel=function(){return this.m_controlCancel;} 
function Calculator(options){options=options||{};if(!options.editControl){throw Error(this.ER_NO_EDIT_CONTROL);}
this.m_winObj=options.winObj;this.m_editControl=options.editControl;this.resetVars();}
Calculator.prototype.CALC_CLASS="calc";Calculator.prototype.m_editControl;Calculator.prototype.getVal=function(){return CommonHelper.nd("ekran",this.getWinObjDocument()).value;}
Calculator.prototype.setVal=function(val){CommonHelper.nd("ekran",this.getWinObjDocument()).value=val;}
Calculator.prototype.close=function(cancel){if(!cancel){this.m_editControl.setValue(this.getVal());this.m_editControl.focus();}
if(this.calcNode){this.calcNode.parentNode.removeChild(this.calcNode);}}
Calculator.prototype.wynik=0;Calculator.prototype.op;Calculator.prototype.nowe=0;Calculator.prototype.nowe2=0;Calculator.prototype.done=1;Calculator.prototype.oset=0;Calculator.prototype.kropka;Calculator.prototype.temp;Calculator.prototype.resetVars=function(){this.wynik=0,this.op=0,this.nowe=0,this.nowe2=0,this.done=1,this.oset=0;}
Calculator.prototype.reset=function(value){this.setVal(value);this.resetVars();}
Calculator.prototype.wspolna=function(new_temp){this.kropka=1;if(this.nowe||this.done){this.nowe=0;this.done=0;this.temp=new_temp;}
for(var i=0;i<this.temp.length;i++)if(this.temp[i]=='.')this.kropka=0;}
Calculator.prototype.calcButton=function(ktory,ktory2){this.temp=this.getVal();if(ktory2=='.'){this.wspolna('0');if(this.kropka){this.temp+=ktory2;this.setVal(this.temp);this.oset=0;}}
if(ktory>=0&&ktory<=9){this.wspolna('');if(this.temp==0&&this.kropka==1)this.temp='';this.temp+=ktory;this.setVal(this.temp);this.oset=1;}
if(ktory2=='-'||ktory2=='+'||ktory2=='/'||ktory2=='*'){if(this.nowe)this.op=ktory2
else{if(!this.nowe2){this.op=ktory2;this.wynik=this.temp;this.nowe2=1;}
else{this.wynik=eval(this.wynik+this.op+this.temp);this.op=ktory2;this.setVal(wynik);}
this.oset=0;this.nowe=1;}}
if(ktory2=='1/x'){this.wynik=eval(1/this.temp);this.reset(this.wynik);}
if(ktory2=='sqrt'){this.wynik=Math.sqrt(this.temp);this.reset(this.wynik);}
if(ktory2=='exp'){this.wynik=Math.exp(this.temp);this.reset(this.wynik);}
if(ktory2=='+/-')this.setVal(eval(-this.temp));if(ktory2=='='&&this.oset&&this.op!='0')this.reset(eval(this.wynik+this.op+this.temp));if(ktory2=='C')this.reset(0);if(this.getVal()[0]=='.')
this.setVal('0')+this.getVal();}
Calculator.prototype.getHTML=function(){var input_id=this.m_editControl.getId();var calc_html='<table cellPadding="0" cellSpacing="5">'+'<tbody>'+'<tr align="left">'+'<td colSpan="5" align="right"><div id="'+input_id+':calc_cancel"><img src="img/modal/close.gif"></div></td></tr>'+'<td colSpan="5"><input style="width:100%;" id="ekran" value="0" size="20"/></td></tr>'+'<tr align="middle">'+'<td colSpan="3">'+this.TITLE+'</td>'+'<td><input id="'+input_id+':calc_btn_C" type="button" value="C"/></td>'+'<td><input id="'+input_id+':calc_btn_OK" type="button" value="OK"/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_7" class="calc_ctrl" type="button" value="  7  "/></td>'+'<td><input id="calc_btn_8" class="calc_ctrl" type="button" value="  8  "/></td>'+'<td><input id="calc_btn_9" class="calc_ctrl" type="button" value="  9  "/></td>'+'<td><input id="calc_btn_/" class="calc_ctrl" type="button" value="  /  "/></td>'+'<td><input id="calc_btn_sqrt" class="calc_ctrl" type="button" value="sqrt"/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_4" class="calc_ctrl" type="button" value="  4  "/></td>'+'<td><input id="calc_btn_5" class="calc_ctrl" type="button" value="  5  "/></td>'+'<td><input id="calc_btn_6" class="calc_ctrl" type="button" value="  6  "/></td>'+'<td><input id="calc_btn_*" class="calc_ctrl" type="button" value=" *  "/></td>'+'<td><input id="calc_btn_exp" class="calc_ctrl" type="button" value="exp"/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_1" class="calc_ctrl" type="button" value="  1  "/></td>'+'<td><input id="calc_btn_2" class="calc_ctrl" type="button" value="  2  "/></td>'+'<td><input id="calc_btn_3" class="calc_ctrl" type="button" value="  3  "/></td>'+'<td><input id="calc_btn_-" class="calc_ctrl" type="button" value="  -  "/></td>'+'<td><input id="calc_btn_1/x" class="calc_ctrl" type="button" value="1/x "/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_0" class="calc_ctrl" type="button" value="  0  "/></td>'+'<td><input id="calc_btn_+/-" class="calc_ctrl" class="calc_ctrl" type="button" value=" +/- "/></td>'+'<td><input id="calc_btn_." class="calc_ctrl" type="button" value="  ,  "/></td>'+'<td><input id="calc_btn_+" class="calc_ctrl" type="button" value="  +  "/></td>'+'<td><input id="calc_btn_=" class="calc_ctrl" type="button" value="  =  "/></td>'+'</tr>'+'</tbody>'+'</table>';return calc_html;}
Calculator.prototype.assignControls=function(){var input_id=this.m_editControl.getId();var self=this;CommonHelper.nd(input_id+":calc_cancel",this.getWinObjDocument()).onclick=function(){self.close(true);};CommonHelper.nd(input_id+":calc_btn_OK",this.getWinObjDocument()).onclick=function(){self.close(false);};CommonHelper.nd(input_id+":calc_btn_C",this.getWinObjDocument()).onclick=function(){self.calcButton(11,"C");};var list=DOMHelper.getElementsByAttr('calc_ctrl',this.calcNode,'class');var id;for(var i=0;i<list.length;i++){list[i].onclick=function(event){event=EventHelper.fixMouseEvent(event);id=event.target.id.replace(/calc_btn_/,'');self.calcButton(id,id);};}}
Calculator.prototype.show=function(){var input_id=this.m_editControl.getId();var node=this.m_editControl.getNode();if(node!=undefined&&CommonHelper.nd(input_id+":calc",this.getWinObjDocument())==undefined){this.calcNode=document.createElement('div');this.calcNode.id=input_id+":calc";this.calcNode.className=this.CALC_CLASS;this.calcNode.style.border="1px solid gray";this.calcNode.style.background='#FFFFFF';this.calcNode.style.color='#000000';this.calcNode.style.position='absolute';this.calcNode.style.display='block';this.calcNode.style.padding='2px';this.calcNode.style.cursor='default';this.calcNode.innerHTML=this.getHTML();this.calcNode.style.top=(CommonHelper.findPosY(node)+node.offsetHeight+2)+"px";this.calcNode.style.left=(CommonHelper.findPosX(node)+node.offsetWidth+2)+"px";this.getWinObjDocument().body.appendChild(this.calcNode);this.assignControls();this.setVal(node.value);}}
Calculator.prototype.refresh=function(){if(this.calcNode!=undefined){this.calcNode.innerHTML=this.getHTML();this.assignControls();}}
Calculator.prototype.getWinObjDocument=function(){if(this.m_winObj){return this.m_winObj.getWindowForm().document;}
else{return window.document;}} 
Calculator.prototype.TITLE="Калькулятор";Calculator.prototype.ER_NO_EDIT_CONTROL="Не задан контрол."; 
function Button(id,options){options=options||{};this.m_colorClass=options.colorClass||this.DEF_COLOR_CLASS;options.className=options.className||this.DEF_CLASS;options.attrs=options.attrs||{};options.title=options.title||options.attrs.title||options.hint||this.DEF_TITLE;this.m_imageTag=options.imageTag||this.IMAGE_TAG;this.m_imagePosition=options.imagePosition||this.IMAGE_POS;Button.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);this.setCaption(options.caption);this.setImageFontName(options.imageFontName||this.DEF_IMG_FONT_NAME);this.setImageClass(options.imageClass||options.glyph||options.attrs.glyph);this.setGlyphPopUp(options.glyphPopUp);var self=this;this.m_clickFunc=function(e){if(self.getEnabled()&&self.m_onClick){e=EventHelper.fixMouseEvent(e);self.m_onClick.call(self,e);}}
if(options.onClick!=undefined){this.setOnClick(options.onClick);}}
extend(Button,Control);Button.prototype.DEF_TAG_NAME="DIV";Button.prototype.DEF_CLASS="btn btn-default";Button.prototype.DEF_COLOR_CLASS="btn-default";Button.prototype.DEF_TITLE;Button.prototype.DEF_IMG_FONT_NAME="glyphicon";Button.prototype.IMAGE_TAG="I";Button.prototype.IMAGE_POS="before";Button.prototype.m_imageClass;Button.prototype.m_glyphPopUp;Button.prototype.m_colorClass;Button.prototype.m_imageFontName;Button.prototype.setCaption=function(caption){if(caption){if(this.m_node.childNodes.length==0){this.m_node.appendChild(document.createTextNode(caption));}
else{DOMHelper.setText(this.m_node,caption);}}}
Button.prototype.getCaption=function(){return DOMHelper.getText(this.m_node);}
Button.prototype.getGlyph=function(){return this.m_imageClass;}
Button.prototype.setGlyph=function(v){this.setImageClass(v);}
Button.prototype.getImageFontName=function(){return this.m_imageFontName;}
Button.prototype.setImageFontName=function(v){this.m_imageFontName=v;}
Button.prototype.getImageClass=function(){return this.m_imageClass;}
Button.prototype.setImageClass=function(v){this.m_imageClass=v;if(v){var fn=this.getImageFontName();var n;if(this.m_node){var ar=DOMHelper.getElementsByAttr(fn,this.m_node,"class",true,this.m_imageTag);if(ar&&ar.length){n=ar[0];n.className=fn+" "+v;}}
if(!n){n=document.createElement(this.m_imageTag);n.className=(v.indexOf(fn+"-")>=0)?(fn+" "+v):v;if(this.m_imagePosition=="after"){this.m_node.appendChild(n);}
else{var tn=DOMHelper.firstChildElement(this.m_node,3);if(tn){tn.parentNode.insertBefore(n,tn);}
else{this.m_node.appendChild(n);}}}}}
Button.prototype.getGlyphPopUp=function(){return this.m_glyphPopUp;}
Button.prototype.setGlyphPopUp=function(v){this.m_glyphPopUp=v;}
Button.prototype.setOnClick=function(onClick){var self=this;this.m_onClick=function(e){onClick.call(self,e);}
this.addClick();}
Button.prototype.getOnClick=function(){return this.m_onClick;}
Button.prototype.addClick=function(){var self=this;EventHelper.add(this.m_node,"click",this.m_clickFunc,false);}
Button.prototype.removeClick=function(){var self=this;EventHelper.del(this.m_node,"click",this.m_clickFunc,false);}
Button.prototype.click=function(){this.m_clickFunc.call(this,null);}
Button.prototype.getColorClass=function(){return this.m_colorClass;} 
function ButtonCtrl(id,options){options=options||{};options.className=options.className||this.DEF_CLASS;this.setEditControl(options.editControl);ButtonCtrl.superclass.constructor.call(this,id,options);}
extend(ButtonCtrl,Button);ButtonCtrl.prototype.m_editControl;ButtonCtrl.prototype.setEditControl=function(v){this.m_editControl=v;}
ButtonCtrl.prototype.getEditControl=function(){return this.m_editControl;} 
function ButtonEditCtrl(id,options){options=options||{};options.glyph=options.glyph||"glyphicon-menu-hamburger";options.editControl=options.editControl||options.control;var self=this;options.onClick=options.onClick||function(e){self.onClickEvent(EventHelper.fixKeyEvent(e));};this.setWinClass(options.winClass||WindowForm);this.setWinParams(options.winParams);this.setWinEditViewOptions(options.winEditViewOptions);ButtonEditCtrl.superclass.constructor.call(this,id,options);}
extend(ButtonEditCtrl,ButtonCtrl);ButtonEditCtrl.prototype.m_winObj;ButtonEditCtrl.prototype.m_winClass;ButtonEditCtrl.prototype.m_winParams;ButtonEditCtrl.prototype.closeWinObj=function(){this.m_winObj.close();delete this.m_winObj;}
ButtonEditCtrl.prototype.setWinClass=function(v){this.m_winClass=v;}
ButtonEditCtrl.prototype.getWinClass=function(v){return this.m_winClass;}
ButtonEditCtrl.prototype.setWinParams=function(v){this.m_winParams=v;}
ButtonEditCtrl.prototype.getWinParams=function(){var p;if(typeof(this.m_winParams)=="function"){p=this.m_winParams();}else{p=this.m_winParams;}
return p;}
ButtonEditCtrl.prototype.setWinEditViewOptions=function(v){this.m_winEditViewOptions=v;}
ButtonEditCtrl.prototype.getWinEditViewOptions=function(){return this.m_winEditViewOptions;}
ButtonEditCtrl.prototype.onClickEvent=function(e){var win_opts={};win_opts.app=window.getApp();var self=this;win_opts.onClose=function(){self.closeWinObj();};win_opts.URLParams=this.getWinParams();temp_o=new this.m_winClass(win_opts);var ctrl=this.getEditControl();if(ctrl){if(ctrl.getIsRef()){win_opts.keys={};var ctrl_keys=ctrl.getKeys()||{};var ctrl_key_ids=ctrl.getKeyIds();var form_keys={};var form_key_ids=temp_o.getKeyIds();var o_set=false;for(var n=0;n<ctrl_key_ids.length;n++){if(ctrl_keys[ctrl_key_ids[n]]){form_keys[form_key_ids[n]]=ctrl_keys[ctrl_key_ids[n]];o_set=true;}}
if(!o_set){return;}
temp_o.setKeys(form_keys);}}
this.m_winObj=temp_o;this.m_winObj.open();} 
ButtonEditCtrl.prototype.DEF_TITLE="выбрать"; 
function ButtonCalc(id,options){options=options||{};options.glyph=options.glyph||this.DEF_GLYPH;var self=this;options.onClick=options.onClick||function(event){(new Calculator({"editControl":self.getEditControl()}).show());};ButtonCalc.superclass.constructor.call(this,id,options);}
extend(ButtonCalc,ButtonCtrl);ButtonCalc.prototype.DEF_GLYPH="glyphicon-th"; 
ButtonCalc.prototype.DEF_TITLE="открыть калькулятор"; 
function ButtonCalendar(id,options){options=options||{};options.glyph=options.glyph||this.DEF_GLYPH;this.setTimeValueStr(options.timeValueStr||"00:00:00");this.setDateFormat(options.dateFormat||window.getApp().getDateFormat());var self=this;options.onClick=options.onClick||function(event){var p=$(self.getEditControl().getNode());p.datepicker({format:{toDisplay:function(date,format,language){var tm;if(!self.m_editControl.isNull()){var ctrl_val=self.getEditControl().getValue();tm=ctrl_val.getSeconds()*1000+ctrl_val.getMinutes()*60*1000+ctrl_val.getHours()*60*60*1000;}
else{tm=self.m_time;}
var d=new Date(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0,tm);var fv=DateHelper.format(d,self.m_dateFormat);return fv;},toValue:function(date,format,language){var v=DateHelper.userStrToDate(date);return v;}},language:"ru",daysOfWeekHighlighted:"0,6",autoclose:true,todayHighlight:true,orientation:"bottom right",showOnFocus:false,clearBtn:true});p.on("hide",function(ev){self.getEditControl().applyMask();});p.on("changeDate",function(ev){if(self.m_prevDate!=ev.date)
self.getEditControl().onSelectValue();self.m_prevDate=ev.date;});p.datepicker("show");};ButtonCalendar.superclass.constructor.call(this,id,options);}
extend(ButtonCalendar,ButtonCtrl);ButtonCalendar.prototype.DEF_GLYPH="glyphicon-calendar";ButtonCalendar.prototype.m_time;ButtonCalendar.prototype.m_dateFormat;ButtonCalendar.prototype.m_prevDate;ButtonCalendar.prototype.setDateFormat=function(v){this.m_dateFormat=v;}
ButtonCalendar.prototype.getDateFormat=function(){return this.m_dateFormat;}
ButtonCalendar.prototype.setTimeValueStr=function(v){this.m_time=DateHelper.timeToMS(v);}
ButtonCalendar.prototype.getDateFormat=function(){return this.m_dateFormat;} 
ButtonCalendar.prototype.DEF_TITLE="открыть календарь";ButtonCalendar.prototype.DEF_ALT="кал."; 
function ButtonClear(id,options){options=options||{};options.glyph="glyphicon-remove";this.m_onClear=options.onClear;var self=this;options.onClick=options.onClick||function(event){self.getEditControl().reset();if(this.m_onClear)this.m_onClear();};ButtonClear.superclass.constructor.call(this,id,options);}
extend(ButtonClear,ButtonCtrl); 
ButtonClear.prototype.DEF_TITLE="очистить значение"; 
function ButtonEditPeriodValues(id,options){options=options||{};options.glyph="glyphicon-pencil";options.title=this.TITLE;var self=this;this.m_onEditPeriodValues=options.onEditPeriodValues||function(){self.onEditPeriodValues();};options.onClick=options.onClick||function(event){if(self.onEditPeriodValues)self.onEditPeriodValues();};if(!options.periodOptions){throw new Error("options.periodOptions not defined");}
this.m_periodOptions=options.periodOptions;ButtonEditPeriodValues.superclass.constructor.call(this,id,options);}
extend(ButtonEditPeriodValues,ButtonCtrl);ButtonEditPeriodValues.prototype.onEditPeriodValues=function(){self=this;var id=this.getId();if(this.m_periodOptions)
this.m_view=new PeriodValueList_View(id+":f:v",{"periodOptions":this.m_periodOptions});this.m_form=new WindowFormModalBS(id+":f",{"dialogWidth":"80%","content":this.m_view,"cmdCancel":false,"cmdOk":true,"contentHead":this.m_periodOptions.formCaption,"onClickOk":function(){self.setLastVal(function(){self.closeForm();});}});this.m_form.open();}
ButtonEditPeriodValues.prototype.closeForm=function(){this.m_view.delDOM()
this.m_form.delDOM();delete this.m_view;delete this.m_form;}
ButtonEditPeriodValues.prototype.setLastVal=function(callBack){var key=(typeof(this.m_periodOptions.key)=="function")?this.m_periodOptions.key():this.m_periodOptions.key;if(!this.m_editControl||!key){self.m_editControl.setValue(0);callBack();}else{var pm=(new PeriodValue_Controller()).getPublicMethod("get_last_val");pm.setFieldValue("period_value_type",this.m_periodOptions.valueType);pm.setFieldValue("key",key);var self=this;pm.run({"ok":function(resp){var m=resp.getModel("PeriodValue_Model");var v=0;if(m.getNextRow()){v=m.getFieldValue("val");}
self.m_editControl.setValue(v);callBack();}});}} 
ButtonEditPeriodValues.prototype.TITLE="Открыть историю значений"; 
function ButtonCmd(id,options){options=options||{};options.colorClass="bg-"+window.getApp().getColorClass();options.className="btn "+options.colorClass+" btn-cmd";options.caption=options.caption||this.DEF_CAPTION;ButtonCmd.superclass.constructor.call(this,id,options);}
extend(ButtonCmd,Button);ButtonCmd.prototype.DEF_CAPTION=""; 
function ButtonExpToExcel(id,options){options=options||{};ButtonExpToExcel.superclass.constructor.call(this,id,options);}
extend(ButtonExpToExcel,ButtonCmd); 
ButtonExpToExcel.prototype.DEF_TITLE="экспорт в Excel";ButtonExpToExcel.prototype.DEF_CAPTION="Excel"; 
function ButtonExpToPDF(id,options){options=options||{};ButtonExpToPDF.superclass.constructor.call(this,id,options);}
extend(ButtonExpToPDF,ButtonCmd); 
ButtonExpToPDF.prototype.DEF_TITLE="экспорт в PDF";ButtonExpToPDF.prototype.DEF_CAPTION="PDF"; 
function ButtonOpen(id,options){options=options||{};options.glyph="glyphicon-pencil";ButtonOpen.superclass.constructor.call(this,id,options);}
extend(ButtonOpen,ButtonEditCtrl); 
ButtonOpen.prototype.DEF_TITLE="открыть"; 
function ButtonInsert(id,options){options=options||{};options.glyph="glyphicon-plus";var self=this;this.m_editWinClass=options.editWinClass;this.m_editViewOptions=options.editViewOptions;options.onClick=options.onClick||function(event){self.doInsert(EventHelper.fixMouseEvent(event));};ButtonInsert.superclass.constructor.call(this,id,options);}
extend(ButtonInsert,ButtonCtrl);ButtonInsert.prototype.m_editForm;ButtonInsert.prototype.doInsert=function(e){if(!this.m_editWinClass){throw new Error("editWinClass is not defined");}
this.m_editForm=new this.m_editWinClass({"id":CommonHelper.uniqid(),"params":{"cmd":"insert","editViewOptions":this.m_editViewOptions}});this.m_editForm.open();} 
ButtonInsert.prototype.DEF_TITLE="добавить"; 
function ButtonPrint(id,options){options=options||{};var self=this;options.onClick=options.onClick||function(){self.onClick();};this.m_fieldId=options.fieldId;this.m_DOMId=options.DOMId;this.m_controller=options.controller;this.m_methodId=options.methodId||this.DEF_METH;ButtonPrint.superclass.constructor.call(this,id,options);}
extend(ButtonPrint,ButtonCmd);ButtonPrint.prototype.onClick=function(){if(this.m_DOMId){var pm=this.m_controller.getPublicMethod();pm.setFieldValue(this.m_paramId,CommonHelper.nd(this.m_DOMId).getAttribute("old_id"));}
this.m_controller.run(this.m_methodId,{xml:false,ok:function(resp){WindowPrint.show({content:resp});}});}
ButtonPrint.prototype.DEF_METH="get_print"; 
ButtonPrint.prototype.DEF_TITLE="напечатать";ButtonPrint.prototype.DEF_CAPTION="Печать"; 
function ButtonPrintList(id,options){options=options||{};options.className=options.className||this.DEF_CLASS;var btn_class=(options.buttonClassName||this.DEF_BTN_CLASS)+" dropdown-toggle";this.m_button=new ControlContainer(CommonHelper.uniqid(),"button",{"className":btn_class,"value":this.DEF_CAPTION,"title":this.DEF_TITLE,"attrs":{"type":"button","data-toggle":"dropdown"},"elements":[new Control(CommonHelper.uniqid(),"i",{"className":"glyphicon "+this.DEF_GLYPH})]});this.m_keyIds=options.keyIds;var print_ctrls=[];this.m_objList=[];this.m_buttons=new ControlContainer(CommonHelper.uniqid(),"ul",{"className":"dropdown-menu"});this.setPrintList(options.printList);options.elements=[this.m_button,this.m_buttons];ButtonPrintList.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(ButtonPrintList,ControlContainer);ButtonPrintList.prototype.DEF_TAG_NAME="div";ButtonPrintList.prototype.DEF_CLASS="btn dropdown";ButtonPrintList.prototype.DEF_BTN_CLASS="btn btn-primary";ButtonPrintList.prototype.DEF_GLYPH="glyphicon-triangle-bottom";ButtonPrintList.prototype.m_buttons;ButtonPrintList.prototype.m_button;ButtonPrintList.prototype.m_objList;ButtonPrintList.prototype.m_keyIds;ButtonPrintList.prototype.getObjList=function(){return this.m_objList;}
ButtonPrintList.prototype.addToList=function(obj){this.m_buttons.addElement(obj.getControl());this.m_objList.push(obj);}
ButtonPrintList.prototype.setGrid=function(v){for(var i=0;i<this.m_objList.length;i++){this.m_objList[i].setGrid(v);this.m_objList[i].setKeyIds(this.m_keyIds);}}
ButtonPrintList.prototype.getKeyIds=function(v){return this.m_keyIds;}
ButtonPrintList.prototype.setPrintList=function(printList){this.m_buttons.clear();if(printList&&printList.length){for(var i=0;i<printList.length;i++){this.m_buttons.addElement(printList[i].getControl());this.m_objList.push(printList[i]);}}} 
ButtonPrintList.prototype.DEF_CAPTION="Печать";ButtonPrintList.prototype.DEF_TITLE="Показать список печатных форм"; 
function ButtonSelectRef(id,options){options=options||{};this.setMultySelect((options.multySelect==undefined)?false:options.multySelect);this.m_descrIds=options.descrIds;this.m_keyIds=options.keyIds;this.setOnSelect(options.onSelect);this.setFormatFunction(options.formatFunction);ButtonSelectRef.superclass.constructor.call(this,id,options);}
extend(ButtonSelectRef,ButtonEditCtrl);ButtonSelectRef.prototype.m_multySelect;ButtonSelectRef.prototype.m_descrIds;ButtonSelectRef.prototype.m_keyIds;ButtonSelectRef.prototype.m_onSelect;ButtonSelectRef.prototype.getMultySelect=function(){return this.m_multySelect;}
ButtonSelectRef.prototype.setMultySelect=function(v){this.m_multySelect=v;}
ButtonSelectRef.prototype.onClickEvent=function(e){var win_opts={};var self=this;win_opts.app=window.getApp();win_opts.onClose=function(){self.closeWinObj();};let url_params=this.getWinParams();if(typeof(url_params)=="function"){url_params=url_params();}
if(typeof(url_params)=="object"){let param_s="";for(let p_id in url_params){if(param_s.length>0){param_s+="&";}
param_s+=encodeURIComponent(p_id)+"="+encodeURIComponent(url_params[p_id]);}
url_params=param_s;}
win_opts.URLParams=url_params;var ed_opts=this.getWinEditViewOptions();if(ed_opts){win_opts.params={"editViewOptions":ed_opts}}
this.m_winObj=new this.m_winClass(win_opts);var win=this.m_winObj.open();win.onSelect=function(fields){self.onSelect(fields);}}
ButtonSelectRef.prototype.onSelect=function(fields){var ctrl=this.getEditControl();if(ctrl&&ctrl.getKeyIds){var ctrl_keys={};var ctrl_key_ids=ctrl.getKeyIds();var model_key_ids;if(this.m_keyIds){model_key_ids=this.m_keyIds;}
else{model_key_ids=this.m_winObj.getKeyIds();}
for(var n=0;n<ctrl_key_ids.length;n++){if(fields[model_key_ids[n]]){ctrl_keys[ctrl_key_ids[n]]=fields[model_key_ids[n]].getValue();}}
var ctrl_descr="";var format_f=this.getFormatFunction();if(format_f){ctrl_descr=format_f.call(ctrl,fields);}else if(this.m_descrIds&&typeof(this.m_descrIds)=="function"){ctrl_descr=this.m_descrIds(fields);}else if(this.m_descrIds){for(var n=0;n<this.m_descrIds.length;n++){if(fields[this.m_descrIds[n]]){var f_val=fields[this.m_descrIds[n]].getValue();ctrl_descr+=(ctrl_descr=="")?"":" ";if(typeof f_val=="object"&&f_val.getDescr){ctrl_descr+=f_val.getDescr();}
else{ctrl_descr+=f_val;}}}}
else{for(var fid in fields){if(!fields[fid].getPrimaryKey()){ctrl_descr+=(ctrl_descr=="")?"":" ";ctrl_descr+=fields[fid].getValue();}}}
ctrl.setValue(new RefType({"keys":ctrl_keys,"descr":ctrl_descr}));ctrl.focus();ctrl.onSelectValue(fields);}else if(ctrl){ctrl.onSelectValue(fields);}
if(!this.getMultySelect()){this.m_winObj.close();}
else if(ctrl&&ctrl.onSelectValue){ctrl.onSelectValue(fields);}}
ButtonSelectRef.prototype.setOnSelect=function(v){this.m_onSelect=v;}
ButtonSelectRef.prototype.getOnSelect=function(){return this.m_onSelect;}
ButtonSelectRef.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
ButtonSelectRef.prototype.getFormatFunction=function(){return this.m_formatFunction;} 
ButtonSelectRef.prototype.DEF_TITLE="выбрать из списка";ButtonSelectRef.prototype.DEF_SEL_FORM_TITLE="Выбор"; 
function ButtonSelectDataType(id,options){options=options||{};this.m_compoundControl=options.compoundControl;options.glyph=options.glyph||"glyphicon-random";var self=this;options.onClick=options.onClick||function(event){self.doSelect(EventHelper.fixMouseEvent(event));}
ButtonSelectDataType.superclass.constructor.call(this,id,options);}
extend(ButtonSelectDataType,ButtonCtrl);ButtonSelectDataType.prototype.m_form;ButtonSelectDataType.prototype.m_compoundControl;ButtonSelectDataType.prototype.doSelect=function(e){var data_types=this.m_compoundControl.getPossibleDataTypes();var rows=[];for(var t in data_types){rows.push({"fields":{"dataTypeDescrLoc":data_types[t].dataTypeDescrLoc,"dataType":t}});}
var model=new ModelJSON("dataTypeList",{"fields":["dataType","dataTypeDescrLoc"],"data":{"rows":rows}});var self=this;var ctrl_id=this.getId()+":selectDataType:form:body:view:grid";this.m_view=new View(this.getId()+":selectDataType:form:body:view",{"elements":[new Grid(ctrl_id,{"keyIds":["dataType"],"showHead":false,"model":model,"head":new GridHead(ctrl_id+":head",{"elements":[new GridRow(ctrl_id+":head:row0",{"elements":[new GridCellHead(ctrl_id+":head:dataTypeDescrLoc",{"columns":[new GridColumn({"field":model.getField("dataTypeDescrLoc")})]})]})]}),"onSelect":function(fields){self.onSelect(fields);}})]});this.m_form=new WindowFormModalBS(this.getId()+":selectDataType:form",{"cmdCancel":true,"cmdOk":true,"onClickCancel":function(){self.m_form.close();},"onClickOk":function(){self.onSelect(self.m_view.getElement("grid").getModelRow());},"content":this.m_view,"contentHead":this.HEAD_TITLE});this.m_form.open();}
ButtonSelectDataType.prototype.onSelect=function(fields){this.m_compoundControl.setDataType(fields.dataType.getValue());this.m_form.close();} 
ButtonSelectDataType.prototype.HEAD_TITLE="Выберите тип данных";ButtonSelectDataType.prototype.DEF_TITLE="Выбрать тип данных";ButtonSelectDataType.prototype.TXT_UNASSIGNED_TYPE="<тип не задан>"; 
function ButtonMakeSelection(id,options){options=options||{};options.glyph=options.glyph||"glyphicon-save-file";ButtonMakeSelection.superclass.constructor.call(this,id,options);}
extend(ButtonMakeSelection,ButtonCmd); 
ButtonMakeSelection.prototype.DEF_CAPTION="Выбрать ";ButtonMakeSelection.prototype.DEF_TITLE="выбрать и закрыть форму"; 
function ButtonToggle(id,options){options=options||{};options.className="btn btn-link";options.glyph="glyphicon-triangle-bottom";options.attrs=options.attrs||{};options.attrs["data-toggle"]="collapse";options.attrs["data-target"]=("#"+options.dataTarget);ButtonToggle.superclass.constructor.call(this,id,options);}
extend(ButtonToggle,Button); 
function ButtonCall(id,options){options=options||{};options.glyph="glyphicon-earphone";this.m_tel=options.tel;this.m_telExt=options.telExt;this.m_onConnected=options.onConnected;var self=this;options.onClick=options.onClick||function(){self.onClick();};ButtonCall.superclass.constructor.call(this,id,options);}
extend(ButtonCall,ButtonCtrl);ButtonCall.prototype.m_tel;ButtonCall.prototype.m_telExt;ButtonCall.prototype.m_onConnected;ButtonCall.prototype.onClick=function(){if(this.m_tel&&this.m_telExt){if(this.m_tel==""){throw new Error(this.ER_NO_TEL);}
var contr=new Caller_Controller();var pm=contr.getPublicMethod("call");pm.setFieldValue("tel",this.m_tel);pm.setFieldValue("ext",this.m_telExt);var self=this;pm.run({"ok":function(resp){self.m_onConnected(resp);}});}} 
ButtonCall.prototype.ER_NO_TEL="Не задан номер телефона!";ButtonCall.prototype.DEF_TITLE="позвонить"; 
function Label(id,options){options=options||{};options.className=(options.className!==undefined)?options.className:(this.DEF_CLASS+" "+window.getBsCol(this.DEF_COL_WD));options.value=options.value||options.caption;Label.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(Label,Control);Label.prototype.DEF_TAG_NAME="label";Label.prototype.DEF_CLASS="control-label";Label.prototype.DEF_COL_WD="4"; 
function Edit(id,options){options=options||{};options.attrs=options.attrs||{};if(id&&(options.html==undefined&&options.template==undefined)){var n=CommonHelper.nd(id,this.getWinObjDocument());if(n){n.id=n.id+":cont";}}
else if(!id){id=CommonHelper.uniqid();}
if(options.inline===true){options.contClassName="";options.editContClassName="";options.className="";options.btnContClassName="";options.contTagName="SPAN";options.editContTagName="SPAN";}
options.className=(options.className!==undefined)?options.className:this.DEF_CLASS;if(options.addClassName!=undefined){options.className+=" "+options.addClassName;}
options.attrs.type=options.attrs.type||options.type||this.DEF_INPUT_TYPE;options.attrs.maxlength=options.attrs.maxlength||options.maxlength||((options.editMask)?options.editMask.length:undefined);this.setValidator(options.validator);if(options.cmdAutoComplete!=undefined&&!options.cmdAutoComplete){options.inputEnabled=false;}
this.m_formatterOptions=options.formatterOptions;this.m_formatterGetRawValue=options.formatterGetRawValue;Edit.superclass.constructor.call(this,id,options.tagName||this.DEF_TAG_NAME,options);if(options.editMask){this.setEditMask(options.editMask);}
this.setRegExpression(options.regExpression);this.setRegExpressionInvalidMessage(options.regExpressionInvalidMessage);if(options.label){this.setLabel(options.label);}
else if(options.labelCaption||options.labelOptions){options.labelOptions=options.labelOptions||{"attrs":{"for":id}};options.labelOptions.value=options.labelOptions.value||options.labelCaption;options.labelOptions.className=options.labelOptions.className||options.labelClassName;options.labelOptions.visible=this.getVisible();this.setLabel(new Label(id+":label",options.labelOptions));}
this.setErrorControl((options.errorControl!==undefined)?options.errorControl:((this.m_html)?null:new ErrorControl(id+":error")));this.m_infoControls=options.infoControls||new ControlContainer(this.getId()+":info","span",{"elements":options.infoControlElements||[this.m_errorControl]});this.setButtonOpen(options.buttonOpen);this.setButtonSelect(options.buttonSelect);this.setButtonClear(options.buttonClear);this.setBtnContClassName((options.btnContClassName!=undefined)?options.btnContClassName:this.BTNS_CONTAINER_CLASS);var btn_opt="button";for(opt in options){if(opt.substring(0,btn_opt.length)==btn_opt&&opt.length>btn_opt.length){this.addButtonContainer();break;}}
this.setFormatFunction(options.formatFunction);this.setLabelAlign(options.labelAlign||this.DEF_LABEl_ALIGN);this.setContClassName((options.contClassName!==undefined)?options.contClassName:this.DEF_CONT_CLASS);this.setContTagName(options.contTagName||this.DEF_CONT_TAG);this.setEditContClassName((options.editContClassName!==undefined)?options.editContClassName:(this.DEF_EDIT_CONT_CLASS+" "+window.getBsCol(8)));this.setEditContTagName(options.editContTagName||this.DEF_EDIT_CONT_TAG);if(options.inputEnabled!=undefined&&!options.inputEnabled&&this.getEnabled()){this.setInputEnabled(false);}
if(options.cmdAutoComplete||options.autoComplete){if(!options.acPublicMethod&&options.acController){options.acPublicMethod=options.acController.getPublicMethod("complete");}
var self=this;options.autoComplete=options.autoComplete||(new actbAJX({"minLengthForQuery":options.acMinLengthForQuery,"onSelect":function(fields){self.onSelectValue(fields);},"model":options.acModel,"publicMethod":options.acPublicMethod,"patternFieldId":options.acPatternFieldId,"control":this,"keyFields":options.acKeyFields,"descrFields":options.acDescrFields,"descrFunction":options.acDescrFunction,"icase":options.acICase,"mid":options.acMid,"count":options.acCount,"enabled":options.acEnabled,"resultFieldIdsToAttr":options.acResultFieldIdsToAttr,"onCompleteTextOut":options.acOnCompleteTextOut,"onBeforeSendQuery":options.acOnBeforeSendQuery,"onSendQueryResult":options.acOnSendQueryResult}));actb(this.m_node,options.winObj,options.autoComplete);}
this.setAutoComplete(options.autoComplete);this.setOnReset(options.onReset);this.setOnSelect(options.onSelect);}
extend(Edit,Control);Edit.prototype.DEF_TAG_NAME="INPUT";Edit.prototype.DEF_INPUT_TYPE="text";Edit.prototype.DEF_CLASS="form-control";Edit.prototype.BTNS_CONTAINER_CLASS="input-group-btn";Edit.prototype.INCORRECT_VAL_CLASS="error";Edit.prototype.DEF_CONT_CLASS="form-group";Edit.prototype.DEF_EDIT_CONT_CLASS="input-group";Edit.prototype.DEF_CONT_TAG="DIV";Edit.prototype.DEF_EDIT_CONT_TAG="DIV";Edit.prototype.VAL_INIT_ATTR="initValue";Edit.prototype.DEF_LABEl_ALIGN="left";Edit.prototype.m_editMask;Edit.prototype.m_regExpression;Edit.prototype.m_buttons;Edit.prototype.m_value;Edit.prototype.m_label;Edit.prototype.m_container;Edit.prototype.m_editContainer;Edit.prototype.m_errorControl;Edit.prototype.m_contTagName;Edit.prototype.m_contClassName;Edit.prototype.m_buttonOpen;Edit.prototype.m_buttonSelect;Edit.prototype.m_buttonClear;Edit.prototype.m_formatFunction;Edit.prototype.m_editContTagName;Edit.prototype.m_enabled;Edit.prototype.m_labelAlign;Edit.prototype.m_btnContClassName;Edit.prototype.m_autoComplete;Edit.prototype.addButtonContainer=function(){this.m_buttons=new ControlContainer(this.getId()+":btn-cont","SPAN",{"className":this.m_btnContClassName,"enabled":this.getEnabled()});this.addButtonControls();}
Edit.prototype.addButtonControls=function(){if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);}
Edit.prototype.setRegExpression=function(v){this.m_regExpression=v}
Edit.prototype.getRegExpression=function(mask){return this.m_regExpression;}
Edit.prototype.setRegExpressionInvalidMessage=function(v){this.m_regExpressionInvalidMessage=v}
Edit.prototype.getRegExpressionInvalidMessage=function(mask){return this.m_regExpressionInvalidMessage;}
Edit.prototype.setEditMask=function(mask){this.m_editMask=mask}
Edit.prototype.getEditMask=function(mask){return this.m_editMask;}
Edit.prototype.applyMask=function(){if(window["Cleave"]&&this.m_formatterOptions){this.m_cleave=new Cleave(this.m_node,this.m_formatterOptions);}
else if(this.getEditMask()){$(this.getNode()).mask(this.getEditMask());}}
Edit.prototype.getFormattedValue=function(){var res;if(this.getEditMask()){res=this.m_node.value;}
else{res=this.formatOutputValue(this.getValue());}
return res;}
Edit.prototype.formatOutputValue=function(val){return val;}
Edit.prototype.setValue=function(val){if(this.m_validator){val=this.m_validator.correctValue(val);}
if(this.m_cleave){this.m_cleave.setRawValue((this.m_formatterOptions.prefix?this.m_formatterOptions.prefix:"")+val);}else{var v=this.formatOutputValue(val);this.getNode().value=v;this.applyMask();}
if(this.m_eventFuncs&&this.m_eventFuncs.change){this.m_eventFuncs.change();}}
Edit.prototype.getValue=function(){if(this.m_node){if(this.m_cleave){var v=this.m_formatterGetRawValue?(!this.m_formatterOptions.prefix?this.m_cleave.getRawValue():this.m_cleave.getRawValue().substring(this.m_formatterOptions.prefix.length)):this.m_node.value;if(!v||v.length==0){return null;}
else if(this.m_validator){return this.m_validator.correctValue(v);}
else{return v;}}else{var v=this.getEditMask()?$(this.m_node).mask():this.m_node.value;if(!v||v.length==0){return null;}
else if(this.m_validator){return this.m_validator.correctValue(v);}
else{return v;}}}}
Edit.prototype.setInitValue=function(val){this.setValue(val);this.setAttr(this.VAL_INIT_ATTR,this.getValue());}
Edit.prototype.getInitValue=function(){return this.getAttr(this.VAL_INIT_ATTR);}
Edit.prototype.setLabel=function(label){if(typeof label=="string"){throw Error(this.ER_LABEL_OBJECT);}
this.m_label=label;}
Edit.prototype.getLabel=function(){return this.m_label;}
Edit.prototype.setValidator=function(v){this.m_validator=v;}
Edit.prototype.getValidator=function(){return this.m_validator;}
Edit.prototype.validate=function(){var res=true;if(this.m_validator){try{this.setValid();var v=this.getValue();this.m_validator.validate(v);if(this.m_regExpression&&this.m_node.value&&this.m_node.value.length){var reg;if(typeof(this.m_regExpression)=="string"){reg=new RegExp(this.m_regExpression);}else{reg=this.m_regExpression;}
if(reg.test&&!reg.test(this.m_node.value)){throw new Error(this.getRegExpressionInvalidMessage()||this.ER_REGEXP_INVALID);}}}
catch(e){this.setNotValid(e.message);res=false;}}
return res;}
Edit.prototype.setButtonOpen=function(v){this.m_buttonOpen=v;if(this.m_buttonOpen&&this.m_buttonOpen.setEditControl){this.m_buttonOpen.setEditControl(this);}}
Edit.prototype.getButtonOpen=function(){return this.m_buttonOpen;}
Edit.prototype.setButtonClear=function(v){this.m_buttonClear=v;if(this.m_buttonClear&&this.m_buttonClear.setEditControl){this.m_buttonClear.setEditControl(this);}}
Edit.prototype.getButtonClear=function(){return this.m_buttonClear;}
Edit.prototype.setButtonSelect=function(v){this.m_buttonSelect=v;if(this.m_buttonSelect&&this.m_buttonSelect.setEditControl){this.m_buttonSelect.setEditControl(this);}}
Edit.prototype.getButtonSelect=function(){return this.m_buttonSelect;}
Edit.prototype.getButtons=function(){return this.m_buttons;}
Edit.prototype.setNotValid=function(erStr){DOMHelper.addClass(this.m_node,this.INCORRECT_VAL_CLASS);if(this.getErrorControl()){this.getErrorControl().setValue(erStr);}
else{throw new Error(erStr);}}
Edit.prototype.setValid=function(){DOMHelper.delClass(this.m_node,this.INCORRECT_VAL_CLASS);if(this.getErrorControl())this.getErrorControl().clear();}
Edit.prototype.toDOM=function(parent){var node_parent;if(!this.m_html){var id=this.getId();this.m_container=new ControlContainer((id?id+":cont":null),this.m_contTagName,{"className":this.m_contClassName,"visible":this.getVisible()});if(this.m_label&&this.m_labelAlign=="left"){this.m_container.addElement(this.m_label);}
this.m_editContainer=new Control((id?id+":edit-cont":null),this.m_editContTagName,{"className":this.m_editContClassName});this.m_container.addElement(this.m_editContainer);this.m_container.toDOM(parent);node_parent=this.m_editContainer.getNode();}
Edit.superclass.toDOM.call(this,node_parent);this.applyMask();if(this.m_buttons&&!this.m_buttons.isEmpty()){this.m_buttons.toDOMAfter(this.getNode());}
if(this.m_buttonsBefore&&!this.m_buttonsBefore.isEmpty()){this.m_buttonsBefore.toDOMBefore(this.getNode());}
if(this.m_label&&this.m_labelAlign=="right"){this.m_label.toDOMAfter(this.getNode());}
this.m_infoControls.toDOM(this.m_container.getNode());}
Edit.prototype.toDOMBefore=function(node){var node_parent;if(!this.m_html){var id=this.getId();this.m_container=new ControlContainer(((id)?id+":cont":null),this.m_contTagName,{"className":this.m_contClassName,"visible":this.getVisible()});if(this.m_label&&this.m_labelAlign=="left"){this.m_container.addElement(this.m_label);}
this.m_editContainer=new Control(((id)?id+":edit-cont":null),this.m_editContTagName,{"className":this.m_editContClassName});this.m_container.addElement(this.m_editContainer);this.m_container.toDOMBefore(node);node_parent=this.m_editContainer.getNode();}
Edit.superclass.toDOM.call(this,node_parent);if(this.m_errorControl){this.m_errorControl.toDOM(node_parent);}
this.applyMask();if(this.m_buttons&&!this.m_buttons.isEmpty()){this.m_buttons.toDOMAfter(this.getNode());}
if(this.m_label&&this.m_labelAlign=="right"){this.m_label.toDOMAfter(this.getNode());}}
Edit.prototype.delDOM=function(){if(this.m_autoComplete){this.m_autoComplete.delDOM();}
Edit.superclass.delDOM.call(this);if(this.m_buttons){this.m_buttons.delDOM();}
if(this.m_errorControl){this.m_errorControl.delDOM();}
if(this.m_editContainer){this.m_editContainer.delDOM();}
if(this.m_container){this.m_container.delDOM();}}
Edit.prototype.setVisible=function(v){Edit.superclass.setVisible.call(this,v);if(this.m_container){this.m_container.setVisible(v);}
if(this.m_label){this.m_label.setVisible(v);}
if(this.m_buttons){this.m_buttons.setVisible(v);}}
Edit.prototype.setEnabled=function(enabled){if(this.m_buttons){this.m_buttons.setEnabled(enabled);if(this.getButtonOpen()&&!enabled){this.getButtonOpen().setEnabled(true);}}
this.setInputEnabled(enabled);this.m_enabled=enabled;}
Edit.prototype.getEnabled=function(){return this.m_enabled;}
Edit.prototype.reset=function(){this.setValue("");this.focus();this.valueChanged();if(this.m_onReset)this.m_onReset();}
Edit.prototype.isNull=function(){var v=this.getValue();return(!v||v.length==0);}
Edit.prototype.getModified=function(){return(this.getValue()!=this.getInitValue());}
Edit.prototype.getIsRef=function(){return false;}
Edit.prototype.getFormatFunction=function(){return this.m_formatFunction;}
Edit.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
Edit.prototype.getContTagName=function(){return this.m_contTagName;}
Edit.prototype.setContTagName=function(v){this.m_contTagName=v;}
Edit.prototype.getContClassName=function(){return this.m_contClassName;}
Edit.prototype.setContClassName=function(v){this.m_contClassName=v;}
Edit.prototype.getEditContClassName=function(){return this.m_editContClassName;}
Edit.prototype.setEditContClassName=function(v){this.m_editContClassName=v;}
Edit.prototype.setBtnContClassName=function(v){this.m_btnContClassName=v;}
Edit.prototype.getEditContTagName=function(){return this.m_editContTagName;}
Edit.prototype.setEditContTagName=function(v){this.m_editContTagName=v;}
Edit.prototype.setInputEnabled=function(enabled){Edit.superclass.setEnabled.call(this,enabled);}
Edit.prototype.getInputEnabled=function(){return Edit.superclass.getEnabled.call(this);}
Edit.prototype.setErrorControl=function(v){this.m_errorControl=v;}
Edit.prototype.getErrorControl=function(){return this.m_errorControl;}
Edit.prototype.setLabelAlign=function(v){this.m_labelAlign=v;}
Edit.prototype.getLabelAlign=function(){return this.m_labelAlign;}
Edit.prototype.setAutoComplete=function(v){this.m_autoComplete=v;}
Edit.prototype.getAutoComplete=function(){return this.m_autoComplete;}
Edit.prototype.setOnReset=function(v){this.m_onReset=v;}
Edit.prototype.getOnReset=function(){return this.m_onReset;}
Edit.prototype.setOnValueChange=function(v){Edit.superclass.setOnValueChange.call(this,v);var self=this;this.m_onInputChange=function(){self.valueChanged();}
if(v){EventHelper.add(this.getNode(),"keyup",this.m_onInputChange);}
else{EventHelper.del(this.getNode(),"keyup",this.m_onInputChange);}}
Edit.prototype.focus=function(){if(this.getNode().focus)this.getNode().focus();}
Edit.prototype.setMaxLength=function(v){this.setAttr("maxlength",v);if(this.m_validator)this.m_validator.setMaxLength(v);}
Edit.prototype.setOnSelect=function(v){this.m_onSelect=v;}
Edit.prototype.getOnSelect=function(v){return this.m_onSelect;}
Edit.prototype.onSelectValue=function(v){this.valueChanged();if(this.m_onSelect)this.m_onSelect(v);}
Edit.prototype.getInfoControls=function(v){return this.m_infoControls;} 
Edit.prototype.ER_LABEL_OBJECT="Неверный параметр label";Edit.prototype.ER_REGEXP_INVALID="Неверное значение"; 
function EditString(id,options){options=options||{};options.validator=options.validator||new ValidatorString(options);var w=window.getWidthType();if((w=="sm"&&options.cmdSmClear===true)||(w!="sm"&&options.cmdClear!==false)){options.buttonClear=options.buttonClear||new ButtonClear(id+":btn_clear",{"editControl":this,"enabled":options.enabled,"onClear":options.onClear});}
EditString.superclass.constructor.call(this,id,options);}
extend(EditString,Edit);EditString.prototype.ATTR_DISABLED="readOnly";EditString.prototype.setValue=function(val){if(val==undefined)return;EditString.superclass.setValue.call(this,val);} 
function EditText(id,options){options=options||{};options.cmdClear=(options.cmdClear!=undefined)?options.cmdClear:false;EditText.superclass.constructor.call(this,id,options);this.setRows(options.rows||this.DEF_ROWS);}
extend(EditText,EditString);EditText.prototype.DEF_TAG_NAME="TEXTAREA";EditText.prototype.DEF_ROWS="5";EditText.prototype.setRows=function(rows){if(rows)this.setAttr("rows",rows);}
EditText.prototype.getRows=function(){return this.getAttr("rows");} 
function EditNum(id,options){options=options||{};options.type=options.type||"text";options.events=options.events||{};let self=this;options.events.paste=function(e){self.correctPastedData(e);}
EditNum.superclass.constructor.call(this,id,options);this.m_allowedChars=[8,0];}
extend(EditNum,EditString);EditNum.prototype.m_allowedChars;EditNum.prototype.handleKeyPress=function(e){if(CommonHelper.inArray(e.which,this.m_allowedChars)==-1&&(e.which<48||e.which>57)){return false;}}
EditNum.prototype.toDOM=function(parent){EditNum.superclass.toDOM.call(this,parent);var self=this;$(this.getNode()).keypress(function(e){return self.handleKeyPress(e);});}
EditNum.prototype.correctPastedData=function(e){e.stopPropagation();e.preventDefault();var pasted_data;var cur_val;var clipboard_data=e.clipboardData||window.clipboardData;if(!clipboard_data){cur_val=this.getValue();pasted_data=cur_val;}
else{pasted_data=clipboard_data.getData("Text").match(/\d+/g).map(Number).join("");pasted_data=pasted_data.replaceAll(" ","");}
if(!cur_val){cur_val=this.getValue();}
if(cur_val!=pasted_data){this.setValue(pasted_data);}} 
function EditInt(id,options){options=options||{};options.validator=options.validator||new ValidatorInt(options);options.attrs=options.attrs||{};if(options.minValue){options.attrs.min=options.minValue;}
if(options.maxValue){options.attrs.max=options.maxValue;}
options.cmdClear=(options.cmdClear!=undefined)?options.cmdClear:false;options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:options.cmdCalc;if(options.cmdSelect==undefined||options.cmdSelect===true){options.buttonSelect=options.buttonSelect||new ButtonCalc(id+":btn_open",{"winObj":options.winObj,"enabled":options.enabled,"editControl":this});}
EditInt.superclass.constructor.call(this,id,options);if(this.m_validator&&!this.m_validator.getUnsigned()){this.m_allowedChars.push(45);}}
extend(EditInt,EditNum); 
function EditFloat(id,options){options=options||{};options.validator=options.validator||new ValidatorFloat(options);if(options.cmdSelect==undefined){options.cmdSelect=false;}
this.m_precision=options.precision||this.DEF_PRECISION;options.attrs=options.attrs||{};options.attrs.step=(options.attrs.step!=undefined)?options.attrs.step:("1,"+("0000000000").substr(0,this.m_precision));EditFloat.superclass.constructor.call(this,id,options);this.m_allowedChars.push(44);this.m_allowedChars.push(46);}
extend(EditFloat,EditInt);EditFloat.prototype.DEF_PRECISION=2;EditFloat.prototype.handleKeyPress=function(e){var res=EditFloat.superclass.handleKeyPress.call(this,e);if(res!==false&&e.which==46){}
return res;}
EditFloat.prototype.setValue=function(val){if(val==undefined){this.getNode().value="";}
else{if(this.m_validator){val=this.m_validator.correctValue(val);}
this.getNode().value=CommonHelper.numberFormat(val,this.m_precision,".","");}}
EditFloat.prototype.correctPastedData=function(e){e.stopPropagation();e.preventDefault();var pasted_data;var cur_val;var clipboard_data=e.clipboardData||window.clipboardData;if(!clipboard_data){cur_val=this.getValue();pasted_data=cur_val;}
else{pasted_data=clipboard_data.getData("Text").match(/\d+(?:[.,]\d+)?/g).join("");pasted_data=parseFloat(pasted_data);}
if(!cur_val){cur_val=this.getValue();}
if(cur_val!=pasted_data){this.setValue(pasted_data);}} 
function EditFloatPeriodValue(id,options){options=options||{};var self=this;options.inputEnabled=false;options.cmdClear=(options.cmdClear==undefined)?options.cmdClear:false;options.buttonEditPeriodValues=new ButtonEditPeriodValues(id+":btn_perVals",{"editControl":this,"enabled":true,"periodOptions":options.periodOptions});this.m_buttonEditPeriodValues=options.buttonEditPeriodValues;EditFloatPeriodValue.superclass.constructor.call(this,id,options);}
extend(EditFloatPeriodValue,EditFloat);EditFloatPeriodValue.prototype.addButtonControls=function(){if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);if(this.m_buttonEditPeriodValues)this.m_buttons.addElement(this.m_buttonEditPeriodValues);} 
function EditMoney(id,options){options=options||{};options.attrs=options.attrs||{};options.attrs.maxlength="15";options.precision="2";EditMoney.superclass.constructor.call(this,id,options);}
extend(EditMoney,EditFloat); 
function EditPhone(id,options){options=options||{};options.editMask=options.editMask||window.getApp().getPhoneEditMask();options.events=options.events||{};options.formatterGetRawValue=true;options.formatterOptions={"prefix":"+7","delimiter":"-","phone":true,"phoneRegionCode":"ru"};var self=this;options.events.paste=function(e){self.correctPastedData(e);}
this.m_validPrefixes=options.validPrefixes;EditPhone.superclass.constructor.call(this,id,options);}
extend(EditPhone,EditString);EditPhone.prototype.correctPastedData=function(e){e.stopPropagation();e.preventDefault();var pasted_data;var cur_val;var clipboard_data=e.clipboardData||window.clipboardData;if(!clipboard_data){cur_val=this.getValue();pasted_data=cur_val;}
else{pasted_data=clipboard_data.getData("Text").match(/\d+/g).map(Number).join("");if(pasted_data.length>10&&(pasted_data[0]=="8"||pasted_data[0]=="7")){pasted_data=pasted_data.substring(1);}
if(pasted_data.length>10){pasted_data=pasted_data.substring(0,10);}
if(pasted_data.length<10){pasted_data=this.getValue()+pasted_data;}}
if(!cur_val){cur_val=this.getValue();}
if(cur_val!=pasted_data){this.setValue(pasted_data);}} 
function EditEmail(id,options){options=options||{};options.validator=options.validator||new ValidatorEmail(options);options.events=options.events||{"focus":function(){this.setValid();},"blur":function(){var v=this.getValue();if(v&&v.length){if(!this.m_reg){this.m_reg=new RegExp(/\S+@\S+\.\S+/)}
if(!this.m_reg.test(v)){this.setNotValid(this.NOT_VALID_TXT);}else{this.setValid();}}else{this.setValid();}}};EditEmail.superclass.constructor.call(this,id,options);}
extend(EditEmail,EditString); 
EditEmail.prototype.NOT_VALID_TXT="Неверный формат"; 
function EditPercent(id,options){options=options||{};options.editMask=options.editMask||this.DEF_MASK;EditPercent.superclass.constructor.call(this,id,options);}
extend(EditPercent,EditString);EditPercent.prototype.DEF_MASK="99%"; 
function EditDate(id,options){options=options||{};options.validator=options.validator||new ValidatorDate(options);options.editMask=options.editMask||window.getApp().getDateEditMask();this.setDateFormat(options.dateFormat||window.getApp().getDateFormat());options.attrs=options.attrs||{};options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:true;this.setTimeValueStr(options.timeValueStr);if(options.cmdSelect){options.buttonSelect=options.buttonSelect||new ButtonCalendar(id+':btn_calend',{"dateFormat":this.getDateFormat(),"editControl":this,"timeValueStr":this.getTimeValueStr(),"enabled":options.enabled});}
if(options.cmdNext||options.buttonNext){options.buttonNext=options.buttonNext||new ButtonDateNext(id+':btn_next',{"editControl":this});}
if(options.cmdPrev||options.buttonPrev){options.buttonPrev=options.buttonPrev||new ButtonDatePrev(id+':btn_prev',{"editControl":this});}
this.setButtonNext(options.buttonNext);this.setButtonPrev(options.buttonPrev);this.m_fourYearDigit=(options.fourYearDigit!=undefined)?options.fourYearDigit:true;EditDate.superclass.constructor.call(this,id,options);}
extend(EditDate,EditString);EditDate.prototype.TIME_SEP="T";EditDate.prototype.m_timeValueStr;EditDate.prototype.m_prevValid;EditDate.prototype.addButtonControls=function(){if(!this.m_buttonsBefore){this.m_buttonsBefore=new ControlContainer(this.getId()+":btn-before-cont","SPAN",{"className":this.m_btnContClassName,"enabled":this.getEnabled()});}
if(this.m_buttonPrev){this.m_buttonsBefore.addElement(this.m_buttonPrev);}
if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);if(this.m_buttonNext)this.m_buttons.addElement(this.m_buttonNext);}
EditDate.prototype.setDateFormat=function(v){this.m_dateFormat=v;}
EditDate.prototype.getDateFormat=function(){return this.m_dateFormat;}
EditDate.prototype.toISODate=function(str){if(str=="")return"";k=this.m_fourYearDigit?2:0;var t=(this.m_fourYearDigit?"":"20")+str.substr(4,2+k)+"-"+str.substr(2,2)+"-"+str.substr(0,2);if(str.length>(6+k)){t+=this.TIME_SEP+str.substr(6+k,2);}
if(str.length>(8+k)){t+=":"+str.substr(8+k,2);}
if(str.length>(10+k)){t+=":"+str.substr(10+k,2);}
return t;}
EditDate.prototype.getValue=function(){if(this.m_node&&this.m_node.value){var v=""
if(this.m_cleave){v=this.m_cleave.getRawValue();}else{var c;for(var i=0;i<this.m_node.value.length;i++){c=this.m_node.value.charAt(i);v+=(c==" "||isNaN(c))?"":c;}}
v=this.toISODate(v);if(v.length==0){v=null;}
else if(this.m_validator){v=this.m_validator.correctValue(v);}
return v;}}
EditDate.prototype.formatOutputValue=function(val){return DateHelper.format(val,this.getDateFormat());}
EditDate.prototype.setInitValue=function(val){this.setValue(val);this.setAttr(this.VAL_INIT_ATTR,this.getValue());}
EditDate.prototype.setTimeValueStr=function(v){this.m_timeValueStr=v;}
EditDate.prototype.getTimeValueStr=function(){return this.m_timeValueStr;}
EditDate.prototype.setOnValueChange=function(v){Edit.superclass.setOnValueChange.call(this,v);var self=this;this.m_onInputChange=function(){var v=self.getValue();var val_valid=(v&&!isNaN(v.getTime()));if(val_valid&&!self.m_prevValid||!val_valid&&self.m_prevValid)
self.onSelectValue();self.m_prevValid=val_valid;}
if(v){EventHelper.add(this.getNode(),"keyup",this.m_onInputChange);}
else{EventHelper.del(this.getNode(),"keyup",this.m_onInputChange);}}
EditDate.prototype.setButtonNext=function(v){this.m_buttonNext=v;if(this.m_buttonNext&&this.m_buttonNext.setEditControl){this.m_buttonNext.setEditControl(this);}}
EditDate.prototype.getButtonNext=function(){return this.m_buttonNext;}
EditDate.prototype.setButtonPrev=function(v){this.m_buttonPrev=v;if(this.m_buttonPrev&&this.m_buttonPrev.setEditControl){this.m_buttonPrev.setEditControl(this);}}
EditDate.prototype.getButtonPrev=function(){return this.m_buttonPrev;} 
function EditDateTime(id,options){options=options||{};options.validator=options.validator||new ValidatorDateTime(options);options.editMask=options.editMask||window.getApp().getDateTimeEditMask();options.dateFormat=options.dateFormat||window.getApp().getDateTimeFormat();EditDateTime.superclass.constructor.call(this,id,options);}
extend(EditDateTime,EditDate); 
function EditTime(id,options){options=options||{};options.validator=options.validator||new ValidatorTime(options);options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:false;options.editMask=options.editMask||this.DEF_MASK;options.dateFormat=options.dateFormat||window.getApp().getTimeFormat();EditTime.superclass.constructor.call(this,id,options);}
extend(EditTime,EditDateTime);EditTime.prototype.DEF_MASK="99:99";EditTime.prototype.PART_SEP=":";EditTime.prototype.MSEC_PART_SEP=".";EditTime.prototype.toISODate=function(str){if(str=="")return"";var t=str.substr(0,2);if(str.length>2){t+=this.PART_SEP+str.substr(2,2);}
if(str.length>4){t+=this.PART_SEP+str.substr(4,2);}
if(str.length>6){t+=this.MSEC_PART_SEP+str.substr(6);}
return t;} 
function EditInterval(id,options){options=options||{};options.validator=options.validator||new ValidatorInterval(options);options.editMask=options.editMask||this.DEF_EDIT_MASK;EditInterval.superclass.constructor.call(this,id,options);}
extend(EditInterval,EditString);EditInterval.prototype.DEF_EDIT_MASK="99:99:99.9999";EditInterval.prototype.getModified=function(){return(this.getValue()!=this.getInitValue());}
EditInterval.prototype.getValue=function(){return(!this.m_node.value||!this.m_node.value.length)?null:this.m_node.value;}
EditInterval.prototype.getMiliSeconds=function(){return DateHelper.timeToMS(this.getValue());}
EditInterval.prototype.getMinutes=function(){return this.getMiliSeconds()/1000;} 
function EditPassword(id,options){options=options||{};options.cmdClear=(options.cmdClear==undefined)?false:options.cmdClear;EditPassword.superclass.constructor.call(this,id,options);}
extend(EditPassword,EditString);EditPassword.prototype.DEF_INPUT_TYPE="password";EditPassword.prototype.getModified=function(){var v=this.getValue();return(v&&v.length);} 
function EditCheckBox(id,options){options=options||{};options.validator=options.validator||new ValidatorBool(options);options.cmdClear=false;if(options.checked!=undefined){options.value=options.checked;}
var bs_col=window.getBsCol();options.labelClassName=(options.labelClassName!==undefined)?options.labelClassName:(this.DEF_LABEL_CLASS+" "+bs_col+this.DEF_LABEL_COL_WD);options.editContClassName=(options.editContClassName!==undefined)?options.editContClassName:(this.DEF_EDIT_CONT_CLASS+" "+bs_col+this.DEF_EDIT_CONT_COL_WD);EditCheckBox.superclass.constructor.call(this,id,options);}
extend(EditCheckBox,Edit);EditCheckBox.prototype.DEF_INPUT_TYPE="checkbox";EditCheckBox.prototype.DEF_LABEL_CLASS="control-label";EditCheckBox.prototype.DEF_LABEL_COL_WD="11";EditCheckBox.prototype.DEF_EDIT_CONT_COL_WD="1";EditCheckBox.prototype.setChecked=function(checked){this.m_node.checked=checked;if(this.m_eventFuncs&&this.m_eventFuncs.change){this.m_eventFuncs.change();}}
EditCheckBox.prototype.getChecked=function(){return this.m_node.checked;}
EditCheckBox.prototype.getValue=function(){return this.getChecked();}
EditCheckBox.prototype.setValue=function(val){this.setChecked(this.getValidator().correctValue(val));}
EditCheckBox.prototype.switchValue=function(){this.setValue(!this.getValue());}
EditCheckBox.prototype.getInitValue=function(val){return(this.getAttr(this.VAL_INIT_ATTR)=="true");} 
function EditSwitcher(id,options){options=options||{};if(options.checked===true||options.value===true){options.value="checked";}else{options.value=undefined;}
options.switchAlign=options.switchAlign||this.DEF_SWITCH_ALIGN;options.switchSize=options.switchSize||this.DEF_SWITCH_SIZE;let labelClassName=(options.labelClassName!==undefined)?options.labelClassName:this.DEF_LABEl_CLASS.replace("{{ALIGN}}",options.switchAlign).replace("{{SIZE}}",options.switchSize);options.templateOptions=options.templateOptions||{};options.templateOptions.LABEL_CAPTION=options.labelCaption;options.templateOptions.CHECKED=options.value;options.templateOptions.LABEL_CLASS_NAME=labelClassName;options.templateOptions.CONT_CLASS_NAME=options.contClassName!=undefined?options.contClassName:this.DEF_CONT_CLASS;options.templateOptions.TITLE=options.title;options.templateOptions.CLASS_NAME=options.className||this.DEF_CLASS;this.m_switchColor=options.switchColor||this.DEF_SWITCH_COLOR;EditSwitcher.superclass.constructor.call(this,id,"INPUT",options);}
extend(EditSwitcher,Control);EditSwitcher.prototype.DEF_SWITCH_ALIGN="right";EditSwitcher.prototype.DEF_SWITCH_SIZE="xl";EditSwitcher.prototype.DEF_CONT_CLASS="form-group";EditSwitcher.prototype.DEF_CLASS="switcher";EditSwitcher.prototype.DEF_LABEl_CLASS="checkbox-inline checkbox-switchery checkbox-{{ALIGN}} switchery-{{SIZE}}";EditSwitcher.prototype.DEF_TAG_NAME="DIV";EditSwitcher.prototype.VAL_INIT_ATTR="initValue";EditSwitcher.prototype.DEF_SWITCH_COLOR="#2196F3";EditSwitcher.prototype.setTitle=function(val){document.getElementById(this.getId()+":cont").setAttribute("title",val);}
EditSwitcher.prototype.setAttr=function(attrName,attrVal){EditSwitcher.superclass.setAttr.call(this,attrName,attrVal);}
EditSwitcher.prototype.toDOM=function(parent){EditSwitcher.superclass.toDOM.call(this,parent);let id=this.getId();let contNode=document.getElementById(id);let inputs=DOMHelper.getElementsByAttr("switcher",contNode,"class",true,"input");if(!inputs||!inputs.length){throw new Error("input with switcher class not found for id:"+this.getId());}
this.m_node=inputs[0];let nodeName;let idParts=id.split(Control.prototype.NAMESPACE_SEP);if(idParts.length){nodeName=idParts[idParts.length-1];}else{nodeName=id;}
this.m_node.setAttribute("name",nodeName);this.m_switcher=new Switchery(this.m_node,{"color":this.m_switchColor,"checked":false});}
EditSwitcher.prototype.reset=function(){this.setValue(false);this.focus();if(this.m_onReset){this.m_onReset();}}
EditSwitcher.prototype.isNull=function(){return false;}
EditSwitcher.prototype.getModified=function(){return(this.getValue()!=this.getInitValue());}
EditSwitcher.prototype.getIsRef=function(){return false;}
EditSwitcher.prototype.getValue=function(){return this.m_node.checked;}
EditSwitcher.prototype.setValue=function(val){if(this.m_switcher){this.m_node.checked=!val;this.m_switcher.setPosition(true);if(this.m_eventFuncs&&this.m_eventFuncs.change){this.m_eventFuncs.change();}}}
EditSwitcher.prototype.setInitValue=function(val){this.setValue(val);this.setAttr(this.VAL_INIT_ATTR,val);}
EditSwitcher.prototype.getInitValue=function(){return this.getAttr(this.VAL_INIT_ATTR);}
EditSwitcher.prototype.switchValue=function(){this.setValue(!this.getValue());}
EditSwitcher.prototype.setValid=function(v){}
EditSwitcher.prototype.setNotValid=function(){}
EditSwitcher.prototype.getValid=function(){return true;} 
function EditContainer(id,options){options=options||{};if(!options.optionClass){throw Error(this.ER_NO_OPT_CLASS);}
if(!options.tagName){throw Error(this.ER_NO_TAG);}
var n=CommonHelper.nd(id,this.getWinObjDocument());if(n){n.id=n.id+":cont";}
if(options.inline===true){options.contClassName="";options.editContClassName="";options.className="";options.btnContClassName="";options.contTagName="SPAN";options.editContTagName="SPAN";}
options.className=(options.className!==undefined)?options.className:this.DEF_CLASS;this.setValidator(options.validator||new ValidatorString(options));this.setButtonOpen(options.buttonOpen);this.setButtonSelect(options.buttonSelect);this.setButtonClear(options.buttonClear);this.setBtnContClassName((options.btnContClassName!=undefined)?options.btnContClassName:this.BTNS_CONTAINER_CLASS);var btn_opt="button";for(opt in options){if(opt.substring(0,btn_opt.length)==btn_opt&&opt.length>btn_opt.length){this.addButtonContainer();break;}}
options.elements=options.elements||[];this.setAddNotSelected((options.addNotSelected!=undefined)?options.addNotSelected:true);this.setNotSelectedLast((options.notSelectedLast!=undefined)?options.notSelectedLast:false);this.setOptionClass(options.optionClass);this.setOnSelect(options.onSelect);this.m_initValue=options.value;if(this.m_initValue&&this.m_initValue.getKeys&&!this.m_initValue.isNull()){options.attrs=options.attrs||{};options.attrs.keys=CommonHelper.serialize(this.m_initValue.getKeys());}
options.value=undefined;var opt_selected=false;if(this.m_addNotSelected){var def_opt_opts={"value":this.NOT_SELECTED_VAL,"descr":this.NOT_SELECTED_DESCR};}
if(options.options){for(var i=0;i<options.options.length;i++){if(options.options[i]!=undefined&&options.options[i].checked==true){opt_selected=true;break;}}}
var opt_ind=0;if(this.m_addNotSelected&&!this.m_notSelectedLast){if(!opt_selected){opt_selected.checked=true;}
options.elements.push(new options.optionClass(id+":"+opt_ind,def_opt_opts));opt_ind++;}
if(options.options){for(var i=0;i<options.options.length;i++){options.elements.push(new options.optionClass(id+":"+opt_ind,options.options[i]))
opt_ind++;}}
if(this.m_addNotSelected&&this.m_notSelectedLast){if(!opt_selected){opt_selected.checked=true;}
options.elements.push(new options.optionClass(id+":"+opt_ind,def_opt_opts));}
EditContainer.superclass.constructor.call(this,id,options.tagName,options);if(options.label){this.setLabel(options.label);}
else if(options.labelCaption){this.setLabel(new Label(id+":label",{"value":options.labelCaption,"className":options.labelClassName,"visible":this.getVisible()}));}
this.setContClassName((options.contClassName!==undefined)?options.contClassName:this.DEF_CONT_CLASS);this.setContTagName(options.contTagName||this.DEF_CONT_TAG);this.setEditContClassName((options.editContClassName!==undefined)?options.editContClassName:(this.DEF_EDIT_CONT_CLASS+" "+window.getBsCol(8)));this.setEditContTagName(options.editContTagName||this.DEF_EDIT_CONT_TAG);this.setErrorControl(options.errorControl||new ErrorControl(id+":error"));this.setOnReset(options.onReset);}
extend(EditContainer,ControlContainer);EditContainer.prototype.m_label;EditContainer.prototype.m_buttons;EditContainer.prototype.m_errorControl;EditContainer.prototype.m_editContainer;EditContainer.prototype.m_container;EditContainer.prototype.m_addNotSelected;EditContainer.prototype.m_notSelectedLast;EditContainer.prototype.m_optionClass;EditContainer.prototype.m_formatFunction;EditContainer.prototype.m_initValue;EditContainer.prototype.m_buttonOpen;EditContainer.prototype.m_buttonSelect;EditContainer.prototype.m_buttonClear;EditContainer.prototype.m_btnContClassName;EditContainer.prototype.DEF_CONT_TAG="DIV";EditContainer.prototype.DEF_EDIT_CONT_TAG="DIV";EditContainer.prototype.DEF_CLASS="form-control";EditContainer.prototype.DEF_CONT_CLASS="form-group";EditContainer.prototype.BTNS_CONTAINER_CLASS="input-group-btn";EditContainer.prototype.INCORRECT_VAL_CLASS="error";EditContainer.prototype.DEF_EDIT_CONT_CLASS="input-group";EditContainer.prototype.VAL_INIT_ATTR="initValue";EditContainer.prototype.NOT_SELECTED_VAL="null";EditContainer.prototype.BTNS_CONTAINER_CLASS="input-group-btn";EditContainer.prototype.addButtonContainer=function(){this.m_buttons=new ControlContainer(this.getId()+":btn-cont","SPAN",{"className":this.m_btnContClassName,"enabled":this.getEnabled()});this.addButtonControls();}
EditContainer.prototype.addButtonControls=function(){if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);}
EditContainer.prototype.addOption=function(opt){this.addElement(opt);}
EditContainer.prototype.getIndex=function(){if(this.m_node.options&&this.m_node.options.length){return this.m_node.selectedIndex;}}
EditContainer.prototype.setIndex=function(ind){if(this.m_node.options&&this.m_node.options.length>ind){this.m_node.selectedIndex=ind;this.valueChanged();}}
EditContainer.prototype.getOption=function(){var i=this.getIndex();if(i>=0){return this.getElementByIndex(i);}}
EditContainer.prototype.setValue=function(val){this.setAttr("value",val);}
EditContainer.prototype.getValue=function(){var v=EditContainer.superclass.getValue.call(this);if(v==this.NOT_SELECTED_VAL){v=null;}
return v;}
EditContainer.prototype.setInitValue=function(val){this.setAttr(this.VAL_INIT_ATTR,val);this.setValue(val);}
EditContainer.prototype.getInitValue=function(){var v=this.getAttr(this.VAL_INIT_ATTR);if(v==this.NOT_SELECTED_VAL){v=null;}
return v;}
EditContainer.prototype.setLabel=function(label){this.m_label=label;}
EditContainer.prototype.getLabel=function(){return this.m_label;}
EditContainer.prototype.setValidator=function(v){this.m_validator=v;}
EditContainer.prototype.getValidator=function(){return this.m_validator;}
EditContainer.prototype.getButtons=function(){return this.m_buttons;}
EditContainer.prototype.setNotValid=function(erStr){DOMHelper.addClass(this.m_node,this.INCORRECT_VAL_CLASS);this.getErrorControl().setValue(erStr);}
EditContainer.prototype.setValid=function(){DOMHelper.delClass(this.m_node,this.INCORRECT_VAL_CLASS);if(this.getErrorControl())this.getErrorControl().clear();}
EditContainer.prototype.toDOM=function(parent){var id=this.getId();this.m_container=new ControlContainer((id?id+":cont":null),this.m_contTagName,{"className":this.m_contClassName,"visible":this.getVisible()});if(this.m_label){this.m_container.addElement(this.m_label);}
this.m_editContainer=new Control((id?id+":edit-cont":null),this.m_editContTagName,{"className":this.m_editContClassName});this.m_container.addElement(this.m_editContainer);this.m_container.toDOM(parent);EditContainer.superclass.toDOM.call(this,this.m_editContainer.getNode());this.m_errorControl=new ErrorControl(id?id+":error":null);this.m_errorControl.toDOM(this.m_editContainer.getNode());if(this.m_buttons&&!this.m_buttons.isEmpty()){this.m_buttons.toDOMAfter(this.getNode());}}
EditContainer.prototype.delDOM=function(){EditContainer.superclass.delDOM.call(this);if(this.m_buttons){this.m_buttons.delDOM();}
if(this.m_errorControl){this.m_errorControl.delDOM();}
if(this.m_editContainer){this.m_editContainer.delDOM();}
if(this.m_container){this.m_container.delDOM();}}
EditContainer.prototype.setVisible=function(visible){if(this.m_container){this.m_container.setVisible(visible);}
if(this.m_edit_container){this.m_edit_container.setVisible(visible);}
if(this.m_label){this.m_label.setVisible(visible);}
if(this.m_buttons){this.m_buttons.setVisible(visible);}
EditContainer.superclass.setVisible.call(this,visible);}
EditContainer.prototype.setEnabled=function(enabled){if(this.m_buttons){this.m_buttons.setEnabled(enabled);}
EditContainer.superclass.setEnabled.call(this,enabled);}
EditContainer.prototype.reset=function(){var i=0;if(this.getNotSelectedLast()){i=this.getCount()-1;}
this.setIndex(i);if(this.m_onReset)this.m_onReset();}
EditContainer.prototype.isNull=function(){var v=this.getValue();return(!v||v==this.NOT_SELECTED_VAL);}
EditContainer.prototype.getModified=function(){return(this.getValue()!=this.getInitValue());}
EditContainer.prototype.clear=function(){for(var id in this.m_elements){DOMHelper.delNode(this.m_elements[id].m_node);}
this.m_elements={};}
EditContainer.prototype.getAddNotSelected=function(){return this.m_addNotSelected;}
EditContainer.prototype.setAddNotSelected=function(v){this.m_addNotSelected=v;}
EditContainer.prototype.getNotSelectedLast=function(){return this.m_notSelectedLast;}
EditContainer.prototype.setNotSelectedLast=function(v){this.m_notSelectedLast=v;}
EditContainer.prototype.getOptionClass=function(){return this.m_optionClass;}
EditContainer.prototype.setOptionClass=function(v){this.m_optionClass=v;}
EditContainer.prototype.getIsRef=function(){return false;}
EditContainer.prototype.getFormatFunction=function(){return this.m_formatFunction;}
EditContainer.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
EditContainer.prototype.getContTagName=function(){return this.m_contTagName;}
EditContainer.prototype.setContTagName=function(v){this.m_contTagName=v;}
EditContainer.prototype.getContClassName=function(){return this.m_contClassName;}
EditContainer.prototype.setContClassName=function(v){this.m_contClassName=v;}
EditContainer.prototype.getEditContClassName=function(){return this.m_editContClassName;}
EditContainer.prototype.setEditContClassName=function(v){this.m_editContClassName=v;}
EditContainer.prototype.getEditContTagName=function(){return this.m_editContTagName;}
EditContainer.prototype.setEditContTagName=function(v){this.m_editContTagName=v;}
EditContainer.prototype.getOnSelect=function(){return this.m_onSelect;}
EditContainer.prototype.setOnSelect=function(v){this.m_onSelect=v;}
EditContainer.prototype.getInputEnabled=function(){return this.getEnabled();}
EditContainer.prototype.setInputEnabled=function(v){this.setEnabled(v);}
EditContainer.prototype.valueChanged=function(){}
EditContainer.prototype.setButtonOpen=function(v){this.m_buttonOpen=v;if(this.m_buttonOpen&&this.m_buttonOpen.setEditControl){this.m_buttonOpen.setEditControl(this);}}
EditContainer.prototype.getButtonOpen=function(){return this.m_buttonOpen;}
EditContainer.prototype.setButtonClear=function(v){this.m_buttonClear=v;if(this.m_buttonClear&&this.m_buttonClear.setEditControl){this.m_buttonClear.setEditControl(this);}}
EditContainer.prototype.getButtonClear=function(){return this.m_buttonClear;}
EditContainer.prototype.setButtonSelect=function(v){this.m_buttonSelect=v;if(this.m_buttonSelect&&this.m_buttonSelect.setEditControl){this.m_buttonSelect.setEditControl(this);}}
EditContainer.prototype.getButtonSelect=function(){return this.m_buttonSelect;}
EditContainer.prototype.getButtons=function(){return this.m_buttons;}
EditContainer.prototype.getErrorControl=function(){return this.m_errorControl;}
EditContainer.prototype.setErrorControl=function(v){this.m_errorControl=v;}
EditContainer.prototype.setBtnContClassName=function(v){this.m_btnContClassName=v;}
EditContainer.prototype.getBtnContClassName=function(){return this.m_btnContClassName;}
EditContainer.prototype.setOnReset=function(v){this.m_onReset=v;}
EditContainer.prototype.getOnReset=function(){return this.m_onReset;}
EditContainer.prototype.validate=function(){var res=true;if(this.m_validator){try{this.setValid();var v=this.getValue();this.m_validator.validate(v);}
catch(e){this.setNotValid(e.message);res=false;}}
return res;} 
EditContainer.prototype.ER_NO_OPT_CLASS="Класс опций не задан.";EditContainer.prototype.ER_NO_TAG="Имя узла не задано";EditContainer.prototype.NOT_SELECTED_DESCR="<не выбрано>"; 
function EditRadioGroup(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;options.optionClass=options.optionClass||EditRadio;options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:false;options.className=options.className||"row";EditRadioGroup.superclass.constructor.call(this,id,options);}
extend(EditRadioGroup,EditContainer);EditRadioGroup.prototype.m_label;EditRadioGroup.prototype.DEF_TAG_NAME="div";EditRadioGroup.prototype.addElement=function(ctrl){this.setElement(ctrl.getId(),ctrl);}
EditRadioGroup.prototype.getIndex=function(){var i=0;for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"&&this.m_elements[elem_id].m_node.checked){return i;}}}
EditRadioGroup.prototype.setValue=function(id){for(var elem_id in this.m_elements){this.m_elements[elem_id].getNode().checked=(this.m_elements[elem_id].getNode().value==id);}}
EditRadioGroup.prototype.setValueByIndex=function(ind){var i=0;for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"){this.m_elements[elem_id].m_node.checked=(i==ind);i++;}}}
EditRadioGroup.prototype.getValue=function(){var res=null;for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"&&this.m_elements[elem_id].m_node.checked){res=this.m_elements[elem_id].m_node.value;break;}}
return res;}
EditRadioGroup.prototype.getValueDescr=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"&&this.m_elements[elem_id].m_node.checked){return this.m_elements[elem_id].m_node.nodeValue;}}} 
function EditRadio(id,options){options=options||{};options.type=options.type||"radio";options.cmdClear=false;var bs_col=window.getApp().getBsCol();options.labelClassName=(options.labelClassName!=undefined)?options.labelClassName:("control-label "+(bs_col+"11"));options.editContClassName=(options.editContClassName!=undefined)?options.editContClassName:("input-group "+bs_col+"1");EditRadio.superclass.constructor.call(this,id,options);if(options.value&&CommonHelper.isIE()){this.m_node.value=options.value;}
if(options.checked){this.setChecked(options.checked);}}
extend(EditRadio,EditString);EditRadio.prototype.ATTR_DISABLED="disabled";EditRadio.prototype.setChecked=function(checked){this.m_node.checked=checked;}
EditRadio.prototype.getChecked=function(){return this.m_node.checked;} 
function EditSelect(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;options.optionClass=options.optionClass||EditSelectOption;options.events=options.events||{};this.m_origOnChange=options.events.change;var self=this;options.events.change=function(){self.callOnSelect();if(self.m_origOnChange)self.m_origOnChange();}
this.m_initValue=options.value;EditSelect.superclass.constructor.call(this,id,options);if(this.m_initValue){this.setValue(this.m_initValue);}}
extend(EditSelect,EditContainer);EditSelect.prototype.DEF_TAG_NAME="select";EditSelect.prototype.selectOptionById=function(optId){this.m_elements[optId].getNode().selected=true;}
EditSelect.prototype.getIndex=function(){if(this.m_node.options&&this.m_node.options.length){return this.m_node.selectedIndex;}}
EditSelect.prototype.setValue=function(val){if(val==null)val=this.NOT_SELECTED_VAL;EditSelect.superclass.setValue.call(this,val);for(var id in this.m_elements){if(this.m_elements[id].getValue()==val){this.selectOptionById(id);break;}}}
EditSelect.prototype.setIndex=function(ind){EditSelect.superclass.setIndex.call(this,ind);var i=0;for(var id in this.m_elements){if(i==ind){this.selectOptionById(id);break;}
i++;}}
EditSelect.prototype.getValue=function(){var v;if(this.getIndex()>=0){var el=this.getElement(this.getIndex());if(el){v=el.getValue();}
else{v=this.getNode().options[this.m_node.selectedIndex].value;}}
else{v=this.getAttr("value");}
return(!v||v==this.NOT_SELECTED_VAL)?null:v;}
EditSelect.prototype.callOnSelect=function(){if(this.getOnSelect()){this.getOnSelect().call(this);}}
EditSelect.prototype.setEnabled=function(v){if(v){DOMHelper.delAttr(this.getNode(),this.ATTR_DISABLED);}
else{DOMHelper.setAttr(this.getNode(),this.ATTR_DISABLED,this.ATTR_DISABLED);}} 
function EditSelectRef(id,options){options=options||{};options.optionClass=options.optionClass||EditSelectOptionRef;this.setModel(options.model);this.setReadPublicMethod(options.readPublicMethod);this.setCashable((options.cashable!=undefined)?options.cashable:true);this.setKeyIds(options.keyIds);this.setModelKeyFields(options.modelKeyFields);this.setModelKeyIds(options.modelKeyIds);this.setModelDescrFields(options.modelDescrFields);this.setModelDescrIds(options.modelDescrIds);this.setModelDescrFormatFunction(options.modelDescrFormatFunction);this.setDependBaseControl(options.dependBaseControl);this.setDependBaseFieldIds(options.dependBaseFieldIds);this.setDependFieldIds(options.dependFieldIds);this.setAutoRefresh((options.autoRefresh!=undefined)?options.autoRefresh:true);this.m_cashId=options.cashId;this.m_asyncRefresh=(options.asyncRefresh!=undefined)?options.asyncRefresh:true;if(options.value&&typeof(options.value)!="object"&&options.keyIds&&options.keyIds.length){var k_vals={};for(i=0;i<options.keyIds.length;i++){k_vals[options.keyIds[i]]=(i==0)?options.value:null;}
options.value=new RefType({"keys":k_vals});}
if(options.value&&typeof options.value=="object"&&options.value.getKeys){this.m_setKeys=options.value.getKeys();}else if(options.value&&typeof options.value=="object"&&options.value.m_keys){this.m_setKeys=options.value.m_keys;}
EditSelectRef.superclass.constructor.call(this,id,options);if(options.modelDataStr&&this.m_model){if(this.getCashable()){window.getApp().setCashData(this.getCashId(),options.modelDataStr);}
this.m_model.setData(options.modelDataStr);}}
extend(EditSelectRef,EditSelect);EditSelectRef.prototype.m_oldEnabled;EditSelectRef.prototype.m_cashable;EditSelectRef.prototype.m_readPublicMethod;EditSelectRef.prototype.m_model;EditSelectRef.prototype.m_keyIds;EditSelectRef.prototype.m_modelKeyFields;EditSelectRef.prototype.m_modelKeyIds;EditSelectRef.prototype.m_modelDescrFields;EditSelectRef.prototype.m_modelDescrIds;EditSelectRef.prototype.m_modelDescrFormatFunction;EditSelectRef.prototype.m_dependBaseControl;EditSelectRef.prototype.m_dependBaseFieldIds;EditSelectRef.prototype.m_dependFieldIds;EditSelectRef.prototype.m_dependControl;EditSelectRef.prototype.m_setKeys;EditSelectRef.prototype.KEY_ATTR="keys";EditSelectRef.prototype.KEY_INIT_ATTR="initKeys";EditSelectRef.prototype.keys2Str=function(keys){return CommonHelper.serialize(keys);}
EditSelectRef.prototype.str2Keys=function(str){return CommonHelper.unserialize(str);}
EditSelectRef.prototype.setKeys=function(keys){if(!CommonHelper.isEmpty(keys)){this.m_keyIds=[];for(var keyid in keys){this.m_keyIds.push(keyid);}}
else if(!this.m_keyIds){this.m_keyIds=[];}
this.setAttr(this.KEY_ATTR,this.keys2Str(keys));if(this.getDependControl()){this.getDependControl().dependOnSelectBase(this.getModelRow());}
if(this.m_onValueChange){this.m_onValueChange.call(this);}}
EditSelectRef.prototype.getKeyIds=function(){return this.m_keyIds;}
EditSelectRef.prototype.setKeyIds=function(v){this.m_keyIds=v;}
EditSelectRef.prototype.getKeys=function(){return this.str2Keys(this.getAttr(this.KEY_ATTR));}
EditSelectRef.prototype.setInitKeys=function(keys){this.setAttr(this.KEY_INIT_ATTR,this.keys2Str(keys));}
EditSelectRef.prototype.getInitKeys=function(){return this.str2Keys(this.getAttr(this.KEY_INIT_ATTR));}
EditSelectRef.prototype.getModified=function(){return(this.getAttr(this.KEY_ATTR)!=this.getAttr(this.KEY_INIT_ATTR));}
EditSelectRef.prototype.getIsRef=function(){return true;}
EditSelectRef.prototype.resetKeys=function(){this.setKeys({});}
EditSelectRef.prototype.reset=function(){EditSelectRef.superclass.reset.call(this);this.resetKeys();}
EditSelectRef.prototype.setValue=function(val){if(typeof val=="string"&&val.substring(0,1)=="{"&&val.substring(val.length-1)=="}"){val=CommonHelper.unserialize(val);}
if(val!=null&&typeof val=="object"&&((val.getKeys&&val.getDescr)||(val.keys&&val.descr)||(val.m_keys&&val.m_descr))){val=val.getKeys?val.getKeys():(val.keys?val.keys:val.m_keys);if(!this.m_keyIds){this.m_keyIds=[];for(var keyid in val){this.m_keyIds.push(keyid);}}}
else{if(!this.getModelKeyFields()){this.defineModelKeyFieds();}
val_str=(val!=null)?val.toString():null;val={};val[this.getModelKeyFields()[0].getId()]=val_str;}
if(!val){return;}
var rec_found;for(var id in this.m_elements){var v=this.m_elements[id].getValue();rec_found=false;for(var vk in v){rec_found=(v[vk]==val[vk]);if(!rec_found){break;}}
if(rec_found){this.selectOptionById(id);break;}}
this.m_setKeys=val;}
EditSelectRef.prototype.selectOptionById=function(optId){EditSelectRef.superclass.selectOptionById.call(this,optId);this.callOnSelect();}
EditSelectRef.prototype.getValue=function(){var ind=this.getIndex();var res=null;if((this.getAddNotSelected()&&!this.getNotSelectedLast()&&ind)||(this.getAddNotSelected()&&this.getNotSelectedLast()&&ind!=(this.getCount()-1))||!this.getAddNotSelected()){var elem=this.getElement(ind);res=!elem?null:new RefType({"keys":this.getKeys(),"descr":elem.getDescr()});}
return res;}
EditSelectRef.prototype.getFormattedValue=function(){var v=this.getValue();if(v&&typeof(v)=="object"&&v.getFormattedValue){v=v.getFormattedValue();}
return v;}
EditSelectRef.prototype.setInitValue=function(val){this.setValue(val);if(val&&typeof val=="object"&&val.getKeys){this.setInitKeys(val.getKeys());}else if(val&&typeof val=="object"&&val.keys){this.setInitKeys(val.keys);}}
EditSelectRef.prototype.getInitValue=function(){return this.getInitKeys();}
EditSelectRef.prototype.setCashable=function(v){this.m_cashable=v;if(window.getApp().getAppSrv()){if(v){var self=this;var pm=this.getReadPublicMethod();if(!pm)return;var contr=pm.getController();if(!contr)return;var ev_pref=window.getApp().getEventPrefOnController(contr);if(!ev_pref)return;this.subscribeToSrvEvents({"events":[{"id":ev_pref+".update"},{"id":ev_pref+".insert"},{"id":ev_pref+".delete"}],"onEvent":function(json){window.getApp().setCashData(self.getCashId(),null);self.onRefresh();},"onClose":function(message){if(message&&message.code>1000){}}});}else{this.unsubscribeFromSrvEvents();}}}
EditSelectRef.prototype.getCashable=function(){return this.m_cashable;}
EditSelectRef.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
EditSelectRef.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
EditSelectRef.prototype.defineModelKeyFieds=function(){if(this.getModelKeyIds()){var key_fields=[];var ids=this.getModelKeyIds();for(var i=0;i<ids.length;i++){if(this.m_model.fieldExists(ids[i])){key_fields.push(this.m_model.getField(ids[i]));}}
this.setModelKeyFields(key_fields);}
else{var key_fields=[];var fields=this.m_model.getFields();for(var id in fields){if(fields[id].getPrimaryKey()){key_fields.push(fields[id]);}}
this.setModelKeyFields(key_fields);}}
EditSelectRef.prototype.defineModelDescrFieds=function(){if(this.getModelDescrIds()){var key_fields=[];var ids=this.getModelDescrIds();for(var i=0;i<ids.length;i++){if(this.m_model.fieldExists(ids[i])){key_fields.push(this.m_model.getField(ids[i]));}}
this.setModelDescrFields(key_fields);}}
EditSelectRef.prototype.setModel=function(v){this.m_model=v;this.setModelKeyFields(undefined);this.setModelDescrFields(undefined);this.defineModelKeyFieds();this.defineModelDescrFieds();}
EditSelectRef.prototype.getModel=function(){return this.m_model;}
EditSelectRef.prototype.getModelKeyIds=function(){return this.m_modelKeyIds;}
EditSelectRef.prototype.setModelKeyIds=function(v){this.m_modelKeyIds=v;}
EditSelectRef.prototype.getModelKeyFields=function(){return this.m_modelKeyFields;}
EditSelectRef.prototype.setModelKeyFields=function(v){this.m_modelKeyFields=v;}
EditSelectRef.prototype.getModelDescrIds=function(){return this.m_modelDescrIds;}
EditSelectRef.prototype.setModelDescrIds=function(v){this.m_modelDescrIds=v;}
EditSelectRef.prototype.getModelDescrFields=function(){return this.m_modelDescrFields;}
EditSelectRef.prototype.setModelDescrFields=function(v){this.m_modelDescrFields=v;}
EditSelectRef.prototype.getModelDescrFormatFunction=function(){return this.m_modelDescrFormatFunction;}
EditSelectRef.prototype.setModelDescrFormatFunction=function(v){this.m_modelDescrFormatFunction=v;}
EditSelectRef.prototype.toDOM=function(parent){EditSelectRef.superclass.toDOM.call(this,parent);this.onRefresh();}
EditSelectRef.prototype.onGetData=function(resp){var nm=this.getName();if(!this.m_model){return;}
if(resp){var m_data=resp.getModelData(this.m_model.getId());this.m_model.setData(m_data);if(this.getCashable()){window.getApp().setCashData(this.getCashId(),m_data);}}
var old_keys;if(this.m_setKeys){old_keys=this.m_setKeys;this.m_setKeys=undefined;}
else{old_keys=this.getKeys();}
if(!this.getModelKeyFields()){this.defineModelKeyFieds();if(!this.getModelKeyFields()){throw Error(CommonHelper.format(this.ER_NO_LOOKUP,Array(this.getName())));}}
if(!this.getModelDescrFormatFunction()&&!this.getModelDescrFields()){this.defineModelDescrFieds();if(!this.getModelDescrFields()){this.m_modelDescrFields=[];var fields=this.m_model.getFields();var fields=this.m_model.getFields();for(var id in fields){if(!fields[id].getPrimaryKey()){this.m_modelDescrFields.push(fields[id]);}}}
if(!this.getModelKeyFields()){this.setModelDescrFields(this.getModelKeyFields());}}
this.clear();var opt_class=this.getOptionClass();if(this.getAddNotSelected()){var val={};for(var i=0;i<this.m_modelKeyFields.length;i++){val[this.m_modelKeyFields[i].getId()]=this.NOT_SELECTED_VAL;}
var def_opt_opts={"value":val,"descr":this.NOT_SELECTED_DESCR};}
var opt_ind=0;if(this.getAddNotSelected()&&!this.getNotSelectedLast()){this.addElement(new opt_class(this.getId()+":"+opt_ind,def_opt_opts));opt_ind++;}
var opt_checked=false;var ind=0;while(this.m_model.getNextRow()){var opt_key_val={};var key_v,key_id;var cur_opt_checked=false;for(var i=0;i<this.m_modelKeyFields.length;i++){key_v=this.m_modelKeyFields[i].getValue();key_id=this.m_modelKeyFields[i].getId();opt_key_val[key_id]=key_v;if(this.m_modelKeyFields.length==1&&!opt_checked&&old_keys&&old_keys[key_id]&&old_keys[key_id]==key_v){opt_checked=true;cur_opt_checked=true;}}
if(old_keys&&this.m_modelKeyFields.length>1&&!opt_checked){var all_keys_matched=true;for(var key_id in opt_key_val){if(!old_keys[key_id]||old_keys[key_id]!=opt_key_val[key_id]){all_keys_matched=false;break;}}
if(all_keys_matched){opt_checked=true;cur_opt_checked=true;}}
if(cur_opt_checked){this.setAttr(this.KEY_ATTR,this.keys2Str(opt_key_val));}
var descr_val="";var form_f=this.getModelDescrFormatFunction();if(form_f){descr_val=form_f.call(this,this.m_model.getFields());}
else{for(var i=0;i<this.m_modelDescrFields.length;i++){var descr_v=this.m_modelDescrFields[i].getValue();if(descr_v&&descr_v.length){descr_val+=(descr_val=="")?"":" ";descr_val+=this.m_modelDescrFields[i].getValue();}}}
this.addElement(new opt_class(this.getId()+":"+opt_ind,{"checked":cur_opt_checked,"value":opt_key_val,"descr":descr_val,"attrs":{"modelIndex":ind}}));ind++;opt_ind++;}
if(this.getAddNotSelected()&&this.getNotSelectedLast()){if(!opt_checked){def_opt_opts.checked=true;opt_checked=true;}
this.addElement(new opt_class(this.getId()+":"+opt_ind,def_opt_opts));}
for(var elem_id in this.m_elements){this.m_elements[elem_id].toDOM(this.m_node);}
if(!opt_checked&&this.getCount()){this.setIndex(0);}}
EditSelectRef.prototype.getCashId=function(){return this.m_model.getId()+((this.m_cashId!=undefined)?"_"+this.m_cashId:"");}
EditSelectRef.prototype.onRefresh=function(){if(this.getCashable()&&this.m_model){var cash=window.getApp().getCashData(this.getCashId());if(cash){this.m_model.setData(cash);this.onGetData();return;}}
var self=this;this.getReadPublicMethod().run({"async":this.m_asyncRefresh,"ok":function(resp){self.onGetData(resp);},"fail":function(resp,erCode,erStr){self.getErrorControl().setValue(window.getApp().formatError(erCode,erStr));}});}
EditSelectRef.prototype.callOnSelect=function(){var i=this.getIndex();if(i==undefined)return;var model_keys=this.getElement(i).getValue();var key_ids=this.getKeyIds();var keys={};var i=0;for(id in model_keys){keys[key_ids[i]]=model_keys[id];i++;}
this.setKeys(keys);if(this.getOnSelect()){this.m_onSelect.call(this,this.getModelRow());}}
EditSelectRef.prototype.getModelRow=function(){var ind;if(this.getIndex()>=0){ind=this.getNode().options[this.m_node.selectedIndex].getAttribute("modelIndex");}
if(ind!=undefined&&ind>=0){this.m_model.getRow(ind);}
else{this.m_model.reset();}
return this.m_model.getFields();}
EditSelectRef.prototype.setAutoRefresh=function(autoRefresh){this.m_autoRefresh=autoRefresh;}
EditSelectRef.prototype.getAutoRefresh=function(){return this.m_autoRefresh;}
EditSelectRef.prototype.setDependBaseControl=function(v){this.m_dependBaseControl=v;if(this.m_dependBaseControl&&this.m_dependBaseControl.setDependentControl){this.setDependentControl(this);}}
EditSelectRef.prototype.getDependBaseControl=function(){return this.m_dependBaseControl;}
EditSelectRef.prototype.setDependBaseFieldIds=function(v){this.m_dependBaseFieldIds=v;}
EditSelectRef.prototype.getDependBaseFieldIds=function(){return this.m_dependBaseFieldIds;}
EditSelectRef.prototype.setDependFieldIds=function(v){this.m_dependFieldIds=v;}
EditSelectRef.prototype.getDependFieldIds=function(){return this.m_dependFieldIds;}
EditSelectRef.prototype.setDependControl=function(v){this.m_dependControl=v;}
EditSelectRef.prototype.getDependControl=function(){return this.m_dependControl;}
EditSelectRef.prototype.dependOnSelectBase=function(baseModelRow){var pm=this.getReadPublicMethod();if(!pm)return;var contr=pm.getController();var cond_fields,cond_sgns,cond_vals;var cond_keys=this.getDependFieldIds();var base_keys=this.getDependBaseFieldIds();var ind=-1;for(var fid in baseModelRow){var cond_key=undefined;if(!base_keys&&baseModelRow[fid].getPrimaryKey()){ind++;cond_key=cond_keys[ind];}
else if(base_keys){for(ind=0;ind<base_keys.length;ind++){if(base_keys[ind]==fid){cond_key=cond_keys[ind];break;}}}
if(cond_key){cond_fields=((cond_fields==undefined)?"":(cond_fields+contr.PARAM_FIELD_SEP_VAL))+cond_key;cond_sgns=((cond_sgns==undefined)?"":(cond_sgns+contr.PARAM_FIELD_SEP_VAL))+contr.PARAM_SGN_EQUAL;cond_vals=((cond_vals==undefined)?"":(cond_vals+contr.PARAM_FIELD_SEP_VAL))+baseModelRow[fid].getValue();}}
pm.setFieldValue(contr.PARAM_COND_FIELDS,cond_fields);pm.setFieldValue(contr.PARAM_COND_SGNS,cond_sgns);pm.setFieldValue(contr.PARAM_COND_VALS,cond_vals);pm.setFieldValue(contr.PARAM_FIELD_SEP,contr.PARAM_FIELD_SEP_VAL);this.onRefresh();} 
EditSelectRef.prototype.ER_TYPE_NOT_FOUND="Котрол %, не задано ключевое поле.";EditSelectRef.prototype.ER_NO_RESULT="Котрол %, не задано ключевое поле представления.";EditSelectRef.prototype.ER_NO_KEYS="Котрол %, не заданы идентификаторы ключей!"; 
function EditSelectOption(id,options){options=options||{};if(options.checked!=undefined&&options.checked==true){options.attrs=options.attrs||{};options.attrs.selected="selected";}
EditSelectOption.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);if(options.descr){this.setDescr(options.descr);}}
extend(EditSelectOption,Control);EditSelectOption.prototype.DEF_TAG_NAME="option";EditSelectOption.prototype.getValue=function(){return this.getAttr("value");}
EditSelectOption.prototype.setValue=function(id){this.setAttr("value",id);}
EditSelectOption.prototype.getDescr=function(){return this.getText();}
EditSelectOption.prototype.setDescr=function(descr){this.setText(descr);} 
function EditSelectOptionRef(id,options){options=options||{};EditSelectOptionRef.superclass.constructor.call(this,id,options);}
extend(EditSelectOptionRef,EditSelectOption);EditSelectOptionRef.prototype.getValue=function(){var str=EditSelectOptionRef.superclass.getValue.call(this);return CommonHelper.unserialize(str);}
EditSelectOptionRef.prototype.setValue=function(keys){var str=CommonHelper.serialize(keys);EditSelectOptionRef.superclass.setValue.call(this,str);} 
function EditRadioGroupRef(id,options){options=options||{};this.setCashable((options.cashable!=undefined)?options.cashable:true);this.setModel(options.model);this.setReadPublicMethod(options.readPublicMethod);this.setKeyField(options.keyField);this.setKeyFieldId(options.keyFieldId);this.setDescrField(options.descrField);this.setDescrFieldId(options.descrFieldId);this.setNotSelectedValue(options.notSelectedValue||this.DEF_NOT_SELECTED_VAL);this.setNotSelectedCaption(options.notSelectedCaption||this.DEF_NOT_SELECTED_CAP);this.setColCount(options.colCount||1);EditRadioGroupRef.superclass.constructor.call(this,id,options);if(options.modelDataStr&&this.m_model){if(this.getCashable()){window.getApp().setCashData(this.m_model.getId(),options.modelDataStr);}
else{this.m_model.setDate(options.modelDataStr);}}}
extend(EditRadioGroupRef,EditRadioGroup);EditRadioGroupRef.prototype.DEF_NOT_SELECTED_VAL="null";EditRadioGroupRef.prototype.m_oldEnabled;EditRadioGroupRef.prototype.m_cashable;EditRadioGroupRef.prototype.m_readPublicMethod;EditRadioGroupRef.prototype.m_model;EditRadioGroupRef.prototype.m_keyFieldId;EditRadioGroupRef.prototype.m_keyField;EditRadioGroupRef.prototype.m_notSelectedCaption;EditRadioGroupRef.prototype.m_notSelectedValue;EditRadioGroupRef.prototype.getCashable=function(){return this.m_cashable;}
EditRadioGroupRef.prototype.setCashable=function(v){this.m_cashable=v;}
EditRadioGroupRef.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
EditRadioGroupRef.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
EditRadioGroupRef.prototype.setModel=function(v){this.m_model=v;}
EditRadioGroupRef.prototype.getModel=function(){return this.m_model;}
EditRadioGroupRef.prototype.getKeyFieldId=function(){return this.m_keyFieldId;}
EditRadioGroupRef.prototype.setKeyFieldId=function(v){this.m_keyFieldId=v;}
EditRadioGroupRef.prototype.getKeyField=function(){return this.m_keyField;}
EditRadioGroupRef.prototype.setKeyField=function(v){this.m_keyField=v;}
EditRadioGroupRef.prototype.getDescrFieldId=function(){return this.m_descrFieldId;}
EditRadioGroupRef.prototype.setDescrFieldId=function(v){this.m_descrFieldId=v;}
EditRadioGroupRef.prototype.getDescrField=function(){return this.m_descrField;}
EditRadioGroupRef.prototype.setDescrField=function(v){this.m_descrField=v;}
EditRadioGroupRef.prototype.getNotSelectedValue=function(){return this.m_notSelectedValue;}
EditRadioGroupRef.prototype.setNotSelectedValue=function(v){this.m_notSelectedValue=v;}
EditRadioGroupRef.prototype.getNotSelectedCaption=function(){return this.m_notSelectedCaption;}
EditRadioGroupRef.prototype.setNotSelectedCaption=function(v){this.m_notSelectedCaption=v;}
EditRadioGroupRef.prototype.getColCount=function(){return this.m_colCount;}
EditRadioGroupRef.prototype.setColCount=function(v){this.m_colCount=v;}
EditRadioGroupRef.prototype.onRefresh=function(){if(this.getCashable()&&this.m_model){var cash=window.getApp().getCashData(this.getName());if(cash){this.m_model.setDate(cash);this.onGetData();return;}}
this.m_oldEnabled=this.getEnabled();this.setEnabled(false);var self=this;this.getReadPublicMethod().run({"async":false,"ok":function(resp){self.onGetData(resp);},"fail":function(resp,erCode,erStr){self.setEnabled(self.m_oldEnabled);self.getErrorControl().setValue(window.getApp().formatError(erCode,erStr));}});}
EditRadioGroupRef.prototype.toDOM=function(parent){EditRadioGroupRef.superclass.toDOM.call(this,parent);this.onRefresh();}
EditRadioGroupRef.prototype.onGetData=function(resp){if(!this.m_model)return;if(resp&&this.m_model){this.m_model.setData(resp.getModelData(this.m_model.getId()));if(this.getCashable()){window.getApp().setCashData(this.m_model.getId(),resp.getModelData(this.m_model.getId()));}}
var old_key_val=this.getValue()||this.m_defaultValue;var f=this.getKeyField();if(!f&&this.getKeyFieldId()&&this.m_model.fieldExists(this.getKeyFieldId())){this.setKeyField(this.m_model.getField(this.getKeyFieldId()));}
else if(!f){var fields=this.m_model.getFields();for(var id in fields){if(fields[id].getPrimaryKey()){this.setKeyField(fields[id]);break;}}}
if(!this.getKeyField()){throw Error(CommonHelper.format(this.ER_NO_LOOKUP,Array(this.getName())));}
var f=this.getDescrField();if(!f&&this.getDescrFieldId()&&this.m_model.fieldExists(this.getDescrFieldId())){this.setDescrField(this.m_model.getField(this.getDescrFieldId()));}
else if(!f){var fields=this.m_model.getFields();for(var id in fields){if(!fields[id].getPrimaryKey()){this.setDescrField(fields[id]);break;}}
if(!this.getDescrField()){for(var id in fields){if(fields[id].getPrimaryKey()){this.setDescrField(fields[id]);break;}}}}
if(!this.getDescrField()){throw Error(CommonHelper.format(this.ER_NO_RESULT,Array(this.getName())));}
var self=this;this.clear();var opt_class=this.getOptionClass();if(this.getAddNotSelected()){var def_opt_opts={"className":"a","value":this.getNotSelectedValue(),"labelCaption":this.getNotSelectedCaption(),"name":this.getId(),"events":{"onclick":function(){if(self.m_onSelect){self.m_onSelect();}}}};}
if(this.getAddNotSelected()&&!this.getNotSelectedLast()){this.addElement(new opt_class(this.getId()+":not_selected",def_opt_opts));}
var opt_checked=false;while(this.m_model.getNextRow()){var key_val=this.getKeyField().getValue();opt_checked=opt_checked||(key_val==old_key_val);this.addElement(new opt_class(this.getId()+":id_"+key_val,{"className":"a","checked":(key_val==old_key_val),"value":key_val,"labelCaption":this.getDescrField().getValue(),"name":this.getId(),"events":{"click":function(){if(self.m_onSelect){self.m_onSelect();}}}}));}
if(this.getAddNotSelected()&&this.getNotSelectedLast()){if(!opt_checked){def_opt_opts.checked=true;opt_checked=true;}
this.addElement(new opt_class(this.getId()+":not_selected",def_opt_opts));}
if(!opt_checked&&this.getCount()){this.setIndex(0);}
var columns=[];var col_w=12/this.m_colCount;var bs=window.getApp().getBsCol()+col_w;for(var n=0;n<this.m_colCount;n++){columns.push(new Control(CommonHelper.uniqid(),"div",{"className":bs}));}
var elem;var n=0;for(var elem_id in this.m_elements){elem=this.m_elements[elem_id];if(n==this.m_colCount)n=0;elem.toDOM(columns[n].getNode());n++;}
for(var n=0;n<this.m_colCount;n++){columns[n].toDOM(this.m_node);}
this.setEnabled(this.m_oldEnabled);} 
EditRadioGroupRef.prototype.ER_NO_LOOKUP="Котрол %, не задано ключевое поле.";EditRadioGroupRef.prototype.DEF_NOT_SELECTED_CAP="Все элементы"; 
function PrintObj(options){options=options||{};this.setTempl(options.templ);this.setKeys(options.keys);this.setKeyIds(options.keyIds);this.setPublicMethodKeyIds(options.publicMethodKeyIds);this.setPublicMethod(options.publicMethod);this.setEnabled((options.enabled==undefined)?options.enabled:true);this.setDivider((options.divider==undefined)?options.divider:false);this.setWinParams(options.winParams);var self=this;var id=CommonHelper.uniqid();this.m_control=new ControlContainer(id,"li",{"className":(this.getEnabled()==false)?"disabled":((this.getDivider())?"divider":""),"elements":[new Control(id+":a","a",{"value":options.caption,"events":{"click":function(){self.onClick();}},"attrs":{"href":"#","role":"menuitem"}})]});}
PrintObj.prototype.m_caption;PrintObj.prototype.m_templ;PrintObj.prototype.m_publicMethod;PrintObj.prototype.m_keys;PrintObj.prototype.m_publicMethodKeyIds;PrintObj.prototype.m_enabled;PrintObj.prototype.m_divider;PrintObj.prototype.m_winParams;PrintObj.prototype.m_control;PrintObj.prototype.m_grid;PrintObj.prototype.getCaption=function(){return this.m_control.getElement("a").getValue();}
PrintObj.prototype.setCaption=function(v){this.m_control.getElement("a").setCaption(v)}
PrintObj.prototype.getTempl=function(){return this.m_templ;}
PrintObj.prototype.setTempl=function(v){this.m_templ=v;}
PrintObj.prototype.getPublicMethod=function(){return this.m_publicMethod;}
PrintObj.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
PrintObj.prototype.getKeys=function(){if(!this.m_keys&&this.m_grid){if(!this.m_keyIds){return this.m_grid.getSelectedNodeKeys();}
else{var m=this.m_grid.getModel();if(m){var keys={};this.m_grid.setModelToCurrentRow();var fields=m.getFields();for(var i=0;i<this.m_keyIds.length;i++){if(fields[this.m_keyIds[i]]){keys[this.m_keyIds[i]]=fields[this.m_keyIds[i]].getValue();}}
return keys;}}}
else if(this.m_keys){return this.m_keys;}}
PrintObj.prototype.setKeys=function(v){this.m_keys=v;}
PrintObj.prototype.getKeyIds=function(){return this.m_keyIds;}
PrintObj.prototype.setKeyIds=function(v){this.m_keyIds=v;}
PrintObj.prototype.getPublicMethodKeyIds=function(){return this.m_publicMethodKeyIds;}
PrintObj.prototype.setPublicMethodKeyIds=function(v){this.m_publicMethodKeyIds=v;}
PrintObj.prototype.getEnabled=function(){return this.m_enabled;}
PrintObj.prototype.setEnabled=function(v){this.m_enabled=v;}
PrintObj.prototype.getDivider=function(){return this.m_divider;}
PrintObj.prototype.setDivider=function(v){this.m_divider=v;}
PrintObj.prototype.getWinParams=function(){return this.m_winParams;}
PrintObj.prototype.setWinParams=function(v){this.m_winParams=v;}
PrintObj.prototype.getControl=function(){return this.m_control;}
PrintObj.prototype.setGrid=function(v){this.m_grid=v;}
PrintObj.prototype.onClick=function(){var keys=this.getKeys();if(keys&&!CommonHelper.isEmpty(keys)){var pm=this.getPublicMethod();var pm_keys=this.getPublicMethodKeyIds();var ind=0;for(var id in keys){pm.setFieldValue(pm_keys[ind],keys[id]);ind++;}
pm.setFieldValue("templ",this.getTempl());var self=this;pm.run({"viewId":"ViewHTMLXSLT","retContentType":"text","ok":function(resp){WindowPrint.show({"content":resp,"print":false,"title":self.getCaption()});}});}} 
function EditModalDialog(id,options){options=options||{};this.m_cmdOk=(options.cmdOk!=undefined)?options.cmdOk:true;this.m_cmdCancel=(options.cmdCancel!=undefined)?options.cmdCancel:true;this.m_dialogWidth=options.dialogWidth;this.m_viewClass=options.viewClass;this.m_viewOptions=options.viewOptions;this.m_viewTemplate=options.viewTemplate;this.m_headTitle=options.headTitle;this.m_strictValidation=options.strictValidation;this.m_afterOpen=options.afterOpen;var self=this;this.setFormatValue(options.formatValue||function(val){return self.formatValue(val);});options.tagName="A";options.attrs=options.attrs||{};options.attrs.style=((options.attrs.style)?options.attrs.style+" ":"")+"cursor:pointer; height:fit-content;";options.events=options.events||{};options.events.click=this.m_onClick;EditModalDialog.superclass.constructor.call(this,id,options);}
extend(EditModalDialog,Edit);EditModalDialog.prototype.toDOM=function(parent){var id=this.getId();this.m_container=new ControlContainer(((id)?id+":cont":null),this.m_contTagName,{"className":this.m_contClassName});if(this.m_label&&this.m_labelAlign=="left"){this.m_container.addElement(this.m_label);}
this.m_container.toDOM(parent);EditModalDialog.superclass.toDOM.call(this,this.m_container.getNode());if(this.m_buttons&&!this.m_buttons.isEmpty()){this.m_buttons.toDOMAfter(this.getNode());}}
EditModalDialog.prototype.m_valueJSON;EditModalDialog.prototype.m_viewClass;EditModalDialog.prototype.m_viewOptions;EditModalDialog.prototype.m_viewTemplate;EditModalDialog.prototype.m_headTitle;EditModalDialog.prototype.m_formatValue;EditModalDialog.prototype.setValue=function(v){if(typeof v=="object"){this.m_valueJSON=v;}
else{this.m_valueJSON=CommonHelper.unserialize(v);}
var v=this.m_formatValue(this.m_valueJSON);this.getNode().textContent=v;}
EditModalDialog.prototype.getValue=function(){return CommonHelper.serialize(this.m_valueJSON);}
EditModalDialog.prototype.getValueJSON=function(){return this.m_valueJSON;}
EditModalDialog.prototype.isNull=function(){var res=false;if(this.m_valueJSON||typeof(this.m_valueJSON)=="object"||!CommonHelper.isEmpty(this.m_valueJSON)){res=true;for(var id in this.m_valueJSON){if(this.m_valueJSON[id]!=undefined){res=false;break;}}}
return res;}
EditModalDialog.prototype.getDefViewOptions=function(){return{"valueJSON":this.m_valueJSON,"template":window.getApp().getTemplate(this.m_viewTemplate)};}
EditModalDialog.prototype.m_onClick=function(){if(!this.getEnabled()){return;}
var v_opts=this.getDefViewOptions();if(this.m_viewOptions){CommonHelper.merge(v_opts,this.m_viewOptions);}
v_opts["name"]=v_opts["name"]||"modView";this.m_view=new this.m_viewClass(this.getId()+":form:body:"+v_opts["name"],v_opts);var self=this;this.m_form=new WindowFormModalBS(this.getId()+":form",{"cmdCancel":this.m_cmdCancel,"controlCancelCaption":this.BTN_CANCEL_CAP,"controlCancelTitle":this.BTN_CANCEL_TITLE,"cmdOk":this.m_cmdOk,"controlOkCaption":this.BTN_OK_CAP,"controlOkTitle":this.BTN_OK_TITLE,"onClickCancel":function(){self.closeSelect(false);},"onClickOk":function(){var set_val=true;if(self.m_strictValidation&&self.m_view.validate){if(self.m_view.setValid){self.m_view.setValid();}
if(!self.m_view.validate()){self.m_view.setNotValid(self.MSG_NOT_VALID);set_val=false;}}
if(set_val){self.setValue(self.m_view.getValue());if(self.m_strictValidation){self.setValid();}
self.closeSelect(true);}},"content":this.m_view,"contentHead":this.m_headTitle,"dialogWidth":this.m_dialogWidth});this.m_form.open();if(this.m_afterOpen){this.m_afterOpen();}}
EditModalDialog.prototype.closeSelect=function(modif){if(this.m_view){this.m_view.delDOM();delete this.m_view;}
if(this.m_form){this.m_form.close();delete this.m_form;}}
EditModalDialog.prototype.setFormatValue=function(v){this.m_formatValue=v;}
EditModalDialog.prototype.getFormatValue=function(){return this.m_formatValue;}
EditModalDialog.prototype.formatValue=function(val){var res="";for(var id in val){if(val[id]&&typeof(val[id])=="object"&&!val[id].isNull()){res+=((res=="")?"":", ")+val[id].getDescr();}
else if(val[id]&&val[id]!=""){res+=((res=="")?"":", ")+val[id];}}
return res;}
EditModalDialog.prototype.reset=function(){this.setValue({});}
EditModalDialog.prototype.validate=function(){if(this.getRequired()&&this.isNull()){this.setNotValid(Validator.prototype.ER_EMPTY);return false;}
return true;}
EditModalDialog.prototype.setEnabled=function(v){EditModalDialog.superclass.setEnabled.call(this,v);if(this.m_buttons){this.m_buttons.setEnabled(v);}} 
EditModalDialog.prototype.BTN_CANCEL_CAP="Отмена";EditModalDialog.prototype.BTN_CANCEL_TITLE="закрыть форму без сохранения изменений";EditModalDialog.prototype.BTN_OK_CAP="Ок";EditModalDialog.prototype.BTN_OK_TITLE="завершить редактирование и закрыть форму";EditModalDialog.prototype.MSG_NOT_VALID="Есть ошибки заполнения"; 
function EditRef(id,options){options=options||{};if(options.keys){this.setKeys(options.keys);}
if(options.keyIds){this.setKeyIds(options.keyIds);}
var w=window.getWidthType();options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:true;options.cmdOpen=(options.cmdOpen!=undefined)?options.cmdOpen:true;options.cmdClear=(options.cmdClear!=undefined)?options.cmdClear:true;options.cmdAutoComplete=(options.cmdAutoComplete!=undefined)?options.cmdAutoComplete:true;if((w=="sm"&&options.cmdSmInsert)||(w!="sm"&&options.cmdInsert)){if(!options.insertWinEditViewOptions&&options.insertModelId&&options.insertDescrFieldId){options.insertWinEditViewOptions=function(){var v=self.m_node.value;var opts={"models":{}}
opts.models[options.insertModelId]=new window[options.insertModelId]();opts.models[options.insertModelId].setFieldValue(options.insertDescrFieldId,v);opts.models[options.insertModelId].recInsert();opts.onClose=function(res){if(res&&res.newKeys){self.setValue(new RefType({"keys":res.newKeys,"descr":this.getElement(options.insertDescrFieldId).getValue()}));DOMHelper.delClass(self.m_node,"null-ref");self.onSelectValue(null);}
if(res.window){res.window.closeResult=res;res.window.close();}}
return opts;}}
options.buttonInsert=options.buttonInsert||new ButtonInsert(id+":btn_insert",{"editControl":this,"editWinClass":options.editWinClass,"editViewOptions":options.insertWinEditViewOptions,"onClick":options.insertOnClick});}
if(!options.buttonSelect&&options.selectWinClass&&((w=="sm"&&options.cmdSmSelect)||(w!="sm"&&options.cmdSelect))){var self=this;options.buttonSelect=new ButtonSelectRef(id+":btn_select",{"winClass":options.selectWinClass,"winParams":options.selectWinParams,"winEditViewOptions":options.selectWinEditViewOptions,"descrIds":options.selectDescrIds,"keyIds":options.selectKeyIds,"control":this,"onSelect":function(fields){self.onSelectValue(fields);},"formatFunction":options.selectFormatFunction,"multySelect":options.selectMultySelect,"enabled":options.enabled});}
if(!options.buttonOpen&&options.editWinClass&&((w=="sm"&&options.cmdSmOpen)||(w!="sm"&&options.cmdOpen))){options.buttonOpen=new ButtonOpen(id+':btn_open',{"winClass":options.editWinClass,"winParams":options.editWinParams,"keyIds":options.openKeyIds,"control":this});}
if((w=="sm"&&options.cmdSmClear)||(w!="sm"&&options.cmdClear)){this.m_onClear=options.onClear;options.buttonClear=options.buttonClear||new ButtonClear(id+":btn_clear",{"editControl":this,"enabled":options.enabled,"onClear":options.onClear});}
this.setButtonInsert(options.buttonInsert);EditRef.superclass.constructor.call(this,id,options);if(!this.getKeyIds().length){throw Error(CommonHelper.format(this.ER_NO_KEY,Array[this.getName()]));}}
extend(EditRef,Edit);EditRef.prototype.KEY_ATTR="keys";EditRef.prototype.KEY_INIT_ATTR="initKeys";EditRef.prototype.ATTR_DISABLED="readOnly";EditRef.prototype.m_buttonInsert;EditRef.prototype.m_keyIds;EditRef.prototype.addButtonControls=function(){if(this.m_buttonInsert)this.m_buttons.addElement(this.m_buttonInsert);if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);}
EditRef.prototype.keys2Str=function(keys){return CommonHelper.array2json(keys);}
EditRef.prototype.str2Keys=function(str){return CommonHelper.json2obj(str);}
EditRef.prototype.setButtonInsert=function(v){this.m_buttonInsert=v;}
EditRef.prototype.getButtonInsert=function(){return this.m_buttonInsert;}
EditRef.prototype.setKeys=function(keys){if(!CommonHelper.isEmpty(keys)){this.m_keyIds=[];for(var keyid in keys){this.m_keyIds.push(keyid);}}
else if(!this.m_keyIds){this.m_keyIds=[];}
this.setAttr(this.KEY_ATTR,this.keys2Str(keys));if(this.m_onValueChange){this.m_onValueChange.call(this);}}
EditRef.prototype.setKeyIds=function(v){this.m_keyIds=v;}
EditRef.prototype.getKeyIds=function(){return this.m_keyIds;}
EditRef.prototype.getKeys=function(){return this.str2Keys(this.getAttr(this.KEY_ATTR));}
EditRef.prototype.setInitKeys=function(keys){this.setAttr(this.KEY_INIT_ATTR,this.keys2Str(keys));}
EditRef.prototype.getInitKeys=function(){return this.str2Keys(this.getAttr(this.KEY_INIT_ATTR));}
EditRef.prototype.getIsRef=function(){return true;}
EditRef.prototype.getModified=function(){var key=this.getAttr(this.KEY_ATTR);return(key&&key!="{}"&&(key!=this.getAttr(this.KEY_INIT_ATTR)));}
EditRef.prototype.isNull=function(){var res=true;var keys=this.getKeys();if(keys){for(id in keys){if(keys[id]==undefined||keys[id]=="null"){res=true;break;}
res=false;}}
return res;}
EditRef.prototype.resetKeys=function(){var do_reset=false;var keys=this.getKeys();if(keys){for(var k in keys){if(keys[k]!=undefined){keys[k]=null;do_reset=true;}}}
if(do_reset){this.setKeys(keys);}}
EditRef.prototype.reset=function(){this.setValue("");this.focus();this.resetKeys();if(this.m_onReset)this.m_onReset();}
EditRef.prototype.setValue=function(val){var descr;if(val&&typeof val=="object"&&val.getKeys&&val.getDescr){this.setKeys(val.getKeys());descr=val.getDescr();}
else if(val&&typeof val=="object"&&val.keys&&val.descr){this.setKeys(val.keys);descr=val.descr;}
else if(val&&typeof val=="object"&&val.m_keys&&val.m_descr){this.setKeys(val.m_keys);descr=val.m_descr;}
else if(val&&typeof val!="object"){descr=val;}
else{descr="";}
if(!descr){descr="";}
EditRef.superclass.setValue.call(this,descr);}
EditRef.prototype.getValue=function(){var descr=EditRef.superclass.getValue.call(this);var res=(new RefType({"keys":this.getKeys(),"descr":descr,"dataType":undefined}));return res;}
EditRef.prototype.getKeyValue=function(key){return this.getValue().getKey(key);}
EditRef.prototype.setInitValue=function(val){this.setValue(val);if(typeof val=="object"&&val.getKeys){this.setInitKeys(val.getKeys());}
else if(typeof val=="object"&&val.keys){this.setInitKeys(val.keys);}}
EditRef.prototype.setOnValueChange=function(v){this.m_onValueChange=v;}
EditRef.prototype.onSelectValue=function(v){if(this.m_onSelect)this.m_onSelect(v);}
EditRef.prototype.validate=function(){if(!EditRef.superclass.validate.call(this)){return false;}
if(this.getRequired()&&this.isNull()){this.setNotValid(Validator.prototype.ER_EMPTY);}
return true;} 
function EditRefMultyType(id,options){options=options||{};this.m_dataTypes=options.dataTypes;EditRefMultyType.superclass.constructor.call(this,id,options);}
extend(EditRefMultyType,EditRef);EditRefMultyType.prototype.m_dataType;EditRefMultyType.prototype.m_dataTypes;EditRefMultyType.prototype.setValue=function(v){EditRefMultyType.superclass.setValue(this,v);}
EditRefMultyType.prototype.setDataType=function(v){if(!this.m_dataTypes[v]){throw new Error(CommonHelper.format(this.ER_TYPE_NOT_FOUND,v));}
this.m_dataType=v;this.m_dataTypes[v];} 
EditRefMultyType.prototype.ER_TYPE_NOT_FOUND="Тип данных '%' не определен!"; 
function ControlForm(id,tagName,options){options=options||{};ControlForm.superclass.constructor.call(this,id,tagName,options);}
extend(ControlForm,Control);ControlForm.prototype.VAL_INIT_ATTR="initValue";ControlForm.prototype.m_formatFunction;ControlForm.prototype.setValidator=function(v){this.m_validator=v;}
ControlForm.prototype.getValidator=function(){return this.m_validator;}
ControlForm.prototype.setInitValue=function(val){this.setValue(val);this.setAttr(this.VAL_INIT_ATTR,this.getValue());}
ControlForm.prototype.getInitValue=function(val){return this.getAttr(this.VAL_INIT_ATTR);}
ControlForm.prototype.isNull=function(){var v=this.getValue();return(!v||v.length==0);}
ControlForm.prototype.getModified=function(){var v=this.getValue();return(this.getValue()!=this.getInitValue());}
ControlForm.prototype.getIsRef=function(){return false;}
ControlForm.prototype.setValid=function(v){return false;}
ControlForm.prototype.setValue=function(val){if(this.m_validator){val=this.m_validator.correctValue(val);}
ControlForm.superclass.setValue.call(this,val);}
ControlForm.prototype.getFormatFunction=function(){return this.m_formatFunction;}
ControlForm.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
ControlForm.prototype.getInputEnabled=function(){return this.getEnabled();}
ControlForm.prototype.setInputEnabled=function(v){this.setEnabled(v);} 
function HiddenKey(id,options){options=options||{};options.visible=false;this.setValidator(options.validator);HiddenKey.superclass.constructor.call(this,id,"DIV",options);}
extend(HiddenKey,ControlForm); 
function EditJSON(id,options){options=options||{};EditJSON.superclass.constructor.call(this,id,options.tagName,options);if(options.valueJSON){this.setValue(options.valueJSON);}}
extend(EditJSON,ControlContainer);EditJSON.prototype.getValueJSON=function(){var o={};for(var elem_id in this.m_elements){if(this.m_elements[elem_id]&&!this.m_elements[elem_id].getAttr("notForValue")&&this.m_elements[elem_id].getModified){if(this.m_elements[elem_id]instanceof EditJSON){o[elem_id]=this.m_elements[elem_id].getValueJSON();}else if(this.m_elements[elem_id]instanceof EditDate){o[elem_id]=DateHelper.format(this.m_elements[elem_id].getValue(),"Y-m-d");}else{o[elem_id]=this.m_elements[elem_id].getValue();}}}
return o;}
EditJSON.prototype.getValue=function(){return CommonHelper.serialize(this.getValueJSON());}
EditJSON.prototype.setValueOrInit=function(v,isInit){var o;if(typeof(v)=="string"){o=CommonHelper.unserialize(v);}
else{o=v;}
for(var id in o){if(this.m_elements[id]&&(!this.m_elements[id].getAttr||!this.m_elements[id].getAttr("notForValue"))){if(isInit&&this.m_elements[id].setInitValue){this.m_elements[id].setInitValue(o[id]);}
else{this.m_elements[id].setValue(o[id]);}}}}
EditJSON.prototype.setValue=function(v){this.setValueOrInit(v,false);}
EditJSON.prototype.setInitValue=function(v){this.setValueOrInit(v,true);}
EditJSON.prototype.setValid=function(){var list=this.getElements();for(var id in list){if(list[id]&&list[id].setValid){list[id].setValid();}}}
EditJSON.prototype.setNotValid=function(str){}
EditJSON.prototype.getModified=function(){var res=false;var list=this.getElements();for(var id in list){if(list[id]&&list[id].getModified&&list[id].getModified()){res=true;break;}}
return res;}
EditJSON.prototype.isNull=function(){var res=true;var list=this.getElements();for(var id in list){if(list[id]&&list[id].isNull&&!list[id].isNull()){res=false;break;}}
return res;}
EditJSON.prototype.reset=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id]&&!this.m_elements[elem_id].getAttr("notForValue")&&this.m_elements[elem_id].reset){this.m_elements[elem_id].reset();}}}
EditJSON.prototype.validate=function(){var res=true;for(var elem_id in this.m_elements){if(this.m_elements[elem_id]&&!this.m_elements[elem_id].getAttr("notForValue")&&this.m_elements[elem_id].reset){res=((!this.m_elements[elem_id].validate||this.m_elements[elem_id].validate())&&res);}}
return res;} 
function EditFile(id,options){options=options||{};options.template=options.template||window.getApp().getTemplate("EditFile");this.m_fileInfTemplate=options.fileInfTemplate||window.getApp().getTemplate("EditFileInf");this.m_fileInfTemplateOptions=options.fileInfTemplateOptions||{};this.m_fileInfTemplateOptions.IMG_CLASS=this.m_fileInfTemplateOptions.IMG_CLASS||"attachmentPic";this.m_onDownload=options.onDownload;this.m_onDeleteFile=options.onDeleteFile;this.m_multipleFiles=(options.multipleFiles!=undefined)?options.multipleFiles:false;this.m_allowOnlySignedFiles=options.allowOnlySignedFiles;this.m_separateSignature=options.separateSignature;this.m_onFileAdded=options.onFileAdded;this.m_onFileSigAdded=options.onFileSigAdded;this.m_onFileDeleted=options.onFileDeleted;this.m_multiSignature=options.multiSignature;this.m_onSignFile=options.onSignFile;this.m_onSignClick=options.onSignClick;this.m_allowedFileExtList=(options.allowedFileExtList!=undefined&&CommonHelper.isArray(options.allowedFileExtList))?options.allowedFileExtList:null;this.m_allowedFileTypeList=(options.allowedFileTypeList!=undefined&&CommonHelper.isArray(options.allowedFileTypeList))?options.allowedFileTypeList:null;this.m_showHref=(options.showHref!=undefined)?options.showHref:true;this.m_showPic=(options.showPic!=undefined)?options.showPic:false;this.m_maxWidth=options.maxWidth;this.m_maxHeight=options.maxHeight;this.setContTagName(options.contTagName||this.DEF_CONT_TAG);this.m_files=[];var self=this;var init_val;if(options.value){init_val=options.value;options.value=undefined;}
options.addElement=function(){this.addElement(new ControlContainer(id+":file_cont",this.getContTagName()));if(options.labelCaption){this.addElement(new Control(id+":label","LABEL",{"value":options.labelCaption,"className":options.labelClassName}));}
var file_ctrl_opts={"events":{"change":function(){self.fileAdded();}}}
if(this.m_separateSignature||this.m_multipleFiles){file_ctrl_opts.attrs=file_ctrl_opts.attrs||{};file_ctrl_opts.attrs.multiple="multiple";}
this.addElement(new Control(id+":file","INPUT",file_ctrl_opts));this.addElement(new ButtonCtrl(id+":add",{"glyph":"glyphicon-plus","attrs":{"class":"btn btn-default fileAddBtn"},"title":"Выбрать файл","onClick":function(){$(self.getElement("file").getNode()).click();}}));if(options.addControls){options.addControls.call(this);}}
EditFile.superclass.constructor.call(this,id,options.tagName||"DIV",options);if(init_val){this.setInitValue(init_val);}}
extend(EditFile,ControlContainer);EditFile.prototype.SIGN_MARK=".sig";EditFile.prototype.DEF_CONT_TAG="TEMPLATE";EditFile.prototype.m_onDownload;EditFile.prototype.m_fileName;EditFile.prototype.m_allowOnlySignedFiles;EditFile.prototype.m_multipleFiles;EditFile.prototype.m_files;EditFile.prototype.getValue=function(){return this.m_files.length?this.m_files:null;}
EditFile.prototype.getFiles=function(){return this.m_files;}
EditFile.prototype.getFileControls=function(){var list=this.getElement("file_cont").getElements();var file_list=[];for(var id in list){if(list[id].isFileControl){file_list.push(list[id]);}}
return file_list;}
EditFile.prototype.setValue=function(v){debugger
this.m_files=[];this.getElement("file").getNode().value="";if(v&&!CommonHelper.isArray(v)&&((v.id&&v.name&&v.size)||v.dataBase64)){var el=v;v=[el];}
if(v&&CommonHelper.isArray(v)){var cont=this.getElement("file_cont");cont.clear();for(var i=0;i<v.length;i++){v[i].uploaded=true;this.addFile(v[i],true);}
cont.toDOM(this.m_node);}
this.m_modified=false;}
EditFile.prototype.setInitValue=function(v){if(this.m_showPic&&v&&CommonHelper.isArray(v)&&v.length&&!v[0].dataBase64){return;}
this.setValue(v);}
EditFile.prototype.addFile=function(fileInf){var cont=this.getElement("file_cont");if(!this.m_multipleFiles&&!this.m_separateSignature){cont.clear();}
else if(this.m_separateSignature&&fileInf.name.substring(fileInf.name.length-this.SIGN_MARK.length)==this.SIGN_MARK){var file_found=false;var base_name=fileInf.name.substring(0,fileInf.name.length-this.SIGN_MARK.length);var elems=cont.getElements();for(var id in elems){if(elems[id]&&elems[id].isFileControl&&elems[id].getAttr("file_name")==base_name){file_found=true;break;}}
if(!file_found){this.m_files.splice(CommonHelper.inArray(fileInf.name,this.m_files),1);throw new Error(this.ER_NO_SIG);}
var n=$("#"+elems[id].getId()+"_sig");n.attr("class","icon-file-locked");n.attr("title","Файл подписан ЭЦП");elems[id].setAttr("file_signed","true");if(this.m_onFileSigAdded){this.m_onFileSigAdded();}
if(this.sigCont&&!this.sigCont.getSignatureCount()){this.sigCont.addSignature({"sign_date_time":DateHelper.time()});}
return;}
else if(!this.m_multipleFiles){cont.clear();}
var file_template_opts={"file_uploaded":fileInf.uploaded,"file_not_uploaded":!fileInf.uploaded,"file_deletable":(this.m_onDeleteFile)?true:false,"separateSignature":this.m_separateSignature,"allowOnlySignedFiles":this.m_allowOnlySignedFiles,"allowNotOnlySignedFiles":!this.m_allowOnlySignedFiles,"name":fileInf.name,"file_size_formatted":CommonHelper.byteFormat(fileInf.size),"show_href":this.m_showHref};CommonHelper.merge(file_template_opts,this.m_fileInfTemplateOptions||{});var file_opts={"template":this.m_fileInfTemplate,"templateOptions":file_template_opts};if(this.m_separateSignature){file_template_opts.file_signed=fileInf.file_signed;file_template_opts.file_not_signed=!fileInf.file_signed;file_opts.attrs=file_opts.attrs||{};file_opts.attrs.file_name=fileInf.name;file_opts.attrs.file_signed=fileInf.file_signed;}
var file_id=fileInf.id||fileInf.file_id;var file_ctrl=new Control(file_id,"TEMPLATE",file_opts);file_ctrl.isFileControl=true;cont.addElement(file_ctrl);var self=this;if(this.m_showHref){cont.addElement(new Button(file_id+"-href",{"attrs":{"class":"","download_href":"true","file_id":fileInf.id,"file_uploaded":fileInf.uploaded},"onClick":function(e){e.preventDefault();if(this.getAttr("file_uploaded")=="true"){self.m_onDownload(this.getAttr("file_id"));}}}));}
if(window["FileSigContainer"]){this.sigCont=new FileSigContainer(file_id+"-sigList",{"fileId":file_id,"itemId":null,"signatures":CommonHelper.unserialize(fileInf.signatures),"multiSignature":this.m_multiSignature,"readOnly":false,"onSignFile":function(fileId){self.m_onSignFile(fileId);},"onSignClick":function(fileId){self.m_onSignClick(fileId);},"onGetFileUploaded":function(){return(self.getAttr("file_uploaded")=="true");}});cont.addElement(this.sigCont);}
if(this.m_onDeleteFile){cont.addElement(new Button(file_id+"-del",{"attrs":{"file_id":file_id,"file_uploaded":fileInf.uploaded},"onClick":function(){if(this.getAttr("file_uploaded")=="true"){var file_id=this.getAttr("file_id");self.m_onDeleteFile(file_id,function(){self.m_modified=false;self.deleteFileFromDOM(file_id);});}
else{self.deleteFileFromDOM(this.getAttr("file_id"));}}}));}
if(this.m_showPic&&fileInf.dataBase64){var max_dim_exist=(this.m_maxWidth&&this.m_maxHeight);var self=this;var pic_ctrl=new Control(file_id+"-preview","TEMPLATE",{"attrs":{"src":"data:image/png;base64, "+fileInf.dataBase64},"visible":!max_dim_exist,"events":(max_dim_exist?{"load":function(){var n=this.m_node;var dim=CommonHelper.calculateImgRatioFit(n.width,n.height,self.m_maxWidth,self.m_maxHeight);n.width=dim.width;n.height=dim.height;DOMHelper.show(n);},"click":this.m_showHref?null:function(e){e.preventDefault();if(e.target.getAttribute("file_uploaded")=="true"){self.m_onDownload(e.target.getAttribute("file_id"));}}}:null)});if(!this.m_showHref){pic_ctrl.setAttr("file_uploaded",fileInf.uploaded);pic_ctrl.setAttr("file_id",file_id);pic_ctrl.setAttr("style","cursor:pointer;");}
cont.addElement(pic_ctrl);}}
EditFile.prototype.deleteFileFromDOM=function(fileId){var cont=this.getElement("file_cont");if(this.m_multipleFiles){for(var i=0;i<this.m_files.length;i++){if(this.m_files[i]&&this.m_files[i].file_id&&this.m_files[i].file_id==fileId){delete this.m_files[i];this.m_files[i]=undefined;break;}}
cont.delElement(fileId);cont.delElement(fileId+"-href");cont.delElement(fileId+"-del");if(this.m_showPic){cont.delElement(fileId+"-preview");}}
else{this.m_files=[];cont.clear();}
cont.toDOM();if(this.m_onFileDeleted)this.m_onFileDeleted();}
EditFile.prototype.getModified=function(){return this.m_modified;}
EditFile.prototype.setValid=function(){}
EditFile.prototype.reset=function(){this.setValue(null);var cont=this.getElement("file_cont");cont.clear();cont.toDOM();}
EditFile.prototype.getContTagName=function(){return this.m_contTagName;}
EditFile.prototype.setContTagName=function(v){this.m_contTagName=v;}
EditFile.prototype.setEnabled=function(v){EditFile.superclass.setEnabled.call(this,v);var hrefs=DOMHelper.getElementsByAttr("true",this.m_node,"download_href",false);for(var i=0;i<hrefs.length;i++){DOMHelper.delAttr(hrefs[i],"disabled");}}
EditFile.prototype.fileAdded=function(){var fl_list=this.getElement("file").getNode().files;if(!this.m_multipleFiles&&!this.m_separateSignature&&fl_list.length>1){throw new Error(this.ER_MULTIPLE_FILES_NOT_ALLOWED);}
if(!this.m_multipleFiles&&!this.m_separateSignature){this.m_files=[];}
if(this.m_allowedFileExtList){var ext_ar=fl_list[fl_list.length-1].name.split(".");if(!ext_ar.length||ext_ar.length<2){throw new Error(this.ER_EXT_NOT_DEFINED);}
if(CommonHelper.inArray(ext_ar[ext_ar.length-1].toLowerCase(),this.m_allowedFileExtList)==-1){throw new Error(CommonHelper.format(this.ER_EXT_NOT_ALLOWED,ext_ar[ext_ar.length-1]));}}
if(this.m_allowedFileTypeList&&fl_list[fl_list.length-1].type){if(CommonHelper.inArray(fl_list[fl_list.length-1].type,this.m_allowedFileTypeList)==-1){throw new Error(CommonHelper.format(this.ER_TYPE_NOT_ALLOWED,fl_list[fl_list.length-1].type));}}
var sig_list=[]
var ctrls_to_add={};for(var fi=0;fi<fl_list.length;fi++){var fl=fl_list[fi];if(this.m_separateSignature&&fl.name.substring(fl.name.length-this.SIGN_MARK.length)==this.SIGN_MARK){sig_list.push({"base_name":fl.name.substring(0,fl.name.length-this.SIGN_MARK.length),"file":fl});}
else{fl.file_id=CommonHelper.uniqid();this.m_files.push(fl);ctrls_to_add[fl.name]={"id":fl.file_id,"name":fl.name,"size":fl.size,"file_uploaded":false,"file_signed":false,"signatures":[]};}}
for(var fi=0;fi<sig_list.length;fi++){if(ctrls_to_add[sig_list[fi].base_name]){this.m_files.push(sig_list[fi].file);ctrls_to_add[sig_list[fi].base_name].file_signed=true;ctrls_to_add[sig_list[fi].base_name].signatures.push({"id":ctrls_to_add[sig_list[fi].base_name].id,"sign_date_time":DateHelper.time()});}
else{var found=false;for(var i=0;i<this.m_files.length;i++){if(this.m_files[i].name==sig_list[fi].base_name){found=true;break;}}
if(!found){throw new Error(this.ER_NO_SIG);}
else{this.m_files.push(sig_list[fi].file);this.addFile({"id":CommonHelper.uniqid(),"name":sig_list[fi].file.name,"size":sig_list[fi].file.size,"file_uploaded":false,"file_signed":false,"signatures":[]});if(this.m_onFileAdded){this.m_onFileAdded();}}}}
var cont=this.getElement("file_cont");if(!this.m_multipleFiles&&!this.m_separateSignature){cont.clear();}
for(var n in ctrls_to_add){this.addFile(ctrls_to_add[n]);if(this.m_onFileAdded){this.m_onFileAdded(ctrls_to_add[n].id);}}
cont.toDOM(this.m_node);this.m_modified=true;} 
EditFile.prototype.ER_NO_SIG="Файл с данными для этой ЭЦП не найден!";EditFile.prototype.ER_MULTIPLE_FILES_NOT_ALLOWED="Загрузка нескольких файлов запрещена!";EditFile.prototype.ER_EXT_NOT_DEFINED="Расширение файла не определено.";EditFile.prototype.ER_EXT_NOT_ALLOWED="Файлы с расширением % загружать запрещено.";EditFile.prototype.ER_TYPE_NOT_ALLOWED="Файлы с mime типом % загружать запрещено."; 
function EditCompound(id,options){options=options||{};this.m_options={};CommonHelper.merge(this.m_options,options);this.setPossibleDataTypes(options.possibleDataTypes||{});this.m_onSelect=options.onSelect;var tag=options.tagName||this.DEF_TAG_NAME;EditCompound.superclass.constructor.call(this,id,tag,options);}
extend(EditCompound,ControlContainer);EditCompound.prototype.DEF_TAG_NAME="DIV";EditCompound.prototype.VAL_INIT_ATTR="initValue";EditCompound.prototype.m_possibleDataTypes;EditCompound.prototype.m_dataType;EditCompound.prototype.m_control;EditCompound.prototype.m_options;EditCompound.prototype.m_onSelect;EditCompound.prototype.createControl=function(){if(this.m_control){this.m_control.delDOM();delete this.m_control;}
var tp=this.getDataType();var ctrl_id=this.getId()+":ctrl";var btn_sel=new ButtonSelectDataType(ctrl_id+":btn-select-data-type",{"compoundControl":this});var ctrl_opts={};CommonHelper.merge(ctrl_opts,this.m_options);if(tp){CommonHelper.merge(ctrl_opts,this.m_possibleDataTypes[tp].ctrlOptions);ctrl_opts.onSelect=ctrl_opts.onSelect||this.m_onSelect;if(!this.m_possibleDataTypes[tp]){throw new Error(CommonHelper.format(this.ER_TYPE_NOT_FOUND,tp));}
this.m_control=new this.m_possibleDataTypes[tp].ctrlClass(ctrl_id,ctrl_opts);if(this.m_control.getButtons){var btn_cont=this.m_control.getButtons();if(!btn_cont){this.m_control.addButtonContainer();btn_cont=this.m_control.getButtons();}
btn_cont.addElement(btn_sel);}else{this.m_control.m_buttons=new ControlContainer(this.m_control.getId()+":btn-cont","SPAN",{"className":"input-group-btn","enabled":this.m_control.getEnabled()});}this.m_control.m_buttons.addElement(btn_sel);}
else{ctrl_opts.buttonSelect=btn_sel;ctrl_opts.events={"click":function(){if(this.getEnabled())this.getButtonSelect().doSelect();}}
this.m_control=new Edit(ctrl_id,ctrl_opts);}}
EditCompound.prototype.toDOM=function(parent){if(!this.m_control){this.createControl();}
this.clear();this.addElement(this.m_control);EditCompound.superclass.toDOM.call(this,parent);}
EditCompound.prototype.getDataTypeDescr=function(tp){return"";}
EditCompound.prototype.setPossibleDataTypes=function(t){if(CommonHelper.isArray(t)){this.clearPossibleDataTypes();for(var i=0;i<t.length;i++){if(t[i].dataType&&t[i].ctrlClass){this.m_possibleDataTypes[t[i].dataType]={"ctrlClass":t[i].ctrlClass,"ctrlOptions":t[i].ctrlOptions,"dataTypeDescrLoc":t[i].dataTypeDescrLoc||this.getDataTypeDescr(t[i].dataType)};}}}
else{this.m_possibleDataTypes=t;for(var i in this.m_possibleDataTypes){if(this.m_possibleDataTypes[i].ctrlClass&&!this.m_possibleDataTypes[i].dataTypeDescrLoc){this.m_possibleDataTypes[i].dataTypeDescrLoc=this.getDataTypeDescr(i);}}}}
EditCompound.prototype.getPossibleDataTypes=function(){return this.m_possibleDataTypes;}
EditCompound.prototype.clearPossibleDataTypes=function(){this.m_possibleDataTypes={};}
EditCompound.prototype.getValue=function(){var o=this.getRef();return(o?CommonHelper.serialize(o):null);}
EditCompound.prototype.getRef=function(){var o;if(this.m_control.getKeys){o=this.m_control.getValue();if(o){o.setDataType(this.getDataType());}}
return o;}
EditCompound.prototype.setValue=function(v){if(typeof v=="string"){v=CommonHelper.unserialize(v);}
this.setDataType(((typeof v=="object"&&v.getDataType)?v.getDataType():null),v);this.m_control.setValue(v);}
EditCompound.prototype.setInitValue=function(v){if(typeof v=="string"){v=CommonHelper.unserialize(v);}
this.setDataType(((typeof v=="object"&&v.getDataType)?v.getDataType():null),v);this.m_control.setInitValue(v);this.setAttr(this.VAL_INIT_ATTR,v);}
EditCompound.prototype.setDataType=function(dataType,ctrlVal){this.m_dataType=dataType;this.createControl();this.m_control.toDOM(this.getNode());}
EditCompound.prototype.unsetDataType=function(){this.setDataType(null);}
EditCompound.prototype.getDataType=function(){return this.m_dataType;}
EditCompound.prototype.getModified=function(){return this.m_control.getModified();}
EditCompound.prototype.isNull=function(){return(!this.m_dataType||this.m_control.isNull());}
EditCompound.prototype.setValid=function(){this.m_control.setValid();}
EditCompound.prototype.setNotValid=function(er){this.m_control.setNotValid(er);}
EditCompound.prototype.setEnabled=function(v){EditCompound.superclass.setEnabled.call(this,v);this.m_options.enabled=v;if(this.m_control){this.m_control.setEnabled(v);}}
EditCompound.prototype.setVisible=function(v){EditCompound.superclass.setVisible.call(this,v);this.m_options.visible=v;if(this.m_control){this.m_control.setVisible(v);}}
EditCompound.prototype.getContTagName=function(){return this.m_node.nodeName;}
EditCompound.prototype.setContTagName=function(v){this.m_node.nodeName=v;}
EditCompound.prototype.setInputEnabled=function(enabled){EditCompound.superclass.setEnabled.call(this,enabled);}
EditCompound.prototype.getInputEnabled=function(){return EditCompound.superclass.getEnabled.call(this);}
EditCompound.prototype.reset=function(){this.m_dataType=null;this.m_control.delDOM();delete this.m_control;} 
EditCompound.prototype.LB_TYPE="Тип:";EditCompound.prototype.LB_VAL="Значение:";EditCompound.prototype.ER_TYPE_NOT_FOUND="Тип %s не определен!"; 
function ControlDate(id,tagName,options){options=options||{};this.setDateFormat(options.dateFormat||window.getApp().getDateFormat());ControlDate.superclass.constructor.call(this,id,tagName,options);}
extend(ControlDate,Control);ControlDate.prototype.m_dateFormat;ControlDate.prototype.setValue=function(v){v=DateHelper.format(v,this.getDateFormat());ControlDate.superclass.setValue.call(this,v);}
ControlDate.prototype.setDateFormat=function(v){this.m_dateFormat=v;}
ControlDate.prototype.getDateFormat=function(){return this.m_dateFormat;} 
function GridColumn(options){options=options||{};if(typeof(options)!="object"){throw new Error("Constructor type not supported (id,option)");}
var id;if(options.id){id=options.id;}
else if(options.field){id=options.field.getId();}
else{id=CommonHelper.uniqid();}
this.m_id=id;options.ctrlId=id;this.m_headCell=options.headCell;this.m_cellClass=options.cellClass||GridCell;this.m_cellOptions=options.cellOptions;this.m_cellElements=options.cellElements;if(!options.field&&options.model&&options.model.fieldExists(id)){options.field=options.model.getField(id);}
this.m_field=options.field;this.m_fieldId=options.fieldId;this.m_format=options.format;this.m_formatFunction=options.formatFunction;this.m_mask=options.mask;this.m_assocImageList=options.assocImageList;this.m_assocValueList=options.assocValueList;this.m_assocClassList=options.assocClassList;this.m_assocIndex=options.assocIndex;this.m_ctrlEdit=(options.ctrlEdit!=undefined)?options.ctrlEdit:true;this.m_ctrlId=options.ctrlId;this.m_ctrlClass=options.ctrlClass;this.m_ctrlClassResolve=options.ctrlClassResolve;this.m_ctrlOptions=options.ctrlOptions;this.m_ctrlBindFieldId=options.ctrlBindFieldId;this.m_ctrlBindField=options.ctrlBindField;this.m_grid=options.grid;this.setSearchOptions(options.searchOptions);this.setSearchable((options.searchable!=undefined)?options.searchable:true);this.setMaster(options.master);this.setDetailViewClass(options.detailViewClass);this.setDetailViewOptions(options.detailViewOptions);this.setFieldAlias(options.fieldAlias);}
GridColumn.prototype.m_id;GridColumn.prototype.m_headCell;GridColumn.prototype.m_cellClass;GridColumn.prototype.m_cellOptions;GridColumn.prototype.m_cellElements;GridColumn.prototype.m_field;GridColumn.prototype.m_fieldId;GridColumn.prototype.m_format;GridColumn.prototype.m_formatFunction;GridColumn.prototype.m_mask;GridColumn.prototype.m_assocImageList;GridColumn.prototype.m_assocValueList;GridColumn.prototype.m_assocClassList;GridColumn.prototype.m_assocIndex;GridColumn.prototype.m_ctrlEdit;GridColumn.prototype.m_ctrlId;GridColumn.prototype.m_ctrlClass;GridColumn.prototype.m_ctrlClassResolve;GridColumn.prototype.m_ctrlOptions;GridColumn.prototype.m_ctrlBindFieldId;GridColumn.prototype.m_grid;GridColumn.prototype.m_gridCell;GridColumn.prototype.getCellClass=function(){return this.m_cellClass;}
GridColumn.prototype.setCellClass=function(v){this.m_cellClass=v;}
GridColumn.prototype.getCellOptions=function(){return this.m_cellOptions;}
GridColumn.prototype.setCellOptions=function(v){this.m_cellOptions=v;}
GridColumn.prototype.getField=function(){if(!this.m_field&&this.m_model){if(this.m_fieldId&&this.m_model.fieldExists(this.m_fieldId)){this.m_field=this.m_model.getField(this.m_fieldId);}
else if(this.m_model.fieldExists(this.m_id)){this.m_field=this.m_model.getField(this.m_id);}}
return this.m_field;}
GridColumn.prototype.setField=function(v){this.m_field=v;}
GridColumn.prototype.getFormat=function(){return this.m_format;}
GridColumn.prototype.setFormat=function(v){this.m_format=v;}
GridColumn.prototype.getHeadCell=function(){return this.m_headCell;}
GridColumn.prototype.setHeadCell=function(v){this.m_headCell=v;}
GridColumn.prototype.getCellClass=function(){return this.m_cellClass;}
GridColumn.prototype.setCellClass=function(v){this.m_cellClass=v;}
GridColumn.prototype.getMask=function(){return this.m_mask;}
GridColumn.prototype.setMask=function(v){this.m_mask=v;}
GridColumn.prototype.getCtrlClass=function(){return(this.m_ctrlClassResolve&&typeof this.m_ctrlClassResolve=="function")?this.m_ctrlClassResolve.call(this):this.m_ctrlClass;}
GridColumn.prototype.setCtrlClass=function(v){this.m_ctrlClass=v;}
GridColumn.prototype.getCtrlOptions=function(){return((typeof this.m_ctrlOptions=="function")?this.m_ctrlOptions.call(this):this.m_ctrlOptions);}
GridColumn.prototype.setCtrlOptions=function(v){this.m_ctrlOptions=v;}
GridColumn.prototype.getCtrlBindFieldId=function(){return this.m_ctrlBindFieldId;}
GridColumn.prototype.setCtrlBindFieldId=function(v){this.m_ctrlBindFieldId=v;}
GridColumn.prototype.getCtrlBindField=function(){return this.m_ctrlBindField;}
GridColumn.prototype.setCtrlBindField=function(v){this.m_ctrlBindField=v;}
GridColumn.prototype.getCtrlId=function(){return this.m_ctrlId;}
GridColumn.prototype.setCtrlId=function(v){this.m_ctrlId=v;}
GridColumn.prototype.getAssocValueList=function(){return this.m_assocValueList;}
GridColumn.prototype.setAssocValueList=function(v){this.m_assocValueList=v;}
GridColumn.prototype.getAssocIndex=function(){return this.m_assocIndex;}
GridColumn.prototype.setAssocIndex=function(v){this.m_assocIndex=v;}
GridColumn.prototype.getAssocImageList=function(){return this.m_assocImageList;}
GridColumn.prototype.setAssocImageList=function(v){this.m_assocImageList=v;}
GridColumn.prototype.getAssocClassList=function(){return this.m_assocClassList;}
GridColumn.prototype.setAssocClassList=function(v){this.m_assocClassList=v;}
GridColumn.prototype.getGrid=function(){return this.m_grid;}
GridColumn.prototype.setGrid=function(v){this.m_grid=v;}
GridColumn.prototype.getFormatFunction=function(){return this.m_formatFunction;}
GridColumn.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
GridColumn.prototype.getId=function(){return this.m_id;}
GridColumn.prototype.setId=function(v){this.m_id=v;}
GridColumn.prototype.formatVal=function(v){return v;}
GridColumn.prototype.getCellElements=function(){return this.m_cellElements;}
GridColumn.prototype.setModel=function(v){this.m_model=v;}
GridColumn.prototype.getCtrlEdit=function(){return this.m_ctrlEdit;}
GridColumn.prototype.setCtrlEdit=function(v){this.m_ctrlEdit=v;}
GridColumn.prototype.setVisible=function(v){this.getHeadCell().setVisible(v);this.m_cellOptions=this.m_cellOptions||{};this.m_cellOptions.visible=v;}
GridColumn.prototype.getSearchOptions=function(){return this.m_searchOptions;}
GridColumn.prototype.setSearchOptions=function(v){this.m_searchOptions=v;}
GridColumn.prototype.getSearchable=function(){return this.m_searchable;}
GridColumn.prototype.setSearchable=function(v){this.m_searchable=v;}
GridColumn.prototype.getMaster=function(){return this.m_master;}
GridColumn.prototype.setMaster=function(v){this.m_master=v;}
GridColumn.prototype.getDetailViewClass=function(){return this.m_detailViewClass;}
GridColumn.prototype.setDetailViewClass=function(v){this.m_detailViewClass=v;}
GridColumn.prototype.getDetailViewOptions=function(){return this.m_detailViewOptions;}
GridColumn.prototype.setDetailViewOptions=function(v){this.m_detailViewOptions=v;}
GridColumn.prototype.getGridCell=function(){return this.m_gridCell;}
GridColumn.prototype.setGridCell=function(v){this.m_gridCell=v;}
GridColumn.prototype.getFieldAlias=function(){return this.m_fieldAlias;}
GridColumn.prototype.setFieldAlias=function(v){this.m_fieldAlias=v;} 
function GridColumnBool(options){options=options||{};options.assocClassList=options.assocClassList||{"true":"glyphicon glyphicon-ok","false":((options.showFalse==undefined||options.showFalse===true)?"glyphicon glyphicon-remove":null)};GridColumnBool.superclass.constructor.call(this,options);}
extend(GridColumnBool,GridColumn); 
function GridColumnPhone(options){options=options||{};options.mask=options.mask||window.getApp().getPhoneEditMask();options.ctrlClass=options.ctrlClass||EditPhone;if(window.Caller_Controller){options.cellClass=options.cellClass||GridCellPhone;options.cellOptions=options.cellOptions||{};options.cellOptions.telExt=options.cellOptions.telExt||options.telExt;options.cellOptions.onConnected=options.cellOptions.onConnected||options.onConnected;}
else{options.cellClass=options.cellClass||GridCell;}
GridColumnPhone.superclass.constructor.call(this,options);}
extend(GridColumnPhone,GridColumn); 
function GridColumnEmail(options){options=options||{};GridColumnEmail.superclass.constructor.call(this,options);}
extend(GridColumnEmail,GridColumn); 
function GridColumnFloat(options){options=options||{};this.m_precision=options.precision||this.DEF_PRECISION;this.setDecimalSeparator((options.decimalSeparator!=undefined)?options.decimalSeparator:CommonHelper.getDecimalSeparator());this.setThousandSeparator((options.thousandSeparator!=undefined)?options.thousandSeparator:this.DEF_THOUSAND_SEPAR);GridColumnFloat.superclass.constructor.call(this,options);}
extend(GridColumnFloat,GridColumn);GridColumnFloat.prototype.DEF_PRECISION=2;GridColumnFloat.prototype.DEF_THOUSAND_SEPAR=" ";GridColumnFloat.prototype.m_decimalSeparator;GridColumnFloat.prototype.m_thousandSeparator;GridColumnFloat.prototype.formatVal=function(v){if(isNaN(v)){return"";}
else{return CommonHelper.numberFormat(v,this.m_precision,this.getDecimalSeparator(),this.getThousandSeparator());}}
GridColumnFloat.prototype.getDecimalSeparator=function(){return this.m_decimalSeparator;}
GridColumnFloat.prototype.setDecimalSeparator=function(v){this.m_decimalSeparator=v;}
GridColumnFloat.prototype.getThousandSeparator=function(){return this.m_thousandSeparator;}
GridColumnFloat.prototype.setThousandSeparator=function(v){this.m_thousandSeparator=v;} 
function GridColumnByte(options){options=options||{};this.m_precision=options.precision||this.DEF_PRECISION;GridColumnByte.superclass.constructor.call(this,options);}
extend(GridColumnByte,GridColumn);GridColumnByte.prototype.DEF_PRECISION=2;GridColumnByte.prototype.formatVal=function(v){if(isNaN(v)){return"";}
else{return CommonHelper.byteForamt(v,this.m_precision);}} 
function GridColumnDate(options){options=options||{};options.ctrlClass=options.ctrlClass||EditDate;options.ctrlOptions=options.ctrlOptions||{};this.m_dateFormat=options.dateFormat||options.ctrlOptions.dateFormat||window.getApp().getDateFormat()||this.DEF_FORMAT;options.ctrlOptions.dateFormat=options.ctrlOptions.dateFormat||this.m_dateFormat;options.ctrlOptions.editMask=options.ctrlOptions.editMask||options.editMask||window.getApp().getDateEditMask()||this.DEF_EDIT_MASK;GridColumnDate.superclass.constructor.call(this,options);}
extend(GridColumnDate,GridColumn);GridColumnDate.prototype.DEF_FORMAT="d/m/Y";GridColumnDate.prototype.DEF_EDIT_MASK="99/99/9999";GridColumnDate.prototype.formatVal=function(v){var r="";if(v&&typeof(v)=="string"){v=DateHelper.strtotime(v);}
if(v&&typeof(v)=="object"){r=DateHelper.format(v,this.m_dateFormat);}
return r;} 
function GridColumnDateTime(options){options=options||{};options.ctrlClass=options.ctrlClass||EditDateTime;options.ctrlOptions=options.ctrlOptions||{};options.ctrlOptions.editMask=options.ctrlOptions.editMask||options.editMask||window.getApp().getDateTimeEditMask()||this.DEF_EDIT_MASK;options.dateFormat=options.dateFormat||window.getApp().getDateTimeFormat()||this.DEF_FORMAT;GridColumnDateTime.superclass.constructor.call(this,options);}
extend(GridColumnDateTime,GridColumnDate);GridColumnDateTime.prototype.DEF_FORMAT="d/m/Y H:i:s";GridColumnDateTime.prototype.DEF_EDIT_MASK="99/99/9999 99:99:99"; 
function GridColumnTime(options){options=options||{};this.m_dateFormat=options.dateFormat||window.getApp().getTimeFormat()||this.DEF_FORMAT;GridColumnTime.superclass.constructor.call(this,options);}
extend(GridColumnTime,GridColumnDate);GridColumnDateTime.prototype.DEF_FORMAT="H:i:s"; 
function GridColumnEnum(options){options.assocValueList=options.multyLangValues[window.getApp().getLocale()];GridColumnEnum.superclass.constructor.call(this,options);}
extend(GridColumnEnum,GridColumn); 
function GridColumnRef(options){options=options||{};var self=this;this.m_origFormatFunction=options.formatFunction;options.formatFunction=function(fields,gridCell){var res;if(self.m_origFormatFunction){res=self.m_origFormatFunction(fields,gridCell);}
else{res=self.getCellValue(fields,gridCell);}
return res;}
options.searchOptions=options.searchOptions||{"searchType":"on_match","typeChange":"false"};this.m_onClickRef=options.onClickRef;this.setForm(options.form);this.setViewOptions(options.viewOptions);options.cellElements=options.cellElements||((options.form||this.m_onClickRef)?[{"elementClass":Control,"elementOptions":{"tagName":"A","href":"#","events":{"click":function(e){self.onClickRef(e);}}}}]:null);GridColumnRef.superclass.constructor.call(this,options);}
extend(GridColumnRef,GridColumn);GridColumnRef.prototype.m_keys;GridColumnRef.prototype.m_form;GridColumnRef.prototype.onClickRef=function(e){e=EventHelper.fixKeyEvent(e);if(e.preventDefault){e.preventDefault();}
e.stopPropagation();var keys=this.getKeysFromClickEvent(e);if(this.m_onClickRef){this.m_onClickRef(keys,e);}
else{this.openRef(keys);}}
GridColumnRef.prototype.openRef=function(keys){if(keys&&this.m_form){var view_opts={};CommonHelper.merge(view_opts,this.getViewOptions());(new this.m_form({"name":this.m_form.toString()+CommonHelper.serialize(keys),"keys":keys,"params":{"cmd":"edit","editViewOptions":view_opts}})).open();}}
GridColumnRef.prototype.getKeysFromClickEvent=function(e){var keys,f_id;var td=DOMHelper.getParentByTagName(e.target,"TD");if(td){f_id=td.getAttribute("fieldid");var tr=DOMHelper.getParentByTagName(td,"TR");if(tr&&f_id){this.getGrid().setModelToCurrentRow(tr);v=this.getGrid().getModel().getFieldValue(f_id);if(CommonHelper.isArray(v)&&v.length){keys=this.getObjectKeys(v[0]);}
else{keys=this.getObjectKeys(v);}}}
return keys;}
GridColumnRef.prototype.getObjectKeys=function(v){return((!v||typeof v!="object")?null:((v.getKeys)?v.getKeys():(v.keys?v.keys:(v.m_keys?v.m_keys:null))));}
GridColumnRef.prototype.getObjectDescr=function(v,fields){var keys=this.getObjectKeys(v);var no_keys=false;for(key in keys){if(keys[key]==null){no_keys=true;break;}}
return!no_keys?(v.getDescr?v.getDescr():(v.descr?v.descr:(v.m_descr?v.m_descr:keys))):"";}
GridColumnRef.prototype.getCellValue=function(fields){var f=fields[this.getField().getId()];var res="";if(!f.isNull()){var v=f.getValue();if(typeof v=="string"){v=CommonHelper.unserialize(v);}
if(CommonHelper.isArray(v)){for(var i=0;i<v.length;i++){if(v[i]){res+=(res=="")?"":", ";res+=this.getObjectDescr(v[i],fields);}}}
else if(v){res=this.getObjectDescr(v,fields);}}
return res;}
GridColumn.prototype.getForm=function(){return this.m_form;}
GridColumn.prototype.setForm=function(v){this.m_form=v;}
GridColumn.prototype.getViewOptions=function(){return this.m_viewOptions;}
GridColumn.prototype.setViewOptions=function(v){this.m_viewOptions=v;} 
function GridColumnInterval(options){options=options||{};this.m_intervalFormat=options.intervalFormat||this.DEF_FORMAT;GridColumnInterval.superclass.constructor.call(this,options);}
extend(GridColumnInterval,GridColumn);GridColumnInterval.prototype.DEF_FORMAT="H:i";GridColumnInterval.prototype.formatVal=function(v){var r="";if(v&&typeof(v)=="string"){var parts=v.split(":",2);var h=0,m=0,s=0,ms=0;if(parts.length>=1){h=parseInt(parts[0],10);}
if(parts.length>=2){m=parseInt(parts[1],10);}
if(parts.length>=3){s=parts[2];ms_pos=s.indexOf(".");if(ms_pos>=0){ms=s.substr(ms_pos+1);s=parseInt(s.substr(0,ms_pos-1),10);}
else{s=parseInt(s,10);}}
for(var i=0;i<this.m_intervalFormat.length;i++){if(this.m_intervalFormat.charAt(i)=="H"){r+=(h<10?"0":"")+h.toString();}
else if(this.m_intervalFormat.charAt(i)=="i"){r+=(m<10?"0":"")+m.toString();}
else{r+=this.m_intervalFormat.charAt(i);}}}
return r;} 
function GridCell(id,options){options=options||{};if(options.gridColumn){options.attrs=options.attrs||{};if(options.gridColumn.getHeadCell()){var col_attrs=options.gridColumn.getHeadCell().getColAttrs()||{};for(col_attr_id in col_attrs){if(typeof col_attrs[col_attr_id]=="function"){options.attrs[col_attr_id]=col_attrs[col_attr_id].call(this,options.fields);}
else{options.attrs[col_attr_id]=col_attrs[col_attr_id];}}}
if(options.gridColumn.getField()){options.attrs.fieldId=options.gridColumn.getField().getId();var f_alias=options.gridColumn.getFieldAlias();if(f_alias){options.attrs["data-label"]=f_alias;}
options.value=(options.value!=undefined)?options.value:options.gridColumn.getField().getValue();}}
this.setGridColumn(options.gridColumn);var val=options.value;options.value=undefined;GridCell.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);this.setColSpan(options.colSpan);this.setRowSpan(options.rowSpan);this.m_modelIndex=options.modelIndex;this.m_row=options.row;if(val!=undefined||(this.m_gridColumn&&this.m_gridColumn.getFormatFunction())){this.setValue(val);}}
extend(GridCell,ControlContainer);GridCell.prototype.DEF_TAG_NAME="TD";GridCell.prototype.m_gridColumn;GridCell.prototype.m_value;GridCell.prototype.detailToggles;GridCell.prototype.setColSpan=function(v){if(v)this.setAttr("colspan",v);}
GridCell.prototype.getColSpan=function(){return this.getAttr("colspan");}
GridCell.prototype.setRowSpan=function(v){if(v)this.setAttr("rowspan",v);}
GridCell.prototype.getRowSpan=function(){return this.getAttr("rowspan");}
GridCell.prototype.setGridColumn=function(v){this.m_gridColumn=v;}
GridCell.prototype.getGridColumn=function(){return this.m_gridColumn;}
GridCell.prototype.formatValue=function(val){if(this.m_gridColumn){var elem_cnt=0;if(this.m_elements){elem_cnt=this.getCount();}
var f_func=this.m_gridColumn.getFormatFunction();if(f_func){val=f_func.call(this.m_gridColumn,this.m_gridColumn.getGrid().getModel().getFields(),this);}
if(elem_cnt==1){for(var k in this.m_elements){this.m_elements[k].setValue(val);val="";break;}}
else if(elem_cnt){}
else if(!f_func){val=this.m_gridColumn.formatVal(val);if(this.m_gridColumn.getFormat()){val=CommonHelper.format(this.m_gridColumn.getFormat(),val);}
else if(this.m_gridColumn.getMask()){var input=new Control(this.getId()+":mask","input",{"attrs":{"value":val},"visible":false});$(input.getNode()).mask(this.m_gridColumn.getMask());val=input.m_node.value;}
else if(this.m_gridColumn.getAssocClassList()){var assoc_class=this.m_gridColumn.getAssocClassList()[val.toString()];if(assoc_class){this.addElement(new Control(this.getId()+":assoc-img","i",{"className":assoc_class}));}
val="";}
else if(this.m_gridColumn.getAssocImageList()){var img=this.m_gridColumn.getAssocImageList()[val];if(img){this.addElement(new Control(this.getId()+":assoc-img","img",{"attrs":{"src":img}}));}
val="";}
else if(this.m_gridColumn.getAssocValueList()){val=(val===null||val=="")?"null":val;val=this.m_gridColumn.getAssocValueList()[val];}
else if(val&&this.m_gridColumn.getAssocIndex()){var v=this.m_gridColumn.getAssocIndex();val=val[v];}}}
return val;}
GridCell.prototype.setValue=function(val){this.m_value=val;val=this.formatValue(val);GridCell.superclass.setValue.call(this,val);}
GridCell.prototype.getValue=function(){return this.m_value;}
GridCell.prototype.getFormattedValue=function(){return this.formatValue(this.m_value);}
GridCell.prototype.toDOM=function(parent){GridCell.superclass.toDOM.call(this,parent);if(this.m_gridColumn&&this.m_gridColumn.getMaster()){this.m_detailToggle=new GridCellDetailToggle(this.getId()+":det_toggle",{"gridCell":this,"detailViewClass":this.m_gridColumn.getDetailViewClass(),"detailViewOptions":this.m_gridColumn.getDetailViewOptions()});if(this.getNode()&&this.getNode().firstChild)
this.m_detailToggle.toDOMBefore(this.getNode().firstChild);}}
GridCell.prototype.delDOM=function(){if(this.m_detailToggl){this.m_detailToggle.delDOM();delete this.m_detailToggle;}
GridCell.superclass.delDOM.call(this);}
GridCell.prototype.getDetailToggle=function(){return this.m_detailToggle;} 
function GridCellHead(id,options){options=options||{};options.attrs=options.attrs||{};options.value=options.value||options.labelCaption||options.alias;if(options.value==undefined&&options.columns&&options.columns.length){options.value="";for(var i=0;i<options.columns.length;i++){if(options.columns[i].getField()){options.value+=((options.value=="")?"":" ")+options.columns[i].getField().getAlias();}}}
if(options.visible!=undefined&&!options.visible){options.colAttrs=options.colAttrs||{};options.attrs["class"]=this.CLASS_INVISIBLE;options.colAttrs["class"]=this.CLASS_INVISIBLE;}
if(options.colAlign){options.colAttrs=options.colAttrs||{};options.colAttrs.align=options.colAlign;}
if((!options.colAttrs||!options.colAttrs.align)&&options.columns&&options.columns.length){options.colAttrs=options.colAttrs||{};if((window.GridColumnDate&&options.columns[0]instanceof GridColumnDate)||(window.GridColumnPhone&&options.columns[0]instanceof GridColumnPhone)||(window.GridColumnEmail&&options.columns[0]instanceof GridColumnEmail)){options.colAttrs.align="center";}
else if(options.columns[0]instanceof GridColumnFloat){options.colAttrs.align="right";}}
options.attrs.align=options.attrs.align||this.DEF_ALIGN;this.m_sortable=options.sortable;if(options.sortable){options.attrs.title=options.attrs.title||this.TITLE;}
GridCellHead.superclass.constructor.call(this,id,options);if(options.sortable){if(options.sort){this.setSort(options.sort);}
if(options.sortFieldId){this.setSortFieldId(options.sortFieldId);}
this.setSortable(true);options.attrs.title=options.attrs.title||this.TITLE;}
this.setColumns(options.columns);this.setColAttrs(options.colAttrs);if(options.colControlContainer){this.m_colControlContainer=options.colControlContainer;}
var self=this;this.m_sorting=function(event){self.sorting(event);}}
extend(GridCellHead,GridCell);GridCellHead.prototype.SORT_UP_CLASS="grid-sort glyphicon glyphicon-sort-by-attributes";GridCellHead.prototype.SORT_DOWN_CLASS="grid-sort glyphicon glyphicon-sort-by-attributes-alt";GridCellHead.prototype.SORT_UP="asc";GridCellHead.prototype.SORT_DOWN="desc";GridCellHead.prototype.SORT_CLASS="sortable";GridCellHead.prototype.DEF_ALIGN="center";GridCellHead.prototype.DEF_TAG_NAME="TH";GridCellHead.prototype.GLYPH_TAG="SPAN";GridCellHead.prototype.m_colAttrs;GridCellHead.prototype.m_columns;GridCellHead.prototype.m_onRefresh;GridCellHead.prototype.initSort=function(sort){var el=document.createElement(this.GLYPH_TAG);el.className=(sort==this.SORT_UP)?this.SORT_UP_CLASS:this.SORT_DOWN_CLASS;el.name="sorter";var divs=this.m_node.getElementsByTagName("div");var parent=this.m_node;if(divs&&divs.length){parent=divs[0];}
var els=DOMHelper.getElementsByAttr(el.name,parent,"name",true,this.GLYPH_TAG)
if(els&&els.length){DOMHelper.delNode(els[0]);}
parent.appendChild(el);}
GridCellHead.prototype.updateColManager=function(){if(this.m_colManager&&this.m_colManager.getColOrder()){var col_order=this.m_colManager.getColOrder();var name=this.getName();for(var i=0;i<col_order.length;i++){var this_col=(col_order.colId=name);if(this_col){col_order.directs=this.getAttr("sort");}
col_order.checked=this_col;}}}
GridCellHead.prototype.sorting=function(event){event=EventHelper.fixMouseEvent(event);var th;if(event.target.nodeName.toLowerCase()=="th"){th=event.target;}
else{th=DOMHelper.getParentByTagName(event.target,"th");}
if(th){var sort=th.getAttribute("sort");if(sort==this.SORT_UP){this.setSort(this.SORT_DOWN);this.updateColManager();if(this.m_onRefresh){this.m_onRefresh();}}
else if(sort==this.SORT_DOWN){this.setSort(this.SORT_UP);this.updateColManager();if(this.m_onRefresh){this.m_onRefresh();}}
else{var trs=th.parentNode.childNodes;for(var i=0;i<trs.length;i++){if(trs[i].getAttribute("sort")){DOMHelper.delAttr(trs[i],"sort");var imgs=trs[i].getElementsByTagName(this.GLYPH_TAG);if(imgs&&imgs.length){DOMHelper.delNode(imgs[0]);}
break;}}
this.makeSortable();this.setAttr("sort",this.SORT_UP);this.initSort();this.updateColManager();if(this.m_onRefresh){this.m_onRefresh();}}}}
GridCellHead.prototype.makeSortable=function(){if(this.m_sortable){EventHelper.add(this.m_node,"click",this.m_sorting,true);}}
GridCellHead.prototype.makeUnSortable=function(){if(this.m_sortable){EventHelper.del(this.m_node,"click",this.m_sorting,true);}}
GridCellHead.prototype.getColAttrs=function(){return this.m_colAttrs;}
GridCellHead.prototype.setColAttrs=function(v){this.m_colAttrs=v;}
GridCellHead.prototype.getColControlContainer=function(){return this.m_colControlContainer;}
GridCellHead.prototype.getAlign=function(){return this.m_node.align;}
GridCellHead.prototype.setAlign=function(v){this.m_node.align=v;}
GridCellHead.prototype.getSortable=function(){return(DOMHelper.hasClass(this.m_node,this.SORT_CLASS));}
GridCellHead.prototype.setSortable=function(v){if(v){DOMHelper.addClass(this.m_node,this.SORT_CLASS);}
else{DOMHelper.delClass(this.m_node,this.SORT_CLASS);}}
GridCellHead.prototype.setColumns=function(v){this.m_columns=v;if(this.m_columns){var alias=this.getText();for(var i=0;i<this.m_columns.length;i++){if(this.m_columns[i].getField()){this.m_columns[i].setFieldAlias(alias);}}}}
GridCellHead.prototype.getColumns=function(){return this.m_columns;}
GridCellHead.prototype.setSortFieldId=function(v){this.setAttr("sortFieldId",v);}
GridCellHead.prototype.getSortFieldId=function(){return this.getAttr("sortFieldId");}
GridCellHead.prototype.getSort=function(){return this.getAttr("sort");}
GridCellHead.prototype.setSort=function(v){this.setAttr("sort",v);var imgs=this.m_node.getElementsByTagName(this.GLYPH_TAG);if(imgs&&imgs.length){imgs[0].className=(v==this.SORT_DOWN)?this.SORT_DOWN_CLASS:this.SORT_UP_CLASS;}}
GridCellHead.prototype.toDOM=function(parent){GridCellHead.superclass.toDOM.call(this,parent);if(this.getSortable()){var sort=this.getSort();if(sort){this.initSort(sort);}
this.makeSortable();}}
GridCellHead.prototype.delDOM=function(){if(this.getSortable()){this.makeUnSortable();}
GridCellHead.superclass.delDOM.call(this);}
GridCellHead.prototype.setEnabled=function(v){if(v){this.makeSortable();var els=this.m_node.getElementsByTagName(this.GLYPH_TAG);if(els&&els.length){DOMHelper.delClass(els[0],this.ATTR_DISABLED);}}
else{this.makeUnSortable();var els=this.m_node.getElementsByTagName(this.GLYPH_TAG);if(els&&els.length){DOMHelper.addClass(els[0],this.ATTR_DISABLED);}}
GridCellHead.superclass.setEnabled.call(this,v);}
GridCellHead.prototype.setColManager=function(v){this.m_colManager=v;} 
function GridCellHeadMark(id,options){options=options||{};options.title=this.COL_TITLE;options.attrs=options.attrs||{};options.attrs.style=options.attrs.style||"";options.attrs.style+="cursor:pointer;"
options.columns=[new GridColumn({"ctrlEdit":false,"searchable":false,"cellElements":[{"elementClass":Control,"elementOptions":{"tagName":"INPUT","attrs":{"type":"checkbox","class":this.MARK_CLASS}}}]})];var self=this;options.events={"click":function(){self.markAll();}}
options.elements=[new Control(null,"SPAN",{"attrs":{"class":"glyphicon glyphicon-check"}})];GridCellHeadMark.superclass.constructor.call(this,id,options);}
extend(GridCellHeadMark,GridCellHead);GridCellHeadMark.prototype.MARK_CLASS="selectMark";GridCellHeadMark.prototype.m_stateChecked;GridCellHeadMark.prototype.markAll=function(){var t=DOMHelper.getParentByTagName(this.getNode(),"TABLE");var marks=DOMHelper.getElementsByAttr(this.MARK_CLASS,t,"class",false,"INPUT");this.m_stateChecked=!this.m_stateChecked;for(var i=0;i<marks.length;i++){marks[i].checked=this.m_stateChecked;}}
GridCellHeadMark.prototype.getSelectedKeys=function(){var keys=[];var t=DOMHelper.getParentByTagName(this.getNode(),"TABLE");var marks=DOMHelper.getElementsByAttr("selectMark",t,"class",false,"INPUT");for(var i=0;i<marks.length;i++){if(marks[i].checked){var r=DOMHelper.getParentByTagName(marks[i],"TR");if(r){keys.push(CommonHelper.unserialize(r.getAttribute("keys")));}}}
return keys;} 
function GridCellFoot(id,options){options=options||{};GridCellFoot.superclass.constructor.call(this,id,options);this.setCalc(options.calc);this.setCalcBegin(options.calcBegin);if(!options.calcEnd&&options.totalFieldId){options.calcEnd=(function(totalFieldId){return function(m){this.setValue(m.getAttr(totalFieldId));}})(options.totalFieldId);}
this.setCalcEnd(options.calcEnd);this.setCalcOper(options.calcOper);this.setCalcFieldId(options.calcFieldId);}
extend(GridCellFoot,GridCell);GridCellFoot.prototype.CALC_OPER_SUM="sum";GridCellFoot.prototype.CALC_OPER_AVG="avg";GridCellFoot.prototype.m_calc;GridCellFoot.prototype.m_calcBegin;GridCellFoot.prototype.m_calcEnd;GridCellFoot.prototype.m_calcOper;GridCellFoot.prototype.m_total;GridCellFoot.prototype.m_calcFieldId;GridCellFoot.prototype.m_count;GridCellFoot.prototype.getCalcFieldId=function(v){return this.m_calcFieldId;}
GridCellFoot.prototype.setCalcFieldId=function(v){this.m_calcFieldId=v;}
GridCellFoot.prototype.getTotal=function(v){return this.m_total;}
GridCellFoot.prototype.setTotal=function(v){this.m_total=v;}
GridCellFoot.prototype.getCalcTotal=function(v){return this.m_calcTotal;}
GridCellFoot.prototype.setCalcOper=function(v){this.m_calcOper=v;if(this.m_calcOper){this.m_calc=this.m_calc||function(model){var f_val=model.getFieldValue(this.m_calcFieldId);if(isNaN(f_val))f_val=0;this.setTotal(this.getTotal()+f_val);if(this.m_calcOper==this.CALC_OPER_AVG){this.m_count+=1;}}
this.m_calcBegin=this.m_calcBegin||function(){this.setTotal(0);this.m_count=0;}
this.m_calcEnd=this.m_calcEnd||function(){var res;if(this.m_calcOper==this.CALC_OPER_AVG){res=(this.m_count>0)?(this.getTotal()/this.m_count):0;}
else{res=this.getTotal();}
this.setValue(res);}}}
GridCellFoot.prototype.setCalc=function(f){this.m_calc=f;}
GridCellFoot.prototype.getCalc=function(){return this.m_calc;}
GridCellFoot.prototype.setCalcBegin=function(f){this.m_calcBegin=f;}
GridCellFoot.prototype.getCalcBegin=function(f){return this.m_calcBegin;}
GridCellFoot.prototype.setCalcEnd=function(f){this.m_calcEnd=f;}
GridCellFoot.prototype.getCalcEnd=function(){return this.m_calcEnd;} 
function GridCellPhone(id,options){options=options||{};this.m_telExt=options.telExt;this.m_onConnected=options.onConnected;GridCellPhone.superclass.constructor.call(this,id,options);}
extend(GridCellPhone,GridCell);GridCellPhone.prototype.toDOM=function(parent){var self=this;this.m_cont=new Control(null,"A",{"value":this.getFormattedValue(),"attrs":{"tel":this.getValue()},"title":this.TITLE,"events":{"click":function(){window.getApp().makeCall(self.m_cont.getAttr("tel"));}}});this.setValue("");GridCellPhone.superclass.toDOM.call(this,parent);this.m_cont.toDOM(this.m_node);} 
GridCellPhone.prototype.TITLE="Набрать номер";GridCellPhone.prototype.CONTROLLER_NOT_DEFIND="Контроллер звонков Caller_Controller не найден!"; 
function GridCellDetailToggle(id,options){options=options||{};options.attrs=options.attrs||{};var tag_name=options.tagName||this.DEF_TAG_NAME;options.className=options.className||this.DEF_CLASS;options.attrs.title=this.TITLE;options.events=options.events||{};var self=this;options.events.click=function(e){self.onDetailToggle.call(self,e.target);}
this.setToggleSpeed(options.toggleSpeed||this.DEF_TOGGLE_SPEED);this.m_gridCell=options.gridCell;this.m_detailViewClass=options.detailViewClass;this.m_detailViewOptions=options.detailViewOptions;GridCellDetailToggle.superclass.constructor.call(this,id,tag_name,options);}
extend(GridCellDetailToggle,Control);GridCellDetailToggle.prototype.m_detailVisible;GridCellDetailToggle.prototype.m_gridCell;GridCellDetailToggle.prototype.m_detailViewClass;GridCellDetailToggle.prototype.m_detailViewOptions;GridCellDetailToggle.prototype.m_toggleSpeed;GridCellDetailToggle.prototype.m_detailRow;GridCellDetailToggle.prototype.DEF_TOGGLE_SPEED=300;GridCellDetailToggle.prototype.DEF_TAG_NAME="SPAN";GridCellDetailToggle.prototype.DEF_CLASS="glyphicon glyphicon-triangle-right pull-left detailToggle";GridCellDetailToggle.prototype.onDetailToggle=function(pic){if(!this.m_detailVisible){var detail_view_id=CommonHelper.uniqid();var tr=this.m_gridCell.getNode().parentNode;this.m_detailRow=document.createElement(tr.tagName);this.m_detailRow.className="grid_details";this.m_detailRow.setAttribute("for_keys",tr.getAttribute("keys"));this.m_detailRow.setAttribute("detail_view_id",detail_view_id);var v_opts=this.m_detailViewOptions||{};v_opts.tagName="DIV";var grid=this.m_gridCell.getGridColumn().getGrid();this.m_gridRefreshInterval=grid.getRefreshInterval();grid.setRefreshInterval(0);grid.setModelToCurrentRow(tr);var fields=grid.getModel().getFields();for(var m_id in v_opts.detailFilters){for(i=0;i<v_opts.detailFilters[m_id].length;i++){if(fields[v_opts.detailFilters[m_id][i].masterFieldId]){v_opts.detailFilters[m_id][i].val=fields[v_opts.detailFilters[m_id][i].masterFieldId].getValueXHR();}}}
var app=window.getApp();if(!app.m_detailViews){app.m_detailViews={};}
app.m_detailViews[detail_view_id]=new this.m_detailViewClass(detail_view_id,v_opts);let viewCont=document.createElement("TD");viewCont.setAttribute("style","display: none;");viewCont.setAttribute("colspan",tr.cells.length);if(tr.nextSibling){tr.parentNode.insertBefore(this.m_detailRow,tr.nextSibling);}else{tr.parentNode.appendChild(this.m_detailRow);}
app.m_detailViews[detail_view_id].toDOM(viewCont);this.m_detailRow.appendChild(viewCont);$(viewCont).slideToggle(300);}else{var tr=DOMHelper.getParentByTagName(pic,"tr");var detail_view_id=tr.nextSibling.getAttribute("detail_view_id");if(detail_view_id){window.getApp().m_detailViews[detail_view_id].delDOM();}
var grid=this.m_gridCell.getGridColumn().getGrid();grid.setRefreshInterval(this.m_gridRefreshInterval);if(this.m_detailViewOptions&&this.m_detailViewOptions.refreshOnHide===true){grid.onRefresh();}
DOMHelper.delNode(this.m_detailRow);}
this.setDetailVisible(!this.m_detailVisible);}
GridCellDetailToggle.prototype.setToggleSpeed=function(v){this.m_toggleSpeed=v;}
GridCellDetailToggle.prototype.getToggleSpeed=function(){return this.m_toggleSpeed;}
GridCellDetailToggle.prototype.getDetailVisible=function(){return this.m_detailVisible;}
GridCellDetailToggle.prototype.setDetailVisible=function(v){this.m_detailVisible=v;$(this.m_node).toggleClass("rotate-90");}
GridCellDetailToggle.prototype.setDetailRow=function(v){this.m_detailRow=v;} 
GridCellDetailToggle.prototype.TITLE="Показать/скрыть расшифровку"; 
function GridHead(id,options){options=options||{};GridHead.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);this.setRowClass(options.rowClass);this.setRowOptions(options.rowOptions);}
extend(GridHead,ControlContainer);GridHead.prototype.DEF_TAG_NAME="THEAD";GridHead.prototype.m_rowClass;GridHead.prototype.m_rowClassOptions;GridHead.prototype.getColumns=function(){var col_list=[];for(var row_id in this.m_elements){var row_cols=this.m_elements[row_id].m_elements;for(var col_id in row_cols){var columns=row_cols[col_id].getColumns();if(!columns)continue;for(var i=0;i<columns.length;i++){columns[i].setHeadCell(row_cols[col_id]);col_list.push(columns[i]);}}}
return col_list;}
GridHead.prototype.setRowClass=function(v){v=v?v:GridRow;if(CommonHelper.isArray(v)){this.m_rowClass=v;}
else{this.m_rowClass=[v];}}
GridHead.prototype.getRowClass=function(ind){return this.m_rowClass[(ind!=undefined)?ind:0];}
GridHead.prototype.setRowOptions=function(v){if(CommonHelper.isArray(v)){this.m_rowOptions=v;}
else{this.m_rowOptions=[v];}}
GridHead.prototype.getRowOptions=function(ind){return(this.m_rowOptions)?this.m_rowOptions[(ind!=undefined)?ind:0]:{};} 
function GridRow(id,options){options=options||{};GridRow.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(GridRow,ControlContainer);GridRow.prototype.DEF_TAG_NAME="tr";GridRow.prototype.m_initColumns;GridRow.prototype.setInitColumnOrder=function(){this.m_initColumns={};for(var id in this.m_elements){this.m_initColumns[id]=CommonHelper.clone(this.m_elements[id]);}}
GridRow.prototype.setColumnOrder=function(orderArray){this.m_elements={};for(var i=0;i<orderArray.length;i++){if(!orderArray[i].checked)continue;if(this.m_initColumns[orderArray[i].colId]){this.m_elements[orderArray[i].colId]=this.m_initColumns[orderArray[i].colId];}}}
GridRow.prototype.getInitColumns=function(){return this.m_initColumns;} 
function GridFoot(id,options){options=options||{};this.setAutoCalc(options.autoCalc);GridFoot.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(GridFoot,ControlContainer);GridFoot.prototype.DEF_TAG_NAME="tfoot";GridFoot.prototype.m_autoCalc;GridFoot.prototype.calc=function(model){if(this.getAutoCalc()){for(var r in this.m_elements){for(var c in this.m_elements[r].m_elements){var cell=this.m_elements[r].m_elements[c];var f=(cell.getCalc)?cell.getCalc():null;if(f){f.call(cell,model);}}}}}
GridFoot.prototype.calcBegin=function(model){if(this.getAutoCalc()){for(var r in this.m_elements){for(var c in this.m_elements[r].m_elements){var cell=this.m_elements[r].m_elements[c];var f=(cell.getCalcBegin)?cell.getCalcBegin():null;if(f){f.call(cell,model);}}}}}
GridFoot.prototype.calcEnd=function(model){if(this.getAutoCalc()){for(var r in this.m_elements){for(var c in this.m_elements[r].m_elements){var cell=this.m_elements[r].m_elements[c];var f=(cell.getCalcEnd)?cell.getCalcEnd():null;if(f){f.call(cell,model);}}}}}
GridFoot.prototype.getAutoCalc=function(){return this.m_autoCalc;}
GridFoot.prototype.setAutoCalc=function(v){this.m_autoCalc=v;} 
function GridBody(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;GridBody.superclass.constructor.call(this,id,options.tagName,options);}
extend(GridBody,ControlContainer);GridBody.prototype.DEF_TAG_NAME="tbody"; 
function Grid(id,options){options=options||{};options.className=(options.className!=undefined)?options.className:this.DEF_CLASS;var n=CommonHelper.nd(id,this.getWinObjDocument());if(n){n.id=n.id+":cont";}
this.setOnSelect(options.onSelect||window.onSelect);this.setOnSearch(options.onSearch);this.setCmdInsert((options.cmdInsert!=undefined)?options.cmdInsert:((options.commands&&options.commands.cmdInsert!=undefined)?options.commands.cmdInsert:true));this.setCmdEdit((options.cmdEdit!=undefined)?options.cmdEdit:((options.commands&&options.commands.cmdEdit!=undefined)?options.commands.cmdEdit:this.getCmdInsert()));this.setCmdCopy((options.cmdCopy!=undefined)?options.cmdCopy:((options.commands&&options.commands.cmdCopy!=undefined)?options.commands.cmdCopy:this.getCmdInsert()));this.setCmdDelete((options.cmdDelete!=undefined)?options.cmdDelete:((options.commands&&options.commands.cmdDelete!=undefined)?options.commands.cmdDelete:this.getCmdInsert()));this.setCmdPrint((options.cmdPrint!=undefined)?options.cmdPrint:((options.commands&&options.commands.cmdPrint!=undefined)?options.commands.cmdPrint:true));Grid.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);this.setModel(options.model);this.setEditWinClass(options.editWinClass);this.setEditWinOptions(options.editWinOptions);this.setEditViewClass(options.editViewClass);this.setEditViewOptions(options.editViewOptions);this.setInsertViewOptions(options.insertViewOptions||options.editViewOptions);this.setEditInline(options.editInline);this.setRefreshInterval(options.refreshInterval||this.DEF_REFRESH_INTERVAL);this.setRowCommandClass(options.rowCommandClass);this.setAutoRefresh((options.autoRefresh!=undefined)?options.autoRefresh:false);if(options.enabled!=undefined){if(options.head)options.head.enabled=options.enabled;if(options.body)options.body.enabled=options.enabled;if(options.foot)options.foot.enabled=options.enabled;if(options.commands)options.commands.enabled=options.enabled;}
this.setHead(options.head);this.setShowHead((options.showHead!=undefined)?options.showHead:true);this.setBody(options.body||new GridBody(id+":body",{"tagName":options.bodyTagName||this.DEF_BODY_TAG_NAME,"className":options.bodyClassName}));this.setFoot(options.foot);this.setErrorControl((options.errorControl!==undefined)?options.errorControl:(this.m_html?null:new ErrorControl(id+":error")));this.setSearchInfControl((options.searchInfControl!==undefined)?options.searchInfControl:(this.m_html?null:new GridSearchInf(id+":serchInf",{"grid":this})));this.m_selectedRowClass=options.selectedRowClass||this.SELECTED_ROW_CLASS;this.m_selectedCellClass=options.selectedCellClass||this.SELECTED_CELL_CLASS;if(options.commands){options.commands.setGrid(this);this.setCommands(options.commands);this.setCmdInsert(options.commands.getCmdInsert());this.setCmdEdit(options.commands.getCmdEdit());this.setCmdCopy(options.commands.getCmdCopy());this.setCmdDelete(options.commands.getCmdDelete());this.setCmdPrint(options.commands.getCmdPrint());}
var self=this;if(options.pagination){this.setPagination(options.pagination);if(options.model){options.pagination.setFrom(options.model.getPageFrom());}
options.pagination.setGrid(this)}
this.setPopUpMenu(options.popUpMenu);if(window.getWidthType()=="sm"){options.rowSelect=true;}
this.setRowSelect((options.rowSelect!=undefined)?options.rowSelect:true);this.setLastRowSelectOnInit((options.lastRowSelectOnInit!=undefined)?options.lastRowSelectOnInit:false);this.setContClassName(options.contClassName);this.setContTagName(options.contTagName||"DIV");this.setLastRowFooter(options.lastRowFooter);this.m_onEventSetRowClass=options.onEventSetRowClass;this.m_onEventAddRow=options.onEventAddRow;this.m_onEventSetRowOptions=options.onEventSetRowOptions;this.m_onEventAddCell=options.onEventAddCell;this.m_onEventSetCellOptions=options.onEventSetCellOptions;this.m_onEventGetData=options.onEventGetData;this.setResize((options.resize!=undefined)?options.resize:true);var nav=(options.navigate!=undefined)?options.navigate:true;this.setNavigate(nav);this.setNavigateClick((options.navigateClick!=undefined)?options.navigate:nav);this.setNavigateMouse((options.navigateMouse!=undefined)?options.navigateMouse:nav);this.setInlineInsertPlace((options.inlineInsertPlace!=undefined)?options.inlineInsertPlace:"first");this.m_onRefresh=options.onRefresh;this.m_keyIds=options.keyIds||["id"];this.m_keyDown=function(e){self.onKeyDown(e);};this.m_keyPress=function(e){self.onKeyPress(e);};this.m_wheelEvent=function(e){self.onWheel(e);};this.m_focusEvent=function(){self.setFocused(true);}
this.m_blurEvent=function(){self.setFocused(false);}
this.m_clickEvent=options.clickEvent||function(ev){self.onClick(ev);};this.m_dblClickEvent=function(ev){self.onDblClick(ev);};var head=this.getHead();if(head){var col_man,col_order,col_visib,col_filter;var cmd=this.getCommands();if(cmd&&options.popUpMenu&&cmd.setPopUpMenu){cmd.setPopUpMenu(options.popUpMenu);}
if(cmd&&cmd.getCmdColManager){col_man=cmd.getCmdColManager();if(col_man){col_order=col_man.getColOrder();col_visib=col_man.getColVisibility();}}
var col_names={};for(var row in head.m_elements){var head_row=head.m_elements[row];head_row.setInitColumnOrder();for(var col in head_row.m_elements){if(head_row.m_elements[col].getSortable()){var f_name=head_row.m_elements[col].getName();if(f_name){col_names[f_name]=head_row.m_elements[col];}
head_row.m_elements[col].m_onRefresh=function(){self.onRefresh();}
head_row.m_elements[col].setColManager(col_man);if(col_order&&col_order.length){head_row.m_elements[col].setSortable(false);}}}
if(col_visib&&col_visib.length){head_row.setColumnOrder(col_visib);}}
if(col_man){col_man.init();}
if(col_order){for(var i=0;i<col_order.length;i++){var f_name=col_order[i].colId;if(col_names[f_name]){if(col_order[i].checked&&col_order[i].direct!="undefined"&&col_names[f_name]){col_names[f_name].setSortable(true);col_names[f_name].setSort(col_order[i].direct);}}}}}
if(options.fixedHeader){this.m_fixedHeader=true;this.m_fixedOffset=options.fixedOffset||0;}
this.m_editWinObjList={};}
extend(Grid,Control);Grid.prototype.DEF_TAG_NAME="TABLE";Grid.prototype.DEF_ROW_TAG_NAME="TR";Grid.prototype.DEF_CELL_TAG_NAME="TD";Grid.prototype.DEF_BODY_TAG_NAME="TBODY";Grid.prototype.SELECTED_ROW_CLASS="success";Grid.prototype.SELECTED_CELL_CLASS="info";Grid.prototype.FOCUSED_CLASS="focused";Grid.prototype.DEF_CLASS="table table-bordered table-responsive table-striped smallWidthCardFormat";Grid.prototype.DEF_TAB_INDEX="100";Grid.prototype.DEF_REFRESH_INTERVAL="0";Grid.prototype.CONSTR_FADE_CLASS="viewFadeOnConstruct";Grid.prototype.INCORRECT_VAL_CLASS="error";Grid.prototype.VAL_INIT_ATTR="initValue";Grid.prototype.m_commands;Grid.prototype.m_pagination;Grid.prototype.m_head;Grid.prototype.m_body;Grid.prototype.m_foot;Grid.prototype.m_editInline;Grid.prototype.m_editWinClass;Grid.prototype.m_editWinObj;Grid.prototype.m_editWinObjList;Grid.prototype.m_editViewClass;Grid.prototype.m_editViewOptions;Grid.prototype.m_insertViewOptions;Grid.prototype.m_editViewObj;Grid.prototype.m_rowCommandPanelClass;Grid.prototype.m_refInterval;Grid.prototype.m_refIntervalObj;Grid.prototype.m_onSelect;Grid.prototype.m_onEventSetRowClass;Grid.prototype.m_onEventDelete;Grid.prototype.m_onEventInsert;Grid.prototype.m_contClassName;Grid.prototype.m_contTagName;Grid.prototype.m_popUpMenu;Grid.prototype.m_rowSelect;Grid.prototype.m_lastRowSelectOnInit;Grid.prototype.m_resize;Grid.prototype.m_navigate;Grid.prototype.m_navigateClick;Grid.prototype.m_navigateMouse;Grid.prototype.m_cmdInsert;Grid.prototype.m_cmdEdit;Grid.prototype.m_cmdCopy;Grid.prototype.m_cmdDelete;Grid.prototype.m_cmdPrint;Grid.prototype.m_model;Grid.prototype.m_selectedRowKeys;Grid.prototype.m_selectedRowId;Grid.prototype.m_rowClass;Grid.prototype.m_container;Grid.prototype.m_containerScroll;Grid.prototype.m_lastRowFooter;Grid.prototype.m_keyDown;Grid.prototype.m_keyPress;Grid.prototype.m_wheelEvent;Grid.prototype.m_interval;Grid.prototype.m_oldParent;Grid.prototype.m_showHead;Grid.prototype.m_selectedRowClass;Grid.prototype.m_errorControl;Grid.prototype.getRowHeight=function(){var row_n=this.getSelectedRow();if(row_n){return $(row_n).height();}}
Grid.prototype.initNavigation=function(){this.setFocused(true);EventHelper.add(this.m_node,"focus",this.m_focusEvent,false);EventHelper.add(this.m_node,"blur",this.m_blurEvent,false);}
Grid.prototype.addEvents=function(){if(this.m_navigate){EventHelper.add(this.m_node,'keydown',this.m_keyDown,false);EventHelper.add(this.m_node,'keypress',this.m_keyPress,false);}
if(this.m_navigateClick){EventHelper.add(this.m_node,"click",this.m_clickEvent,false);EventHelper.add(this.m_node,"contextmenu",this.m_clickEvent,false);if(this.m_navigateMouse){EventHelper.addWheelEvent(this.m_node,this.m_wheelEvent,false);}}
if(this.m_cmdEdit||this.m_onSelect){EventHelper.add(this.m_node,"dblclick",this.m_dblClickEvent,false);}}
Grid.prototype.delEvents=function(){EventHelper.del(this.m_node,'keydown',this.m_keyDown,false);EventHelper.del(this.m_node,'keypress',this.m_keyPress,false);EventHelper.del(this.m_node,"click",this.m_clickEvent,false);EventHelper.del(this.m_node,"contextevent",this.m_clickEvent,false);EventHelper.delWheelEvent(this.m_node,this.m_wheelEvent,false);if(this.m_cmdEdit||this.m_onSelect){EventHelper.del(this.m_node,"dblclick",this.m_dblClickEvent,false);}}
Grid.prototype.selectFirstSelectableCell=function(row){var cells=row.getElementsByTagName(this.DEF_CELL_TAG_NAME);for(var i=0;i<cells.length;i++){if(this.getCellSelectable(cells[i])){this.selectCell(cells[i]);return cells[i];}}}
Grid.prototype.setSelection=function(){var selected=false;if(this.m_selectedRowKeys){var rows=this.m_body.getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);for(var i=0;i<rows.length;i++){if(rows[i].getAttribute("keys")==this.m_selectedRowKeys){if(this.m_rowSelect){this.selectRow(rows[i]);selected=true;}
else{if(rows[i].childNodes.length>this.m_selectedCellInd){this.selectCell(rows[i].childNodes[this.m_selectedCellInd]);}
else{this.selectFirstSelectableCell(rows[i]);}
selected=true;}
break;}}}
if(!selected){var rows=this.getBody().getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);if(rows&&rows.length>0){var sel_node;if(this.m_rowSelect){if(this.m_lastRowSelectOnInit){for(var i=rows.length-1;i>0;i--){if(this.getRowSelectable(rows[i])){sel_node=rows[i];this.selectRow(sel_node);break;}}}
else{for(var i=0;i<rows.length;i++){if(this.getRowSelectable(rows[i])){this.selectRow(rows[i]);break;}}}}
else{var sel_node=this.selectFirstSelectableCell((this.m_lastRowSelectOnInit)?rows[rows.length-1]:rows[0]);}
if(this.m_lastRowSelectOnInit){$(sel_node).get(0).scrollIntoView();}}}}
Grid.prototype.keyPressEvent=function(keyCode,event){var res=false;if(keyCode==13){res=this.onEditSelect(event);}
else if(keyCode==33){}
else if(keyCode==34){}
else if(keyCode==35){}
else if(keyCode==36){}
else if(keyCode==37){res=this.onPreviousColumn();}
else if(keyCode==38){res=this.onPreviousRow();}
else if(keyCode==39){res=this.onNextColumn();}
else if(keyCode==40){res=this.onNextRow();}
else if(keyCode==45){res=this.onInsert();}
else if(keyCode==46){var cmd=this.getCommands?this.getCommands():null;if(cmd&&cmd.getCmdDelete){var cmd_ctrl=cmd.getCmdDelete();if(cmd_ctrl){cmd_ctrl.onCommand();}}}
else if(keyCode==120){res=this.onCopy();}
else if(keyCode==80&&event.ctrlKey){res=this.onPrint();}
else if(keyCode==70&&event.ctrlKey&&this.m_onSearchDialog){this.m_onSearchDialog();res=true;}
else if(keyCode==71&&event.ctrlKey&&this.m_onSearchReset){this.m_onSearchReset();res=true;}
return res;}
Grid.prototype.onPreviousColumn=function(){res=false;if(!this.m_rowSelect){var selected_node=this.getSelectedNode();if(selected_node&&selected_node.previousSibling&&this.getCellSelectable(selected_node.previousSibling)){this.selectCell(selected_node.previousSibling,selected_node);}
res=true;}
return res;}
Grid.prototype.onNextColumn=function(){var res=false;if(!this.m_rowSelect){var selected_node=this.getSelectedNode();if(selected_node&&selected_node.nextSibling&&this.getCellSelectable(selected_node.nextSibling)){this.selectCell(selected_node.nextSibling,selected_node);}
res=true;}
return res;}
Grid.prototype.onPreviousRow=function(){var res=false;var selected_node=this.getSelectedNode();var new_node;if(selected_node&&this.m_rowSelect&&selected_node.previousSibling&&(selected_node.previousSibling.nodeName==selected_node.nodeName)&&this.getRowSelectable(selected_node.previousSibling)){new_node=selected_node.previousSibling;this.selectRow(new_node,selected_node);res=true;}
else if(selected_node&&!this.m_rowSelect&&selected_node.parentNode.previousSibling&&(selected_node.parentNode.previousSibling.nodeName==selected_node.parentNode.nodeName)&&this.getCellSelectable(selected_node.parentNode.previousSibling)){new_node=selected_node.parentNode.previousSibling.childNodes[DOMHelper.getElementIndex(selected_node)];this.selectCell(new_node,selected_node);res=true;}
if(res&&new_node&&!DOMHelper.inViewport(new_node,true)){$(new_node).get(0).scrollIntoView();}
return res;}
Grid.prototype.onNextRow=function(){var res=false;var selected_node=this.getSelectedNode();var new_node;if(selected_node&&this.m_rowSelect&&selected_node.nextSibling&&(selected_node.nextSibling.nodeName==selected_node.nodeName)&&this.getRowSelectable(selected_node.nextSibling)){new_node=selected_node.nextSibling;this.selectRow(new_node,selected_node);res=true;}
else if(selected_node&&!this.m_rowSelect&&selected_node.parentNode.nextSibling&&(selected_node.parentNode.nextSibling.nodeName==selected_node.parentNode.nodeName)&&this.getCellSelectable(selected_node.parentNode.nextSibling)){var ind=DOMHelper.getElementIndex(selected_node);new_node=selected_node.parentNode.nextSibling.childNodes[ind];this.selectCell(new_node,selected_node);res=true;}
if(res&&new_node&&!DOMHelper.inViewport(new_node,true)){$(new_node).get(0).scrollIntoView();}
return res;}
Grid.prototype.delRow=function(rowNode){this.deleteRowNode(rowNode);}
Grid.prototype.deleteRowNode=function(rowNode){if(!rowNode){rowNode=this.getSelectedRow();}
if(rowNode){var new_node=rowNode.nextSibling;if(!new_node){new_node=rowNode.previousSibling;}
DOMHelper.delNode(rowNode);if(new_node){if(this.m_rowSelect){this.selectRow(new_node);}
else{var tds=new_node.getElementsByTagName(this.DEF_CELL_TAG_NAME);for(var i=0;i<tds.length;i++){if(!DOMHelper.hasClass(tds[i],this.CLASS_INVISIBLE)){this.selectCell(tds[i]);break;}}}}}}
Grid.prototype.onDelete=function(callBack){var res=false;if(this.m_cmdDelete){var selected_node=this.getSelectedRow();if(selected_node){var self=this;this.setFocused(false);WindowQuestion.show({"cancel":false,"text":this.Q_DELETE,"callBack":function(r){if(r==WindowQuestion.RES_YES){self.delRow(selected_node);}
else{self.focus();}
if(callBack){callBack(r);}}});res=true;}}
return res;}
Grid.prototype.onSelect=function(){this.m_onSelect(this.getModelRow());}
Grid.prototype.onEditSelect=function(event){var res=false;if(this.m_cmdEdit&&(!this.m_onSelect||(this.m_onSelect&&event.ctrlKey))){this.edit("edit");res=true;}
else if(this.m_onSelect&&!event.ctrlKey){this.onSelect();res=true;}
return res;}
Grid.prototype.onDblClick=function(ev){ev=EventHelper.fixMouseEvent(ev);this.onEditSelect(ev);}
Grid.prototype.nodeClickable=function(node){return(this.getEnabled()&&node.nodeName==this.DEF_CELL_TAG_NAME&&DOMHelper.getParentByTagName(node,this.DEF_BODY_TAG_NAME));}
Grid.prototype.onClick=function(ev){ev=EventHelper.fixMouseEvent(ev);if(this.nodeClickable(ev.target)){if(!this.getFocused()){this.setFocused(true);}
if(this.m_rowSelect){var row=(ev.target.nodeName==this.DEF_ROW_TAG_NAME)?ev.target:DOMHelper.getParentByTagName(ev.target,this.DEF_ROW_TAG_NAME);if(row&&this.getRowSelectable(row)){this.selectRow(row,this.getSelectedNode());}}
else if(this.getCellSelectable(ev.target)){this.selectCell(ev.target,this.getSelectedNode());}}}
Grid.prototype.onKeyDown=function(e){if(this.getEnabled()&&this.getFocused()){e=EventHelper.fixKeyEvent(e);this.m_curKeyDown=e;if(this.keyPressEvent(e.keyCode,e)){if(e.preventDefault){e.preventDefault();}
e.stopPropagation();return false;}}}
Grid.prototype.onKeyPress=function(e){if(this.getEnabled()&&this.getFocused()&&!this.m_rowSelect&&this.m_onSearch&&!this.m_curKeyDown.ctrlKey){e=EventHelper.fixKeyEvent(e);if(this.m_onSearch.call(this,e)){if(e.preventDefault){e.preventDefault();}
e.stopPropagation();return false;}}}
Grid.prototype.onWheel=function(e){if(this.getEnabled()&&this.getFocused()){e=EventHelper.fixWheelEvent(e);var moved;if(e.delta>0){moved=this.onNextRow();}
else{moved=this.onPreviousRow();}
if(moved){if(e.preventDefault){e.preventDefault();}
e.stopPropagation();}
return false;}}
Grid.prototype.initEditWinObj=function(cmd){var keys={};if(cmd!="insert"){var fields=this.m_model.getFields();var key_fields=this.getKeyIds();if(key_fields&&key_fields.length){for(var i=0;i<key_fields.length;i++){if(fields[key_fields[i]]){keys[key_fields[i]]=fields[key_fields[i]].getValueXHR();}}}
else{for(var id in fields){if(fields[id].getPrimaryKey()){keys[id]=fields[id].getValueXHR();}}}}
var self=this;var view_opts;var opts=(cmd=="edit")?this.getEditViewOptions():this.getInsertViewOptions();if(typeof(opts)=="function"){view_opts=opts.call(this);}
else{view_opts={};CommonHelper.merge(view_opts,opts);}
var win_id=CommonHelper.uniqid();var win_params={"id":win_id,"app":window.getApp(),"onClose":function(res){res=res||{"updated":false};self.closeEditWinObj(res,this.getId());},"name":((this.m_editWinClass.name=="editWinClass")?this.m_editWinClass.call(this,{}):this.m_editWinClass).toString()+CommonHelper.serialize((cmd=="edit")?keys:win_id),"keys":keys,"params":{"cmd":cmd,"editViewOptions":view_opts}};var edit_cl=(this.m_editWinClass.name=="editWinClass")?this.m_editWinClass.call(this,win_params):this.m_editWinClass;this.m_editWinObjList[win_id]=new edit_cl(win_params);this.m_editWinObjList[win_id].open();}
Grid.prototype.closeEditWinObj=function(res,winId){if(this.m_editWinObjList[winId]){this.m_editWinObjList[winId].close();delete this.m_editWinObjList[winId];}
this.refreshAfterEdit(res);}
Grid.prototype.initEditView=function(parent,replacedNode,cmd,editOptions){this.setLocked(true);this.unbindPopUpMenu();var view_opts={};var opts=editOptions?editOptions:((cmd=="edit")?this.getEditViewOptions():this.getInsertViewOptions());if(typeof(opts)=="function"){view_opts=opts.call(this);}
else{view_opts={};CommonHelper.merge(view_opts,opts);}
view_opts.className=((view_opts.className!=undefined)?(view_opts.className+" "):"")+this.CONSTR_FADE_CLASS;view_opts.grid=this;var view_opts_close=view_opts.onClose;view_opts.onClose=function(res){if(view_opts_close){view_opts_close(res);}
self.closeEditView(res);};if(cmd!="copy"){view_opts.keys=this.getSelectedNodeKeys();}
view_opts.cmd=cmd;view_opts.winObj=(this.m_editWinClass)?this.m_editWinObj:this.getWinObj();view_opts.row=this.getRow();var self=this;this.m_editViewObj=new this.m_editViewClass(this.getId()+":edit-view",view_opts);}
Grid.prototype.editViewToDOM=function(parent,replacedNode,cmd){if(cmd=="insert"||cmd=="copy"){if(this.m_inlineInsertPlace=="current"){this.m_editViewObj.toDOMAfter(replacedNode);}
else if(this.m_inlineInsertPlace=="last"){this.m_editViewObj.toDOM(parent);}
else{this.m_editViewObj.toDOM(parent);}}
else{this.m_editViewObj.setReplacedNode(replacedNode);this.m_editViewObj.toDOM(parent);}}
Grid.prototype.fillEditView=function(cmd){if(cmd!="insert"&&this.m_editViewObj.read){this.m_editViewObj.read(cmd);}
else if(this.m_model){}}
Grid.prototype.closeEditView=function(res){if(this.m_editViewObj){if(this.m_editViewObj.getReplacedNode&&this.m_editViewObj.getReplacedNode()){var nd=this.m_editViewObj.getReplacedNode();DOMHelper.addClass(nd,this.CONSTR_FADE_CLASS);this.m_editViewObj.getNode().parentNode.replaceChild(nd,this.m_editViewObj.getNode());}
this.m_editViewObj.delDOM();delete this.m_editViewObj;}
if(this.m_editWin){this.m_editWin.delDOM();delete this.m_editWin;}
if(CommonHelper.nd(this.getId())){this.bindPopUpMenu();}
this.refreshAfterEdit(res);}
Grid.prototype.refreshAfterEditCont=function(res){if(res&&res.updated){if(res.newKeys&&!CommonHelper.isEmpty(res.newKeys)){this.m_selectedRowKeys=CommonHelper.serialize(res.newKeys);}
this.onRefresh();}}
Grid.prototype.refreshAfterEdit=function(res){if(CommonHelper.nd(this.getId())){if(this.m_oldParent){this.delDOM();this.toDOM(this.m_oldParent);}
if(this.getLocked()){this.setLocked(false);}
this.focus();}
else if(this.m_oldParent){this.toDOM(this.m_oldParent);if(this.getLocked()){this.setLocked(false);}
this.addEvents();this.bindPopUpMenu();}
this.refreshAfterEditCont(res);}
Grid.prototype.read=function(isCopy){}
Grid.prototype.edit=function(cmd,editOptions){if(this.m_model&&this.m_model.getLocked()){return 0;}
var sel_n=this.getSelectedRow();if(!sel_n&&cmd=="edit")return;if(cmd!="insert"){this.setModelToCurrentRow(sel_n);}
this.m_oldParent=null;if(this.getEditInline()){var parent=this.getBody().m_node;this.initEditView(parent,sel_n,cmd,editOptions);this.editViewToDOM(parent,sel_n,cmd);this.fillEditView(cmd);}
else if(this.m_editWinClass&&!this.m_editViewClass){this.initEditWinObj(cmd);}
else if(!this.m_editWinClass&&this.m_editViewClass){var parent=this.getNode().parentNode.parentNode;this.m_oldParent=this.getNode().parentNode.parentNode;this.initEditView(parent,null,cmd,editOptions);this.delDOM();this.editViewToDOM(parent,null,cmd);this.fillEditView(cmd);}
else if(this.m_editWinClass&&this.m_editViewClass){this.initEditView(null,null,cmd,editOptions);this.fillEditView(cmd);var ext_win_opts=this.getEditWinOptions();ext_win_opts.content=this.m_editViewObj;this.m_editWin=new this.m_editWinClass("editExt:"+this.getId(),ext_win_opts);this.m_editWin.open();}
else{}}
Grid.prototype.getRowSelectable=function(row){return(!DOMHelper.hasClass(row,"grid_foot")&&!DOMHelper.hasClass(row,"grid_details")&&!DOMHelper.hasClass(row,"grid_sys_row"));}
Grid.prototype.getCellSelectable=function(cell){return(!DOMHelper.hasClass(cell,"grid_sys_col")&&!DOMHelper.hasClass(cell.parentNode,"grid_foot"));}
Grid.prototype.selectNode=function(newNode,oldNode){if(oldNode){if(!this.m_rowSelect){DOMHelper.delClass(oldNode,this.m_selectedCellClass);DOMHelper.delClass(oldNode.parentNode,this.m_selectedRowClass);}
else{DOMHelper.delClass(oldNode,this.m_selectedRowClass);}}
if(newNode){if(!this.m_rowSelect){DOMHelper.addClass(newNode,this.m_selectedCellClass);DOMHelper.addClass(newNode.parentNode,this.m_selectedRowClass);}
else{DOMHelper.addClass(newNode,this.m_selectedRowClass);}}}
Grid.prototype.selectRow=function(newRow,oldRow){if(newRow){this.m_selectedRowKeys=newRow.getAttribute("keys");this.m_selectedRowId=newRow.getAttribute("id");this.selectNode(newRow,oldRow);}}
Grid.prototype.selectCell=function(newCell,oldCell){if(newCell){var tr=DOMHelper.getParentByTagName(newCell,this.DEF_ROW_TAG_NAME);if(tr){this.m_selectedRowKeys=tr.getAttribute("keys");this.m_selectedRowId=tr.getAttribute("id");this.m_selectedCellInd=DOMHelper.getElementIndex(newCell);this.selectNode(newCell,oldCell);}}}
Grid.prototype.getSelectedRow=function(){if(!this.getRowSelect()){var sel=this.getSelectedCell();if(sel){return sel.parentNode;}}
else{var sel=DOMHelper.getElementsByAttr(this.m_selectedRowClass,this.m_body.getNode(),"class",true,this.DEF_ROW_TAG_NAME);return(sel.length)?sel[0]:null;}}
Grid.prototype.getSelectedCell=function(){var sel=DOMHelper.getElementsByAttr(this.m_selectedCellClass,this.m_body.getNode(),"class",true,this.DEF_CELL_TAG_NAME);return(sel.length)?sel[0]:null;}
Grid.prototype.getSelectedNode=function(){return(this.m_rowSelect)?this.getSelectedRow():this.getSelectedCell();}
Grid.prototype.getSelectedNodeKeys=function(selectedNode){if(!selectedNode)
selectedNode=this.getSelectedRow();if(selectedNode){var k_v=selectedNode.getAttribute("keys");return k_v?CommonHelper.unserialize(k_v):null;}}
Grid.prototype.fixHeader=function(){}
Grid.prototype.createNewRow=function(rowCnt,hRowInd,modelRowCnt){var r_class=this.getHead().getRowClass(hRowInd);var row_opts;var opts=this.getHead().getRowOptions();if(typeof(opts)=="function"){row_opts=opts.call(this);}
else{row_opts=CommonHelper.clone(opts);}
row_opts.attrs=row_opts.attrs||{};row_opts.attrs.modelIndex=(modelRowCnt!=undefined)?modelRowCnt:rowCnt;if(this.m_onSelect){row_opts.className+=(row_opts.className?" ":"")+"for_select";}
if(this.m_onEventSetRowOptions){this.m_onEventSetRowOptions(row_opts);}
if(this.m_onEventSetRowClass){this.m_onEventSetRowClass(this.m_model,row_opts.className);}
var row;if(r_class.name=="Control"||r_class.name=="ControlContainer"){row=new r_class(null,row_opts.tagName||"DIV",row_opts);}
else{row=new r_class(null,row_opts);}
return row;}
Grid.prototype.createNewCell=function(column,row){var cell_class=column.getCellClass();var opts=column.getCellOptions();var cell_opts;if(typeof(opts)=="function"){cell_opts=opts.call(this,column,row);cell_opts=cell_opts||{};}
else{cell_opts=opts?CommonHelper.clone(opts):{};}
cell_opts.modelIndex=row.getAttr("modelIndex");cell_opts.fields=this.m_model.getFields();cell_opts.row=row;cell_opts.gridColumn=column;var cell;var cell_elements=column.getCellElements();if(cell_elements){cell_opts.elements=[];for(var cel_el_i=0;cel_el_i<cell_elements.length;cel_el_i++){var cel_el_opts;if(typeof cell_elements[cel_el_i].elementOptions=="function"){cel_el_opts=cell_elements[cel_el_i].elementOptions.call(this);}
else{cel_el_opts=CommonHelper.clone(cell_elements[cel_el_i].elementOptions);}
var elem_obj;var elem_class;if(typeof cell_elements[cel_el_i].elementClass=="string"){elem_class=eval(cell_elements[cel_el_i].elementClass);}
else{elem_class=cell_elements[cel_el_i].elementClass;}
if(elem_class.name=="Control"||elem_class.name=="ControlContainer"){elem_obj=new elem_class(null,cel_el_opts.tagName,cel_el_opts);}
else{elem_obj=new elem_class(null,cel_el_opts);}
elem_obj.gridColumn=column;cell_opts.elements.push(elem_obj);}}
if(this.m_onEventSetCellOptions){this.m_onEventSetCellOptions(cell_opts);}
if(cell_class.name=="Control"||cell_class.name=="ControlContainer"){cell=new cell_class(row.getId()+":"+column.getId(),cell_opts.tagName,cell_opts);}
else{cell=new cell_class(row.getId()+":"+column.getId(),cell_opts);}
column.gridCell=cell;column.setGridCell(cell);return cell;}
Grid.prototype.onGetData=function(){if(this.m_onEventGetData)this.m_onEventGetData.call(this);if(this.m_model){var redraw=!this.m_model.getCalcHash();if(!redraw){var new_hash=this.m_model.getHash();redraw=(!this.m_dataHash||this.m_dataHash!=new_hash);this.m_dataHash=new_hash;}
if(redraw){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();var detail_keys={};var rows=body.getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);for(var i=0;i<rows.length;i++){if(rows[i].getAttribute("for_keys")!=null){detail_keys[hex_md5(rows[i].getAttribute("for_keys"))]={"for_keys":rows[i].getAttribute("for_keys"),"node":rows[i]};}}
var details_expanded=(detail_keys&&!CommonHelper.isEmpty(detail_keys));var master_cell=null;if(foot&&foot.calcBegin){this.m_foot.calcBegin(this.m_model);}
if(!this.getHead())return;var columns=this.getHead().getColumns();var row_cnt=0,m_row_cnt=0,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.m_from=parseInt(this.m_model.getPageFrom());pag.setCountTotal(this.m_model.getTotCount());}
var h_row_ind=0;var key_id_ar=this.getKeyIds();while(this.m_model.getNextRow()){row=this.createNewRow(row_cnt,h_row_ind,m_row_cnt);row_keys={};for(var k=0;k<key_id_ar.length;k++){row_keys[key_id_ar[k]]=this.m_model.getFieldValue(key_id_ar[k]);}
field_cnt=0;for(var col_id=0;col_id<columns.length;col_id++){columns[col_id].setGrid(this);if(columns[col_id].getField()&&columns[col_id].getField().getPrimaryKey()){row_keys[columns[col_id].getField().getId()]=columns[col_id].getField().getValue();}
var cell=this.createNewCell(columns[col_id],row);if(columns[col_id].getMaster()&&details_expanded){master_cell=cell;}
if(this.m_onEventAddCell){this.m_onEventAddCell.call(this,cell);}
row.addElement(cell);field_cnt++;}
row.setAttr("keys",CommonHelper.serialize(row_keys));if(details_expanded){var row_key_h=hex_md5(row.getAttr("keys"));if(detail_keys[row_key_h]){detail_keys[row_key_h].masterNode=row.getNode();detail_keys[row_key_h].masterCell=master_cell;}}
var row_cmd_class=this.getRowCommandClass();if(row_cmd_class){var row_class_options={"grid":this};row.addElement(new row_cmd_class(this.getId()+":"+body.getName()+":"+row.getId()+":cell-sys",row_class_options));}
if(this.m_onEventAddRow){this.m_onEventAddRow.call(this,row);}
body.addElement(row);row_cnt++;m_row_cnt++;if(foot&&foot.calc){foot.calc(this.m_model);}}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd(this.m_model);}
body.toDOM(this.m_node);if(details_expanded){for(var det_h in detail_keys){if(!detail_keys[det_h].masterNode){DOMHelper.delNode(detail_keys[det_h].node);}
else{var p=detail_keys[det_h].masterNode.parentNode;var n_r=detail_keys[det_h].masterNode.nextSibling;var det_row;if(n_r){det_row=p.insertBefore(detail_keys[det_h].node,n_r);}
else{det_row=p.appendChild(detail_keys[det_h].node);}
if(detail_keys[det_h].masterCell){var tg=detail_keys[det_h].masterCell.getDetailToggle();if(tg){tg.setDetailRow(det_row);tg.setDetailVisible(true);}}}}}}}
if(this.m_navigate||this.m_navigateClick){this.setSelection();}}
Grid.prototype.setCommands=function(commands){this.m_commands=commands;}
Grid.prototype.getCommands=function(){return this.m_commands;}
Grid.prototype.setPagination=function(pagination){this.m_pagination=pagination;}
Grid.prototype.getPagination=function(){return this.m_pagination;}
Grid.prototype.setFoot=function(foot){this.m_foot=foot;}
Grid.prototype.getFoot=function(){return this.m_foot;}
Grid.prototype.setHead=function(head){this.m_head=head;}
Grid.prototype.getHead=function(){return this.m_head;}
Grid.prototype.setBody=function(body){this.m_body=body;}
Grid.prototype.getBody=function(){return this.m_body;}
Grid.prototype.getRowCommandClass=function(){return this.m_rowCommandClass;}
Grid.prototype.setRowCommandClass=function(v){this.m_rowCommandClass=v;}
Grid.prototype.getEditInline=function(){return this.m_editInline;}
Grid.prototype.setEditInline=function(v){this.m_editInline=v;}
Grid.prototype.getEditViewObj=function(){return this.m_editViewObj;}
Grid.prototype.getOnSelect=function(){return this.m_onSelect;}
Grid.prototype.setOnSelect=function(v){this.m_onSelect=v;}
Grid.prototype.setAutoRefresh=function(autoRefresh){this.m_autoRefresh=autoRefresh;}
Grid.prototype.getAutoRefresh=function(){return this.m_autoRefresh;}
Grid.prototype.setPopUpMenu=function(menu){this.m_popUpMenu=menu;}
Grid.prototype.getPopUpMenu=function(){return this.m_popUpMenu;}
Grid.prototype.setRowSelect=function(v){this.m_rowSelect=v;}
Grid.prototype.getRowSelect=function(){return this.m_rowSelect;}
Grid.prototype.setLastRowSelectOnInit=function(v){this.m_lastRowSelectOnInit=v;}
Grid.prototype.getLastRowSelectOnInit=function(){return this.m_lastRowSelectOnInit;}
Grid.prototype.setContClassName=function(v){this.m_contClassName=v;}
Grid.prototype.getContClassName=function(){return this.m_contClassName;}
Grid.prototype.setContTagName=function(v){this.m_contTagName=v;}
Grid.prototype.getContTagName=function(){return this.m_contTagName;}
Grid.prototype.setLastRowFooter=function(v){this.m_lastRowFooter=v;}
Grid.prototype.getLastRowFooter=function(){return this.m_lastRowFooter;}
Grid.prototype.setResize=function(v){this.m_resize=v;}
Grid.prototype.getResize=function(){return this.m_resize;}
Grid.prototype.setCmdInsert=function(v){this.m_cmdInsert=v;}
Grid.prototype.getCmdInsert=function(){return this.m_cmdInsert;}
Grid.prototype.setCmdEdit=function(v){this.m_cmdEdit=v;}
Grid.prototype.getCmdEdit=function(){return this.m_cmdEdit;}
Grid.prototype.setCmdCopy=function(v){this.m_cmdCopy=v;}
Grid.prototype.getCmdCopy=function(){return this.m_cmdCopy;}
Grid.prototype.setCmdDelete=function(v){this.m_cmdDelete=v;}
Grid.prototype.getCmdDelete=function(){return this.m_cmdDelete;}
Grid.prototype.setCmdPrint=function(v){this.m_cmdPrint=v;}
Grid.prototype.getCmdPrint=function(){return this.m_cmdPrint;}
Grid.prototype.setNavigate=function(v){this.m_navigate=v;if(this.m_navigate){this.setTabIndex(this.getTabIndex()||this.DEF_TAB_INDEX);}}
Grid.prototype.getNavigate=function(){return this.m_navigate;}
Grid.prototype.setNavigateClick=function(v){this.m_navigateClick=v;}
Grid.prototype.getNavigateClick=function(){return this.m_navigateClick;}
Grid.prototype.setNavigateMouse=function(v){this.m_navigateMouse=v;}
Grid.prototype.getNavigateClick=function(){return this.m_navigateMouse;}
Grid.prototype.setInlineInsertPlace=function(v){this.m_inlineInsertPlace=v;}
Grid.prototype.getInlineInsertPlace=function(){return this.m_inlineInsertPlace;}
Grid.prototype.setRefreshInterval=function(v){if(this.m_refreshInterval==v){return;}
this.m_refInterval=v;if(this.m_refIntervalObj!=undefined){window.clearInterval(this.m_refIntervalObj);}
if(v>0){var self=this;this.m_refIntervalObj=setInterval(function(){self.onRefresh();},v);}}
Grid.prototype.getRefreshInterval=function(){return this.m_refInterval;}
Grid.prototype.setEditViewClass=function(v){this.m_editViewClass=v;}
Grid.prototype.getEditViewClass=function(){return this.m_editViewClass;}
Grid.prototype.setEditViewOptions=function(v){this.m_editViewOptions=v;}
Grid.prototype.getEditViewOptions=function(){return this.m_editViewOptions;}
Grid.prototype.setInsertViewOptions=function(v){this.m_insertViewOptions=v;}
Grid.prototype.getInsertViewOptions=function(){return this.m_insertViewOptions;}
Grid.prototype.setEditWinClass=function(v){this.m_editWinClass=v;}
Grid.prototype.getEditWinClass=function(){return this.m_editWinClass;}
Grid.prototype.setEditWinOptions=function(v){this.m_editWinOptions=v;}
Grid.prototype.getEditWinOptions=function(){let ext_win_opts;if(typeof(this.m_editWinOptions)=="function"){ext_win_opts=this.m_editWinOptions();}else{ext_win_opts=CommonHelper.clone(this.m_editWinOptions);}
ext_win_opts.cmdOk=false;ext_win_opts.cmdCancel=false;return ext_win_opts;}
Grid.prototype.lockRefresh=function(v){if(v){this.m_interval=this.getRefreshInterval();this.setRefreshInterval(0);if(this.m_model)this.m_model.setLocked(true);}
else{if(this.m_model)this.m_model.setLocked(false);this.setRefreshInterval(this.m_interval);}}
Grid.prototype.setEnabled=function(v){if(this.m_head)this.m_head.setEnabled(v);if(this.m_body)this.m_body.setEnabled(v);if(this.m_foot)this.m_foot.setEnabled(v);if(this.m_commands)this.m_commands.setEnabled(v);this.lockRefresh(!v);Grid.superclass.setEnabled.call(this,v);}
Grid.prototype.setLocked=function(v){if(this.m_head)this.m_head.setLocked(v);if(this.m_body)this.m_body.setLocked(v);if(this.m_foot)this.m_foot.setLocked(v);if(this.m_commands)this.m_commands.setLocked(v);this.lockRefresh(v);Grid.superclass.setLocked.call(this,v);}
Grid.prototype.toDOM=function(parent){this.m_container=new ControlContainer(this.getId()+":cont",this.m_contTagName,{"className":this.m_contClassName,"visible":this.getVisible()});if(this.m_commands){this.m_container.addElement(this.m_commands);}
if(this.m_head&&this.getShowHead())this.m_head.toDOM(this.m_node);if(this.m_body)this.m_body.toDOM(this.m_node);if(this.m_foot)this.m_foot.toDOM(this.m_node);if(this.m_searchInfControl)this.m_container.addElement(this.m_searchInfControl);if(this.m_errorControl)this.m_container.addElement(this.m_errorControl);this.m_container.toDOM(parent);Grid.superclass.toDOM.call(this,this.m_container.getNode());if(this.m_pagination){try{this.m_pagination.toDOM(this.m_container.getNode());}
catch(e){}}
if(this.m_autoRefresh){this.onRefresh();}
if(this.m_resize){}
if(this.m_navigate){this.initNavigation();this.setSelection();}
this.bindPopUpMenu();this.fixHeader();this.m_rendered=true;if(!this.m_autoRefresh){this.onGetData();}}
Grid.prototype.delDOM=function(){if(this.m_refIntervalObj!=undefined){window.clearInterval(this.m_refIntervalObj);}
this.delEvents();if(this.m_commands)this.m_commands.delDOM();if(this.m_errorControl)this.m_errorControl.delDOM();if(this.m_pagination)this.m_pagination.delDOM();if(this.m_head)this.m_head.delDOM();if(this.m_body)this.m_body.delDOM();if(this.m_foot)this.m_foot.delDOM();EventHelper.del(this.m_node,'focus',this.m_focusEvent,false);EventHelper.del(this.m_node,'blur',this.m_blurEvent,false);Grid.superclass.delDOM.call(this);if(this.m_container)this.m_container.delDOM();this.m_rendered=false;}
Grid.prototype.getFocused=function(){return DOMHelper.hasClass(this.m_node,this.FOCUSED_CLASS);}
Grid.prototype.setFocused=function(focused){if(this.m_node&&focused&&!this.getFocused()){var tables=this.getWinObjDocument().getElementsByTagName("table");for(var i=0;i<tables.length;i++){DOMHelper.delClass(tables[i],this.FOCUSED_CLASS);}
DOMHelper.addClass(this.m_node,this.FOCUSED_CLASS);this.addEvents();}
else if(this.m_node&&!focused){DOMHelper.delClass(this.m_node,this.FOCUSED_CLASS);if(!CommonHelper.isIE()){this.delEvents();}}}
Grid.prototype.focus=function(){this.setFocused(true);try{this.getNode().focus();}
catch(e){}}
Grid.prototype.getModel=function(){return this.m_model;}
Grid.prototype.setModel=function(m){this.m_model=m;}
Grid.prototype.onError=function(resp,erCode,erStr){var e=(typeof(resp)=="string")?resp:erStr;var self=this;window.showError(e,function(){self.setFocused(true);});}
Grid.prototype.onEdit=function(){if(this.m_cmdEdit){this.edit("edit");}}
Grid.prototype.onCopy=function(){if(this.m_cmdCopy){this.edit("copy");}}
Grid.prototype.onInsert=function(){if(this.m_cmdInsert){this.edit("insert");}}
Grid.prototype.onPrint=function(){if(this.m_cmdPrint){WindowPrint.show({content:this.getNode().outerHTML});}}
Grid.prototype.onRefresh=function(callBack){this.onGetData();if(this.callBack){this.callBack.call(this);}}
Grid.prototype.onRowUp=function(){var selected_node=this.getSelectedNode();if(selected_node){if(this.m_model){this.setModelToCurrentRow();this.m_model.recMoveUp(this.m_model.getRowIndex());this.onRefresh();}
else if(selected_node.previousSibling){selected_node.parentNode.insertBefore(selected_node,selected_node.previousSibling);}}}
Grid.prototype.onRowDown=function(){var selected_node=this.getSelectedNode();if(selected_node){if(this.m_model){this.setModelToCurrentRow();this.m_model.recMoveDown(this.m_model.getRowIndex());this.onRefresh();}
else if(selected_node.nextSibling){selected_node.nextSibling.parentNode.insertBefore(selected_node.nextSibling,selected_node.nextSibling.previousSibling);}}}
Grid.prototype.setModelToCurrentRow=function(rowNode){if(!this.m_model.getRowCount()){return;}
var keys=this.getSelectedNodeKeys(rowNode);if(!keys||typeof(keys)!="object"){return;}
if(CommonHelper.isEmpty(keys)){throw new Error(this.m_model.ER_REС_NOT_FOUND);}
var key_fields={};for(var k in keys){key_fields[k]=CommonHelper.clone(this.m_model.getField(k));key_fields[k].setValue(keys[k]);}
this.m_model.recLocate(key_fields,true);return keys;}
Grid.prototype.getModelRow=function(){this.setModelToCurrentRow();return this.m_model.getFields();}
Grid.prototype.getRow=function(){var row_n=this.getSelectedRow();if(row_n){return this.getBody().getElement(row_n.getAttribute("modelIndex"));}}
Grid.prototype.setKeyIds=function(v){this.m_keyIds=v;}
Grid.prototype.getKeyIds=function(){if((!this.m_keyIds||!this.m_keyIds.length)&&(this.m_model&&this.m_model.getFields())){this.m_keyIds=[];var fields=this.m_model.getFields();for(fid in fields){if(fields[fid].getPrimaryKey()){this.m_keyIds.push(fid);}}}
return this.m_keyIds;}
Grid.prototype.setOnSearch=function(v){this.m_onSearch=v;}
Grid.prototype.getOnSearch=function(){return this.m_onSearch;}
Grid.prototype.setOnSearchDialog=function(v){this.m_onSearchDialog=v;}
Grid.prototype.getOnSearchDialog=function(){return this.m_onSearchDialog;}
Grid.prototype.setOnSearchReset=function(v){this.m_onSearchReset=v;}
Grid.prototype.getOnSearchReset=function(){return this.m_onSearchReset;}
Grid.prototype.setShowHead=function(v){this.m_showHead=v;}
Grid.prototype.getShowHead=function(){return this.m_showHead;}
Grid.prototype.isNull=function(){return(!this.m_model||this.m_model.getRowCount()==0);}
Grid.prototype.reset=function(){if(this.m_model){this.m_model.clear();this.onRefresh();}}
Grid.prototype.setValue=function(v){if(this.m_model){this.m_model.setData(v);this.onRefresh();}}
Grid.prototype.setInitValue=function(v){this.setValue(v);this.setAttr(this.VAL_INIT_ATTR,CommonHelper.md5(this.m_model.getData().toString()));}
Grid.prototype.getInitValue=function(){return this.getAttr(this.VAL_INIT_ATTR);}
Grid.prototype.getValue=function(){if(this.m_model){return this.m_model.getData().toString();}}
Grid.prototype.getModified=function(){return(CommonHelper.md5(this.getValue())!=this.getAttr(this.VAL_INIT_ATTR));}
Grid.prototype.getIsRef=function(){return false;}
Grid.prototype.setNotValid=function(erStr){DOMHelper.addClass(this.m_container.getNode(),this.INCORRECT_VAL_CLASS);if(this.getErrorControl()){this.getErrorControl().setValue(erStr);}
else{throw new Error(erStr);}}
Grid.prototype.setValid=function(){DOMHelper.delClass(this.m_container.getNode(),this.INCORRECT_VAL_CLASS);if(this.getErrorControl())this.getErrorControl().clear();}
Grid.prototype.getInputEnabled=function(){return this.getEnabled();}
Grid.prototype.setInputEnabled=function(v){this.setEnabled(v);}
Grid.prototype.setErrorControl=function(v){this.m_errorControl=v;}
Grid.prototype.getErrorControl=function(){return this.m_errorControl;}
Grid.prototype.setSearchInfControl=function(v){this.m_searchInfControl=v;}
Grid.prototype.getSearchInfControl=function(){return this.m_searchInfControl;}
Grid.prototype.setColumnVisible=function(colId,v){var columns=this.getHead().getColumns();var is_list=CommonHelper.isArray(colId);var col_indexes=[];for(var ind=0;ind<columns.length;ind++){if(is_list&&CommonHelper.inArray(columns[ind].getId(),colId)>=0){columns[ind].setVisible(v);col_indexes.push(ind);}
else if(!is_list&&columns[ind].getId()==colId){columns[ind].setVisible(v);col_indexes.push(ind);break;}}
var b=this.getBody().getNode();for(i=0;i<b.rows.length;i++){for(var j=0;j<col_indexes.length;j++){if(!v){DOMHelper.addClass(b.rows[i].cells[col_indexes[j]],"hidden");}
else{DOMHelper.delClass(b.rows[i].cells[col_indexes[j]],"hidden");}}}}
Grid.prototype.setVisible=function(v){if(this.m_container)this.m_container.setVisible(v);}
Grid.prototype.bindPopUpMenu=function(){if(this.getPopUpMenu()!=undefined){this.getPopUpMenu().bind(this.m_body.getNode());}}
Grid.prototype.unbindPopUpMenu=function(){if(this.getPopUpMenu()!=undefined){this.getPopUpMenu().unbind();}} 
Grid.prototype.Q_DELETE="Удалить запись?";Grid.prototype.NT_REC_DELETED="Запись удалена.";Grid.prototype.ER_COL_NOT_BOUND="Колонка % грида % не привязана к полю модели."; 
function GridSearchInf(id,options){options=options||{};options.hidden=true;this.m_grid=options.grid;GridSearchInf.superclass.constructor.call(this,id,"DIV",options);}
extend(GridSearchInf,ControlContainer);GridSearchInf.prototype.m_grid;GridSearchInf.prototype.addSearch=function(filterId,label,val,fieldId){var ctrl_id=this.getId()+":"+filterId;if(this.elementExists(filterId)){this.delElement(filterId);}
var self=this;var tl=CommonHelper.format(this.ITEM_TITLE_PATTERN,[label,val]);this.addElement(new ControlContainer(ctrl_id,"SPAN",{"attrs":{"fieldid":fieldId},"name":filterId,"elements":[new Control(null,"SPAN",{"value":label+":","title":tl}),new Control(null,"SPAN",{"value":val+" ","title":tl}),new Control(null,"SPAN",{"className":"glyphicon glyphicon-remove-circle","attrs":{"style":"cursor:pointer;"},"title":this.ITEM_REMOVE,"events":{"click":(function(contName){return function(){window.setGlobalWait(true);self.m_grid.unsetFilter(contName);self.m_grid.onRefresh((function(searchCtrl,contName){return function(){searchCtrl.delElement(contName);searchCtrl.toDOM();var el=searchCtrl.getElements();var el_empty=true;for(var id in el){if(el[id]!=undefined){el_empty=false;break;}}
if(el_empty){searchCtrl.hide();if(searchCtrl.m_onFilterClear)searchCtrl.m_onFilterClear();}
window.setGlobalWait(false);self.m_grid.focus();}})(self,contName));}})(filterId)}})]}));this.toDOM();this.show();}
GridSearchInf.prototype.setOnFilterClear=function(v){this.m_onFilterClear=v;}
GridSearchInf.prototype.clearSearch=function(){this.clear();this.hide();this.toDOM();} 
GridSearchInf.prototype.ITEM_REMOVE="Удалить фильтр";GridSearchInf.prototype.ITEM_TITLE_PATTERN="Фильтровать по колонке '%', по значению %"; 
function VariantStorage(options){options=options||{};this.m_afterFormClose=options.afterFormClose;this.m_variantStorageName=options.variantStorageName;}
VariantStorage.prototype.openStorage=function(dataCol){var self=this;this.m_dataCol=dataCol;this.m_view=new VariantStorageOpenView("VariantStorageOpenView",{"variantStorageName":this.m_variantStorageName,"onClose":function(){self.closeOpenForm();},"onSelect":function(fields){self.loadVariant(fields.variant_name.getValue(),self.m_dataCol);}});this.m_form=new WindowFormModalBS(CommonHelper.uniqid(),{"cmdCancel":true,"controlCancelCaption":this.m_view.CMD_CANCEL_CAP,"controlCancelTitle":this.m_view.CMD_CANCEL_TITLE,"cmdOk":true,"controlOkCaption":this.m_view.CMD_OK_CAP,"controlOkTitle":this.m_view.CMD_OK_TITLE,"onClickOk":function(){self.loadVariant(self.m_view.getElement("variants").getFieldValue("variant_name"),self.m_dataCol);},"onClickCancel":function(){self.formClose();},"content":this.m_view,"contentHead":this.m_view.HEAD_TITLE});this.m_form.open();}
VariantStorage.prototype.loadVariant=function(variantName,dataCol){var pm_id=dataCol?"get_"+dataCol:"get_all_data";var pm=(new VariantStorage_Controller()).getPublicMethod(pm_id);pm.setFieldValue("storage_name",this.m_variantStorageName);pm.setFieldValue("variant_name",variantName);var self=this;pm.run({"ok":function(resp){var m=new VariantStorage_Model({"data":resp.getModelData("VariantStorage_Model")});if(m.getNextRow()){self.formClose(dataCol?m.getFieldValue(dataCol):m);}}});}
VariantStorage.prototype.saveStorage=function(dataCol,dataColVal){var self=this;this.m_dataCol=dataCol;this.m_dataColVal=dataColVal;this.m_view=new VariantStorageSaveView("VariantStorageSaveView",{"variantStorageName":this.m_variantStorageName,"onClose":function(){self.form();}});this.m_form=new WindowFormModalBS(CommonHelper.uniqid(),{"cmdCancel":true,"controlCancelCaption":this.m_view.CMD_CANCEL_CAP,"controlCancelTitle":this.m_view.CMD_CANCEL_TITLE,"cmdOk":true,"controlOkCaption":this.m_view.CMD_OK_CAP,"controlOkTitle":this.m_view.CMD_OK_TITLE,"onClickOk":function(){self.saveVariant(self.m_dataCol,self.m_dataColVal,self.m_view.getElement("name").getValue());},"onClickCancel":function(){self.formClose();},"content":this.m_view,"contentHead":this.m_view.HEAD_TITLE});this.m_form.open();}
VariantStorage.prototype.saveVariant=function(dataCol,dataColVal,variantName){var pm=(new VariantStorage_Controller()).getPublicMethod("upsert_"+dataCol);pm.setFieldValue("storage_name",this.m_variantStorageName);pm.setFieldValue("variant_name",variantName);pm.setFieldValue("default_variant",this.m_view.getElement("default_variant").getValue());dataColVal=(typeof(dataColVal)=="string")?dataColVal:CommonHelper.serialize(dataColVal);pm.setFieldValue(dataCol,dataColVal);var self=this;pm.run({"ok":function(resp){self.formClose();}});}
VariantStorage.prototype.formClose=function(val){this.m_form.close();delete this.m_form;if(this.m_afterFormClose)this.m_afterFormClose.call(this,val);} 
function GridCommands(id,options){options=options||{};options.attrs=options.attrs||{};options.className=options.className||options.attrs["class"]||this.DEF_CLASS_NAME;GridCommands.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.cmdEdit=(options.cmdEdit!=undefined)?options.cmdEdit:options.cmdInsert;options.cmdCopy=(options.cmdCopy!=undefined)?options.cmdCopy:options.cmdInsert;options.cmdDelete=(options.cmdDelete!=undefined)?options.cmdDelete:options.cmdInsert;options.cmdRefresh=(options.cmdRefresh!=undefined)?options.cmdRefresh:true;options.cmdPrint=(options.cmdPrint!=undefined)?options.cmdPrint:true;options.cmdFilter=(options.cmdFilter!=undefined)?options.cmdFilter:false;options.cmdPrintObj=(options.cmdPrintObj!=undefined)?options.cmdPrintObj:false;options.cmdPrintObj=(options.printObjList!=undefined)?true:options.cmdPrintObj;options.cmdSearch=(options.cmdSearch!=undefined)?true:options.cmdSearch;var self=this;if(options.cmdInsert||options.controlInsert){this.setControlInsert(options.controlInsert||new ButtonCtrl(id+":cmdInsert",{"glyph":"glyphicon-plus","onClick":function(){self.m_grid.onInsert();},"attrs":{"title":this.BTN_INSERT_TITLE}}));}
if(options.cmdEdit||options.controlEdit){this.setControlEdit(options.controlEdit||new ButtonCtrl(id+":cmdEdit",{"glyph":"glyphicon-pencil","onClick":function(){self.m_grid.onEdit();},"attrs":{"title":this.BTN_EDIT_TITLE}}));}
if(options.cmdCopy||options.controlCopy){this.setControlCopy(options.controlCopy||new ButtonCtrl(id+":cmdCopy",{"glyph":"glyphicon-copy","onClick":function(event){self.m_grid.onCopy();},"attrs":{"title":this.BTN_COPY_TITLE}}));}
if(options.cmdDelete||options.controlDelete){this.setControlDelete(options.controlDelete||new ButtonCtrl(id+":cmdDelete",{"glyph":"glyphicon-remove","onClick":function(){self.m_grid.onDelete();},"attrs":{"title":this.BTN_DELETE_TITLE}}));}
if(options.cmdColumnManager||options.controlColumnManager){this.setControlDelete(options.controlColumnManager||new ButtonCtrl(id+":cmdColumnManager",{"glyph":"glyphicon-th-list","onClick":function(){self.onColumnManager();},"attrs":{"title":this.BTN_COL_MANAGER_TITLE}}));}
if(options.cmdPrint||options.controlPrint){this.setControlPrint(options.controlPrint||new ButtonCtrl(id+":cmdPrint",{"glyph":"glyphicon-print","onClick":function(e){self.m_grid.onPrint();},"attrs":{"title":this.BTN_PRINT_TITLE}}));}
if(options.cmdRefresh||options.controlRefresh){this.setControlRefresh(options.controlRefresh||new ButtonCtrl(id+":cmdRefresh",{"glyph":"glyphicon-refresh","onClick":function(){self.m_grid.onRefresh();},"attrs":{"title":this.BTN_REFRESH_TITLE}}));}
if(options.cmdPrintObj){this.setControlPrintObj(options.controlPrintObj||new ButtonPrintList(id+":cmdPrintObj",{"printList":options.printObjList,"keyIds":options.printObjListKeyIds,"app":options.app}));}
if(options.cmdSearch||options.controlSearch){this.setControlSearch(options.controlSearch||new ButtonCtrl(id+":cmdSearch",{"glyph":"glyphicon-search","onClick":function(){self.onSearch();},"attrs":{"title":this.BTN_SEARCH_TITLE}}));}
if(options.cmdFilter){this.setControlFilter(options.controlFilter||new GridFilter(CommonHelper.uniqid(),{"filters":options.filters,"app":options.app}));this.setControlFilterToggle(options.controlFilterToggle||new ButtonCtrl(id+":cmdToggle",{"attrs":{"title":this.m_controlFilter.DEF_TOGGLE_CTRL_TITLE},"onClick":function(){var filter=self.getControlFilter();$(filter.getNode()).collapse("toggle");if(!DOMHelper.hasClass(filter.getNode(),"in")){var filters=filter.getFilter().getFilters();for(var id in filters){filters[id].binding.getControl().focus();break;}}},"caption":this.m_controlFilter.DEF_TOGGLE_CTRL_CAP,"glyph":"glyphicon-triangle-bottom","app":options.app}));}
this.m_popUpMenu=options.popUpMenu;this.addControls();}
extend(GridCommands,ControlContainer);GridCommands.prototype.DEF_TAG_NAME="div";GridCommands.prototype.DEF_CLASS_NAME="btn-group";GridCommands.prototype.m_grid;GridCommands.prototype.m_controlInsert;GridCommands.prototype.m_controlEdit;GridCommands.prototype.m_controlCopy;GridCommands.prototype.m_controlDelete;GridCommands.prototype.m_controlPrint;GridCommands.prototype.m_controlRefresh;GridCommands.prototype.m_controlFilterToggle;GridCommands.prototype.m_controlFilter;GridCommands.prototype.m_controlColumnManager;GridCommands.prototype.m_controlPrintObj;GridCommands.prototype.m_controlSearch;GridCommands.prototype.popUpMenu;GridCommands.prototype.addControls=function(){if(this.m_controlInsert)this.addElement(this.m_controlInsert);if(this.m_controlEdit)this.addElement(this.m_controlEdit);if(this.m_controlCopy)this.addElement(this.m_controlCopy);if(this.m_controlDelete)this.addElement(this.m_controlDelete);if(this.m_controlPrint)this.addElement(this.m_controlPrint);if(this.m_controlColumnManager)this.addElement(this.m_controlColumnManager);if(this.m_controlRefresh)this.addElement(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);if(this.m_controlSearch)this.addElement(this.m_controlSearch);if(this.m_controlFilter){this.addElement(this.m_controlFilterToggle);this.addElement(this.m_controlFilter);}
if(this.m_popUpMenu){this.toPopUp(this.m_popUpMenu);}}
GridCommands.prototype.setGrid=function(v){this.m_grid=v;if(this.m_controlFilter){var self=this;this.m_controlFilter.setOnRefresh(function(){self.m_grid.onRefresh();});}
if(this.m_controlPrintObj){this.m_controlPrintObj.setGrid(this.m_grid);}
if(this.m_popUpMenu){this.selectToPopUp();}}
GridCommands.prototype.getGrid=function(){return this.m_grid;}
GridCommands.prototype.setEnabled=function(en){if(this.m_controlInsert)this.m_controlInsert.setEnabled(en);if(this.m_controlEdit)this.m_controlEdit.setEnabled(en);if(this.m_controlCopy)this.m_controlCopy.setEnabled(en);if(this.m_controlDelete)this.m_controlDelete.setEnabled(en);if(this.m_controlPrint)this.m_controlPrint.setEnabled(en);if(this.m_controlColumnManager)this.m_controlColumnManager.setEnabled(en);if(this.m_controlRefresh)this.m_controlRefresh.setEnabled(en);if(this.m_controlSearch)this.m_controlSearch.setEnabled(en);if(this.m_controlFilterToggle)this.m_controlFilterToggle.setEnabled(en);if(this.m_controlFilter)this.m_controlFilter.setEnabled(en);GridCommands.superclass.setEnabled.call(this,en);}
GridCommands.prototype.printObjToPopUp=function(){if(this.m_controlPrintObj&&this.m_popUpMenu){this.m_popUpMenu.addSeparator();var id=this.getId();this.m_printObjList=this.m_controlPrintObj.getObjList();var self=this;for(var i=0;i<this.m_printObjList.length;i++){this.m_popUpMenu.addButton(new ButtonCtrl(null,{"caption":this.m_printObjList[i].getCaption(),"attrs":{"objInd":i},"onClick":function(){self.m_printObjList[this.getAttr("objInd")].onClick();}}));}}}
GridCommands.prototype.selectToPopUp=function(){if(this.m_grid&&this.m_grid.getOnSelect()){if(this.m_controlInsert||this.m_controlEdit||this.m_controlCopy||this.m_controlDelete||this.m_controlPrint||this.m_controlColumnManager||this.m_controlRefresh||this.m_controlSearch){this.m_popUpMenu.addSeparator();}
var self=this;this.m_popUpMenu.addButton(new ButtonCtrl(null,{"caption":"Выбрать","onClick":function(){self.m_grid.onSelect();}}));}}
GridCommands.prototype.toPopUp=function(){if(this.m_controlInsert)this.m_popUpMenu.addButton(this.m_controlInsert);if(this.m_controlEdit)this.m_popUpMenu.addButton(this.m_controlEdit);if(this.m_controlCopy)this.m_popUpMenu.addButton(this.m_controlCopy);if(this.m_controlDelete)this.m_popUpMenu.addButton(this.m_controlDelete);if(this.m_controlPrint)this.m_popUpMenu.addButton(this.m_controlPrint);if(this.m_controlColumnManager)this.m_popUpMenu.addButton(this.m_controlColumnManager);if(this.m_controlSearch)this.m_popUpMenu.addButton(this.m_controlSearch);if(this.m_controlRefresh)this.m_popUpMenu.addButton(this.m_controlRefresh);this.printObjToPopUp();}
GridCommands.prototype.getControlInsert=function(){return this.m_controlInsert;}
GridCommands.prototype.getCmdInsert=function(){return this.m_controlInsert;}
GridCommands.prototype.setControlInsert=function(v){this.m_controlInsert=v;}
GridCommands.prototype.getControlEdit=function(){return this.m_controlEdit;}
GridCommands.prototype.getCmdEdit=function(){return this.m_controlEdit;}
GridCommands.prototype.setControlEdit=function(v){this.m_controlEdit=v;}
GridCommands.prototype.getControlCopy=function(){return this.m_controlCopy;}
GridCommands.prototype.getCmdCopy=function(){return this.m_controlCopy;}
GridCommands.prototype.setControlCopy=function(v){this.m_controlCopy=v;}
GridCommands.prototype.getControlDelete=function(){return this.m_controlDelete;}
GridCommands.prototype.getCmdDelete=function(){return this.m_controlDelete;}
GridCommands.prototype.setControlDelete=function(v){this.m_controlDelete=v;}
GridCommands.prototype.getControlPrint=function(){return this.m_controlPrint;}
GridCommands.prototype.getCmdPrint=function(){return this.m_controlPrint;}
GridCommands.prototype.setControlPrint=function(v){this.m_controlPrint=v;}
GridCommands.prototype.getControlRefresh=function(){return this.m_controlRefresh;}
GridCommands.prototype.getCmdRefresh=function(){return this.m_controlRefresh;}
GridCommands.prototype.setControlRefresh=function(v){this.m_controlRefresh=v;}
GridCommands.prototype.getControlFilter=function(){return this.m_controlFilter;}
GridCommands.prototype.setControlFilter=function(v){this.m_controlFilter=v;}
GridCommands.prototype.getControlFilterToggle=function(){return this.m_controlFilterToggle;}
GridCommands.prototype.setControlFilterToggle=function(v){this.m_controlFilterToggle=v;}
GridCommands.prototype.getControlColumnManager=function(){return this.m_controlColumnManager;}
GridCommands.prototype.setControlColumnManager=function(v){this.m_controlColumnManager=v;}
GridCommands.prototype.getControlPrintObj=function(){return this.m_controlPrintObj;}
GridCommands.prototype.setControlPrintObj=function(v){this.m_controlPrintObj=v;}
GridCommands.prototype.getControlSearch=function(){return this.m_controlSearch;}
GridCommands.prototype.setControlSearch=function(v){this.m_controlSearch=v;}
GridCommands.prototype.onColumnManager=function(){var btnCont=this;var self=this;this.m_colManform=new WindowFormModalBS(uuid(),{"content":new ViewGridColumnManager(uuid(),{"grid":this.m_grid,"onClose":function(){btnCont.m_colManform.close();self.m_grid.onRefresh.call(self.m_grid);},"app":this.getApp()})});this.m_colManform.open();} 
function GridCmd(id,options){options=options||{};this.m_id=id;this.m_grid=options.grid;this.setShowCmdControl((options.showCmdControl!=undefined)?options.showCmdControl:true);this.setShowCmdControlInPopup((options.showCmdControlInPopup!=undefined)?options.showCmdControlInPopup:true);var btn_class=options.buttonClass||ButtonCmd;var self=this;this.m_onCommand=options.onCommand||this.onCommand;this.m_controls=options.controls||[new btn_class(id,{"glyph":options.glyph,"glyphPopUp":options.glyphPopUp,"caption":options.caption,"onClick":function(e){self.m_onCommand.call(self,e);},"attrs":{"title":options.title||this.TITLE}})];}
GridCmd.prototype.m_id;GridCmd.prototype.m_controls;GridCmd.prototype.m_grid;GridCmd.prototype.m_showCmdControl;GridCmd.prototype.m_showCmdControlInPopup;GridCmd.prototype.getShowCmdControl=function(){return this.m_showCmdControl;}
GridCmd.prototype.setShowCmdControl=function(v){this.m_showCmdControl=v;}
GridCmd.prototype.getShowCmdControlInPopup=function(){return this.m_showCmdControlInPopup;}
GridCmd.prototype.setShowCmdControlInPopup=function(v){this.m_showCmdControlInPopup=v;}
GridCmd.prototype.setGrid=function(v){this.m_grid=v;}
GridCmd.prototype.getGrid=function(){return this.m_grid;}
GridCmd.prototype.setId=function(v){this.m_id=v;}
GridCmd.prototype.getId=function(){return this.m_id;}
GridCmd.prototype.addControl=function(control){this.m_controls.push(control);}
GridCmd.prototype.getControl=function(ind){ind=(ind!=undefined)?ind:0;return(ind>=0&&ind<this.m_controls.length)?this.m_controls[ind]:undefined;}
GridCmd.prototype.controlsToContainer=function(container){this.m_container=container;for(var i=0;i<this.m_controls.length;i++){var n=this.m_controls[i].getName();container.addElement(this.m_controls[i]);}}
GridCmd.prototype.controlsToPopUp=function(popUp){for(var i=0;i<this.m_controls.length;i++){if(!this.m_controls[i].getCaption){continue;}
popUp.addButton(this.m_controls[i]);}}
GridCmd.prototype.onCommand=function(e){}
GridCmd.prototype.onDelDOM=function(){} 
function GridCmdContainer(id,options){options=options||{};options.attrs=options.attrs||{};options.className=options.className||options.attrs["class"]||this.DEF_CLASS_NAME;options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.cmdEdit=(options.cmdEdit!=undefined)?options.cmdEdit:options.cmdInsert;options.cmdCopy=(options.cmdCopy!=undefined)?options.cmdCopy:options.cmdInsert;options.cmdDelete=(options.cmdDelete!=undefined)?options.cmdDelete:options.cmdInsert;options.cmdRefresh=(options.cmdRefresh!=undefined)?options.cmdRefresh:true;options.cmdPrint=(options.cmdPrint!=undefined)?options.cmdPrint:true;options.cmdPrintObj=(options.printObjList!=undefined)?true:((options.cmdPrintObj!=undefined)?options.cmdPrintObj:false);options.cmdSearch=(options.cmdSearch!=undefined)?options.cmdSearch:true;options.cmdColManager=(options.cmdColManager!=undefined)?options.cmdColManager:false;options.cmdFilter=(options.cmdFilter!=undefined)?options.cmdFilter:(options.filters!=undefined);options.cmdFilterSave=(options.cmdFilterSave!=undefined)?options.cmdFilterSave:(options.variantStorage!=undefined);options.cmdFilterOpen=(options.cmdFilterOpen!=undefined)?options.cmdFilterOpen:(options.variantStorage!=undefined);options.cmdAllCommands=(options.cmdAllCommands!=undefined)?options.cmdAllCommands:true;options.templateOptions=options.templateOptions||{};options.templateOptions.cmdInsert=options.cmdInsert,options.templateOptions.cmdEdit=options.cmdEdit,options.templateOptions.cmdCopy=options.cmdCopy,options.templateOptions.cmdDelete=options.cmdDelete,options.templateOptions.cmdRefresh=options.cmdRefresh,options.templateOptions.cmdPrint=options.cmdPrint,options.templateOptions.cmdPrintObj=options.cmdPrintObj,options.templateOptions.cmdSearch=options.cmdSearch,options.templateOptions.cmdColManager=options.cmdColManager,options.templateOptions.cmdFilter=options.cmdFilter,options.templateOptions.cmdFilterSave=options.cmdFilterSave,options.templateOptions.cmdFilterOpen=options.cmdFilterOpen,options.templateOptions.cmdAllCommands=options.cmdAllCommands
GridCmdContainer.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);options.variantStorage=options.variantStorage||{};if(options.cmdInsert){this.setCmdInsert((typeof(options.cmdInsert)=="object")?options.cmdInsert:new GridCmdInsert(id+":insert"));}
if(options.cmdEdit){this.setCmdEdit((typeof(options.cmdEdit)=="object")?options.cmdEdit:new GridCmdEdit(id+":edit"));}
if(options.cmdCopy){this.setCmdCopy((typeof(options.cmdCopy)=="object")?options.cmdCopy:new GridCmdCopy(id+":copy"));}
if(options.cmdDelete){this.setCmdDelete((typeof(options.cmdDelete)=="object")?options.cmdDelete:new GridCmdDelete(id+":delete"));}
if(options.cmdColManager){var filters_copy=CommonHelper.clone(options.filters);this.setCmdColManager((typeof(options.cmdColManager)=="object")?options.cmdColManager:new GridCmdColManager(id+":colManager",{"filters":options.filters,"variantStorageName":options.variantStorage["name"],"variantStorageModel":options.variantStorage.model}));}
if(options.cmdPrint){this.setCmdPrint((typeof(options.cmdPrint)=="object")?options.cmdPrint:new GridCmdPrint(id+":print"));}
if(options.cmdRefresh){this.setCmdRefresh((typeof(options.cmdRefresh)=="object")?options.cmdRefresh:new GridCmdRefresh(id+":print"));}
if(options.cmdPrintObj){this.setCmdPrintObj((typeof(options.cmdPrintObj)=="object")?options.printObj:new GridCmdPrintObj(id+":printObj",{"printList":options.printObjList,"keyIds":options.printObjListKeyIds}));}
if(options.cmdSearch){this.setCmdSearch((typeof(options.cmdSearch)=="object")?options.cmdSearch:new GridCmdSearch(id+":search"));}
if(options.cmdFilter){if(options.cmdFilterSave){this.setCmdFilterSave((typeof(options.cmdFilterSave)=="object")?options.cmdFilterSave:new GridCmdFilterSave(id+":filterSave",{"variantStorageName":options.variantStorage.name,"dataCol":"filter_data"}));}
if(options.cmdFilterOpen){this.setCmdFilterOpen((typeof(options.cmdFilterOpen)=="object")?options.cmdFilterOpen:new GridCmdFilterOpen(id+":filterOpen",{"variantStorageName":options.variantStorage.name,"dataCol":"filter_data"}));}
this.setCmdFilter((typeof(options.cmdFilter)=="object")?options.cmdFilter:new GridCmdFilter(id+":filter",{"filters":options.filters,"controlSave":this.getCmdFilterSave(),"controlOpen":this.getCmdFilterOpen(),"variantStorage":options.variantStorage}));}
if(options.cmdAllCommands){this.setCmdAllCommands((typeof(options.cmdAllCommands)=="object")?options.cmdAllCommands:new GridCmdAllCommands(id+":allCommands"));}
this.m_popUpMenu=options.popUpMenu;this.m_commands=[];if(options.addCustomCommands){options.addCustomCommands.call(this,this.m_commands);}
else if(options.addCustomCommandsBefore){options.addCustomCommandsBefore.call(this,this.m_commands);}
this.addControls();if(options.addCustomCommandsAfter){var l=this.m_commands.length;options.addCustomCommandsAfter.call(this,this.m_commands);for(var i=l;i<this.m_commands.length;i++){if(this.m_commands[i].getShowCmdControl()){this.m_commands[i].controlsToContainer(this);}}}
if(this.m_cmdAllCommands){this.m_commands.push(this.m_cmdAllCommands);if(this.m_cmdAllCommands.getShowCmdControl()){this.m_cmdAllCommands.controlsToContainer(this);}}}
extend(GridCmdContainer,ControlContainer);GridCmdContainer.prototype.DEF_TAG_NAME="DIV";GridCmdContainer.prototype.DEF_CLASS_NAME="cmdButtons";GridCmdContainer.prototype.m_grid;GridCmdContainer.prototype.m_cmdInsert;GridCmdContainer.prototype.m_cmdEdit;GridCmdContainer.prototype.m_cmdCopy;GridCmdContainer.prototype.m_cmdDelete;GridCmdContainer.prototype.m_cmdPrint;GridCmdContainer.prototype.m_cmdRefresh;GridCmdContainer.prototype.m_cmdColManager;GridCmdContainer.prototype.m_cmdPrintObj;GridCmdContainer.prototype.m_cmdSearch;GridCmdContainer.prototype.m_cmdFilter;GridCmdContainer.prototype.m_cmdFilterSave;GridCmdContainer.prototype.m_cmdFilterOpen;GridCmdContainer.prototype.m_cmdAllCommands;GridCmdContainer.prototype.m_popUpMenu;GridCmdContainer.prototype.addCommands=function(){if(this.m_cmdInsert){this.m_commands.push(this.m_cmdInsert);}
if(this.m_cmdEdit){this.m_commands.push(this.m_cmdEdit);}
if(this.m_cmdCopy){this.m_commands.push(this.m_cmdCopy);}
if(this.m_cmdDelete){this.m_commands.push(this.m_cmdDelete);}
if(this.m_cmdPrint){this.m_commands.push(this.m_cmdPrint);}
if(this.m_cmdColManager){this.m_commands.push(this.m_cmdColManager);}
if(this.m_cmdRefresh){this.m_commands.push(this.m_cmdRefresh);}
if(this.m_cmdPrintObj){this.m_commands.push(this.m_cmdPrintObj);}
if(this.m_cmdSearch){this.m_commands.push(this.m_cmdSearch);}
if(this.m_cmdFilter){this.m_commands.push(this.m_cmdFilter);}
if(this.m_cmdFilterSave){this.m_commands.push(this.m_cmdFilterSave);}
if(this.m_cmdFilterOpen){this.m_commands.push(this.m_cmdFilterOpen);}}
GridCmdContainer.prototype.addControls=function(){this.addCommands();for(var i=0;i<this.m_commands.length;i++){if(this.m_commands[i].getShowCmdControl()){this.m_commands[i].controlsToContainer(this);}}}
GridCmdContainer.prototype.setGrid=function(v){this.m_grid=v;for(var i=0;i<this.m_commands.length;i++){this.m_commands[i].setGrid(v);}
if(this.m_popUpMenu){this.selectToPopUp();}}
GridCmdContainer.prototype.getGrid=function(){return this.m_grid;}
GridCmdContainer.prototype.selectToPopUp=function(){if(this.m_grid&&this.m_grid.getOnSelect()){if(this.m_cmdInsert||this.m_cmdEdit||this.m_cmdCopy||this.m_cmdDelete||this.m_cmdPrint||this.m_cmdColManager||this.m_cmdRefresh||this.m_cmdSearch){this.m_popUpMenu.addSeparator();}
var self=this;this.m_popUpMenu.addButton(new ButtonCtrl(null,{"caption":this.GRID_SELECT_POPUP_CAPTION,"onClick":function(){self.m_grid.onSelect();}}));}}
GridCmdContainer.prototype.toPopUp=function(){for(var i=0;i<this.m_commands.length;i++){if(this.m_commands[i].getShowCmdControlInPopup()){this.m_commands[i].controlsToPopUp(this.m_popUpMenu);}}}
GridCmdContainer.prototype.getCmdInsert=function(){return this.m_cmdInsert;}
GridCmdContainer.prototype.setCmdInsert=function(v){this.m_cmdInsert=v;}
GridCmdContainer.prototype.getCmdEdit=function(){return this.m_cmdEdit;}
GridCmdContainer.prototype.setCmdEdit=function(v){this.m_cmdEdit=v;}
GridCmdContainer.prototype.getCmdCopy=function(){return this.m_cmdCopy;}
GridCmdContainer.prototype.setCmdCopy=function(v){this.m_cmdCopy=v;}
GridCmdContainer.prototype.getCmdDelete=function(){return this.m_cmdDelete;}
GridCmdContainer.prototype.setCmdDelete=function(v){this.m_cmdDelete=v;}
GridCmdContainer.prototype.getCmdPrint=function(){return this.m_cmdPrint;}
GridCmdContainer.prototype.setCmdPrint=function(v){this.m_cmdPrint=v;}
GridCmdContainer.prototype.getCmdRefresh=function(){return this.m_cmdRefresh;}
GridCmdContainer.prototype.setCmdRefresh=function(v){this.m_cmdRefresh=v;}
GridCmdContainer.prototype.getCmdColManager=function(){return this.m_cmdColManager;}
GridCmdContainer.prototype.setCmdColManager=function(v){this.m_cmdColManager=v;}
GridCmdContainer.prototype.getCmdPrintObj=function(){return this.m_cmdPrintObj;}
GridCmdContainer.prototype.setCmdPrintObj=function(v){this.m_cmdPrintObj=v;}
GridCmdContainer.prototype.getCmdSearch=function(){return this.m_cmdSearch;}
GridCmdContainer.prototype.setCmdSearch=function(v){this.m_cmdSearch=v;}
GridCmdContainer.prototype.getCmdFilter=function(){return this.m_cmdFilter;}
GridCmdContainer.prototype.setCmdFilter=function(v){this.m_cmdFilter=v;}
GridCmdContainer.prototype.getCmdFilterSave=function(){return this.m_cmdFilterSave;}
GridCmdContainer.prototype.setCmdFilterSave=function(v){this.m_cmdFilterSave=v;}
GridCmdContainer.prototype.getCmdFilterOpen=function(){return this.m_cmdFilterOpen;}
GridCmdContainer.prototype.setCmdFilterOpen=function(v){this.m_cmdFilterOpen=v;}
GridCmdContainer.prototype.getCmdAllCommands=function(){return this.m_cmdAllCommands;}
GridCmdContainer.prototype.setCmdAllCommands=function(v){this.m_cmdAllCommands=v;}
GridCmdContainer.prototype.getPopUpMenu=function(){return this.m_popUpMenu;}
GridCmdContainer.prototype.setPopUpMenu=function(v){this.m_popUpMenu=v;if(this.m_popUpMenu){this.toPopUp(this.m_popUpMenu);}}
GridCmdContainer.prototype.delDOM=function(){for(var i=0;i<this.m_commands.length;i++){this.m_commands[i].onDelDOM();}
GridCmdContainer.superclass.delDOM.call(this);} 
GridCmdContainer.prototype.GRID_SELECT_POPUP_CAPTION="Выбрать"; 
function GridCmdContainerAjx(id,options){options=options||{};options.cmdExport=(options.cmdExport!=undefined)?options.cmdExport:true;if(options.cmdExport){this.setCmdExport((typeof(options.cmdExport)=="object")?options.cmdExport:new GridCmdExport(id+":export",{"fileName":options.exportFileName,"templ":options.exportTempl,"publicMethod":options.exportPublicMethod}));}
options.templateOptions=options.templateOptions||{};options.templateOptions.cmdExport=options.cmdExport,GridCmdContainerAjx.superclass.constructor.call(this,id,options);}
extend(GridCmdContainerAjx,GridCmdContainer);GridCmdContainerAjx.prototype.m_cmdExport;GridCmdContainerAjx.prototype.addCommands=function(){GridCmdContainerAjx.superclass.addCommands.call(this);if(this.m_cmdExport){this.m_commands.push(this.m_cmdExport);}}
GridCmdContainerAjx.prototype.getCmdExport=function(){return this.m_cmdExport;}
GridCmdContainerAjx.prototype.setCmdExport=function(v){this.m_cmdExport=v;} 
function GridCmdContainerObj(id,options){options=options||{};options.cmdLineMove=(options.cmdLineMove!=undefined)?options.cmdLineMove:true;if(options.cmdLineMove||options.cmdLineUp||options.cmdLineDown){this.setCmdLineUp((typeof options.cmdLineUp=="object")?options.cmdLineUp:new GridCmdRowUp(id+":lineup"));this.setCmdLineDown((typeof options.cmdLineDown=="object")?options.cmdLineDown:new GridCmdRowDown(id+":linedown"));}
GridCmdContainerObj.superclass.constructor.call(this,id,options);}
extend(GridCmdContainerObj,GridCmdContainerAjx);GridCmdContainerObj.prototype.m_cmdLineUp;GridCmdContainerObj.prototype.m_cmdLineDown;GridCmdContainerObj.prototype.addCommands=function(){GridCmdContainerObj.superclass.addCommands.call(this);if(this.m_cmdLineUp){this.m_commands.push(this.m_cmdLineUp);}
if(this.m_cmdLineDown){this.m_commands.push(this.m_cmdLineDown);}}
GridCmdContainerObj.prototype.getCmdLineUp=function(){return this.m_cmdLineUp;}
GridCmdContainerObj.prototype.setCmdLineUp=function(v){this.m_cmdLineUp=v;}
GridCmdContainerObj.prototype.getCmdLineDown=function(){return this.m_cmdLineDown;}
GridCmdContainerObj.prototype.setCmdLineDown=function(v){this.m_cmdLineDown=v;} 
function GridCmdInsert(id,options){options=options||{};options.glyphPopUp="glyphicon-plus";options.caption=this.CAPTION;options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;GridCmdInsert.superclass.constructor.call(this,id,options);}
extend(GridCmdInsert,GridCmd);GridCmdInsert.prototype.onCommand=function(){this.m_grid.onInsert();} 
GridCmdInsert.prototype.TITLE="Создать новую запись";GridCmdInsert.prototype.CAPTION="Добавить"; 
function GridCmdEdit(id,options){options=options||{};options.glyph="glyphicon-pencil";options.showCmdControl=false;GridCmdEdit.superclass.constructor.call(this,id,options);}
extend(GridCmdEdit,GridCmd);GridCmdEdit.prototype.onCommand=function(){this.m_grid.onEdit();} 
GridCmdEdit.prototype.TITLE="Редактировать текущую запись"; 
function GridCmdCopy(id,options){options=options||{};options.glyph="glyphicon-copy";options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;GridCmdCopy.superclass.constructor.call(this,id,options);}
extend(GridCmdCopy,GridCmd);GridCmdCopy.prototype.onCommand=function(){this.m_grid.onCopy();} 
GridCmdCopy.prototype.TITLE="Скопировать текущую запись"; 
function GridCmdDelete(id,options){options=options||{};options.glyph="glyphicon-remove";options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;GridCmdDelete.superclass.constructor.call(this,id,options);}
extend(GridCmdDelete,GridCmd);GridCmdDelete.prototype.onCommand=function(){this.m_grid.onDelete();} 
GridCmdDelete.prototype.TITLE="Удалить текущую запись"; 
function GridCmdColManager(id,options){options=options||{};options.glyph="glyphicon-th-list";options.showCmdControl=false;this.m_variantStorageName=options.variantStorageName;this.m_variantStorageModel=options.variantStorageModel;if(this.m_variantStorageModel)this.m_variantStorageModel.getRow(0);GridCmdColManager.superclass.constructor.call(this,id,options);}
extend(GridCmdColManager,GridCmd);GridCmdColManager.prototype.m_colManForm;GridCmdColManager.prototype.m_variantStorageName;GridCmdColManager.prototype.m_variantStorageModel;GridCmdColManager.prototype.VISIB_ID="col_visib_data";GridCmdColManager.prototype.ORDER_ID="col_order_data";GridCmdColManager.prototype.FILTER_ID="filter_data";GridCmdColManager.prototype.onCommand=function(){var self=this;this.m_view=new ViewGridColManager("ViewGridColManager",{"grid":this.m_grid,"variantStorageName":this.m_variantStorageName,"filter":this.m_filter,"onApplyFilters":function(){self.onApplyFilters();},"onResetFilters":function(){self.onResetFilters();},"onVariantSave":function(){self.onVariantSave();},"onVariantOpen":function(){self.onVariantOpen();},"colOrder":this.m_colOrder,"colVisibility":this.m_colVisibility});this.m_colManForm=new WindowFormModalBS(CommonHelper.uniqid(),{"content":this.m_view,"cmdCancel":true,"controlCancelCaption":this.m_view.CMD_CANCEL_CAP,"controlCancelTitle":this.m_view.CMD_CANCEL_TITLE,"cmdOk":false,"onClickCancel":function(){self.m_colManForm.close();self.refreshGrid();},"contentHead":this.m_view.HEAD_TITLE});this.m_colManForm.open();}
GridCmdColManager.prototype.m_filter;GridCmdColManager.prototype.BTN_FILTER_CLASS_SET="btn-danger";GridCmdColManager.prototype.BTN_FILTER_CLASS_UNSET="btn-primary";GridCmdColManager.prototype.getCol=function(id){return(this.m_variantStorageModel?this.m_variantStorageModel.getFieldValue(id):null);}
GridCmdColManager.prototype.getColOrder=function(){return this.getCol(this.ORDER_ID);}
GridCmdColManager.prototype.getColVisibility=function(){return this.getCol(this.VISIB_ID);}
GridCmdColManager.prototype.init=function(){var head=this.m_grid.getHead();for(var row in head.m_elements){var head_row=head.m_elements[row];var columns=head_row.getInitColumns();var col_visib_data=this.getColVisibility()||[];var vis_cols={};for(var ind=0;ind<col_visib_data.length;ind++){var col=col_visib_data[ind].colId;col_visib_data[ind].colRef=columns[col];vis_cols[col]=col;}
var col_order_data=this.getColOrder()||[];var ord_cols={};for(var ind=0;ind<col_order_data.length;ind++){var col=col_order_data[ind].colId;col_order_data[ind][ind].colRef=columns[col];ord_cols[col]=col;}
for(var col in columns){if(!vis_cols[col]){col_visib_data.push({"colId":col,"checked":true,"colRef":columns[col]});}
if(!ord_cols[col]&&columns[col].getSortable()){var sort_cols=columns[col].getSortFieldId();var sort_dir=columns[col].getSort();if(!sort_cols){sort_dir="";sort_cols="";var cols=columns[col].getColumns();for(var i=0;i<cols.length;i++){sort_cols+=(sort_cols=="")?"":",";sort_cols+=cols[i].getField().getId();sort_dir+=(sort_dir=="")?"":",";sort_dir+="asc";}}
col_order_data.push({"colId":col,"fields":sort_cols,"directs":sort_dir,"checked":(sort_dir.length>0),"colRef":columns[col]});}}}}
GridCmdColManager.prototype.getFilter=function(){return this.m_filter;}
GridCmdColManager.prototype.setFilter=function(v){this.m_filter=v;}
GridCmdColManager.prototype.afterFilterSet=function(setCnt){var cl_old,cl_new;if(setCnt){cl_new=this.BTN_FILTER_CLASS_SET;cl_old=this.BTN_FILTER_CLASS_UNSET;}
else{cl_new=this.BTN_FILTER_CLASS_UNSET;cl_old=this.BTN_FILTER_CLASS_SET;}}
GridCmdColManager.prototype.refreshGrid=function(){var pag=this.m_grid.getPagination();if(pag){pag.reset();}
var self=this;this.m_grid.onRefresh();}
GridCmdColManager.prototype.onApplyFilters=function(){var cnt=this.m_filter.applyFilters(this.m_grid);this.afterFilterSet(cnt);this.refreshGrid();}
GridCmdColManager.prototype.onResetFilters=function(){this.m_filter.resetFilters(this.m_grid);this.afterFilterSet(0);this.refreshGrid();}
GridCmdColManager.prototype.onVariantOpen=function(){var self=this;(new VariantStorage({"variantStorageName":this.m_variantStorageName,"afterFormClose":function(model){delete self.m_variantStorageModel;self.m_variantStorageModel=model;self.m_view.refresh();}})).openStorage();}
GridCmdColManager.prototype.onVariantSave=function(){var vals={};vals[this.VISIB_ID]=this.getColVisibility();vals[this.ORDER_ID]=this.getColOrder();(new VariantStorage({"variantStorageName":this.m_variantStorageName})).saveStorage("all_data",vals);} 
GridCmdColManager.prototype.TITLE="Открыть форму настройки колонок";GridCmdColManager.prototype.NOTE_SAVED="Сохранение выполнено"; 
function GridCmdPrint(id,options){options=options||{};options.glyph="glyphicon-print";options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;GridCmdPrint.superclass.constructor.call(this,id,options);}
extend(GridCmdPrint,GridCmd);GridCmdPrint.prototype.onCommand=function(){this.m_grid.onPrint();} 
GridCmdPrint.prototype.TITLE="Распечатать список"; 
function GridCmdRefresh(id,options){options=options||{};options.glyph="glyphicon-refresh";options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;GridCmdRefresh.superclass.constructor.call(this,id,options);}
extend(GridCmdRefresh,GridCmd);GridCmdRefresh.prototype.onCommand=function(){this.m_grid.onRefresh();} 
GridCmdRefresh.prototype.TITLE="Обновить содержимое списка"; 
function GridCmdPrintObj(id,options){options=options||{};options.showCmdControlInPopup=(options.showCmdControlInPopup!=undefined)?options.showCmdControlInPopup:false;var self=this;options.controls=[new ButtonPrintList(id,{"printList":options.printList,"keyIds":options.keyIds,"app":options.app})];GridCmdPrintObj.superclass.constructor.call(this,id,options);}
extend(GridCmdPrintObj,GridCmd);GridCmdPrintObj.prototype.controlsToPopUp=function(popUp){if(this.m_controls.length){var self=this;popUp.addButton(new ButtonCtrl(null,{"caption":"Печатные формы","attrs":{"objInd":0},"onClick":function(){}}));}}
GridCmdPrintObj.prototype.setGrid=function(v){GridCmdPrintObj.superclass.setGrid.call(this,v);if(this.m_controls.length){this.m_controls[0].setGrid(v);}}
GridCmdPrintObj.prototype.setPrintList=function(v){this.m_controls[0].setPrintList(v);} 
function GridCmdSearch(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;var btn_class=options.buttonClass||ButtonCmd;var self=this;this.m_setCtrl=new btn_class(id+":set",{"glyph":"glyphicon-zoom-in","onClick":function(){self.onCommand();},"attrs":{"title":this.TITLE}});options.controls=[this.m_setCtrl];GridCmdSearch.superclass.constructor.call(this,id,options);}
extend(GridCmdSearch,GridCmd);GridCmdSearch.prototype.showDialog=function(str){var selected_node=this.m_grid.getSelectedNode();var cur_field_id;if(selected_node){cur_field_id=selected_node.getAttribute("fieldId");}
else{var inf_ctrl=this.m_grid.getSearchInfControl();if(inf_ctrl){var l=inf_ctrl.getElements();for(var id in l){if(!l[id]){continue;}
cur_field_id=l[id].getAttr("fieldid");break;}}}
var columns=[];var grid_columns=this.m_grid.getHead().getColumns();var grid_model=this.m_grid.getModel();for(var i in grid_columns){var f=grid_columns[i].getField();if(!f||grid_columns[i].getSearchable()===false){continue;}
var fid=f.getId();var col_sopts=grid_columns[i].getSearchOptions()||{};if(!col_sopts.field&&grid_columns[i].getCtrlBindFieldId()&&grid_model.fieldExists(grid_columns[i].getCtrlBindFieldId())){grid_columns[i].setCtrlBindField(grid_model.getField(grid_columns[i].getCtrlBindFieldId()));}
if(!col_sopts.field&&grid_columns[i].getCtrlBindField()){col_sopts.field=grid_columns[i].getCtrlBindField();}
var ctrl_cl,ctrl_cl_opts;if(col_sopts&&col_sopts.ctrlClass){ctrl_cl=col_sopts.ctrlClass;ctrl_cl_opts=col_sopts.ctrlOptions?col_sopts.ctrlOptions:undefined;}else{ctrl_cl=grid_columns[i].getCtrlClass();ctrl_cl_opts=grid_columns[i].getCtrlOptions();}
if(!col_sopts.field&&(f.getDataType()==Field.prototype.DT_JSON||f.getDataType()==Field.prototype.DT_JSONB)&&fid.substr(fid.length-5)=="s_ref"){var guessed_fid=fid.substr(0,fid.length-5)+"_id";if(ctrl_cl&&grid_model.fieldExists(guessed_fid)){col_sopts.field=new FieldInt(guessed_fid);col_sopts.typeChange=false;col_sopts.searchType="on_match";}
else if(ctrl_cl){var ctrl_key_ids;try{ctrl_key_ids=(new ctrl_cl()).getKeyIds();}catch(err){console.log("GridCmdSearch ctrl_cl=",ctrl_cl,"isnot a consructor");}
if(ctrl_key_ids&&ctrl_key_ids.length){col_sopts.field=new FieldString(fid+"->keys->"+ctrl_key_ids[0]);col_sopts.typeChange=false;col_sopts.searchType="on_match";}}
else{col_sopts.field=new FieldString(fid+"->descr");}}
var sStruc={"id":fid,"descr":grid_columns[i].getHeadCell().getValue(),"current":((!cur_field_id&&columns.length==0)||cur_field_id==fid),"ctrlClass":ctrl_cl,"ctrlOptions":ctrl_cl_opts||{},"searchType":col_sopts.searchType||"on_part","typeChange":col_sopts.typeChange,"field":col_sopts.field||f,"condSign":col_sopts.condSign};if(sStruc.searchType!="on_match"&&sStruc.searchType!="on_beg"&&sStruc.searchType!="on_part"){sStruc.searchType="on_match";}
if(sStruc.typeChange==undefined)sStruc.typeChange=true;var data_t=sStruc.field.getDataType();if(data_t==f.DT_DATE){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditDate;if(!sStruc.searchType)sStruc.searchType="on_match";sStruc.typeChange=false;}
else if(data_t==f.DT_DATETIME||data_t==f.DT_DATETIMETZ){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditDateTime;if(!sStruc.searchType)sStruc.searchType="on_match";sStruc.typeChange=false;}
else if(data_t==f.DT_TIME){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditTime;if(!sStruc.searchType)sStruc.searchType="on_match";sStruc.typeChange=false;}
else if(data_t==f.DT_INT||data_t==f.DT_INT_UNSIGNED){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditInt;}
else if(data_t==f.DT_FLOAT_UNSIGNED||data_t==f.DT_FLOAT){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditFloat;}
else if(data_t==f.DT_BOOL){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditCheckBox;sStruc.searchType="on_match";sStruc.typeChange=false;}
else if(data_t==f.DT_EMAIL){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditEmail;}
else if(!sStruc.ctrlClass){sStruc.ctrlClass=EditString;}
if(sStruc.searchType==undefined)sStruc.searchType="on_part";columns.push(sStruc);}
var self=this;WindowSearch.show({"text":str,"columns":columns,"callBack":function(res,params){self.m_grid.focus();if(res==WindowSearch.RES_OK){self.doSearch(params);}}});}
GridCmdSearch.prototype.onCommand=function(){this.showDialog("");}
GridCmdSearch.prototype.onUnset=function(){var pag=this.m_grid.getPagination();if(pag)pag.reset();var inf_ctrl=this.m_grid.getSearchInfControl();if(inf_ctrl){inf_ctrl.clearSearch();}
this.setFiltered(false);var self=this;this.m_grid.onRefresh(function(){self.m_grid.focus();});}
GridCmdSearch.prototype.doSearch=function(params){if(params.search_str){var pm=this.m_grid.getReadPublicMethod();var contr=pm.getController();var s_pref=(params.how=="on_part")?"%":"";var s_pref_descr=(params.how=="on_part")?"*":"";var s_posf=(params.how=="on_part"||params.how=="on_beg")?"%":"";var s_posf_descr=(params.how=="on_part"||params.how=="on_beg")?"*":"";var pm=this.m_grid.getReadPublicMethod();var contr=pm.getController();console.log("applying search params:",params)
let sgn;if(params.how!="on_match"){sgn=contr.PARAM_SGN_LIKE;}else if(params.condSign){sgn=params.condSign;}else{sgn=contr.PARAM_SGN_EQUAL;}
var filter={"field":params.where,"sign":sgn,"val":s_pref+params.search_str+s_posf,"icase":(params.how!="on_match")?"1":"0"};this.m_grid.setFilter(filter);var pag=this.m_grid.getPagination();if(pag)pag.reset();var self=this;var inf_ctrl=this.m_grid.getSearchInfControl();if(inf_ctrl){inf_ctrl.addSearch(this.m_grid.getFilterKey(filter),params.descr,s_pref_descr+params.search_descr+s_posf_descr,params.where);inf_ctrl.setOnFilterClear(function(){self.setFiltered(false);});}
window.setGlobalWait(true);this.m_grid.onRefresh(function(){self.setFiltered(true);window.setGlobalWait(false);});}}
GridCmdSearch.prototype.setGrid=function(v){GridCmdSearch.superclass.setGrid.call(this,v);var self=this;v.setOnSearch(function(e){var ch=(e&&e.char)?e.char:null;if(ch){self.m_grid.setFocused(false);self.showDialog(ch);return true;}});v.setOnSearchDialog(function(){self.onCommand();});v.setOnSearchReset(function(){self.onUnset();});}
GridCmdSearch.prototype.setFiltered=function(v){if(v){DOMHelper.swapClasses(this.m_setCtrl.getNode(),"btn-danger","bg-blue-400");}
else{DOMHelper.swapClasses(this.m_setCtrl.getNode(),"bg-blue-400","btn-danger");}} 
GridCmdSearch.prototype.TITLE="Открыть форму поиска (ctrl+F)";GridCmdSearch.prototype.TITLE_UNSET="Отменить поиск (ctrl+G)"; 
function GridCmdExport(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;options.glyph="glyphicon-save-file";this.m_fileName=options.fileName;this.m_templ=options.templ;this.m_publicMethod=options.publicMethod;GridCmdExport.superclass.constructor.call(this,id,options);}
extend(GridCmdExport,GridCmd);GridCmdExport.prototype.m_fileName;GridCmdExport.prototype.m_templ;GridCmdExport.prototype.onCommand=function(){var flt=this.m_grid.getCommands().getCmdFilter();if(flt){flt.getFilter().applyFilters(this.m_grid);}
var pm;if(this.m_publicMethod){pm=this.m_publicMethod;}else{pm=this.m_grid.getReadPublicMethod();}
if(this.m_grid.condFilterToMethod){this.m_grid.condFilterToMethod(pm);}
if(pm.fieldExists("fname")){pm.setFieldValue("fname",this.m_fileName||this.DEF_FILE_NAME);}
if(this.m_templ&&pm.fieldExists("fname")){pm.setFieldValue("templ",this.m_templ);}
pm.setFieldValue("from",0);pm.setFieldValue("count",5000);pm.download("ViewExcel");} 
GridCmdExport.prototype.TITLE="Экспорт списка в файл Excel";GridCmdExport.prototype.DEF_FILE_NAME="Экспорт.xls"; 
function GridCmdExportExcelLocal(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;options.glyph="glyphicon-save-file";this.m_sheetName=options.sheetName;this.m_fileName=options.fileName;GridCmdExportExcelLocal.superclass.constructor.call(this,id,options);}
extend(GridCmdExportExcelLocal,GridCmd);GridCmdExportExcelLocal.prototype.onCommand=function(){var flt=this.m_grid.getCommands().getCmdFilter();DOMHelper.tableToExcel(this.m_grid.getNode(),this.m_sheetName||this.DEF_FILE_NAME,this.m_fileName||this.DEF_FILE_NAME);} 
GridCmdExportExcelLocal.prototype.TITLE="Экспорт списка в файл Excel";GridCmdExportExcelLocal.prototype.DEF_FILE_NAME="Экспорт.xls";GridCmdExportExcelLocal.prototype.DEF_SHEET_NAME="Экспорт данных"; 
function GridCmdAllCommands(id,options){options=options||{};options.glyph="glyphicon-collapse-down";options.caption=this.CAPTION;options.showCmdControl=true;options.showCmdControlInPopup=false;GridCmdAllCommands.superclass.constructor.call(this,id,options);}
extend(GridCmdAllCommands,GridCmd);GridCmdAllCommands.prototype.onCommand=function(e){var m=this.m_grid.getPopUpMenu();if(m){if(m.getVisible()){m.hide();}
else{m.show(e,this.m_controls[0].getNode());}}} 
GridCmdAllCommands.prototype.TITLE="Показать все команды";GridCmdAllCommands.prototype.CAPTION="Все команды  "; 
function GridCmdDOCUnprocess(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;options.glyph="glyphicon-unchecked";GridCmdDOCUnprocess.superclass.constructor.call(this,id,options);}
extend(GridCmdDOCUnprocess,GridCmd);GridCmdDOCUnprocess.prototype.onCommand=function(){var self=this;WindowQuestion.show({"cancel":false,"text":this.CONFIRM,"callBack":function(r){if(r==WindowQuestion.RES_YES){self.doDelete();}}});}
GridCmdDOCUnprocess.prototype.doDelete=function(){var contr=this.m_grid.getReadPublicMethod().getController();if(contr.publicMethodExists("set_unprocessed")){var self=this;var keys=this.m_grid.getSelectedNodeKeys();var pm=contr.getPublicMethod("set_unprocessed");pm.setFieldValue("doc_id",keys["id"]);pm.run({"async":true,"ok":function(){self.m_grid.onRefresh();window.showNote(self.NOTE_DELETED);}})}} 
GridCmdDOCUnprocess.prototype.TITLE="Отменить проведение документа";GridCmdDOCUnprocess.prototype.CONFIRM="Отменить проведение документа?";GridCmdDOCUnprocess.prototype.NOTE_DELETED="Отменено проведение документа."; 
function GridCmdDOCShowActs(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;options.glyph="glyphicon-log-in";GridCmdDOCShowActs.superclass.constructor.call(this,id,options);}
extend(GridCmdDOCShowActs,GridCmd);GridCmdDOCShowActs.prototype.onCommand=function(){alert("GridCmdDOCShowActs.prototype.onCommand");} 
GridCmdDOCShowActs.prototype.TITLE="Показать движения документа"; 
function GridCmdRowUp(id,options){options=options||{};options.glyph="glyphicon-arrow-up";options.buttonClass=options.buttonClass||ButtonCmd;options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;GridCmdRowUp.superclass.constructor.call(this,id,options);}
extend(GridCmdRowUp,GridCmd);GridCmdRowUp.prototype.onCommand=function(){this.m_grid.onRowUp();} 
GridCmdRowUp.prototype.TITLE="На одну строку вверх"; 
function GridCmdRowDown(id,options){options=options||{};options.glyph="glyphicon-arrow-down";options.buttonClass=options.buttonClass||ButtonCmd;options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;GridCmdRowDown.superclass.constructor.call(this,id,options);}
extend(GridCmdRowDown,GridCmd);GridCmdRowDown.prototype.onCommand=function(){this.m_grid.onRowDown();} 
GridCmdRowDown.prototype.TITLE="На одну строку вниз"; 
function GridCmdFilter(id,options){options=options||{};options.glyph="glyphicon-filter";GridCmdFilter.superclass.constructor.call(this,id,options);this.m_filter=new ModelFilter({"filters":options.filters});this.setControlSave(options.controlSave);this.setControlOpen(options.controlOpen);this.m_controls[0].setVisible(true);this.m_variantStorage=options.variantStorage;}
extend(GridCmdFilter,GridCmd);GridCmdFilter.prototype.BTN_CLASS_SET="btn-danger";GridCmdFilter.prototype.BTN_CLASS_UNSET="btn-primary";GridCmdFilter.prototype.m_filter;GridCmdFilter.prototype.m_controlSave;GridCmdFilter.prototype.m_controlOpen;GridCmdFilter.prototype.m_gridRefresh;GridCmdFilter.prototype.m_pop;GridCmdFilter.prototype.m_variantStorage;GridCmdFilter.prototype.setFilterVisibile=function(v){if(this.m_grid)this.m_grid.setRefreshInterval((v)?0:this.m_gridRefresh);if(this.m_pop)this.m_pop.setVisible(v);if(!v&&this.m_grid){this.m_grid.focus();}}
GridCmdFilter.prototype.afterFilterSet=function(setCnt){var btn=this.getControl();var cl_old,cl_new;if(setCnt){cl_new=this.BTN_CLASS_SET;cl_old=btn.getColorClass();}
else{cl_new=btn.getColorClass();cl_old=this.BTN_CLASS_SET;}
DOMHelper.swapClasses(btn.getNode(),cl_new,cl_old);}
GridCmdFilter.prototype.refreshGrid=function(){var pag=this.m_grid.getPagination();if(pag){pag.reset();}
var self=this;window.setGlobalWait(true);this.m_grid.onRefresh(function(){self.setFilterVisibile(false);},null,function(){window.setGlobalWait(false);});}
GridCmdFilter.prototype.onCommand=function(e){if(!this.m_pop){var self=this;this.m_pop=new PopOver(this.m_id+":popover",{"caption":this.TITLE,"zIndex":"2000","className":window.getBsCol(8),"contentElements":[new GridCmdFilterView(this.m_id+":popover:cont",{"filter":this.m_filter,"cmdSet":(this.m_grid!=undefined),"cmdUnset":(this.m_grid!=undefined),"onApplyFilters":(this.m_grid==undefined)?null:function(){var cnt=self.m_filter.applyFilters(self.m_grid);self.afterFilterSet(cnt);self.refreshGrid();},"onResetFilters":(this.m_grid==undefined)?null:function(){self.m_filter.resetFilters(self.m_grid);self.afterFilterSet(0);self.refreshGrid();},"controlSave":this.getControlSave(),"controlOpen":this.getControlOpen()})]});if(this.m_grid){this.m_gridRefresh=this.m_grid.getRefreshInterval();this.m_grid.setRefreshInterval(0);}
this.m_pop.toDOM(e,this.getControl().getNode());}
else{this.setFilterVisibile(!this.m_pop.getVisible());}}
GridCmdFilter.prototype.getFilter=function(){return this.m_filter;}
GridCmdFilter.prototype.setFilter=function(v){this.m_filter=v;}
GridCmdFilter.prototype.applyFilters=function(){if(this.m_pop){this.m_filter.applyFilters(this.m_grid);}}
GridCmdFilter.prototype.getControlSave=function(v){return this.m_controlSave;}
GridCmdFilter.prototype.setControlSave=function(v){this.m_controlSave=v;if(v)this.m_controlSave.setCmdFilter(this);}
GridCmdFilter.prototype.getControlOpen=function(v){return this.m_controlOpen;}
GridCmdFilter.prototype.setControlOpen=function(v){this.m_controlOpen=v;if(v)this.m_controlOpen.setCmdFilter(this);}
GridCmdFilter.prototype.unserializeFilters=function(){if(this.m_variantStorage&&this.m_variantStorage.model){var cnt=this.m_filter.setValue(this.m_variantStorage.model.getFieldValue("filter_data"));this.afterFilterSet(cnt);if(cnt&&this.m_grid){this.m_filter.applyFilters(this.m_grid);}}}
GridCmdFilter.prototype.setGrid=function(v){GridCmdFilter.superclass.setGrid.call(this,v);this.unserializeFilters();}
GridCmdFilter.prototype.onDelDOM=function(){if(this.m_pop){this.m_pop.delDOM();delete this.m_pop;}}
GridCmdFilter.prototype.setFilterInfo=function(v){this.m_filterInfo=v;} 
GridCmdFilter.prototype.TITLE="Настройка отбора"; 
function GridCmdFilterView(id,options){options=options||{};options.templateOptions={"bsCol":window.getBsCol()};options.template=window.getApp().getTemplate("GridCmdFilterView");GridCmdFilterView.superclass.constructor.call(this,id,"TEMPLATE",options);options.cmdSet=(options.cmdSet!=undefined)?options.cmdSet:true;options.cmdUnset=(options.cmdUnset!=undefined)?options.cmdUnset:options.cmdSet;var self=this;if(options.cmdSet||options.controlSet){this.setControlSet(options.controlSet||new ButtonCmd(id+":set",{"caption":this.SET_CAP,"onClick":function(){self.applyFilters();},"attrs":{"title":this.SET_TITLE}}));}
if(options.cmdUnset||options.controlUnset){this.setControlUnset(options.controlUnset||new ButtonCmd(id+":unset",{"caption":this.UNSET_CAP,"onClick":function(){self.resetFilters();},"attrs":{"title":this.UNSET_TITLE}}));}
if(options.controlSave){this.m_origSave=options.controlSave.getControl(0);this.setControlSave(new ButtonCmd(id+":save",{"glyph":this.m_origSave.getGlyph(),"onClick":function(){options.controlSave.onCommand();},"attrs":{"title":this.m_origSave.getAttr("title")}}));}
if(options.controlOpen){this.m_origOpen=options.controlOpen.getControl(0);this.setControlSave(new ButtonCmd(id+":open",{"glyph":this.m_origOpen.getGlyph(),"onClick":function(){options.controlOpen.onCommand();},"attrs":{"title":this.m_origOpen.getAttr("title")}}));}
this.setFilter(options.filter);this.setOnApplyFilters(options.onApplyFilters);this.setOnResetFilters(options.onResetFilters);}
extend(GridCmdFilterView,ControlContainer);GridCmdFilterView.prototype.m_controlSet;GridCmdFilterView.prototype.m_controlUnset;GridCmdFilterView.prototype.m_controlSave;GridCmdFilterView.prototype.m_controlOpen;GridCmdFilterView.prototype.addControls=function(v){this.clear();if(this.m_filter){var filters=this.m_filter.getFilters();for(var id in filters){if(!filters[id]||!filters[id].binding)continue;var ctrl=filters[id].binding.getControl();ctrl.setVisible(true);this.addElement(ctrl);}}
if(this.m_controlSet)this.addElement(this.m_controlSet);if(this.m_controlUnset)this.addElement(this.m_controlUnset);if(this.m_controlSave)this.addElement(this.m_controlSave);if(this.m_controlOpen)this.addElement(this.m_controlOpen);}
GridCmdFilterView.prototype.setControlSet=function(v){this.m_controlSet=v;}
GridCmdFilterView.prototype.getControlSet=function(){return this.m_controlSet;}
GridCmdFilterView.prototype.setControlUnset=function(v){this.m_controlUnset=v;}
GridCmdFilterView.prototype.getControlUnset=function(){return this.m_controlUnset;}
GridCmdFilterView.prototype.setFilter=function(v){this.m_filter=v;this.addControls();}
GridCmdFilterView.prototype.getFilter=function(){return this.m_filter;}
GridCmdFilterView.prototype.setOnApplyFilters=function(v){this.m_onApplyFilters=v;}
GridCmdFilterView.prototype.getOnApplyFilters=function(){return this.m_onApplyFilters;}
GridCmdFilterView.prototype.setOnResetFilters=function(v){this.m_onResetFilters=v;}
GridCmdFilterView.prototype.getOnResetFilters=function(){return this.m_onResetFilters;}
GridCmdFilterView.prototype.applyFilters=function(){if(this.m_filter){if(this.m_onApplyFilters){this.m_onApplyFilters();}}}
GridCmdFilterView.prototype.resetFilters=function(){if(this.m_filter){if(this.m_onResetFilters){this.m_onResetFilters();}}}
GridCmdFilterView.prototype.setControlSave=function(v){this.m_controlSave=v;}
GridCmdFilterView.prototype.getControlSave=function(v){return this.m_controlSave;}
GridCmdFilterView.prototype.setControlOpen=function(v){this.m_controlOpen=v;}
GridCmdFilterView.prototype.getControlOpen=function(v){return this.m_controlOpen;} 
GridCmdFilterView.prototype.SET_CAP="Отобрать";GridCmdFilterView.prototype.SET_TITLE="Применить выбранные параметры отбора";GridCmdFilterView.prototype.UNSET_CAP="Отменить";GridCmdFilterView.prototype.UNSET_TITLE="Сбросить настройки отбора"; 
function GridCmdFilterSave(id,options){options=options||{};options.glyph="glyphicon-save";options.showCmdControl=false;options.showCmdControlInPopup=false;this.m_variantStorageName=options.variantStorageName;this.m_dataCol=options.dataCol;GridCmdFilterSave.superclass.constructor.call(this,id,options);}
extend(GridCmdFilterSave,GridCmd);GridCmdFilterSave.prototype.m_form;GridCmdFilterSave.prototype.m_view;GridCmdFilterSave.prototype.m_cmdFilter;GridCmdFilterSave.prototype.m_variantStorageName;GridCmdFilterSave.prototype.m_dataCol;GridCmdFilterSave.prototype.onCommand=function(e){var self=this;this.m_cmdFilter.setFilterVisibile(false);(new VariantStorage({"afterFormClose":function(){self.m_cmdFilter.setFilterVisibile(true);},"variantStorageName":this.m_variantStorageName})).saveStorage(this.m_dataCol,this.m_cmdFilter.getFilter().getValue());}
GridCmdFilterSave.prototype.setCmdFilter=function(v){this.m_cmdFilter=v;} 
GridCmdFilterSave.prototype.TITLE="Сохранить настройку"; 
function GridCmdFilterOpen(id,options){options=options||{};options.glyph="glyphicon-open";options.showCmdControl=false;options.showCmdControlInPopup=false;this.m_variantStorageName=options.variantStorageName;this.m_dataCol=options.dataCol;GridCmdFilterOpen.superclass.constructor.call(this,id,options);}
extend(GridCmdFilterOpen,GridCmd);GridCmdFilterOpen.prototype.m_cmdFilter;GridCmdFilterOpen.prototype.m_variantStorageName;GridCmdFilterOpen.prototype.m_form;GridCmdFilterOpen.prototype.m_dataCol;GridCmdFilterOpen.prototype.onCommand=function(e){var self=this;this.m_cmdFilter.setFilterVisibile(false);(new VariantStorage({"afterFormClose":function(val){if(val)self.m_cmdFilter.getFilter().setValue(val);self.m_cmdFilter.setFilterVisibile(true);},"variantStorageName":this.m_variantStorageName})).openStorage(this.m_dataCol);}
GridCmdFilterOpen.prototype.setCmdFilter=function(v){this.m_cmdFilter=v;} 
GridCmdFilterOpen.prototype.TITLE="Выбрать настройку"; 
function ViewGridColManager(id,options){options=options||{};var self=this;this.m_onClose=options.onClose;this.m_filter=options.filter;this.m_onApplyFilters=options.onApplyFilters;this.m_onResetFilters=options.onResetFilters;this.m_onVariantSave=options.onVariantSave;this.m_onVariantOpen=options.onVariantOpen;options.templateOptions={"colorClass":window.getApp().getColorClass(),"bsCol":window.getBsCol(),"TAB_COLUMNS":this.TAB_COLUMNS,"TAB_SORT":this.TAB_SORT};options.addElement=function(){this.addElement(new ViewGridColVisibility(id+":view-visibility",{"colStruc":options.colVisibility,"variantStorageName":options.variantStorageName,"grid":options.grid}));this.addElement(new ViewGridColOrder(id+":view-order",{"colStruc":options.colOrder,"variantStorageName":options.variantStorageName,"grid":options.grid}));this.addElement(new ButtonCmd(id+":save",{"glyph":"glyphicon-save","onClick":function(){self.m_onVariantSave.call(this);},"attrs":{"title":this.TITLE_SAVE}}));this.addElement(new ButtonCmd(id+":open",{"glyph":"glyphicon-open","onClick":function(){self.m_onVariantOpen.call(this);},"attrs":{"title":this.TITLE_OPEN}}));}
ViewGridColManager.superclass.constructor.call(this,id,"TEMPLATE",options);}
extend(ViewGridColManager,ControlContainer);ViewGridColManager.refresh=function(){this.getElement("view-visibility").refresh();this.getElement("view-order").refresh();} 
ViewGridColManager.prototype.VISIB_MENU_CAP="Видимость";ViewGridColManager.prototype.SORT_MENU_CAP="Сортировка";ViewGridColManager.prototype.CLOSE_CAP="Закрыть";ViewGridColManager.prototype.CLOSE_TITLE="Закрыть форму";ViewGridColManager.prototype.TAB_COLUMNS="Колонки";ViewGridColManager.prototype.TAB_SORT="Сортировка";ViewGridColManager.prototype.TAB_FILTER="Отбор";ViewGridColManager.prototype.HEAD_TITLE="Настройка списка";ViewGridColManager.prototype.TITLE_SAVE="Сохранить настройку";ViewGridColManager.prototype.TITLE_OPEN="Восстановить настройку"; 
function ViewGridColParam(id,options){options=options||{};ViewGridColParam.superclass.constructor.call(this,id,"DIV",options);this.m_paramId=options.paramId;this.m_variantStorageName=options.variantStorageName;this.m_dataGrid=options.grid;var head=new GridHead();var row=new GridRow(id+":row1");this.addHeadCells(row);head.addElement(row);var body=new GridBody();this.m_onAfterSave=options.onAfterSave;this.m_initVal=options.colStruc;for(var col_ind=0;col_ind<this.m_initVal.length;col_ind++){var row=new GridRow(this.getId()+":grid:row-"+this.m_initVal[col_ind].colId,{"attrs":{"colId":this.m_initVal[col_ind].colId}});this.addCells(row,this.m_initVal[col_ind]);body.addElement(row);}
var popup_menu=new PopUpMenu();this.m_grid=new Grid(id+":grid",{"head":head,"body":body,"commands":new GridCmdContainer(id+":grid:cmd",{"cmdInsert":false,"cmdRefresh":false,"cmdPrint":false,"cmdSearch":false,"cmdColManager":false,"cmdAllCommands":false,"addCustomCommands":function(commands){commands.push(new GridCmdRowUp(id+":grid:cmd:rowUp",{"showCmdControl":true}));commands.push(new GridCmdRowDown(id+":grid:cmd:rowDown",{"showCmdControl":true}));},"popUpMenu":popup_menu}),"popUpMenu":popup_menu,"rowCommandPanelClass":null,"filter":null,"refreshInterval":0});this.addElement(this.m_grid);}
extend(ViewGridColParam,ControlContainer);ViewGridColParam.prototype.COL_CHECK_ID="check";ViewGridColParam.prototype.COL_NAME_ID="name";ViewGridColParam.prototype.refresh=function(){this.getElement("grid").onRefresh();}
ViewGridColParam.prototype.save=function(){}
ViewGridColParam.prototype.onAfterSave=function(){window.getApp().setTemplateParam(this.m_variantStorageName,this.m_paramId,this.m_initVal);} 
ViewGridColParam.prototype.COLUMNS_COL_CAP="Колонки";ViewGridColParam.prototype.SAVE_CAPTION="Применить";ViewGridColParam.prototype.SAVE_TITLE="Применить изменения";ViewGridColParam.prototype.NOTE_SAVED="Изменения записаны."; 
function ViewGridColVisibility(id,options){options=options||{};ViewGridColVisibility.superclass.constructor.call(this,id,options);}
extend(ViewGridColVisibility,ViewGridColParam);ViewGridColVisibility.prototype.addHeadCells=function(row){var pref=this.getId()+":grid:row1";row.addElement(new GridCellHead(pref+":"+this.COL_NAME_ID,{"value":this.COLUMNS_COL_CAP}));row.addElement(new GridCellHead(pref+":"+this.COL_CHECK_ID,{"value":this.COLUMNS_CHECK_CAP}));}
ViewGridColVisibility.prototype.addCells=function(row,fStruc){var pref=this.getId()+":grid:row-"+fStruc.fieldId;row.addElement(new GridCell(pref+":"+this.COL_NAME_ID,{"value":fStruc.colRef.getValue()}));row.addElement(new GridCell(pref+":"+this.COL_CHECK_ID,{"elements":[new EditCheckBox(pref+":"+this.COL_CHECK_ID+":toggle",{"className":"field_toggle","checked":fStruc.checked,"attrs":{"align":"center"}})]}));}
ViewGridColVisibility.prototype.getRowData=function(rowElem,struc){struc[rowElem.getNode().rowIndex-1]={"colId":rowElem.getAttr("colId"),"checked":rowElem.getElement(this.COL_CHECK_ID).getElement("toggle").getChecked()};}
ViewGridColVisibility.prototype.onAfterSave=function(){ViewGridColVisibility.superclass.onAfterSave.call(this);var head=this.m_dataGrid.getHead();for(var row in head.m_elements){var head_row=head.m_elements[row];head_row.delDOM();head_row.setColumnOrder(this.m_initVal);}
head.toDOM(this.m_dataGrid.m_node);this.m_dataGrid.onRefresh();} 
ViewGridColVisibility.prototype.COLUMNS_CHECK_CAP="Видимость"; 
function ViewGridColOrder(id,options){options=options||{};ViewGridColOrder.superclass.constructor.call(this,id,options);}
extend(ViewGridColOrder,ViewGridColParam);ViewGridColOrder.prototype.COL_DIR_ID="dir";ViewGridColOrder.prototype.addHeadCells=function(row){var pref=this.getId()+":grid:row1";row.addElement(new GridCellHead(pref+":"+this.COL_NAME_ID,{"value":this.COLUMNS_COL_CAP}));row.addElement(new GridCellHead(pref+":"+this.COL_CHECK_ID,{"value":this.COLUMNS_CHECK_CAP}));row.addElement(new GridCellHead(pref+":"+this.COL_DIR_ID,{"value":this.COLUMNS_DIR_CAP}));}
ViewGridColOrder.prototype.addCells=function(row,fStruc){var pref=this.getId()+":grid:row-"+fStruc.fieldId;row.setAttr("fields",fStruc.fields);row.addElement(new GridCell(pref+":"+this.COL_NAME_ID,{"value":fStruc.colRef.getValue()}));row.addElement(new GridCell(pref+":"+this.COL_CHECK_ID,{"elements":[new EditCheckBox(pref+":"+this.COL_CHECK_ID+":toggle",{"className":"field_toggle","checked":fStruc.checked,"attrs":{"align":"center"}})]}));var at_asc={};var at_desc={};if(fStruc.checked&&fStruc.directs=="asc"){at_asc.checked="checked";}
if(fStruc.checked&&fStruc.directs=="desc"){at_desc.checked="checked";}
row.addElement(new GridCell(pref+":"+this.COL_DIR_ID,{"elements":[new EditRadioGroup(pref+":"+this.COL_DIR_ID+":radiogroup",{"elements":[new EditRadio(pref+":"+this.COL_DIR_ID+":radiogroup:radio-asc",{"value":"asc","labelCaption":this.ASC_CAP,"name":fStruc.id+"_direct","editContClassName":"input-group "+window.getBsCol(1),"attrs":at_asc}),new EditRadio(pref+":"+this.COL_DIR_ID+":radiogroup:radio-desc",{"value":"desc","labelCaption":this.DESC_CAP,"name":fStruc.id+"_direct","editContClassName":"input-group "+window.getBsCol(1),"attrs":at_desc})]})]}));}
ViewGridColOrder.prototype.getRowData=function(rowElem,struc){var checked=rowElem.getElement(this.COL_CHECK_ID).getElement("toggle").getChecked();var directs="undefined";if(checked){directs=rowElem.getElement(this.COL_DIR_ID).getElement("radiogroup").getValue();}
struc[rowElem.getNode().rowIndex-1]={"colId":rowElem.getAttr("colId"),"fields":rowElem.getAttr("fields"),"directs":directs,"checked":checked};}
ViewGridColOrder.prototype.onAfterSave=function(){ViewGridColVisibility.superclass.onAfterSave.call(this);var cols={};for(var i=0;i<this.m_initVal.length;i++){cols[this.m_initVal[i].colId]=this.m_initVal[i];}
var head=this.m_dataGrid.getHead();for(var row in head.m_elements){var head_row=head.m_elements[row];var columns=head_row.m_elements;for(var col_id in columns){if(cols[col_id]&&cols[col_id].checked){cols[col_id].colRef.setSortFieldId(cols[col_id].fields);cols[col_id].colRef.setSort(cols[col_id].directs);}
else{columns[col_id].setSort("");}}}
this.m_dataGrid.onRefresh();} 
ViewGridColOrder.prototype.COLUMNS_DIR_CAP="Порядок";ViewGridColOrder.prototype.COLUMNS_CHECK_CAP="Сортировать";ViewGridColOrder.prototype.COLUMNS_DIR_CAP="Направление возр./убыв.";ViewGridColOrder.prototype.ASC_CAP="По возр.";ViewGridColOrder.prototype.DESC_CAP="По убыв."; 
function VariantStorageSaveView(id,options){options=options||{};var self=this;this.m_onClose=options.onClose;var model=new VariantStorageList_Model();var contr=new VariantStorage_Controller();var pm=contr.getPublicMethod("get_list");pm.setFieldValue("storage_name",options.variantStorageName);options.addElement=function(){this.addElement(new GridAjx(id+":variants",{"model":model,"controller":contr,"editInline":null,"editWinClass":null,"popUpMenu":null,"showHead":false,"commands":new GridCommandsAjx(id+":variants:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":true,"cmdCopy":false,"cmdPrint":false,"cmdRefresh":false,"cmdExport":false}),"head":new GridHead(id+":variants:head",{"elements":[new GridRow(id+":variants:head:row0",{"elements":[new GridCellHead(id+":variants:head:row0:default_variant",{"colAttrs":{"colspan":2},"columns":[new GridColumn({"field":model.getField("default_variant"),"assocClassList":{"true":"glyphicon glyphicon-ok"}})]}),new GridCellHead(id+":variants:head:row0:variant_name",{"columns":[new GridColumn({"field":model.getField("variant_name")})]})]})]}),"pagination":null,"autoRefresh":true,"refreshInterval":0,"rowSelect":true,"focus":true}));this.addElement(new EditString(id+":name",{"focus":true,"labelCaption":this.VARIANT_NAME_CAP,"className":window.getApp().getBsCol(12)}));this.addElement(new EditCheckBox(id+":default_variant",{"labelCaption":this.DEF_VARIANT_CAP,"className":window.getApp().getBsCol(12)}));}
VariantStorageSaveView.superclass.constructor.call(this,id,"TEMPLATE",options);var grid=this.getElement("variants");this.m_gridOnClick=grid.onClick;var self=this;grid.onClick=function(ev){var grid=self.getElement("variants");self.m_gridOnClick.call(grid,ev);var row=grid.getModelRow();self.getElement("default_variant").setValue(row.default_variant.getValue());var ctrl=self.getElement("name");ctrl.setValue(row.variant_name.getValue());ctrl.focus();}}
extend(VariantStorageSaveView,ControlContainer); 
VariantStorageSaveView.prototype.VARIANT_NAME_CAP="Наименование:";VariantStorageSaveView.prototype.DEF_VARIANT_CAP="Использовать при открытии:";VariantStorageSaveView.prototype.CMD_CANCEL_CAP="Отмена";VariantStorageSaveView.prototype.CMD_CANCEL_TITLE="Отменить запись";VariantStorageSaveView.prototype.CMD_OK_CAP="Записать";VariantStorageSaveView.prototype.CMD_OK_TITLE="Записать настройку";VariantStorageSaveView.prototype.HEAD_TITLE="Сохранение настройки"; 
function VariantStorageOpenView(id,options){options=options||{};var self=this;this.m_onClose=options.onClose;var model=new VariantStorageList_Model();var contr=new VariantStorage_Controller();var pm=contr.getPublicMethod("get_list");pm.setFieldValue("storage_name",options.variantStorageName);VariantStorageOpenView.superclass.constructor.call(this,id,"TEMPLATE",options);this.addElement(new GridAjx(id+":variants",{"model":model,"controller":contr,"editInline":null,"editWinClass":null,"popUpMenu":null,"showHead":false,"commands":new GridCommandsAjx(id+":variants:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":true,"cmdCopy":false,"cmdPrint":false,"cmdRefresh":false,"cmdExport":false}),"head":new GridHead(id+":variants:head",{"elements":[new GridRow(id+":variants:head:row0",{"elements":[new GridCellHead(id+":variants:head:row0:variant_name",{"columns":[new GridColumn({"field":model.getField("variant_name")})],"sortable":true}),new GridCellHead(id+":variants:head:row0:default_variant",{"columns":[new GridColumnBool({"field":model.getField("default_variant"),"showFalse":false})]})]})]}),"pagination":null,"autoRefresh":true,"refreshInterval":0,"rowSelect":true,"focus":true,"onSelect":options.onSelect}));}
extend(VariantStorageOpenView,ControlContainer); 
VariantStorageOpenView.prototype.CMD_CANCEL_CAP="Отмена";VariantStorageOpenView.prototype.CMD_CANCEL_TITLE="Отменить выбор";VariantStorageOpenView.prototype.CMD_OK_CAP="Выбрать";VariantStorageOpenView.prototype.CMD_OK_TITLE="Выбрать настройку и закрыть форму";VariantStorageOpenView.prototype.HEAD_TITLE="Выбор сохраненной настройки"; 
function GridAjx(id,options){options=options||{};if(options.editInline){options.editViewClass=options.editViewClass||ViewGridEditInlineAjx;}
this.m_filters={};if(options.controller){options.readPublicMethod=options.readPublicMethod||((options.controller.publicMethodExists(options.controller.METH_GET_LIST))?options.controller.getPublicMethod(options.controller.METH_GET_LIST):null);options.insertPublicMethod=options.insertPublicMethod||((options.controller.publicMethodExists(options.controller.METH_INSERT))?options.controller.getPublicMethod(options.controller.METH_INSERT):null);options.updatePublicMethod=options.updatePublicMethod||((options.controller.publicMethodExists(options.controller.METH_UPDATE))?options.controller.getPublicMethod(options.controller.METH_UPDATE):null);options.deletePublicMethod=options.deletePublicMethod||((options.controller.publicMethodExists(options.controller.METH_DELETE))?options.controller.getPublicMethod(options.controller.METH_DELETE):null);options.editPublicMethod=options.editPublicMethod||((options.controller.publicMethodExists(options.controller.METH_GET_OBJ))?options.controller.getPublicMethod(options.controller.METH_GET_OBJ):null);}
if(options.readPublicMethod&&!options.model&&options.readPublicMethod.getListModelClass()){var m_class=options.readPublicMethod.getListModelClass();options.model=new m_class();}
this.setReadPublicMethod(options.readPublicMethod);this.setInsertPublicMethod(options.insertPublicMethod);this.setUpdatePublicMethod(options.updatePublicMethod);this.setDeletePublicMethod(options.deletePublicMethod);this.setExportPublicMethod(options.exportPublicMethod);this.setEditPublicMethod(options.editPublicMethod);this.setRefreshAfterDelRow(options.refreshAfterDelRow);this.setRefreshAfterUpdateRow((options.refreshAfterUpdateRow!=undefined)?options.refreshAfterUpdateRow:true);if(options.filters&&options.filters.length){for(var i=0;i<options.filters.length;i++){this.setFilter(options.filters[i]);}}
this.setOnDelOkMesTimeout(options.onDelOkMesTimeout||this.DEF_ONDELOK_MES_TIMEOUT);if(window.getApp().getAppSrv()){options.srvEvents=options.srvEvents||{};var srv_ev_exist=(options.srvEvents.events&&options.srvEvents.events.length);this.m_defSrvEvents=(options.defSrvEvents!=undefined)?options.defSrvEvents:(srv_ev_exist||options.refreshInterval>0);this.m_httpRrefreshInterval=options.refreshInterval;options.refreshInterval=(this.m_defSrvEvents||srv_ev_exist)?undefined:options.refreshInterval;if(this.m_defSrvEvents||srv_ev_exist){var self=this;options.srvEvents.onEvent=options.srvEvents.onEvent||function(params){self.srvEventsCallBack(params);}
options.srvEvents.onSubscribed=options.srvEvents.onSubscribed||function(){self.srvEventsOnSubscribed();}
options.srvEvents.onClose=options.srvEvents.onClose||function(error){self.srvEventsOnClose(error);}
options.srvEvents.onWakeup=options.srvEvents.onWakeup||function(error){self.srvEventsOnWakeup(error);}}}
GridAjx.superclass.constructor.call(this,id,options);}
extend(GridAjx,Grid);GridAjx.prototype.DEF_ONDELOK_MES_TIMEOUT=2000;GridAjx.prototype.m_readPublicMethod;GridAjx.prototype.m_insertPublicMethod;GridAjx.prototype.m_updatePublicMethod;GridAjx.prototype.m_deletePublicMethod;GridAjx.prototype.m_exportPublicMethod;GridAjx.prototype.m_editPublicMethod;GridAjx.prototype.m_refreshAfterDelRow;GridAjx.prototype.m_refreshAfterUpdateRow;GridAjx.prototype.m_filters;GridAjx.prototype.onGetData=function(resp){if(resp){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
GridAjx.superclass.onGetData.call(this);}
GridAjx.prototype.initEditView=function(parent,replacedNode,cmd){GridAjx.superclass.initEditView.call(this,parent,replacedNode,cmd);if(this.m_editViewObj.setWritePublicMethod){let pm=(cmd=="insert"||cmd=="copy")?this.getInsertPublicMethod():this.getUpdatePublicMethod();this.m_editViewObj.setWritePublicMethod(pm);}
if(this.m_editViewObj.setReadPublicMethod){this.m_editViewObj.setReadPublicMethod(this.getEditPublicMethod());}}
GridAjx.prototype.fillEditView=function(cmd){if(cmd!="insert"&&this.m_editViewObj.getReadPublicMethod){this.keysToPublicMethod(this.m_editViewObj.getReadPublicMethod());}
GridAjx.superclass.fillEditView.call(this,cmd);}
GridAjx.prototype.keysToPublicMethod=function(pm){var pm_fields=pm.getFields();var fields=this.m_model.getFields();for(id in pm_fields){if(fields[id]&&fields[id].getPrimaryKey()){var v=fields[id].getValue();pm_fields[id].setValue(v);}
else if(pm_fields[id].getPrimaryKey()){pm_fields[id].resetValue();}}}
GridAjx.prototype.read=function(cmd){if(this.m_editViewObj){this.m_editViewObj.read(cmd,function(resp,erCode,erStr){self.onError(resp,erCode,erStr)});}}
GridAjx.prototype.delRow=function(rowNode){var pm=this.getDeletePublicMethod();if(!pm){throw Error(this.ER_NO_DEL_PM);}
this.setEnabled(false);this.setModelToCurrentRow();this.keysToPublicMethod(pm);var self=this;pm.run({"async":false,"ok":function(resp){self.addLsnToReadPublicMethod(window.getApp().getLsnValueFromResponse(resp));self.afterServerDelRow();},"fail":function(resp,erCode,erStr){self.setEnabled(true);self.onError(resp,erCode,erStr);}});}
GridAjx.prototype.afterServerDelRow=function(){this.deleteRowNode();this.setEnabled(true);window.showTempNote(this.NT_REC_DELETED,null,this.m_onDelOkMesTimeout);this.focus();if(this.getRefreshAfterDelRow()){this.onRefresh();}}
GridAjx.prototype.filtersToMethod=function(sep){var pm=this.getReadPublicMethod();var contr=pm.getController();sep=(sep==undefined)?contr.PARAM_FIELD_SEP_VAL:sep;var s_fields,s_signs,s_vals,s_icases;for(var fid in this.m_filters){if(this.m_filters[fid]&&this.m_filters[fid].field&&this.m_filters[fid].sign){s_fields=((!s_fields)?"":s_fields+sep)+this.m_filters[fid].field;s_signs=((!s_signs)?"":s_signs+sep)+this.m_filters[fid].sign;s_vals=((!s_vals)?"":s_vals+sep)+this.m_filters[fid].val;s_icases=((!s_icases)?"":s_icases+sep)+(this.m_filters[fid].icase||"0");}}
pm.setFieldValue(contr.PARAM_COND_FIELDS,s_fields);pm.setFieldValue(contr.PARAM_COND_SGNS,s_signs);pm.setFieldValue(contr.PARAM_COND_VALS,s_vals);pm.setFieldValue(contr.PARAM_COND_ICASE,s_icases);}
GridAjx.prototype.condFilterToMethod=function(publicMethod){var contr=publicMethod.getController();if(publicMethod.fieldExists(contr.PARAM_COND_FIELDS)){this.filtersToMethod(contr.PARAM_FIELD_SEP_VAL);publicMethod.setFieldValue(contr.PARAM_FIELD_SEP,contr.PARAM_FIELD_SEP_VAL);}}
GridAjx.prototype.onRefresh=function(callBack,onError,onAll){if(!this.getEnabled()){if(callBack){callBack.call(this);}
return;}
var self=this;var pm=this.getReadPublicMethod();if(!pm){throw Error(this.ER_NO_READ_PM);}
var contr=pm.getController();var pag=this.getPagination();if(pag){var pag_f=pag.getFrom();var pag_cnt=pag.getCountPerPage();if(!isNaN(pag_f)){pm.setFieldValue(contr.PARAM_FROM,pag_f);}
else{pm.getField(contr.PARAM_FROM).unsetValue();}
if(!isNaN(pag_cnt)){pm.setFieldValue(contr.PARAM_COUNT,pag_cnt);}
else{pm.getField(contr.PARAM_COUNT).unsetValue();}}
this.condFilterToMethod(pm);this.orderingToMethod(pm);pm.run({"ok":function(resp){self.onGetData(resp);if(callBack){callBack.call(self);}},"fail":function(resp,erCode,erStr){self.onError(resp,erCode,erStr);if(onError){onError.call(self);}},"all":(onAll?function(){onAll.call(self);}:null)});}
GridAjx.prototype.orderingToMethod=function(pm){var sort_cols,sort_dirs;var head=this.getHead();var contr=pm.getController();if(head&&pm.fieldExists(contr.PARAM_ORD_FIELDS)){for(var row in head.m_elements){var head_row=head.m_elements[row];for(var col in head_row.m_elements){if(head_row.m_elements[col].getSortable()){var sort_dir=head_row.m_elements[col].getSort();if(sort_dir=="asc"||sort_dir=="desc"){var sort_col=head_row.m_elements[col].getSortFieldId();if(!sort_col){var cols=head_row.m_elements[col].getColumns();for(var i=0;i<cols.length;i++){sort_cols=(sort_cols==undefined)?"":sort_cols;sort_cols+=(sort_cols=="")?"":contr.PARAM_FIELD_SEP_VAL;var sort_id;var sort_f=cols[i].getField();if(sort_f){var sort_dt=sort_f.getDataType();if(sort_dt==Field.prototype.DT_JSON||sort_dt==Field.prototype.DT_JSONB){var sort_s_opts=cols[i].getSearchOptions();if(sort_s_opts&&sort_s_opts.field){sort_id=sort_s_opts.field.getId();}else{sort_id=sort_f.getId()+"->>'descr'";}}}
sort_cols+=sort_id?sort_id:(sort_f?sort_f.getId():cols[i].getId());sort_dirs=(sort_dirs==undefined)?"":sort_dirs;sort_dirs+=(sort_dirs=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_dirs+=sort_dir;}}
else{sort_cols=(sort_cols==undefined)?"":sort_cols;sort_cols+=(sort_cols=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_cols+=sort_col;sort_dirs=(sort_dirs==undefined)?"":sort_dirs;sort_dirs+=(sort_dirs=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_dirs+=sort_dir;}}}}}
pm.setFieldValue(contr.PARAM_ORD_FIELDS,sort_cols);pm.setFieldValue(contr.PARAM_ORD_DIRECTS,sort_dirs);}}
GridAjx.prototype.onError=function(resp,erCode,erStr){GridAjx.superclass.onError.call(this,window.getApp().formatError(erCode,erStr));}
GridAjx.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
GridAjx.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
GridAjx.prototype.setInsertPublicMethod=function(v){this.m_insertPublicMethod=v;}
GridAjx.prototype.getInsertPublicMethod=function(){return this.m_insertPublicMethod;}
GridAjx.prototype.setUpdatePublicMethod=function(v){this.m_updatePublicMethod=v;}
GridAjx.prototype.getUpdatePublicMethod=function(){return this.m_updatePublicMethod;}
GridAjx.prototype.setDeletePublicMethod=function(v){this.m_deletePublicMethod=v;}
GridAjx.prototype.getDeletePublicMethod=function(){return this.m_deletePublicMethod;}
GridAjx.prototype.setExportPublicMethod=function(v){this.m_exportPublicMethod=v;}
GridAjx.prototype.getExportPublicMethod=function(){return this.m_exportPublicMethod;}
GridAjx.prototype.setEditPublicMethod=function(v){this.m_editPublicMethod=v;}
GridAjx.prototype.getEditPublicMethod=function(){return this.m_editPublicMethod;}
GridAjx.prototype.setRefreshAfterDelRow=function(v){this.m_refreshAfterDelRow=v;}
GridAjx.prototype.getRefreshAfterDelRow=function(){return this.m_refreshAfterDelRow;}
GridAjx.prototype.setRefreshAfterUpdateRow=function(v){this.m_refreshAfterUpdateRow=v;}
GridAjx.prototype.getRefreshAfterUpdateRow=function(){return this.m_refreshAfterUpdateRow;}
GridAjx.prototype.getFilters=function(){return this.m_filters;}
GridAjx.prototype.setFilters=function(filters){this.m_filters=filters;}
GridAjx.prototype.getFilterKey=function(filterOrField,sign){var key;if(typeof(filterOrField)=="object"){key=filterOrField.field+filterOrField.sign;}
else{key=filterOrField+(sign?sign:"");}
return key;}
GridAjx.prototype.setFilter=function(filter){var pm_ins=this.getInsertPublicMethod();if(pm_ins&&pm_ins.fieldExists(filter.field)){if(filter.val===undefined||filter.val===null){pm_ins.unsetFieldValue(filter.field);}else{pm_ins.setFieldValue(filter.field,filter.val);}}
var pm_upd=this.getUpdatePublicMethod();if(pm_upd&&pm_upd.fieldExists(filter.field)){if(filter.val===undefined||filter.val===null){pm_upd.unsetFieldValue(filter.field);}else{pm_upd.setFieldValue(filter.field,filter.val);}}
this.m_filters[this.getFilterKey(filter)]=filter;}
GridAjx.prototype.getFilter=function(filterOrField,sign){return this.m_filters[this.getFilterKey(filterOrField,sign)];}
GridAjx.prototype.unsetFilter=function(filterOrField,sign){this.m_filters[this.getFilterKey(filterOrField,sign)]=undefined;}
GridAjx.prototype.setOnDelOkMesTimeout=function(v){this.m_onDelOkMesTimeout=v;}
GridAjx.prototype.getOnDelOkMesTimeout=function(){return this.m_onDelOkMesTimeout;}
GridAjx.prototype.refreshAfterEditCont=function(res){if(this.getRefreshAfterUpdateRow()&&res&&res.updated){if(res.newKeys&&!CommonHelper.isEmpty(res.newKeys)){this.m_selectedRowKeys=CommonHelper.serialize(res.newKeys);}
this.addLsnToReadPublicMethod(res.lsn);this.onRefresh();}}
GridAjx.prototype.srvEventsOnWakeup=function(json){console.log("Calling refresh after wakeup")
this.onRefresh();}
GridAjx.prototype.addLsnToReadPublicMethod=function(lsn){var pm=this.getReadPublicMethod();if(pm&&pm.fieldExists("lsn")){if(lsn){pm.setFieldValue("lsn",lsn);}else{pm.unsetFieldValue("lsn");}}}
GridAjx.prototype.srvEventsCallBack=function(json){var do_refresh=true;if(json.eventId&&json.params&&((this.getUpdatePublicMethod()&&json.eventId==this.getEventIdOnPublicMethod(this.getUpdatePublicMethod()))||(this.getDeletePublicMethod()&&json.eventId==this.getEventIdOnPublicMethod(this.getDeletePublicMethod())))){var keys=this.getKeyIds();var key_fields={};for(var i=0;i<keys.length;i++){if(json.params[keys[i]]){key_fields[keys[i]]=json.params[keys[i]];}}
try{this.m_model.recLocate(key_fields,true);}
catch(e){do_refresh=false;}}
if(do_refresh){if(json.params&&json.params.lsn){this.addLsnToReadPublicMethod(json.params.lsn);}
console.log("Calling refresh")
this.onRefresh();}}
GridAjx.prototype.getEventIdOnPublicMethod=function(pm){if(!pm){return null;}
var contr=pm.getController();return contr?window.getApp().getEventIdOnController(contr,pm.getId()):null;}
GridAjx.prototype.getDefSrvEvents=function(){var events=[];var ev_id=this.getEventIdOnPublicMethod(this.getInsertPublicMethod());if(ev_id){events.push({"id":ev_id});}
var ev_id=this.getEventIdOnPublicMethod(this.getUpdatePublicMethod());if(ev_id){events.push({"id":ev_id});}
var ev_id=this.getEventIdOnPublicMethod(this.getDeletePublicMethod());if(ev_id){events.push({"id":ev_id});}
return events;}
GridAjx.prototype.srvEventsOnSubscribed=function(){this.setRefreshInterval(0);}
GridAjx.prototype.srvEventsOnClose=function(message){if(message&&message.code>1000){this.setRefreshInterval(this.m_httpRrefreshInterval);}}
GridAjx.prototype.toDOM=function(p){if(this.m_defSrvEvents&&!this.m_srvEvents.events){this.m_srvEvents.events=this.getDefSrvEvents();}
GridAjx.superclass.toDOM.call(this,p);} 
GridAjx.prototype.ER_NO_DEL_PM="Метод для команды удаления не определен";GridAjx.prototype.ER_NO_UPDATE_PM="Метод для команды обновления не определен";GridAjx.prototype.ER_NO_EDIT_PM="Метод для команды изменения не определен";GridAjx.prototype.ER_NO_READ_PM="Метод для команды чтения не определен"; 
function GridAjxScroll(id,options){options=options||{};options.pagination=undefined;if(options.editInline){options.editViewClass=options.editViewClass||ViewGridEditInlineAjx;}
this.m_filters={};if(options.controller){options.readPublicMethod=options.readPublicMethod||((options.controller.publicMethodExists(options.controller.METH_GET_LIST))?options.controller.getPublicMethod(options.controller.METH_GET_LIST):null);options.insertPublicMethod=options.insertPublicMethod||((options.controller.publicMethodExists(options.controller.METH_INSERT))?options.controller.getPublicMethod(options.controller.METH_INSERT):null);options.updatePublicMethod=options.updatePublicMethod||((options.controller.publicMethodExists(options.controller.METH_UPDATE))?options.controller.getPublicMethod(options.controller.METH_UPDATE):null);options.deletePublicMethod=options.deletePublicMethod||((options.controller.publicMethodExists(options.controller.METH_DELETE))?options.controller.getPublicMethod(options.controller.METH_DELETE):null);options.editPublicMethod=options.editPublicMethod||((options.controller.publicMethodExists(options.controller.METH_GET_OBJ))?options.controller.getPublicMethod(options.controller.METH_GET_OBJ):null);}
if(options.readPublicMethod&&!options.model&&options.readPublicMethod.getListModelClass()){var m_class=options.readPublicMethod.getListModelClass();options.model=new m_class();}
this.setReadPublicMethod(options.readPublicMethod);this.setInsertPublicMethod(options.insertPublicMethod);this.setUpdatePublicMethod(options.updatePublicMethod);this.setDeletePublicMethod(options.deletePublicMethod);this.setExportPublicMethod(options.exportPublicMethod);this.setEditPublicMethod(options.editPublicMethod);this.setRefreshAfterDelRow(options.refreshAfterDelRow);this.setRefreshAfterUpdateRow((options.refreshAfterUpdateRow!=undefined)?options.refreshAfterUpdateRow:true);if(options.filters&&options.filters.length){for(var i=0;i<options.filters.length;i++){this.setFilter(options.filters[i]);}}
options.srvEvents=options.srvEvents||[];var self=this;options.srvEventsCallBack=options.srvEventsCallBack||function(params){self.srvEventsCallBack(params);}
this.m_defSrvEvents=(options.defSrvEvents!=undefined)?options.defSrvEvents:true;this.setOnDelOkMesTimeout(options.onDelOkMesTimeout||this.DEF_ONDELOK_MES_TIMEOUT);GridAjxScroll.superclass.constructor.call(this,id,options);}
extend(GridAjxScroll,Grid);GridAjxScroll.prototype.DEF_ONDELOK_MES_TIMEOUT=2000;GridAjxScroll.prototype.m_readPublicMethod;GridAjxScroll.prototype.m_insertPublicMethod;GridAjxScroll.prototype.m_updatePublicMethod;GridAjxScroll.prototype.m_deletePublicMethod;GridAjxScroll.prototype.m_exportPublicMethod;GridAjxScroll.prototype.m_editPublicMethod;GridAjxScroll.prototype.m_refreshAfterDelRow;GridAjxScroll.prototype.m_refreshAfterUpdateRow;GridAjxScroll.prototype.m_filters;GridAjxScroll.prototype.initEditView=function(parent,replacedNode,cmd){GridAjxScroll.superclass.initEditView.call(this,parent,replacedNode,cmd);var pm;if(cmd=="insert"){pm=this.getInsertPublicMethod();}
else{pm=this.getUpdatePublicMethod();}
this.m_editViewObj.setWritePublicMethod(pm);this.m_editViewObj.setReadPublicMethod(this.getEditPublicMethod());}
GridAjxScroll.prototype.fillEditView=function(cmd){if(cmd!="insert"){this.keysToPublicMethod(this.m_editViewObj.getReadPublicMethod());}
GridAjxScroll.superclass.fillEditView.call(this,cmd);}
GridAjxScroll.prototype.keysToPublicMethod=function(pm){var pm_fields=pm.getFields();var fields=this.m_model.getFields();for(id in pm_fields){if(fields[id]&&fields[id].getPrimaryKey()){var v=fields[id].getValue();pm_fields[id].setValue(v);}
else if(pm_fields[id].getPrimaryKey()){pm_fields[id].resetValue();}}}
GridAjxScroll.prototype.read=function(cmd){if(this.m_editViewObj){this.m_editViewObj.read(cmd,function(resp,erCode,erStr){self.onError(resp,erCode,erStr)});}}
GridAjxScroll.prototype.delRow=function(rowNode){var pm=this.getDeletePublicMethod();if(!pm){throw Error(this.ER_NO_DEL_PM);}
this.setEnabled(false);this.setModelToCurrentRow();this.keysToPublicMethod(pm);var self=this;pm.run({"async":false,"ok":function(){self.afterServerDelRow();},"fail":function(resp,erCode,erStr){self.setEnabled(true);self.onError(resp,erCode,erStr);}});}
GridAjxScroll.prototype.afterServerDelRow=function(){this.deleteRowNode();this.setEnabled(true);window.showTempNote(this.NT_REC_DELETED,null,this.m_onDelOkMesTimeout);this.focus();if(this.getRefreshAfterDelRow()){this.onRefresh();}}
GridAjxScroll.prototype.filtersToMethod=function(sep){var pm=this.getReadPublicMethod();var contr=pm.getController();sep=(sep==undefined)?contr.PARAM_FIELD_SEP_VAL:sep;var s_fields,s_signs,s_vals,s_icases;for(var fid in this.m_filters){if(this.m_filters[fid]&&this.m_filters[fid].field&&this.m_filters[fid].sign){s_fields=((!s_fields)?"":s_fields+sep)+this.m_filters[fid].field;s_signs=((!s_signs)?"":s_signs+sep)+this.m_filters[fid].sign;s_vals=((!s_vals)?"":s_vals+sep)+this.m_filters[fid].val;s_icases=((!s_icases)?"":s_icases+sep)+(this.m_filters[fid].icase||"0");}}
pm.setFieldValue(contr.PARAM_COND_FIELDS,s_fields);pm.setFieldValue(contr.PARAM_COND_SGNS,s_signs);pm.setFieldValue(contr.PARAM_COND_VALS,s_vals);pm.setFieldValue(contr.PARAM_COND_ICASE,s_icases);}
GridAjxScroll.prototype.condFilterToMethod=function(publicMethod){var contr=publicMethod.getController();if(publicMethod.fieldExists(contr.PARAM_COND_FIELDS)){this.filtersToMethod(contr.PARAM_FIELD_SEP_VAL);publicMethod.setFieldValue(contr.PARAM_FIELD_SEP,contr.PARAM_FIELD_SEP_VAL);}}
GridAjxScroll.prototype.onRefresh=function(callBack){var self=this;var pm=this.getReadPublicMethod();if(!pm){throw Error(this.ER_NO_READ_PM);}
var contr=pm.getController();var pag=this.getPagination();if(pag&&!isNaN(pag.getFrom())){pm.setFieldValue(contr.PARAM_FROM,pag.getFrom());pm.setFieldValue(contr.PARAM_COUNT,pag.getCountPerPage());}
else if(pag){pm.getField(contr.PARAM_FROM).unsetValue();pm.getField(contr.PARAM_COUNT).unsetValue();}
this.condFilterToMethod(pm);var sort_cols,sort_dirs;var head=this.getHead();if(head&&pm.fieldExists(contr.PARAM_ORD_FIELDS)){for(var row in head.m_elements){var head_row=head.m_elements[row];for(var col in head_row.m_elements){if(head_row.m_elements[col].getSortable()){var sort_dir=head_row.m_elements[col].getSort();if(sort_dir=="asc"||sort_dir=="desc"){var sort_col=head_row.m_elements[col].getSortFieldId();if(!sort_col){var cols=head_row.m_elements[col].getColumns();for(var i=0;i<cols.length;i++){sort_cols=(sort_cols==undefined)?"":sort_cols;sort_cols+=(sort_cols=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_cols+=(cols[i].getField()?cols[i].getField().getId():cols[i].getId());sort_dirs=(sort_dirs==undefined)?"":sort_dirs;sort_dirs+=(sort_dirs=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_dirs+=sort_dir;}}
else{sort_cols=(sort_cols==undefined)?"":sort_cols;sort_cols+=(sort_cols=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_cols+=sort_col;sort_dirs=(sort_dirs==undefined)?"":sort_dirs;sort_dirs+=(sort_dirs=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_dirs+=sort_dir;}}}}}
pm.setFieldValue(contr.PARAM_ORD_FIELDS,sort_cols);pm.setFieldValue(contr.PARAM_ORD_DIRECTS,sort_dirs);}
pm.run({"ok":function(resp){self.onGetData(resp);if(callBack){callBack.call(self);}},"fail":function(resp,erCode,erStr){self.onError(resp,erCode,erStr);}});}
GridAjxScroll.prototype.onError=function(resp,erCode,erStr){GridAjxScroll.superclass.onError.call(this,window.getApp().formatError(erCode,erStr));}
GridAjxScroll.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
GridAjxScroll.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
GridAjxScroll.prototype.setInsertPublicMethod=function(v){this.m_insertPublicMethod=v;}
GridAjxScroll.prototype.getInsertPublicMethod=function(){return this.m_insertPublicMethod;}
GridAjxScroll.prototype.setUpdatePublicMethod=function(v){this.m_updatePublicMethod=v;}
GridAjxScroll.prototype.getUpdatePublicMethod=function(){return this.m_updatePublicMethod;}
GridAjxScroll.prototype.setDeletePublicMethod=function(v){this.m_deletePublicMethod=v;}
GridAjxScroll.prototype.getDeletePublicMethod=function(){return this.m_deletePublicMethod;}
GridAjxScroll.prototype.setExportPublicMethod=function(v){this.m_exportPublicMethod=v;}
GridAjxScroll.prototype.getExportPublicMethod=function(){return this.m_exportPublicMethod;}
GridAjxScroll.prototype.setEditPublicMethod=function(v){this.m_editPublicMethod=v;}
GridAjxScroll.prototype.getEditPublicMethod=function(){return this.m_editPublicMethod;}
GridAjxScroll.prototype.setRefreshAfterDelRow=function(v){this.m_refreshAfterDelRow=v;}
GridAjxScroll.prototype.getRefreshAfterDelRow=function(){return this.m_refreshAfterDelRow;}
GridAjxScroll.prototype.getFilters=function(){return this.m_filters;}
GridAjxScroll.prototype.setRefreshAfterUpdateRow=function(v){this.m_refreshAfterUpdateRow=v;}
GridAjxScroll.prototype.getRefreshAfterUpdateRow=function(){return this.m_refreshAfterUpdateRow;}
GridAjxScroll.prototype.getFilterKey=function(filterOrField,sign){var key;if(typeof(filterOrField)=="object"){key=filterOrField.field+filterOrField.sign;}
else{key=filterOrField+(sign?sign:"");}
return key;}
GridAjxScroll.prototype.setFilter=function(filter){var pm_ins=this.getInsertPublicMethod();if(pm_ins&&pm_ins.fieldExists(filter.field))pm_ins.setFieldValue(filter.field,filter.val);var pm_upd=this.getUpdatePublicMethod();if(pm_upd&&pm_upd.fieldExists(filter.field))pm_upd.setFieldValue(filter.field,filter.val);this.m_filters[this.getFilterKey(filter)]=filter;}
GridAjxScroll.prototype.getFilter=function(filterOrField,sign){return this.m_filters[this.getFilterKey(filterOrField,sign)];}
GridAjxScroll.prototype.unsetFilter=function(filterOrField,sign){this.m_filters[this.getFilterKey(filterOrField,sign)]=undefined;}
GridAjxScroll.prototype.setOnDelOkMesTimeout=function(v){this.m_onDelOkMesTimeout=v;}
GridAjxScroll.prototype.getOnDelOkMesTimeout=function(){return this.m_onDelOkMesTimeout;}
GridAjxScroll.prototype.onPreviousRow=function(){var res=GridAjxScroll.superclass.onPreviousRow.call(this);if(!res){if(this.m_visibleRowIndex>0){var body=this.getBody();var body_n=body?body.getNode():null;if(body_n&&body_n.lastChild){this.m_visibleRowIndex--;var m_row_cnt=this.m_visibleRowIndex;this.m_model.setRowIndex(m_row_cnt);console.log("Model set to index "+m_row_cnt)
var h_row_ind=0;var row_cnt=m_row_cnt;var columns,keyIdAr,masterCell;var row=this.appendRow(body,row_cnt,h_row_ind,m_row_cnt,keyIdAr,columns,masterCell);var row_n=row.getNode();var selected_node=this.getSelectedNode();if(!this.m_rowSelect){DOMHelper.delClass(selected_node,this.m_selectedCellClass);DOMHelper.delClass(selected_node.parentNode,this.m_selectedRowClass);}
else{DOMHelper.delClass(selected_node,this.m_selectedRowClass);}
body_n.removeChild(body_n.lastChild);row.toDOMBefore(body_n.firstChild);if(!this.m_rowSelect){var ind=DOMHelper.getElementIndex(selected_node);this.selectCell(row_n.childNodes[ind],selected_node);}
else{this.selectRow(row_n,selected_node);}
if(this.m_visibleRowIndex<10){var ct=(DateHelper.time()).getTime();if((!this.m_fetchQueryId||(this.m_fetchQueryTime&&(ct-this.m_fetchQueryTime)>5000))&&(!this.m_lastInsertDataToCacheEmpty||(ct-this.m_lastInsertDataToCacheEmptyTime)>15000)){var self=this;this.m_model.setRowIndex(0);this.fetchData("desc",function(model){self.insertDataToCache(model);});}}}}}}
GridAjxScroll.prototype.defineSortFields=function(){var head=this.getHead();if(!head)return;this.m_sortFields={};for(var row in head.m_elements){var head_row=head.m_elements[row];for(var col in head_row.m_elements){if(head_row.m_elements[col].getSortable()){var sort_dir=head_row.m_elements[col].getSort();if(sort_dir=="asc"||sort_dir=="desc"){var sort_col=head_row.m_elements[col].getSortFieldId();if(!sort_col){var cols=head_row.m_elements[col].getColumns();for(var i=0;i<cols.length;i++){this.m_sortFields[cols[i].getField()?cols[i].getField().getId():cols[i].getId()]=sort_dir;}}
else{this.m_sortFields[sort_col]=sort_dir;}}}}}}
GridAjxScroll.prototype.appendDataToCache=function(model){console.log("Got new data appendDataToCache")
this.m_lastAppendDataToCacheEmpty=!(model.getRowCount()>0);if(this.m_lastAppendDataToCacheEmpty){console.log("Got empty set...")
this.m_lastAppendDataToCacheEmptyTime=(DateHelper.time()).getTime();}
else{var to_del_cnt=(this.m_model.getRowCount()+model.getRowCount())-90;console.log("New row count will be ="+(this.m_model.getRowCount()+model.getRowCount()))
if(to_del_cnt>0){console.log("deleting count="+to_del_cnt)
for(var i=0;i<to_del_cnt;i++){this.m_model.deleteRowByIndex(0,false);}
this.m_visibleRowIndex=this.m_visibleRowIndex-to_del_cnt;console.log("Model shrink to "+this.m_model.getRowCount())}
this.m_model.appendModelData(model);console.log("Model count after fetch "+this.m_model.getRowCount())}
this.m_fetchQueryTime=undefined;this.m_fetchQueryId=undefined;this.clearFetchFilters();delete model;}
GridAjxScroll.prototype.insertDataToCache=function(model){console.log("Got new data insertDataToCache")
this.m_lastInsertDataToCacheEmpty=!(model.getRowCount()>0);if(this.m_lastInsertDataToCacheEmpty){this.m_lastInsertDataToCacheEmptyTime=(DateHelper.time()).getTime();console.log("Got empty set...")}
else{var to_del_cnt=(this.m_model.getRowCount()+model.getRowCount())-90;console.log("New row count will be ="+(this.m_model.getRowCount()+model.getRowCount()))
if(to_del_cnt>0){console.log("deleting count="+to_del_cnt)
for(var i=0;i<to_del_cnt;i++){this.m_model.deleteRowByIndex(this.m_model.getRowCount()-1,false);}
console.log("Model shrink to "+this.m_model.getRowCount())}
this.m_visibleRowIndex=this.m_visibleRowIndex+model.getRowCount();this.m_model.insertModelData(model);console.log("Model count after fetch "+this.m_model.getRowCount())}
this.m_fetchQueryTime=undefined;this.m_fetchQueryId=undefined;this.clearFetchFilters();delete model;}
GridAjxScroll.prototype.clearFetchFilters=function(){var fl_key;for(var f_id in this.m_sortFields){fl_key=this.getFilterKey(f_id,"g");if(this.m_filters[fl_key])this.m_filters[fl_key]=undefined;fl_key=this.getFilterKey(f_id,"l");if(this.m_filters[fl_key])this.m_filters[fl_key]=undefined;}}
GridAjxScroll.prototype.fetchData=function(direct,onGetDataForCache){var self=this;var pm=this.getReadPublicMethod();if(!pm){throw Error(this.ER_NO_READ_PM);}
var contr=pm.getController();pm.getField(contr.PARAM_FROM).unsetValue();pm.setFieldValue(contr.PARAM_COUNT,30);if(!this.m_sortFields){this.defineSortFields();}
var sort_cols,sort_dirs;for(var f_id in this.m_sortFields){sort_cols=sort_cols||"";sort_cols+=(sort_cols=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_cols+=f_id;sort_dirs=sort_dirs||"";sort_dirs+=(sort_dirs=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_dirs+=this.m_sortFields[f_id];var sgn=(this.m_sortFields[f_id]==direct)?contr.PARAM_SGN_GREATER:contr.PARAM_SGN_LESS;this.m_filters[this.getFilterKey(f_id,sgn)]={"field":f_id,"sign":sgn,"val":this.m_model.getFieldValue(f_id)};this.m_filters[this.getFilterKey(f_id,(this.m_sortFields[f_id]!=direct)?contr.PARAM_SGN_GREATER:contr.PARAM_SGN_LESS)]=undefined;}
pm.setFieldValue(contr.PARAM_ORD_FIELDS,sort_cols);pm.setFieldValue(contr.PARAM_ORD_DIRECTS,sort_dirs);this.condFilterToMethod(pm);console.log("Fetching data...")
var self=this;this.m_fetchQueryTime=(DateHelper.time()).getTime();this.m_fetchQueryId=pm.run({"ok":function(resp){onGetDataForCache(resp.getModel(self.m_model.getId()));},"fail":function(resp,erCode,erStr){self.onError(resp,erCode,erStr);}});}
GridAjxScroll.prototype.onNextRow=function(){var res=GridAjxScroll.superclass.onNextRow.call(this);if(!res){var m_count=this.m_model.getRowCount();if(this.m_visibleRowIndex+this.m_visibleRowCount<m_count){var body=this.getBody();var body_n=body?body.getNode():null;if(body_n&&body_n.firstChild){this.m_visibleRowIndex++;var m_row_cnt=this.m_visibleRowIndex+this.m_visibleRowCount-1;this.m_model.setRowIndex(m_row_cnt);console.log("Model set to index "+m_row_cnt)
var h_row_ind=0;var row_cnt=m_row_cnt;var columns,keyIdAr,masterCell;var row=this.appendRow(body,row_cnt,h_row_ind,m_row_cnt,keyIdAr,columns,masterCell);var row_n=row.getNode();var selected_node=this.getSelectedNode();if(!this.m_rowSelect){DOMHelper.delClass(selected_node,this.m_selectedCellClass);DOMHelper.delClass(selected_node.parentNode,this.m_selectedRowClass);}
else{DOMHelper.delClass(selected_node,this.m_selectedRowClass);}
body_n.removeChild(body_n.firstChild);row.toDOM(body_n);if(!this.m_rowSelect){var ind=DOMHelper.getElementIndex(selected_node);this.selectCell(row_n.childNodes[ind],selected_node);}
else{this.selectRow(row_n,selected_node);}
if((m_count-(this.m_visibleRowIndex+this.m_visibleRowCount))<10){var ct=(DateHelper.time()).getTime();if((!this.m_fetchQueryId||(this.m_fetchQueryTime&&(ct-this.m_fetchQueryTime)>5000))&&(!this.m_lastAppendDataToCacheEmpty||(ct-this.m_lastAppendDataToCacheEmptyTime)>15000)){var self=this;this.m_model.setRowIndex(m_count-1);this.fetchData("asc",function(model){self.appendDataToCache(model);});}}}}}}
GridAjxScroll.prototype.appendRow=function(body,rowCnt,hRowInd,mRowCnt,keyIdAr,columns,detailKeys){var details_expanded=(detailKeys&&!CommonHelper.isEmpty(detailKeys));var master_cell=null;var row=this.createNewRow(rowCnt,hRowInd,mRowCnt);var row_keys={};if(!keyIdAr)keyIdAr=this.getKeyIds();for(var k=0;k<keyIdAr.length;k++){row_keys[keyIdAr[k]]=this.m_model.getFieldValue(keyIdAr[k]);}
if(!columns)columns=this.getHead().getColumns();field_cnt=0;for(var col_id=0;col_id<columns.length;col_id++){columns[col_id].setGrid(this);if(columns[col_id].getField()&&columns[col_id].getField().getPrimaryKey()){row_keys[columns[col_id].getField().getId()]=columns[col_id].getField().getValue();}
var cell=this.createNewCell(columns[col_id],row);if(columns[col_id].getMaster()&&details_expanded){master_cell=cell;}
if(this.m_onEventAddCell){this.m_onEventAddCell.call(this,cell);}
row.addElement(cell);field_cnt++;}
row.setAttr("keys",CommonHelper.serialize(row_keys));if(details_expanded){var row_key_h=hex_md5(row.getAttr("keys"));if(detailKeys[row_key_h]){detailKeys[row_key_h].masterNode=row.getNode();detailKeys[row_key_h].masterCell=master_cell;}}
var row_cmd_class=this.getRowCommandClass();if(row_cmd_class){var row_class_options={"grid":this};row.addElement(new row_cmd_class(this.getId()+":"+body.getName()+":"+row.getId()+":cell-sys",row_class_options));}
if(this.m_onEventAddRow){this.m_onEventAddRow.call(this,row);}
body.addElement(row);return row;}
GridAjxScroll.prototype.onGetData=function(resp){if(resp){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
if(this.m_onEventGetData)this.m_onEventGetData.call(this);if(this.m_model){var redraw=!this.m_model.getCalcHash();if(!redraw){var new_hash=this.m_model.getHash();redraw=(!this.m_dataHash||this.m_dataHash!=new_hash);this.m_dataHash=new_hash;}
if(redraw){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();var detail_keys={};var rows=body.getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);for(var i=0;i<rows.length;i++){if(rows[i].getAttribute("for_keys")!=null){detail_keys[hex_md5(rows[i].getAttribute("for_keys"))]={"for_keys":rows[i].getAttribute("for_keys"),"node":rows[i]};}}
var details_expanded=(detail_keys&&!CommonHelper.isEmpty(detail_keys));var master_cell;if(foot&&foot.calcBegin){this.m_foot.calcBegin(this.m_model);}
if(!this.getHead())return;var columns;var row_cnt=0,m_row_cnt=0,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.m_from=parseInt(this.m_model.getPageFrom());pag.setCountTotal(this.m_model.getTotCount());}
var h_row_ind=0;var key_id_ar;if(isNaN(this.m_visibleRowIndex))this.m_visibleRowIndex=0;this.m_model.setRowIndex(this.m_visibleRowIndex-1);this.m_visibleRowCount=30;while(this.m_model.getNextRow()){var row=this.appendRow(body,row_cnt,h_row_ind,m_row_cnt,key_id_ar,columns,detail_keys);row_cnt++;m_row_cnt++;if(foot&&foot.calc){foot.calc(this.m_model);}
if(row_cnt>this.m_visibleRowCount-1){break;}}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd(this.m_model);}
body.toDOM(this.m_node);if(details_expanded){for(var det_h in detail_keys){if(!detail_keys[det_h].masterNode){DOMHelper.delNode(detail_keys[det_h].node);}
else{var p=detail_keys[det_h].masterNode.parentNode;var n_r=detail_keys[det_h].masterNode.nextSibling;var det_row;if(n_r){det_row=p.insertBefore(detail_keys[det_h].node,n_r);}
else{det_row=p.appendChild(detail_keys[det_h].node);}
if(detail_keys[det_h].masterCell){var tg=detail_keys[det_h].masterCell.getDetailToggle();if(tg){tg.setDetailRow(det_row);tg.setDetailVisible(true);}}}}}}}
if(this.m_navigate||this.m_navigateClick){this.setSelection();}}
GridAjxScroll.prototype.toDOM=function(parent){if(this.m_defSrvEvents){this.setDefSrvEvents();}
GridAjxScroll.superclass.toDOM.call(this,parent);}
GridAjxScroll.prototype.srvEventsCallBack=function(params){this.onRefresh(function(){window.showTempNote("Grid data refreshed",null,5000);});}
GridAjxScroll.prototype.getEventIdOnPublicMethod=function(pm){var contr=pm.getController();var contr_name=contr?contr.constructor.name||CommonHelper.functionName(contr.constructor):null;contr_name=contr_name?contr_name.substr(0,contr_name.indexOf("_")):null;return(contr_name?contr_name+"."+pm.getId():null);}
GridAjxScroll.prototype.setDefSrvEvents=function(){var events=[];if(this.getInsertPublicMethod()){events.push({"id":this.getEventIdOnPublicMethod(this.getInsertPublicMethod())});}
if(this.getUpdatePublicMethod()){events.push({"id":this.getEventIdOnPublicMethod(this.getUpdatePublicMethod())});}
this.setSrvEvents(events);} 
function TreeAjx(id,options){options=options||{};options.rowSelect=true;options.resize=false;options.showHead=false;options.autoRefresh=false;options.editInline=(options.editInline!=undefined)?options.editInline:true;options.inlineInsertPlace=(options.inlineInsertPlace!=undefined)?options.inlineInsertPlace:"current";options.editViewOptions=options.editViewOptions||{"tagName":"LI","columnTagName":"DIV"};options.selectedRowClass="active";options.commands=options.commands||new GridCmdContainerAjx(id+":cmd",{"cmdColManager":false,"cmdExport":false,"cmdSearch":false,"cmdRefresh":false});this.setRootCaption(options.rootCaption||this.DEF_ROOT_CAPTION);TreeAjx.superclass.constructor.call(this,id,options);}
extend(TreeAjx,GridAjx);TreeAjx.prototype.DEF_TAG_NAME="DIV";TreeAjx.prototype.DEF_ROW_TAG_NAME="LI";TreeAjx.prototype.DEF_CELL_TAG_NAME="DIV";TreeAjx.prototype.DEF_BODY_TAG_NAME="UL";TreeAjx.prototype.m_rootCaption;TreeAjx.prototype.nodeClickable=function(node){return(this.getEnabled());}
TreeAjx.prototype.onNextRow=function(){var res=false;var selected_node=this.getSelectedNode();var new_node;var new_node;if(selected_node){var chld_same_tag=selected_node.getElementsByTagName(selected_node.nodeName);if(chld_same_tag&&chld_same_tag.length){new_node=chld_same_tag[0];}
else if(selected_node.nextSibling&&selected_node.nextSibling.nodeName==selected_node.nodeName){new_node=selected_node.nextSibling;}
else{new_node=DOMHelper.getParentByTagName(selected_node,selected_node.nodeName);if(new_node){new_node=new_node.nextSibling;}}
if(new_node&&this.getRowSelectable(new_node)){this.selectRow(new_node,selected_node);$(new_node).get(0).scrollIntoView();res=true;}}
return res;}
TreeAjx.prototype.onPreviousRow=function(){var res=false;var selected_node=this.getSelectedNode();var new_node;if(selected_node){if(selected_node.previousSibling&&selected_node.previousSibling.nodeName==selected_node.nodeName){new_node=selected_node.previousSibling;}
else{new_node=DOMHelper.getParentByTagName(selected_node,selected_node.nodeName);}
if(new_node&&this.getRowSelectable(new_node)){this.selectRow(new_node,selected_node);$(new_node).get(0).scrollIntoView();res=true;}}
return res;}
TreeAjx.prototype.setRootCaption=function(v){this.m_rootCaption=v;}
TreeAjx.prototype.getRootCaption=function(){return this.m_rootCaption;}
TreeAjx.prototype.edit=function(cmd){if(cmd=="edit"&&DOMHelper.getAttr(this.getSelectedRow(),"modelIndex")==-1){return 0;}
if(cmd=="insert"){this.setModelToCurrentRow();}
TreeAjx.superclass.edit.call(this,cmd);}
TreeAjx.prototype.onGetData=function(){if(this.m_model){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();if(foot&&foot.calcBegin){this.m_foot.calcBegin(this.m_model);}
if(!this.getHead())return;var columns=this.getHead().getColumns();var row_cnt,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.m_from=parseInt(this.m_model.getPageFrom());pag.setCountTotal(this.m_model.getTotCount());}
var h_row_ind=0;this.m_itemIds={};var key_field_id=this.m_model.getKeyField().getId();row_cnt=-1;var r_class=this.getHead().getRowClass(h_row_ind);row=this.createNewRow(row_cnt,h_row_ind,row_cnt+1);var root_node=new ControlContainer(null,"UL");row.addElement(new GridCell(row.getId()+":descr",{"value":this.getRootCaption(),"tagName":"SPAN"}));row.addElement(root_node);body.addElement(row);row_cnt++;this.m_model.reset();while(this.m_model.getNextRow()){row=this.createNewRow(row_cnt,h_row_ind,row_cnt+1);row_keys={};for(var k=0;k<this.m_keyIds.length;k++){if(this.m_model.fieldExists(this.m_keyIds[k])){row_keys[this.m_keyIds[k]]=this.m_model.getFieldValue(this.m_keyIds[k]);}}
field_cnt=0;for(var col_id=0;col_id<columns.length;col_id++){columns[col_id].setGrid(this);if(columns[col_id].getField()&&columns[col_id].getField().getPrimaryKey()){row_keys[columns[col_id].getField().getId()]=columns[col_id].getField().getValue();}
var cell=this.createNewCell(columns[col_id],row);if(this.m_onEventAddCell){this.m_onEventAddCell.call(this,cell);}
row.addElement(cell);field_cnt++;}
row.setAttr("keys",CommonHelper.serialize(row_keys));var row_cmd_class=this.getRowCommandClass();if(row_cmd_class){var row_class_options={"grid":this};row.addElement(new row_cmd_class(this.getId()+":"+body.getName()+":"+row.getId()+":cell-sys",row_class_options));}
if(this.m_onEventAddRow){this.m_onEventAddRow.call(this,row);}
var item_id=this.m_model.getFieldValue(key_field_id);var parent_item_id=this.m_model.getParentId();this.m_itemIds[item_id]=new ControlContainer(row.getId()+":gr","UL",{});row.addElement(this.m_itemIds[item_id]);if(parent_item_id){this.m_itemIds[parent_item_id].addElement(row);}
else{root_node.addElement(row);}
row.m_drag=new DragObject(row.getNode(),{"offsetY":60,"offsetX":-100});row.m_drop=new DropTarget(row.getNode());row.m_drop.accept=function(dragObject){var drop_id=CommonHelper.unserialize(this.element.getAttribute("keys")).id;var drag_id=CommonHelper.unserialize(dragObject.element.getAttribute("keys")).id;var key_fields={"id":new FieldInt("id")}
key_fields.id.setValue(drag_id);var drag_row;var drag_row_a=self.m_model.recLocate(key_fields,true);if(drag_row_a&&drag_row_a.length){drag_row=self.m_model.m_currentRow;}
key_fields.id.setValue(drop_id);var drop_row;var drop_row_a=self.m_model.recLocate(key_fields,true);if(drop_row_a&&drop_row_a.length){drop_row=self.m_model.m_currentRow;}
if(drag_row&&drop_row){drop_row.parentNode.insertBefore(drag_row,drop_row);self.onRefresh();}}
row_cnt++;if(foot&&foot.calc){foot.calc(this.m_model);}}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd(this.m_model);}
body.toDOM(this.m_node);}
if(this.m_navigate||this.m_navigateClick){this.setSelection();}}
TreeAjx.prototype.onDelete=function(callBack){var res=false;if(this.m_cmdDelete){var selected_node=this.getSelectedRow();if(selected_node.parentNode==this.getBody().getNode()){return;}
if(selected_node){var self=this;this.setFocused(false);WindowQuestion.show({"cancel":false,"text":this.Q_DELETE,"callBack":function(r){if(r==WindowQuestion.RES_YES){self.delRow(selected_node);}
else{self.focus();}
if(callBack){callBack(r);}}});res=true;}}
return res;} 
function GridAjxDOCT(id,options){options=options||{};options.refreshAfterDelRow=true;options.refreshInterval=0;GridAjxDOCT.superclass.constructor.call(this,id,options);}
extend(GridAjxDOCT,GridAjx);GridAjxDOCT.prototype.m_modified;GridAjxDOCT.prototype.afterServerDelRow=function(){this.setModified(true);GridAjxDOCT.superclass.afterServerDelRow.call(this);}
GridAjxDOCT.prototype.refreshAfterEdit=function(res){GridAjxDOCT.superclass.refreshAfterEdit.call(this,res);if(res&&res.updated){this.setModified(true);}}
GridAjxDOCT.prototype.getModified=function(){return this.m_modified;}
GridAjxDOCT.prototype.setModified=function(v){this.m_modified=v;} 
function GridAjxMaster(id,options){options=options||{};this.setDetailControl(options.detailControl);this.setDetailKeyIds(options.detailkeyIds);GridAjxMaster.superclass.constructor.call(this,id,options);}
extend(GridAjxMaster,GridAjx);GridAjxMaster.prototype.m_detailControl;GridAjxMaster.prototype.m_detailKeyIds;GridAjxMaster.prototype.selectNode=function(newNode,oldNode){GridAjxMaster.superclass.selectNode.call(this,newNode,oldNode);if(this.m_detailControl){var keys=this.getSelectedNodeKeys();var pm=this.m_detailControl.getReadPublicMethod();if(pm){var pm_upd,pm_ins;if(this.m_detailControl.getUpdatePublicMethod){pm_upd=this.m_detailControl.getUpdatePublicMethod();}
if(this.m_detailControl.getInsertPublicMethod){pm_ins=this.m_detailControl.getInsertPublicMethod();}
var det_ids=this.getDetailKeyIds();var ind=0;var contr=pm.getController();for(var kid in keys){this.m_detailControl.setFilter({"field":det_ids[ind],"sign":contr.PARAM_SGN_EQUAL,"val":keys[kid],"icase":"0"});if(pm_upd){pm_upd.setFieldValue(det_ids[ind],keys[kid]);}
if(pm_ins){pm_ins.setFieldValue(det_ids[ind],keys[kid]);}
ind++;}
this.m_detailControl.onRefresh();}}}
GridAjxMaster.prototype.getDetailControl=function(){return this.m_detailControl;}
GridAjxMaster.prototype.setDetailControl=function(v){this.m_detailControl=v;}
GridAjxMaster.prototype.getDetailKeyIds=function(){return this.m_detailKeyIds;}
GridAjxMaster.prototype.setDetailKeyIds=function(v){this.m_detailKeyIds=v;} 
function GridCommandsAjx(id,options){options=options||{};options.cmdExport=(options.cmdExport!=undefined)?options.cmdExport:true;var self=this;if(options.cmdExport){this.setControlExport(options.controlExport||new ButtonCtrl(id+":cmdExport",{"glyph":"glyphicon-file","onClick":function(){self.m_grid.getReadPublicMethod().download("ViewExcel");},"attrs":{"title":this.BTN_EXPORT_TITLE}}));}
GridCommandsAjx.superclass.constructor.call(this,id,options);}
extend(GridCommandsAjx,GridCommands);GridCommandsAjx.prototype.m_controlExport;GridCommandsAjx.prototype.addControls=function(){if(this.m_controlInsert)this.addElement(this.m_controlInsert);if(this.m_controlEdit)this.addElement(this.m_controlEdit);if(this.m_controlCopy)this.addElement(this.m_controlCopy);if(this.m_controlDelete)this.addElement(this.m_controlDelete);if(this.m_controlPrint)this.addElement(this.m_controlPrint);if(this.m_controlExport)this.addElement(this.m_controlExport);if(this.m_controlRefresh)this.addElement(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);if(this.m_controlFilter){this.addElement(this.m_controlFilterToggle);this.addElement(this.m_controlFilter);}
if(this.m_popUpMenu){this.toPopUp();}}
GridCommandsAjx.prototype.toPopUp=function(){if(this.m_controlInsert)this.m_popUpMenu.addButton(this.m_controlInsert);if(this.m_controlEdit)this.m_popUpMenu.addButton(this.m_controlEdit);if(this.m_controlCopy)this.m_popUpMenu.addButton(this.m_controlCopy);if(this.m_controlDelete)this.m_popUpMenu.addButton(this.m_controlDelete);if(this.m_controlPrint)this.m_popUpMenu.addButton(this.m_controlPrint);if(this.m_controlExport)this.m_popUpMenu.addButton(this.m_controlExport);if(this.m_controlColumnManager)this.m_popUpMenu.addButton(this.m_controlColumnManager);if(this.m_controlRefresh)this.m_popUpMenu.addButton(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);this.printObjToPopUp();}
GridCommandsAjx.prototype.getControlExport=function(){return this.m_controlExport;}
GridCommandsAjx.prototype.setControlExport=function(v){this.m_controlExport=v;}
GridCommandsAjx.prototype.setEnabled=function(en){if(this.m_controlRefresh)this.m_controlRefresh.setEnabled(en);GridCommandsAjx.superclass.setEnabled.call(this,en);} 
GridCommandsAjx.prototype.BTN_EXPORT_TITLE="Экспорт в Excel"; 
function GridCommandsDOC(id,options){options=options||{};options.cmdUnprocess=(options.cmdUnprocess!=undefined)?options.cmdUnprocess:true;options.cmdPrintDoc=(options.cmdPrintDoc!=undefined)?options.cmdPrintDoc:true;options.cmdShowActs=(options.cmdShowActs!=undefined)?options.cmdShowActs:true;var self=this;if(options.cmdUnprocess||options.controlUnprocess){this.setControlUnprocess(options.controlUnprocess||new ButtonCtrl(id+":cmdUnprocess",{"glyph":"glyphicon-unchecked","onClick":function(){WindowQuestion.show({"cancel":false,"text":self.ACTS_DEL_CONF,"callBack":function(r){if(r==WindowQuestion.RES_YES){self.delActs();}}});},"attrs":{"title":this.BTN_UNPROCESS_TITLE}}));}
if(options.cmdShowActs||options.controlShowActs){this.setControlShowActs(options.controlShowActs||new ButtonCtrl(id+":cmdShowActs",{"glyph":"glyphicon-log-in","onClick":function(){},"attrs":{"title":this.BTN_SHOWACT_TITLE}}));}
GridCommandsDOC.superclass.constructor.call(this,id,options);}
extend(GridCommandsDOC,GridCommandsAjx);GridCommandsDOC.prototype.m_controlUnprocess;GridCommandsDOC.prototype.m_controlShowActs;GridCommandsDOC.prototype.addControls=function(){if(this.m_controlInsert)this.addElement(this.m_controlInsert);if(this.m_controlEdit)this.addElement(this.m_controlEdit);if(this.m_controlCopy)this.addElement(this.m_controlCopy);if(this.m_controlDelete)this.addElement(this.m_controlDelete);if(this.m_controlPrint)this.addElement(this.m_controlPrint);if(this.m_controlExport)this.addElement(this.m_controlExport);if(this.m_controlRefresh)this.addElement(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);if(this.m_controlUnprocess)this.addElement(this.m_controlUnprocess);if(this.m_controlShowActs)this.addElement(this.m_controlShowActs);if(this.m_controlFilter){this.addElement(this.m_controlFilterToggle);this.addElement(this.m_controlFilter);}
if(this.m_popUpMenu){this.toPopUp();}}
GridCommandsDOC.prototype.toPopUp=function(){GridCommandsDOC.superclass.toPopUp.call(this);if(this.m_controlUnprocess||this.m_controlShowActs){this.m_popUpMenu.addSeparator();if(this.m_controlUnprocess)this.m_popUpMenu.addButton(this.m_controlUnprocess);if(this.m_controlShowActs)this.m_popUpMenu.addButton(this.m_controlShowActs);}}
GridCommandsDOC.prototype.setControlUnprocess=function(v){this.m_controlUnprocess=v;}
GridCommandsDOC.prototype.getControlUnprocess=function(){return this.m_controlUnprocess;}
GridCommandsDOC.prototype.setControlShowActs=function(v){this.m_controlShowActs=v;}
GridCommandsDOC.prototype.getControlShowActs=function(){return this.m_controlShowActs;}
GridCommandsDOC.prototype.delActs=function(){var contr=this.m_grid.getReadPublicMethod().getController();if(contr.publicMethodExists("set_unprocessed")){var self=this;var keys=this.m_grid.getSelectedNodeKeys();var pm=contr.getPublicMethod("set_unprocessed");pm.setFieldValue("doc_id",keys["id"]);pm.run({"async":true,"ok":function(){self.m_grid.onRefresh();window.showNote(self.ACTS_DELETED);}})}} 
GridCommandsDOC.prototype.BTN_UNPROCESS_TITLE="Отменить проведение документа";GridCommandsDOC.prototype.BTN_SHOWACT_TITLE="Показать движения документа";GridCommandsDOC.prototype.ACTS_DEL_CONF="Отменить проведение документа?";GridCommandsDOC.prototype.ACTS_DELETED="Отменено проведение документа."; 
function GridPagination(id,options){options=options||{};GridPagination.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);var self=this;this.m_inf=new Control(id+":inf","span");this.m_showPageCount=(options.showPageCount)?parseInt(options.showPageCount):this.DEF_PAGES;if(this.m_showPageCount){this.m_pages=new ControlContainer(id+":pages",options.pagesTagName||this.DEF_PAGES_TAG_NAME,{"className":options.pagesClassName||this.DEF_PAGES_CLASS_NAME});}
this.setPageClassName(options.pageClassName||this.DEF_PAGE_CLASS_NAME);this.setPageCurClassName(options.pageCurClassName||this.DEF_PAGE_CUR_CLASS_NAME);this.setPageTagName(options.pageTagName||this.DEF_PAGE_TAG_NAME);this.m_btnsCont=new ControlContainer(id+":bns_cont","SPAN",{"className":"pagination-pages"});var ctrl_class=options.ctrlClassName||this.DEF_CTRL_CLASS_NAME;if(options.ctrlGoFirst||options.cmdGoFirst==undefined||options.cmdGoFirst==true){this.m_ctrlGoFirst=options.ctrlGoFirst||new Button(id+":go_first",{"glyph":(options.ctrlGoFirstCaption!=undefined)?null:options.ctrlGoFirstGlyph||this.DEF_CTRL_GO_FIRST_GLYPH,"caption":options.ctrlGoFirstCaption||"","className":ctrl_class,"onClick":function(){self.goFirst();},"attrs":{"title":this.CONTR_GO_FIRST_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoFirst);}
if(options.ctrlGoPrev||options.cmdGoPrev==undefined||options.cmdGoPrev==true){this.m_ctrlGoPrev=new Button(id+":go_prev",{"glyph":(options.ctrlGoPrevCaption!=undefined)?null:options.ctrlGoPrevGlyph||this.DEF_CTRL_GO_PREV_GLYPH,"caption":options.ctrlGoPrevCaption||"","className":ctrl_class,"onClick":function(){self.goPrev();},"attrs":{"title":this.CONTR_GO_PREV_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoPrev);}
if(options.ctrlGoNext||options.cmdGoNext==undefined||options.cmdGoNext==true){this.m_ctrlGoNext=new Button(id+":go_next",{"glyph":(options.ctrlGoNextCaption!=undefined)?null:options.ctrlGoNextGlyph||this.DEF_CTRL_GO_NEXT_GLYPH,"caption":options.ctrlGoNextCaption||"","className":ctrl_class,"onClick":function(){self.goNext();},"attrs":{"title":this.CONTR_GO_NEXT_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoNext);}
if(options.ctrlGoLast||options.cmdGoLast==undefined||options.cmdGoLast==true){this.m_ctrlGoLast=new Button(id+":go_last",{"glyph":(options.ctrlGoLastCaption!=undefined)?null:options.ctrlGoLastGlyph||this.DEF_CTRL_GO_LAST_GLYPH,"caption":options.ctrlGoLastCaption||"","className":ctrl_class,"onClick":function(){self.goLast();},"attrs":{"title":this.CONTR_GO_LAST_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoLast);}
options.from=options.from||0;this.setFrom(options.from);if(options.countPerPage){this.setCountPerPage(options.countPerPage);}}
extend(GridPagination,Control);GridPagination.prototype.DEF_PAGES=10;GridPagination.prototype.DEF_TAG_NAME="DIV";GridPagination.prototype.DEF_CTRL_CLASS_NAME="btn btn-xs";GridPagination.prototype.DEF_CTRL_GO_FIRST_GLYPH="glyphicon-fast-backward";GridPagination.prototype.DEF_CTRL_GO_PREV_GLYPH="glyphicon-step-backward";GridPagination.prototype.DEF_CTRL_GO_NEXT_GLYPH="glyphicon-step-forward";GridPagination.prototype.DEF_CTRL_GO_LAST_GLYPH="glyphicon-fast-forward";GridPagination.prototype.DEF_PAGE_CLASS_NAME="pagination-page";GridPagination.prototype.DEF_PAGE_CUR_CLASS_NAME="pagination-page badge pagination-page-cur";GridPagination.prototype.DEF_PAGE_TAG_NAME="SPAN";GridPagination.prototype.DEF_PAGES_TAG_NAME="SPAN";GridPagination.prototype.DEF_PAGES_CLASS_NAME="pagination-pages";GridPagination.prototype.m_countTotal;GridPagination.prototype.m_countPerPage;GridPagination.prototype.m_from;GridPagination.prototype.m_inf;GridPagination.prototype.m_grid;GridPagination.prototype.m_pageClassName;GridPagination.prototype.m_pageCurClassName;GridPagination.prototype.m_pageTagName;GridPagination.prototype.getFrom=function(){return this.m_from;}
GridPagination.prototype.getCountPerPage=function(){return this.m_countPerPage;}
GridPagination.prototype.setCountTotal=function(countTotal){this.m_countTotal=parseInt(countTotal);this.setInf();}
GridPagination.prototype.setCountPerPage=function(countPerPage){this.m_countPerPage=parseInt(countPerPage);}
GridPagination.prototype.setFrom=function(from){this.m_from=parseInt(from);this.setInf();}
GridPagination.prototype.reset=function(){this.m_from=undefined;}
GridPagination.prototype.setGrid=function(v){this.m_grid=v;}
GridPagination.prototype.setFirstEnabled=function(enabled){}
GridPagination.prototype.goFirst=function(){this.setFrom(0);this.m_grid.onRefresh();this.m_grid.focus();}
GridPagination.prototype.goPrev=function(){this.setFrom(Math.max(0,this.m_from-this.m_countPerPage));this.m_grid.onRefresh();this.m_grid.focus();}
GridPagination.prototype.goNext=function(){var from=this.m_from+this.m_countPerPage;from=(from>=this.m_countTotal)?this.m_from:from;this.setFrom(from);this.m_grid.onRefresh();this.m_grid.focus();}
GridPagination.prototype.goLast=function(){var pages=Math.floor(this.m_countTotal/this.m_countPerPage);if((this.m_countTotal%this.m_countPerPage)==0){pages--;}
this.setFrom(pages*this.m_countPerPage);this.m_grid.onRefresh();this.m_grid.focus();}
GridPagination.prototype.setInf=function(){var pages=Math.ceil(this.m_countTotal/this.m_countPerPage);var page=Math.ceil(this.m_from/this.m_countPerPage)+1;if(isNaN(pages))pages=1;if(isNaN(page))page=1;this.m_inf.setValue(this.CONTR_INF_PAGE+pages);if(this.m_ctrlGoFirst)this.m_ctrlGoFirst.setEnabled((page>1));if(this.m_ctrlGoPrev)this.m_ctrlGoPrev.setEnabled((page>1));if(page==pages){if(this.m_ctrlGoLast)this.m_ctrlGoLast.setEnabled(false);if(this.m_ctrlGoNext)this.m_ctrlGoNext.setEnabled(false);}
else{if(this.m_ctrlGoLast)this.m_ctrlGoLast.setEnabled(true);if(this.m_ctrlGoNext)this.m_ctrlGoNext.setEnabled(true);}
if(this.m_showPageCount&&this.m_inf.getNode().parentNode){this.m_pages.delDOM();this.m_pages.clear();var self=this;var prev_from=page-this.m_showPageCount;if(prev_from<1)prev_from=1;for(var pg=prev_from;pg<page;pg++){this.m_pages.addElement(this.createPageElement({"className":this.getPageClassName(),"attrs":{"title":this.GO_TO_PAGE+pg,"to_page":pg},"value":pg,"events":{"click":function(e){self.goToPageFromEvent(e);}}}));}
if(pages>1){this.m_pages.addElement(this.createPageElement({"className":this.getPageCurClassName(),"attrs":{"title":this.CONTR_PG_CNT},"value":page}));}
var nxt_to=page+this.m_showPageCount;if(nxt_to>pages)nxt_to=pages;for(var pg=page+1;pg<=nxt_to;pg++){this.m_pages.addElement(this.createPageElement({"className":this.getPageClassName(),"attrs":{"title":this.CONTR_INF_PAGE+pg,"to_page":pg},"value":pg,"events":{"click":function(e){self.goToPageFromEvent(e);}}}));}
this.m_pages.toDOMAfter(this.m_btnsCont.getNode());}}
GridPagination.prototype.goToPageFromEvent=function(e){e=EventHelper.fixMouseEvent(e);var pg=DOMHelper.getAttr(e.target,"to_page");this.setFrom((pg-1)*this.m_countPerPage);var self=this;this.m_grid.onRefresh(function(){$([document.documentElement,document.body]).animate({scrollTop:$(self.m_grid.getNode().parentNode).offset().top},200);});}
GridPagination.prototype.toDOM=function(parent){GridPagination.superclass.toDOM.call(this,parent);this.m_inf.toDOM(this.m_node);this.m_btnsCont.toDOM(this.m_node);this.setInf();}
GridPagination.prototype.delDOM=function(){if(this.m_showPageCount){this.m_pages.delDOM();}
this.m_inf.delDOM();this.m_btnsCont.delDOM();GridPagination.superclass.delDOM.call(this);}
GridPagination.prototype.setPageClassName=function(v){this.m_pageClassName=v;}
GridPagination.prototype.getPageClassName=function(){return this.m_pageClassName;}
GridPagination.prototype.setPageCurClassName=function(v){this.m_pageCurClassName=v;}
GridPagination.prototype.getPageCurClassName=function(){return this.m_pageCurClassName;}
GridPagination.prototype.setPageTagName=function(v){this.m_pageTagName=v;}
GridPagination.prototype.getPageTagName=function(){return this.m_pageTagName;}
GridPagination.prototype.createPageElement=function(options){return(new Control(null,this.getPageTagName(),options));} 
GridPagination.prototype.CONTR_GO_FIRST_TITLE="в начало";GridPagination.prototype.CONTR_GO_PREV_TITLE="предыдущая";GridPagination.prototype.CONTR_GO_NEXT_TITLE="следующая";GridPagination.prototype.CONTR_GO_LAST_TITLE="в конец";GridPagination.prototype.CONTR_INF_PAGE="Страниц:";GridPagination.prototype.CONTR_INF_FROM="из";GridPagination.prototype.GO_TO_PAGE="Перейти на страницу ";GridPagination.prototype.CONTR_PG_CNT="Страниц:"; 
function GridFilterInfo(id,options){options=options||{};GridFilterInfo.superclass.constructor.call(this,id,"DIV",options);}
extend(GridFilterInfo,ControlContainer);GridFilterInfo.prototype.addFilter=function(filter){if(this.elementExists(filter.id)){this.delElement(filter.id);}
this.addElement(new ControlContainer(this.getId()+":"+filter.id,"SPAN",{"elements":[new Control(null,"SPAN",{"value":filter.descr}),new Control(null,"SPAN",{"value":"×","events":{"click":function(){alert("Reset filter")}}})]}));this.toDOM();} 
function GridFilter(id,options){options=options||{};options.className=options.className||this.DEF_CLASS_NAME;GridFilter.superclass.constructor.call(this,id,options.tagName||this.DEF_TAG_NAME,options);options.cmdSet=(options.cmdSet!=undefined)?options.cmdSet:true;options.cmdUnset=(options.cmdUnset!=undefined)?options.cmdUnset:options.cmdSet;var self=this;if(options.cmdSet){this.setControlSet(options.controlSet||new ButtonCmd(id+":cmdSet",{"caption":this.DEF_SET_CTRL_CAP,"onClick":function(){self.setFilter();},"attrs":{"title":this.DEF_SET_CTRL_TITLE}}));}
if(options.cmdUnset){this.setControlUnset(options.controlUnset||new ButtonCmd(id+":cmdUnset",{"caption":this.DEF_UNSET_CTRL_CAP,"onClick":function(){self.unsetFilter();},"attrs":{"title":this.DEF_UNSET_CTRL_TITLE}}));}
this.m_filter=new ModelFilter({"filters":options.filters});this.addControls();}
extend(GridFilter,ControlContainer);GridFilter.prototype.DEF_TAG_NAME="form";GridFilter.prototype.DEF_CLASS_NAME="form-horizontal collapse";GridFilter.prototype.m_controlSet;GridFilter.prototype.m_controlUnset;GridFilter.prototype.m_filter;GridFilter.prototype.m_onRefresh;GridFilter.prototype.addControls=function(){var filters=this.m_filter.getFilters();for(var id in filters){this.addElement(filters[id].binding.getControl());}
this.m_contCommands=new ControlContainer(this.getId()+":cont-cmd","DIV",{"className":window.getBsCol()+"12"});if(this.m_controlSet)this.m_contCommands.addElement(this.m_controlSet);if(this.m_controlUnset)this.m_contCommands.addElement(this.m_controlUnset);this.addElement(this.m_contCommands);}
GridFilter.prototype.setControlSet=function(v){this.m_controlSet=v;}
GridFilter.prototype.getControlSet=function(){return this.m_controlSet;}
GridFilter.prototype.setControlUnset=function(v){this.m_controlUnset=v;}
GridFilter.prototype.getControlUnset=function(){return this.m_controlUnset;}
GridFilter.prototype.setFilter=function(v){this.m_filter=v;}
GridFilter.prototype.getFilter=function(){return this.m_filter;}
GridFilter.prototype.setOnRefresh=function(v){this.m_onRefresh=v;}
GridFilter.prototype.getOnRefresh=function(){return this.m_onRefresh;}
GridFilter.prototype.setFilter=function(){if(this.m_onRefresh){this.m_onRefresh();}}
GridFilter.prototype.unsetFilter=function(){this.m_filter.resetFilters();if(this.m_onRefresh){this.m_onRefresh();}} 
GridFilter.prototype.DEF_SET_CTRL_CAP="Применить";GridFilter.prototype.DEF_SET_CTRL_TITLE="Применить отбор";GridFilter.prototype.DEF_UNSET_CTRL_CAP="Сбросить";GridFilter.prototype.DEF_UNSET_CTRL_TITLE="Отменить отбор";GridFilter.prototype.DEF_TOGGLE_CTRL_CAP="Отбор";GridFilter.prototype.DEF_TOGGLE_CTRL_TITLE="показать отбор"; 
function EditPeriodDate(id,options){options=options||{};options.cmdDownFast=(options.cmdDownFast!==undefined)?options.cmdDownFast:true;options.cmdDown=(options.cmdDown!==undefined)?options.cmdDown:true;options.cmdUpFast=(options.cmdUpFast!==undefined)?options.cmdUpFast:true;options.cmdUp=(options.cmdUp!==undefined)?options.cmdUp:true;options.cmdPeriodSelect=(options.cmdPeriodSelect!==undefined)?options.cmdPeriodSelect:true;options.template=options.template||window.getApp().getTemplate("EditPeriodDate");options.templateOptions=options.templateOptions||{"CONTR_DOWN_FAST_TITLE":options.downFastTitle||this.CONTR_DOWN_FAST_TITLE,"CONTR_DOWN_TITLE":options.downTitle||this.CONTR_DOWN_TITLE,"CONTR_UP_FAST_TITLE":options.upFastTitle||this.CONTR_UP_FAST_TITLE,"CONTR_UP_TITLE":options.upTitle||this.CONTR_UP_TITLE,"PERIOD_SELECT":options.cmdPeriodSelect,"DOWN":options.cmdDown,"DOWN_FAST":options.cmdDownFast,"UP":options.cmdUp,"UP_FAST":options.cmdUpFast,"LABEL":(options.labelCaption!=undefined&&typeof(options.labelCaption)=="string"&&options.labelCaption.length)?options.labelCaption:false};EditPeriodDate.superclass.constructor.call(this,id,"template",options);var edit_class=options.editClass||EditDate;var self=this;if(options.cmdDownFast){this.setControlDownFast(options.controlDownFast||new Button(id+":downFast",{"glyph":"glyphicon-triangle-left","onClick":function(){self.goFast(-1);}}));}
if(options.cmdDown){this.setControlDown(options.controlDown||new Button(id+":down",{"glyph":"glyphicon-menu-left","onClick":function(){self.go(-1);}}));}
if(options.cmdUp){this.setControlUp(options.controlUp||new Button(id+":up",{"glyph":"glyphicon-menu-right","onClick":function(){self.go(1);}}));}
if(options.cmdUpFast){this.setControlUpFast(options.controlUpFast||new Button(id+":upFast",{"glyph":"glyphicon-triangle-right","onClick":function(){self.goFast(1);}}));}
if(options.controlFrom||options.cmdControlFrom==undefined||options.cmdControlFrom===true){this.setControlFrom(options.controlFrom||new edit_class(id+":from",{"value":options.valueFrom,"timeValueStr":(options.valueFrom)?DateHelper.format(options.valueFrom,"H:i:s"):this.DEF_FROM_TIME,"contClassName":window.getBsCol(6),"editContClassName":"input-group "+window.getBsCol(12),"cmdClear":options.controlCmdClear}));}
if(options.controlTo||options.cmdControlTo==undefined||options.cmdControlTo===true){this.setControlTo(options.controlTo||new edit_class(id+":to",{"value":options.valueTo,"timeValueStr":(options.valueTo)?DateHelper.format(options.valueTo,"H:i:s"):this.DEF_TO_TIME,"contClassName":window.getBsCol(6),"editContClassName":"input-group "+window.getBsCol(12),"cmdClear":options.controlCmdClear}));}
this.setField(options.field);if(options.cmdPeriodSelect){var sel_ctrl;if(options.controlPeriodSelect){sel_ctrl=options.controlPeriodSelect;}
else{var sel_class=options.periodSelectClass||PeriodSelect;var sel_opts=options.periodSelectOptions||{};sel_opts.onValueChange=sel_opts.onValueChange||function(){self.setPredefinedPeriod(this.getValue());};sel_ctrl=new sel_class(this.getId()+":periodSelect",sel_opts);}
let selected_per=sel_ctrl.getValue();if(selected_per&&selected_per!="all"){this.getControlFrom().setEnabled(false);this.getControlTo().setEnabled(false);}
this.setControlPeriodSelect(sel_ctrl);}
this.addControls();}
extend(EditPeriodDate,ControlContainer);EditPeriodDate.prototype.DEF_FROM_TIME="00:00:00";EditPeriodDate.prototype.DEF_TO_TIME="23:59:59";EditPeriodDate.prototype.m_controlFrom;EditPeriodDate.prototype.m_controlTo;EditPeriodDate.prototype.m_controlUp;EditPeriodDate.prototype.m_controlUpFast;EditPeriodDate.prototype.m_controlDown;EditPeriodDate.prototype.m_controlDownFast;EditPeriodDate.prototype.m_controlPeriodSelect;EditPeriodDate.prototype.m_field;EditPeriodDate.prototype.addControls=function(){if(this.m_controlDownFast)this.addElement(this.m_controlDownFast);if(this.m_controlDown)this.addElement(this.m_controlDown);if(this.m_controlPeriodSelect)this.addElement(this.m_controlPeriodSelect);this.addElement(this.m_controlFrom);this.addElement(this.m_controlTo);if(this.m_controlUp)this.addElement(this.m_controlUp);if(this.m_controlUpFast)this.addElement(this.m_controlUpFast);}
EditPeriodDate.prototype.getControlFrom=function(){return this.m_controlFrom;}
EditPeriodDate.prototype.setControlFrom=function(v){this.m_controlFrom=v;}
EditPeriodDate.prototype.getControlTo=function(){return this.m_controlTo;}
EditPeriodDate.prototype.setControlTo=function(v){this.m_controlTo=v;}
EditPeriodDate.prototype.getControlUp=function(){return this.m_controlUp;}
EditPeriodDate.prototype.setControlUp=function(v){this.m_controlUp=v;}
EditPeriodDate.prototype.getControlUpFast=function(){return this.m_controlUpFast;}
EditPeriodDate.prototype.setControlUpFast=function(v){this.m_controlUpFast=v;}
EditPeriodDate.prototype.getControlDownFast=function(){return this.m_controlDownFast;}
EditPeriodDate.prototype.setControlDownFast=function(v){this.m_controlDownFast=v;}
EditPeriodDate.prototype.getControlDown=function(){return this.m_controlDown;}
EditPeriodDate.prototype.setControlDown=function(v){this.m_controlDown=v;}
EditPeriodDate.prototype.getControlPeriodSelect=function(){return this.m_controlPeriodSelect;}
EditPeriodDate.prototype.setControlPeriodSelect=function(v){this.m_controlPeriodSelect=v;}
EditPeriodDate.prototype.getField=function(){return this.m_field;}
EditPeriodDate.prototype.setField=function(v){this.m_field=v;}
EditPeriodDate.prototype.reset=function(){this.m_controlFrom.reset();this.m_controlTo.reset();}
EditPeriodDate.prototype.focus=function(){if(this.m_controlFrom)this.m_controlFrom.focus();}
EditPeriodDate.prototype.getValue=function(){return{"period":this.getControlPeriodSelect().getValue()};}
EditPeriodDate.prototype.isNull=function(){return(this.m_controlFrom&&this.m_controlTo.isNull());}
EditPeriodDate.prototype.setValue=function(v){if(v){this.getControlPeriodSelect().setValue(v);this.setControlsEnabled(v);}}
EditPeriodDate.prototype.setInitValue=function(v){this.setValue(v);}
EditPeriodDate.prototype.reset=function(){if(this.getControlPeriodSelect())this.getControlPeriodSelect().setValue("all");}
EditPeriodDate.prototype.setCtrlDateTime=function(ctrl,dt){dt.setHours(0);dt.setMinutes(0);dt.setSeconds(0);dt.setTime(dt.getTime()+DateHelper.timeToMS(ctrl.getTimeValueStr()));ctrl.setValue(dt);}
EditPeriodDate.prototype.setControlsEnabled=function(per){var ctrl_en=(per=="all");this.getControlFrom().setEnabled(ctrl_en);this.getControlTo().setEnabled(ctrl_en);}
EditPeriodDate.prototype.setPredefinedPeriod=function(per){this.setControlsEnabled(per);if(per=="all"){this.getControlFrom().reset();this.getControlTo().reset();this.getControlFrom().focus();}
else if(per=="day"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.time());this.setCtrlDateTime(this.getControlTo(),DateHelper.time());}
else if(per=="week"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.weekStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.weekEnd());}
else if(per=="month"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.monthStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.monthEnd());}
else if(per=="quarter"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.quarterStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.quarterEnd());}
else if(per=="year"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.yearStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.yearEnd());}}
EditPeriodDate.prototype.addYearsToControl=function(control,years){var v=control.getValue();if(v){v.setFullYear(v.getFullYear()+years);control.setValue(v);}}
EditPeriodDate.prototype.addMonthsToControl=function(control,months){var v=control.getValue();if(v){v.setMonth(v.getMonth()+months);control.setValue(v);}}
EditPeriodDate.prototype.addDaysToControl=function(control,days){var v=control.getValue();if(v){v.setDate(v.getDate()+days);control.setValue(v);}}
EditPeriodDate.prototype.goFast=function(sign){var per=this.getControlPeriodSelect().getValue();if(per=="all"){this.addMonthsToControl(this.getControlFrom(),1*sign);}
else if(per=="year"){this.addYearsToControl(this.getControlFrom(),2*sign);this.addYearsToControl(this.getControlTo(),2*sign);}
else if(per=="quarter"){this.addYearsToControl(this.getControlFrom(),1*sign);this.addYearsToControl(this.getControlTo(),1*sign);}
else if(per=="month"){this.addYearsToControl(this.getControlFrom(),1*sign);this.getControlTo().setValue(DateHelper.monthEnd(this.getControlFrom().getValue()));}
else if(per=="week"){this.addMonthsToControl(this.getControlFrom(),1*sign);this.getControlFrom().setValue(DateHelper.weekStart(this.getControlFrom().getValue()));this.getControlTo().setValue(DateHelper.weekEnd(this.getControlFrom().getValue()));}
else if(per=="day"){this.addMonthsToControl(this.getControlFrom(),1*sign);this.addMonthsToControl(this.getControlTo(),1*sign);}}
EditPeriodDate.prototype.go=function(sign){var per=this.getControlPeriodSelect().getValue();if(per=="all"){this.addDaysToControl(this.getControlFrom(),1*sign);}
else if(per=="year"){this.addYearsToControl(this.getControlFrom(),1*sign);this.addYearsToControl(this.getControlTo(),1*sign);}
else if(per=="quarter"){this.addMonthsToControl(this.getControlFrom(),3*sign);this.addMonthsToControl(this.getControlTo(),3*sign);}
else if(per=="month"){this.addMonthsToControl(this.getControlFrom(),1*sign);this.setCtrlDateTime(this.getControlTo(),DateHelper.monthEnd(this.getControlFrom().getValue()));}
else if(per=="week"){this.addDaysToControl(this.getControlFrom(),7*sign);this.setCtrlDateTime(this.getControlTo(),DateHelper.weekEnd(this.getControlFrom().getValue()));}
else if(per=="day"){this.addDaysToControl(this.getControlFrom(),1*sign);this.addDaysToControl(this.getControlTo(),1*sign);}} 
EditPeriodDate.prototype.DEF_CAP_FROM="Период с:";EditPeriodDate.prototype.DEF_CAP_TO="-";EditPeriodDate.prototype.CONTR_DOWN_FAST_TITLE="несколько периодов назад";EditPeriodDate.prototype.CONTR_DOWN_TITLE="период назад";EditPeriodDate.prototype.CONTR_UP_FAST_TITLE="несколько периодов вперед";EditPeriodDate.prototype.CONTR_UP_TITLE="период вперед"; 
function EditPeriodDateTime(id,options){options=options||{};options.editClass=EditDateTime;EditPeriodDateTime.superclass.constructor.call(this,id,options);}
extend(EditPeriodDateTime,EditPeriodDate); 
function ButtonOK(id,options){options=options||{};ButtonOK.superclass.constructor.call(this,id,options);}
extend(ButtonOK,ButtonCmd); 
ButtonOK.prototype.DEF_CAPTION="ОК";ButtonOK.prototype.DEF_TITLE="Записать изменения и закрыть форму."; 
function ButtonSave(id,options){ButtonSave.superclass.constructor.call(this,id,options);}
extend(ButtonSave,ButtonOK); 
ButtonSave.prototype.DEF_CAPTION="Записать";ButtonSave.prototype.DEF_TITLE="записать изменения"; 
function ButtonCancel(id,options){options=options||{};ButtonCancel.superclass.constructor.call(this,id,options);}
extend(ButtonCancel,ButtonCmd); 
ButtonCancel.prototype.DEF_CAPTION="Закрыть";ButtonCancel.prototype.DEF_TITLE="Отказаться от записи и закрыть форму"; 
function ViewObjectAjx(id,options){options=options||{};this.setKeys(options.keys);if(options.model&&options.model.getRowIndex()<0){options.model.getNextRow();}
if(options.HEAD_TITLE&&window.opener){this.m_headTitle=options.HEAD_TITLE;}
ViewObjectAjx.superclass.constructor.call(this,id,options);this.addCommand(new Command(this.CMD_OK,{"publicMethod":options.writePublicMethod,"control":this.getControlOK(),"async":(options.cmdOkAsync!=undefined)?options.cmdOkAsync:true}));this.setCmd(options.cmd);this.m_detailDataSets={};this.setOnClose(options.onClose);if(!options.readPublicMethod&&options.controller){options.readPublicMethod=options.controller.getGetObject();}
this.setReadPublicMethod(options.readPublicMethod);this.setController(options.controller);this.setModel(options.model);this.m_dataType=options.dataType;this.setOnSaveOkMesTimeout(options.onSaveOkMesTimeout||this.DEF_ONSAVEOK_MES_TIMEOUT);var self=this;options.cmdOk=(options.cmdOk!=undefined)?options.cmdOk:true;if(options.controlOk||options.cmdOk){this.setControlOK(options.controlOk||new ButtonOK(id+":cmdOk",{"onClick":function(){self.getControlOK().setEnabled(false);self.m_oldSaveEn=false;if(self.getControlSave()){self.m_oldSaveEn=self.getControlSave().getEnabled();if(self.m_oldSaveEn)self.getControlSave().setEnabled(false);}
self.onOK(function(resp,errCode,errStr){self.getControlOK().setEnabled(true);if(self.m_oldSaveEn)self.getControlSave().setEnabled(true);self.setError(window.getApp().formatError(errCode,errStr));});}}));}
options.cmdSave=(options.cmdSave!=undefined)?options.cmdSave:true;if(options.controlSave||options.cmdSave){this.setControlSave(options.controlSave||new ButtonSave(id+":cmdSave",{"onClick":function(){self.saveObject();}}));}
options.cmdCancel=(options.cmdCancel!=undefined)?options.cmdCancel:true;if(options.controlCancel||options.cmdCancel){this.setControlCancel(options.controlCancel||new ButtonCancel(id+":cmdCancel",{"onClick":function(){self.onCancel();}}));}
options.cmdPrint=(options.printList!=undefined)?true:((options.cmdPrint!=undefined)?options.cmdPrint:false);if(options.controlPrint||options.cmdPrint){this.setControlPrint(options.controlPrint||new ButtonPrintList(id+":cmdPrint",{"printList":options.printList,"keyIds":options.printListKeyIds}));}
if(options.commandContainer||options.commandElements||options.cmdOk||options.cmdSave||options.cmdCancel||options.cmdPrint){this.m_commandContainer=options.commandContainer||new ControlContainer(id+":cmd-cont","DIV",{"elements":options.commandElements});}
this.setWritePublicMethod(options.writePublicMethod);this.addControls();this.m_keyEvent=function(e){e=EventHelper.fixKeyEvent(e);if(self.keyPressEvent(e.keyCode,e)){e.preventDefault();e.stopPropagation();return false;}};}
extend(ViewObjectAjx,ViewAjx);ViewObjectAjx.prototype.DEF_ONSAVEOK_MES_TIMEOUT=2000;ViewObjectAjx.prototype.CMD_OK="ok";ViewObjectAjx.prototype.m_controlCancel;ViewObjectAjx.prototype.m_controlOK;ViewObjectAjx.prototype.m_controlSave;ViewObjectAjx.prototype.m_controlPrint;ViewObjectAjx.prototype.m_onClose;ViewObjectAjx.prototype.m_readPublicMethod;ViewObjectAjx.prototype.m_commandContainer;ViewObjectAjx.prototype.m_replacedNode;ViewObjectAjx.prototype.m_cmd;ViewObjectAjx.prototype.m_controller;ViewObjectAjx.prototype.m_model;ViewObjectAjx.prototype.m_refType;ViewObjectAjx.prototype.m_dataType;ViewObjectAjx.prototype.m_keys;ViewObjectAjx.prototype.m_editResult;ViewObjectAjx.prototype.m_detailDataSets;ViewObjectAjx.prototype.addKeyEvents=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id]&&this.m_elements[elem_id].setInitValue){EventHelper.add(this.m_elements[elem_id].getNode(),"keydown",this.m_keyEvent,false);}}}
ViewObjectAjx.prototype.delKeyEvents=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id]&&this.m_elements[elem_id].setInitValue){EventHelper.del(this.m_elements[elem_id].getNode(),"keydown",this.m_keyEvent,false);}}}
ViewObjectAjx.prototype.keyPressEvent=function(keyCode,event){var res=false;switch(keyCode){case 27:res=true;this.onCancel();break;case 13:if(event.ctrlKey){res=true;this.onOK();}
break;}
return res;}
ViewObjectAjx.prototype.addControls=function(){if(this.m_commandContainer){if(this.m_controlOK)this.m_commandContainer.addElement(this.m_controlOK);if(this.m_controlSave)this.m_commandContainer.addElement(this.m_controlSave);if(this.m_controlPrint)this.m_commandContainer.addElement(this.m_controlPrint);if(this.m_controlCancel)this.m_commandContainer.addElement(this.m_controlCancel);}}
ViewObjectAjx.prototype.close=function(res){if(this.m_onClose){res=res||{};res.window=window;this.m_onClose.call(this,res);}
else{window.closeResult=res;window.close();}}
ViewObjectAjx.prototype.onAfterUpsert=function(resp,initControls){this.m_editResult.updated=true;var app=window.getApp();if(resp&&typeof(resp)=="object"&&resp.modelExists(app.INSERTED_KEY_MODEL_ID)&&this.m_dataBindings&&this.m_dataBindings.length){this.m_editResult.newKeys={};var model_obj_class=this.getWritePublicMethod().getController().getObjModelClass();var ret_model=new model_obj_class({"data":resp.getModelData(app.INSERTED_KEY_MODEL_ID)});var base_model_class;if(ret_model instanceof ModelXML){base_model_class=ModelXML;}
else if(ret_model instanceof ModelJSON){base_model_class=ModelJSON;}
else{throw Error(this.ER_UNSUPPORTED_BASE_MODEL);}
var ret_model_serv_fields;var ret_model_serv=new base_model_class(app.INSERTED_KEY_MODEL_ID,{"data":resp.getModelData(app.INSERTED_KEY_MODEL_ID)});if(ret_model_serv.getNextRow()){ret_model_serv_fields=ret_model_serv.getFields();}
var ret_fields;if(ret_model.getNextRow()){ret_fields=ret_model.getFields();}
if(ret_model_serv_fields&&ret_fields){for(ret_id in ret_model_serv_fields){if(ret_model_serv_fields[ret_id].isSet()&&ret_fields[ret_id]){this.m_editResult.newKeys[ret_id]=ret_fields[ret_id].getValue();}}}
if(initControls){for(var i=0;i<this.m_dataBindings.length;i++){this.defineField(i);var f=this.m_dataBindings[i].getField();if(f){var val;if(ret_model_serv_fields[f.getId()]&&ret_fields[f.getId()]&&ret_fields[f.getId()].isSet()){val=ret_fields[f.getId()].getValue();}
else{if(!this.m_dataBindings[i].getControl()){console.dir(this.m_dataBindings[i])}
val=this.m_dataBindings[i].getControl().getValue();}
if(this.m_dataBindings[i].getControl().setInitValue){this.m_dataBindings[i].getControl().setInitValue(val);}
f.setValue(val);}}}}
else{for(var i=0;i<this.m_dataBindings.length;i++){this.defineField(i);var f=this.m_dataBindings[i].getField();if(f){var ctrl=this.m_dataBindings[i].getControl();if(ctrl){var val;val=ctrl.getValue();if(initControls&&ctrl.setInitValue){ctrl.setInitValue(val);}
if(val!=null&&typeof val=="object"&&val.getKeys){var keys=val.getKeys();for(key in keys){val=keys[key];break;}}
try{f.setValue(val);}
catch(e){}}}}}
this.m_editResult.lsn=app.getLsnValueFromResponse(resp);}
ViewObjectAjx.prototype.onOK=function(failFunc){var self=this;this.execCommand(this.CMD_OK,function(resp){self.onAfterUpsert(resp,false);self.close(self.m_editResult);},failFunc);}
ViewObjectAjx.prototype.onSave=function(okFunc,failFunc,allFunc){var self=this;this.execCommand(this.CMD_OK,function(resp){self.onSaveOk.call(self,resp);if(okFunc){okFunc.call(self);}},failFunc,allFunc);}
ViewObjectAjx.prototype.getModified=function(cmd){return ViewObjectAjx.superclass.getModified.call(this,(cmd)?cmd:this.CMD_OK);}
ViewObjectAjx.prototype.onCancel=function(){if(this.getModified(this.CMD_OK)){var self=this;WindowQuestion.show({"text":this.Q_SAVE_CHANGES,"timeout":this.SAVE_CH_TIMEOUT,"winObj":this.m_winObj,"callBack":function(res){if(res==WindowQuestion.RES_YES){self.onOK();}
else if(res==WindowQuestion.RES_NO){self.close(this.m_editResult);}}});}
else{this.close(this.m_editResult);}}
ViewObjectAjx.prototype.setWriteTempEnabled=function(cmd){ViewObjectAjx.superclass.setWriteTempEnabled.call(this,cmd);if(this.m_controlSave)this.m_controlSave.setEnabled(true);}
ViewObjectAjx.prototype.setWriteTempDisabled=function(cmd){ViewObjectAjx.superclass.setWriteTempDisabled.call(this,cmd);if(this.m_controlSave)this.m_controlSave.setEnabled(false);}
ViewObjectAjx.prototype.setDetailDataSetEnabled=function(en){for(var det_id in this.m_detailDataSets){var ctrl=this.m_detailDataSets[det_id].control;if(ctrl&&ctrl.setEnabled){ctrl.setEnabled(en);}}}
ViewObjectAjx.prototype.toDOM=function(parent){ViewObjectAjx.superclass.toDOM.call(this,parent,this.getCmd());if(this.getCmd()=="insert"){this.setDetailDataSetEnabled(false);}
if(this.m_commandContainer)this.m_commandContainer.toDOM(parent);this.addKeyEvents();this.setDefRefVals();if(this.m_headTitle){document.title=this.m_headTitle;}}
ViewObjectAjx.prototype.delDOM=function(){this.delKeyEvents();if(this.m_commandContainer)this.m_commandContainer.delDOM();ViewObjectAjx.superclass.delDOM.call(this);}
ViewObjectAjx.prototype.setControlOK=function(v){this.m_controlOK=v;}
ViewObjectAjx.prototype.getControlOK=function(){return this.m_controlOK;}
ViewObjectAjx.prototype.setControlSave=function(v){this.m_controlSave=v;}
ViewObjectAjx.prototype.getControlSave=function(){return this.m_controlSave;}
ViewObjectAjx.prototype.setControlCancel=function(v){this.m_controlCancel=v;}
ViewObjectAjx.prototype.getControlCancel=function(){return this.m_controlCancel;}
ViewObjectAjx.prototype.setControlPrint=function(v){this.m_controlPrint=v;}
ViewObjectAjx.prototype.getControlPrint=function(){return this.m_controlPrint;}
ViewObjectAjx.prototype.setWritePublicMethod=function(v){if(v&&window.getParam){var opts=window.getParam("editViewOptions");if(opts&&opts.keys){for(var key in opts.keys){v.setFieldValue(key,opts.keys[key]);}}}
this.getCommands()[this.CMD_OK].setPublicMethod(v);}
ViewObjectAjx.prototype.getWritePublicMethod=function(){return this.getCommands()[this.CMD_OK].getPublicMethod();}
ViewObjectAjx.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
ViewObjectAjx.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
ViewObjectAjx.prototype.setOnClose=function(v){this.m_onClose=v;}
ViewObjectAjx.prototype.getOnClose=function(){return this.m_onClose;}
ViewObjectAjx.prototype.setReplacedNode=function(v){this.m_replacedNode=v;}
ViewObjectAjx.prototype.getReplacedNode=function(){return this.m_replacedNode;}
ViewObjectAjx.prototype.setCmd=function(v){this.m_cmd=v;if(v!="insert"){this.setDetailDataSetEnabled(true);}}
ViewObjectAjx.prototype.getCmd=function(){if(!this.m_cmd&&window.getParam){this.m_cmd=window.getParam("cmd");}
else if(!this.m_cmd){this.m_cmd="edit";}
return this.m_cmd;}
ViewObjectAjx.prototype.setWritePublicMethodOnController=function(){if(this.m_controller){var frm_cmd=this.getCmd();if(frm_cmd){var pm_id=(frm_cmd=="insert"||frm_cmd=="copy")?this.m_controller.METH_INSERT:this.m_controller.METH_UPDATE;if(this.m_controller.publicMethodExists(pm_id)){this.setWritePublicMethod(this.m_controller.getPublicMethod(pm_id));}}}}
ViewObjectAjx.prototype.setController=function(v){this.m_controller=v;this.setWritePublicMethodOnController();}
ViewObjectAjx.prototype.getController=function(){return this.m_controller;}
ViewObjectAjx.prototype.updateControlsFromResponse=function(resp){this.onAfterUpsert(resp,true);this.setCmd("update");this.setWritePublicMethod(null);for(var id in this.m_detailDataSets){if(this.m_detailDataSets[id].control&&!this.m_detailDataSets[id].control.getEnabled()){this.m_detailDataSets[id].control.setEnabled(true);}}
this.setDetailKey();}
ViewObjectAjx.prototype.onSaveOk=function(resp){this.updateControlsFromResponse(resp);window.showTempNote(this.NOTE_SAVED,null,this.m_onSaveOkMesTimeout);}
ViewObjectAjx.prototype.execCommand=function(cmd,sucFunc,failFunc,allFunc){if(cmd==this.CMD_OK&&!this.getWritePublicMethod()&&this.getController()){this.setWritePublicMethodOnController();}
ViewObjectAjx.superclass.execCommand.call(this,cmd,sucFunc,failFunc,allFunc);}
ViewObjectAjx.prototype.read=function(cmd,failFunc){var self=this;this.setReadTempDisabled();this.getReadPublicMethod().run({"all":function(){self.setTempEnabled();},"ok":function(resp){self.onGetData(resp,cmd);},"fail":function(resp,erCode,erStr){if(failFunc){failFunc.call(self,resp,erCode,erStr);}
else{throw new Error(erStr);}}});}
ViewObjectAjx.prototype.setDetailKey=function(){if(this.m_model){var f=this.m_model.getFields();let keys_not_set=false;for(var id in f){if(f[id].getPrimaryKey()&&f[id].getValue()===undefined){keys_not_set=true;break;}}
if(keys_not_set){return;}}
for(var id in this.m_detailDataSets){var ds=this.m_detailDataSets[id].control;if(CommonHelper.isArray(this.m_detailDataSets[id].controlFieldId)&&CommonHelper.isArray(this.m_detailDataSets[id].value)){var pm=ds.getReadPublicMethod();var contr=pm.getController();for(var i=0;i<this.m_detailDataSets[id].controlFieldId.length;i++){var v;if(typeof(this.m_detailDataSets[id].value[i])=="function"){v=this.m_detailDataSets[id].value[i].call(this);}else{v=this.m_detailDataSets[id].value[i];}
var pm=ds.getInsertPublicMethod();if(pm)pm.setFieldValue(this.m_detailDataSets[id].controlFieldId[i],v);var pm=ds.getUpdatePublicMethod();if(pm)pm.setFieldValue(this.m_detailDataSets[id].controlFieldId[i],v);ds.setFilter({"field":this.m_detailDataSets[id].controlFieldId[i],"sign":contr.PARAM_SGN_EQUAL,"val":v});}
if(ds.getPagination){var pg=ds.getPagination();if(pg){var pm=ds.getReadPublicMethod();pm.setFieldValue(pm.getController().PARAM_COUNT,pg.getCountPerPage());}}
ds.onRefresh(function(){ds.setEnabled(true);});}else{var key;if(this.m_detailDataSets[id].field){key=this.m_detailDataSets[id].field.getValue();}
else if(this.m_detailDataSets[id].fieldId){this.m_detailDataSets[id].field=this.m_model.getField(this.m_detailDataSets[id].fieldId);key=this.m_detailDataSets[id].field.getValue();}
else if(this.m_detailDataSets[id].value){if(typeof(this.m_detailDataSets[id].value)=="function"){key=this.m_detailDataSets[id].value.call(this);}
else{key=this.m_detailDataSets[id].value;}}
if(key){var pm=ds.getInsertPublicMethod();if(pm)pm.setFieldValue(this.m_detailDataSets[id].controlFieldId,key);var pm=ds.getUpdatePublicMethod();if(pm)pm.setFieldValue(this.m_detailDataSets[id].controlFieldId,key);var pm=ds.getReadPublicMethod();var contr=pm.getController();ds.setFilter({"field":this.m_detailDataSets[id].controlFieldId,"sign":contr.PARAM_SGN_EQUAL,"val":key});if(ds.getPagination){var pg=ds.getPagination();if(pg){var pm=ds.getReadPublicMethod();pm.setFieldValue(pm.getController().PARAM_COUNT,pg.getCountPerPage());}}
ds.onRefresh(function(){ds.setEnabled(true);});}}}}
ViewObjectAjx.prototype.onGetData=function(resp,cmd){cmd=(cmd===undefined)?this.getCmd():((cmd===true)?"copy":cmd);ViewObjectAjx.superclass.onGetData.call(this,resp,cmd);if(!CommonHelper.isEmpty(this.m_detailDataSets)&&cmd!="insert"&&cmd!="copy"){this.setDetailKey();}
if(this.m_controlPrint&&this.m_model){var list=this.m_controlPrint.getObjList();var keys={};var keyIds=this.m_controlPrint.getKeyIds();var fields=this.m_model.getFields();if(!keyIds){for(var fid in fields){if(fields[fid].getPrimaryKey()){keys[fid]=fields[fid].getValue();}}}
else{for(var i=0;i<keyIds.length;i++){if(fields[keyIds[i]]){keys[keyIds[i]]=fields[keyIds[i]].getValue();}}}
for(var i=0;i<list.length;i++){list[i].setKeys(keys);}}}
ViewObjectAjx.prototype.addDetailDataSet=function(dsParams){this.m_detailDataSets[dsParams.control.getId()]=dsParams;var self=this;dsParams.control.initEditWinObjOrig=dsParams.control.initEditWinObj;dsParams.control.initEditWinObj=function(cmd){var ds_id=this.getId();var o=this.getEditViewOptions()||{};o.keys={};if(CommonHelper.isArray(self.m_detailDataSets[ds_id].controlFieldId)&&CommonHelper.isArray(self.m_detailDataSets[ds_id].value)){for(var i=0;i<self.m_detailDataSets[ds_id].controlFieldId.length;i++){var v;if(typeof(self.m_detailDataSets[ds_id].value[i])=="function"){v=self.m_detailDataSets[ds_id].value[i].call(this);}else{v=self.m_detailDataSets[ds_id].value[i];}
o.keys[self.m_detailDataSets[ds_id].controlFieldId[i]]=v;}}else{if(self.m_detailDataSets[ds_id].fieldId){self.m_detailDataSets[ds_id].field=self.m_model.getField(self.m_detailDataSets[ds_id].fieldId);}
var key;if(self.m_detailDataSets[ds_id].field){key=self.m_detailDataSets[ds_id].field.getValue();}
else if(self.m_detailDataSets[ds_id].value){if(typeof(self.m_detailDataSets[ds_id].value)=="function"){key=self.m_detailDataSets[ds_id].value();}
else{key=self.m_detailDataSets[ds_id].value;}}
o.keys[self.m_detailDataSets[ds_id].controlFieldId]=key;}
this.setEditViewOptions(o);this.initEditWinObjOrig(cmd);}
if(dsParams.control&&dsParams.control.getInsertPublicMethod()&&dsParams.value&&!CommonHelper.isArray(dsParams.value)){var key;if(typeof(dsParams.value)=="function"){key=dsParams.value();}
else{key=dsParams.value;}
if(key){dsParams.control.setFilter({"field":dsParams.controlFieldId,"sign":dsParams.control.getInsertPublicMethod().getController().PARAM_SGN_EQUAL,"val":key});}}else if(dsParams.control&&dsParams.control.getInsertPublicMethod()&&dsParams.value&&CommonHelper.isArray(dsParams.value)){for(var i=0;i<dsParams.controlFieldId.length;i++){var v;if(typeof(dsParams.value[i])=="function"){v=dsParams.value[i].call(this);}else{v=dsParams.value[i];}
dsParams.control.setFilter({"field":dsParams.controlFieldId[i],"sign":dsParams.control.getInsertPublicMethod().getController().PARAM_SGN_EQUAL,"val":v});}}}
ViewObjectAjx.prototype.copyControl=function(fromName,toName){var name=this.getElement(fromName).getValue();if(name&&!this.getElement(toName).getValue()){this.getElement(toName).setValue(name);}}
ViewObjectAjx.prototype.setDefRefVals=function(){}
ViewObjectAjx.prototype.setModel=function(v){this.m_model=v;}
ViewObjectAjx.prototype.getModel=function(){return this.m_model;}
ViewObjectAjx.prototype.setDataBindings=function(bindings){if(this.m_model){var bd_ids=[];for(var b_ind=0;b_ind<bindings.length;b_ind++){if(bindings[b_ind]){if(!bindings[b_ind].getModel()){bindings[b_ind].setModel(this.m_model);}
if(bindings[b_ind].getControl()){bd_ids.push(bindings[b_ind].getControl().getName());}}}
var fields=this.m_model.getFields();for(var f in fields){if(fields[f].getPrimaryKey()){var ctrl=this.getElement(f);if(!ctrl){ctrl=new HiddenKey(this.getId()+":"+f);this.addElement(ctrl);}
if(CommonHelper.inArray(f,bd_ids)<0){bindings.push(new DataBinding({"model":this.m_model,"control":ctrl,"field":fields[f]}));}}}}
ViewObjectAjx.superclass.setDataBindings.call(this,bindings);}
ViewObjectAjx.prototype.addDataBinding=function(bind){if(this.m_model&&!bind.getModel()){bind.setModel(this.m_model);}
ViewObjectAjx.superclass.addDataBinding.call(this,bind);}
ViewObjectAjx.prototype.setWriteBindings=function(bindings,cmd){if(this.m_model){var bd_ids=[];for(var b_ind=0;b_ind<bindings.length;b_ind++){var f_id;if(!bindings[b_ind]){throw new Error("ViewObjectAjx::setWriteBindings field index="+b_ind+". Field not defined!")}
if(bindings[b_ind].getField()){f_id=bindings[b_ind].getField().getId();}
else if(bindings[b_ind].getFieldId()){f_id=bindings[b_ind].getFieldId();}
else if(bindings[b_ind].getControl()){f_id=bindings[b_ind].getControl().getName();}
if(f_id){bd_ids.push(f_id);}}
var fields=this.m_model.getFields();for(var f in fields){if(fields[f].getPrimaryKey()){if(CommonHelper.inArray(f,bd_ids)<0){bindings.push(new CommandBinding({"control":this.getElement(f),"fieldId":f}));}}}}
this.getCommands()[(cmd?cmd:this.CMD_OK)].setBindings(bindings);}
ViewObjectAjx.prototype.getCommandContainer=function(){return this.m_commandContainer;}
ViewObjectAjx.prototype.getRefType=function(){if(!this.m_refType&&this.m_model&&this.m_dataType){var keys={};var f=this.m_model.getFields();for(var id in f){if(f[id].getPrimaryKey()&&this.elementExists(id)){keys[id]=this.getElement(id).getValue();}}
this.m_refType=new RefType({"keys":keys,"descr":"","dataType":this.m_dataType});}
return this.m_refType;}
ViewObjectAjx.prototype.saveObject=function(callBack){this.m_oldSaveEn=false;this.m_oldOkEn=false;if(this.getControlSave()&&this.getControlSave().getEnabled){this.m_oldSaveEn=this.getControlSave().getEnabled();if(this.m_oldSaveEn)this.getControlSave().setEnabled(false);}
if(this.getControlOK()&&this.getControlOK().getEnabled){this.m_oldOkEn=this.getControlOK().getEnabled();if(this.m_oldOkEn)this.getControlOK().setEnabled(false);}
var self=this;this.onSave(null,null,function(){if(self.m_oldSaveEn)self.getControlSave().setEnabled(true);if(self.m_oldOkEn)self.getControlOK().setEnabled(true);if(callBack)callBack();});}
ViewObjectAjx.prototype.setKeys=function(v){this.m_keys=v;}
ViewObjectAjx.prototype.getKeys=function(){return this.m_keys;}
ViewObjectAjx.prototype.setOnSaveOkMesTimeout=function(v){this.m_onSaveOkMesTimeout=v;}
ViewObjectAjx.prototype.getOnSaveOkMesTimeout=function(){return this.m_onSaveOkMesTimeout;} 
ViewObjectAjx.prototype.Q_SAVE_CHANGES="Сохранить изменения?";ViewObjectAjx.prototype.NOTE_SAVED="Объект записан";ViewObjectAjx.prototype.ER_UNSUPPORTED_BASE_MODEL="Данная базовая модель не поддерживается."; 
function ViewGridEditInlineAjx(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;options.cmdSave=false;this.m_columnTagName=options.columnTagName||this.DEF_COL_TAG_NAME;this.m_containerClass=options.containerClass;options.commandContainer=new ControlContainer(id+":cmd-cont",this.m_columnTagName,{"className":options.cmdContClassName||this.DEF_CMD_CLASS});this.setGrid(options.grid);let gridModelId=options.grid.getModel().getId();options.model=(options.models&&options.models[gridModelId])?options.models[gridModelId]:null;this.m_row=options.row;ViewGridEditInlineAjx.superclass.constructor.call(this,id,options);}
extend(ViewGridEditInlineAjx,ViewObjectAjx);ViewGridEditInlineAjx.prototype.DEF_TAG_NAME="TR";ViewGridEditInlineAjx.prototype.DEF_COL_TAG_NAME="TD";ViewGridEditInlineAjx.prototype.DEF_CMD_CLASS="cmdButtons";ViewGridEditInlineAjx.prototype.m_grid;ViewGridEditInlineAjx.prototype.m_row;ViewGridEditInlineAjx.prototype.m_columnTagName;ViewGridEditInlineAjx.prototype.addEditControls=function(){var view_id=this.getId();var columns=this.getGrid().getHead().getColumns();var focus_set_elem;var autofocused=false;var ctrl_cont_class=this.m_containerClass;for(var col_id=0;col_id<columns.length;col_id++){var column=undefined;if(this.m_row){cell_obj=this.m_row.getElement(columns[col_id].getId());if(cell_obj){column=cell_obj.getGridColumn();}}
if(!column){column=columns[col_id];}
var ctrl;var f=column.getField();if(!f){ctrl=new Control(view_id+":"+column.getId(),this.m_columnTagName,{"className":ctrl_cont_class});}else if(column.getCtrlEdit()){var ctrl_opts={};var o=column.getCtrlOptions();if(o){if(typeof(o)=="function"){ctrl_opts=o.call(this);}else{ctrl_opts=CommonHelper.clone(o);}}
ctrl_opts.visible=columns[col_id].getHeadCell().getVisible();if(ctrl_cont_class){ctrl_opts.contClassName=ctrl_cont_class;}
var ctrl_class=column.getCtrlClass();if(!ctrl_class){var tp=f.getDataType();if(tp==f.DT_BOOL){ctrl_class=EditCheckBox;}
else if(tp==f.DT_DATE){ctrl_class=EditDate;}
else if(tp==f.DT_DATETIME){ctrl_class=EditDateTime;}
else if(tp==f.DT_ENUM){ctrl_class=EditSelect;}
else if(tp==f.DT_FLOAT){ctrl_class=EditFloat;}
else if(tp==f.DT_INT){ctrl_class=EditInt;}
else if(tp==f.DT_STRING){ctrl_class=EditString;}
else if(tp==f.DT_PWD){ctrl_class=EditPassword;}
else if(tp==f.DT_TEXT){ctrl_class=EditText;}
else{ctrl_class=EditString;}}
if(f.getValidator().getMaxLength()){ctrl_opts.maxLength=f.getValidator().getMaxLength();}
if(f.getValidator().getRequired()){ctrl_opts.required=true;}
var focus_skeep=false;if(f.getPrimaryKey()){ctrl_opts.noSelect=true;ctrl_opts.noClear=true;focus_skeep=f.getAutoInc();}
ctrl_opts["name"]=column.getId();ctrl=new ctrl_class(view_id+":"+column.getId(),ctrl_opts);if(ctrl_opts.focus||ctrl_opts.focussed||ctrl_opts.focused||ctrl_opts.autofocus){autofocused=true;}
else if(!autofocused&&!focus_skeep&&!focus_set_elem&&(ctrl_opts.enabled==undefined||ctrl_opts.enabled)){focus_set_elem=ctrl;}}
else{ctrl=new Control(view_id+":"+column.getId(),this.m_columnTagName,{"value":f.getValue(),"className":ctrl_cont_class});}
this.addElement(ctrl);}
if(!autofocused&&focus_set_elem){focus_set_elem.setAttr("autofocus","autofocus");}}
ViewGridEditInlineAjx.prototype.addControls=function(){this.addEditControls();ViewGridEditInlineAjx.superclass.addControls.call(this);}
ViewGridEditInlineAjx.prototype.setWritePublicMethod=function(pm){ViewGridEditInlineAjx.superclass.setWritePublicMethod.call(this,pm);if(!pm){return;}
let columns=this.getGrid().getHead().getColumns();let comBind=this.getCommands()[this.CMD_OK].getBindings();for(let colId=0;colId<columns.length;colId++){var column=undefined;if(this.m_row){cell_obj=this.m_row.getElement(columns[colId].getId());if(cell_obj){column=cell_obj.getGridColumn();}}
if(!column){column=columns[colId];}
if(column.getField()){let fId=(column.getCtrlBindField())?column.getCtrlBindField().getId():((column.getCtrlBindFieldId())?column.getCtrlBindFieldId():column.getField().getId());if(pm.fieldExists(fId)){comBind.push(new CommandBinding({"field":pm.getField(fId),"control":this.getElement(column.getId())}));}else{console.log("ViewGridEditInlineAjx.prototype.setWritePublicMethod: fieldID: "+fId+", no PublicMethod field")}}}
this.setKeysPublicMethod(pm);}
ViewGridEditInlineAjx.prototype.setReadBinds=function(pm){if(!pm){return;}
let model=this.m_model;if(!model){let objModel=pm.getController().getObjModelClass();model=new objModel();}
let columns=this.getGrid().getHead().getColumns();let bindings=[];for(let colId=0;colId<columns.length;colId++){let column=undefined;if(this.m_row){let cellObj=this.m_row.getElement(columns[colId].getId());if(cellObj){column=cellObj.getGridColumn();}}
if(!column){column=columns[colId];}
if(column.getField()&&column.getCtrlEdit()){let colFieldId=column.getField().getId();bindings.push(new DataBinding({"field":model.getField(colFieldId),"model":model,"control":this.getElement(column.getId())}));}}
this.setDataBindings(bindings);this.onGetData(null,this.getCmd());}
ViewGridEditInlineAjx.prototype.setReadPublicMethod=function(pm){ViewGridEditInlineAjx.superclass.setReadPublicMethod.call(this,pm);this.setReadBinds(pm);}
ViewGridEditInlineAjx.prototype.viewToDOM=function(parent,prevNode){var elem;for(var elem_id in this.m_elements){elem=this.m_elements[elem_id];elem.toDOM(this.m_node);}
this.m_commandContainer.toDOM(this.m_node);if(this.m_replacedNode){this.m_replacedNode.parentNode.replaceChild(this.m_node,this.m_replacedNode);}
else{if(prevNode){parent.insertBefore(this.m_node,prevNode.nextSibling);}
else{var rows=parent.getElementsByTagName(this.m_node.nodeName);if(rows.length==0){parent.appendChild(this.m_node);}
else{parent.insertBefore(this.m_node,rows[0]);}}}
this.scrollToNode();this.setFocus();this.addKeyEvents();}
ViewGridEditInlineAjx.prototype.toDOMAfter=function(prevNode){this.viewToDOM(prevNode.parentNode,prevNode);}
ViewGridEditInlineAjx.prototype.toDOM=function(parent){this.viewToDOM(parent);}
ViewGridEditInlineAjx.prototype.scrollToNode=function(){var scroll_to_node=(this.getCmd()=="insert"&&this.m_grid.getInlineInsertPlace()=="first")?this.m_grid.m_container.getNode():this.m_node;if(!DOMHelper.inViewport(scroll_to_node,true)){$(scroll_to_node).get(0).scrollIntoView({"behavior":"smooth","block":"start"});}}
ViewGridEditInlineAjx.prototype.setGrid=function(v){this.m_grid=v;}
ViewGridEditInlineAjx.prototype.getGrid=function(){return this.m_grid;}
ViewGridEditInlineAjx.prototype.getReplacedNode=function(){return this.m_replacedNode;}
ViewGridEditInlineAjx.prototype.addElement=function(ctrl,defOptions){if((!defOptions||!defOptions.contTagName)&&ctrl.setContTagName){ctrl.setContTagName(this.m_columnTagName);}
if((!defOptions||!defOptions.editContClassName)&&ctrl.setEditContClassName){ctrl.setEditContClassName(ctrl.DEF_EDIT_CONT_CLASS+" "+window.getBsCol(12));}
ViewGridEditInlineAjx.superclass.addElement.call(this,ctrl);}
ViewGridEditInlineAjx.prototype.setKeysPublicMethod=function(pm){for(var k in this.m_keys){var fid="old_"+k;if(pm.fieldExists(fid)){pm.setFieldValue(fid,this.m_keys[k]);}}}  
function ViewDOC(id,options){options=options||{};this.setProcessable(options.processable||true);var self=this;options.controlOk=options.controlOk||new ButtonCmd(id+":cmdOk",{"caption":this.BTN_OK_CAP,"title":this.BTN_OK_TITLE,"onClick":function(){if(self.getProcessable()){self.getElement("processed").setValue(true);}
self.onOK();},"app":options.app});options.controlSave=options.controlSave||new ButtonCmd(id+":cmdSave",{"caption":this.BTN_SAVE_CAP,"title":this.BTN_SAVE_TITLE,"onClick":function(){if(self.getProcessable()&&!self.getElement("processed").getValue()){self.getElement("processed").setValue(false);}
self.onSave();},"app":options.app});options.controlCancel=options.controlCancel||new ButtonCmd(id+":cmdCancel",{"caption":this.BTN_CLOSE_CAP,"title":this.BTN_CLOSE_TITLE,"onClick":function(){self.onCancel();},"app":options.app});this.m_detailDataSetsExist=(options.detailDataSetsExist!=undefined)?options.detailDataSetsExist:true;ViewDOC.superclass.constructor.call(this,id,options);this.addElement(new HiddenKey(id+":id"));if(this.getProcessable()){this.addElement(new HiddenKey(id+":processed",{}));}
if(this.m_detailDataSetsExist){this.addElement(new HiddenKey(id+":view_id",{"value":CommonHelper.md5(CommonHelper.uniqid())}));}}
extend(ViewDOC,ViewObjectAjx);ViewDOC.prototype.m_model;ViewDOC.prototype.m_detailDataSetsExist;ViewDOC.prototype.m_processable;ViewDOC.prototype.addDetailDataSet=function(grid){ViewDOC.superclass.addDetailDataSet.call(this,{"control":grid,"controlFieldId":"view_id","value":this.getElement("view_id").getValue()});}
ViewDOC.prototype.getViewId=function(){return(this.m_detailDataSetsExist)?this.getElement("view_id").getValue():null;}
ViewDOC.prototype.setDetailKey=function(){var contr=this.getReadPublicMethod().getController();var doc_id=0;if(this.getCmd()!="insert"){doc_id=this.getElement("id").getValue();}
var pm=contr.getPublicMethod("before_open");pm.setFieldValue("doc_id",doc_id);pm.setFieldValue("view_id",this.getElement("view_id").getValue());pm.run({"async":false});ViewDOC.superclass.setDetailKey.call(this);}
ViewDOC.prototype.getModified=function(cmd){var modified=ViewDOC.superclass.getModified.call(this,cmd);if(!modified){if(this.m_detailDataSetsExist){for(var id in this.m_detailDataSets){if(this.m_detailDataSets[id].control.getModified()){modified=true;break;}}}}
return modified;}
ViewDOC.prototype.addDefDataBindings=function(){this.addDataBinding(new DataBinding({"control":this.getElement("id"),"model":this.m_model}));if(this.getProcessable()){this.addDataBinding(new DataBinding({"control":this.getElement("processed"),"model":this.m_model}));}
var cmd_ok=this.getCommand(this.CMD_OK);cmd_ok.addBinding(new CommandBinding({"control":this.getElement("id")}));if(this.getProcessable()){cmd_ok.addBinding(new CommandBinding({"control":this.getElement("processed")}));}}
ViewDOC.prototype.execCommand=function(cmd,sucFunc,failFunc){if(this.getCmd()=="insert"){var dt_ctrl=this.getElement("date_time");if(dt_ctrl){var dt_ctrl_val=dt_ctrl.getValue();if(dt_ctrl_val.getHours()==0&&dt_ctrl_val.getMinutes()==0&&dt_ctrl_val.getSeconds()==0){tm=DateHelper.time();dt_ctrl_val.setHours(tm.getHours(),tm.getMinutes(),tm.getSeconds());dt_ctrl.setValue(dt_ctrl_val);}}}
ViewDOC.superclass.execCommand.call(this,cmd,sucFunc,failFunc);}
ViewDOC.prototype.beforeExecCommand=function(cmd,pm){ViewDOC.superclass.beforeExecCommand.call(this,cmd,pm);if(this.m_detailDataSetsExist&&pm.fieldExists("view_id")){pm.setFieldValue("view_id",this.getViewId());}}
ViewDOC.prototype.getProcessable=function(){return this.m_processable;}
ViewDOC.prototype.setProcessable=function(v){this.m_processable=v;}
ViewDOC.prototype.onSaveOk=function(resp){ViewDOC.superclass.onSaveOk.call(this,resp);if(this.m_detailDataSetsExist){for(var id in this.m_detailDataSets){this.m_detailDataSets[id].control.setModified(false);}}} 
ViewDOC.prototype.BTN_OK_CAP="Провести";ViewDOC.prototype.BTN_OK_TITLE="Провести документ и закрыть форму";ViewDOC.prototype.BTN_SAVE_CAP="Записать";ViewDOC.prototype.BTN_SAVE_TITLE="Записать документ";ViewDOC.prototype.BTN_CLOSE_CAP="Закрыть";ViewDOC.prototype.BTN_CLOSE_TITLE="Закрыть форму";ViewDOC.prototype.CTRL_NUM_LABEL="№";ViewDOC.prototype.CTRL_DATE_LABEL="от";ViewDOC.prototype.NOTE_SAVED="Документ записан"; 
var WindowPrint={show:function(options){options=options||{};var win_opts=options.winOptions||{};win_opts["name"]="Print?"+CommonHelper.uniqid();var print_and_close=(options.print!=undefined)?options.print:true;win_opts.title=this.TITLE+((options.title!=undefined)?": "+options.title:"");var template=options.template||window.getApp().getTemplate("WindowPrint");win_opts.content=Mustache.render(template.replace("{{content}}",options.content),{"title":win_opts.title,"scriptId":window.getApp().getServVar("scriptId")});var winObj=new WindowForm(win_opts);var newWin=winObj.open();newWin.document.close();var win_del=setInterval(check_state,10);function check_state(){if(newWin.document.readyState=="complete"){clearInterval(win_del);newWin.focus();if(print_and_close){newWin.print();newWin.close();}}}}} 
WindowPrint.TITLE="Печать";WindowPrint.CHROME_NOTE="используйте кнопку 'Отмена' для закрытия окна предварительного просмотра.\n"; 
var WindowQuestion={RES_YES:0,RES_NO:1,RES_CANCEL:2,show:function(options){options=options||{};var self=this;var yes=(options.yes!=undefined)?options.yes:true;var no=(options.no!=undefined)?options.no:true;var cancel=(options.cancel!=undefined)?options.cancel:true;var timeout=options.timeout||0;if(options.callBackYes){this.m_callBack=(function(userCallBack){return function(res){if(res==WindowQuestion.RES_YES){userCallBack();}}})(options.callBackYes)}else{this.m_callBack=options.callBack;}
this.m_modalId="quest-modal";this.m_modal=new WindowFormModalBS(this.m_modalId,{content:new Control(this.m_modalId+":cont","div",{value:options.text})});this.m_modalOpenFunc=this.m_modal.open;this.m_modalCloseFunc=this.m_modal.close;this.m_modal.open=function(){self.addEvents();self.m_modalOpenFunc.call(self.m_modal);self.m_modal.m_footer.getElement("btn-yes").getNode().focus();}
this.m_modal.close=function(res){self.delEvents();self.m_modalCloseFunc.call(self.m_modal);self.m_callBack(res);}
var btn_class=options.buttonClass||ButtonCmd;this.m_keyEvent=function(e){e=EventHelper.fixKeyEvent(e);if(self.keyPressEvent(e.keyCode,e)){e.preventDefault();return false;}};if(yes){this.m_modal.m_footer.addElement(new btn_class(this.m_modalId+":btn-yes",{"caption":this.BTN_YES_CAP,"focus":true,"attrs":{"title":this.YES_TITLE,"tabindex":0},"onClick":function(){self.m_modal.close(self.RES_YES);}}));}
if(no){this.m_modal.m_footer.addElement(new btn_class(this.m_modalId+":btn-no",{"caption":this.BTN_NO_CAP,"attrs":{"title":this.NO_TITLE,"tabindex":1},"onClick":function(){self.m_modal.close(self.RES_NO);}}));}
if(cancel){this.m_modal.m_footer.addElement(new btn_class(this.m_modalId+":btn-cancel",{"caption":this.BTN_CANCEL_CAP,"attrs":{"data-dismiss":"modal","title":this.CANCEL_TITLE,"tabindex":2},"onClick":function(){self.m_modal.close(self.RES_CANCEL);}}));}
this.m_modal.open();return this.RES_NO;},addEvents:function(){EventHelper.add(window,'keydown',this.m_keyEvent,false);},delEvents:function(){EventHelper.del(window,'keydown',this.m_keyEvent,false);},keyPressEvent:function(keyCode,event){var res=false;switch(keyCode){case 39:break;case 37:break;case 13:this.m_modal.close(this.RES_YES);res=true;break;case 27:this.m_modal.close(this.RES_CANCEL);res=true;break;}
return res;}} 
WindowQuestion.YES_TITLE="ответить утвердительно";WindowQuestion.NO_TITLE="ответить отрицательно";WindowQuestion.CANCEL_TITLE="отменить действие";WindowQuestion.BTN_YES_CAP="Да";WindowQuestion.BTN_NO_CAP="Нет";WindowQuestion.BTN_CANCEL_CAP="Отмена"; 
var WindowSearch={RES_OK:0,RES_CANCEL:2,show:function(options){options=options||{};var self=this;this.m_callBack=options.callBack;this.m_modalId="search-modal";var cur_opts;var select_opts=[];for(var i=0;i<options.columns.length;i++){var opt=new EditSelectOption(this.m_modalId+":where:"+i,{"value":options.columns[i].id,"checked":options.columns[i].current,"descr":options.columns[i].descr});opt.getSearchOptions=(function(opts){return function(){return opts;}})(options.columns[i]);select_opts.push(opt);if(options.columns[i].current){cur_opts=opt.getSearchOptions();}}
this.setSearchCtrl(cur_opts,options.text);this.m_modal=new WindowFormModalBS(this.m_modalId,{"contentHead":this.HEAD_TITLE,"content":new ControlContainer(this.m_modalId+":cont","DIV",{"elements":[this.m_searchCtrl,new EditSelect(this.m_modalId+":where",{"labelCaption":this.PAR_WHERE_CAP,"elements":select_opts,"addNotSelected":false,"events":{"change":function(){var opts=this.getOption().getSearchOptions();var how_ctrl=self.m_modal.m_body.getElement("cont").getElement("how");how_ctrl.setVisible(opts.typeChange);how_ctrl.setValue(opts.searchType);self.setSearchCtrl(opts);self.m_searchCtrl.toDOMBefore(self.m_modal.m_body.getElement("cont").getElement("where").m_container.getNode());}}}),new EditRadioGroup(this.m_modalId+":how",{"labelCaption":this.PAR_HOW_CAP,"visible":cur_opts.typeChange,"elements":[new EditRadio(this.m_modalId+":cont:on_beg",{"labelCaption":this.PAR_HOW_ON_BEG,"name":"how_opt","value":"on_beg","checked":(cur_opts.searchType=="on_beg")}),new EditRadio(this.m_modalId+":cont:on_part",{"labelCaption":this.PAR_HOW_ON_PART,"name":"how_opt","value":"on_part","checked":(cur_opts.searchType=="on_part")}),new EditRadio(this.m_modalId+":cont:on_match",{"labelCaption":this.PAR_HOW_ON_MATCH,"name":"how_opt","value":"on_match","checked":(cur_opts.searchType=="on_match")})]})]}),"controlOk":new ButtonCmd(this.m_modalId+":btn-ok",{"caption":this.BTN_FIND_CAP,"title":this.BTN_FIND_TITLE,"onClick":function(){self.m_modal.close(self.RES_OK);}}),"cmdCancel":true});this.m_modalOpenFunc=this.m_modal.open;this.m_modalCloseFunc=this.m_modal.close;this.m_modal.open=function(){self.addEvents();self.m_modalOpenFunc.call(self.m_modal);self.m_modal.m_footer.getElement("btn-ok").getNode().focus();}
this.m_modal.close=function(res){var res_struc;if(res==self.RES_OK){var cont=self.m_modal.m_body.getElement("cont");var ctrl=self.m_searchCtrl;var search_descr;if(ctrl.getIsRef&&ctrl.getIsRef()&&!(ctrl.searchField.getDataType()==Field.prototype.DT_JSON||ctrl.searchField.getDataType()==Field.prototype.DT_JSONB)){var keyIds=ctrl.getKeyIds();var ctrl_keys=ctrl.getKeys();if(keyIds.length>=1&&ctrl_keys&&ctrl_keys[keyIds[0]]){ctrl.searchField.setValue(ctrl_keys[keyIds[0]]);}
search_descr=ctrl.getValue().getDescr();}
else{var val=ctrl.getValue();search_descr=val;if(ctrl.setValid)ctrl.setValid();try{if(ctrl.getValidator&&ctrl.getValidator())ctrl.getValidator().validate(val);ctrl.searchField.setValue(val);}
catch(e){if(ctrl.setNotValid)ctrl.setNotValid(e.message);return;}}
res_struc={"search_str":ctrl.searchField.getValueXHR(),"where":ctrl.searchField.getId(),"how":cont.elementExists("how")?cont.getElement("how").getValue():"match","descr":cont.getElement("where").getOption().getDescr(),"search_descr":search_descr,"condSign":ctrl.searchCondSign}}
self.delEvents();self.m_callBack(res,res_struc);self.m_modalCloseFunc.call(self.m_modal);}
var btn_class=options.buttonClass||ButtonCmd;this.m_keyEvent=function(e){e=EventHelper.fixKeyEvent(e);if(self.keyPressEvent(e.keyCode,e)){e.preventDefault();return false;}};this.m_modal.open();return this.RES_NO;},addEvents:function(){EventHelper.add(window,'keydown',this.m_keyEvent,false);},delEvents:function(){EventHelper.del(window,'keydown',this.m_keyEvent,false);},keyPressEvent:function(keyCode,event){var res=false;switch(keyCode){case 13:this.m_modal.close(this.RES_OK);res=true;break;case 27:this.m_modal.close(this.RES_CANCEL);res=true;break;}
return res;},setSearchCtrl:function(opts,ctrlValue){if(!opts){return;}
if(this.m_searchCtrl){this.m_searchCtrl.delDOM();delete this.m_searchCtrl;}
var ctrl_opts={"labelCaption":this.STR_CAP,"placeholder":this.STR_PLACEHOLDER,"title":this.STR_TITLE,"maxlength":"500","value":ctrlValue,"focus":true};if(opts.ctrlOptions){for(let ctrlOptId in opts.ctrlOptions){if(!ctrl_opts[ctrlOptId]){ctrl_opts[ctrlOptId]=opts.ctrlOptions[ctrlOptId];}}}
this.m_searchCtrl=new opts.ctrlClass(this.m_modalId+":cont:search_ctrl",ctrl_opts);this.m_searchCtrl.searchField=opts.field;this.m_searchCtrl.searchCondSign=opts.condSign;}} 
WindowSearch.HEAD_TITLE="Поиск по колонке";WindowSearch.STR_CAP="Что искать:";WindowSearch.STR_PLACEHOLDER="Строка поиска";WindowSearch.STR_TITLE="Поиск будет выполнен по данной строке в соответствии с выбранными параметрами";WindowSearch.PAR_WHERE_CAP="Где искать:";WindowSearch.PAR_HOW_CAP="Как искать:";WindowSearch.PAR_HOW_ON_BEG="По началу строки";WindowSearch.PAR_HOW_ON_PART="По части строки";WindowSearch.PAR_HOW_ON_MATCH="По точному совпадению";WindowSearch.BTN_FIND_CAP="Найти";WindowSearch.BTN_FIND_TITLE="Выполнить поиск"; 
function WindowForm(options){options=options||{};this.m_id=options.id||CommonHelper.uniqid();options.height=options.height||this.DEF_HEIGHT;options.width=options.width||this.DEF_WIDTH;options.fullScreen=options.fullScreen||this.DEF_FULL_SCREEN;if(options.fullScreen){options.width=DOMHelper.getViewportWidth();options.height=DOMHelper.getViewportHeight();}
this.setFullScreen(options.fullScreen);this.setDirectories(options.directories||this.DEF_DIRECTORIES);this.setChannelMode(options.channelMode||this.DEF_CHANNEL_MODE);this.setHeight(options.height);if(options.center){this.m_center=true;this.setCenter(options.height||this.DEF_HEIGHT,options.width||this.DEF_WIDTH);}
else{if(options.centerLeft){this.setLeftCenter(options.width||this.DEF_WIDTH);}
else{this.setLeft(options.left||this.DEF_LEFT);}
if(options.centerTop){this.setTopCenter(options.height||this.DEF_HEIGHT);}
else{this.setTop(options.top||this.DEF_TOP);}}
this.setLocation((options.location!=undefined)?options.location:this.DEF_LOCATION);this.setMenuBar((options.menuBar!=undefined)?options.menuBar:this.DEF_MENU_BAR);this.setResizable((options.resizable!=undefined)?options.resizable:this.DEF_RESIZABLE);this.setScrollBars((options.scrollBars!=undefined)?options.scrollBars:this.DEF_SCROLL_BARS);this.setStatus((options.status!=undefined)?options.status:this.DEF_STATUS);this.setTitleBar((options.titleBar!=undefined)?options.titleBar:this.DEF_TITLE_BAR);this.setWidth(options.width);this.setName(options.name||this.DEF_WIN_NAME);this.setHost(options.host||"");this.setScript(options.script||(options.content==undefined)?this.DEF_SCRIPT:undefined);this.setURLParams(options.URLParams||"");this.setCaption(options.caption||options.title||"");this.m_content=options.content;this.setOnClose(options.onClose);this.setParams(options.params);}
WindowForm.prototype.DEF_DIRECTORIES="0";WindowForm.prototype.DEF_CHANNEL_MODE="0";WindowForm.prototype.DEF_FULL_SCREEN=0;WindowForm.prototype.DEF_HEIGHT="500";WindowForm.prototype.DEF_LEFT="0";WindowForm.prototype.DEF_LOCATION="0";WindowForm.prototype.DEF_MENU_BAR=0;WindowForm.prototype.DEF_RESIZABLE="1";WindowForm.prototype.DEF_SCROLL_BARS="1";WindowForm.prototype.DEF_STATUS="0";WindowForm.prototype.DEF_TITLE_BAR="0";WindowForm.prototype.DEF_TOP="0";WindowForm.prototype.DEF_WIDTH="600";WindowForm.prototype.DEF_WIN_NAME="_blank";WindowForm.prototype.DEF_SCRIPT="";WindowForm.prototype.DEF_CENTER_TOP_OFFSET="20";WindowForm.prototype.LEFT_STEP=50;WindowForm.prototype.LEFT_MAX=500;WindowForm.prototype.TOP_STEP=50;WindowForm.prototype.TOP_MAX=500;WindowForm.prototype.m_directories;WindowForm.prototype.m_channelMode;WindowForm.prototype.m_fullScreen;WindowForm.prototype.m_height;WindowForm.prototype.m_left;WindowForm.prototype.m_location;WindowForm.prototype.m_menuBar;WindowForm.prototype.m_resizable;WindowForm.prototype.m_scrollBars;WindowForm.prototype.m_status;WindowForm.prototype.m_titleBar;WindowForm.prototype.m_top;WindowForm.prototype.m_width;WindowForm.prototype.m_name;WindowForm.prototype.m_host;WindowForm.prototype.m_script;WindowForm.prototype.m_URLParams;WindowForm.prototype.m_WindowForm;WindowForm.prototype.m_onClose;WindowForm.prototype.m_params;WindowForm.prototype.open=function(){var win_opts="directories="+this.m_directories+","+"channelMode="+this.m_channelMode+","+"fullScreen="+this.m_fullScreen+","+"height="+this.m_height+","+"left="+this.m_left+","+"location="+this.m_location+","+"menubar="+this.m_menuBar+","+"resizable="+this.m_resizable+","+"scrollbars="+this.m_scrollBars+","+"status="+this.m_status+","+"titlebar="+this.m_titleBar+","+"top="+this.m_top+","+"width="+this.m_width;var url=this.getURL();if(CommonHelper.isIE()&&CommonHelper.getIEVersion()<=9){this.m_WindowForm=window.open("","",(this.m_name=="_blank")?"":win_opts);if(this.m_WindowForm)this.m_WindowForm.location=url;}
else{this.m_WindowForm=window.open(url,this.m_name,(this.m_name=="_blank")?"":win_opts);}
window.getApp().m_openedWindows[this.m_name]=this.m_WindowForm;if(!this.m_WindowForm){throw new Error(this.ER_OPEN);}
if(url==""&&this.m_content){if(typeof this.m_content=="object"){this.m_content.toDOM(this.m_WindowForm.document);}
else{this.m_WindowForm.document.write(this.m_content);}}
this.initForm();return this.m_WindowForm;}
WindowForm.prototype.initForm=function(){var self=this;this.m_WindowForm["onClose"]=function(res){if(self.m_onClose){self.m_onClose.call(self,self.m_WindowForm.closeResult);self.m_WindowForm.onClose=undefined;}}
this.m_WindowForm["getParam"]=function(id){return self.getParam(id);}
this.m_WindowForm["getApp"]=function(){return window.getApp();}
window["paramsSet"]=true;window["getChildParam"]=this.m_WindowForm["getParam"];}
WindowForm.prototype.close=function(){window.getApp().m_openedWindows[this.m_name]=undefined;if(this.m_WindowForm){this.m_WindowForm.close();}}
WindowForm.prototype.setDirectories=function(directories){this.m_directories=directories;}
WindowForm.prototype.setChannelMode=function(channelMode){this.m_channelMode=channelMode;}
WindowForm.prototype.setFullScreen=function(fullScreen){this.m_fullScreen=fullScreen;}
WindowForm.prototype.setHeight=function(height){if(height){this.m_height=height;}}
WindowForm.prototype.setLeft=function(left){this.m_left=left;}
WindowForm.prototype.setLocation=function(location){this.m_location=location;}
WindowForm.prototype.setMenuBar=function(menuBar){this.m_menuBar=menuBar;}
WindowForm.prototype.setResizable=function(resizable){this.m_resizable=resizable;}
WindowForm.prototype.setScrollBars=function(scrollBars){this.m_scrollBars=scrollBars;}
WindowForm.prototype.setStatus=function(status){this.m_status=status;}
WindowForm.prototype.setTitleBar=function(titleBar){this.m_titleBar=titleBar;}
WindowForm.prototype.setTop=function(top){if(top){this.m_top=top;}}
WindowForm.prototype.setWidth=function(width){if(width){this.m_width=width;}}
WindowForm.prototype.setSize=function(w,h){this.m_w=width;this.m_h=h;}
WindowForm.prototype.setName=function(name){this.m_name=name;}
WindowForm.prototype.getScript=function(){return this.m_script;}
WindowForm.prototype.setScript=function(script){this.m_script=script;}
WindowForm.prototype.getHost=function(){var host=this.m_host||"";if(host&&host.length&&host.substring(host.length-1,host.length)!="/"){host+="/";}
return host;}
WindowForm.prototype.setHost=function(host){this.m_host=host;}
WindowForm.prototype.getURL=function(){var s=this.getScript();var p=this.getURLParams();if(!s&&!p){return"";}
var h=this.getHost();if(p){p="?"+p;}
else{p="";}
return(h+s+p);}
WindowForm.prototype.setURLParams=function(URLParams){this.m_URLParams=URLParams;}
WindowForm.prototype.getURLParams=function(){return this.m_URLParams;}
WindowForm.prototype.setLeftCenter=function(width){var l=Math.floor(DOMHelper.getViewportWidth()/2)-Math.floor(width/2);this.setLeft(l);}
WindowForm.prototype.setTopCenter=function(height){var t=Math.floor(DOMHelper.getViewportHeight()/2)-Math.floor(height/2);this.setTop(t+this.DEF_CENTER_TOP_OFFSET);}
WindowForm.prototype.setCenter=function(height,width){this.setLeftCenter(width);this.setTopCenter(height);}
WindowForm.prototype.getWindowForm=function(){return this.m_WindowForm;}
WindowForm.prototype.getContentParent=function(){return this.m_WindowForm.document.body;}
WindowForm.prototype.setFocus=function(){return this.m_WindowForm.focus();}
WindowForm.prototype.setTitle=function(title){this.m_title=title;}
WindowForm.prototype.setCaption=function(caption){this.setTitle(caption);}
WindowForm.prototype.setOnClose=function(f){this.m_onClose=f;}
WindowForm.prototype.setParams=function(params){this.m_params=params||{};}
WindowForm.prototype.setParam=function(id,val){this.m_params[id]=val;}
WindowForm.prototype.getParam=function(id){return this.m_params[id];}
WindowForm.prototype.getId=function(){return this.m_id;} 
WindowForm.prototype.ER_OPEN="Ошибка открытия окна"; 
function WindowFormObject(options){options=options||{};options.host=options.host||window.getApp().getHost();options.script=options.script||window.getApp().getScript();options.URLParams=options.URLParams||"";if(options.formName){options.template=options.template||options.formName;}
options.view=options.view||"Child";options.keys=options.keys||{"id":null};if(options.fullScreen==undefined&&options.width==undefined&&options.height==undefined){options.fullScreen=true;}
options.name=options.name||options.formName;this.setController(options.controller);this.setMethod(options.method);this.setTemplate(options.template);this.setView(options.view);this.setKeys(options.keys);this.setMode((options.params&&options.params.cmd)?options.params.cmd:null);WindowFormObject.superclass.constructor.call(this,options);}
extend(WindowFormObject,WindowForm);WindowFormObject.prototype.m_controller;WindowFormObject.prototype.m_method;WindowFormObject.prototype.m_template;WindowFormObject.prototype.m_view;WindowFormObject.prototype.m_keys;WindowFormObject.prototype.m_keyIds;WindowFormObject.prototype.m_mode;WindowFormObject.prototype.getURLParams=function(){var str=this.m_controller?("c="+this.m_controller):"";if(this.m_method)str+="&f="+this.m_method;if(this.m_template)str+="&t="+this.m_template;if(this.m_mode)str+="&mode="+this.m_mode;str+=((str=="")?"":"&")+"v="+this.m_view;for(var fid in this.m_keys){if(this.m_keys[fid]!=undefined){str+="&"+fid+"="+this.m_keys[fid];}}
if(this.m_URLParams){str+="&"+this.m_URLParams;}
var conn=window.getApp().getServConnector();if(conn.getAccessTokenParam){str+="&"+conn.getAccessTokenParam()+"="+conn.getAccessToken();}
return str;}
WindowFormObject.prototype.setKeys=function(v){this.m_keyIds=[];for(var keyid in v){this.m_keyIds.push(keyid);}
this.m_keys=v}
WindowFormObject.prototype.getKeys=function(){return this.m_keys;}
WindowFormObject.prototype.getKeyIds=function(){return this.m_keyIds;}
WindowFormObject.prototype.setController=function(v){this.m_controller=v}
WindowFormObject.prototype.getController=function(){return this.m_controller;}
WindowFormObject.prototype.setMethod=function(v){this.m_method=v}
WindowFormObject.prototype.getMethod=function(){return this.m_method;}
WindowFormObject.prototype.setView=function(v){this.m_view=v}
WindowFormObject.prototype.getView=function(){return this.m_view;}
WindowFormObject.prototype.setTemplate=function(v){this.m_template=v}
WindowFormObject.prototype.getTemplate=function(){return this.m_template;}
WindowFormObject.prototype.setMode=function(v){this.m_mode=v}
WindowFormObject.prototype.getMode=function(){return this.m_mode;} 
WindowFormObject.prototype.ER_NO_CONTROLLER="Не задан котроллер.";WindowFormObject.prototype.ER_NO_METHOD="Не задан метод."; 
function WindowFormModalBS(id,options){if(typeof(id)=="object"){options=CommonHelper.clone(id);id=options.id?options.id:CommonHelper.uniqid();}
if(typeof(options)=="function"){options=options();}
options=options||{};var self=this;options.className=options.className||"modal";options.attrs=options.attrs||{};options.attrs.role="dialog";WindowFormModalBS.superclass.constructor.call(this,id,"DIV",options);var dialog_options=options.dialogOptions||{};CommonHelper.merge(dialog_options,{"className":"modal-dialog"});dialog_options.attrs=dialog_options.attrs||{};if(options.dialogWidth&&!dialog_options.attrs.style){dialog_options.attrs.style="";dialog_options.attrs.style="width:"+options.dialogWidth+";";}
this.m_dialog=new ControlContainer(id+":dlg","DIV",dialog_options);this.m_content=new ControlContainer(id+":cont","DIV",{"className":"modal-content"});this.m_header=new ControlContainer(id+":head","DIV",{className:(options.headerClassName||"modal-header")});if(options.cmdCancel||options.controlCancel||options.onClickCancel||options.cmdClose){this.m_header.addElement(new Control(null,"button",{"attrs":{"type":"button","class":"close","aria-hidden":"true"},"value":"×","events":{"click":options.onClickCancel||function(){self.close();}}}));}
if(options.contentHead){if(typeof(options.contentHead)=="object"){this.m_header.addElement(options.contentHead);}
else{this.m_header.addElement(new Control(id+":head:label","h4",{"className":"modal-title","value":options.contentHead}));}}
this.m_body=new ControlContainer(id+":body","DIV",{className:"modal-body"});if(options.content){this.m_userContent=options.content;this.m_body.addElement(options.content);}
this.m_footer=new ControlContainer(id+":footer","DIV",{className:"modal-footer"});if(options.contentFoot){this.m_footer.addElement(options.contentFoot);}
if(options.cmdOk||options.controlOk||options.onClickOk){this.m_footer.addElement(options.controlOk||new ButtonCmd(id+":btn-ok",{"caption":options.controlOkCaption||this.BTN_OK_CAP,"title":options.controlOkTitle||this.BTN_OK_TITLE,"onClick":function(){if(options.onClickOk){options.onClickOk.call(self);}else{self.close();}}}));}
if(options.cmdCancel||options.controlCancel||options.onClickCancel){this.m_footer.addElement(options.controlCancel||new ButtonCmd(id+":btn-cancel",{"caption":options.controlCancelCaption||this.BTN_CANCEL_CAP,"title":options.controlCancelTitle||this.BTN_CANCEL_TITLE,"onClick":function(){if(options.onClickCancel){options.onClickCancel.call(self);}else{self.close();}}}));}
this.m_content.addElement(this.m_header);this.m_content.addElement(this.m_body);this.m_content.addElement(this.m_footer);this.m_dialog.addElement(this.m_content);this.m_closeOnMouseClick=(options.closeOnMouseClick!=undefined)?options.closeOnMouseClick:false;}
extend(WindowFormModalBS,ControlContainer);WindowFormModalBS.prototype.m_header;WindowFormModalBS.prototype.m_body;WindowFormModalBS.prototype.m_foot;WindowFormModalBS.prototype.toDOM=function(parent){WindowFormModalBS.superclass.toDOM.call(this,parent);var self=this;let n=this.getNode();this.m_dialog.toDOM(n);$(this.getNode()).on('shown.bs.modal',function(){$('[autofocus]',this).focus();});$(this.getNode()).on('hidden.bs.modal',function(){if(self.m_dialog)self.m_dialog.delDOM();});var m_opts={show:true,keyboard:true}
if(!this.m_closeOnMouseClick){m_opts.backdrop="static";}
$(this.getNode()).modal(m_opts);}
WindowFormModalBS.prototype.delDOM=function(){$(this.getNode()).modal("hide");if(this.m_dialog)this.m_dialog.delDOM();WindowFormModalBS.superclass.delDOM.call(this);}
WindowFormModalBS.prototype.open=function(){this.toDOM(document.body);}
WindowFormModalBS.prototype.close=function(){this.delDOM();}
WindowFormModalBS.prototype.getContentParent=function(){return this.m_body.getNode();}
WindowFormModalBS.prototype.getContent=function(){return this.m_userContent;}
WindowFormModalBS.prototype.setCaption=function(caption){}
WindowFormModalBS.prototype.setFocus=function(){} 
WindowFormModalBS.prototype.BTN_OK_CAP="OK";WindowFormModalBS.prototype.BTN_OK_TITLE="Записать и закрыть форму";WindowFormModalBS.prototype.BTN_CANCEL_CAP="Закрыть";WindowFormModalBS.prototype.BTN_CANCEL_TITLE="Закрыть форму"; 
function WindowMessage(options){options=options||{};this.m_messages=[];this.m_window=null;this.m_model=null;this.m_flashTime=options.flashTime||this.FLASH_TIME;}
WindowMessage.prototype.ID="windowMessage";WindowMessage.prototype.FLASH_TIME=1000;WindowMessage.prototype.BS_COL=2;WindowMessage.prototype.TP_ER="danger";WindowMessage.prototype.TP_WARN="warning";WindowMessage.prototype.TP_INFO="info";WindowMessage.prototype.TP_OK="success";WindowMessage.prototype.m_messages;WindowMessage.prototype.m_window;WindowMessage.prototype.m_model;WindowMessage.prototype.show=function(options){options=options||{};var mes_id=CommonHelper.uniqid();options.type=options.type||this.TP_INFO;if(this.m_messages.length&&(this.m_messages[this.m_messages.length-1]&&this.m_messages[this.m_messages.length-1].content&&this.m_messages[this.m_messages.length-1].content.trim&&options.text&&options.text.trim&&this.m_messages[this.m_messages.length-1].content.trim()==options.text.trim()&&this.m_messages[this.m_messages.length-1].message_type==options.type)){this.m_messages[this.m_messages.length-1].date_time=DateHelper.time();}else{this.m_messages.push({id:mes_id,date_time:DateHelper.time(),subject:null,content:options.text,user_descr:null,message_type:options.type,importance_level:null,require_view:null});}
this.toDOM();if(options.callBack){options.callBack();}
return mes_id;};WindowMessage.prototype.toDOM=function(){var self=this;var mw_st=window.getApp().getWinMessageStyle();var mw_overlap=(mw_st.win_position=="overlap");var mw_class="",win_style="";if(window.getWidthType()!="sm"){mw_class=(mw_overlap?"windowMessageOverlap":"windowMessageStick");win_style="left:"+(100-mw_st.win_width)+"%;width:"+mw_st.win_width+"%;";}
else{mw_class="windowMessageMobile";}
var mw_col;if(!mw_overlap){mw_col=this.getMessageWindowCol(mw_st);mw_class+=(mw_class=="")?"":" ";mw_class+=window.getBsCol(mw_col);}
if(!this.m_window){var n=DOMHelper.getElementsByAttr("windowMessage",window.body,"class",true);if(!n.length){throw Error("Message window not found!");}
if(!n[0].id){n[0].id=CommonHelper.uniqid();}
this.m_window=new ControlContainer(n[0].id,"DIV",{"className":"panel panel-default windowMessage"+((mw_class!="")?" "+mw_class:""),"attrs":mw_overlap?{"style":win_style}:null});var head=new ControlContainer(this.ID+":head","DIV",{});var head_cont=new ControlContainer(this.ID+":head-cont","DIV");head_cont.addElement(new ButtonCtrl(this.ID+":close",{"title":"закрыть","glyph":"glyphicon-remove","onClick":function(){self.m_messages=[];self.delDOM();}}));head.addElement(head_cont);this.m_content=new ControlContainer(this.ID+":content","DIV");var body=new ControlContainer(this.ID+":body","DIV",{});body.addElement(this.m_content);this.m_window.addElement(head);this.m_window.addElement(body);}
else if(mw_overlap){this.m_window.getNode().style=win_style;}
this.m_window.setVisible(true);if(!mw_overlap){this.setWinDataClass(mw_col);}
this.m_content.delDOM();this.m_content.clear();var t=0;for(var i=this.m_messages.length-1;i>=0;i--){var item_class="message-item alert alert-"+this.m_messages[i].message_type;item_class+=(i==this.m_messages.length-1)?" flashit":"";var cont=new ControlContainer(this.m_messages[i].id,"P",{"className":item_class});if(i==this.m_messages.length-1){this.m_flashCont=cont;try{setTimeout(function(){DOMHelper.delClass(self.m_flashCont.getNode(),"flashit");},this.m_flashTime);}
catch(e){}}
cont.addElement(new Control(this.m_messages[i].id+":head","DIV",{"value":DateHelper.format(this.m_messages[i].date_time,"H:i:s")}));cont.addElement(new ControlContainer(this.m_messages[i].id+":title","DIV",(typeof(this.m_messages[i].content)=="string")?{"value":this.m_messages[i].content}:this.m_messages[i].content));this.m_content.addElement(cont);t++;}
this.m_window.setClassName("panel panel-default windowMessage "+mw_class);this.m_window.toDOM();};WindowMessage.prototype.getMessageWindowCol=function(mesWindStyle){var col=parseInt(mesWindStyle.win_width,10);if(!col){col=1;}
return Math.ceil(col*12/100);}
WindowMessage.prototype.setWinDataClass=function(mwCol){var dwin=document.getElementById("windowData");if(dwin){DOMHelper.setAttr(dwin,"class",window.getBsCol(12-mwCol));}}
WindowMessage.prototype.delDOM=function(){if(this.m_window){this.m_window.setVisible(false);var mw_st=window.getApp().getWinMessageStyle();if(mw_st.win_position=="stick"){this.setWinDataClass(0);}}} 
function WindowTempMessage(options){options=options||{}
this.m_messages=[];this.m_flashTime=options.flashTime||this.FLASH_TIME;this.m_timeout=options.timeout||this.TIMEOUT;this.m_margin=options.margin||this.MARGIN;this.m_width=options.width||this.WIDTH;this.m_interval=options.interval||this.INTERVAL;}
WindowTempMessage.prototype.TP_ER="danger";WindowTempMessage.prototype.TP_WARN="warning";WindowTempMessage.prototype.TP_INFO="info";WindowTempMessage.prototype.TP_OK="success";WindowTempMessage.prototype.FLASH_TIME=1000;WindowTempMessage.prototype.TIMEOUT=1000*10;WindowTempMessage.prototype.MARGIN="50";WindowTempMessage.prototype.WIDTH="300px";WindowTempMessage.prototype.INTERVAL="10";WindowTempMessage.prototype.show=function(options){options=options||{};options.type=options.type||this.TP_INFO;var item_class="hidden message-item alert flashit alert-"+options.type;var mes_id;var self=this;var last_top,last_left,deleted_top,deleted_left,last_height,last_width;for(id in this.m_messages){if(this.m_messages[id]){last_top=this.m_messages[id].top;last_left=this.m_messages[id].left;last_height=this.m_messages[id].height;last_width=this.m_messages[id].width;}
else if(!mes_id){mes_id=this.m_messages[id].control.getId();deleted_top=this.m_messages[id].top;deleted_left=this.m_messages[id].left;}}
mes_id=mes_id?mes_id:CommonHelper.uniqid();this.m_messages[mes_id]={"callBack":options.callBack};this.m_messages[mes_id].control=new ControlContainer(mes_id,"DIV",{"className":item_class,"attrs":{"style":"position:fixed;display:block;z-index:9999;width:"+(options.width||this.m_width)},"elements":[new Control(mes_id+":head","DIV",{"attrs":{"type":"button","class":"close","aria-hidden":"true","messageid":mes_id},"value":"×","events":{"click":options.onClickCancel||function(e){self.close(e.target.getAttribute("messageid"));}}}),new ControlContainer(mes_id+":title","DIV",(typeof(options.content)=="string")?{"value":options.content}:options.content)]});this.m_messages[mes_id].control.toDOM(document.body);var n=this.m_messages[mes_id].control.getNode();var top,left;if(!last_top){left=document.documentElement.clientWidth-n.offsetWidth-(options.margin||this.m_margin);top=document.documentElement.clientHeight-n.offsetHeight-(options.margin||this.m_margin);}
else{var top=last_top-this.m_interval-last_height;var left=last_left;if(top<document.documentElement.clientHeight/2){top=document.documentElement.clientHeight-n.offsetHeight-(options.margin||this.m_margin);left=last_left-this.m_interval-last_width;if(!left){top=deleted_top;left=deleted_left;}}}
n.style.top=top+"px";n.style.left=left+"px";this.m_messages[mes_id].top=top;this.m_messages[mes_id].height=n.offsetHeight;this.m_messages[mes_id].left=left;this.m_messages[mes_id].width=n.offsetWidth;try{this.m_messages[mes_id].flashTmerId=setTimeout(function(mesId){self.stopFlash(mesId);},(options.flashTime||this.m_flashTime),mes_id);this.m_messages[mes_id].timerId=setTimeout(function(mesId){self.close(mesId);},(options.timeout||this.m_timeout),mes_id);}
catch(e){}
DOMHelper.show(n);}
WindowTempMessage.prototype.stopFlash=function(mesId){if(this.m_messages[mesId]){DOMHelper.delClass(this.m_messages[mesId].control.getNode(),"flashit");}}
WindowTempMessage.prototype.close=function(mesId){if(this.m_messages[mesId]){if(this.m_messages[mesId].flashTmerId)clearTimeout(this.m_messages[mesId].flashTmerId);if(this.m_messages[mesId].timerId)clearTimeout(this.m_messages[mesId].timerId);if(this.m_messages[mesId].control){var self=this;$(this.m_messages[mesId].control.getNode()).fadeOut("slow",function(){self.deleteObj(mesId);});}}}
WindowTempMessage.prototype.deleteObj=function(mesId){if(this.m_messages&&this.m_messages[mesId]){if(this.m_messages[mesId].control){this.m_messages[mesId].control.delDOM();delete this.m_messages[mesId].control;}
if(this.m_messages[mesId].callBack)this.m_messages[mesId].callBack();delete this.m_messages[mesId];}} 
function GridCellHeadDOCProcessed(id,options){options=options||{};options.value=" ",options.className=window.getBsCol(1),options.columns=[new GridColumn("processed",{"field":options.model.getField("processed"),"assocClassList":{"true":"glyphicon glyphicon-check","false":"glyphicon glyphicon-unchecked"}})];GridCellHeadDOCProcessed.superclass.constructor.call(this,id,options);}
extend(GridCellHeadDOCProcessed,GridCellHead); 
function GridCellHeadDOCDate(id,options){options=options||{};options.value="Дата",options.sortable=true;options.sort="asc";options.columns=[new GridColumnDate({"field":options.model.getField("date_time"),"dateFormat":window.getApp().getJournalDateFormat(),"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})];GridCellHeadDOCDate.superclass.constructor.call(this,id,options);}
extend(GridCellHeadDOCDate,GridCellHead); 
function GridCellHeadDOCNumber(id,options){options=options||{};options.value="Номер",options.sortable=true;options.columns=[new GridColumn({"field":options.model.getField("number")})];GridCellHeadDOCNumber.superclass.constructor.call(this,id,options);}
extend(GridCellHeadDOCNumber,GridCellHead); 
function stopEvent(evt){evt||window.event;if(evt.stopPropagation){evt.stopPropagation();evt.preventDefault();}else if(typeof evt.cancelBubble!="undefined"){evt.cancelBubble=true;evt.returnValue=false;}
return false;}
function getElement(evt){if(window.event){return window.event.srcElement;}else{return evt.currentTarget;}}
function stopSelect(obj){if(typeof obj.onselectstart!='undefined'){EventHelper.add(obj,"selectstart",function(){return false;});}}
function getCaretEnd(obj,winDocum){if(typeof obj.selectionEnd!="undefined"){return obj.selectionEnd;}else if(winDocum.selection&&winDocum.selection.createRange){var M=winDocum.selection.createRange();try{var Lp=M.duplicate();Lp.moveToElementText(obj);}catch(e){var Lp=obj.createTextRange();}
Lp.setEndPoint("EndToEnd",M);var rb=Lp.text.length;if(rb>obj.value.length){return-1;}
return rb;}}
function getCaretStart(obj,winDocum){if(typeof obj.selectionStart!="undefined"){return obj.selectionStart;}else if(winDocum.selection&&winDocum.selection.createRange){var M=winDocum.selection.createRange();try{var Lp=M.duplicate();Lp.moveToElementText(obj);}catch(e){var Lp=obj.createTextRange();}
Lp.setEndPoint("EndToStart",M);var rb=Lp.text.length;if(rb>obj.value.length){return-1;}
return rb;}}
function setCaret(obj,l){obj.focus();if(obj.setSelectionRange){obj.setSelectionRange(l,l);}else if(obj.createTextRange){m=obj.createTextRange();m.moveStart('character',l);m.collapse();m.select();}}
function setSelection(obj,s,e){obj.focus();if(obj.setSelectionRange){obj.setSelectionRange(s,e);}else if(obj.createTextRange){m=obj.createTextRange();m.moveStart('character',s);m.moveEnd('character',e);m.select();}}
String.prototype.addslashes=function(){return this.replace(/(["\\\.\|\[\]\^\*\+\?\$\(\)])/g,'\\$1');}
String.prototype.trim=function(){return this.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1");};function replaceHTML(obj,text,winDocum){while(el=obj.childNodes[0]){obj.removeChild(el);};obj.appendChild(winDocum.createTextNode(text));}
function actbAJX(options){options=options||{};this.setMinLengthForQuery((options.minLengthForQuery!=undefined)?options.minLengthForQuery:this.MIN_LEN_FOR_QUERY);this.setOnSelect(options.onSelect);this.setPatternFieldId(options.patternFieldId||this.DEF_PATTERN_FIELD);this.setPublicMethod(options.publicMethod);this.setModel(options.model);this.setControl(options.control);this.setKeyFields(options.keyFields);this.setDescrFields(options.descrFields);this.setDescrFunction(options.descrFunction);this.setIc(options.icase||this.DEF_IC);this.setMid(options.mid||this.DEF_MID);this.setCount(options.count);this.m_onBeforeSendQuery=options.onBeforeSendQuery;this.m_onSendQueryResult=options.onSendQueryResult;this.m_resultFieldIdsToAttr=options.resultFieldIdsToAttr;this.m_onCompleteTextOut=options.onCompleteTextOut;this.m_servQueryTimeout=options.servQueryTimeout||this.DEF_SERV_QUERY_TIMEOUT;this.setEnabled((options.enabled!=undefined)?options.enabled:true);}
actbAJX.prototype.DEF_PATTERN_FIELD="pattern";actbAJX.prototype.MIN_LEN_FOR_QUERY=4;actbAJX.prototype.DEF_SERV_QUERY_TIMEOUT=2000;actbAJX.prototype.DEF_IC="1";actbAJX.prototype.DEF_MID="0";actbAJX.prototype.m_minLengthForQuery;actbAJX.prototype.m_ic;actbAJX.prototype.m_mid;actbAJX.prototype.m_count;actbAJX.prototype.m_countSend;actbAJX.prototype.m_patternFieldId;actbAJX.prototype.m_publicMethod;actbAJX.prototype.m_model;actbAJX.prototype.m_control;actbAJX.prototype.m_queryActive;actbAJX.prototype.m_servQueryTimeout;actbAJX.prototype.m_keyFields;actbAJX.prototype.m_descrFields;actbAJX.prototype.m_descrFunction;actbAJX.prototype.m_onBeforeSendQuery;actbAJX.prototype.m_onSendQueryResult;actbAJX.prototype.fillArrayOnPattern=function(inputNode){if(!this.getEnabled()||(this.m_queryActive&&((new Date).getTime()-this.m_queryActiveTime)<this.m_servQueryTimeout)){return;}
var currValue=inputNode.value;if(this.m_control.resetKeys){this.m_control.resetKeys();}
this.m_keywords=[];this.m_keywordKeys=[];if(this.m_resultFieldIdsToAttr){this.m_resultFieldsToAttr=[];}
if(currValue.length<this.getMinLengthForQuery()){this.onFillArrayEnd();return;}
if(this.m_onBeforeSendQuery&&!this.m_onBeforeSendQuery()){return;}
var pm=this.getPublicMethod();var contr=pm.getController();pm.setFieldValue(this.getPatternFieldId(),inputNode.value);pm.setFieldValue(contr.PARAM_IC,this.getIc());pm.setFieldValue(contr.PARAM_MID,this.getMid());var cnt=this.getCount();if(cnt){if(this.m_countSend){pm.setFieldValue(contr.PARAM_COUNT,cnt);}else{pm.unsetFieldValue(contr.PARAM_COUNT);}}
this.m_queryActive=true;this.m_queryActiveTime=(new Date).getTime();var self=this;pm.run({"async":"true","ok":function(resp){if(self.onSendQueryResult){self.onSendQueryResult(resp);}
self.onGetData(resp);},"fail":function(resp,errCode,errStr){window.showError(window.getApp().formatError(errCode,errStr));},"all":function(){self.m_queryActive=false;}});}
actbAJX.prototype.onGetData=function(resp){if(resp.modelExists(this.m_model.getId())){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
else{throw new Error(CommonHelper.format(this.ER_NO_MODEL,Array(this.m_model.getId())));}
var ctrl_key_ids;if(this.m_control.getKeyIds){ctrl_key_ids=this.m_control.getKeyIds();}
while(this.m_model.getNextRow()){var res_val="";var key_attrs;if(this.m_resultFieldIdsToAttr){key_attrs=[];}
if(this.m_descrFunction){res_val=this.m_descrFunction.call(this,this.m_model.getFields());}
else{for(var fid in this.m_descrFields){res_val+=(res_val)?" ":"";var f_val=this.m_descrFields[fid].getValue();if(typeof f_val=="object"&&f_val.getDescr){res_val+=f_val.getDescr();}
else if(!this.m_descrFields[fid].isNull()&&this.m_descrFields[fid].isSet()){res_val+=f_val;}}}
var keys={};for(var fn=0;fn<this.m_keyFields.length;fn++){if(ctrl_key_ids)
keys[ctrl_key_ids[fn]]=this.m_keyFields[fn].getValue();}
if(this.m_resultFieldIdsToAttr){for(var rfi=0;rfi<this.m_resultFieldIdsToAttr.length;rfi++){key_attrs.push({"attr":this.m_resultFieldIdsToAttr[rfi],"val":this.m_model.getFieldValue(this.m_resultFieldIdsToAttr[rfi])});}}
this.m_keywordKeys.push(keys);this.m_keywords.push(res_val);if(this.m_resultFieldIdsToAttr){this.m_resultFieldsToAttr.push(key_attrs);}}
this.onFillArrayEnd();}
actbAJX.prototype.onSelected=function(wordPos,node){if(this.m_control&&this.m_control.getIsRef())
this.m_control.setKeys(this.m_keywordKeys[wordPos]);if(this.m_onSelect){this.m_model.getRow(wordPos);this.m_control.onSelectValue(this.m_model.getFields());}}
actbAJX.prototype.getMinLengthForQuery=function(){return this.m_minLengthForQuery;}
actbAJX.prototype.setMinLengthForQuery=function(v){this.m_minLengthForQuery=v;}
actbAJX.prototype.getIc=function(){return this.m_ic;}
actbAJX.prototype.setIc=function(v){this.m_ic=v;}
actbAJX.prototype.getMid=function(){return this.m_mid;}
actbAJX.prototype.setMid=function(v){this.m_mid=v;}
actbAJX.prototype.getCount=function(){return this.m_count;}
actbAJX.prototype.setCount=function(v){this.m_count=v;this.m_countSend=(v?true:false);}
actbAJX.prototype.getEnabled=function(){return this.m_enabled;}
actbAJX.prototype.setEnabled=function(v){this.m_enabled=v;}
actbAJX.prototype.setOnSelect=function(v){this.m_onSelect=v;}
actbAJX.prototype.getOnSelect=function(){return this.m_onSelect;}
actbAJX.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
actbAJX.prototype.getPublicMethod=function(){return this.m_publicMethod;}
actbAJX.prototype.setPatternFieldId=function(v){this.m_patternFieldId=v;}
actbAJX.prototype.getPatternFieldId=function(){return this.m_patternFieldId;}
actbAJX.prototype.setModel=function(v){this.m_model=v;}
actbAJX.prototype.getModel=function(){return this.m_model;}
actbAJX.prototype.setControl=function(v){this.m_control=v;}
actbAJX.prototype.getControl=function(){return this.m_control;}
actbAJX.prototype.setDescrFields=function(v){this.m_descrFields=v;}
actbAJX.prototype.getDescrFields=function(){return this.m_descrFields;}
actbAJX.prototype.setDescrFunction=function(v){this.m_descrFunction=v;}
actbAJX.prototype.getDescrFunction=function(){return this.m_descrFunction;}
actbAJX.prototype.setKeyFields=function(v){this.m_keyFields=v;}
actbAJX.prototype.getKeyFields=function(){return this.m_keyFields;}
function actb(obj,winObj,servConnect){var winDocum=(winObj==undefined)?window.document:(winObj.getWindowForm==undefined)?window.document:winObj.getWindowForm().document;var obj=typeof(obj)=="string"?CommonHelper.nd(obj,winDocum):obj;if(obj==null){alert("Error:ctrl {"+obj+"} does not exist!");return false;}
if(servConnect){var ajxCon=servConnect;var slef=this;ajxCon.onFillArrayEnd=function(){_actb_tocomplete();if(!actb_display){actb_generate();actb_display=true;}}
ajxCon.delDOM=function(){if(winDocum.getElementById('tat_table')){winDocum.body.removeChild(winDocum.getElementById('tat_table'));}
if(actb_toid)clearTimeout(actb_toid);}}
this.actb_timeOut=-1;this.actb_lim=4;this.actb_firstText=false;this.actb_mouse=true;this.actb_delimiter=new Array(';',',',' ');this.actb_startcheck=1;this.actb_bgColor='#888888';this.actb_textColor='#FFFFFF';this.actb_hColor='#000000';this.actb_fFamily='Verdana';this.actb_fSize='11px';this.actb_hStyle='text-decoration:underline;font-weight="bold"';var actb_delimwords=new Array();var actb_cdelimword=0;var actb_delimchar=new Array();var actb_display=false;var actb_pos=0;var actb_total=0;var actb_curr=null;var actb_rangeu=0;var actb_ranged=0;var actb_bool=new Array();var actb_pre=0;var actb_toid;var actb_tomake=false;var actb_getpre="";var actb_mouse_on_list=1;var actb_kwcount=0;var actb_caretmove=false;this.actb_keywords=[];var actb_self=this;actb_curr=obj;actb_curr.setAttribute("autocomplete","off");EventHelper.add(actb_curr,"focus",function(){EventHelper.add(winDocum,"keydown",actb_checkkey,false);EventHelper.add(winDocum,"keypress",actb_keypress,false);if(DOMHelper.hasClass(actb_curr,"null-ref")||(ajxCon&&ajxCon.getControl().getIsRef()&&ajxCon.getControl().isNull())){DOMHelper.delClass(actb_curr,"null-ref");actb_generate();}
if(ajxCon&&!ajxCon.getMinLengthForQuery()&&!actb_curr.value.length){actb_display=true;ajxCon.fillArrayOnPattern(actb_curr);}},false);EventHelper.add(actb_curr,"blur",function(){removeWinEvents();if(actb_curr.value.length&&servConnect&&servConnect.getControl().getIsRef()&&servConnect.getControl().isNull()){DOMHelper.addClass(actb_curr,"null-ref");}
actb_removedisp();},false);function removeWinEvents(){EventHelper.del(winDocum,"keydown",actb_checkkey,false);EventHelper.del(winDocum,"keypress",actb_keypress,false);}
function actb_parse(n){if(actb_self.actb_delimiter.length>0){var t=actb_delimwords[actb_cdelimword].trim().addslashes();var plen=actb_delimwords[actb_cdelimword].trim().length;}else{var t=actb_curr.value.addslashes();var plen=actb_curr.value.length;}
var tobuild='';var i;if(actb_self.actb_firstText){var re=new RegExp("^"+t,"i");}else{var re=new RegExp(t,"i");}
var p=n.search(re);for(i=0;i<p;i++){tobuild+=n.substr(i,1);}
tobuild+="<font style='"+(actb_self.actb_hStyle)+"'>"
for(i=p;i<plen+p;i++){tobuild+=n.substr(i,1);}
tobuild+="</font>";for(i=plen+p;i<n.length;i++){tobuild+=n.substr(i,1);}
return tobuild;}
function unfocus_cur_table(){var tables=winDocum.getElementsByTagName("table");if(tables&&tables.length){for(var i=0;i<tables.length;i++){if(DOMHelper.hasClass(tables[i],"focused")){DOMHelper.delClass(tables[i],"focused");break;}}}}
function actb_generate(){var node=CommonHelper.nd('tat_table',winDocum);if(node){actb_display=false;node.parentNode.removeChild(node);}
if(actb_kwcount==0){actb_display=false;return;}
unfocus_cur_table();var a_cont=winDocum.createElement("UL");a_cont.id="tat_table";a_cont.className="dropdown-menu";a_cont.style.position="absolute";a_cont.style.zIndex="99999";a_cont.style.top=($(actb_curr).offset().top+$(actb_curr).outerHeight())+"px";a_cont.style.left=$(actb_curr).offset().left+"px";a_cont.style["overflow-y"]="scroll";if(ajxCon&&ajxCon.getCount()&&!ajxCon.m_countSend&&ajxCon.m_listMaxHeight){a_cont.style["max-height"]=ajxCon.m_listMaxHeight+"px";}
a_cont.style.display="block";a=winDocum.createElement("LI");var i;var first=true;var j=1;if(actb_self.actb_mouse){a.onmouseout=actb_table_unfocus;a.onmouseover=actb_table_focus;}
var counter=0;for(i=0;i<actb_self.actb_keywords.length;i++){var c;if(actb_bool[i]){counter++;var ref_cl="autoComplete";if(first&&!actb_tomake){first=false;actb_pos=counter;ref_cl=ref_cl+" acCurrent";}else if(actb_pre==i){first=false;actb_pos=counter;}
c=winDocum.createElement("A");c.setAttribute("href","#");if(ref_cl){c.setAttribute("class",ref_cl);}
var ac_html=actb_parse(actb_self.actb_keywords[i]);if(ajxCon){if(ajxCon.m_resultFieldIdsToAttr&&ajxCon.m_resultFieldsToAttr&&ajxCon.m_resultFieldsToAttr[i]){for(attr_i=0;attr_i<ajxCon.m_resultFieldsToAttr[i].length;attr_i++){c.setAttribute(ajxCon.m_resultFieldsToAttr[i][attr_i].attr,ajxCon.m_resultFieldsToAttr[i][attr_i].val);}}
if(ajxCon.m_onCompleteTextOut){var r;if(ajxCon.getModel().getRow(i)){r=ajxCon.getModel().getFields();}
ac_html=ajxCon.m_onCompleteTextOut(ac_html,r);}}
c.innerHTML=ac_html;c.id='tat_td'+(j);c.setAttribute('pos',j);if(actb_self.actb_mouse){c.style.cursor='pointer';c.onclick=actb_mouseclick;}
j++;a.appendChild(c);}}
if(ajxCon){var cnt=ajxCon.getCount();if(cnt&&ajxCon.m_countSend&&counter==cnt){var txt=winDocum.createElement("DIV");txt.setAttribute("class","text-muted text-center acFetchMore");txt.setAttribute("title",actbAJX.prototype.FETCH_TITLE);txt.textContent=actbAJX.prototype.FETCH_LABEL;txt.onclick=(function(conn){return function(){var cont=document.getElementById("tat_table");conn.m_listMaxHeight=cont.offsetHeight;cont.style.maxHeight=(conn.m_listMaxHeight+"px");conn.m_countSend=false;conn.fillArrayOnPattern(actb_curr);}})(ajxCon)
a.appendChild(txt);}}
a_cont.appendChild(a);winDocum.body.appendChild(a_cont);actb_rangeu=1;actb_ranged=j-1;actb_display=true;if(actb_pos<=0)actb_pos=1;}
function actb_remake(){actb_generate();return;}
function actb_goup(){if(!actb_display)return;if(actb_pos==1)return;DOMHelper.delClass(winDocum.getElementById("tat_td"+actb_pos),"acCurrent");actb_pos--;if(actb_pos<actb_rangeu)actb_moveup();DOMHelper.addClass(winDocum.getElementById("tat_td"+actb_pos),"acCurrent");if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_godown(){if(!actb_display)return;if(actb_pos==actb_total)return;var nd=winDocum.getElementById("tat_td"+actb_pos);DOMHelper.delClass(nd,"acCurrent");actb_pos++;if(actb_pos>actb_ranged)actb_movedown();DOMHelper.addClass(winDocum.getElementById("tat_td"+actb_pos),"acCurrent");if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_movedown(){actb_rangeu++;actb_ranged++;actb_remake();}
function actb_moveup(){actb_rangeu--;actb_ranged--;actb_remake();}
function actb_mouseclick(evt){evt=EventHelper.fixKeyEvent(evt);if(evt.preventDefault){evt.preventDefault();}
evt.stopPropagation();if(!actb_display)return;actb_mouse_on_list=0;actb_pos=this.getAttribute('pos');actb_penter();}
function actb_table_focus(){actb_mouse_on_list=1;}
function actb_table_unfocus(){actb_mouse_on_list=0;if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_table_highlight(){actb_mouse_on_list=1;actb_pos=this.getAttribute('pos');while(actb_pos<actb_rangeu)actb_moveup();while(actb_pos>actb_ranged)actb_movedown();if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_insertword(a,wPos){actb_curr.value=a;actb_curr.focus();if(ajxCon){ajxCon.onSelected(wPos,actb_curr);removeWinEvents();}
actb_mouse_on_list=0;actb_removedisp();}
function actb_penter(evt){if(!actb_display)return;actb_display=false;var word='';var c=0;var w_pos;for(w_pos=0;w_pos<=actb_self.actb_keywords.length;w_pos++){if(actb_bool[w_pos])c++;if(c==actb_pos){word=actb_self.actb_keywords[w_pos];break;}}
actb_insertword(word,w_pos);l=getCaretStart(actb_curr,winDocum);}
function actb_removedisp(){if(actb_mouse_on_list==0){actb_display=0;if(winDocum.getElementById('tat_table')){winDocum.body.removeChild(winDocum.getElementById('tat_table'));}
if(actb_toid)clearTimeout(actb_toid);}}
function actb_keypress(e){if(ajxCon&&ajxCon.m_count&&!ajxCon.m_countSend){ajxCon.m_countSend=true;}
if(actb_caretmove)stopEvent(e);return!actb_caretmove;}
function actb_checkkey(evt){if(!evt)evt=event;a=evt.keyCode;caret_pos_start=getCaretStart(actb_curr,winDocum);actb_caretmove=0;switch(a){case 38:actb_goup();actb_caretmove=1;return false;break;case 40:actb_godown();actb_caretmove=1;return false;break;case 13:case 9:if(actb_display){actb_caretmove=1;actb_penter(evt);return false;}else{return true;}
break;case 8:case 46:if(ajxCon!=undefined&&actb_curr.value!=""){ajxCon.fillArrayOnPattern(actb_curr);}
return true;default:setTimeout(function(){actb_tocomplete(a)},50);break;}}
function actb_tocomplete(kc){if(kc<46)return;if(ajxCon!=undefined&&actb_curr.value!=""){ajxCon.fillArrayOnPattern(actb_curr);}
_actb_tocomplete();}
function _actb_tocomplete(){if(ajxCon&&!ajxCon.getEnabled())return;if(ajxCon!=undefined&&(!ajxCon.getMinLengthForQuery()||(actb_curr.value!=""&&ajxCon.getMinLengthForQuery()))){actb_keywords=ajxCon.m_keywords;}
var i;if(actb_display){var word=0;var c=0;for(var i=0;i<=actb_self.actb_keywords.length;i++){if(actb_bool[i])c++;if(c==actb_pos){word=i;break;}}
actb_pre=word;}
else{actb_pre=-1};if(actb_curr.value==""&&(!ajxCon||ajxCon.getMinLengthForQuery())){actb_mouse_on_list=0;actb_removedisp();return;}
if(actb_self.actb_delimiter.length>0){caret_pos_start=getCaretStart(actb_curr,winDocum);caret_pos_end=getCaretEnd(actb_curr,winDocum);delim_split='';for(i=0;i<actb_self.actb_delimiter.length;i++){delim_split+=actb_self.actb_delimiter[i];}
delim_split=delim_split.addslashes();delim_split_rx=new RegExp("(["+delim_split+"])");c=0;actb_delimwords=new Array();actb_delimwords[0]='';for(i=0,j=actb_curr.value.length;i<actb_curr.value.length;i++,j--){if(actb_curr.value.substr(i,j).search(delim_split_rx)==0){ma=actb_curr.value.substr(i,j).match(delim_split_rx);actb_delimchar[c]=ma[1];c++;actb_delimwords[c]='';}else{actb_delimwords[c]+=actb_curr.value.charAt(i);}}
var l=0;actb_cdelimword=-1;for(i=0;i<actb_delimwords.length;i++){if(caret_pos_end>=l&&caret_pos_end<=l+actb_delimwords[i].length){actb_cdelimword=i;}
l+=actb_delimwords[i].length+1;}
var ot=actb_delimwords[actb_cdelimword].trim();var t=actb_delimwords[actb_cdelimword].addslashes().trim();}else{var ot=actb_curr.value;var t=actb_curr.value.addslashes();}
if(ot.length==0&&(!ajxCon||ajxCon.getMinLengthForQuery())){actb_mouse_on_list=0;actb_removedisp();}
if(ot.length<((ajxCon!=undefined)?ajxCon.getMinLengthForQuery():actb_self.actb_startcheck))return this;if(actb_self.actb_firstText){var re=new RegExp("^"+t,"i");}else{var re=new RegExp(t,"i");}
actb_total=0;actb_tomake=false;actb_kwcount=0;if(actb_self.actb_keywords){for(i=0;i<actb_self.actb_keywords.length;i++){actb_bool[i]=false;if(re.test(actb_self.actb_keywords[i])){actb_total++;actb_bool[i]=true;actb_kwcount++;if(actb_pre==i)actb_tomake=true;}}
if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);actb_generate();}}
return this;} 
actbAJX.prototype.ER_NO_MODEL="Модель % не найдена в ответе сервера.";actbAJX.prototype.ER_NOT_SELECTED="Значение не выбрано.";actbAJX.prototype.FETCH_LABEL="Показать больше";actbAJX.prototype.FETCH_TITLE="Показать больше строк"; 
function RepCommands(id,options){options=options||{};options.attrs=options.attrs||{};options.className=options.className||options.attrs["class"]||this.DEF_CLASS_NAME;RepCommands.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);options.cmdMake=(options.cmdMake!=undefined)?options.cmdMake:true;options.cmdPrint=(options.cmdPrint!=undefined)?options.cmdPrint:true;options.cmdFilter=(options.cmdFilter!=undefined)?options.cmdFilter:true;options.cmdFilterSave=(options.cmdFilterSave!=undefined)?options.cmdFilterSave:(options.variantStorage!=undefined);options.cmdFilterOpen=(options.cmdFilterOpen!=undefined)?options.cmdFilterOpen:(options.variantStorage!=undefined);options.cmdExcel=(options.cmdExcel!=undefined)?options.cmdExcel:false;options.cmdPdf=(options.cmdPdf!=undefined)?options.cmdPdf:false;options.variantStorage=options.variantStorage||{};var self=this;if(options.cmdMake){this.setCmdMake((typeof(options.cmdMake)=="object")?options.cmdMake:new GridCmd(id+":make",{"onCommand":options.onReport,"caption":this.BTN_MAKE_CAP,"title":this.BTN_MAKE_TITLE}));}
if(options.cmdFilter){if(options.cmdFilterSave){this.setCmdFilterSave((typeof(options.cmdFilterSave)=="object")?options.cmdFilterSave:new GridCmdFilterSave(id+":filterSave",{"variantStorageName":options.variantStorage.name,"dataCol":"filter_data"}));}
if(options.cmdFilterOpen){this.setCmdFilterOpen((typeof(options.cmdFilterOpen)=="object")?options.cmdFilterOpen:new GridCmdFilterOpen(id+":filterOpen",{"variantStorageName":options.variantStorage.name,"dataCol":"filter_data"}));}
this.setCmdFilter((typeof(options.cmdFilter)=="object")?options.cmdFilter:new GridCmdFilter(id+":filter",{"filters":options.filters,"controlSave":this.getCmdFilterSave(),"controlOpen":this.getCmdFilterOpen(),"variantStorageModel":options.variantStorage.model}));this.getCmdFilter().unserializeFilters();}
if(options.cmdPrint){this.setCmdPrint((typeof(options.cmdPrint)=="object")?options.cmdPrint:new GridCmd(id+":print",{"glyph":"glyphicon-print","onCommand":options.onPrint,"title":this.BTN_PRINT_TITLE}));this.getCmdPrint().getControl().setEnabled(false);}
if(options.cmdExcel){this.setCmdExcel((typeof(options.cmdExcel)=="object")?options.cmdExcel:new GridCmd(id+":excel",{"glyph":"glyphicon-save-file","onCommand":options.onExcel,"title":this.BTN_EXCEL_TITLE}));this.getCmdExcel().getControl().setEnabled(false);}
if(options.cmdPdf){this.setCmdPdf((typeof(options.cmdPdf)=="object")?options.cmdPdf:new GridCmd(id+":pdf",{"glyph":"glyphicon-save-file","onCommand":options.onPdf,"title":this.BTN_PDF_TITLE}));this.getCmdPdf().getControl().setEnabled(false);}
this.m_commands=options.commands||[];this.addControls();}
extend(RepCommands,ControlContainer);RepCommands.prototype.DEF_TAG_NAME="div";RepCommands.prototype.DEF_CLASS_NAME="cmdButtons";RepCommands.prototype.m_cmdMake;RepCommands.prototype.m_cmdPrint;RepCommands.prototype.m_cmdExcel;RepCommands.prototype.m_cmdPdf;RepCommands.prototype.m_cmdFilter;RepCommands.prototype.m_cmdFilterOpen;RepCommands.prototype.m_cmdFilterSave;RepCommands.prototype.m_commands;RepCommands.prototype.addCommands=function(){if(this.m_cmdMake){this.m_commands.push(this.m_cmdMake);}
if(this.m_cmdPrint){this.m_commands.push(this.m_cmdPrint);}
if(this.m_cmdExcel){this.m_commands.push(this.m_cmdExcel);}
if(this.m_cmdPdf){this.m_commands.push(this.m_cmdPdf);}
if(this.m_cmdFilter){this.m_commands.push(this.m_cmdFilter);}
if(this.m_cmdFilterSave){this.m_commands.push(this.m_cmdFilterSave);}
if(this.m_cmdFilterOpen){this.m_commands.push(this.m_cmdFilterOpen);}}
RepCommands.prototype.addControls=function(){this.addCommands();for(var i=0;i<this.m_commands.length;i++){if(this.m_commands[i].getShowCmdControl()){this.m_commands[i].controlsToContainer(this);}}}
RepCommands.prototype.getCmdMake=function(){return this.m_cmdMake;}
RepCommands.prototype.setCmdMake=function(v){this.m_cmdMake=v;}
RepCommands.prototype.getCmdExcel=function(){return this.m_cmdExcel;}
RepCommands.prototype.setCmdExcel=function(v){this.m_cmdExcel=v;}
RepCommands.prototype.getCmdPdf=function(){return this.m_cmdPdf;}
RepCommands.prototype.setCmdPdf=function(v){this.m_cmdPdf=v;}
RepCommands.prototype.getCmdPrint=function(){return this.m_cmdPrint;}
RepCommands.prototype.setCmdPrint=function(v){this.m_cmdPrint=v;}
RepCommands.prototype.getCmdFilter=function(){return this.m_cmdFilter;}
RepCommands.prototype.setCmdFilter=function(v){this.m_cmdFilter=v;}
RepCommands.prototype.getCmdFilterSave=function(){return this.m_cmdFilterSave;}
RepCommands.prototype.setCmdFilterSave=function(v){this.m_cmdFilterSave=v;}
RepCommands.prototype.getCmdFilterOpen=function(){return this.m_cmdFilterOpen;}
RepCommands.prototype.setCmdFilterOpen=function(v){this.m_cmdFilterOpen=v;}
RepCommands.prototype.delDOM=function(){for(var i=0;i<this.m_commands.length;i++){this.m_commands[i].onDelDOM();}
RepCommands.superclass.delDOM.call(this);} 
RepCommands.prototype.BTN_MAKE_CAP="Сформировать";RepCommands.prototype.BTN_MAKE_TITLE="Сформировать отчет";RepCommands.prototype.BTN_PRINT_CAP="Печать";RepCommands.prototype.BTN_PRINT_TITLE="Напечатать отчет";RepCommands.prototype.BTN_EXCEL_CAP="Excel";RepCommands.prototype.BTN_EXCEL_TITLE="Экспорт отчета в excel";RepCommands.prototype.BTN_PDF_CAP="PDF";RepCommands.prototype.BTN_PDF_TITLE="Экспорт отчета в pdf";RepCommands.prototype.BTN_FILTER_CAP="Параметры";RepCommands.prototype.BTN_FILTER_TITLE="Показать/скрыть параметры отчета"; 
function ViewReport(id,options){options=options||{};options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE=this.HEAD_TITLE;ViewReport.superclass.constructor.call(this,id,"DIV",options);this.setPublicMethod(options.publicMethod);this.setReportViewId(options.reportViewId);this.setExcelViewId(options.excelViewId||this.DEF_EXCEL_VIEW);this.setPdfViewId(options.pdfViewId||this.DEF_PDF_VIEW);this.setTemplateId(options.templateId);this.setReportControl(options.reportControl||new Control(id+":report","DIV",{}));this.m_retContentType=options.retContentType||"text";var self=this;var def_cmd_opts={"cmdMake":options.cmdMake,"cmdPrint":options.cmdPrint,"cmdFilter":options.cmdFilter,"cmdExcel":options.cmdExcel,"cmdPdf":options.cmdPdf,"filters":options.filters};if(def_cmd_opts.cmdMake)def_cmd_opts.onReport=function(){self.onReport();};if(def_cmd_opts.cmdPrint)def_cmd_opts.onPrint=function(){self.onPrint();};if(def_cmd_opts.cmdExcel)def_cmd_opts.onExcel=function(){self.onExcel();};if(def_cmd_opts.cmdPdf)def_cmd_opts.onPdf=function(){self.onPdf();};def_cmd_opts.variantStorage=options.variantStorage;this.m_commands=options.commands||new RepCommands(id+":repCommands",def_cmd_opts);this.m_openFilterOnInit=(options.openFilterOnInit!=undefined)?options.openFilterOnInit:true;}
extend(ViewReport,ControlContainer);ViewReport.prototype.DEF_EXCEL_VIEW="ViewExcel";ViewReport.prototype.DEF_PDF_VIEW="ViewPDF";ViewReport.prototype.m_publicMethod;ViewReport.prototype.m_templateId;ViewReport.prototype.m_reportViewId;ViewReport.prototype.m_excelViewId;ViewReport.prototype.m_pdfViewId;ViewReport.prototype.m_commands;ViewReport.prototype.m_groupper;ViewReport.prototype.m_reportControl;ViewReport.prototype.getFilter=function(){return this.m_filter;}
ViewReport.prototype.setFilter=function(filter){this.m_filter=filter;}
ViewReport.prototype.setGroupper=function(v){this.m_groupper=v;}
ViewReport.prototype.getGroupper=function(v){return this.m_groupper;}
ViewReport.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
ViewReport.prototype.getPublicMethod=function(){return this.m_publicMethod;}
ViewReport.prototype.setReportViewId=function(v){this.m_reportViewId=v;}
ViewReport.prototype.getReportViewId=function(){return this.m_reportViewId;}
ViewReport.prototype.setExcelViewId=function(v){this.m_excelViewId=v;}
ViewReport.prototype.getExcelViewId=function(){return this.m_excelViewId;}
ViewReport.prototype.setPdfViewId=function(v){this.m_pdfViewId=v;}
ViewReport.prototype.getPdfViewId=function(){return this.m_pdfViewId;}
ViewReport.prototype.setReportControl=function(reportControl){this.m_reportControl=reportControl;}
ViewReport.prototype.getReportControl=function(){return this.m_reportControl;}
ViewReport.prototype.setCommands=function(v){this.m_commands=v;}
ViewReport.prototype.getCommands=function(){return this.m_commands;}
ViewReport.prototype.setTemplateId=function(v){this.m_templateId=v;}
ViewReport.prototype.getTemplateId=function(){return this.m_templateId;}
ViewReport.prototype.toDOM=function(parent){ViewReport.superclass.toDOM.call(this,parent);this.m_commands.toDOM(this.m_node);if(this.m_openFilterOnInit){var f=this.m_commands.getCmdFilter();if(f)f.onCommand();}
this.m_reportControl.toDOM(this.m_node);}
ViewReport.prototype.delDOM=function(){this.m_commands.delDOM();this.m_reportControl.delDOM();ViewReport.superclass.delDOM.call(this);}
ViewReport.prototype.fillParams=function(){if(this.m_commands.getCmdFilter()){let pm=this.getPublicMethod();try{this.m_commands.getCmdFilter().getFilter().applyFiltersToPublicMethod(pm);}
catch(e){this.m_commands.getCmdFilter().onCommand(null);throw Error(e.message);}}
if(this.m_groupper){this.m_groupper.getParams(filter_struc);if(!filter_struc.grp_fields){throw Error(this.NO_GRP_SELECTED);}
let contr=pm.getController();pm.setFieldValue(contr.PARAM_GRP_FIELDS,filter_struc.grp_fields);}}
ViewReport.prototype.downloadReport=function(view){this.getPublicMethod().download(view);}
ViewReport.prototype.setControlsEnabled=function(en){this.m_commands.getCmdMake().getControl().setEnabled(en);if(this.m_commands.getCmdExcel())this.m_commands.getCmdExcel().getControl().setEnabled(en);if(this.m_commands.getCmdPdf())this.m_commands.getCmdPdf().getControl().setEnabled(en);if(this.m_commands.getCmdPrint())this.m_commands.getCmdPrint().getControl().setEnabled(en);}
ViewReport.prototype.onGetReportData=function(respText){this.m_reportControl.m_node.innerHTML=respText;}
ViewReport.prototype.onReport=function(){this.fillParams();var self=this;this.setControlsEnabled(false);window.setGlobalWait(true);var pm=this.getPublicMethod();if(pm.fieldExists("templ")&&this.getTemplateId()){pm.setFieldValue("templ",this.getTemplateId());}
pm.run({"viewId":this.getReportViewId(),"get":true,"retContentType":this.m_retContentType,"ok":function(resp){self.onGetReportData(resp);},"all":function(){window.setGlobalWait(false);self.setControlsEnabled(true);}});}
ViewReport.prototype.onPrint=function(){var ctrl=this.getReportControl();if(ctrl){WindowPrint.show({"content":ctrl.getNode().outerHTML});}}
ViewReport.prototype.onExcel=function(){var ctrl_n=this.getReportControl().getNode();var tb=ctrl_n.getElementsByTagName("TABLE");if(tb&&tb.length){var title_l=DOMHelper.getElementsByAttr("reportTitle",ctrl_n,"class",true);var sheet_t;if(title_l&&title_l.length){sheet_t=DOMHelper.getText(title_l[0]);}
else{sheet_t=this.getName();}
DOMHelper.tableToExcel(tb[0],sheet_t,sheet_t+".xls");}}
ViewReport.prototype.onPdf=function(){this.downloadReport(this.getPdfViewId());} 
ViewReport.prototype.VARIANT_SAVED="Сохранение настроек выполнено.";ViewReport.prototype.NO_GRP_SELECTED="Не выбрано ни одного поля!"; 
function PopUpMenu(options){options=options||{};this.items=[];this.width=0;this.height=0;this.m_caption=options.caption;var self=this;this.m_evShow=function(e){e=EventHelper.fixMouseEvent(e);self.show.call(self,e);if(e.preventDefault){e.preventDefault();}
return false;};if(options.elements&&Array.isArray(options.elements)){for(var i=0;i<options.elements.length;i++){if(typeof(options.elements[i])=="string"){this.addSeparator();}
else if(options.elements[i]instanceof Button){this.addButton(options.elements[i]);}
else if(options.elements[i]){this.add(options.elements[i]);}}}}
PopUpMenu.prototype.SEPARATOR='PopUpMenu.SEPARATOR';PopUpMenu.prototype.current=null;PopUpMenu.prototype.unbind=function(){EventHelper.del(this.target,"contextmenu",this.m_evShow,true);if(this.element){this.element.delDOM();}}
PopUpMenu.prototype.bind=function(element){if(!this.items.length){return;}
var self=this;if(!element){element=document;}else if(typeof element=='string'){element=document.getElementById(element);}
this.target=element;EventHelper.add(this.target,"contextmenu",this.m_evShow,true);}
PopUpMenu.prototype.add=function(action){this.items.push(action);}
PopUpMenu.prototype.addButton=function(btn){this.items.push({caption:btn.getCaption()||btn.getAttr("title"),"name":btn.getName(),glyph:(btn.getGlyphPopUp())?btn.getGlyphPopUp():btn.getGlyph(),onClick:btn.getOnClick()});}
PopUpMenu.prototype.addSeparator=function(){this.items.push(PopUpMenu.SEPARATOR);}
PopUpMenu.prototype.show=function(e,fixToElement){if(this.current&&this.current!=this)return;this.current=this;if(this.element&&document.getElementById(this.element.getId())){this.element.setPosition(e,fixToElement);this.element.setVisible(true);}else{this.element=this.createMenu(this.items);this.element.toDOM(e,fixToElement);}}
PopUpMenu.prototype.hide=function(){this.current=null;if(this.element)this.element.setVisible(false);}
PopUpMenu.prototype.getVisible=function(){if(this.element)return this.element.getVisible();}
PopUpMenu.prototype.createMenu=function(items){var self=this;var menu_cont=[];for(var i=0;i<items.length;i++){var item;if(items[i]==PopUpMenu.SEPARATOR){item=this.createSeparator();}else{item=this.createItem(items[i]);}
menu_cont.push(item);}
var menu=new PopOver(CommonHelper.uniqid(),{"fixToElement":this.fixToElement,"zIndex":"2005","attrs":{"style":((self.width)?("width:"+self.width+"px;"):"")
+
((self.height)?("height:"+self.height+"px;"):"")},"caption":this.m_caption,"contentElements":[new ControlContainer(CommonHelper.uniqid(),"ul",{"elements":menu_cont,"className":"nav"})]});return menu;}
PopUpMenu.prototype.createItem=function(item){var self=this;var callback=item.onClick;var elem=new Control(null,"a",{"attrs":{"href":"#","item_id":item.id},"enabled":!item.disabled,"className":"nav-link","events":{"click":function(_callback){return function(e){self.hide();e=EventHelper.fixMouseEvent(e);if(!e.target.getAttribute("disabled")||e.target.getAttribute("disabled")!="disabled"){var id=e.target.getAttribute("item_id");_callback(self.target,id?id:e);}};}(callback)}});if(item.glyph){var i=document.createElement("span");i.className="glyphicon "+item.glyph;elem.m_node.appendChild(i);}
elem.m_node.appendChild(document.createTextNode(" "+item.caption));return new ControlContainer(null,"li",{"enabled":!item.disabled,"className":"nav-item","elements":[elem]});}
PopUpMenu.prototype.createSeparator=function(){return new Control(null,"div",{"attrs":{"style":"borderTop='1px dotted #CCCCCC';fontSize='0px';height='0px';"}})} 
function PopOver(id,options){options=options||{};options.template=window.getApp().getTemplate("PopOver");options.addElement=function(){this.addElement(new Control(id+":title","DIV",{"value":options.caption}));this.addElement(new ControlContainer(id+":content","DIV",{"elements":options.contentElements}));}
this.m_onHide=options.onHide;this.m_zIndex=options.zIndex||"2";PopOver.superclass.constructor.call(this,id,"TEMPLATE",options);var self=this;this.m_evHide=function(event){if(self.m_ieHack){self.m_ieHack--;return;}
event=EventHelper.fixMouseEvent(event);if(event.pageX<self.m_posMinX||event.pageX>self.m_posMaxX||event.pageY<self.m_posMinY||event.pageY>self.m_posMaxY){var el=event.target;var other_popover=false;el=el.parentNode;while(el){if(DOMHelper.hasClass(el,"popover")||DOMHelper.hasClass(el,"datepicker")){other_popover=true;break;}
el=el.parentNode;}
if(!other_popover&&self.getVisible()){self.setVisible(false);event.stopPropagation();}}}}
extend(PopOver,ControlContainer);PopOver.prototype.setPosition=function(e,fixToElement){var x,y;if(fixToElement){var rect=fixToElement.getBoundingClientRect();y=rect.top+$(fixToElement).outerHeight();x=rect.left;}
else{x=e.pageX;y=e.pageY;}
var vp_w=DOMHelper.getViewportWidth();var n=this.getNode();if(n.clientWidth+x>vp_w){x=vp_w-n.clientWidth-10;}
n.style.position="absolute";n.style.top=y+"px";n.style.left=x+"px";n.style.zIndex=this.m_zIndex;n.style.display="block";}
PopOver.prototype.setVisible=function(v){PopOver.superclass.setVisible.call(this,v);if(v){this.addClick();}
else{this.delClick();if(this.m_onHide){this.m_onHide();}}}
PopOver.prototype.addClick=function(){this.m_ieHack=(CommonHelper.isIE())?1:0;EventHelper.add(document,"click",this.m_evHide,true);}
PopOver.prototype.delClick=function(){EventHelper.del(document,"click",this.m_evHide,true);}
PopOver.prototype.toDOM=function(e,fixToElement){PopOver.superclass.toDOM.call(this,document.body);this.setPosition(e,fixToElement);var rect=this.m_node.getBoundingClientRect();this.m_posMinY=rect.top;this.m_posMaxY=rect.top+$(this.m_node).outerHeight();this.m_posMinX=rect.left;this.m_posMaxX=rect.left+$(this.m_node).outerWidth();this.m_zIndex=parseInt($(this.m_node).css("z-index"),10);this.addClick();}
PopOver.prototype.delDOM=function(){PopOver.superclass.delDOM.call(this);this.delClick();} 
function PeriodSelect(id,options){options=options||{};var self=this;options.events={"click":function(e){self.onClick(e);}};options.attrs=options.attrs||{};options.attrs.style="cursor:pointer;";options.value=options.value||options.period||this.PERIOD_ALIASES[0];PeriodSelect.superclass.constructor.call(this,id,"A",options);}
extend(PeriodSelect,Control);PeriodSelect.prototype.PERIOD_ALIASES=["all","day","week","month","quarter","year"];PeriodSelect.prototype.CLASS_SELECTED="alert-success";PeriodSelect.prototype.m_pop;PeriodSelect.prototype.onClick=function(e){if(!this.m_pop){var self=this;var cont_el=[];var cur=this.getValue();for(var i=0;i<this.PERIOD_ALIASES.length;i++){cont_el.push(new Control(CommonHelper.uniqid(),"P",{"className":"forSelect"+((cur==this.PERIOD_ALIASES[i])?" "+this.CLASS_SELECTED:""),"value":this.PERIODS[i],"attrs":{"period":this.PERIOD_ALIASES[i],"style":"cursor:pointer;"},"events":{"click":function(e){self.m_pop.setVisible(false);var par=e.target.parentNode;for(var j=0;j<par.childNodes.length;j++){if(par.childNodes[j]==e.target){DOMHelper.addClass(e.target,self.CLASS_SELECTED);}
else if(DOMHelper.hasClass(par.childNodes[j],self.CLASS_SELECTED)){DOMHelper.delClass(par.childNodes[j],self.CLASS_SELECTED);}}
self.setValue(e.target.getAttribute("period"));}}}));}
var cont=new ControlContainer(null,"DIV",{"elements":cont_el});this.m_pop=new PopOver(this.getId()+":popover",{"contentElements":[cont],"zIndex":"2001"});this.m_pop.toDOM(e,this.getNode());}
else{this.m_pop.setVisible(!this.m_pop.getVisible());}}
PeriodSelect.prototype.setValue=function(v){var p=CommonHelper.inArray(v,this.PERIOD_ALIASES);if(p==-1){throw Error(this.ER_PERIOD_NOT_FOUND);}
this.setAttr("period",v);PeriodSelect.superclass.setValue.call(this,this.PERIODS[p]);}
PeriodSelect.prototype.getValue=function(){return this.getAttr("period");} 
PeriodSelect.prototype.PERIODS=["Произвольный период","Текущий день","Текущая неделя","Текущий месяц","Текущий квартал","Текущий год"];PeriodSelect.prototype.ER_PERIOD_NOT_FOUND="Период не определен!"; 
var WindowAbout={show:function(view){var self=this;this.m_form=new WindowFormModalBS(CommonHelper.uniqid(),{"cmdCancel":true,"controlCancelCaption":this.CMD_CLOSE_CAP,"controlCancelTitle":this.CMD_CLOSE_TITLE,"cmdOk":false,"onClickCancel":function(f){self.m_form.close();},"content":view,"contentHead":this.HEAD_TITLE});this.m_form.open();}} 
WindowAbout.HEAD_TITLE="О программе";WindowAbout.CMD_CLOSE_CAP="ОК";WindowAbout.CMD_CLOSE_TITLE="Закрыть окно"; 
function MainMenuTree(id,options){options=options||{};var self=this;options.editViewOptions={"tagName":"LI","columnTagName":"DIV","onBeforeExecCommand":function(cmd,pm){pm.setFieldValue("viewdescr",self.m_editViewDescr);}};options.rootCaption=this.ROOT_CAP;options.model=new MainMenuContent_Model();options.className="menuConstructor";options.controller=new MainMenuContent_Controller({"clientModel":options.model});options.popUpMenu=(options.popUpMenu!=undefined)?options.popUpMenu:new PopUpMenu();options.navigateMouse=false;options.commands=new GridCmdContainerAjx(id+":cmd",{"cmdColManager":false,"cmdExport":false,"cmdSearch":false,"cmdCopy":false,"cmdRefresh":false});options.head=new GridHead(id+":head",{"rowOptions":[{"tagName":"li"}],"elements":[new GridRow(id+":content-tree:head:row0",{"elements":[new GridCellHead(id+":content-tree:head",{"className":window.getBsCol(6),"columns":[new GridColumn({"model":options.model,"field":options.model.getField("descr"),"cellOptions":{"tagName":"SPAN"},"ctrlOptions":{"labelCaption":this.LB_CAP_DESCR,"contTagName":"DIV","labelClassName":"control-label "+window.getBsCol(2),"editContClassName":"input-group "+window.getBsCol(10)}}),new GridColumn({"field":options.model.getField("viewdescr"),"model":options.model,"cellOptions":{"tagName":"SPAN"},"ctrlClass":ViewEditRef,"ctrlBindFieldId":"viewid","ctrlOptions":{"labelCaption":this.LB_CAP_VIEW,"contTagName":"DIV","labelClassName":"control-label "+window.getBsCol(2),"editContClassName":"input-group "+window.getBsCol(10),"keyIds":["viewid"],"menuTree":this,"onSelect":function(fields){self.onViewSelected(fields);}}}),new GridColumn({"field":options.model.getField("glyphclass"),"model":options.model,"cellOptions":{"tagName":"SPAN"},"ctrlOptions":{"labelCaption":this.LB_CAP_GLYPHCLASS,"contTagName":"DIV","labelClassName":"control-label "+window.getBsCol(2),"editContClassName":"input-group "+window.getBsCol(10),"buttonSelect":new ButtonCtrl(id+":content-tree:head:glyphclass-sel",{"glyph":"glyphicon-menu-hamburger","onClick":function(e){self.selectPict(this.getEditControl());}})}}),new GridColumn({"field":options.model.getField("default"),"assocClassList":{"true":"glyphicon glyphicon-ok"},"model":options.model,"cellOptions":{"tagName":"SPAN"},"ctrlOptions":{"labelCaption":this.LB_CAP_DEFAULT,"contTagName":"DIV","labelClassName":"control-label "+window.getBsCol(2),"editContClassName":"input-group "+window.getBsCol(1)}})]})]})]});MainMenuTree.superclass.constructor.call(this,id,options);}
extend(MainMenuTree,TreeAjx);MainMenuTree.prototype.selectPict=function(editCtrl){var self=this;this.m_view=new View(this.getId()+":view:body:view",{"template":window.getApp().getTemplate("IcomoonList"),"events":{"click":function(e){if(e.target.tagName.toUpperCase()=="DIV"){editCtrl.setValue(e.target.firstChild.className);self.closeSelect();}}}});this.m_form=new WindowFormModalBS(this.getId()+":form",{"cmdCancel":true,"controlCancelCaption":this.BTN_CANCEL_CAP,"controlCancelTitle":this.BTN_CANCEL_TITLE,"cmdOk":false,"controlOkCaption":null,"controlOkTitle":null,"onClickCancel":function(){self.closeSelect();},"onClickOk":function(){self.closeSelect();},"content":this.m_view,"contentHead":this.SEL_PIC_HEAD});this.m_form.open();}
MainMenuTree.prototype.closeSelect=function(){if(this.m_view){this.m_view.delDOM();delete this.m_view;}
if(this.m_form){this.m_form.close();delete this.m_form;}}
MainMenuTree.prototype.onViewSelected=function(fields){var descr=fields.user_descr.getValue();var sec=fields.section.getValue();if(descr.substring(0,sec.length)==sec){descr=descr.substring(sec.length);}
this.getEditViewObj().getElement("descr").setValue(descr);} 
MainMenuTree.prototype.ROOT_CAP="МЕНЮ";MainMenuTree.prototype.LB_CAP_DESCR="Наименование:";MainMenuTree.prototype.LB_CAP_VIEW="Объект:";MainMenuTree.prototype.LB_CAP_DEFAULT="По умолчанию:";MainMenuTree.prototype.LB_CAP_GLYPHCLASS="Класс картинки:";MainMenuTree.prototype.SEL_PIC_HEAD="Выберите картинку"; 
function ButtonOrgSearch(id,options){options=options||{};options.glyph="glyphicon-search";options.title=this.TITLE;this.m_viewContext=options.viewContext;this.m_onGetData=options.onGetData;this.m_onGetAttrs=options.onGetAttrs;var self=this;options.onClick=options.onClick||function(event){self.doSearch();};ButtonOrgSearch.superclass.constructor.call(this,id,options);}
extend(ButtonOrgSearch,ButtonCtrl);ButtonOrgSearch.prototype.DEF_ATTRS={"Наименование":"name","Наименование полное":"name_full","ФИО руководителя":"dir_name","Должность руководителя":"dir_post","ИНН":"inn","КПП":"kpp","ОГРН":"ogrn","ОКПО":"okpo","ОКВЭД":"okved","ОКАТО":"okato"};ButtonOrgSearch.prototype.doSearch=function(){var q=this.getEditControl().getValue();if(!q||!q.length){throw new Error("Не задан параметр поиска!");}
var pm=(new ClientSearch_Controller()).getPublicMethod("search");pm.setFieldValue("query",q);this.setEnabled(false);var self=this;pm.run({"ok":function(resp){if(resp.modelExists("SearchResult_Model")){var m=new ModelXML("SearchResult_Model",{"fields":["param","val"],"data":resp.getModelData("SearchResult_Model")});if(self.m_onGetData){self.m_onGetData(m);}
else{self.applyResult(m);}}},"all":function(){self.setEnabled(true);}});}
ButtonOrgSearch.prototype.applyResult=function(model){var attr_coresp;if(this.m_onGetAttrs){attr_coresp=this.m_onGetAttrs();}else{attr_coresp=this.DEF_ATTRS;}
while(model.getNextRow()){var param=model.getFieldValue("param");if(attr_coresp[param]){var el=this.m_viewContext.getElement(attr_coresp[param]);if(el){el.setValue(model.getFieldValue("val"));}}}} 
ButtonOrgSearch.prototype.TITLE="Найти контрагента по базе ЕГРЮЛ/ЕГРИП"; 
function ConstantGrid(id,options){options=options||{};var self=this;var contr=new Constant_Controller();var opts={"model":options.model,"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdInsert":false,"cmdCopy":false,"cmdDelete":false,"cmdEdit":true}),"updatePublicMethod":contr.getPublicMethod("set_value"),"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:0",{"elements":[new GridCellHead(id+":head:0:name",{"value":this.LIST_COL_NAME,"columns":[new GridColumn({"field":options.model.getField("name"),"ctrlEdit":false,"ctrlOptions":{"enabled":false,"cmdClear":false}})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":head:0:descr",{"value":this.LIST_COL_DESCR,"columns":[new GridColumn({"field":options.model.getField("descr"),"ctrlEdit":false,"ctrlOptions":{"enabled":false,"cmdClear":false}})]}),new GridCellHead(id+":head:0:val",{"value":this.LIST_COL_VAL,"columns":[new GridColumn({"field":options.model.getField("val"),"ctrlClassResolve":function(){return self.getConstantClass();},"ctrlOptions":function(){return self.getConstantClassOptions();},"cellOptions":function(column,row){return this.getCellOptions(column,row);}})]})]})]}),"rowSelect":false,"autoRefresh":false,"focus":true,"defSrvEvents":false};ConstantGrid.superclass.constructor.call(this,id,opts);this.m_defClasses={"Bool":{"columnClass":GridColumnBool,"ctrlClass":EditCheckBox},"Date":{"columnClass":GridColumnDate,"ctrlClass":EditDate},"DateTime":{"columnClass":GridColumnDateTime,"ctrlClass":EditDateTime},"Time":{"columnClass":window["GridColumnTime"]?window["GridColumnTime"]:GridColumn,"ctrlClass":window["EditTime"]?window["EditTime"]:EditString},"Interval":{"columnClass":window["GridColumnInterval"]?window["GridColumnInterval"]:GridColumn,"ctrlClass":window["EditInterval"]?window["EditInterval"]:EditString},"Float":{"columnClass":GridColumnFloat,"ctrlClass":EditFloat},"Int":{"columnClass":GridColumn,"ctrlClass":EditInt},"Ref":{"columnClass":GridColumnRef,"ctrlClass":EditString},"DEF":{"columnClass":GridColumn,"ctrlClass":EditString}};}
extend(ConstantGrid,GridAjx);ConstantGrid.prototype.getConstantClassOptions=function(){return{"labelCaption":"","autoRefresh":false};}
ConstantGrid.prototype.getConstantClass=function(column,row){var val=this.m_model.getFieldValue("val");var val_type=this.m_model.getFieldValue("val_type");var ctrl_class_f=this.m_model.getField("ctrl_class");var ctrl_class;if(!ctrl_class_f.isSet()){ctrl_class=(this.m_defClasses[val_type])?this.m_defClasses[val_type].ctrlClass:this.m_defClasses.DEF.ctrlClass;}
else{ctrl_class=eval(ctrl_class_f.getValue());}
return ctrl_class;}
ConstantGrid.prototype.getCellOptions=function(column,row){var opts={"value":this.m_model.getFieldValue("val")};var val_type=this.m_model.getFieldValue("val_type");if(val_type&&val_type.toUpperCase&&(val_type.toUpperCase()=="JSON"||val_type.toUpperCase()=="JSONB")){var val_o=CommonHelper.unserialize(opts.value);if(val_o&&val_o.m_descr){opts.value=val_o.m_descr;}else if(val_o&&val_o.descr){opts.value=val_o.descr;}else if(val_o&&val_o.getDescr){opts.value=val_o.getDescr();}else if(val_o){var ctrl_class=eval(this.m_model.getFieldValue("ctrl_class"));if(ctrl_class){var self=this;var ed_o=new ctrl_class(null,{"labelCaption":"","events":{"click":function(e){self.onClick(e);}}});ed_o.setValue(val_o);opts.elements=[ed_o];}}}
return opts;}
ConstantGrid.prototype.initEditView=function(parent,replacedNode,cmd){ConstantGrid.superclass.initEditView.call(this,parent,replacedNode,cmd);var pm=this.getUpdatePublicMethod();pm.setFieldValue("id",this.m_model.getFieldValue("id"));} 
ConstantGrid.prototype.LIST_COL_NAME="Наименование";ConstantGrid.prototype.LIST_COL_DESCR="Описание";ConstantGrid.prototype.LIST_COL_VAL="Значение"; 
function Captcha(id,options){options=options||{};options.required=true;this.m_keyLength=options.keyLength||this.DEF_KEYLENGTH;this.m_captchaId=options.captchaId;this.m_captchaWidth=options.captchaWidth;this.m_captchaHeight=options.captchaHeight;this.m_captchaCount=options.captchaCount;self=this;options.addElement=function(){this.addElement(new ButtonCtrl(id+":refresh",{"title":self.REFRESH_TITLE,"onClick":(function(cont){return function(){cont.refresh();}})(self)}));this.addElement(new Control(id+":imgCont","SPAN"));options.keyEvents=options.keyEvents||{};options.keyEvents.input=options.keyEvents.input||function(){if(DOMHelper.hasClass(this.getNode(),self.INCORRECT_VAL_CLASS)){self.setValid();}}
this.addElement(new Control(id+":key","INPUT",{"attrs":{"required":"required","type":"text","maxlength":self.m_keyLength,"title":self.KEY_TITLE,"placeholder":self.KEY_PLACEHOLDER},"events":options.keyEvents}));self.setErrorControl((options.errorControl!==undefined)?options.errorControl:((self.m_html)?null:new ErrorControl(self.getId()+":error")));this.addElement(self.getErrorControl());}
Captcha.superclass.constructor.call(this,id,"DIV",options);}
extend(Captcha,ControlContainer);Captcha.prototype.DEF_KEYLENGTH=6;Captcha.prototype.INCORRECT_VAL_CLASS="error";Captcha.prototype.m_keyLength;Captcha.prototype.toDOM=function(parent){Captcha.superclass.toDOM.call(this,parent);this.refresh();}
Captcha.prototype.setErrorControl=function(v){this.m_errorControl=v;}
Captcha.prototype.getErrorControl=function(){return this.m_errorControl;}
Captcha.prototype.getModified=function(){return true;}
Captcha.prototype.setFromResp=function(resp){var m=new ModelObjectXML("Captcha_Model",{"fields":["img"],"data":resp.getModelData("Captcha_Model")});var b64=m.getFieldValue("img");var n_cont=this.getElement("imgCont").getNode();DOMHelper.delAllChildren(n_cont);var img=document.createElement("IMG");img.setAttribute("src","data:image;base64,"+b64);n_cont.appendChild(img);this.getElement("imgCont").toDOM();this.m_i++;this.reset();}
Captcha.prototype.refresh=function(){if(!this.getEnabled()){return;}
this.getElement("refresh").setEnabled(false);var self=this;var pm=(new Captcha_Controller()).getPublicMethod("get");if(this.m_captchaId){pm.setFieldValue("id",this.m_captchaId);}
if(pm.fieldExists("width")){pm.setFieldValue("width",this.m_captchaWidth);pm.setFieldValue("height",this.m_captchaHeight);pm.setFieldValue("count",this.m_captchaCount);}
pm.run({"ok":function(resp){self.setFromResp(resp);},"fail":function(resp,errCode,errStr){self.getErrorControl().setValue(errStr);},"all":function(){self.getElement("refresh").setEnabled(true);}});}
Captcha.prototype.getValue=function(){var v=this.getElement("key").getNode().value;return(!v||!v.length)?null:v;}
Captcha.prototype.reset=function(){this.getElement("key").getNode().value="";}
Captcha.prototype.setValid=function(){DOMHelper.delClass(this.getElement("key").getNode(),this.INCORRECT_VAL_CLASS);this.getErrorControl().clear();}
Captcha.prototype.setNotValid=function(str){DOMHelper.addClass(this.getElement("key").getNode(),this.INCORRECT_VAL_CLASS);this.getErrorControl().setValue(str);}
Captcha.prototype.validate=function(){var v=this.getValue();if(!v||v.length!=this.m_captchaCount){this.setNotValid(Validator.prototype.ER_EMPTY);return false;}
return true;} 
function ViewTemplate(id,options){options=options||{};var t_opts=((typeof(options.value)=="string")?CommonHelper.unserialize(options.value):options.value)||{};if(options.templateOptions){for(var opt in options.templateOptions){t_opts[opt]=options.templateOptions[opt];}}
options.templateOptions=t_opts;options.value=null;this.m_modelId=options.modelId;this.setPublicMethod(options.publicMethod);this.setOnBeforeUpdateHTML(options.onBeforeUpdateHTML);this.setOnAfterUpdateHTML(options.onAfterUpdateHTML);this.setRefreshInterval((options.refreshInterval!=undefined)?options.refreshInterval:0);this.setAutoRefresh((options.autoRefresh!=undefined)?options.autoRefresh:false);ViewTemplate.superclass.constructor.call(this,id,options.tagName,options);}
extend(ViewTemplate,Control);ViewTemplate.prototype.m_refreshInterval;ViewTemplate.prototype.m_publicMethod;ViewTemplate.prototype.m_autoRefresh;ViewTemplate.prototype.m_onBeforeUpdateHTML;ViewTemplate.prototype.m_onAfterUpdateHTML;ViewTemplate.prototype.m_refreshIntervalObj;ViewTemplate.prototype.m_model;ViewTemplate.prototype.m_modelId;ViewTemplate.prototype.toDOM=function(parent){ViewTemplate.superclass.toDOM.call(this,parent);if(this.m_autoRefresh){this.onRefresh();}}
ViewTemplate.prototype.setValue=function(){}
ViewTemplate.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
ViewTemplate.prototype.getPublicMethod=function(){return this.m_publicMethod;}
ViewTemplate.prototype.setOnBeforeUpdateHTML=function(v){this.m_onBeforeUpdateHTML=v||this.onBeforeUpdateHTML;}
ViewTemplate.prototype.getOnBeforeUpdateHTML=function(){return this.m_onBeforeUpdateHTML;}
ViewTemplate.prototype.setOnAfterUpdateHTML=function(v){this.m_onAfterUpdateHTML=v||this.onAfterUpdateHTML;}
ViewTemplate.prototype.getOnAfterUpdateHTML=function(){return this.m_onAfterUpdateHTML;}
ViewTemplate.prototype.setRefreshInterval=function(v){this.m_refreshInterval=v;if(v==0&&this.m_refreshIntervalObj!=undefined){window.clearInterval(this.m_refreshIntervalObj);}
else if(v>0){var self=this;this.m_refreshIntervalObj=setInterval(function(){self.onRefresh();},v);}}
ViewTemplate.prototype.getRefreshInterval=function(){return this.m_refreshInterval;}
ViewTemplate.prototype.setAutoRefresh=function(v){this.m_autoRefresh=v;}
ViewTemplate.prototype.getAutoRefresh=function(){return this.m_autoRefresh;}
ViewTemplate.prototype.onRefresh=function(callBack){if(this.m_publicMethod){var self=this;this.m_publicMethod.run({"ok":function(resp){self.onGetData(resp);if(callBack){callBack();}}});}
else if(callBack){callBack();}}
ViewTemplate.prototype.onGetData=function(resp){if(this.m_onBeforeUpdateHTML){this.m_onBeforeUpdateHTML.call(this,resp);}
this.updateHTML();if(this.m_onAfterUpdateHTML){this.m_onAfterUpdateHTML.call(this,resp);}}
ViewTemplate.prototype.onAfterUpdateHTML=function(resp){}
ViewTemplate.prototype.onBeforeUpdateHTML=function(resp){if(!this.m_modelId){return;}
this.m_model=resp.getModel(this.m_modelId);if(!this.m_model){return;}
this.m_templateOptions={"rows":[]};while(this.m_model.getNextRow()){let row=[];let fields=this.m_model.getFields();for(f_id in fields){let fld=fields[f_id];let tp=fld.getDataType();if(tp==Field.prototype.DT_JSON||tp==Field.prototype.DT_JSONB){row[f_id]=fld.getValue().getDescr();}else if(tp==Field.prototype.DT_DATE){row[f_id]=DateHelper.format(fld.getValue(),"d.m.y");}else if(tp==Field.prototype.DT_DATETIME||tp==Field.prototype.DT_DATETIMETZ){row[f_id]=DateHelper.format(fld.getValue(),"d.m.y H:i:s");}else if(tp==Field.prototype.DT_BOOL){row[f_id]=(fld.getValue())?"да":"нет";}else{row[f_id]=fld.getValue();}
row[f_id]}
this.m_templateOptions.rows.push(row);console.log("templateOptions:",this.m_templateOptions);}} 
function ToolTip(options){this.m_onHover=options.onHover;this.m_node=options.node;var self=this;this.m_wait=options.wait||this.DEF_WAIT;this.m_evMouseOver=function(event){event=EventHelper.fixMouseEvent(event);self.m_timeout=setTimeout(function(){self.m_out=false;self.m_onHover.call(self,event);},self.m_wait);};this.m_evMouseOut=function(event){self.m_out=true;if(self.m_timeout){clearTimeout(self.m_timeout);self.m_timeout=null;}
self.remove();}
this.addEvent();}
ToolTip.prototype.DEF_WAIT=3000;ToolTip.prototype.popup=function(content,options){options=options||{};this.m_active=true;tooltip.show(content,options.width,options.title,options.className,options.event);if(this.m_out){this.remove();}}
ToolTip.prototype.remove=function(){tooltip.hide();this.m_active=false;}
ToolTip.prototype.getWait=function(){return this.m_wait;}
ToolTip.prototype.setWait=function(wait){this.m_wait=wait;this.removeEvent();if(wait>0){this.addEvent();}}
ToolTip.prototype.addEvent=function(){EventHelper.add(this.m_node,"mouseover",this.m_evMouseOver,false);EventHelper.add(this.m_node,"mouseout",this.m_evMouseOut,false);}
ToolTip.prototype.removeEvent=function(){EventHelper.del(this.m_node,"mouseover",this.m_evMouseOver,false);EventHelper.del(this.m_node,"mouseout",this.m_evMouseOut,false);}
var tooltip=function(){var id='tt';var top=3;var left=3;var maxw=300;var speed=10;var timer=20;var endalpha=95;var alpha=0;var tt,c,b,h,te;var ie=document.all?true:false;return{show:function(v,w,title,cl,event){tt=document.getElementById(id);if(tt==null){tt=document.createElement("div");tt.setAttribute("id",id);tt.className="popover popover-tip top"+((cl)?" "+cl:"");tt.setAttribute("role","tooltip");tt.style.display="none";te=document.createElement('h3');te.className="popover-title";if(title){tt.appendChild(te);}
c=document.createElement('div');c.setAttribute('id',id+'cont');c.className="popover-content";tt.appendChild(c);document.body.appendChild(tt);tt.style.opacity=0;tt.style.filter='alpha(opacity=0)';}
if(title){te.innerHTML=title;}
if(tt.offsetWidth>maxw){tt.style.width=maxw+"px";}
h=parseInt(tt.offsetHeight)+top;if(event){this.pos(event);}
EventHelper.add(document,"mousemove",this.pos);tt.style.display="block";c.innerHTML=v;tt.style.width=w?w+"px":"auto";clearInterval(tt.timer);tt.timer=setInterval(function(){tooltip.fade(1);},timer);},pos:function(e){var u=ie?e.clientY+document.documentElement.scrollTop:e.pageY;var l=ie?e.clientX+document.documentElement.scrollLeft:e.pageX;tt.style.top=(u-h)+"px";tt.style.left=(l+left)+"px";},fade:function(d){if(!tt){return;}
var a=alpha;if((a!=endalpha&&d==1)||(a!=0&&d==-1)){var i=speed;if(endalpha-a<speed&&d==1){i=endalpha-a;}else if(alpha<speed&&d==-1){i=a;}
alpha=a+(i*d);tt.style.opacity=alpha*.01;tt.style.filter='alpha(opacity='+alpha+')';}else{clearInterval(tt.timer);if(d==-1){tt.style.display="none";EventHelper.del(document,"mousemove",this.pos);}}},hide:function(){if(tt){clearInterval(tt.timer);tt.timer=setInterval(function(){tooltip.fade(-1);},timer);}}};}(); 
function WaitControl(id,options){options=options||{};options.visible=(options.visible!=undefined)?options.visible:false;options.tagName=options.tagName||this.DEF_TAG;options.className=options.className||this.DEF_CLASS;WaitControl.superclass.constructor.call(this,id,options.tagName,options);}
extend(WaitControl,Control);WaitControl.prototype.DEF_TAG="I";WaitControl.prototype.DEF_CLASS="fa fa-spinner fa-spin position-left"; 
function User_Controller(options){options=options||{};options.listModelClass=UserList_Model;options.objModelClass=UserDialog_Model;User_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_set_new_pwd();this.add_reset_pwd();this.add_login();this.add_login_ext();this.add_login_refresh();this.add_login_k();this.add_login_ks();this.add_logout();this.add_login_tm();this.add_tm_check_tel();this.add_tm_send_code();this.add_tm_get_left_time();this.add_tm_check_code();this.add_logout_html();this.add_login_html();this.add_logged();this.addComplete();this.add_get_profile();this.add_password_recover();this.add_get_user_operator_list();this.add_update_production_site();this.add_set_param();this.add_get_param();this.add_select_login_role();}
extend(User_Controller,ControllerObjServer);User_Controller.prototype.addInsert=function(){User_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.required=true;options.enumValues='owner,boss,operator,manager,dispatcher,accountant,lab_worker,supplies,sales,plant_director,supervisor,vehicle_owner,client,weighing';var field=new FieldEnum("role_id",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};var field=new FieldPassword("pwd",options);pm.addField(field);var options={};var field=new FieldString("tel_ext",options);pm.addField(field);var options={};var field=new FieldString("phone_cel",options);pm.addField(field);var options={};options.alias="Дата создания";var field=new FieldDateTimeTZ("create_dt",options);pm.addField(field);var options={};var field=new FieldBool("banned",options);pm.addField(field);var options={};var field=new FieldInt("time_zone_locale_id",options);pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};options.alias="Не используется, используется справочник user_map_to_production";var field=new FieldString("elkon_user_name",options);pm.addField(field);var options={};options.alias="Для облачной АТС";var field=new FieldString("domru_user_name",options);pm.addField(field);var options={};var field=new FieldJSONB("params",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
User_Controller.prototype.addUpdate=function(){User_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};options.enumValues='owner,boss,operator,manager,dispatcher,accountant,lab_worker,supplies,sales,plant_director,supervisor,vehicle_owner,client,weighing';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("role_id",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};var field=new FieldPassword("pwd",options);pm.addField(field);var options={};var field=new FieldString("tel_ext",options);pm.addField(field);var options={};var field=new FieldString("phone_cel",options);pm.addField(field);var options={};options.alias="Дата создания";var field=new FieldDateTimeTZ("create_dt",options);pm.addField(field);var options={};var field=new FieldBool("banned",options);pm.addField(field);var options={};var field=new FieldInt("time_zone_locale_id",options);pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};options.alias="Не используется, используется справочник user_map_to_production";var field=new FieldString("elkon_user_name",options);pm.addField(field);var options={};options.alias="Для облачной АТС";var field=new FieldString("domru_user_name",options);pm.addField(field);var options={};var field=new FieldJSONB("params",options);pm.addField(field);}
User_Controller.prototype.addDelete=function(){User_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
User_Controller.prototype.addGetList=function(){User_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldEnum("role_id",f_opts));var f_opts={};pm.addField(new FieldString("phone_cel",f_opts));var f_opts={};pm.addField(new FieldString("tel_ext",f_opts));var f_opts={};pm.addField(new FieldString("email",f_opts));var f_opts={};pm.addField(new FieldBool("banned",f_opts));var f_opts={};f_opts.alias="Контакты";pm.addField(new FieldJSON("contact_list",f_opts));var f_opts={};f_opts.alias="Id list for filter";pm.addField(new FieldText("contact_ids",f_opts));}
User_Controller.prototype.addGetObject=function(){User_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
User_Controller.prototype.add_set_new_pwd=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_new_pwd',opts);var options={};pm.addField(new FieldPassword("pwd",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_reset_pwd=function(){var opts={"controller":this};var pm=new PublicMethodServer('reset_pwd',opts);var options={};options.required=true;pm.addField(new FieldInt("user_id",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_login=function(){var opts={"controller":this};var pm=new PublicMethodServer('login',opts);var options={};options.alias="Имя пользователя";options.maxlength="50";pm.addField(new FieldString("name",options));var options={};options.alias="Пароль";options.maxlength="20";pm.addField(new FieldPassword("pwd",options));var options={};options.maxlength="2";pm.addField(new FieldString("width_type",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_login_ext=function(){var opts={"controller":this};var pm=new PublicMethodServer('login_ext',opts);var options={};options.alias="Имя пользователя";options.maxlength="50";pm.addField(new FieldString("name",options));var options={};options.alias="Пароль";options.maxlength="20";pm.addField(new FieldPassword("pwd",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_login_refresh=function(){var opts={"controller":this};var pm=new PublicMethodServer('login_refresh',opts);var options={};options.required=true;options.maxlength="50";pm.addField(new FieldString("refresh_token",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_login_k=function(){var opts={"controller":this};var pm=new PublicMethodServer('login_k',opts);var options={};options.maxlength="50";pm.addField(new FieldString("k",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_login_ks=function(){var opts={"controller":this};var pm=new PublicMethodServer('login_ks',opts);var options={};options.maxlength="50";pm.addField(new FieldString("k",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_logout=function(){var opts={"controller":this};var pm=new PublicMethodServer('logout',opts);this.addPublicMethod(pm);}
User_Controller.prototype.add_login_tm=function(){var opts={"controller":this};var pm=new PublicMethodServer('login_tm',opts);var options={};options.required=true;options.maxlength="1000";pm.addField(new FieldText("auth_data",options));var options={};options.maxlength="2";pm.addField(new FieldString("width_type",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_tm_check_tel=function(){var opts={"controller":this};var pm=new PublicMethodServer('tm_check_tel',opts);var options={};options.required=true;options.maxlength="10";pm.addField(new FieldString("tel",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_tm_send_code=function(){var opts={"controller":this};var pm=new PublicMethodServer('tm_send_code',opts);var options={};options.required=true;options.maxlength="10";pm.addField(new FieldString("tel",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_tm_get_left_time=function(){var opts={"controller":this};var pm=new PublicMethodServer('tm_get_left_time',opts);var options={};options.required=true;options.maxlength="10";pm.addField(new FieldString("tel",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_tm_check_code=function(){var opts={"controller":this};var pm=new PublicMethodServer('tm_check_code',opts);var options={};options.required=true;options.maxlength="10";pm.addField(new FieldString("tel",options));var options={};options.required=true;options.maxlength="5";pm.addField(new FieldString("code",options));var options={};options.maxlength="2";pm.addField(new FieldString("width_type",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_logout_html=function(){var opts={"controller":this};var pm=new PublicMethodServer('logout_html',opts);this.addPublicMethod(pm);}
User_Controller.prototype.add_login_html=function(){var opts={"controller":this};var pm=new PublicMethodServer('login_html',opts);var options={};options.alias="Имя пользователя";options.maxlength="50";pm.addField(new FieldString("name",options));var options={};options.alias="Пароль";options.maxlength="20";pm.addField(new FieldPassword("pwd",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_logged=function(){var opts={"controller":this};var pm=new PublicMethodServer('logged',opts);this.addPublicMethod(pm);}
User_Controller.prototype.addComplete=function(){User_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
User_Controller.prototype.add_get_profile=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_profile',opts);this.addPublicMethod(pm);}
User_Controller.prototype.add_password_recover=function(){var opts={"controller":this};var pm=new PublicMethodServer('password_recover',opts);var options={};options.required=true;options.maxlength="100";pm.addField(new FieldString("email",options));var options={};options.required=true;options.maxlength="10";pm.addField(new FieldString("captcha_key",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_get_user_operator_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_user_operator_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
User_Controller.prototype.add_update_production_site=function(){var opts={"controller":this};var pm=new PublicMethodServer('update_production_site',opts);var options={};options.required=true;pm.addField(new FieldInt("old_id",options));var options={};options.required=true;pm.addField(new FieldInt("production_site_id",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_set_param=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_param',opts);var options={};options.required=true;options.maxlength="200";pm.addField(new FieldString("name",options));var options={};pm.addField(new FieldText("val",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_get_param=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_param',opts);var options={};options.required=true;options.maxlength="200";pm.addField(new FieldString("param_name",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_select_login_role=function(){var opts={"controller":this};var pm=new PublicMethodServer('select_login_role',opts);var options={};options.required=true;options.maxlength="150";pm.addField(new FieldString("role_id",options));this.addPublicMethod(pm);} 
function Constant_Controller(options){options=options||{};options.listModelClass=ConstantList_Model;options.objModelClass=ConstantList_Model;Constant_Controller.superclass.constructor.call(this,options);this.add_set_value();this.addGetList();this.addGetObject();this.add_get_values();}
extend(Constant_Controller,ControllerObjServer);Constant_Controller.prototype.add_set_value=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_value',opts);var options={};options.required=true;pm.addField(new FieldString("id",options));var options={};pm.addField(new FieldString("val",options));this.addPublicMethod(pm);}
Constant_Controller.prototype.addGetList=function(){Constant_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldString("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldText("descr",f_opts));var f_opts={};pm.addField(new FieldText("val",f_opts));var f_opts={};pm.addField(new FieldText("val_type",f_opts));var f_opts={};pm.addField(new FieldText("ctrl_class",f_opts));var f_opts={};pm.addField(new FieldJSON("ctrl_options",f_opts));var f_opts={};pm.addField(new FieldText("view_class",f_opts));var f_opts={};pm.addField(new FieldJSON("view_options",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Constant_Controller.prototype.addGetObject=function(){Constant_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Constant_Controller.prototype.add_get_values=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_values',opts);var options={};pm.addField(new FieldString("id_list",options));var options={};options.maxlength="1";pm.addField(new FieldString("field_sep",options));this.addPublicMethod(pm);} 
function Enum_Controller(options){options=options||{};Enum_Controller.superclass.constructor.call(this,options);this.add_get_enum_list();}
extend(Enum_Controller,ControllerObjServer);Enum_Controller.prototype.add_get_enum_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_enum_list',opts);var options={};pm.addField(new FieldString("id",options));this.addPublicMethod(pm);} 
function Client_Controller(options){options=options||{};options.listModelClass=ClientList_Model;options.objModelClass=ClientDialog_Model;Client_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_complete_for_order();this.add_union();this.add_set_duplicate_valid();this.add_get_duplicates_list();this.add_insert_from_order();}
extend(Client_Controller,ControllerObjServer);Client_Controller.prototype.addInsert=function(){Client_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Полное наименование";var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Сотовый телефон";var field=new FieldString("phone_cel",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("manager_comment",options);pm.addField(field);var options={};options.alias="Вид контрагента";var field=new FieldInt("client_type_id",options);pm.addField(field);var options={};options.alias="Тип контрагента";options.enumValues='buyer,acc,else';var field=new FieldEnum("client_kind",options);pm.addField(field);var options={};options.alias="Источник обращения";var field=new FieldInt("client_come_from_id",options);pm.addField(field);var options={};options.alias="Менеджер";var field=new FieldInt("manager_id",options);pm.addField(field);var options={};var field=new FieldDate("create_date",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};var field=new FieldString("inn",options);pm.addField(field);var options={};var field=new FieldString("kpp",options);pm.addField(field);var options={};var field=new FieldText("address_legal",options);pm.addField(field);var options={};var field=new FieldText("address_fact",options);pm.addField(field);var options={};var field=new FieldText("tels_1c",options);pm.addField(field);var options={};options.alias="Аккаунт";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Дата начала выборки данных";var field=new FieldDate("account_from_date",options);pm.addField(field);var options={};options.alias="БИК банка";var field=new FieldString("bank_bik",options);pm.addField(field);var options={};options.alias="Банковский счет";var field=new FieldString("bank_account",options);pm.addField(field);var options={};options.alias="Ссылка на справочник 1с";var field=new FieldJSONB("ref_1c",options);pm.addField(field);var options={};var field=new FieldFloat("shipment_quant_for_cost",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Client_Controller.prototype.addUpdate=function(){Client_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Полное наименование";var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Сотовый телефон";var field=new FieldString("phone_cel",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("manager_comment",options);pm.addField(field);var options={};options.alias="Вид контрагента";var field=new FieldInt("client_type_id",options);pm.addField(field);var options={};options.alias="Тип контрагента";options.enumValues='buyer,acc,else';var field=new FieldEnum("client_kind",options);pm.addField(field);var options={};options.alias="Источник обращения";var field=new FieldInt("client_come_from_id",options);pm.addField(field);var options={};options.alias="Менеджер";var field=new FieldInt("manager_id",options);pm.addField(field);var options={};var field=new FieldDate("create_date",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};var field=new FieldString("inn",options);pm.addField(field);var options={};var field=new FieldString("kpp",options);pm.addField(field);var options={};var field=new FieldText("address_legal",options);pm.addField(field);var options={};var field=new FieldText("address_fact",options);pm.addField(field);var options={};var field=new FieldText("tels_1c",options);pm.addField(field);var options={};options.alias="Аккаунт";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Дата начала выборки данных";var field=new FieldDate("account_from_date",options);pm.addField(field);var options={};options.alias="БИК банка";var field=new FieldString("bank_bik",options);pm.addField(field);var options={};options.alias="Банковский счет";var field=new FieldString("bank_account",options);pm.addField(field);var options={};options.alias="Ссылка на справочник 1с";var field=new FieldJSONB("ref_1c",options);pm.addField(field);var options={};var field=new FieldFloat("shipment_quant_for_cost",options);pm.addField(field);}
Client_Controller.prototype.addDelete=function(){Client_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Client_Controller.prototype.addGetList=function(){Client_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldString("manager_comment",f_opts));var f_opts={};pm.addField(new FieldInt("client_type_id",f_opts));var f_opts={};pm.addField(new FieldJSON("client_types_ref",f_opts));var f_opts={};f_opts.alias="Источник";pm.addField(new FieldJSON("client_come_from_ref",f_opts));var f_opts={};pm.addField(new FieldInt("client_come_from_id",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("phone_cel",f_opts));var f_opts={};f_opts.alias="Наш";pm.addField(new FieldString("ours",f_opts));var f_opts={};f_opts.alias="Вид клиента";pm.addField(new FieldString("client_kind",f_opts));var f_opts={};f_opts.alias="Email";pm.addField(new FieldString("email",f_opts));var f_opts={};f_opts.alias="Первое обращение";pm.addField(new FieldDate("first_call_date",f_opts));var f_opts={};f_opts.alias="Кто завел";pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};f_opts.alias="ИНН";pm.addField(new FieldString("inn",f_opts));var f_opts={};f_opts.alias="Аккаунт";pm.addField(new FieldJSON("accounts_ref",f_opts));var f_opts={};f_opts.alias="Контакты";pm.addField(new FieldJSON("contact_list",f_opts));var f_opts={};f_opts.alias="Ids for filter";pm.addField(new FieldText("contact_ids",f_opts));var f_opts={};pm.addField(new FieldJSON("descr",f_opts));var f_opts={};pm.addField(new FieldBool("ref_1c_exists",f_opts));}
Client_Controller.prototype.addGetObject=function(){Client_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Client_Controller.prototype.addComplete=function(){Client_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Client_Controller.prototype.add_complete_for_order=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_for_order',opts);var options={};options.required=true;pm.addField(new FieldString("name",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Client_Controller.prototype.add_union=function(){var opts={"controller":this};var pm=new PublicMethodServer('union',opts);var options={};options.required=true;pm.addField(new FieldInt("main_client_id",options));var options={};options.required=true;pm.addField(new FieldString("client_ids",options));this.addPublicMethod(pm);}
Client_Controller.prototype.add_set_duplicate_valid=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_duplicate_valid',opts);var options={};options.required=true;pm.addField(new FieldString("tel",options));var options={};options.required=true;pm.addField(new FieldString("client_ids",options));this.addPublicMethod(pm);}
Client_Controller.prototype.add_get_duplicates_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_duplicates_list',opts);var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));this.addPublicMethod(pm);}
Client_Controller.prototype.add_insert_from_order=function(){var opts={"controller":this};var pm=new PublicMethodServer('insert_from_order',opts);var options={};options.required=true;options.maxlength="100";pm.addField(new FieldString("name",options));this.addPublicMethod(pm);} 
function Supplier_Controller(options){options=options||{};options.listModelClass=SupplierList_Model;options.objModelClass=Supplier_Model;Supplier_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();}
extend(Supplier_Controller,ControllerObjServer);Supplier_Controller.prototype.addInsert=function(){Supplier_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Полное наименование";options.required=true;var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Мобильный телефон";var field=new FieldString("tel",options);pm.addField(field);var options={};options.alias="Мобильный телефон";var field=new FieldString("tel2",options);pm.addField(field);var options={};var field=new FieldInt("lang_id",options);pm.addField(field);var options={};var field=new FieldString("ext_ref_scales",options);pm.addField(field);var options={};var field=new FieldInt("lang_id",options);pm.addField(field);var options={};options.alias="Уведомлять о заказе";var field=new FieldBool("order_notification",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Supplier_Controller.prototype.addUpdate=function(){Supplier_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Полное наименование";var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Мобильный телефон";var field=new FieldString("tel",options);pm.addField(field);var options={};options.alias="Мобильный телефон";var field=new FieldString("tel2",options);pm.addField(field);var options={};var field=new FieldInt("lang_id",options);pm.addField(field);var options={};var field=new FieldString("ext_ref_scales",options);pm.addField(field);var options={};var field=new FieldInt("lang_id",options);pm.addField(field);var options={};options.alias="Уведомлять о заказе";var field=new FieldBool("order_notification",options);pm.addField(field);}
Supplier_Controller.prototype.addDelete=function(){Supplier_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Supplier_Controller.prototype.addGetList=function(){Supplier_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Контакты";pm.addField(new FieldJSON("contact_list",f_opts));}
Supplier_Controller.prototype.addGetObject=function(){Supplier_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Supplier_Controller.prototype.addComplete=function(){Supplier_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function DOCMaterialProcurement_Controller(options){options=options||{};options.listModelClass=DOCMaterialProcurementList_Model;options.objModelClass=DOCMaterialProcurementDialog_Model;DOCMaterialProcurement_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_before_open();this.add_get_actions();this.add_get_print();this.add_get_material_list();this.add_get_shift_list();this.add_complete_driver();this.add_complete_vehicle_plate();this.add_complete_store();this.add_complete_sender_name();}
extend(DOCMaterialProcurement_Controller,ControllerObjServer);DOCMaterialProcurement_Controller.prototype.addInsert=function(){DOCMaterialProcurement_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldString("number",options);pm.addField(field);var options={};var field=new FieldString("doc_ref",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Поставщик";options.required=true;var field=new FieldInt("supplier_id",options);pm.addField(field);var options={};options.alias="Перевозчик";options.required=true;var field=new FieldInt("carrier_id",options);pm.addField(field);var options={};options.alias="Водитель";var field=new FieldString("driver",options);pm.addField(field);var options={};options.alias="гос.номер";var field=new FieldString("vehicle_plate",options);pm.addField(field);var options={};options.alias="Материал";options.required=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Силос";var field=new FieldInt("cement_silos_id",options);pm.addField(field);var options={};options.alias="Брутто";var field=new FieldFloat("quant_gross",options);pm.addField(field);var options={};options.alias="Нетто";var field=new FieldFloat("quant_net",options);pm.addField(field);var options={};var field=new FieldText("store",options);pm.addField(field);var options={};var field=new FieldText("sender_name",options);pm.addField(field);var options={};options.alias="База";var field=new FieldInt("production_base_id",options);pm.addField(field);var options={};options.alias="Брутто по документам";var field=new FieldFloat("doc_quant_gross",options);pm.addField(field);var options={};options.alias="Нетто по документам";var field=new FieldFloat("doc_quant_net",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Кто последний вносил изменения";var field=new FieldInt("last_modif_user_id",options);pm.addField(field);var options={};options.alias="Время последнего изменения";var field=new FieldDateTimeTZ("last_modif_date_time",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DOCMaterialProcurement_Controller.prototype.addUpdate=function(){DOCMaterialProcurement_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldString("number",options);pm.addField(field);var options={};var field=new FieldString("doc_ref",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Поставщик";var field=new FieldInt("supplier_id",options);pm.addField(field);var options={};options.alias="Перевозчик";var field=new FieldInt("carrier_id",options);pm.addField(field);var options={};options.alias="Водитель";var field=new FieldString("driver",options);pm.addField(field);var options={};options.alias="гос.номер";var field=new FieldString("vehicle_plate",options);pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Силос";var field=new FieldInt("cement_silos_id",options);pm.addField(field);var options={};options.alias="Брутто";var field=new FieldFloat("quant_gross",options);pm.addField(field);var options={};options.alias="Нетто";var field=new FieldFloat("quant_net",options);pm.addField(field);var options={};var field=new FieldText("store",options);pm.addField(field);var options={};var field=new FieldText("sender_name",options);pm.addField(field);var options={};options.alias="База";var field=new FieldInt("production_base_id",options);pm.addField(field);var options={};options.alias="Брутто по документам";var field=new FieldFloat("doc_quant_gross",options);pm.addField(field);var options={};options.alias="Нетто по документам";var field=new FieldFloat("doc_quant_net",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Кто последний вносил изменения";var field=new FieldInt("last_modif_user_id",options);pm.addField(field);var options={};options.alias="Время последнего изменения";var field=new FieldDateTimeTZ("last_modif_date_time",options);pm.addField(field);}
DOCMaterialProcurement_Controller.prototype.addDelete=function(){DOCMaterialProcurement_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DOCMaterialProcurement_Controller.prototype.addGetList=function(){DOCMaterialProcurement_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("number",f_opts));var f_opts={};pm.addField(new FieldString("doc_ref",f_opts));var f_opts={};f_opts.alias="Проведен";pm.addField(new FieldBool("processed",f_opts));var f_opts={};f_opts.alias="Автор";pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Поставщик";pm.addField(new FieldInt("supplier_id",f_opts));var f_opts={};f_opts.alias="Перевозчик";pm.addField(new FieldInt("carrier_id",f_opts));var f_opts={};f_opts.alias="Водитель";pm.addField(new FieldString("driver",f_opts));var f_opts={};f_opts.alias="гос.номер";pm.addField(new FieldString("vehicle_plate",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldInt("material_id",f_opts));var f_opts={};f_opts.alias="Силос";pm.addField(new FieldInt("cement_silos_id",f_opts));var f_opts={};f_opts.alias="Брутто";pm.addField(new FieldFloat("quant_gross",f_opts));var f_opts={};f_opts.alias="Нетто";pm.addField(new FieldFloat("quant_net",f_opts));var f_opts={};pm.addField(new FieldText("store",f_opts));var f_opts={};pm.addField(new FieldText("sender_name",f_opts));var f_opts={};f_opts.alias="База";pm.addField(new FieldInt("production_base_id",f_opts));var f_opts={};f_opts.alias="Брутто по документам";pm.addField(new FieldFloat("doc_quant_gross",f_opts));var f_opts={};f_opts.alias="Нетто по документам";pm.addField(new FieldFloat("doc_quant_net",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));var f_opts={};f_opts.alias="Кто последний вносил изменения";pm.addField(new FieldInt("last_modif_user_id",f_opts));var f_opts={};f_opts.alias="Время последнего изменения";pm.addField(new FieldDateTimeTZ("last_modif_date_time",f_opts));}
DOCMaterialProcurement_Controller.prototype.addGetObject=function(){DOCMaterialProcurement_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
DOCMaterialProcurement_Controller.prototype.add_before_open=function(){var opts={"controller":this};var pm=new PublicMethodServer('before_open',opts);var options={};pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DOCMaterialProcurement_Controller.prototype.add_get_actions=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_actions',opts);var options={};pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DOCMaterialProcurement_Controller.prototype.add_get_print=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_print',opts);var options={};pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DOCMaterialProcurement_Controller.prototype.add_get_material_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_material_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
DOCMaterialProcurement_Controller.prototype.add_get_shift_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_shift_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
DOCMaterialProcurement_Controller.prototype.add_complete_driver=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_driver',opts);var options={};options.maxlength="300";pm.addField(new FieldString("driver",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
DOCMaterialProcurement_Controller.prototype.add_complete_vehicle_plate=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_vehicle_plate',opts);var options={};options.maxlength="300";pm.addField(new FieldString("vehicle_plate",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
DOCMaterialProcurement_Controller.prototype.add_complete_store=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_store',opts);var options={};options.maxlength="300";pm.addField(new FieldString("store",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
DOCMaterialProcurement_Controller.prototype.add_complete_sender_name=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_sender_name',opts);var options={};options.maxlength="300";pm.addField(new FieldString("sender_name",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);} 
function ConcreteType_Controller(options){options=options||{};options.listModelClass=ConcreteTypeList_Model;options.objModelClass=ConcreteTypeList_Model;ConcreteType_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_get_list_for_lab();this.add_get_for_client_list();this.add_get_for_site_list();}
extend(ConcreteType_Controller,ControllerObjServer);ConcreteType_Controller.prototype.addInsert=function(){ConcreteType_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Код 1С";options.required=true;var field=new FieldString("code_1c",options);pm.addField(field);var options={};options.alias="Норма давл.";options.required=true;var field=new FieldFloat("pres_norm",options);pm.addField(field);var options={};options.alias="Кф.МПА";var field=new FieldFloat("mpa_ratio",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Есть нормы расхода";var field=new FieldBool("material_cons_rates",options);pm.addField(field);var options={};options.alias="Отображать на сайте";var field=new FieldBool("show_on_site",options);pm.addField(field);var options={};options.alias="Официальное наименование для накладной";var field=new FieldString("official_name",options);pm.addField(field);var options={};options.alias="Прочность для паспорта качества";var field=new FieldInt("prochnost",options);pm.addField(field);var options={};options.alias="F";var field=new FieldInt("f_val",options);pm.addField(field);var options={};options.alias="W";var field=new FieldInt("w_val",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ConcreteType_Controller.prototype.addUpdate=function(){ConcreteType_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Код 1С";var field=new FieldString("code_1c",options);pm.addField(field);var options={};options.alias="Норма давл.";var field=new FieldFloat("pres_norm",options);pm.addField(field);var options={};options.alias="Кф.МПА";var field=new FieldFloat("mpa_ratio",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Есть нормы расхода";var field=new FieldBool("material_cons_rates",options);pm.addField(field);var options={};options.alias="Отображать на сайте";var field=new FieldBool("show_on_site",options);pm.addField(field);var options={};options.alias="Официальное наименование для накладной";var field=new FieldString("official_name",options);pm.addField(field);var options={};options.alias="Прочность для паспорта качества";var field=new FieldInt("prochnost",options);pm.addField(field);var options={};options.alias="F";var field=new FieldInt("f_val",options);pm.addField(field);var options={};options.alias="W";var field=new FieldInt("w_val",options);pm.addField(field);}
ConcreteType_Controller.prototype.addDelete=function(){ConcreteType_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
ConcreteType_Controller.prototype.addGetList=function(){ConcreteType_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Код 1С";pm.addField(new FieldString("code_1c",f_opts));var f_opts={};f_opts.alias="Норма давл.";pm.addField(new FieldFloat("pres_norm",f_opts));var f_opts={};f_opts.alias="Кф.МПА";pm.addField(new FieldFloat("mpa_ratio",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Есть нормы расхода";pm.addField(new FieldBool("material_cons_rates",f_opts));var f_opts={};f_opts.alias="Отображать на сайте";pm.addField(new FieldBool("show_on_site",f_opts));var f_opts={};f_opts.alias="Официальное наименование для накладной";pm.addField(new FieldString("official_name",f_opts));var f_opts={};f_opts.alias="Прочность для паспорта качества";pm.addField(new FieldInt("prochnost",f_opts));var f_opts={};f_opts.alias="F";pm.addField(new FieldInt("f_val",f_opts));var f_opts={};f_opts.alias="W";pm.addField(new FieldInt("w_val",f_opts));}
ConcreteType_Controller.prototype.addGetObject=function(){ConcreteType_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
ConcreteType_Controller.prototype.addComplete=function(){ConcreteType_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
ConcreteType_Controller.prototype.add_get_list_for_lab=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_list_for_lab',opts);this.addPublicMethod(pm);}
ConcreteType_Controller.prototype.add_get_for_client_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_for_client_list',opts);this.addPublicMethod(pm);}
ConcreteType_Controller.prototype.add_get_for_site_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_for_site_list',opts);this.addPublicMethod(pm);} 
function Destination_Controller(options){options=options||{};options.listModelClass=DestinationList_Model;options.objModelClass=DestinationDialog_Model;Destination_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_complete_dest();this.add_complete_for_order();this.add_complete_for_site();this.add_get_for_client_list();this.add_get_coords_on_name();this.add_get_route_to_zone();this.add_at_dest_avg_time();this.add_route_to_dest_avg_time();}
extend(Destination_Controller,ControllerObjServer);Destination_Controller.prototype.addInsert=function(){Destination_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Расстояние";var field=new FieldFloat("distance",options);pm.addField(field);var options={};options.alias="Время";options.required=true;var field=new FieldTime("time_route",options);pm.addField(field);var options={};options.alias="Стоимость";var field=new FieldFloat("price",options);pm.addField(field);var options={};var field=new FieldString("zone",options);pm.addField(field);var options={};var field=new FieldBool("special_price",options);pm.addField(field);var options={};var field=new FieldFloat("price_for_driver",options);pm.addField(field);var options={};var field=new FieldFloat("near_road_lon",options);pm.addField(field);var options={};var field=new FieldFloat("near_road_lat",options);pm.addField(field);var options={};options.alias="Отправлять СМС с маршрутом";var field=new FieldBool("send_route_sms",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Destination_Controller.prototype.addUpdate=function(){Destination_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Расстояние";var field=new FieldFloat("distance",options);pm.addField(field);var options={};options.alias="Время";var field=new FieldTime("time_route",options);pm.addField(field);var options={};options.alias="Стоимость";var field=new FieldFloat("price",options);pm.addField(field);var options={};var field=new FieldString("zone",options);pm.addField(field);var options={};var field=new FieldBool("special_price",options);pm.addField(field);var options={};var field=new FieldFloat("price_for_driver",options);pm.addField(field);var options={};var field=new FieldFloat("near_road_lon",options);pm.addField(field);var options={};var field=new FieldFloat("near_road_lat",options);pm.addField(field);var options={};options.alias="Отправлять СМС с маршрутом";var field=new FieldBool("send_route_sms",options);pm.addField(field);}
Destination_Controller.prototype.addDelete=function(){Destination_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Destination_Controller.prototype.addGetList=function(){Destination_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldString("distance",f_opts));var f_opts={};pm.addField(new FieldTime("time_route",f_opts));var f_opts={};pm.addField(new FieldBool("special_price",f_opts));var f_opts={};pm.addField(new FieldString("price",f_opts));var f_opts={};pm.addField(new FieldFloat("price_for_driver",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Destination_Controller.prototype.addGetObject=function(){Destination_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Destination_Controller.prototype.add_complete_dest=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_dest',opts);var options={};pm.addField(new FieldString("name_pat",options));var options={};pm.addField(new FieldInt("client_id",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Destination_Controller.prototype.add_complete_for_order=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_for_order',opts);var options={};pm.addField(new FieldString("name_pat",options));var options={};pm.addField(new FieldInt("client_id",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Destination_Controller.prototype.add_complete_for_site=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_for_site',opts);var options={};options.required=true;options.maxlength="200";pm.addField(new FieldString("search",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);}
Destination_Controller.prototype.add_get_for_client_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_for_client_list',opts);this.addPublicMethod(pm);}
Destination_Controller.prototype.add_get_coords_on_name=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_coords_on_name',opts);var options={};pm.addField(new FieldString("name",options));this.addPublicMethod(pm);}
Destination_Controller.prototype.add_get_route_to_zone=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_route_to_zone',opts);var options={};pm.addField(new FieldString("zone_coords",options));this.addPublicMethod(pm);}
Destination_Controller.prototype.add_at_dest_avg_time=function(){var opts={"controller":this};var pm=new PublicMethodServer('at_dest_avg_time',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Destination_Controller.prototype.add_route_to_dest_avg_time=function(){var opts={"controller":this};var pm=new PublicMethodServer('route_to_dest_avg_time',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);} 
function Driver_Controller(options){options=options||{};options.listModelClass=DriverList_Model;options.objModelClass=DriverList_Model;Driver_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_driver_cheat_report();}
extend(Driver_Controller,ControllerObjServer);Driver_Controller.prototype.addInsert=function(){Driver_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Водительское удостоверение";var field=new FieldText("driver_licence",options);pm.addField(field);var options={};options.alias="Класс водительского удостоверения";var field=new FieldString("driver_licence_class",options);pm.addField(field);var options={};options.alias="Официально устроен";var field=new FieldBool("employed",options);pm.addField(field);var options={};options.alias="Person inn";var field=new FieldText("inn",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Driver_Controller.prototype.addUpdate=function(){Driver_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Водительское удостоверение";var field=new FieldText("driver_licence",options);pm.addField(field);var options={};options.alias="Класс водительского удостоверения";var field=new FieldString("driver_licence_class",options);pm.addField(field);var options={};options.alias="Официально устроен";var field=new FieldBool("employed",options);pm.addField(field);var options={};options.alias="Person inn";var field=new FieldText("inn",options);pm.addField(field);}
Driver_Controller.prototype.addDelete=function(){Driver_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Driver_Controller.prototype.addGetList=function(){Driver_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Водительское удостоверение";pm.addField(new FieldText("driver_licence",f_opts));var f_opts={};f_opts.alias="Класс водительского удостоверения";pm.addField(new FieldString("driver_licence_class",f_opts));var f_opts={};f_opts.alias="Контакты";pm.addField(new FieldJSON("contact_list",f_opts));var f_opts={};f_opts.alias="Контакты";pm.addField(new FieldText("contact_ids",f_opts));var f_opts={};f_opts.alias="Официально устроен";pm.addField(new FieldBool("employed",f_opts));var f_opts={};f_opts.alias="ИНН водителя";pm.addField(new FieldText("inn",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Driver_Controller.prototype.addGetObject=function(){Driver_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Driver_Controller.prototype.addComplete=function(){Driver_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Driver_Controller.prototype.add_driver_cheat_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('driver_cheat_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldTime("stop_duration",options));var options={};pm.addField(new FieldInt("stop_spot_offset",options));var options={};pm.addField(new FieldDateTime("cheat_end_date_time",options));var options={};pm.addField(new FieldInt("vehicle_id",options));this.addPublicMethod(pm);} 
function Order_Controller(options){options=options||{};options.listModelClass=OrderList_Model;options.objModelClass=OrderDialog_Model;Order_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_object_for_lab();this.add_get_make_orders_form();this.add_get_make_orders_form_ord();this.add_get_make_orders_form_veh();this.add_get_make_orders_form_mat();this.add_get_make_orders_for_weighing_form();this.add_get_make_orders_for_lab_form();this.add_get_make_orders_for_lab_form_ord();this.add_get_make_orders_for_lab_form_veh();this.add_get_make_orders_for_lab_form_mat();this.add_get_make_orders_list();this.add_get_make_orders_for_lab_list();this.add_get_avail_spots();this.add_complete_descr();this.add_get_comment();this.add_fields_from_client_order();this.add_set_payed();this.addComplete();this.add_get_list_for_client();this.add_calc_for_site();this.add_get_transp_nakl_list();this.add_get_transp_nakl_shipment_list();this.add_get_nakl_1c_list();}
extend(Order_Controller,ControllerObjServer);Order_Controller.prototype.addInsert=function(){Order_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="клиент";options.required=true;var field=new FieldInt("client_id",options);pm.addField(field);var options={};options.alias="Направление";options.required=true;var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="Марка бетона";options.required=true;var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};options.alias="Прокачка";options.enumValues='pump,band,none';var field=new FieldEnum("unload_type",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Описание";var field=new FieldText("descr",options);pm.addField(field);var options={};options.alias="Дата";options.required=true;var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Время до";var field=new FieldDateTime("date_time_to",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Сот.телефон";var field=new FieldString("phone_cel",options);pm.addField(field);var options={};options.alias="Разгрузка куб/ч";var field=new FieldFloat("unload_speed",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Язык";var field=new FieldInt("lang_id",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Стоимость";var field=new FieldFloat("concrete_price",options);pm.addField(field);var options={};options.alias="Стоимость дост.";var field=new FieldFloat("destination_price",options);pm.addField(field);var options={};options.alias="Стоимость прокачки";var field=new FieldFloat("unload_price",options);pm.addField(field);var options={};options.alias="Насос";var field=new FieldInt("pump_vehicle_id",options);pm.addField(field);var options={};options.alias="Оплата на месте";var field=new FieldBool("pay_cash",options);pm.addField(field);var options={};var field=new FieldBool("total_edit",options);pm.addField(field);var options={};var field=new FieldBool("payed",options);pm.addField(field);var options={};var field=new FieldBool("under_control",options);pm.addField(field);var options={};options.alias="Кто последний вносил изменения";var field=new FieldInt("last_modif_user_id",options);pm.addField(field);var options={};options.alias="Время последнего изменения";var field=new FieldDateTimeTZ("last_modif_date_time",options);pm.addField(field);var options={};options.alias="Время создания";var field=new FieldDateTimeTZ("create_date_time",options);pm.addField(field);var options={};options.alias="Для другого завода";var field=new FieldBool("ext_production",options);pm.addField(field);var options={};options.alias="Контакт";var field=new FieldInt("contact_id",options);pm.addField(field);var options={};options.alias="Спецификация";var field=new FieldInt("client_specification_id",options);pm.addField(field);var options={};options.alias="F";var field=new FieldInt("f_val",options);pm.addField(field);var options={};options.alias="W";var field=new FieldInt("w_val",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Order_Controller.prototype.addUpdate=function(){Order_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="клиент";var field=new FieldInt("client_id",options);pm.addField(field);var options={};options.alias="Направление";var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="Марка бетона";var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};options.alias="Прокачка";options.enumValues='pump,band,none';var field=new FieldEnum("unload_type",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Описание";var field=new FieldText("descr",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Время до";var field=new FieldDateTime("date_time_to",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Сот.телефон";var field=new FieldString("phone_cel",options);pm.addField(field);var options={};options.alias="Разгрузка куб/ч";var field=new FieldFloat("unload_speed",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Язык";var field=new FieldInt("lang_id",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Стоимость";var field=new FieldFloat("concrete_price",options);pm.addField(field);var options={};options.alias="Стоимость дост.";var field=new FieldFloat("destination_price",options);pm.addField(field);var options={};options.alias="Стоимость прокачки";var field=new FieldFloat("unload_price",options);pm.addField(field);var options={};options.alias="Насос";var field=new FieldInt("pump_vehicle_id",options);pm.addField(field);var options={};options.alias="Оплата на месте";var field=new FieldBool("pay_cash",options);pm.addField(field);var options={};var field=new FieldBool("total_edit",options);pm.addField(field);var options={};var field=new FieldBool("payed",options);pm.addField(field);var options={};var field=new FieldBool("under_control",options);pm.addField(field);var options={};options.alias="Кто последний вносил изменения";var field=new FieldInt("last_modif_user_id",options);pm.addField(field);var options={};options.alias="Время последнего изменения";var field=new FieldDateTimeTZ("last_modif_date_time",options);pm.addField(field);var options={};options.alias="Время создания";var field=new FieldDateTimeTZ("create_date_time",options);pm.addField(field);var options={};options.alias="Для другого завода";var field=new FieldBool("ext_production",options);pm.addField(field);var options={};options.alias="Контакт";var field=new FieldInt("contact_id",options);pm.addField(field);var options={};options.alias="Спецификация";var field=new FieldInt("client_specification_id",options);pm.addField(field);var options={};options.alias="F";var field=new FieldInt("f_val",options);pm.addField(field);var options={};options.alias="W";var field=new FieldInt("w_val",options);pm.addField(field);}
Order_Controller.prototype.addDelete=function(){Order_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Order_Controller.prototype.addGetList=function(){Order_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("number",f_opts));var f_opts={};f_opts.alias="Клиент";pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};f_opts.alias="Объект";pm.addField(new FieldJSON("destinations_ref",f_opts));var f_opts={};pm.addField(new FieldInt("destination_id",f_opts));var f_opts={};f_opts.alias="Марка";pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};pm.addField(new FieldInt("concrete_type_id",f_opts));var f_opts={};f_opts.alias="Вид разгрузки";pm.addField(new FieldString("unload_type",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("comment_text",f_opts));var f_opts={};f_opts.alias="Прораб";pm.addField(new FieldText("descr",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("phone_cel",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Сотрудник";pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldJSON("orders_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("contacts_ref",f_opts));}
Order_Controller.prototype.addGetObject=function(){Order_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Order_Controller.prototype.add_get_object_for_lab=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_object_for_lab',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_make_orders_form=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_make_orders_form',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldString("lsn",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_make_orders_form_ord=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_make_orders_form_ord',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldString("lsn",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_make_orders_form_veh=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_make_orders_form_veh',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldString("lsn",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_make_orders_form_mat=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_make_orders_form_mat',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldString("lsn",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_make_orders_for_weighing_form=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_make_orders_for_weighing_form',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldString("lsn",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_make_orders_for_lab_form=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_make_orders_for_lab_form',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldString("lsn",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_make_orders_for_lab_form_ord=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_make_orders_for_lab_form_ord',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldString("lsn",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_make_orders_for_lab_form_veh=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_make_orders_for_lab_form_veh',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldString("lsn",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_make_orders_for_lab_form_mat=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_make_orders_for_lab_form_mat',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldString("lsn",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_make_orders_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_make_orders_list',opts);var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_make_orders_for_lab_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_make_orders_for_lab_list',opts);this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_avail_spots=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_avail_spots',opts);var options={};options.required=true;pm.addField(new FieldDate("date",options));var options={};options.required=true;pm.addField(new FieldFloat("quant",options));var options={};options.required=true;pm.addField(new FieldFloat("speed",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_complete_descr=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_descr',opts);var options={};options.required=true;pm.addField(new FieldInt("client_id",options));var options={};pm.addField(new FieldString("descr",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_comment=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_comment',opts);var options={};options.required=true;pm.addField(new FieldInt("order_id",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_fields_from_client_order=function(){var opts={"controller":this};var pm=new PublicMethodServer('fields_from_client_order',opts);var options={};options.required=true;pm.addField(new FieldInt("client_order_id",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_set_payed=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_payed',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Order_Controller.prototype.addComplete=function(){Order_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("number",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("number");}
Order_Controller.prototype.add_get_list_for_client=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_list_for_client',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Order_Controller.prototype.add_calc_for_site=function(){var opts={"controller":this};var pm=new PublicMethodServer('calc_for_site',opts);var options={};options.required=true;pm.addField(new FieldText("address",options));var options={};options.required=true;pm.addField(new FieldInt("concrete_type_id",options));var options={};options.required=true;pm.addField(new FieldFloat("quant",options));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_transp_nakl_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_transp_nakl_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_transp_nakl_shipment_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_transp_nakl_shipment_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Order_Controller.prototype.add_get_nakl_1c_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_nakl_1c_list',opts);var options={};pm.addField(new FieldText("shipment_ids",options));var options={};pm.addField(new FieldText("order_ids",options));this.addPublicMethod(pm);} 
function RawMaterial_Controller(options){options=options||{};options.listModelClass=RawMaterial_Model;options.objModelClass=RawMaterial_Model;RawMaterial_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_get_list_for_concrete();this.add_supplier_orders_list();this.add_update_procurement();this.add_load_procurement();this.add_oper_week_report();this.add_total_report();this.add_total_details_report();this.add_set_min_quant();this.add_correct_consumption();this.add_correct_obnul();this.add_correct_list();this.add_total_list();this.add_mat_totals();this.add_get_material_actions_list();this.add_get_material_actions_by_shift_list();this.add_get_material_avg_cons_on_ctp();this.add_get_material_cons_tolerance_violation_list();}
extend(RawMaterial_Controller,ControllerObjServer);RawMaterial_Controller.prototype.addInsert=function(){RawMaterial_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Плановый приход";var field=new FieldFloat("planned_procurement",options);pm.addField(field);var options={};options.alias="Дней завоза";var field=new FieldInt("supply_days_count",options);pm.addField(field);var options={};var field=new FieldBool("concrete_part",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("ord",options);pm.addField(field);var options={};options.alias="Объем ТС завоза";var field=new FieldInt("supply_volume",options);pm.addField(field);var options={};var field=new FieldInt("store_days",options);pm.addField(field);var options={};var field=new FieldFloat("min_end_quant",options);pm.addField(field);var options={};var field=new FieldFloat("max_required_quant_tolerance_percent",options);pm.addField(field);var options={};var field=new FieldFloat("max_fact_quant_tolerance_percent",options);pm.addField(field);var options={};options.alias="Цемент,учет в силосе";var field=new FieldBool("is_cement",options);pm.addField(field);var options={};options.alias="Учет по местам хранения";var field=new FieldBool("dif_store",options);pm.addField(field);var options={};var field=new FieldBool("deleted",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
RawMaterial_Controller.prototype.addUpdate=function(){RawMaterial_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Плановый приход";var field=new FieldFloat("planned_procurement",options);pm.addField(field);var options={};options.alias="Дней завоза";var field=new FieldInt("supply_days_count",options);pm.addField(field);var options={};var field=new FieldBool("concrete_part",options);pm.addField(field);var options={};var field=new FieldInt("ord",options);pm.addField(field);var options={};options.alias="Объем ТС завоза";var field=new FieldInt("supply_volume",options);pm.addField(field);var options={};var field=new FieldInt("store_days",options);pm.addField(field);var options={};var field=new FieldFloat("min_end_quant",options);pm.addField(field);var options={};var field=new FieldFloat("max_required_quant_tolerance_percent",options);pm.addField(field);var options={};var field=new FieldFloat("max_fact_quant_tolerance_percent",options);pm.addField(field);var options={};options.alias="Цемент,учет в силосе";var field=new FieldBool("is_cement",options);pm.addField(field);var options={};options.alias="Учет по местам хранения";var field=new FieldBool("dif_store",options);pm.addField(field);var options={};var field=new FieldBool("deleted",options);pm.addField(field);}
RawMaterial_Controller.prototype.addDelete=function(){RawMaterial_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
RawMaterial_Controller.prototype.addGetList=function(){RawMaterial_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Плановый приход";pm.addField(new FieldFloat("planned_procurement",f_opts));var f_opts={};f_opts.alias="Дней завоза";pm.addField(new FieldInt("supply_days_count",f_opts));var f_opts={};pm.addField(new FieldBool("concrete_part",f_opts));var f_opts={};pm.addField(new FieldInt("ord",f_opts));var f_opts={};f_opts.alias="Объем ТС завоза";pm.addField(new FieldInt("supply_volume",f_opts));var f_opts={};pm.addField(new FieldInt("store_days",f_opts));var f_opts={};pm.addField(new FieldFloat("min_end_quant",f_opts));var f_opts={};pm.addField(new FieldFloat("max_required_quant_tolerance_percent",f_opts));var f_opts={};pm.addField(new FieldFloat("max_fact_quant_tolerance_percent",f_opts));var f_opts={};f_opts.alias="Цемент,учет в силосе";pm.addField(new FieldBool("is_cement",f_opts));var f_opts={};f_opts.alias="Учет по местам хранения";pm.addField(new FieldBool("dif_store",f_opts));var f_opts={};pm.addField(new FieldBool("deleted",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("ord");}
RawMaterial_Controller.prototype.addGetObject=function(){RawMaterial_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
RawMaterial_Controller.prototype.addComplete=function(){RawMaterial_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
RawMaterial_Controller.prototype.add_get_list_for_concrete=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_list_for_concrete',opts);this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_supplier_orders_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('supplier_orders_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_update_procurement=function(){var opts={"controller":this};var pm=new PublicMethodServer('update_procurement',opts);var options={};pm.addField(new FieldText("docs",options));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_load_procurement=function(){var opts={"controller":this};var pm=new PublicMethodServer('load_procurement',opts);var options={};pm.addField(new FieldText("doc",options));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_oper_week_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('oper_week_report',opts);this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_total_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('total_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_total_details_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('total_details_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_set_min_quant=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_min_quant',opts);var options={};pm.addField(new FieldDateTime("week_day",options));var options={};pm.addField(new FieldInt("material_id",options));var options={};options.maxlength="19";pm.addField(new FieldFloat("quant",options));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_correct_consumption=function(){var opts={"controller":this};var pm=new PublicMethodServer('correct_consumption',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldInt("material_id",options));var options={};options.maxlength="19";pm.addField(new FieldFloat("quant",options));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_correct_obnul=function(){var opts={"controller":this};var pm=new PublicMethodServer('correct_obnul',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldInt("material_id",options));var options={};options.maxlength="19";pm.addField(new FieldFloat("quant",options));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_correct_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('correct_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_total_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('total_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_mat_totals=function(){var opts={"controller":this};var pm=new PublicMethodServer('mat_totals',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldInt("production_base_id",options));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_get_material_actions_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_material_actions_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldInt("inline",options));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_get_material_actions_by_shift_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_material_actions_by_shift_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldInt("inline",options));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_get_material_avg_cons_on_ctp=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_material_avg_cons_on_ctp',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldInt("inline",options));this.addPublicMethod(pm);}
RawMaterial_Controller.prototype.add_get_material_cons_tolerance_violation_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_material_cons_tolerance_violation_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldInt("inline",options));this.addPublicMethod(pm);} 
function RawMaterialConsRateDate_Controller(options){options=options||{};options.listModelClass=RawMaterialConsRateDateList_Model;options.objModelClass=RawMaterialConsRateDateList_Model;RawMaterialConsRateDate_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_recalc_consumption();this.addComplete();}
extend(RawMaterialConsRateDate_Controller,ControllerObjServer);RawMaterialConsRateDate_Controller.prototype.addInsert=function(){RawMaterialConsRateDate_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";options.required=true;var field=new FieldDateTime("dt",options);pm.addField(field);var options={};options.alias="Наименование";var field=new FieldText("name",options);pm.addField(field);var options={};options.alias="Номер подбора";var field=new FieldInt("code",options);pm.addField(field);var options={};options.alias="Элемент-основание";var field=new FieldInt("base_id",options);pm.addField(field);var options={};options.alias="Завод";var field=new FieldInt("production_site_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
RawMaterialConsRateDate_Controller.prototype.addUpdate=function(){RawMaterialConsRateDate_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("dt",options);pm.addField(field);var options={};options.alias="Наименование";var field=new FieldText("name",options);pm.addField(field);var options={};options.alias="Номер подбора";var field=new FieldInt("code",options);pm.addField(field);var options={};options.alias="Элемент-основание";var field=new FieldInt("base_id",options);pm.addField(field);var options={};options.alias="Завод";var field=new FieldInt("production_site_id",options);pm.addField(field);}
RawMaterialConsRateDate_Controller.prototype.addDelete=function(){RawMaterialConsRateDate_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
RawMaterialConsRateDate_Controller.prototype.addGetList=function(){RawMaterialConsRateDate_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTime("dt",f_opts));var f_opts={};f_opts.alias="Период";pm.addField(new FieldText("period",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("name",f_opts));var f_opts={};f_opts.alias="№ подбора";pm.addField(new FieldInt("code",f_opts));var f_opts={};f_opts.alias="Завод";pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};f_opts.alias="Завод ID";pm.addField(new FieldInt("production_site_id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("dt");}
RawMaterialConsRateDate_Controller.prototype.addGetObject=function(){RawMaterialConsRateDate_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
RawMaterialConsRateDate_Controller.prototype.add_recalc_consumption=function(){var opts={"controller":this};var pm=new PublicMethodServer('recalc_consumption',opts);var options={};options.required=true;pm.addField(new FieldInt("period_id",options));var options={};options.required=true;pm.addField(new FieldInt("production_site_id",options));this.addPublicMethod(pm);}
RawMaterialConsRateDate_Controller.prototype.addComplete=function(){RawMaterialConsRateDate_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldInt("code",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("code");} 
function RawMaterialConsRate_Controller(options){options=options||{};options.listModelClass=RawMaterialConsRateList_Model;options.objModelClass=RawMaterialConsRateList_Model;RawMaterialConsRate_Controller.superclass.constructor.call(this,options);this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_raw_material_cons_report();}
extend(RawMaterialConsRate_Controller,ControllerObjServer);RawMaterialConsRate_Controller.prototype.addUpdate=function(){RawMaterialConsRate_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("rate_date_id",options);pm.addField(field);field=new FieldInt("old_rate_date_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("concrete_type_id",options);pm.addField(field);field=new FieldInt("old_concrete_type_id",{});pm.addField(field);var options={};var field=new FieldString("concrete_type_descr",options);pm.addField(field);var options={};var field=new FieldInt("mat1_id",options);pm.addField(field);var options={};var field=new FieldInt("mat2_id",options);pm.addField(field);var options={};var field=new FieldInt("mat3_id",options);pm.addField(field);var options={};var field=new FieldInt("mat4_id",options);pm.addField(field);var options={};var field=new FieldInt("mat5_id",options);pm.addField(field);var options={};var field=new FieldInt("mat6_id",options);pm.addField(field);var options={};var field=new FieldInt("mat7_id",options);pm.addField(field);var options={};var field=new FieldInt("mat8_id",options);pm.addField(field);var options={};var field=new FieldInt("mat9_id",options);pm.addField(field);var options={};var field=new FieldInt("mat10_id",options);pm.addField(field);var options={};var field=new FieldFloat("mat1_rate",options);pm.addField(field);var options={};var field=new FieldFloat("mat2_rate",options);pm.addField(field);var options={};var field=new FieldFloat("mat3_rate",options);pm.addField(field);var options={};var field=new FieldFloat("mat4_rate",options);pm.addField(field);var options={};var field=new FieldFloat("mat5_rate",options);pm.addField(field);var options={};var field=new FieldFloat("mat6_rate",options);pm.addField(field);var options={};var field=new FieldFloat("mat7_rate",options);pm.addField(field);var options={};var field=new FieldFloat("mat8_rate",options);pm.addField(field);var options={};var field=new FieldFloat("mat9_rate",options);pm.addField(field);var options={};var field=new FieldFloat("mat10_rate",options);pm.addField(field);var options={};pm.addField(new FieldInt("mat1_id",options));var options={};pm.addField(new FieldInt("mat2_id",options));var options={};pm.addField(new FieldInt("mat3_id",options));var options={};pm.addField(new FieldInt("mat4_id",options));var options={};pm.addField(new FieldInt("mat5_id",options));var options={};pm.addField(new FieldInt("mat6_id",options));var options={};pm.addField(new FieldInt("mat7_id",options));var options={};pm.addField(new FieldInt("mat8_id",options));var options={};pm.addField(new FieldInt("mat9_id",options));var options={};pm.addField(new FieldInt("mat10_id",options));var options={};pm.addField(new FieldFloat("mat1_rate",options));var options={};pm.addField(new FieldFloat("mat2_rate",options));var options={};pm.addField(new FieldFloat("mat3_rate",options));var options={};pm.addField(new FieldFloat("mat4_rate",options));var options={};pm.addField(new FieldFloat("mat5_rate",options));var options={};pm.addField(new FieldFloat("mat6_rate",options));var options={};pm.addField(new FieldFloat("mat7_rate",options));var options={};pm.addField(new FieldFloat("mat8_rate",options));var options={};pm.addField(new FieldFloat("mat9_rate",options));var options={};pm.addField(new FieldFloat("mat10_rate",options));}
RawMaterialConsRate_Controller.prototype.addDelete=function(){RawMaterialConsRate_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("rate_date_id",options));var options={"required":true};options.alias="Марка бетона";pm.addField(new FieldInt("concrete_type_id",options));var options={"required":true};options.alias="Материал";pm.addField(new FieldInt("raw_material_id",options));}
RawMaterialConsRate_Controller.prototype.addGetList=function(){RawMaterialConsRate_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("rate_date_id",f_opts));var f_opts={};pm.addField(new FieldInt("concrete_type_id",f_opts));var f_opts={};pm.addField(new FieldString("concrete_type_descr",f_opts));var f_opts={};pm.addField(new FieldInt("mat1_id",f_opts));var f_opts={};pm.addField(new FieldInt("mat2_id",f_opts));var f_opts={};pm.addField(new FieldInt("mat3_id",f_opts));var f_opts={};pm.addField(new FieldInt("mat4_id",f_opts));var f_opts={};pm.addField(new FieldInt("mat5_id",f_opts));var f_opts={};pm.addField(new FieldInt("mat6_id",f_opts));var f_opts={};pm.addField(new FieldInt("mat7_id",f_opts));var f_opts={};pm.addField(new FieldInt("mat8_id",f_opts));var f_opts={};pm.addField(new FieldInt("mat9_id",f_opts));var f_opts={};pm.addField(new FieldInt("mat10_id",f_opts));var f_opts={};pm.addField(new FieldFloat("mat1_rate",f_opts));var f_opts={};pm.addField(new FieldFloat("mat2_rate",f_opts));var f_opts={};pm.addField(new FieldFloat("mat3_rate",f_opts));var f_opts={};pm.addField(new FieldFloat("mat4_rate",f_opts));var f_opts={};pm.addField(new FieldFloat("mat5_rate",f_opts));var f_opts={};pm.addField(new FieldFloat("mat6_rate",f_opts));var f_opts={};pm.addField(new FieldFloat("mat7_rate",f_opts));var f_opts={};pm.addField(new FieldFloat("mat8_rate",f_opts));var f_opts={};pm.addField(new FieldFloat("mat9_rate",f_opts));var f_opts={};pm.addField(new FieldFloat("mat10_rate",f_opts));}
RawMaterialConsRate_Controller.prototype.addGetObject=function(){RawMaterialConsRate_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("rate_date_id",f_opts));var f_opts={};pm.addField(new FieldInt("concrete_type_id",f_opts));var options={};pm.addField(new FieldInt("mat1_id",options));var options={};pm.addField(new FieldInt("mat2_id",options));var options={};pm.addField(new FieldInt("mat3_id",options));var options={};pm.addField(new FieldInt("mat4_id",options));var options={};pm.addField(new FieldInt("mat5_id",options));var options={};pm.addField(new FieldInt("mat6_id",options));var options={};pm.addField(new FieldInt("mat7_id",options));var options={};pm.addField(new FieldInt("mat8_id",options));var options={};pm.addField(new FieldInt("mat9_id",options));var options={};pm.addField(new FieldInt("mat10_id",options));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
RawMaterialConsRate_Controller.prototype.add_raw_material_cons_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('raw_material_cons_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("grp_fields",options));var options={};pm.addField(new FieldString("agg_fields",options));this.addPublicMethod(pm);} 
function Shipment_Controller(options){options=options||{};options.listModelClass=ShipmentList_Model;options.objModelClass=ShipmentDialog_Model;Shipment_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.add_get_list_for_veh_owner();this.add_get_list_for_client();this.add_get_list_for_client_veh_owner();this.add_get_list_for_order();this.add_get_pump_list();this.add_get_pump_list_for_veh_owner();this.add_get_shipment_date_list();this.addGetObject();this.add_get_assigned_vehicle_list();this.add_get_operator_list();this.add_set_shipped();this.add_unset_shipped();this.add_shipment_report();this.add_shipment_invoice();this.add_shipment_ttn();this.add_shipment_putevoi_list();this.add_shipment_transp_nakl();this.add_shipment_transp_nakl_all();this.add_shipment_transp_nakl_on_list();this.add_get_time_list();this.add_set_blanks_exist();this.add_delete_shipped();this.add_delete_assigned();this.add_owner_set_agreed();this.add_owner_set_agreed_all();this.add_owner_set_pump_agreed();this.add_owner_set_pump_agreed_all();this.add_get_shipped_vihicles_list();this.addComplete();this.add_get_passport_ship();this.add_get_passport_all();this.add_get_passport_stamp_ship();this.add_get_passport_stamp_all();this.add_get_list_for_doc();}
extend(Shipment_Controller,ControllerObjServer);Shipment_Controller.prototype.addInsert=function(){Shipment_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Заявка";options.required=true;var field=new FieldInt("order_id",options);pm.addField(field);var options={};options.alias="Экипаж";options.required=true;var field=new FieldInt("vehicle_schedule_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Завод";var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};options.alias="Баллы";var field=new FieldInt("client_mark",options);pm.addField(field);var options={};options.alias="Простой";var field=new FieldInterval("demurrage",options);pm.addField(field);var options={};options.alias="Наличие бланков";var field=new FieldBool("blanks_exist",options);pm.addField(field);var options={};var field=new FieldBool("owner_agreed",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("owner_agreed_date_time",options);pm.addField(field);var options={};var field=new FieldText("acc_comment",options);pm.addField(field);var options={};var field=new FieldText("acc_comment_shipment",options);pm.addField(field);var options={};var field=new FieldBool("owner_pump_agreed",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("owner_pump_agreed_date_time",options);pm.addField(field);var options={};var field=new FieldFloat("pump_cost",options);pm.addField(field);var options={};var field=new FieldBool("pump_cost_edit",options);pm.addField(field);var options={};var field=new FieldFloat("ship_cost",options);pm.addField(field);var options={};var field=new FieldBool("ship_cost_edit",options);pm.addField(field);var options={};var field=new FieldFloat("pump_for_client_cost",options);pm.addField(field);var options={};var field=new FieldBool("pump_for_client_cost_edit",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Shipment_Controller.prototype.addUpdate=function(){Shipment_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Заявка";var field=new FieldInt("order_id",options);pm.addField(field);var options={};options.alias="Экипаж";var field=new FieldInt("vehicle_schedule_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Завод";var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};options.alias="Баллы";var field=new FieldInt("client_mark",options);pm.addField(field);var options={};options.alias="Простой";var field=new FieldInterval("demurrage",options);pm.addField(field);var options={};options.alias="Наличие бланков";var field=new FieldBool("blanks_exist",options);pm.addField(field);var options={};var field=new FieldBool("owner_agreed",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("owner_agreed_date_time",options);pm.addField(field);var options={};var field=new FieldText("acc_comment",options);pm.addField(field);var options={};var field=new FieldText("acc_comment_shipment",options);pm.addField(field);var options={};var field=new FieldBool("owner_pump_agreed",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("owner_pump_agreed_date_time",options);pm.addField(field);var options={};var field=new FieldFloat("pump_cost",options);pm.addField(field);var options={};var field=new FieldBool("pump_cost_edit",options);pm.addField(field);var options={};var field=new FieldFloat("ship_cost",options);pm.addField(field);var options={};var field=new FieldBool("ship_cost_edit",options);pm.addField(field);var options={};var field=new FieldFloat("pump_for_client_cost",options);pm.addField(field);var options={};var field=new FieldBool("pump_for_client_cost_edit",options);pm.addField(field);}
Shipment_Controller.prototype.addDelete=function(){Shipment_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Shipment_Controller.prototype.addGetList=function(){Shipment_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Дата отгрузки";pm.addField(new FieldDateTime("ship_date_time",f_opts));var f_opts={};f_opts.alias="Завод";pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};f_opts.alias="Клиент";pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};f_opts.alias="Объект";pm.addField(new FieldJSON("destinations_ref",f_opts));var f_opts={};pm.addField(new FieldInt("destination_id",f_opts));var f_opts={};f_opts.alias="Марка";pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};pm.addField(new FieldInt("concrete_type_id",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Автомобиль";pm.addField(new FieldJSON("vehicles_ref",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_id",f_opts));var f_opts={};f_opts.alias="Водитель";pm.addField(new FieldJSON("drivers_ref",f_opts));var f_opts={};pm.addField(new FieldInt("driver_id",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_owner_id",f_opts));var f_opts={};f_opts.alias="Владелец";pm.addField(new FieldJSON("vehicle_owners_ref",f_opts));var f_opts={};f_opts.alias="Цена доставки";pm.addField(new FieldFloat("ship_price",f_opts));var f_opts={};f_opts.alias="Стоимость доставки";pm.addField(new FieldFloat("cost",f_opts));var f_opts={};f_opts.alias="Стоимость доставки отредактирована";pm.addField(new FieldBool("ship_cost_edit",f_opts));var f_opts={};f_opts.alias="Стоимость насоса отредактирована";pm.addField(new FieldBool("pump_cost_edit",f_opts));var f_opts={};f_opts.alias="Простой";pm.addField(new FieldString("demurrage",f_opts));var f_opts={};f_opts.alias="Стомость простоя";pm.addField(new FieldFloat("demurrage_cost",f_opts));var f_opts={};f_opts.alias="Стоимость насос";pm.addField(new FieldFloat("pump_cost",f_opts));var f_opts={};f_opts.alias="Насос";pm.addField(new FieldJSON("pump_vehicles_ref",f_opts));var f_opts={};pm.addField(new FieldInt("pump_vehicle_id",f_opts));var f_opts={};f_opts.alias="Насос,владелец";pm.addField(new FieldJSON("pump_vehicle_owners_ref",f_opts));var f_opts={};f_opts.alias="Комментарий (насос)";pm.addField(new FieldText("acc_comment",f_opts));var f_opts={};f_opts.alias="Комментарий (миксер)";pm.addField(new FieldText("acc_comment_shipment",f_opts));var f_opts={};pm.addField(new FieldInt("pump_vehicle_owner_id",f_opts));var f_opts={};pm.addField(new FieldBool("shipped",f_opts));var f_opts={};f_opts.alias="Оценка";pm.addField(new FieldInt("client_mark",f_opts));var f_opts={};f_opts.alias="Наличие бланков";pm.addField(new FieldBool("blanks_exist",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Автор";pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};f_opts.alias="Согласовано миксер";pm.addField(new FieldBool("owner_agreed",f_opts));var f_opts={};f_opts.alias="Дата согласования миксер";pm.addField(new FieldDateTimeTZ("owner_agreed_date_time",f_opts));var f_opts={};f_opts.alias="Согласовано насос";pm.addField(new FieldBool("owner_pump_agreed",f_opts));var f_opts={};f_opts.alias="Дата согласования насос";pm.addField(new FieldDateTimeTZ("owner_pump_agreed_date_time",f_opts));var f_opts={};pm.addField(new FieldFloat("pump_for_client_cost",f_opts));var f_opts={};pm.addField(new FieldBool("pump_for_client_cost_edit",f_opts));}
Shipment_Controller.prototype.add_get_list_for_veh_owner=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_list_for_veh_owner',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_list_for_client=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_list_for_client',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_list_for_client_veh_owner=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_list_for_client_veh_owner',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_list_for_order=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_list_for_order',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_pump_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_pump_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_pump_list_for_veh_owner=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_pump_list_for_veh_owner',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_shipment_date_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_shipment_date_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Shipment_Controller.prototype.addGetObject=function(){Shipment_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Shipment_Controller.prototype.add_get_assigned_vehicle_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_assigned_vehicle_list',opts);var options={};pm.addField(new FieldInt("production_site_id",options));var options={};pm.addField(new FieldInt("production_base_id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_operator_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_operator_list',opts);var options={};pm.addField(new FieldDate("date",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_set_shipped=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_shipped',opts);var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_unset_shipped=function(){var opts={"controller":this};var pm=new PublicMethodServer('unset_shipped',opts);var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_shipment_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('shipment_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("grp_fields",options));var options={};pm.addField(new FieldString("agg_fields",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_shipment_invoice=function(){var opts={"controller":this};var pm=new PublicMethodServer('shipment_invoice',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldInt("inline",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_shipment_ttn=function(){var opts={"controller":this};var pm=new PublicMethodServer('shipment_ttn',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_shipment_putevoi_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('shipment_putevoi_list',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_shipment_transp_nakl=function(){var opts={"controller":this};var pm=new PublicMethodServer('shipment_transp_nakl',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};options.required=true;pm.addField(new FieldBool("faksim",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_shipment_transp_nakl_all=function(){var opts={"controller":this};var pm=new PublicMethodServer('shipment_transp_nakl_all',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};options.required=true;pm.addField(new FieldBool("faksim",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_shipment_transp_nakl_on_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('shipment_transp_nakl_on_list',opts);var options={};pm.addField(new FieldText("shipment_ids",options));var options={};options.required=true;pm.addField(new FieldBool("faksim",options));var options={};options.required=true;pm.addField(new FieldText("buh_doc",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_time_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_time_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_set_blanks_exist=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_blanks_exist',opts);var options={};options.maxlength="13";pm.addField(new FieldString("barcode",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_delete_shipped=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_shipped',opts);var options={};options.required=true;pm.addField(new FieldInt("shipment_id",options));var options={};options.required=true;options.maxlength="500";pm.addField(new FieldString("comment_text",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_delete_assigned=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_assigned',opts);var options={};options.required=true;pm.addField(new FieldInt("shipment_id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_owner_set_agreed=function(){var opts={"controller":this};var pm=new PublicMethodServer('owner_set_agreed',opts);var options={};options.required=true;pm.addField(new FieldInt("shipment_id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_owner_set_agreed_all=function(){var opts={"controller":this};var pm=new PublicMethodServer('owner_set_agreed_all',opts);this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_owner_set_pump_agreed=function(){var opts={"controller":this};var pm=new PublicMethodServer('owner_set_pump_agreed',opts);var options={};options.required=true;pm.addField(new FieldInt("shipment_id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_owner_set_pump_agreed_all=function(){var opts={"controller":this};var pm=new PublicMethodServer('owner_set_pump_agreed_all',opts);this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_shipped_vihicles_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_shipped_vihicles_list',opts);this.addPublicMethod(pm);}
Shipment_Controller.prototype.addComplete=function(){Shipment_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldInt("id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("id");}
Shipment_Controller.prototype.add_get_passport_ship=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_passport_ship',opts);var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_passport_all=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_passport_all',opts);var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_passport_stamp_ship=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_passport_stamp_ship',opts);var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_passport_stamp_all=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_passport_stamp_all',opts);var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Shipment_Controller.prototype.add_get_list_for_doc=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_list_for_doc',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);} 
function Vehicle_Controller(options){options=options||{};options.listModelClass=VehicleDialog_Model;options.objModelClass=VehicleDialog_Model;Vehicle_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_get_vehicle_statistics();this.add_complete_features();this.add_complete_makes();this.add_complete_leasors();this.add_complete_insurance_issuers();this.add_check_for_broken_trackers();this.add_vehicles_with_trackers();this.add_get_current_position();this.add_get_current_position_all();this.add_get_route();this.add_get_track();this.add_get_tool_tip();this.add_get_stops_at_dest();this.add_get_total_shipped();this.add_vehicle_list_report();}
extend(Vehicle_Controller,ControllerObjServer);Vehicle_Controller.prototype.addInsert=function(){Vehicle_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Номер";options.required=true;var field=new FieldString("plate",options);pm.addField(field);var options={};options.alias="Регин номера";var field=new FieldString("plate_region",options);pm.addField(field);var options={};options.alias="Номер число для сортировки";var field=new FieldInt("plate_n",options);pm.addField(field);var options={};options.alias="Грузоподъемность";options.required=true;var field=new FieldFloat("load_capacity",options);pm.addField(field);var options={};options.alias="Марка";var field=new FieldString("make",options);pm.addField(field);var options={};var field=new FieldInt("driver_id",options);pm.addField(field);var options={};options.alias="Свойство";var field=new FieldString("feature",options);pm.addField(field);var options={};options.alias="Трэкер";var field=new FieldString("tracker_id",options);pm.addField(field);var options={};options.alias="Идентификатор SIM карты";var field=new FieldString("sim_id",options);pm.addField(field);var options={};options.alias="Номер телефона SIM карты";var field=new FieldString("sim_number",options);pm.addField(field);var options={};options.alias="УДАЛИТЬ Владелец";var field=new FieldInt("vehicle_owner_id",options);pm.addField(field);var options={};options.alias="История владелецев";var field=new FieldJSONB("vehicle_owners",options);pm.addField(field);var options={};var field=new FieldArray("vehicle_owners_ar",options);pm.addField(field);var options={};var field=new FieldInt("ord_num",options);pm.addField(field);var options={};options.alias="Масса, тонн";var field=new FieldInt("weight_t",options);pm.addField(field);var options={};options.alias="VIN";var field=new FieldString("vin",options);pm.addField(field);var options={};options.alias="Leasor name";var field=new FieldText("leasor",options);pm.addField(field);var options={};var field=new FieldDate("leasing_contract_date",options);pm.addField(field);var options={};var field=new FieldText("leasing_contract_num",options);pm.addField(field);var options={};var field=new FieldFloat("leasing_total",options);pm.addField(field);var options={};options.alias="Insurance osago data";var field=new FieldJSONB("insurance_osago",options);pm.addField(field);var options={};options.alias="Insurance kasko data";var field=new FieldJSONB("insurance_kasko",options);pm.addField(field);var options={};options.alias="УДАЛИТЬ Владелец";var field=new FieldInt("official_vehicle_owner_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Vehicle_Controller.prototype.addUpdate=function(){Vehicle_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Номер";var field=new FieldString("plate",options);pm.addField(field);var options={};options.alias="Регин номера";var field=new FieldString("plate_region",options);pm.addField(field);var options={};options.alias="Номер число для сортировки";var field=new FieldInt("plate_n",options);pm.addField(field);var options={};options.alias="Грузоподъемность";var field=new FieldFloat("load_capacity",options);pm.addField(field);var options={};options.alias="Марка";var field=new FieldString("make",options);pm.addField(field);var options={};var field=new FieldInt("driver_id",options);pm.addField(field);var options={};options.alias="Свойство";var field=new FieldString("feature",options);pm.addField(field);var options={};options.alias="Трэкер";var field=new FieldString("tracker_id",options);pm.addField(field);var options={};options.alias="Идентификатор SIM карты";var field=new FieldString("sim_id",options);pm.addField(field);var options={};options.alias="Номер телефона SIM карты";var field=new FieldString("sim_number",options);pm.addField(field);var options={};options.alias="УДАЛИТЬ Владелец";var field=new FieldInt("vehicle_owner_id",options);pm.addField(field);var options={};options.alias="История владелецев";var field=new FieldJSONB("vehicle_owners",options);pm.addField(field);var options={};var field=new FieldArray("vehicle_owners_ar",options);pm.addField(field);var options={};var field=new FieldInt("ord_num",options);pm.addField(field);var options={};options.alias="Масса, тонн";var field=new FieldInt("weight_t",options);pm.addField(field);var options={};options.alias="VIN";var field=new FieldString("vin",options);pm.addField(field);var options={};options.alias="Leasor name";var field=new FieldText("leasor",options);pm.addField(field);var options={};var field=new FieldDate("leasing_contract_date",options);pm.addField(field);var options={};var field=new FieldText("leasing_contract_num",options);pm.addField(field);var options={};var field=new FieldFloat("leasing_total",options);pm.addField(field);var options={};options.alias="Insurance osago data";var field=new FieldJSONB("insurance_osago",options);pm.addField(field);var options={};options.alias="Insurance kasko data";var field=new FieldJSONB("insurance_kasko",options);pm.addField(field);var options={};options.alias="УДАЛИТЬ Владелец";var field=new FieldInt("official_vehicle_owner_id",options);pm.addField(field);}
Vehicle_Controller.prototype.addDelete=function(){Vehicle_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Vehicle_Controller.prototype.addGetList=function(){Vehicle_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("plate",f_opts));var f_opts={};f_opts.alias="Регион номера";pm.addField(new FieldString("plate_region",f_opts));var f_opts={};f_opts.alias="Грузоподъемность";pm.addField(new FieldFloat("load_capacity",f_opts));var f_opts={};f_opts.alias="Марка";pm.addField(new FieldString("make",f_opts));var f_opts={};pm.addField(new FieldJSONB("drivers_ref",f_opts));var f_opts={};f_opts.alias="Свойство";pm.addField(new FieldString("feature",f_opts));var f_opts={};f_opts.alias="Трэкер";pm.addField(new FieldString("tracker_id",f_opts));var f_opts={};f_opts.alias="Идентификатор SIM карты";pm.addField(new FieldString("sim_id",f_opts));var f_opts={};f_opts.alias="Номер телефона SIM карты";pm.addField(new FieldString("sim_number",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("tracker_last_dt",f_opts));var f_opts={};pm.addField(new FieldInt("tracker_sat_num",f_opts));var f_opts={};f_opts.alias="Последний владелец";pm.addField(new FieldJSONB("vehicle_owners_ref",f_opts));var f_opts={};f_opts.alias="Последний владелец";pm.addField(new FieldInt("vehicle_owner_id",f_opts));var f_opts={};f_opts.alias="История владелецев";pm.addField(new FieldJSONB("vehicle_owners",f_opts));var f_opts={};pm.addField(new FieldArray("vehicle_owners_ar",f_opts));var f_opts={};pm.addField(new FieldInt("ord_num",f_opts));var f_opts={};f_opts.alias="Масса, тонн";pm.addField(new FieldInt("weight_t",f_opts));var f_opts={};f_opts.alias="VIN";pm.addField(new FieldString("vin",f_opts));var f_opts={};pm.addField(new FieldText("leasor",f_opts));var f_opts={};pm.addField(new FieldDate("leasing_contract_date",f_opts));var f_opts={};pm.addField(new FieldText("leasing_contract_num",f_opts));var f_opts={};pm.addField(new FieldFloat("leasing_total",f_opts));var f_opts={};f_opts.alias="Insurance osago data";pm.addField(new FieldJSONB("insurance_osago",f_opts));var f_opts={};f_opts.alias="Insurance kasko data";pm.addField(new FieldJSONB("insurance_kasko",f_opts));var f_opts={};pm.addField(new FieldJSON("official_vehicle_owners_ref",f_opts));}
Vehicle_Controller.prototype.addGetObject=function(){Vehicle_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Vehicle_Controller.prototype.addComplete=function(){Vehicle_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("plate",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("plate");}
Vehicle_Controller.prototype.add_get_vehicle_statistics=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_vehicle_statistics',opts);var options={};pm.addField(new FieldDate("date",options));this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_complete_features=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_features',opts);var options={};pm.addField(new FieldString("feature",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_complete_makes=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_makes',opts);var options={};pm.addField(new FieldString("make",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_complete_leasors=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_leasors',opts);var options={};pm.addField(new FieldString("leasor",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_complete_insurance_issuers=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_insurance_issuers',opts);var options={};pm.addField(new FieldString("issuer",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_check_for_broken_trackers=function(){var opts={"controller":this};var pm=new PublicMethodServer('check_for_broken_trackers',opts);this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_vehicles_with_trackers=function(){var opts={"controller":this};var pm=new PublicMethodServer('vehicles_with_trackers',opts);this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_get_current_position=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_current_position',opts);var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_get_current_position_all=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_current_position_all',opts);this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_get_route=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_route',opts);var options={};options.required=true;pm.addField(new FieldInt("vehicle_id",options));var options={};options.required=true;pm.addField(new FieldInt("shipment_id",options));var options={};options.required=true;options.maxlength="20";pm.addField(new FieldString("tracker_id",options));var options={};options.required=true;pm.addField(new FieldEnum("vehicle_state",options));this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_get_track=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_track',opts);var options={};pm.addField(new FieldInt("id",options));var options={};pm.addField(new FieldDateTime("dt_from",options));var options={};pm.addField(new FieldDateTime("dt_to",options));var options={};pm.addField(new FieldTime("stop_dur",options));this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_get_tool_tip=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_tool_tip',opts);var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_get_stops_at_dest=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_stops_at_dest',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_get_total_shipped=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_total_shipped',opts);this.addPublicMethod(pm);}
Vehicle_Controller.prototype.add_vehicle_list_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('vehicle_list_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);} 
function VehicleSchedule_Controller(options){options=options||{};options.listModelClass=VehicleScheduleList_Model;options.objModelClass=VehicleScheduleList_Model;VehicleSchedule_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addComplete();this.add_get_current_veh_list();this.addGetObject();this.add_set_free();this.add_set_production_base();this.add_set_out();this.add_gen_schedule();this.add_get_vehicle_efficiency();this.add_get_schedule_report();this.add_get_schedule_report_all();this.add_get_vehicle_runs();this.add_get_vehicle_owner_schedule();this.add_set_schedule();}
extend(VehicleSchedule_Controller,ControllerObjServer);VehicleSchedule_Controller.prototype.addInsert=function(){VehicleSchedule_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDate("schedule_date",options);pm.addField(field);var options={};options.alias="Автомобиль";options.required=true;var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};options.alias="Водитель";options.required=true;var field=new FieldInt("driver_id",options);pm.addField(field);var options={};options.alias="База";options.required=true;var field=new FieldInt("production_base_id",options);pm.addField(field);var options={};options.alias="Кто внес данные";var field=new FieldInt("edit_user_id",options);pm.addField(field);var options={};options.alias="Когда внес данные";var field=new FieldDateTimeTZ("edit_date_time",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
VehicleSchedule_Controller.prototype.addUpdate=function(){VehicleSchedule_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDate("schedule_date",options);pm.addField(field);var options={};options.alias="Автомобиль";var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};options.alias="Водитель";var field=new FieldInt("driver_id",options);pm.addField(field);var options={};options.alias="База";var field=new FieldInt("production_base_id",options);pm.addField(field);var options={};options.alias="Кто внес данные";var field=new FieldInt("edit_user_id",options);pm.addField(field);var options={};options.alias="Когда внес данные";var field=new FieldDateTimeTZ("edit_date_time",options);pm.addField(field);}
VehicleSchedule_Controller.prototype.addDelete=function(){VehicleSchedule_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
VehicleSchedule_Controller.prototype.addGetList=function(){VehicleSchedule_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDate("schedule_date",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_id",f_opts));var f_opts={};pm.addField(new FieldJSON("vehicles_ref",f_opts));var f_opts={};pm.addField(new FieldInt("driver_id",f_opts));var f_opts={};pm.addField(new FieldJSON("drivers_ref",f_opts));var f_opts={};pm.addField(new FieldEnum("state",f_opts));var f_opts={};pm.addField(new FieldDateTime("state_date_time",f_opts));var f_opts={};pm.addField(new FieldString("out_comment",f_opts));var f_opts={};pm.addField(new FieldFloat("load_capacity",f_opts));var f_opts={};pm.addField(new FieldJSON("vehicle_owners_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("production_bases_ref",f_opts));var f_opts={};pm.addField(new FieldString("phone_cel",f_opts));}
VehicleSchedule_Controller.prototype.addComplete=function(){VehicleSchedule_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("vehicle_schedule_descr",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("vehicle_schedule_descr");}
VehicleSchedule_Controller.prototype.add_get_current_veh_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_current_veh_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
VehicleSchedule_Controller.prototype.addGetObject=function(){VehicleSchedule_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
VehicleSchedule_Controller.prototype.add_set_free=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_free',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};options.required=true;pm.addField(new FieldInt("production_base_id",options));this.addPublicMethod(pm);}
VehicleSchedule_Controller.prototype.add_set_production_base=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_production_base',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};options.required=true;pm.addField(new FieldInt("production_base_id",options));var options={};options.required=true;options.maxlength="100";pm.addField(new FieldString("last_state",options));this.addPublicMethod(pm);}
VehicleSchedule_Controller.prototype.add_set_out=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_out',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};options.required=true;pm.addField(new FieldText("comment_text",options));this.addPublicMethod(pm);}
VehicleSchedule_Controller.prototype.add_gen_schedule=function(){var opts={"controller":this};var pm=new PublicMethodServer('gen_schedule',opts);pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.required=true;pm.addField(new FieldDate("date_from",options));var options={};options.required=true;pm.addField(new FieldDate("date_to",options));var options={};options.required=true;pm.addField(new FieldInt("production_base_id",options));var options={};pm.addField(new FieldString("vehicle_list",options));var options={};pm.addField(new FieldString("vehicle_feature",options));var options={};pm.addField(new FieldBool("day1",options));var options={};pm.addField(new FieldBool("day2",options));var options={};pm.addField(new FieldBool("day3",options));var options={};pm.addField(new FieldBool("day4",options));var options={};pm.addField(new FieldBool("day5",options));var options={};pm.addField(new FieldBool("day6",options));var options={};pm.addField(new FieldBool("day7",options));this.addPublicMethod(pm);}
VehicleSchedule_Controller.prototype.add_get_vehicle_efficiency=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_vehicle_efficiency',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
VehicleSchedule_Controller.prototype.add_get_schedule_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_schedule_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
VehicleSchedule_Controller.prototype.add_get_schedule_report_all=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_schedule_report_all',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
VehicleSchedule_Controller.prototype.add_get_vehicle_runs=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_vehicle_runs',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
VehicleSchedule_Controller.prototype.add_get_vehicle_owner_schedule=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_vehicle_owner_schedule',opts);pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.required=true;pm.addField(new FieldDate("date_from",options));var options={};options.required=true;pm.addField(new FieldDate("date_to",options));var options={};options.required=true;pm.addField(new FieldInt("vehicle_owner_id",options));this.addPublicMethod(pm);}
VehicleSchedule_Controller.prototype.add_set_schedule=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_schedule',opts);pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.required=true;options.maxlength="5000";pm.addField(new FieldString("vehicles",options));this.addPublicMethod(pm);} 
function Graph_Controller(options){options=options||{};Graph_Controller.superclass.constructor.call(this,options);this.add_get_plant_load();this.add_make_plant_load();this.add_clear_cache();}
extend(Graph_Controller,ControllerObjServer);Graph_Controller.prototype.add_get_plant_load=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_plant_load',opts);var options={};pm.addField(new FieldDate("date_time_from",options));var options={};pm.addField(new FieldDate("date_time_to",options));this.addPublicMethod(pm);}
Graph_Controller.prototype.add_make_plant_load=function(){var opts={"controller":this};var pm=new PublicMethodServer('make_plant_load',opts);var options={};pm.addField(new FieldDate("date_time_from",options));var options={};pm.addField(new FieldDate("date_time_to",options));this.addPublicMethod(pm);}
Graph_Controller.prototype.add_clear_cache=function(){var opts={"controller":this};var pm=new PublicMethodServer('clear_cache',opts);var options={};pm.addField(new FieldDate("date_time_from",options));var options={};pm.addField(new FieldDate("date_time_to",options));this.addPublicMethod(pm);} 
function Shift_Controller(options){options=options||{};Shift_Controller.superclass.constructor.call(this,options);this.add_get_open_shift();this.add_close_shift();}
extend(Shift_Controller,ControllerObjServer);Shift_Controller.prototype.add_get_open_shift=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_open_shift',opts);this.addPublicMethod(pm);}
Shift_Controller.prototype.add_close_shift=function(){var opts={"controller":this};var pm=new PublicMethodServer('close_shift',opts);var options={};pm.addField(new FieldDate("date",options));this.addPublicMethod(pm);} 
function Lang_Controller(options){options=options||{};options.listModelClass=Lang_Model;options.objModelClass=Lang_Model;Lang_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();}
extend(Lang_Controller,ControllerObjServer);Lang_Controller.prototype.addInsert=function(){Lang_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Lang_Controller.prototype.addUpdate=function(){Lang_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);}
Lang_Controller.prototype.addDelete=function(){Lang_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Lang_Controller.prototype.addGetList=function(){Lang_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Lang_Controller.prototype.addGetObject=function(){Lang_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Lang_Controller.prototype.addComplete=function(){Lang_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function SMSPattern_Controller(options){options=options||{};options.listModelClass=SMSPatternList_Model;options.objModelClass=SMSPatternList_Model;SMSPattern_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(SMSPattern_Controller,ControllerObjServer);SMSPattern_Controller.prototype.addInsert=function(){SMSPattern_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Язык";options.required=true;var field=new FieldInt("lang_id",options);pm.addField(field);var options={};options.alias="Тип SMS";options.required=true;options.enumValues='order,ship,remind,procur,order_for_pump_ins,order_for_pump_upd,order_for_pump_del,order_for_pump_ship,remind_for_pump,client_thank,vehicle_zone_violation,vehicle_tracker_malfunction,efficiency_warn,material_balance,mixer_route,order_cancel,tm_invite,new_pwd';var field=new FieldEnum("sms_type",options);pm.addField(field);var options={};options.alias="Шаблон";options.required=true;var field=new FieldText("pattern",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
SMSPattern_Controller.prototype.addUpdate=function(){SMSPattern_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Язык";var field=new FieldInt("lang_id",options);pm.addField(field);var options={};options.alias="Тип SMS";options.enumValues='order,ship,remind,procur,order_for_pump_ins,order_for_pump_upd,order_for_pump_del,order_for_pump_ship,remind_for_pump,client_thank,vehicle_zone_violation,vehicle_tracker_malfunction,efficiency_warn,material_balance,mixer_route,order_cancel,tm_invite,new_pwd';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("sms_type",options);pm.addField(field);var options={};options.alias="Шаблон";var field=new FieldText("pattern",options);pm.addField(field);}
SMSPattern_Controller.prototype.addDelete=function(){SMSPattern_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
SMSPattern_Controller.prototype.addGetList=function(){SMSPattern_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("sms_type",f_opts));var f_opts={};pm.addField(new FieldJSON("langs_ref",f_opts));var f_opts={};pm.addField(new FieldText("pattern",f_opts));var f_opts={};pm.addField(new FieldString("user_list",f_opts));}
SMSPattern_Controller.prototype.addGetObject=function(){SMSPattern_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function LabData_Controller(options){options=options||{};options.listModelClass=LabDataList_Model;options.objModelClass=LabDataList_Model;LabData_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(LabData_Controller,ControllerObjServer);LabData_Controller.prototype.addInsert=function(){LabData_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Отгрузка";options.primaryKey=true;options.required=true;var field=new FieldInt("shipment_id",options);pm.addField(field);var options={};options.alias="ОК см";var field=new FieldFloat("ok_sm",options);pm.addField(field);var options={};options.alias="масса";var field=new FieldFloat("weight",options);pm.addField(field);var options={};options.alias="масса норм";var field=new FieldFloat("weight_norm",options);pm.addField(field);var options={};options.alias="%";var field=new FieldFloat("percent_1",options);pm.addField(field);var options={};options.alias="p1";var field=new FieldFloat("p_1",options);pm.addField(field);var options={};options.alias="p2";var field=new FieldFloat("p_2",options);pm.addField(field);var options={};options.alias="p3";var field=new FieldFloat("p_3",options);pm.addField(field);var options={};options.alias="p4";var field=new FieldFloat("p_4",options);pm.addField(field);var options={};options.alias="p7";var field=new FieldFloat("p_7",options);pm.addField(field);var options={};options.alias="p28";var field=new FieldFloat("p_28",options);pm.addField(field);var options={};options.alias="p_norm";var field=new FieldFloat("p_norm",options);pm.addField(field);var options={};options.alias="percent_2";var field=new FieldFloat("percent_2",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("lab_comment",options);pm.addField(field);var options={};options.alias="№";var field=new FieldText("num",options);pm.addField(field);}
LabData_Controller.prototype.addUpdate=function(){LabData_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Отгрузка";options.primaryKey=true;var field=new FieldInt("shipment_id",options);pm.addField(field);field=new FieldInt("old_shipment_id",{});pm.addField(field);var options={};options.alias="ОК см";var field=new FieldFloat("ok_sm",options);pm.addField(field);var options={};options.alias="масса";var field=new FieldFloat("weight",options);pm.addField(field);var options={};options.alias="масса норм";var field=new FieldFloat("weight_norm",options);pm.addField(field);var options={};options.alias="%";var field=new FieldFloat("percent_1",options);pm.addField(field);var options={};options.alias="p1";var field=new FieldFloat("p_1",options);pm.addField(field);var options={};options.alias="p2";var field=new FieldFloat("p_2",options);pm.addField(field);var options={};options.alias="p3";var field=new FieldFloat("p_3",options);pm.addField(field);var options={};options.alias="p4";var field=new FieldFloat("p_4",options);pm.addField(field);var options={};options.alias="p7";var field=new FieldFloat("p_7",options);pm.addField(field);var options={};options.alias="p28";var field=new FieldFloat("p_28",options);pm.addField(field);var options={};options.alias="p_norm";var field=new FieldFloat("p_norm",options);pm.addField(field);var options={};options.alias="percent_2";var field=new FieldFloat("percent_2",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("lab_comment",options);pm.addField(field);var options={};options.alias="№";var field=new FieldText("num",options);pm.addField(field);}
LabData_Controller.prototype.addDelete=function(){LabData_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Отгрузка";pm.addField(new FieldInt("shipment_id",options));}
LabData_Controller.prototype.addGetList=function(){LabData_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("shipment_id",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldString("ship_date_time_descr",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};f_opts.alias="Заказчик";pm.addField(new FieldString("client_descr",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("client_phone",f_opts));var f_opts={};f_opts.alias="Объект";pm.addField(new FieldString("destination_descr",f_opts));var f_opts={};f_opts.alias="Марка";pm.addField(new FieldString("concrete_type_descr",f_opts));var f_opts={};f_opts.alias="Кол-во";pm.addField(new FieldString("quant_descr",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldString("num",f_opts));var f_opts={};f_opts.alias="Водитель";pm.addField(new FieldString("driver_descr",f_opts));var f_opts={};f_opts.alias="ОК см";pm.addField(new FieldFloat("ok_sm",f_opts));var f_opts={};f_opts.alias="масса";pm.addField(new FieldFloat("weight",f_opts));var f_opts={};f_opts.alias="масса норм";pm.addField(new FieldFloat("weight_norm",f_opts));var f_opts={};f_opts.alias="%";pm.addField(new FieldFloat("percent_1",f_opts));var f_opts={};f_opts.alias="p1";pm.addField(new FieldFloat("p_1",f_opts));var f_opts={};f_opts.alias="p2";pm.addField(new FieldFloat("p_2",f_opts));var f_opts={};f_opts.alias="p3";pm.addField(new FieldFloat("p_3",f_opts));var f_opts={};f_opts.alias="p4";pm.addField(new FieldFloat("p_4",f_opts));var f_opts={};f_opts.alias="p7";pm.addField(new FieldFloat("p_7",f_opts));var f_opts={};f_opts.alias="p_norm";pm.addField(new FieldFloat("p_norm",f_opts));var f_opts={};f_opts.alias="percent_2";pm.addField(new FieldFloat("percent_2",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("lab_comment",f_opts));}
LabData_Controller.prototype.addGetObject=function(){LabData_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("shipment_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function LabEntry_Controller(options){options=options||{};options.listModelClass=LabEntryList_Model;options.objModelClass=LabEntryList_Model;LabEntry_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_lab_report();this.add_item_report();this.add_lab_avg_report();this.add_item_on_rate_period_report();this.add_lab_entry30_days();this.add_lab_vehicle_list();this.add_lab_orders_list();this.add_chart_rep_init();}
extend(LabEntry_Controller,ControllerObjServer);LabEntry_Controller.prototype.addInsert=function(){LabEntry_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Отгрузка";options.primaryKey=true;options.required=true;var field=new FieldInt("shipment_id",options);pm.addField(field);var options={};options.alias="Подборы";var field=new FieldText("samples",options);pm.addField(field);var options={};options.alias="Материалы";var field=new FieldText("materials",options);pm.addField(field);var options={};options.alias="OK2";var field=new FieldText("ok2",options);pm.addField(field);var options={};options.alias="f";var field=new FieldText("f",options);pm.addField(field);var options={};options.alias="w";var field=new FieldText("w",options);pm.addField(field);var options={};options.alias="Время";var field=new FieldText("time",options);pm.addField(field);var options={};options.alias="Подбор";var field=new FieldInt("rate_date_id",options);pm.addField(field);}
LabEntry_Controller.prototype.addUpdate=function(){LabEntry_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Отгрузка";options.primaryKey=true;var field=new FieldInt("shipment_id",options);pm.addField(field);field=new FieldInt("old_shipment_id",{});pm.addField(field);var options={};options.alias="Подборы";var field=new FieldText("samples",options);pm.addField(field);var options={};options.alias="Материалы";var field=new FieldText("materials",options);pm.addField(field);var options={};options.alias="OK2";var field=new FieldText("ok2",options);pm.addField(field);var options={};options.alias="f";var field=new FieldText("f",options);pm.addField(field);var options={};options.alias="w";var field=new FieldText("w",options);pm.addField(field);var options={};options.alias="Время";var field=new FieldText("time",options);pm.addField(field);var options={};options.alias="Подбор";var field=new FieldInt("rate_date_id",options);pm.addField(field);}
LabEntry_Controller.prototype.addDelete=function(){LabEntry_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Отгрузка";pm.addField(new FieldInt("shipment_id",options));}
LabEntry_Controller.prototype.addGetList=function(){LabEntry_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Основной ключ! тк. lab_entry может быть NULL";pm.addField(new FieldInt("shipment_id",f_opts));var f_opts={};f_opts.alias="Подборы";pm.addField(new FieldBool("samples_exist",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Завод";pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));var f_opts={};f_opts.alias="Марка";pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};pm.addField(new FieldInt("concrete_type_id",f_opts));var f_opts={};pm.addField(new FieldInt("ok",f_opts));var f_opts={};pm.addField(new FieldInt("weight",f_opts));var f_opts={};pm.addField(new FieldString("p7",f_opts));var f_opts={};pm.addField(new FieldString("p28",f_opts));var f_opts={};f_opts.alias="Подборы";pm.addField(new FieldText("samples",f_opts));var f_opts={};f_opts.alias="Материалы";pm.addField(new FieldText("materials",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};f_opts.alias="Заказчик";pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("client_phone",f_opts));var f_opts={};pm.addField(new FieldInt("destination_id",f_opts));var f_opts={};f_opts.alias="Объект";pm.addField(new FieldJSON("destinations_ref",f_opts));var f_opts={};f_opts.alias="ОК2";pm.addField(new FieldText("ok2",f_opts));var f_opts={};f_opts.alias="Время";pm.addField(new FieldText("time",f_opts));var f_opts={};f_opts.alias="Подбор";pm.addField(new FieldJSON("raw_material_cons_rate_dates_ref",f_opts));var f_opts={};pm.addField(new FieldInt("rate_date_id",f_opts));var f_opts={};f_opts.alias="Нет добавки";pm.addField(new FieldBool("no_additive_material",f_opts));var f_opts={};f_opts.alias="f";pm.addField(new FieldText("f",f_opts));var f_opts={};f_opts.alias="w";pm.addField(new FieldText("w",f_opts));}
LabEntry_Controller.prototype.addGetObject=function(){LabEntry_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Основной ключ! тк. lab_entry может быть NULL";pm.addField(new FieldInt("shipment_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
LabEntry_Controller.prototype.add_lab_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('lab_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
LabEntry_Controller.prototype.add_item_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('item_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
LabEntry_Controller.prototype.add_lab_avg_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('lab_avg_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
LabEntry_Controller.prototype.add_item_on_rate_period_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('item_on_rate_period_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
LabEntry_Controller.prototype.add_lab_entry30_days=function(){var opts={"controller":this};var pm=new PublicMethodServer('lab_entry30_days',opts);this.addPublicMethod(pm);}
LabEntry_Controller.prototype.add_lab_vehicle_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('lab_vehicle_list',opts);this.addPublicMethod(pm);}
LabEntry_Controller.prototype.add_lab_orders_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('lab_orders_list',opts);this.addPublicMethod(pm);}
LabEntry_Controller.prototype.add_chart_rep_init=function(){var opts={"controller":this};var pm=new PublicMethodServer('chart_rep_init',opts);this.addPublicMethod(pm);} 
function LabEntryDetail_Controller(options){options=options||{};options.listModelClass=LabEntryDetailList_Model;options.objModelClass=LabEntryDetailList_Model;LabEntryDetail_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(LabEntryDetail_Controller,ControllerObjServer);LabEntryDetail_Controller.prototype.addInsert=function(){LabEntryDetail_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id_key",options);pm.addField(field);var options={};options.alias="Код";var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Отгрузка";options.required=true;var field=new FieldInt("shipment_id",options);pm.addField(field);var options={};options.alias="ОК";var field=new FieldInt("ok",options);pm.addField(field);var options={};options.alias="Масса";var field=new FieldInt("weight",options);pm.addField(field);var options={};options.alias="КН";var field=new FieldInt("kn",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
LabEntryDetail_Controller.prototype.addUpdate=function(){LabEntryDetail_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id_key",options);pm.addField(field);field=new FieldInt("old_id_key",{});pm.addField(field);var options={};options.alias="Код";var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Отгрузка";var field=new FieldInt("shipment_id",options);pm.addField(field);var options={};options.alias="ОК";var field=new FieldInt("ok",options);pm.addField(field);var options={};options.alias="Масса";var field=new FieldInt("weight",options);pm.addField(field);var options={};options.alias="КН";var field=new FieldInt("kn",options);pm.addField(field);}
LabEntryDetail_Controller.prototype.addDelete=function(){LabEntryDetail_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id_key",options));}
LabEntryDetail_Controller.prototype.addGetList=function(){LabEntryDetail_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id_key",f_opts));var f_opts={};pm.addField(new FieldInt("shipment_id",f_opts));var f_opts={};pm.addField(new FieldString("code",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("ship_date_time",f_opts));var f_opts={};f_opts.alias="Марка";pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};f_opts.alias="ОК";pm.addField(new FieldInt("ok",f_opts));var f_opts={};f_opts.alias="Масса";pm.addField(new FieldInt("weight",f_opts));var f_opts={};f_opts.alias="П7%";pm.addField(new FieldInt("p7",f_opts));var f_opts={};f_opts.alias="П28%";pm.addField(new FieldInt("p28",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDate("p_date",f_opts));var f_opts={};pm.addField(new FieldInt("kn",f_opts));var f_opts={};pm.addField(new FieldString("mpa",f_opts));var f_opts={};pm.addField(new FieldString("mpa_avg",f_opts));var f_opts={};pm.addField(new FieldString("pres_norm",f_opts));}
LabEntryDetail_Controller.prototype.addGetObject=function(){LabEntryDetail_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id_key",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function RawMaterialProcurUpload_Controller(options){options=options||{};options.listModelClass=RawMaterialProcurUploadView_Model;RawMaterialProcurUpload_Controller.superclass.constructor.call(this,options);this.addGetList();}
extend(RawMaterialProcurUpload_Controller,ControllerObjServer);RawMaterialProcurUpload_Controller.prototype.addGetList=function(){RawMaterialProcurUpload_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldText("descr",f_opts));var f_opts={};pm.addField(new FieldBool("result",f_opts));var f_opts={};pm.addField(new FieldInt("doc_count",f_opts));} 
function RAMaterialConsumption_Controller(options){options=options||{};RAMaterialConsumption_Controller.superclass.constructor.call(this,options);this.add_get_dates_list();this.add_get_docs_list();}
extend(RAMaterialConsumption_Controller,ControllerObjServer);RAMaterialConsumption_Controller.prototype.add_get_dates_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_dates_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
RAMaterialConsumption_Controller.prototype.add_get_docs_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_docs_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);} 
function DOCMaterialInventory_Controller(options){options=options||{};options.listModelClass=DOCMaterialInventoryList_Model;options.objModelClass=DOCMaterialInventoryList_Model;DOCMaterialInventory_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_before_open();this.add_get_actions();this.add_get_print();this.add_get_details();}
extend(DOCMaterialInventory_Controller,ControllerObjServer);DOCMaterialInventory_Controller.prototype.addInsert=function(){DOCMaterialInventory_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";options.required=true;var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DOCMaterialInventory_Controller.prototype.addUpdate=function(){DOCMaterialInventory_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);}
DOCMaterialInventory_Controller.prototype.addDelete=function(){DOCMaterialInventory_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DOCMaterialInventory_Controller.prototype.addGetList=function(){DOCMaterialInventory_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldString("date_time_descr",f_opts));var f_opts={};pm.addField(new FieldString("number",f_opts));var f_opts={};pm.addField(new FieldString("processed",f_opts));}
DOCMaterialInventory_Controller.prototype.addGetObject=function(){DOCMaterialInventory_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
DOCMaterialInventory_Controller.prototype.add_before_open=function(){var opts={"controller":this};var pm=new PublicMethodServer('before_open',opts);var options={};pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DOCMaterialInventory_Controller.prototype.add_get_actions=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_actions',opts);var options={};pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DOCMaterialInventory_Controller.prototype.add_get_print=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_print',opts);var options={};pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DOCMaterialInventory_Controller.prototype.add_get_details=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_details',opts);var options={};options.required=true;pm.addField(new FieldString("cond_fields",options));var options={};options.required=true;pm.addField(new FieldString("cond_vals",options));var options={};options.required=true;pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);} 
function DOCMaterialInventoryDOCTMaterial_Controller(options){options=options||{};options.listModelClass=DOCMaterialInventoryDOCTMaterialList_Model;options.objModelClass=DOCMaterialInventoryDOCTMaterialList_Model;DOCMaterialInventoryDOCTMaterial_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DOCMaterialInventoryDOCTMaterial_Controller,ControllerObjServer);DOCMaterialInventoryDOCTMaterial_Controller.prototype.addInsert=function(){DOCMaterialInventoryDOCTMaterial_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);var options={};options.alias="Материал";options.required=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);}
DOCMaterialInventoryDOCTMaterial_Controller.prototype.addUpdate=function(){DOCMaterialInventoryDOCTMaterial_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("login_id",options);pm.addField(field);field=new FieldInt("old_login_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);field=new FieldInt("old_line_number",{});pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);}
DOCMaterialInventoryDOCTMaterial_Controller.prototype.addDelete=function(){DOCMaterialInventoryDOCTMaterial_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("login_id",options));var options={"required":true};pm.addField(new FieldInt("line_number",options));}
DOCMaterialInventoryDOCTMaterial_Controller.prototype.addGetList=function(){DOCMaterialInventoryDOCTMaterial_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("login_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};pm.addField(new FieldString("material_descr",f_opts));var f_opts={};pm.addField(new FieldFloat("quant",f_opts));}
DOCMaterialInventoryDOCTMaterial_Controller.prototype.addGetObject=function(){DOCMaterialInventoryDOCTMaterial_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function RawMaterialProcurRate_Controller(options){options=options||{};options.listModelClass=RawMaterialProcurRateList_Model;options.objModelClass=RawMaterialProcurRateList_Model;RawMaterialProcurRate_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(RawMaterialProcurRate_Controller,ControllerObjServer);RawMaterialProcurRate_Controller.prototype.addInsert=function(){RawMaterialProcurRate_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("supplier_id",options);pm.addField(field);var options={};var field=new FieldFloat("rate",options);pm.addField(field);}
RawMaterialProcurRate_Controller.prototype.addUpdate=function(){RawMaterialProcurRate_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("material_id",options);pm.addField(field);field=new FieldInt("old_material_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("supplier_id",options);pm.addField(field);field=new FieldInt("old_supplier_id",{});pm.addField(field);var options={};var field=new FieldFloat("rate",options);pm.addField(field);}
RawMaterialProcurRate_Controller.prototype.addDelete=function(){RawMaterialProcurRate_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("material_id",options));var options={"required":true};pm.addField(new FieldInt("supplier_id",options));}
RawMaterialProcurRate_Controller.prototype.addGetList=function(){RawMaterialProcurRate_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};pm.addField(new FieldString("material_descr",f_opts));var f_opts={};pm.addField(new FieldInt("supplier_id",f_opts));var f_opts={};pm.addField(new FieldString("supplier_descr",f_opts));var f_opts={};pm.addField(new FieldFloat("rate",f_opts));}
RawMaterialProcurRate_Controller.prototype.addGetObject=function(){RawMaterialProcurRate_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};pm.addField(new FieldInt("supplier_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function OrderFromClient_Controller(options){options=options||{};options.listModelClass=OrderFromClientList_Model;OrderFromClient_Controller.superclass.constructor.call(this,options);this.addDelete();this.addGetList();this.add_set_viewed();}
extend(OrderFromClient_Controller,ControllerObjServer);OrderFromClient_Controller.prototype.addDelete=function(){OrderFromClient_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
OrderFromClient_Controller.prototype.addGetList=function(){OrderFromClient_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldString("date_time_descr",f_opts));var f_opts={};f_opts.alias="Клиент";pm.addField(new FieldText("name",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("tel",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("tel_descr",f_opts));var f_opts={};f_opts.alias="Марка";pm.addField(new FieldString("concrete_type",f_opts));var f_opts={};f_opts.alias="Объект";pm.addField(new FieldText("dest",f_opts));var f_opts={};f_opts.alias="Сумма";pm.addField(new FieldFloat("total",f_opts));var f_opts={};f_opts.alias="Сумма";pm.addField(new FieldString("total_descr",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Есть насос";pm.addField(new FieldBool("pump",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("comment_text",f_opts));}
OrderFromClient_Controller.prototype.add_set_viewed=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_viewed',opts);var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);} 
function Caller_Controller(options){options=options||{};Caller_Controller.superclass.constructor.call(this,options);this.add_call();}
extend(Caller_Controller,ControllerObjServer);Caller_Controller.prototype.add_call=function(){var opts={"controller":this};var pm=new PublicMethodServer('call',opts);var options={};options.required=true;options.maxlength="15";pm.addField(new FieldString("tel",options));this.addPublicMethod(pm);} 
function RawMaterialStoreUserData_Controller(options){options=options||{};options.listModelClass=RawMaterialStoreUserDataList_Model;options.objModelClass=RawMaterialStoreUserDataList_Model;RawMaterialStoreUserData_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(RawMaterialStoreUserData_Controller,ControllerObjServer);RawMaterialStoreUserData_Controller.prototype.addInsert=function(){RawMaterialStoreUserData_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};var field=new FieldFloat("quant",options);pm.addField(field);}
RawMaterialStoreUserData_Controller.prototype.addUpdate=function(){RawMaterialStoreUserData_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("material_id",options);pm.addField(field);field=new FieldInt("old_material_id",{});pm.addField(field);var options={};var field=new FieldFloat("quant",options);pm.addField(field);}
RawMaterialStoreUserData_Controller.prototype.addDelete=function(){RawMaterialStoreUserData_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("material_id",options));}
RawMaterialStoreUserData_Controller.prototype.addGetList=function(){RawMaterialStoreUserData_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};pm.addField(new FieldString("material_descr",f_opts));var f_opts={};pm.addField(new FieldFloat("quant",f_opts));}
RawMaterialStoreUserData_Controller.prototype.addGetObject=function(){RawMaterialStoreUserData_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("material_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function Employee_Controller(options){options=options||{};options.listModelClass=EmployeeList_Model;options.objModelClass=EmployeeList_Model;Employee_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_set_work_schedule_hour();}
extend(Employee_Controller,ControllerObjServer);Employee_Controller.prototype.addInsert=function(){Employee_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldBool("employed",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldText("inn",options);pm.addField(field);var options={};var field=new FieldText("post",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Employee_Controller.prototype.addUpdate=function(){Employee_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldBool("employed",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldText("inn",options);pm.addField(field);var options={};var field=new FieldText("post",options);pm.addField(field);}
Employee_Controller.prototype.addDelete=function(){Employee_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Employee_Controller.prototype.addGetList=function(){Employee_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldBool("employed",f_opts));var f_opts={};pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};pm.addField(new FieldText("inn",f_opts));var f_opts={};pm.addField(new FieldText("post",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Employee_Controller.prototype.addGetObject=function(){Employee_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Employee_Controller.prototype.add_set_work_schedule_hour=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_work_schedule_hour',opts);var options={};options.required=true;pm.addField(new FieldInt("employee_id",options));var options={};options.required=true;options.maxlength="10";pm.addField(new FieldString("day",options));var options={};pm.addField(new FieldInt("hours",options));this.addPublicMethod(pm);} 
function EmployeeWorkTimeSchedule_Controller(options){options=options||{};options.listModelClass=EmployeeWorkTimeScheduleList_Model;EmployeeWorkTimeSchedule_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();}
extend(EmployeeWorkTimeSchedule_Controller,ControllerObjServer);EmployeeWorkTimeSchedule_Controller.prototype.addInsert=function(){EmployeeWorkTimeSchedule_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("employee_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldDate("day",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("hours",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
EmployeeWorkTimeSchedule_Controller.prototype.addUpdate=function(){EmployeeWorkTimeSchedule_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldDate("day",options);pm.addField(field);var options={};var field=new FieldInt("hours",options);pm.addField(field);}
EmployeeWorkTimeSchedule_Controller.prototype.addDelete=function(){EmployeeWorkTimeSchedule_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
EmployeeWorkTimeSchedule_Controller.prototype.addGetList=function(){EmployeeWorkTimeSchedule_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("employee_id",f_opts));var f_opts={};f_opts.alias="Сотрудник";pm.addField(new FieldString("employee_descr",f_opts));var f_opts={};pm.addField(new FieldDate("day",f_opts));var f_opts={};pm.addField(new FieldBool("day_off",f_opts));var f_opts={};f_opts.alias="Часы";pm.addField(new FieldInt("hours",f_opts));} 
function AstCall_Controller(options){options=options||{};options.listModelClass=AstCallList_Model;options.objModelClass=AstCallList_Model;AstCall_Controller.superclass.constructor.call(this,options);this.addUpdate();this.addGetList();this.addGetObject();this.add_client_call_hist();this.add_client_ship_hist();this.add_active_call();this.add_active_call_inform();this.add_set_active_call_client_kind();this.add_new_client();this.add_manager_report();this.add_restart_ast();}
extend(AstCall_Controller,ControllerObjServer);AstCall_Controller.prototype.addUpdate=function(){AstCall_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldText("unique_id",options);pm.addField(field);field=new FieldText("old_unique_id",{});pm.addField(field);var options={};var field=new FieldString("caller_id_num",options);pm.addField(field);var options={};var field=new FieldString("ext",options);pm.addField(field);var options={};var field=new FieldDateTime("start_time",options);pm.addField(field);var options={};var field=new FieldDateTime("end_time",options);pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.enumValues='in,out';var field=new FieldEnum("call_type",options);pm.addField(field);var options={};var field=new FieldInt("user_id_to",options);pm.addField(field);var options={};var field=new FieldInt("answer_unique_id",options);pm.addField(field);var options={};var field=new FieldDateTime("dt",options);pm.addField(field);var options={};var field=new FieldText("manager_comment",options);pm.addField(field);var options={};var field=new FieldBool("informed",options);pm.addField(field);var options={};var field=new FieldString("create_date",options);pm.addField(field);var options={};var field=new FieldText("record_link",options);pm.addField(field);var options={};var field=new FieldText("call_status",options);pm.addField(field);var options={};var field=new FieldInt("contact_id",options);pm.addField(field);var options={};pm.addField(new FieldString("contact_name",options));var options={};pm.addField(new FieldString("client_name",options));var options={};pm.addField(new FieldEnum("client_kind",options));var options={};pm.addField(new FieldInt("client_come_from_id",options));var options={};pm.addField(new FieldInt("client_type_id",options));var options={};pm.addField(new FieldString("manager_comment",options));}
AstCall_Controller.prototype.addGetList=function(){AstCall_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldText("unique_id",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};pm.addField(new FieldString("call_type",f_opts));var f_opts={};pm.addField(new FieldDateTime("start_time",f_opts));var f_opts={};pm.addField(new FieldDateTime("end_time",f_opts));var f_opts={};pm.addField(new FieldTime("dur_time",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("manager_comment",f_opts));var f_opts={};pm.addField(new FieldText("client_comment",f_opts));var f_opts={};pm.addField(new FieldString("client_create_date",f_opts));var f_opts={};pm.addField(new FieldString("ours",f_opts));var f_opts={};pm.addField(new FieldString("client_type_id",f_opts));var f_opts={};pm.addField(new FieldJSON("client_types_ref",f_opts));var f_opts={};pm.addField(new FieldString("client_come_from_id",f_opts));var f_opts={};pm.addField(new FieldJSON("client_come_from_ref",f_opts));var f_opts={};pm.addField(new FieldString("client_kind",f_opts));var f_opts={};pm.addField(new FieldString("caller_id_num",f_opts));var f_opts={};pm.addField(new FieldString("ext",f_opts));var f_opts={};pm.addField(new FieldString("num",f_opts));var f_opts={};pm.addField(new FieldFloat("offer_quant",f_opts));var f_opts={};pm.addField(new FieldFloat("offer_total",f_opts));var f_opts={};pm.addField(new FieldString("offer_result",f_opts));var f_opts={};pm.addField(new FieldText("record_link",f_opts));var f_opts={};pm.addField(new FieldText("call_status",f_opts));var options={};pm.addField(new FieldString("new_clients",options));pm.getField(this.PARAM_ORD_FIELDS).setValue("start_time");}
AstCall_Controller.prototype.addGetObject=function(){AstCall_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldText("unique_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
AstCall_Controller.prototype.add_client_call_hist=function(){var opts={"controller":this};var pm=new PublicMethodServer('client_call_hist',opts);this.addPublicMethod(pm);}
AstCall_Controller.prototype.add_client_ship_hist=function(){var opts={"controller":this};var pm=new PublicMethodServer('client_ship_hist',opts);this.addPublicMethod(pm);}
AstCall_Controller.prototype.add_active_call=function(){var opts={"controller":this};var pm=new PublicMethodServer('active_call',opts);this.addPublicMethod(pm);}
AstCall_Controller.prototype.add_active_call_inform=function(){var opts={"controller":this};var pm=new PublicMethodServer('active_call_inform',opts);this.addPublicMethod(pm);}
AstCall_Controller.prototype.add_set_active_call_client_kind=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_active_call_client_kind',opts);var options={};options.required=true;pm.addField(new FieldString("id",options));var options={};options.required=true;pm.addField(new FieldString("kind",options));this.addPublicMethod(pm);}
AstCall_Controller.prototype.add_new_client=function(){var opts={"controller":this};var pm=new PublicMethodServer('new_client',opts);var options={};pm.addField(new FieldString("ast_call_id",options));var options={};pm.addField(new FieldInt("client_id",options));var options={};pm.addField(new FieldString("client_name",options));var options={};pm.addField(new FieldString("contact_name",options));var options={};pm.addField(new FieldInt("client_type_id",options));var options={};pm.addField(new FieldInt("client_come_from_id",options));var options={};pm.addField(new FieldString("client_comment_text",options));var options={};options.required=true;pm.addField(new FieldInt("destination_id",options));var options={};pm.addField(new FieldInt("concrete_type_id",options));var options={};pm.addField(new FieldString("unload_type",options));var options={};options.maxlength="15";pm.addField(new FieldFloat("concrete_price",options));var options={};options.maxlength="15";pm.addField(new FieldFloat("destination_price",options));var options={};options.maxlength="15";pm.addField(new FieldFloat("unload_price",options));var options={};options.maxlength="15";pm.addField(new FieldFloat("total",options));var options={};options.maxlength="19";pm.addField(new FieldFloat("quant",options));var options={};pm.addField(new FieldString("offer_result",options));var options={};pm.addField(new FieldText("comment_text",options));this.addPublicMethod(pm);}
AstCall_Controller.prototype.add_manager_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('manager_report',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
AstCall_Controller.prototype.add_restart_ast=function(){var opts={"controller":this};var pm=new PublicMethodServer('restart_ast',opts);this.addPublicMethod(pm);} 
function UserMacAddress_Controller(options){options=options||{};options.listModelClass=UserMacAddressList_Model;options.objModelClass=UserMacAddressList_Model;UserMacAddress_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(UserMacAddress_Controller,ControllerObjServer);UserMacAddress_Controller.prototype.addInsert=function(){UserMacAddress_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("mac_address",options);pm.addField(field);var options={};var field=new FieldString("mac_address_hash",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
UserMacAddress_Controller.prototype.addUpdate=function(){UserMacAddress_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldString("mac_address",options);pm.addField(field);var options={};var field=new FieldString("mac_address_hash",options);pm.addField(field);}
UserMacAddress_Controller.prototype.addDelete=function(){UserMacAddress_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
UserMacAddress_Controller.prototype.addGetList=function(){UserMacAddress_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldString("user_descr",f_opts));var f_opts={};pm.addField(new FieldString("mac_address",f_opts));}
UserMacAddress_Controller.prototype.addGetObject=function(){UserMacAddress_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ClientTel_Controller(options){options=options||{};options.listModelClass=ClientTelList_Model;options.objModelClass=ClientTel_Model;ClientTel_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_complete_tel();this.add_upsert();this.add_get_ref();}
extend(ClientTel_Controller,ControllerObjServer);ClientTel_Controller.prototype.addInsert=function(){ClientTel_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);var options={};options.alias="ФИО";var field=new FieldText("name",options);pm.addField(field);var options={};options.alias="Телефон";options.required=true;var field=new FieldString("tel",options);pm.addField(field);var options={};options.alias="Эл.почта";var field=new FieldString("email",options);pm.addField(field);var options={};options.alias="Должность";var field=new FieldString("post",options);pm.addField(field);var options={};var field=new FieldText("search",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ClientTel_Controller.prototype.addUpdate=function(){ClientTel_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);var options={};options.alias="ФИО";var field=new FieldText("name",options);pm.addField(field);var options={};options.alias="Телефон";var field=new FieldString("tel",options);pm.addField(field);var options={};options.alias="Эл.почта";var field=new FieldString("email",options);pm.addField(field);var options={};options.alias="Должность";var field=new FieldString("post",options);pm.addField(field);var options={};var field=new FieldText("search",options);pm.addField(field);}
ClientTel_Controller.prototype.addDelete=function(){ClientTel_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ClientTel_Controller.prototype.addGetList=function(){ClientTel_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};f_opts.alias="ФИО";pm.addField(new FieldText("name",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("tel",f_opts));var f_opts={};f_opts.alias="Эл.почта";pm.addField(new FieldString("email",f_opts));var f_opts={};f_opts.alias="Должность";pm.addField(new FieldString("post",f_opts));var f_opts={};pm.addField(new FieldString("search",f_opts));var f_opts={};pm.addField(new FieldBool("tm_exists",f_opts));var f_opts={};pm.addField(new FieldBool("tm_activated",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("search");}
ClientTel_Controller.prototype.addGetObject=function(){ClientTel_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
ClientTel_Controller.prototype.addComplete=function(){ClientTel_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("search",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("search");}
ClientTel_Controller.prototype.add_complete_tel=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_tel',opts);var options={};options.maxlength="200";pm.addField(new FieldString("search",options));var options={};pm.addField(new FieldBool("tm_exists",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
ClientTel_Controller.prototype.add_upsert=function(){var opts={"controller":this};var pm=new PublicMethodServer('upsert',opts);var options={};options.required=true;pm.addField(new FieldInt("client_id",options));var options={};options.required=true;options.maxlength="250";pm.addField(new FieldString("name",options));var options={};options.required=true;options.maxlength="50";pm.addField(new FieldString("tel",options));this.addPublicMethod(pm);}
ClientTel_Controller.prototype.add_get_ref=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_ref',opts);var options={};options.required=true;options.maxlength="50";pm.addField(new FieldString("tel",options));this.addPublicMethod(pm);} 
function ClientType_Controller(options){options=options||{};options.listModelClass=ClientType_Model;options.objModelClass=ClientType_Model;ClientType_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ClientType_Controller,ControllerObjServer);ClientType_Controller.prototype.addInsert=function(){ClientType_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ClientType_Controller.prototype.addUpdate=function(){ClientType_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
ClientType_Controller.prototype.addDelete=function(){ClientType_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ClientType_Controller.prototype.addGetList=function(){ClientType_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("id");}
ClientType_Controller.prototype.addGetObject=function(){ClientType_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ClientComeFrom_Controller(options){options=options||{};options.listModelClass=ClientComeFrom_Model;options.objModelClass=ClientComeFrom_Model;ClientComeFrom_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ClientComeFrom_Controller,ControllerObjServer);ClientComeFrom_Controller.prototype.addInsert=function(){ClientComeFrom_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ClientComeFrom_Controller.prototype.addUpdate=function(){ClientComeFrom_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
ClientComeFrom_Controller.prototype.addDelete=function(){ClientComeFrom_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ClientComeFrom_Controller.prototype.addGetList=function(){ClientComeFrom_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("id");}
ClientComeFrom_Controller.prototype.addGetObject=function(){ClientComeFrom_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function PumpVehicle_Controller(options){options=options||{};options.listModelClass=PumpVehicleList_Model;options.objModelClass=PumpVehicleList_Model;PumpVehicle_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.add_get_work_list();this.addGetObject();this.add_get_price();this.add_get_contact_refs();this.add_check_order_min_vals();}
extend(PumpVehicle_Controller,ControllerObjServer);PumpVehicle_Controller.prototype.addInsert=function(){PumpVehicle_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};var field=new FieldInt("pump_price_id",options);pm.addField(field);var options={};var field=new FieldString("phone_cel",options);pm.addField(field);var options={};var field=new FieldInt("pump_length",options);pm.addField(field);var options={};var field=new FieldBool("deleted",options);pm.addField(field);var options={};var field=new FieldString("comment_text",options);pm.addField(field);var options={};var field=new FieldJSONB("phone_cels",options);pm.addField(field);var options={};var field=new FieldJSONB("pump_prices",options);pm.addField(field);var options={};var field=new FieldBool("specialist_inform",options);pm.addField(field);var options={};var field=new FieldBool("driver_ship_inform",options);pm.addField(field);var options={};options.alias="Минимальное количество м3 для заявки";var field=new FieldInt("min_order_quant",options);pm.addField(field);var options={};options.alias="Минимальный интервал между заявками";var field=new FieldInterval("min_order_time_interval",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
PumpVehicle_Controller.prototype.addUpdate=function(){PumpVehicle_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};var field=new FieldInt("pump_price_id",options);pm.addField(field);var options={};var field=new FieldString("phone_cel",options);pm.addField(field);var options={};var field=new FieldInt("pump_length",options);pm.addField(field);var options={};var field=new FieldBool("deleted",options);pm.addField(field);var options={};var field=new FieldString("comment_text",options);pm.addField(field);var options={};var field=new FieldJSONB("phone_cels",options);pm.addField(field);var options={};var field=new FieldJSONB("pump_prices",options);pm.addField(field);var options={};var field=new FieldBool("specialist_inform",options);pm.addField(field);var options={};var field=new FieldBool("driver_ship_inform",options);pm.addField(field);var options={};options.alias="Минимальное количество м3 для заявки";var field=new FieldInt("min_order_quant",options);pm.addField(field);var options={};options.alias="Минимальный интервал между заявками";var field=new FieldInterval("min_order_time_interval",options);pm.addField(field);}
PumpVehicle_Controller.prototype.addDelete=function(){PumpVehicle_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
PumpVehicle_Controller.prototype.addGetList=function(){PumpVehicle_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("phone_cel",f_opts));var f_opts={};pm.addField(new FieldJSON("pump_prices_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("pump_vehicles_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("vehicle_owners_ref",f_opts));var f_opts={};pm.addField(new FieldString("feature",f_opts));var f_opts={};pm.addField(new FieldString("make",f_opts));var f_opts={};pm.addField(new FieldString("plate",f_opts));var f_opts={};pm.addField(new FieldBool("deleted",f_opts));var f_opts={};pm.addField(new FieldInt("pump_length",f_opts));var f_opts={};pm.addField(new FieldString("comment_text",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_owner_id",f_opts));var f_opts={};pm.addField(new FieldJSONB("phone_cels",f_opts));var f_opts={};pm.addField(new FieldJSONB("pump_prices",f_opts));var f_opts={};pm.addField(new FieldArray("vehicle_owners_ar",f_opts));var f_opts={};pm.addField(new FieldJSONB("self_ref",f_opts));var f_opts={};pm.addField(new FieldBool("specialist_inform",f_opts));var f_opts={};f_opts.alias="Контакты";pm.addField(new FieldJSON("contact_list",f_opts));var f_opts={};pm.addField(new FieldBool("driver_ship_inform",f_opts));var f_opts={};f_opts.alias="Минимальное количество м3 для заявки";pm.addField(new FieldInt("min_order_quant",f_opts));var f_opts={};f_opts.alias="Минимальный интервал между заявками";pm.addField(new FieldInterval("min_order_time_interval",f_opts));}
PumpVehicle_Controller.prototype.add_get_work_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_work_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
PumpVehicle_Controller.prototype.addGetObject=function(){PumpVehicle_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
PumpVehicle_Controller.prototype.add_get_price=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_price',opts);var options={};options.required=true;pm.addField(new FieldInt("pump_id",options));var options={};options.required=true;options.maxlength="19";pm.addField(new FieldFloat("quant",options));this.addPublicMethod(pm);}
PumpVehicle_Controller.prototype.add_get_contact_refs=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_contact_refs',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
PumpVehicle_Controller.prototype.add_check_order_min_vals=function(){var opts={"controller":this};var pm=new PublicMethodServer('check_order_min_vals',opts);var options={};options.required=true;pm.addField(new FieldInt("pump_vehicle_id",options));var options={};options.required=true;pm.addField(new FieldInt("order_id",options));var options={};options.required=true;options.maxlength="19";pm.addField(new FieldFloat("order_quant",options));var options={};options.required=true;options.maxlength="19";pm.addField(new FieldDateTime("order_date_time",options));this.addPublicMethod(pm);} 
function PumpPrice_Controller(options){options=options||{};options.listModelClass=PumpPrice_Model;options.objModelClass=PumpPrice_Model;PumpPrice_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(PumpPrice_Controller,ControllerObjServer);PumpPrice_Controller.prototype.addInsert=function(){PumpPrice_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
PumpPrice_Controller.prototype.addUpdate=function(){PumpPrice_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
PumpPrice_Controller.prototype.addDelete=function(){PumpPrice_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
PumpPrice_Controller.prototype.addGetList=function(){PumpPrice_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));}
PumpPrice_Controller.prototype.addGetObject=function(){PumpPrice_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function PumpPriceValue_Controller(options){options=options||{};options.listModelClass=PumpPriceValue_Model;options.objModelClass=PumpPriceValue_Model;PumpPriceValue_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(PumpPriceValue_Controller,ControllerObjServer);PumpPriceValue_Controller.prototype.addInsert=function(){PumpPriceValue_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.autoInc=true;var field=new FieldInt("pump_price_id",options);pm.addField(field);var options={};var field=new FieldFloat("quant_from",options);pm.addField(field);var options={};var field=new FieldFloat("quant_to",options);pm.addField(field);var options={};var field=new FieldFloat("price_m",options);pm.addField(field);var options={};var field=new FieldFloat("price_fixed",options);pm.addField(field);var options={};options.alias="Гарантированная сумма (если установлено, и объем превышает, то сначала эта сумма, а потом по шкале остаток кубов)";var field=new FieldBool("price_garanteed",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
PumpPriceValue_Controller.prototype.addUpdate=function(){PumpPriceValue_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.autoInc=true;var field=new FieldInt("pump_price_id",options);pm.addField(field);var options={};var field=new FieldFloat("quant_from",options);pm.addField(field);var options={};var field=new FieldFloat("quant_to",options);pm.addField(field);var options={};var field=new FieldFloat("price_m",options);pm.addField(field);var options={};var field=new FieldFloat("price_fixed",options);pm.addField(field);var options={};options.alias="Гарантированная сумма (если установлено, и объем превышает, то сначала эта сумма, а потом по шкале остаток кубов)";var field=new FieldBool("price_garanteed",options);pm.addField(field);}
PumpPriceValue_Controller.prototype.addDelete=function(){PumpPriceValue_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
PumpPriceValue_Controller.prototype.addGetList=function(){PumpPriceValue_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("pump_price_id",f_opts));var f_opts={};pm.addField(new FieldFloat("quant_from",f_opts));var f_opts={};pm.addField(new FieldFloat("quant_to",f_opts));var f_opts={};pm.addField(new FieldFloat("price_m",f_opts));var f_opts={};pm.addField(new FieldFloat("price_fixed",f_opts));var f_opts={};f_opts.alias="Гарантированная сумма (если установлено, и объем превышает, то сначала эта сумма, а потом по шкале остаток кубов)";pm.addField(new FieldBool("price_garanteed",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("quant_from");}
PumpPriceValue_Controller.prototype.addGetObject=function(){PumpPriceValue_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function Quarry_Controller(options){options=options||{};options.listModelClass=Quarry_Model;options.objModelClass=Quarry_Model;Quarry_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();}
extend(Quarry_Controller,ControllerObjServer);Quarry_Controller.prototype.addInsert=function(){Quarry_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Quarry_Controller.prototype.addUpdate=function(){Quarry_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
Quarry_Controller.prototype.addDelete=function(){Quarry_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Quarry_Controller.prototype.addGetList=function(){Quarry_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Quarry_Controller.prototype.addGetObject=function(){Quarry_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Quarry_Controller.prototype.addComplete=function(){Quarry_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function SandQuarryVal_Controller(options){options=options||{};options.listModelClass=SandQuarryValList_Model;options.objModelClass=SandQuarryValList_Model;SandQuarryVal_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(SandQuarryVal_Controller,ControllerObjServer);SandQuarryVal_Controller.prototype.addInsert=function(){SandQuarryVal_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDate("day",options);pm.addField(field);var options={};var field=new FieldInt("quarry_id",options);pm.addField(field);var options={};var field=new FieldFloat("v_mkr",options);pm.addField(field);var options={};var field=new FieldFloat("v_2_5",options);pm.addField(field);var options={};var field=new FieldFloat("v_1_25",options);pm.addField(field);var options={};var field=new FieldFloat("v_0_63",options);pm.addField(field);var options={};var field=new FieldFloat("v_0_63_2",options);pm.addField(field);var options={};var field=new FieldFloat("v_0_315",options);pm.addField(field);var options={};var field=new FieldFloat("v_0_16",options);pm.addField(field);var options={};var field=new FieldFloat("v_0_05",options);pm.addField(field);var options={};var field=new FieldFloat("v_nasip",options);pm.addField(field);var options={};var field=new FieldFloat("v_dno",options);pm.addField(field);var options={};var field=new FieldFloat("v_istin",options);pm.addField(field);var options={};var field=new FieldFloat("v_humid",options);pm.addField(field);var options={};var field=new FieldFloat("v_dust",options);pm.addField(field);var options={};var field=new FieldFloat("v_void",options);pm.addField(field);var options={};var field=new FieldText("v_comment",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
SandQuarryVal_Controller.prototype.addUpdate=function(){SandQuarryVal_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDate("day",options);pm.addField(field);var options={};var field=new FieldInt("quarry_id",options);pm.addField(field);var options={};var field=new FieldFloat("v_mkr",options);pm.addField(field);var options={};var field=new FieldFloat("v_2_5",options);pm.addField(field);var options={};var field=new FieldFloat("v_1_25",options);pm.addField(field);var options={};var field=new FieldFloat("v_0_63",options);pm.addField(field);var options={};var field=new FieldFloat("v_0_63_2",options);pm.addField(field);var options={};var field=new FieldFloat("v_0_315",options);pm.addField(field);var options={};var field=new FieldFloat("v_0_16",options);pm.addField(field);var options={};var field=new FieldFloat("v_0_05",options);pm.addField(field);var options={};var field=new FieldFloat("v_nasip",options);pm.addField(field);var options={};var field=new FieldFloat("v_dno",options);pm.addField(field);var options={};var field=new FieldFloat("v_istin",options);pm.addField(field);var options={};var field=new FieldFloat("v_humid",options);pm.addField(field);var options={};var field=new FieldFloat("v_dust",options);pm.addField(field);var options={};var field=new FieldFloat("v_void",options);pm.addField(field);var options={};var field=new FieldText("v_comment",options);pm.addField(field);}
SandQuarryVal_Controller.prototype.addDelete=function(){SandQuarryVal_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
SandQuarryVal_Controller.prototype.addGetList=function(){SandQuarryVal_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDate("day",f_opts));var f_opts={};pm.addField(new FieldString("day_descr",f_opts));var f_opts={};pm.addField(new FieldInt("quarry_id",f_opts));var f_opts={};pm.addField(new FieldString("quarry_descr",f_opts));var f_opts={};pm.addField(new FieldFloat("v_mkr",f_opts));var f_opts={};pm.addField(new FieldFloat("v_2_5",f_opts));var f_opts={};pm.addField(new FieldFloat("v_1_25",f_opts));var f_opts={};pm.addField(new FieldFloat("v_0_63",f_opts));var f_opts={};pm.addField(new FieldFloat("v_0_16",f_opts));var f_opts={};pm.addField(new FieldFloat("v_0_05",f_opts));var f_opts={};pm.addField(new FieldFloat("v_nasip",f_opts));var f_opts={};pm.addField(new FieldFloat("v_istin",f_opts));var f_opts={};pm.addField(new FieldFloat("v_humid",f_opts));var f_opts={};pm.addField(new FieldFloat("v_dust",f_opts));var f_opts={};pm.addField(new FieldFloat("v_void",f_opts));var f_opts={};pm.addField(new FieldText("v_comment",f_opts));}
SandQuarryVal_Controller.prototype.addGetObject=function(){SandQuarryVal_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function StoneQuarryVal_Controller(options){options=options||{};options.listModelClass=StoneQuarryValList_Model;options.objModelClass=StoneQuarryValList_Model;StoneQuarryVal_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(StoneQuarryVal_Controller,ControllerObjServer);StoneQuarryVal_Controller.prototype.addInsert=function(){StoneQuarryVal_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDate("day",options);pm.addField(field);var options={};var field=new FieldInt("quarry_id",options);pm.addField(field);var options={};var field=new FieldFloat("v_nasip",options);pm.addField(field);var options={};var field=new FieldFloat("v_istin",options);pm.addField(field);var options={};var field=new FieldFloat("v_dust",options);pm.addField(field);var options={};var field=new FieldFloat("v_humid",options);pm.addField(field);var options={};var field=new FieldFloat("v_void",options);pm.addField(field);var options={};var field=new FieldText("v_comment",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
StoneQuarryVal_Controller.prototype.addUpdate=function(){StoneQuarryVal_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDate("day",options);pm.addField(field);var options={};var field=new FieldInt("quarry_id",options);pm.addField(field);var options={};var field=new FieldFloat("v_nasip",options);pm.addField(field);var options={};var field=new FieldFloat("v_istin",options);pm.addField(field);var options={};var field=new FieldFloat("v_dust",options);pm.addField(field);var options={};var field=new FieldFloat("v_humid",options);pm.addField(field);var options={};var field=new FieldFloat("v_void",options);pm.addField(field);var options={};var field=new FieldText("v_comment",options);pm.addField(field);}
StoneQuarryVal_Controller.prototype.addDelete=function(){StoneQuarryVal_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
StoneQuarryVal_Controller.prototype.addGetList=function(){StoneQuarryVal_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDate("day",f_opts));var f_opts={};pm.addField(new FieldString("day_descr",f_opts));var f_opts={};pm.addField(new FieldInt("quarry_id",f_opts));var f_opts={};pm.addField(new FieldString("quarry_descr",f_opts));var f_opts={};pm.addField(new FieldFloat("v_nasip",f_opts));var f_opts={};pm.addField(new FieldFloat("v_istin",f_opts));var f_opts={};pm.addField(new FieldFloat("v_dust",f_opts));var f_opts={};pm.addField(new FieldFloat("v_humid",f_opts));var f_opts={};pm.addField(new FieldFloat("v_void",f_opts));var f_opts={};pm.addField(new FieldText("v_comment",f_opts));}
StoneQuarryVal_Controller.prototype.addGetObject=function(){StoneQuarryVal_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function SpecialistRequest_Controller(options){options=options||{};options.listModelClass=SpecialistRequestList_Model;options.objModelClass=SpecialistRequestList_Model;SpecialistRequest_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_set_viewed();}
extend(SpecialistRequest_Controller,ControllerObjServer);SpecialistRequest_Controller.prototype.addInsert=function(){SpecialistRequest_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};var field=new FieldText("name",options);pm.addField(field);var options={};var field=new FieldText("comment",options);pm.addField(field);var options={};var field=new FieldText("tel",options);pm.addField(field);var options={};var field=new FieldBool("viewed",options);pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);var options={};var field=new FieldText("manager_comment",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
SpecialistRequest_Controller.prototype.addUpdate=function(){SpecialistRequest_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};var field=new FieldText("name",options);pm.addField(field);var options={};var field=new FieldText("comment",options);pm.addField(field);var options={};var field=new FieldText("tel",options);pm.addField(field);var options={};var field=new FieldBool("viewed",options);pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);var options={};var field=new FieldText("manager_comment",options);pm.addField(field);}
SpecialistRequest_Controller.prototype.addDelete=function(){SpecialistRequest_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
SpecialistRequest_Controller.prototype.addGetList=function(){SpecialistRequest_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time_descr",f_opts));var f_opts={};f_opts.alias="ФИО";pm.addField(new FieldText("name",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("comment",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldText("tel",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};f_opts.alias="Клиент";pm.addField(new FieldString("client_descr",f_opts));}
SpecialistRequest_Controller.prototype.addGetObject=function(){SpecialistRequest_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Номер";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
SpecialistRequest_Controller.prototype.add_set_viewed=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_viewed',opts);var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);} 
function SiteFeedBack_Controller(options){options=options||{};options.listModelClass=SiteFeedBackList_Model;SiteFeedBack_Controller.superclass.constructor.call(this,options);this.addGetList();this.add_set_viewed();}
extend(SiteFeedBack_Controller,ControllerObjServer);SiteFeedBack_Controller.prototype.addGetList=function(){SiteFeedBack_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldString("date_time_descr",f_opts));var f_opts={};f_opts.alias="ФИО";pm.addField(new FieldText("name",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("comment",f_opts));var f_opts={};f_opts.alias="Email";pm.addField(new FieldText("email",f_opts));var f_opts={};pm.addField(new FieldBool("viewed",f_opts));var f_opts={};f_opts.alias="Просмотрено";pm.addField(new FieldString("viewed_descr",f_opts));}
SiteFeedBack_Controller.prototype.add_set_viewed=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_viewed',opts);var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);} 
function EmailTemplate_Controller(options){options=options||{};options.listModelClass=EmailTemplateList_Model;options.objModelClass=EmailTemplateList_Model;EmailTemplate_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(EmailTemplate_Controller,ControllerObjServer);EmailTemplate_Controller.prototype.addInsert=function(){EmailTemplate_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Тип email";options.required=true;options.enumValues='new_account,reset_pwd';var field=new FieldEnum("email_type",options);pm.addField(field);var options={};options.alias="Шаблон";options.required=true;var field=new FieldText("template",options);pm.addField(field);var options={};options.alias="Комментарий";options.required=true;var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Тема";options.required=true;var field=new FieldText("mes_subject",options);pm.addField(field);var options={};options.alias="Поля";options.required=true;var field=new FieldText("fields",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
EmailTemplate_Controller.prototype.addUpdate=function(){EmailTemplate_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Тип email";options.enumValues='new_account,reset_pwd';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("email_type",options);pm.addField(field);var options={};options.alias="Шаблон";var field=new FieldText("template",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Тема";var field=new FieldText("mes_subject",options);pm.addField(field);var options={};options.alias="Поля";var field=new FieldText("fields",options);pm.addField(field);}
EmailTemplate_Controller.prototype.addDelete=function(){EmailTemplate_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
EmailTemplate_Controller.prototype.addGetList=function(){EmailTemplate_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("email_type",f_opts));var f_opts={};pm.addField(new FieldString("email_type_descr",f_opts));var f_opts={};pm.addField(new FieldText("template",f_opts));var f_opts={};pm.addField(new FieldText("fields",f_opts));}
EmailTemplate_Controller.prototype.addGetObject=function(){EmailTemplate_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ClientValidDuplicate_Controller(options){options=options||{};options.listModelClass=ClientValidDuplicateList_Model;ClientValidDuplicate_Controller.superclass.constructor.call(this,options);this.addDelete();this.addGetList();}
extend(ClientValidDuplicate_Controller,ControllerObjServer);ClientValidDuplicate_Controller.prototype.addDelete=function(){ClientValidDuplicate_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("client_id",options));var options={"required":true};pm.addField(new FieldString("tel",options));}
ClientValidDuplicate_Controller.prototype.addGetList=function(){ClientValidDuplicate_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("tel",f_opts));var f_opts={};f_opts.alias="Клиент";pm.addField(new FieldText("clients",f_opts));} 
function OrderPump_Controller(options){options=options||{};options.listModelClass=OrderPumpList_Model;options.objModelClass=OrderPumpList_Model;OrderPump_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(OrderPump_Controller,ControllerObjServer);OrderPump_Controller.prototype.addInsert=function(){OrderPump_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("order_id",options);pm.addField(field);var options={};var field=new FieldBool("viewed",options);pm.addField(field);var options={};var field=new FieldText("comment",options);pm.addField(field);}
OrderPump_Controller.prototype.addUpdate=function(){OrderPump_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("order_id",options);pm.addField(field);field=new FieldInt("old_order_id",{});pm.addField(field);var options={};var field=new FieldBool("viewed",options);pm.addField(field);var options={};var field=new FieldText("comment",options);pm.addField(field);}
OrderPump_Controller.prototype.addDelete=function(){OrderPump_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("order_id",options));}
OrderPump_Controller.prototype.addGetList=function(){OrderPump_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("order_id",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("number",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};f_opts.alias="Клиент";pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldInt("destination_id",f_opts));var f_opts={};f_opts.alias="Объект";pm.addField(new FieldJSON("destinations_ref",f_opts));var f_opts={};pm.addField(new FieldInt("concrete_type_id",f_opts));var f_opts={};f_opts.alias="Марка";pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};f_opts.alias="Подача";pm.addField(new FieldString("unload_type",f_opts));var f_opts={};f_opts.alias="Комментарий заявки";pm.addField(new FieldText("comment_text",f_opts));var f_opts={};f_opts.alias="Прораб";pm.addField(new FieldText("descr",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("phone_cel",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};pm.addField(new FieldBool("viewed",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("comment",f_opts));var f_opts={};f_opts.alias="Автор";pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Насос";pm.addField(new FieldJSON("pump_vehicles_ref",f_opts));var f_opts={};pm.addField(new FieldInt("pump_vehicle_id",f_opts));var f_opts={};f_opts.alias="Владелец насоса";pm.addField(new FieldJSON("pump_vehicle_owners_ref",f_opts));var f_opts={};pm.addField(new FieldInt("pump_vehicle_owner_id",f_opts));var f_opts={};pm.addField(new FieldArray("pump_vehicle_owners_ar",f_opts));}
OrderPump_Controller.prototype.addGetObject=function(){OrderPump_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("order_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function Login_View(id,options){Login_View.superclass.constructor.call(this,id,options);var self=this;var err_ctrl=new ErrorControl(id+":error");this.addElement(err_ctrl);var check_for_enter=function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){self.login();}};this.addElement(new EditString(id+":user",{"html":"<input/>","focus":true,"maxlength":"100","cmdClear":false,"required":true,"errorControl":err_ctrl,"events":{"keydown":check_for_enter}}));this.addElement(new EditPassword(id+":pwd",{"html":"<input/>","maxlength":"50","required":true,"errorControl":err_ctrl,"events":{"keydown":check_for_enter}}));this.addElement(new Button(id+":submit_login",{"onClick":function(){self.login();}}));var contr=new User_Controller();var pm=contr.getPublicMethod("login");pm.setFieldValue("width_type",window.getWidthType());this.addCommand(new Command("login",{"publicMethod":pm,"control":this.getElement("submit_login"),"async":false,"bindings":[new DataBinding({"field":pm.getField("name"),"control":this.getElement("user")}),new DataBinding({"field":pm.getField("pwd"),"control":this.getElement("pwd")})]}));}
extend(Login_View,ViewAjx);Login_View.prototype.setError=function(s){this.getElement("error").setValue(s);}
Login_View.prototype.login=function(){var self=this;this.execCommand("login",function(){var REDIR_PAR="?redir=";var p=window.location.href.indexOf(REDIR_PAR);var redir;if(p>=0){redir="?"+CommonHelper.unserialize(decodeURI(window.location.href.substr(p+REDIR_PAR.length))).ref;}else if(window.location.href.indexOf("?v=Login2")>0){redir=window.location.href.substr(0,window.location.href.indexOf("?v=Login2"));}else{redir=window.location.href;}
document.location.href=redir;},function(resp,errCode,errStr){if(errCode==100){self.setError(self.ER_LOGIN);}
else{self.setError((errCode!=undefined)?(errCode+" "+errStr):errStr);}});} 
function About_View(id,options){options=options||{};options.tagName="template";this.model=options.models.About_Model;this.model.getRow(0);options.templateOptions={"LB_APP_NAME":this.LB_APP_NAME,"LB_VERSION":this.LB_VERSION,"LB_AUTHOR":this.LB_AUTHOR,"LB_TECH_MAIL":this.LB_TECH_MAIL,"LB_DB_NAME":this.LB_DB_NAME,"LB_FW_SERVER_VERSION":this.LB_FW_SERVER_VERSION,"LB_FW_CLIENT_VERSION":this.LB_FW_CLIENT_VERSION,"VERSION":window.getApp().VERSION};var fields=this.model.getFields();for(var fid in fields){options.templateOptions[fid]=fields[fid].getValue();}
About_View.superclass.constructor.call(this,id,options);}
extend(About_View,ViewAjx); 
function PasswordRecovery_View(id,options){PasswordRecovery_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new ErrorControl(id+":error"));var check_for_enter=function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){self.passwordRecover();}};this.addElement(new EditEmail(id+":email",{"html":"<input/>","focus":true,"maxLength":"100","cmdClear":false,"required":true,"errorControl":new ErrorControl(id+":email:error"),"events":{"keydown":check_for_enter}}));this.addElement(new Captcha(id+":captcha",{"errorControl":new ErrorControl(id+":captcha:error")}));this.addElement(new Button(id+":submit",{"onClick":function(){self.passwordRecover();}}));var contr=new User_Controller();var pm=contr.getPublicMethod("password_recover");this.addCommand(new Command("password_recover",{"publicMethod":pm,"control":this.getElement("submit"),"async":false,"bindings":[new DataBinding({"field":pm.getField("email"),"control":this.getElement("email")}),new DataBinding({"field":pm.getField("captcha_key"),"control":this.getElement("captcha")})]}));}
extend(PasswordRecovery_View,ViewAjx);PasswordRecovery_View.prototype.setError=function(s){this.getElement("error").setValue(s);}
PasswordRecovery_View.prototype.passwordRecover=function(){var self=this;this.execCommand("password_recover",function(){DOMHelper.addClass(document.getElementById("PasswordRecovery"),"hidden");DOMHelper.delClass(document.getElementById("PasswordRecovered"),"hidden");},function(resp,errCode,errStr){self.setError(errStr);if(resp.modelExists("Captcha_Model")){self.getElement("captcha").setFromResp(resp);}});} 
function ConstantList_View(id,options){ConstantList_View.superclass.constructor.call(this,id,options);this.addElement(new ConstantGrid(id+":grid",{"model":options.models.ConstantList_Model}));}
extend(ConstantList_View,ViewAjx); 
function ViewList_View(id,options){options=options||{};ViewList_View.superclass.constructor.call(this,id,options);var model=options.models.ViewList_Model;var contr=new View_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var filters={"section":{"binding":new CommandBinding({"control":new ViewSectionSelect(id+":filter-section",{"labelCaption":undefined,"contClassName":"form-group "+window.getBsCol(12)}),"field":new FieldString("section")}),"sign":"e"}};var popup_menu=new PopUpMenu();var self=this;var grid=new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":null,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"cmdInsert":false,"cmdCopy":new GridCmd(id+":grid:cmd:openNewWin",{"glyph":"glyphicon glyphicon-duplicate","title":this.OPEN_WIN_TITLE,"showCmdControl":false,"onCommand":function(){var fields=this.m_grid.getModelRow();if(fields){var href=self.getObjectHref(fields);var win=window.open(href,"_blank");win.focus();}}}),"cmdDelete":false,"cmdEdit":new GridCmd(id+":grid:cmd:open",{"glyph":"glyphicon-eye-open","title":this.OPEN_TITLE,"showCmdControl":false,"onCommand":function(){this.m_grid.onEdit();}})}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:user_descr",{"value":this.GRID_COL_CAP,"columns":[new GridColumn({"field":model.getField("user_descr"),"formatFunction":function(fields,cell){var href=self.getObjectHref(fields);var cell_n=cell.getNode();var t_tag=document.createElement("A");t_tag.setAttribute("href",href);t_tag.setAttribute("target","_blank");t_tag.setAttribute("title",self.OPEN_WIN_TITLE);t_tag.textContent=fields.user_descr.getValue();cell_n.appendChild(t_tag);}})]})]})]}),"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true});grid.edit=function(){var row=this.getModelRow();window.getApp().showMenuItem(null,row.c.getValue(),row.f.getValue(),row.t.getValue());}
this.addElement(grid);}
extend(ViewList_View,ViewAjxList);ViewList_View.prototype.getObjectHref=function(fields){var href="";var c=fields.c.getValue();var f=fields.f.getValue();var t=fields.t.getValue();if(c&&c.length)href+=(href==""?"":"&")+"c="+c;if(f&&f.length)href+=(href==""?"":"&")+"f="+f;if(t&&t.length)href+=(href==""?"":"&")+"t="+t;href+=(href==""?"":"&")+"v=Child";window.getChildParam=function(){}
return"?"+href;} 
function MainMenuConstructorList_View(id,options){options=options||{};MainMenuConstructorList_View.superclass.constructor.call(this,id,options);var model=options.models.MainMenuConstructorList_Model;var contr=new MainMenuConstructor_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":MainMenuConstructor_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:role_descr",{"value":this.GRID_ROLE_DESCR_COL_CAP,"columns":[new EnumGridColumn_role_types({"field":model.getField("role_id")})],"sortable":true}),new GridCellHead(id+":grid:head:user_descr",{"value":this.GRID_USER_DESCR_COL_CAP,"columns":[new GridColumn({"field":model.getField("user_descr")})],"sortable":true})]})]}),"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"refreshInterval":0,"autoRefresh":false,"rowSelect":false,"focus":true}));}
extend(MainMenuConstructorList_View,ViewAjx); 
function MainMenuConstructor_View(id,options){options=options||{};MainMenuConstructor_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new HiddenKey(id+":id"));this.addElement(new Enum_role_types(id+":role",{"labelCaption":"Роль:"}));this.addElement(new UserEditRef(id+":user",{"labelCaption":"Пользователь:"}));this.addElement(new MainMenuTree(id+":content"));var contr=new MainMenuConstructor_Controller();this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=(options.models&&options.models.MainMenuConstructorDialog_Model)?options.models.MainMenuConstructorDialog_Model:new MainMenuConstructorDialog_Model();this.setDataBindings([new DataBinding({"control":this.getElement("id")}),new DataBinding({"control":this.getElement("content")}),new DataBinding({"control":this.getElement("role"),"fieldId":"role_id"}),new DataBinding({"control":this.getElement("user"),"keyIds":["user_id"],"fieldId":"user_descr"})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("content"),"fieldId":"content"}),new CommandBinding({"control":this.getElement("role"),"fieldId":"role_id"}),new CommandBinding({"control":this.getElement("user"),"fieldId":"user_id"})]);}
extend(MainMenuConstructor_View,ViewObjectAjx); 
function LoginList_View(id,options){options=options||{};LoginList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.LoginList)?options.models.LoginList_Model:new LoginList_Model();var contr=new Login_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":null,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[!options.detail?new GridCellHead(id+":grid:head:users_ref",{"value":"Пользователь","columns":[new GridColumnRef({"field":model.getField("users_ref"),"form":User_Form,"ctrlClass":UserEditRef,"searchOptions":{"field":new FieldInt("user_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}):null,new GridCellHead(id+":grid:head:date_time_in",{"value":"Дата входа","columns":[new GridColumnDate({"field":model.getField("date_time_in"),"dateFormat":"d/m/y H:i"})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:date_time_out",{"value":"Дата выхода","columns":[new GridColumnDate({"field":model.getField("date_time_out"),"dateFormat":"d/m/y H:i"})],"sortable":true}),new GridCellHead(id+":grid:head:session_set_time",{"value":"Последняя активность","columns":[new GridColumnDate({"field":model.getField("session_set_time"),"dateFormat":"d/m/y H:i"})],"sortable":true}),new GridCellHead(id+":grid:head:ip",{"value":"IP","columns":[new GridColumn({"field":model.getField("ip")})]}),new GridCellHead(id+":grid:head:user_agent",{"value":"Устройство","columns":[new GridColumn({"field":model.getField("user_agent")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":!options.detail?constants.doc_per_page_count.getValue():this.REC_COUNT_IN_DLG_MODE}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(LoginList_View,ViewAjxList);LoginList_View.prototype.REC_COUNT_IN_DLG_MODE=10; 
function LoginDeviceList_View(id,options){options=options||{};this.m_onBanSession=options.onBanSession;LoginDeviceList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.LoginDeviceList)?options.models.LoginDeviceList_Model:new LoginDeviceList_Model();var contr=new LoginDevice_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var self=this;var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["user_id","user_agent"],"controller":contr,"editInline":null,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[!options.detail?new GridCellHead(id+":grid:head:user_descr",{"value":"Пользователь","columns":[new GridColumn({"field":model.getField("user_descr")})],"sortable":true}):null,new GridCellHead(id+":grid:head:date_time_in",{"value":"Последняя дата входа","columns":[new GridColumnDate({"field":model.getField("date_time_in"),"dateFormat":"d/m/y H:i"})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:user_agent",{"value":"Устройство","columns":[new GridColumn({"field":model.getField("user_agent")})]}),new GridCellHead(id+":grid:head:banned",{"value":"Доступ закрыт","title":"Запрет входа с устройства","columns":[new GridColumn({"field":model.getField("banned"),"cellOptions":function(column,row){var res={};var m=self.getElement("grid").getModel();var ctrl=new EditCheckBox(null,{"value":m.getFieldValue("banned"),"events":{"change":(function(banHash,userId){return function(e){self.switchBan(banHash,userId,this);}})(m.getFieldValue("ban_hash"),m.getFieldValue("user_id"))}});res.elements=[ctrl];return res;}})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(LoginDeviceList_View,ViewAjxList);LoginDeviceList_View.prototype.switchBan=function(banHash,userId,ctrl){var banned=ctrl.getValue();var pm=(new LoginDevice_Controller()).getPublicMethod("switch_banned");pm.setFieldValue("banned",banned);pm.setFieldValue("user_id",userId);pm.setFieldValue("hash",banHash);ctrl.setEnabled(false);var self=this;pm.run({"all":function(){ctrl.setEnabled(true);},"ok":function(resp){var msg;if(banned){msg="Закрыт доступ для пользователя с устройства";}
else{msg="Отменен запрет доступа для пользователя с устройства";}
window.showTempNote(msg,null,5000);if(banned&&self.m_onBanSession){self.m_onBanSession();}}})} 
function UserList_View(id,options){UserList_View.superclass.constructor.call(this,id,options);var model=options.models.UserList_Model;var contr=new User_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);let filters={"deleted":{"binding":new CommandBinding({"control":new EditSwitcher(id+":filter-ctrl-banned",{"labelCaption":"Не показывать удаленные:","contClassName":"form-group-filter","checked":false}),"field":new FieldBool("banned")}),"sign":"ne","falseValueNoFilter":true}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":User_Form,"onEventSetRowOptions":function(rowOpts){if(this.getModel().getFieldValue("banned")){rowOpts.attrs=rowOpts.attrs||{};rowOpts.attrs["class"]=rowOpts.attrs["class"]||"";rowOpts.attrs["class"]+=rowOpts.attrs["class"]==""?"":" ";rowOpts.attrs["class"]+="deleted_row";rowOpts.attrs.title="Элемент удален";}},"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":options.variantStorage,"addCustomCommandsAfter":function(commands){commands.push(new SendNotificationCmd(id+":grid:cmd:sendNotif",{"showCmdControl":true,"entityType":"users","getEntityId":function(){return model.getFieldValue("id");}}));}}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"ФИО","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),,new GridCellHead(id+":grid:head:contact_ids",{"value":"Контакты","columns":[new GridColumn({"field":model.getField("contact_ids"),"formatFunction":function(f,cell){window.getApp().formatContactList(f,cell);return"";},"ctrlClass":ContactEdit,"searchOptions":{"searchType":"on_match","typeChange":false,"condSign":"any"}})]}),new GridCellHead(id+":grid:head:role_id",{"value":"Роль","columns":[new EnumGridColumn_role_types({"field":model.getField("role_id"),"ctrlClass":Enum_role_types,"searchOptions":{"searchType":"on_match","typeChange":false}})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(UserList_View,ViewAjxList); 
function UserDialog_View(id,options){options=options||{};options.controller=new User_Controller();options.model=options.models.UserDialog_Model;var self=this;var role=window.getApp().getServVar("role_id");var adm=(role=="admin"||role=="owner");options.templateOptions=options.templateOptions||{};options.templateOptions.adm=adm;options.addElement=function(){this.addElement(new UserNameEdit(id+":name"));this.addElement(new Enum_role_types(id+":role",{"labelCaption":"Роль:","required":true}));this.addElement(new EditSwitcher(id+":banned",{"labelCaption":"Доступ запрещен:",}));this.addElement(new ProductionSiteEdit(id+":production_sites_ref",{}));this.addElement(new UserMacAddressList_View(id+":mac_list"));this.addElement(new LoginList_View(id+":login_list",{"detail":true}));this.addElement(new LoginDeviceList_View(id+":login_device_list",{"detail":true,"onBanSession":function(){self.getElement("login_list").getElement("grid").onRefresh();}}));if(adm){this.addElement(new ButtonCmd(id+":cmdResetPwd",{"onClick":function(){self.resetPwd();}}));}
this.addElement(new EntityContactList_View(id+":contacts_list",{"detail":true}));}
UserDialog_View.superclass.constructor.call(this,id,options);var r_bd=[new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("role"),"field":this.m_model.getField("role_id")}),new DataBinding({"control":this.getElement("banned")}),new DataBinding({"control":this.getElement("production_sites_ref")})];this.setDataBindings(r_bd);this.setWriteBindings([new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("role"),"fieldId":"role_id"}),new CommandBinding({"control":this.getElement("banned")}),new CommandBinding({"control":this.getElement("production_sites_ref"),"fieldId":"production_site_id"})]);this.addDetailDataSet({"control":this.getElement("mac_list").getElement("grid"),"controlFieldId":"user_id","field":this.m_model.getField("id")});this.addDetailDataSet({"control":this.getElement("login_list").getElement("grid"),"controlFieldId":"user_id","field":this.m_model.getField("id")});this.addDetailDataSet({"control":this.getElement("login_device_list").getElement("grid"),"controlFieldId":"user_id","field":this.m_model.getField("id")});this.addDetailDataSet({"control":this.getElement("contacts_list").getElement("grid"),"controlFieldId":["entity_type","entity_id"],"value":["users",function(){return self.m_model.getFieldValue("id");}]});}
extend(UserDialog_View,ViewObjectAjx);UserDialog_View.prototype.hideUser=function(){var pm=this.getController().getPublicMethod("hide");pm.setFieldValue("id",this.getElement("id").getValue());var self=this;pm.run({"ok":function(resp){self.close({"updated":true});}});}
UserDialog_View.prototype.resetPwd=function(){var pm=this.getController().getPublicMethod("reset_pwd");pm.setFieldValue("user_id",this.getElement("id").getValue());var self=this;pm.run({"ok":function(resp){window.showNote("Пароль сброшен!");self.close({"updated":true});}});} 
function UserProfile_View(id,options){options=options||{};options.cmdOkAsync=false;options.cmdOk=false;options.cmdCancel=false;UserProfile_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new HiddenKey(id+":id"));this.addElement(new UserNameEdit(id+":name",{"focus":true,"events":{"keyup":function(){self.getControlSave().setEnabled(true);self.getElement("name").checkName();}}}));this.addElement(new UserPwdEdit(id+":pwd",{"labelCaption":"Пароль:","view":this,"events":{"keyup":function(){self.getControlSave().setEnabled(true);}}}));this.addElement(new UserPwdEdit(id+":pwd_confirm",{"required":false,"labelCaption":"Подтверждение пароля:","view":this}));var contr=new User_Controller();this.setReadPublicMethod(contr.getPublicMethod("get_profile"));this.m_model=options.models.UserProfile_Model;this.setDataBindings([new DataBinding({"control":this.getElement("id"),"model":this.m_model}),new DataBinding({"control":this.getElement("name"),"model":this.m_model}),]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("pwd")}),]);this.getControlSave().setEnabled(false);}
extend(UserProfile_View,ViewObjectAjx); 
function MailForSendingList_View(id,options){options=options||{};MailForSendingList_View.superclass.constructor.call(this,id,options);var model=options.models.MailForSendingList_Model;var contr=new MailForSending_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"email_type":{"binding":new CommandBinding({"control":new Enum_email_types(id+":filter-ctrl-email_type",{"contClassName":"form-group-filter","labelCaption":"Статус"}),"field":new FieldString("email_type")}),"sign":"e"}};this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":MailForSending_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdCopy":false,"cmdDelete":false,"cmdEdit":true,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"columns":[new GridColumnDate({"dateFormat":"d/m/Y H:i","field":model.getField("date_time"),"ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:subject",{"columns":[new GridColumn({"field":model.getField("subject")})],"sortable":true}),new GridCellHead(id+":grid:head:from_addr",{"columns":[new GridColumn({"field":model.getField("from_addr")})],"sortable":true}),new GridCellHead(id+":grid:head:from_name",{"columns":[new GridColumn({"field":model.getField("from_name")})],"sortable":true}),new GridCellHead(id+":grid:head:to_addr",{"columns":[new GridColumn({"field":model.getField("to_addr")})],"sortable":true}),new GridCellHead(id+":grid:head:to_name",{"columns":[new GridColumn({"field":model.getField("to_name")})],"sortable":true}),new GridCellHead(id+":grid:head:sent_date_time",{"columns":[new GridColumnDate({"dateFormat":"d/m/Y H:i","field":model.getField("sent_date_time"),"ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("sent_date_time"),"searchType":"on_beg"}})],"sortable":true}),new GridCellHead(id+":grid:head:email_type",{"columns":[new EnumGridColumn_email_types({"field":model.getField("email_type")})],"sortable":true}),new GridCellHead(id+":grid:head:error_str",{"columns":[new GridColumn({"field":model.getField("error_str")})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(MailForSendingList_View,ViewAjx); 
function MailForSending_View(id,options){options=options||{};options.enabled=false;options.controller=new MailForSending_Controller();options.model=options.models.MailForSending_Model;MailForSending_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new EditString(id+":from_addr",{"labelCaption":"Адрес отправителя:"}));this.addElement(new EditDateTime(id+":date_time",{"labelCaption":"Дата создания:"}));this.addElement(new EditString(id+":from_name",{"labelCaption":"Имя отправителя:"}));this.addElement(new EditString(id+":to_addr",{"labelCaption":"Адрес получателя:"}));this.addElement(new EditString(id+":to_name",{"labelCaption":"Имя получателя:"}));this.addElement(new EditString(id+":reply_addr",{"labelCaption":"Адрес для ответа:"}));this.addElement(new EditString(id+":reply_name",{"labelCaption":"Имя для ответа:"}));this.addElement(new EditString(id+":subject",{"labelCaption":"Тема:"}));this.addElement(new EditText(id+":body",{"labelCaption":"Тело:"}));this.addElement(new EditCheckBox(id+":sent",{"labelCaption":"Отправлено:"}));this.addElement(new EditDateTime(id+":sent_date_time",{"labelCaption":"Дата отправки:"}));this.setDataBindings([new DataBinding({"control":this.getElement("from_addr")}),new DataBinding({"control":this.getElement("date_time")}),new DataBinding({"control":this.getElement("from_name")}),new DataBinding({"control":this.getElement("to_addr")}),new DataBinding({"control":this.getElement("to_name")}),new DataBinding({"control":this.getElement("rely_addr")}),new DataBinding({"control":this.getElement("rely_name")}),new DataBinding({"control":this.getElement("subject")}),new DataBinding({"control":this.getElement("body")}),new DataBinding({"control":this.getElement("sent")}),new DataBinding({"control":this.getElement("sent_date_time")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("from_addr")}),new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("from_name")}),new CommandBinding({"control":this.getElement("to_addr")}),new CommandBinding({"control":this.getElement("to_name")}),new CommandBinding({"control":this.getElement("rely_addr")}),new CommandBinding({"control":this.getElement("rely_name")}),new CommandBinding({"control":this.getElement("subject")}),new CommandBinding({"control":this.getElement("body")}),new CommandBinding({"control":this.getElement("sent")}),new CommandBinding({"control":this.getElement("sent_date_time")})]);}
extend(MailForSending_View,ViewObjectAjx); 
function UserMacAddressList_View(id,options){options=options||{};UserMacAddressList_View.superclass.constructor.call(this,id,options);var en=(options.models&&options.models.UserMacAddressList_Model);var mac_model=(en)?options.models.UserMacAddressList_Model:new UserMacAddressList_Model();var mac_contr=new UserMacAddress_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":mac_model,"controller":mac_contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:mac_address",{"value":"MAC адрес","columns":[new GridColumn({"field":mac_model.getField("mac_address"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":"17","placeholder":"A0-B1-C2-D4-E5-F6","regExpression":/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/,"formatterOptions":{"delimiter":"-","blocks":[2,2,2,2,2,2],"uppercase":true}}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(UserMacAddressList_View,ViewAjx); 
function EmployeeList_View(id,options){EmployeeList_View.superclass.constructor.call(this,id,options);var model=options.models.EmployeeList_Model;var contr=new Employee_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);let filters={"deleted":{"binding":new CommandBinding({"control":new EditSwitcher(id+":filter-ctrl-employed",{"labelCaption":"Не показывать удаленные:","contClassName":"form-group-filter","checked":false}),"field":new FieldBool("employed")}),"sign":"ne","falseValueNoFilter":true}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"onEventSetRowOptions":function(rowOpts){if(this.getModel().getFieldValue("employed")){rowOpts.attrs=rowOpts.attrs||{};rowOpts.attrs["class"]=rowOpts.attrs["class"]||"";rowOpts.attrs["class"]+=rowOpts.attrs["class"]==""?"":" ";rowOpts.attrs["class"]+="deleted_row";rowOpts.attrs.title="Элемент удален";}},"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":options.variantStorage,"addCustomCommandsAfter":function(commands){commands.push(new SendNotificationCmd(id+":grid:cmd:sendNotif",{"showCmdControl":true,"getNotifRef":function(model){var users_ref=model.getFieldValue("users_ref");if(users_ref.isNull()){throw new Error("Не задан пользователь!");}
return users_ref;}}));}}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"ФИО","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:employed",{"value":"Работает","columns":[new GridColumnBool({"field":model.getField("employed"),"showFalse":false})]}),new GridCellHead(id+":grid:head:users_ref",{"value":"Пользователь","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"user_id"})]}),new GridCellHead(id+":grid:head:post",{"value":"Должность","columns":[new GridColumn({"field":model.getField("post")})]}),new GridCellHead(id+":grid:head:inn",{"value":"ИНН","columns":[new GridColumn({"field":model.getField("inn")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(EmployeeList_View,ViewAjx); 
function ClientComeFromList_View(id,options){ClientComeFromList_View.superclass.constructor.call(this,id,options);var model=options.models.ClientComeFrom_Model;var contr=new ClientComeFrom_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ClientComeFromList_View,ViewAjx); 
function ClientTypeList_View(id,options){ClientTypeList_View.superclass.constructor.call(this,id,options);var model=options.models.ClientType_Model;var contr=new ClientType_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ClientTypeList_View,ViewAjx); 
function ShipmentTimeNormList_View(id,options){ShipmentTimeNormList_View.superclass.constructor.call(this,id,options);var model=options.models.ShipmentTimeNorm_Model;var contr=new ShipmentTimeNorm_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:id",{"value":"Объем","columns":[new GridColumn({"field":model.getField("id")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:norm_min",{"value":"Норма (минуты)","columns":[new GridColumn({"field":model.getField("norm_min")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ShipmentTimeNormList_View,ViewAjx); 
function DriverList_View(id,options){DriverList_View.superclass.constructor.call(this,id,options);var model=options.models.DriverList_Model;var contr=new Driver_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);let filters={"deleted":{"binding":new CommandBinding({"control":new EditSwitcher(id+":filter-ctrl-employed",{"labelCaption":"Сотрудник:","contClassName":"form-group-filter","checked":false}),"field":new FieldBool("employed")}),"sign":"e","falseValueNoFilter":true}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":DriverDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":options.variantStorage,"addCustomCommandsAfter":function(commands){commands.push(new SendNotificationCmd(id+":grid:cmd:sendNotif",{"showCmdControl":true,"entityType":"drivers","getEntityId":function(){return model.getFieldValue("id");}}));}}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"ФИО","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:contact_ids",{"value":"Контакты","columns":[new GridColumn({"field":model.getField("contact_ids"),"formatFunction":function(f,cell){window.getApp().formatContactList(f,cell);return"";},"ctrlClass":ContactEdit,"searchOptions":{"searchType":"on_match","typeChange":false,"condSign":"any"}})]}),new GridCellHead(id+":grid:head:driver_licence",{"value":"ВУ","columns":[new GridColumn({"field":model.getField("driver_licence")})]}),new GridCellHead(id+":grid:head:driver_licence_class",{"value":"Класс ВУ","columns":[new GridColumn({"field":model.getField("driver_licence_class"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":10}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(DriverList_View,ViewAjx); 
function SupplierDialog_View(id,options){options=options||{};options.controller=new Supplier_Controller();options.model=options.models.Supplier_Model;options.addElement=function(){this.addElement(new EditString(id+":name",{"labelCaption":"Наименование:","required":true,"maxLength":100}));this.addElement(new ClientNameFullEdit(id+":name_full",{}));this.addElement(new LangEditRef(id+":lang"));this.addElement(new EditCheckBox(id+":order_notification",{"labelCaption":"Отправлять уведомление о заказе:"}));this.addElement(new EntityContactList_View(id+":contacts_list",{"detail":true}));}
SupplierDialog_View.superclass.constructor.call(this,id,options);var r_bd=[new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("name_full")}),new DataBinding({"control":this.getElement("lang"),"fieldId":"lang_id"}),new DataBinding({"control":this.getElement("order_notification")})];this.setDataBindings(r_bd);this.setWriteBindings([new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("name_full")}),new CommandBinding({"control":this.getElement("lang"),"fieldId":"lang_id"}),new CommandBinding({"control":this.getElement("order_notification")})]);var self=this;this.addDetailDataSet({"control":this.getElement("contacts_list").getElement("grid"),"controlFieldId":["entity_type","entity_id"],"value":["suppliers",function(){return self.m_model.getFieldValue("id");}]});}
extend(SupplierDialog_View,ViewObjectAjx); 
function SupplierList_View(id,options){SupplierList_View.superclass.constructor.call(this,id,options);var model=options.models.SupplierList_Model;var contr=new Supplier_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var self=this;this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":SupplierDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"addCustomCommandsAfter":function(commands){commands.push(new SendNotificationCmd(id+":grid:cmd:sendNotif",{"showCmdControl":true,"entityType":"suppliers","getEntityId":function(){return model.getFieldValue("id");}}));}}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:contact_ids",{"value":"Контакты","columns":[new GridColumn({"field":model.getField("contact_ids"),"formatFunction":function(f,cell){window.getApp().formatContactList(f,cell);return"";},"ctrlClass":ContactEdit,"searchOptions":{"searchType":"on_match","typeChange":false,"condSign":"any"}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(SupplierList_View,ViewAjxList); 
function VehicleDialog_View(id,options){options=options||{};options.controller=new Vehicle_Controller();options.model=options.models.VehicleDialog_Model;VehicleDialog_View.superclass.constructor.call(this,id,options);let self=this;this.addElement(new EditString(id+":plate",{"labelCaption":"Рег.номер:","maxLength":"6","required":true}));this.addElement(new EditString(id+":plate_region",{"labelCaption":"Регион номера:","maxLength":"3"}));this.addElement(new EditFloat(id+":load_capacity",{"precision":"2","labelCaption":"Грузоподъемность:"}));this.addElement(new DriverEditRef(id+":driver"));this.addElement(new VehicleOwnerEdit(id+":official_owner"),{labelCaption:"Официальный владелец:",title:"Официальный владелец для транспортной накладной"});this.addElement(new MakeEdit(id+":make"));this.addElement(new FeatureEdit(id+":feature"));this.addElement(new GPSTrackerRef(id+":tracker_id"));this.addElement(new EditString(id+":sim_id",{"maxLength":"20","labelCaption":"Идентификатор СИМ карты:","enabled":false}));this.addElement(new EditPhone(id+":sim_number",{"labelCaption":"Номер телефона СИМ карты:","enabled":false}));this.addElement(new EditDateTime(id+":tracker_last_dt",{"labelCaption":"Последние данные трэкера:","enabled":false}));this.addElement(new EditNum(id+":tracker_sat_num",{"labelCaption":"Количество спутников:","enabled":false}));this.addElement(new OwnerListGrid(id+":owners",{}));this.addElement(new InsuranceListGrid(id+":insurance_osago",{}));this.addElement(new InsuranceListGrid(id+":insurance_kasko",{}));this.addElement(new LeasorEdit(id+":leasor",{}));this.addElement(new EditMoney(id+":leasing_total",{"labelCaption":"Сумма по договору:"}));this.addElement(new EditDate(id+":leasing_contract_date",{"labelCaption":"Дата договора:",}));this.addElement(new EditString(id+":leasing_contract_num",{"maxLength":"100","labelCaption":"Номер договора:",}));this.addElement(new Client1cEdit(id+":insurance_issuer",{}));this.addElement(new BuhRBP1cEdit(id+":insurance_rbp",{}));this.addElement(new ButtonCmd(id+":cmdAddOnRBPKASKO",{"caption":"Добавить КАСКО","onClick":function(){self.cmdAddOnRBPKASKO();}}));this.addElement(new ButtonCmd(id+":cmdAddOnRBPOSAGO",{"caption":"Добавить ОСАГО","onClick":function(){self.cmdAddOnRBPOSAGO();}}));this.addElement(new EditString(id+":leasor_pp",{"maxLength":"20","labelCaption":"Номер п/п:","placeholder":"Номер платежного поручения","title":"Номер платежного поручения лизингодателя для заполнения"}));this.addElement(new ButtonCmd(id+":cmdFillOnPP",{"caption":"Заполнить по п/п","onClick":function(){self.cmdFillOnPP();}}));this.addElement(new EditInt(id+":ord_num",{"labelCaption":"Порядковый номер:",}));this.addElement(new EditInt(id+":weight_t",{"labelCaption":"Масса, тонн:",}));this.addElement(new EditString(id+":vin",{"labelCaption":"VIN:","maxLength":17}));this.addElement(new VehicleMileageList_View(id+":mileage_list",{"detail":true}));var r_bd=[new DataBinding({"control":this.getElement("plate")}),new DataBinding({"control":this.getElement("plate_region")}),new DataBinding({"control":this.getElement("load_capacity")}),new DataBinding({"control":this.getElement("driver"),"fieldId":"drivers_ref"}),new DataBinding({"control":this.getElement("official_owner"),"fieldId":"official_vehicle_owners_ref"}),new DataBinding({"control":this.getElement("make")}),new DataBinding({"control":this.getElement("owners"),"fieldId":"vehicle_owners"}),new DataBinding({"control":this.getElement("insurance_osago"),"fieldId":"insurance_osago"}),new DataBinding({"control":this.getElement("insurance_kasko"),"fieldId":"insurance_kasko"}),new DataBinding({"control":this.getElement("leasor"),"fieldId":"leasor"}),new DataBinding({"control":this.getElement("leasing_total"),"fieldId":"leasing_total"}),new DataBinding({"control":this.getElement("leasing_contract_num"),"fieldId":"leasing_contract_num"}),new DataBinding({"control":this.getElement("leasing_contract_date"),"fieldId":"leasing_contract_date"}),new DataBinding({"control":this.getElement("feature")}),new DataBinding({"control":this.getElement("tracker_id")}),new DataBinding({"control":this.getElement("sim_id")}),new DataBinding({"control":this.getElement("sim_number")}),new DataBinding({"control":this.getElement("tracker_last_dt")}),new DataBinding({"control":this.getElement("tracker_sat_num")}),new DataBinding({"control":this.getElement("ord_num")}),new DataBinding({"control":this.getElement("weight_t")}),new DataBinding({"control":this.getElement("vin")})];this.setDataBindings(r_bd);this.setWriteBindings([new CommandBinding({"control":this.getElement("plate")}),new CommandBinding({"control":this.getElement("plate_region")}),new CommandBinding({"control":this.getElement("load_capacity")}),new CommandBinding({"control":this.getElement("driver"),"fieldId":"driver_id"}),new CommandBinding({"control":this.getElement("official_owner"),"fieldId":"official_vehicle_owner_id"}),new CommandBinding({"control":this.getElement("make")}),new CommandBinding({"control":this.getElement("owners"),"fieldId":"vehicle_owners"}),new CommandBinding({"control":this.getElement("insurance_osago"),"fieldId":"insurance_osago"}),new CommandBinding({"control":this.getElement("insurance_kasko"),"fieldId":"insurance_kasko"}),new CommandBinding({"control":this.getElement("leasor"),"fieldId":"leasor"}),new CommandBinding({"control":this.getElement("leasing_total"),"fieldId":"leasing_total"}),new CommandBinding({"control":this.getElement("leasing_contract_num"),"fieldId":"leasing_contract_num"}),new CommandBinding({"control":this.getElement("leasing_contract_date"),"fieldId":"leasing_contract_date"}),new CommandBinding({"control":this.getElement("feature")}),new CommandBinding({"control":this.getElement("vin")}),new CommandBinding({"control":this.getElement("tracker_id")}),new CommandBinding({"control":this.getElement("ord_num")}),new CommandBinding({"control":this.getElement("weight_t")})]);this.addDetailDataSet({"control":this.getElement("mileage_list").getElement("grid"),"controlFieldId":["vehicle_id"],"value":[function(){return self.m_model.getFieldValue("id");}]});}
extend(VehicleDialog_View,ViewObjectAjx);VehicleDialog_View.prototype.onGetData=function(resp,cmd){VehicleDialog_View.superclass.onGetData.call(this,resp,cmd);if(window.getApp().getServVar("role_id")=="vehicle_owner"){this.setEnabled(false);this.getControlOK().setEnabled(true);this.getControlSave().setEnabled(true);this.getControlCancel().setEnabled(true);}}
VehicleDialog_View.prototype.cmdFillOnPP=function(){const ppNum=this.getElement("leasor_pp").getValue();if(!ppNum||!ppNum.length){throw new Error("Заполните номер п/п");}
window.setGlobalWait(true);const self=this;const pm=(new Client1c_Controller()).getPublicMethod("get_leasor_on_pp");pm.setFieldValue("pp_num",ppNum);pm.run({"ok":function(resp){console.log(resp)
const model=resp.getModel("Client1c_Model");if(!model||!model.getNextRow()){window.showTempWarn("П/п не найдено",null,5000);return;}
console.log(model)
self.getElement("leasor").setValue(model.getFieldValue("client_name"));self.getElement("leasing_contract_num").setValue(model.getFieldValue("contract_num"));self.getElement("leasing_contract_date").setValue(date1c_to_date(model.getFieldValue("contract_date")));},"all":function(){window.setGlobalWait(false);}});}
function date1c_to_date(date1cStr){let dParts=date1cStr.split(" ")[0].split(".");if(dParts.length<3){throw new Error("dParts.length should be 3");}
const d=DateHelper.strtotime(dParts[2]+"-"+dParts[1]+"-"+dParts[0]);return d;}
VehicleDialog_View.prototype.getRBP=function(){const rbpCtrl=this.getElement("insurance_rbp");const rbp=rbpCtrl.getValue();if(!rbp||rbp.isNull()){throw new Error("Не задана статья");}
const issuer=this.getElement("insurance_issuer").getValue();if(!issuer||issuer.isNull()){throw new Error("Не задан страхователь");}
return{"rbp":rbp.getKey("name"),"issuer":issuer.getDescr(),"date_from":date1c_to_date(rbpCtrl.getAttr("date_from")),"date_to":date1c_to_date(rbpCtrl.getAttr("date_to")),"total":rbpCtrl.getAttr("total")};}
VehicleDialog_View.prototype.addInsurance=function(rbpData,gridElemId){const grid=this.getElement(gridElemId);const pm=grid.getInsertPublicMethod();pm.setFieldValue("issuer",rbpData.issuer);pm.setFieldValue("total",rbpData.total);pm.setFieldValue("dt_from",rbpData.date_from);pm.setFieldValue("dt_to",rbpData.date_to);pm.run({"ok":(function(grid){return function(resp){grid.onRefresh();}})(grid)});}
VehicleDialog_View.prototype.cmdAddOnRBPKASKO=function(){const rbpData=this.getRBP();console.log(rbpData);this.addInsurance(rbpData,"insurance_kasko");}
VehicleDialog_View.prototype.cmdAddOnRBPOSAGO=function(){const rbpData=this.getRBP();console.log(rbpData);this.addInsurance(rbpData,"insurance_osago");} 
function VehicleList_View(id,options){VehicleList_View.superclass.constructor.call(this,id,options);var model=options.models.VehicleDialog_Model;var contr=new Vehicle_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var is_v_owner=(window.getApp().getServVar("role_id")=="vehicle_owner");var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":VehicleDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdDelete":!is_v_owner,"cmdInsert":!is_v_owner,"cmdCopy":!is_v_owner,"cmdEdit":!is_v_owner}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:plate",{"value":"Рег.номер","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("plate")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:make",{"value":"Марка","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("make")})],"sortable":true}),new GridCellHead(id+":grid:head:load_capacity",{"value":"Грузоподъемность","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("load_capacity")})],"sortable":true}),is_v_owner?null:new GridCellHead(id+":grid:head:vehicle_owner",{"value":"Владелец","columns":[new GridColumnRef({"field":model.getField("vehicle_owners_ref"),"form":null,"ctrlClass":VehicleOwnerEdit,"searchOptions":{"field":new FieldInt("vehicle_owner_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),is_v_owner?null:new GridCellHead(id+":grid:head:feature",{"value":"Свойство","columns":[new GridColumn({"field":model.getField("feature")})],"sortable":true}),is_v_owner?null:new GridCellHead(id+":grid:head:tracker_id",{"value":"Трэкер","columns":[new GridColumn({"field":model.getField("tracker_id")})]}),is_v_owner?null:new GridCellHead(id+":grid:head:sim_number",{"value":"Тел.номер сим карты","columns":[new GridColumn({"field":model.getField("sim_number")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(VehicleList_View,ViewAjxList); 
function VehicleScheduleDialog_View(id,options){options=options||{};options.controller=new VehicleSchedule_Controller();options.model=options.models.VehicleScheduleList_Model;var dt=(options.schedule_date)?options.schedule_date:DateHelper.time();VehicleScheduleDialog_View.superclass.constructor.call(this,id,options);this.addElement(new EditDate(id+":schedule_date",{"labelCaption":"Дата:","value":dt,"required":true}));this.addElement(new VehicleEdit(id+":vehicle",{"required":true}));this.addElement(new DriverEditRef(id+":driver",{"required":true}));this.addElement(new ProductionBaseEdit(id+":production_base",{"required":true}));var r_bd=[new DataBinding({"control":this.getElement("vehicle"),"fieldId":"vehicles_ref"}),new DataBinding({"control":this.getElement("driver"),"fieldId":"drivers_ref"}),new DataBinding({"control":this.getElement("production_base"),"fieldId":"production_bases_ref"}),new DataBinding({"control":this.getElement("schedule_date")})];this.setDataBindings(r_bd);this.setWriteBindings([new CommandBinding({"control":this.getElement("vehicle"),"fieldId":"vehicle_id"}),new CommandBinding({"control":this.getElement("driver"),"fieldId":"driver_id"}),new CommandBinding({"control":this.getElement("production_base"),"fieldId":"production_base_id"}),new CommandBinding({"control":this.getElement("schedule_date")})]);}
extend(VehicleScheduleDialog_View,ViewObjectAjx); 
function VehicleScheduleList_View(id,options){var model=options.models.VehicleScheduleList_Model;var contr=new VehicleSchedule_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var self=this;options.addElement=function(){var per_select=new EditPeriodShift(id+":schedule_date",{"dateFormat":"Y-m-d","filters":[{"field":"schedule_date","sign":"e","val":""}]});this.addElement(per_select);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var grid=new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":VehicleScheduleDialog_Form,"insertViewOptions":function(){return{"schedule_date":self.getElement("schedule_date").getDateFrom()};},"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":false,"cmdSearch":false,"filters":null,"variantStorage":null,"addCustomCommandsAfter":function(commands){commands.push(new VehicleScheduleGridCmdSetFree(id+":grid:cmd:setFree"));commands.push(new VehicleScheduleGridCmdSetOut(id+":grid:cmd:setOut"));}}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:schedule_date",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("schedule_date")})]}),new GridCellHead(id+":grid:head:state_date_time",{"value":"Время","columns":[new GridColumnDate({"field":model.getField("state_date_time"),"dateFormat":"H:i"})]}),new GridCellHead(id+":grid:head:production_bases_ref",{"value":"База","columns":[new GridColumnRef({"field":model.getField("production_bases_ref"),"ctrlClass":ProductionBaseEdit,"searchOptions":{"field":new FieldInt("production_base_id"),"searchType":"on_match"}})]}),new GridCellHead(id+":grid:head:vehicles_ref",{"value":"ТС","columns":[new GridColumnRef({"field":model.getField("vehicles_ref"),"ctrlClass":VehicleEdit,"searchOptions":{"field":new FieldInt("vehicle_id"),"searchType":"on_match"}})]}),new GridCellHead(id+":grid:head:drivers_ref",{"value":"Водитель","columns":[new GridColumn({"field":model.getField("drivers_ref"),"ctrlClass":DriverEditRef,"searchOptions":{"field":new FieldInt("driver_id"),"searchType":"on_match"},"formatFunction":function(fields,cell){return window.getApp().formatCell(fields.drivers_ref,cell,self.COL_DRIVER_LEN);}})]}),new GridCellHead(id+":grid:head:vehicle_owners_ref",{"value":"Владелец ТС","columns":[new GridColumnRef({"field":model.getField("vehicle_owners_ref")})]}),new GridCellHead(id+":grid:head:load_capacity",{"value":"Груз.","columns":[new GridColumn({"field":model.getField("load_capacity")})]}),new GridCellHead(id+":grid:head:state",{"value":"Сост.","columns":[new EnumGridColumn_vehicle_states({"field":model.getField("state")})]}),new GridCellHead(id+":grid:head:out_comment",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("out_comment")})]}),new GridCellHead(id+":grid:head:phone_cel",{"value":"Телефон","columns":[new GridColumnPhone({"field":model.getField("phone_cel"),"telExt":window.getApp().getServVar("tel_ext")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});this.addElement(grid);per_select.setGrid(grid);}
VehicleScheduleList_View.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleList_View,ViewAjxList);VehicleScheduleList_View.prototype.COL_DRIVER_LEN=8; 
function QuarryList_View(id,options){QuarryList_View.superclass.constructor.call(this,id,options);var model=options.models.Quarry_Model;var contr=new Quarry_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(QuarryList_View,ViewAjx); 
function LangList_View(id,options){LangList_View.superclass.constructor.call(this,id,options);var model=options.models.Lang_Model;var contr=new Lang_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(LangList_View,ViewAjx); 
function OrderList_View(id,options){OrderList_View.superclass.constructor.call(this,id,options);var model=options.orderModel||options.models.OrderList_Model;var contr=options.controller||new Order_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"unload_type":{"binding":new CommandBinding({"control":new Enum_unload_types(id+":filter-ctrl-unload_type",{"contClassName":"form-group-filter","labelCaption":"Подача:"}),"field":new FieldString("unload_type")}),"sign":"e"},"client":{"binding":new CommandBinding({"control":new ClientEdit(id+":filter-ctrl-client",{"contClassName":"form-group-filter","labelCaption":"Контрагент:"}),"field":new FieldInt("client_id")}),"sign":"e"},"destination":{"binding":new CommandBinding({"control":new DestinationEdit(id+":filter-ctrl-destination",{"contClassName":"form-group-filter","labelCaption":"Объект:"}),"field":new FieldInt("destination_id")}),"sign":"e"},"concrete_type":{"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"},"user":{"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group-filter","labelCaption":"Автор:"}),"field":new FieldInt("user_id")}),"sign":"e"}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var grid=new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":options.dialogForm||OrderDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage,"cmdInsert":!options.readOnly,"cmdEdit":true,"cmdDelete":!options.readOnly}),"readOnly":options.readOnly,"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:number",{"value":"Номер","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("number")})],"sortable":true}),new GridCellHead(id+":grid:head:users_ref",{"value":"Автор","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"searchOptions":{"field":new FieldInt("user_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Контрагент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"form":ClientDialog_Form,"ctrlClass":ClientEdit,"searchOptions":{"field":new FieldInt("client_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"form":Destination_Form,"ctrlClass":DestinationEdit,"searchOptions":{"field":new FieldInt("destination_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant"),"precision":1})]}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","colAttrs":{"align":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("date_time")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:unload_type",{"value":"Подача","colAttrs":{"align":"center"},"columns":[new EnumGridColumn_unload_types({"field":model.getField("unload_type"),"ctrlClass":Enum_unload_types,"searchOptions":{"field":new FieldString("unload_type"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text")})]}),new GridCellHead(id+":grid:head:phone_cel",{"value":"Телефон","columns":[new GridColumnPhone({"field":model.getField("phone_cel")})]}),new GridCellHead(id+":grid:head:descr",{"value":"Прораб","columns":[new GridColumn({"field":model.getField("descr")})],"sortable":true})]})]}),"foot":new GridFoot(id+":grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp",{"colSpan":"4","value":"Итого"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right"},"totalFieldId":"total_quant","gridColumn":new GridColumnFloat({"id":"tot_quant"})}),new GridCell(id+":grid:foot:total_sp2",{"colSpan":"6"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});this.addElement(grid);}
extend(OrderList_View,ViewAjx); 
function OrderGarbageList_View(id,options){options.orderModel=options.models.OrderGarbageList_Model;options.controller=new OrderGarbage_Controller();options.dialogForm=OrderGarbageDialog_Form;options.readOnly=true;OrderGarbageList_View.superclass.constructor.call(this,id,options);}
extend(OrderGarbageList_View,OrderList_View); 
function OrderForSelectList_View(id,options){OrderForSelectList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.OrderList_Model)?options.models.OrderList_Model:new OrderList_Model();var contr=new Order_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};var grid=new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdAllCommands":false}),"popUpMenu":null,"onSelect":options.onSelect,"filters":[{"field":"date_time","sign":"ge","val":DateHelper.format(DateHelper.getStartOfShift(options.dateTime),"Y-m-d H:i:s")},{"field":"date_time","sign":"le","val":DateHelper.format(DateHelper.getEndOfShift(options.dateTime),"Y-m-d H:i:s")}],"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("date_time"),"ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true}),new GridCellHead(id+":grid:head:number",{"value":"Номер","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("number")})],"sortable":true}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Контрагент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlClass":ClientEdit,"searchOptions":{"field":new FieldInt("client_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"ctrlClass":DestinationEdit,"searchOptions":{"field":new FieldInt("destination_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant"),"precision":1})]}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","colAttrs":{"align":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:unload_type",{"value":"Подача","colAttrs":{"align":"center"},"columns":[new EnumGridColumn_unload_types({"field":model.getField("unload_type"),"ctrlClass":Enum_unload_types,"searchOptions":{"field":new FieldString("unload_type"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text")})]}),new GridCellHead(id+":grid:head:phone_cel",{"value":"Телефон","columns":[new GridColumnPhone({"field":model.getField("phone_cel")})]}),new GridCellHead(id+":grid:head:descr",{"value":"Прораб","columns":[new GridColumn({"field":model.getField("descr")})],"sortable":true})]})]}),"pagination":null,"autoRefresh":true,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});this.addElement(grid);}
extend(OrderForSelectList_View,ViewAjx); 
function ShipmentList_View(id,options){ShipmentList_View.superclass.constructor.call(this,id,options);var self=this;var model_exists=(options.models&&options.models.ShipmentList_Model);if(!options.forSelect){this.addElement(new EditString(id+":barcode",{"labelCaption":"Штрих код бланка:","maxLength":13,"autofocus":true,"events":{"keypress":function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){self.findDoc(e.target.value);}},"input":function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){self.findDoc(e.target.value);}}}}));}
var model=model_exists?options.models.ShipmentList_Model:new ShipmentList_Model();var contr=new Shipment_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("ship_date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};filters.production_site={"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"contClassName":"form-group-filter"}),"field":new FieldInt("production_site_id")}),"sign":"e"};filters.client={"binding":new CommandBinding({"control":new ClientEdit(id+":filter-ctrl-client",{"contClassName":"form-group-filter","labelCaption":"Контрагент:"}),"field":new FieldInt("client_id")}),"sign":"e"};filters.driver={"binding":new CommandBinding({"control":new DriverEditRef(id+":filter-ctrl-driver",{"contClassName":"form-group-filter","labelCaption":"Водитель:"}),"field":new FieldInt("driver_id")}),"sign":"e"}
filters.vehicle={"binding":new CommandBinding({"control":new VehicleEdit(id+":filter-ctrl-vehicle",{"contClassName":"form-group-filter","labelCaption":"ТС:"}),"field":new FieldInt("vehicle_id")}),"sign":"e"};filters.destination={"binding":new CommandBinding({"control":new DestinationEdit(id+":filter-ctrl-destination",{"contClassName":"form-group-filter","labelCaption":"Объект:"}),"field":new FieldInt("destination_id")}),"sign":"e"};filters.concrete_type={"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"};filters.user={"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group-filter","labelCaption":"Автор:"}),"field":new FieldInt("user_id")}),"sign":"e"};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"readPublicMethod":contr.getPublicMethod("get_list"),"editInline":false,"editWinClass":ShipmentDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":!options.forSelect,"cmdDelete":false,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"filters":options.forSelect?[{"field":"ship_date_time","sign":"ge","val":DateHelper.format(DateHelper.getStartOfShift(options.date_time),"Y-m-d H:i:s")},{"field":"ship_date_time","sign":"le","val":DateHelper.format(DateHelper.getEndOfShift(options.date_time),"Y-m-d H:i:s")}]:null,"onSelect":options.onSelect,"onEventSetCellOptions":function(opts){if(opts.gridColumn.getId()=="cost"){opts.className=opts.className||"";if(this.getModel().getFieldValue("ship_cost_edit")){opts.title="Значение отредактирована вручную";opts.className+=(opts.className.length?" ":"")+"cost_edit";}}
else if(opts.gridColumn.getId()=="pump_cost"){opts.className=opts.className||"";if(this.getModel().getFieldValue("pump_cost_edit")){opts.title="Значение отредактирована вручную";opts.className+=(opts.className.length?" ":"")+"cost_edit";}}
else if(opts.gridColumn.getId()=="pump_for_client_cost"){opts.className=opts.className||"";if(this.getModel().getFieldValue("pump_for_client_cost_edit")){opts.title="Значение отредактирована вручную";opts.className+=(opts.className.length?" ":"")+"cost_edit";}}},"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:ship_date_time",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("ship_date_time"),"dateFormat":"d/m/y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("ship_date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:id",{"value":"Номер","colAttrs":{"clign":"center"},"columns":[new GridColumn({"field":model.getField("id")})],"sortable":true}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"searchOptions":{"field":new FieldInt("production_site_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Контрагент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"form":ClientDialog_Form,"ctrlClass":ClientEdit,"searchOptions":{"field":new FieldInt("client_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"form":Destination_Form,"ctrlClass":DestinationEdit,"searchOptions":{"field":(new FieldInt("destination_id")),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","colAttrs":{"clign":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumn({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:vehicles_ref",{"value":"ТС","colAttrs":{"align":"center"},"columns":[new GridColumnRef({"field":model.getField("vehicles_ref"),"ctrlClass":VehicleEdit,"searchOptions":{"field":new FieldInt("vehicle_id"),"searchType":"on_match","typeChange":false},"form":VehicleDialog_Form})],"sortable":true}),new GridCellHead(id+":grid:head:drivers_ref",{"value":"Водитель","columns":[new GridColumnRef({"field":model.getField("drivers_ref"),"ctrlClass":DriverEditRef,"searchOptions":{"field":(new FieldInt("driver_id")),"searchType":"on_match","typeChange":false}})],"sortable":true}),options.forSelect?null:new GridCellHead(id+":grid:head:vehicle_owners_ref",{"value":"Владелец ТС","columns":[new GridColumnRef({"field":model.getField("vehicle_owners_ref")})],"sortable":true}),options.forSelect?null:new GridCellHead(id+":grid:head:cost",{"value":"Доставка","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("cost"),"precision":2})]}),options.forSelect?null:new GridCellHead(id+":grid:head:demurrage",{"value":"Время простоя","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("demurrage")})]}),options.forSelect?null:new GridCellHead(id+":grid:head:demurrage_cost",{"value":"За простой","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("demurrage_cost")})]}),options.forSelect?null:new GridCellHead(id+":grid:head:pump_cost",{"value":"Стоим.насос","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("pump_cost")})]}),options.forSelect?null:new GridCellHead(id+":grid:head:pump_for_client_cost",{"value":"Стоим.насос для кл-та","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("pump_for_client_cost")})]}),options.forSelect?null:new GridCellHead(id+":grid:head:pump_vehicles_ref",{"value":"Насос","columns":[new GridColumnRef({"field":model.getField("pump_vehicles_ref"),"ctrlClass":PumpVehicleEdit,"searchOptions":{"field":new FieldInt("pump_vehicle_id"),"searchType":"on_match"}})],"sortable":true}),options.forSelect?null:new GridCellHead(id+":grid:head:pump_vehicle_owners_ref",{"value":"Насос,влад.","columns":[new GridColumnRef({"field":model.getField("pump_vehicle_owners_ref"),"ctrlClass":VehicleOwnerEdit,"searchOptions":{"field":new FieldInt("pump_vehicle_owner_id"),"searchType":"on_match"}})],"sortable":true}),options.forSelect?null:new GridCellHead(id+":grid:head:acc_comment",{"value":"Бух.ком.(насос)","columns":[new GridColumn({"field":model.getField("acc_comment")})]}),options.forSelect?null:new GridCellHead(id+":grid:head:acc_comment_shipment",{"value":"Бух.ком.(миксер)","columns":[new GridColumn({"field":model.getField("acc_comment_shipment")})]}),options.forSelect?null:new GridCellHead(id+":grid:head:client_mark",{"value":"Баллы","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("client_mark")})]}),options.forSelect?null:new GridCellHead(id+":grid:head:blanks_exist",{"value":"Бланки","colAttrs":{"align":"center"},"columns":[new GridColumnBool({"field":model.getField("blanks_exist")})],"sortable":true}),options.forSelect?null:new GridCellHead(id+":grid:head:users_ref",{"value":"Автор","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"searchOptions":{"field":new FieldInt("user_id"),"searchType":"on_match"}})],"sortable":true}),options.forSelect?null:new GridCellHead(id+":grid:head:owner_pump_agreed_date_time",{"value":"Согл.насос","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("owner_pump_agreed_date_time"),"dateFormat":"d/m/y"})]}),options.forSelect?null:new GridCellHead(id+":grid:head:owner_agreed_date_time",{"value":"Согл.миксер","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("owner_agreed_date_time"),"dateFormat":"d/m/y"})]})]})]}),"foot":options.forSelect?null:new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":"6"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_quant","gridColumn":new GridColumnFloat({"id":"tot_quant"})}),new GridCell(id+":grid:foot:total_sp2",{"colSpan":"3"}),new GridCellFoot(id+":grid:foot:tot_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_cost","gridColumn":new GridColumnFloat({"id":"tot_cost"})}),new GridCell(id+":grid:foot:total_sp4",{"colSpan":"1"}),new GridCellFoot(id+":grid:foot:tot_demurrage_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_demurrage_cost","gridColumn":new GridColumnFloat({"id":"tot_demurrage_cost"})}),new GridCellFoot(id+":grid:foot:tot_pump_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_pump_cost","gridColumn":new GridColumnFloat({"id":"tot_pump_cost"})}),new GridCellFoot(id+":grid:foot:tot_pump_for_client_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_pump_for_client_cost","gridColumn":new GridColumnFloat({"id":"tot_pump_for_client_cost"})})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":!model_exists,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ShipmentList_View,ViewAjxList);ShipmentList_View.prototype.findDoc=function(barcode){var pm=(new Shipment_Controller()).getPublicMethod("set_blanks_exist");pm.setFieldValue("barcode",barcode);var self=this;pm.run({"ok":function(resp){var ctrl=self.getElement("barcode");ctrl.reset();ctrl.focus();window.showTempNote("Документ погашен!",null,1500);}})} 
function ShipmentForVehOwnerList_View(id,options){ShipmentForVehOwnerList_View.superclass.constructor.call(this,id,options);var self=this;var model=options.models.ShipmentForVehOwnerList_Model;var contr=new Shipment_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null,"vehicle_owner_accord_from_day":null,"vehicle_owner_accord_to_day":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("ship_date_time")});var role_id=window.getApp().getServVar("role_id");var smpl_v=(role_id=="vehicle_owner"||role_id=="client")
var cur_d=(DateHelper.time()).getDate();var prev_month_acc_allowed=(cur_d>=constants.vehicle_owner_accord_from_day.getValue()&&cur_d<=constants.vehicle_owner_accord_to_day.getValue());this.m_accDescr={};var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};filters.driver={"binding":new CommandBinding({"control":new DriverEditRef(id+":filter-ctrl-driver",{"contClassName":"form-group-filter","labelCaption":"Водитель:"}),"field":new FieldInt("driver_id")}),"sign":"e"}
filters.vehicle={"binding":new CommandBinding({"control":new VehicleEdit(id+":filter-ctrl-vehicle",{"contClassName":"form-group-filter","labelCaption":"ТС:"}),"field":new FieldInt("vehicle_id")}),"sign":"e"};filters.concrete_type={"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"readPublicMethod":contr.getPublicMethod("get_list_for_veh_owner"),"editInline":false,"editWinClass":ShipmentDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage,"addCustomCommandsAfter":((window.getApp().getServVar("role_id")=="vehicle_owner")?function(commands){commands.push(new ShipmentForVehOwnerCmdSetAgreed(id+":grid:cmd:setAgreed"));}:null)}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:ship_date_time",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("ship_date_time"),"dateFormat":"d/m/y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("ship_date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),smpl_v?null:new GridCellHead(id+":grid:head:production_bases_ref",{"value":"База","columns":[new GridColumnRef({"field":model.getField("production_bases_ref"),"form":null,"ctrlClass":ProductionBaseEdit,"searchOptions":{"field":new FieldInt("production_base_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),smpl_v?null:new GridCellHead(id+":grid:head:vehicle_owners_ref",{"value":"Владелец ТС","columns":[new GridColumnRef({"field":model.getField("vehicle_owners_ref"),"form":null,"ctrlClass":VehicleOwnerEdit,"searchOptions":{"field":new FieldInt("vehicle_owner_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"form":null,"ctrlClass":smpl_v?EditString:DestinationEdit,"searchOptions":{"field":smpl_v?(new FieldString("destinations_ref->descr")):(new FieldInt("destination_id")),"searchType":smpl_v?"on_part":"on_match","typeChange":smpl_v}})],"sortable":true}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","colAttrs":{"clign":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:vehicles_ref",{"value":"ТС","colAttrs":{"align":"center"},"columns":[new GridColumnRef({"field":model.getField("vehicles_ref"),"ctrlClass":VehicleEdit,"searchOptions":{"field":new FieldInt("vehicle_id"),"searchType":"on_match","typeChange":false},"form":VehicleDialog_Form})],"sortable":true}),new GridCellHead(id+":grid:head:drivers_ref",{"value":"Водитель","columns":[new GridColumnRef({"field":model.getField("drivers_ref"),"form":Driver_Form,"ctrlClass":smpl_v?EditString:DriverEdit,"searchOptions":{"field":smpl_v?(new FieldString("drivers_ref->descr")):(new FieldInt("driver_id")),"searchType":smpl_v?"on_part":"on_match","typeChange":smpl_v}})],"sortable":true}),new GridCellHead(id+":grid:head:cost",{"value":"Доставка","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("cost"),"precision":2})]}),new GridCellHead(id+":grid:head:cost_for_driver",{"value":"Доставка для водителя","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("cost_for_driver"),"precision":2})]}),new GridCellHead(id+":grid:head:demurrage",{"value":"Время простоя","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("demurrage")})]}),new GridCellHead(id+":grid:head:demurrage_cost",{"value":"За простой","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("demurrage_cost")})]}),new GridCellHead(id+":grid:head:acc_comment_shipment",{"value":"Бух.коммент.","columns":[new GridColumn({"field":model.getField("acc_comment_shipment")})]}),new GridCellHead(id+":grid:head:owner_agreed",{"value":"Согласование","colAttrs":{"align":"center"},"columns":[new GridColumn({"id":model.getField("owner_agreed"),"cellOptions":function(column,row){return(function(column,row){var res={};var m=self.getElement("grid").getModel();if(m.getFieldValue("owner_agreed")){res.value=DateHelper.format(m.getFieldValue("owner_agreed_date_time"),"d/m/y");}
else if(!m.getFieldValue("ship_date_time")){res.value="Не отгружено";}
else{var m_dif=((DateHelper.time()).getMonth()-m.getFieldValue("ship_date_time").getMonth());if(m_dif==1&&prev_month_acc_allowed){var ctrl=new ButtonCmd(null,{"caption":"Согласовать","onClick":function(){self.setOwnerAgreed(this);}});ctrl.m_row=row;res.elements=[ctrl];}
else if(m_dif<=1){if(!self.m_accDescr["m_"+m_dif]){var ship_time=m.getFieldValue("ship_date_time");self.m_accDescr["m_"+m_dif]={"from":DateHelper.format(new Date(ship_time.getFullYear(),ship_time.getMonth()+1,constants.vehicle_owner_accord_from_day.getValue()),"d/m/y"),"to":DateHelper.format(new Date(ship_time.getFullYear(),ship_time.getMonth()+1,constants.vehicle_owner_accord_to_day.getValue()),"d/m/y")};}
res.value="Разрешено с "+self.m_accDescr["m_"+m_dif].from+" до "+self.m_accDescr["m_"+m_dif].to;}}
return res;})(column,row)}})]})]})]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":smpl_v?"3":"5"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_quant","gridColumn":new GridColumnFloat({"id":"tot_quant"})}),new GridCell(id+":grid:foot:total_sp2",{"colSpan":smpl_v?"2":"2"}),new GridCellFoot(id+":grid:foot:tot_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_cost","gridColumn":new GridColumnFloat({"id":"tot_cost"})}),new GridCellFoot(id+":grid:foot:tot_cost_for_driver",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_cost_for_driver","gridColumn":new GridColumnFloat({"id":"tot_cost_for_driver"})}),new GridCell(id+":grid:foot:total_sp4",{"colSpan":"1"}),new GridCellFoot(id+":grid:foot:tot_demurrage_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_demurrage_cost","gridColumn":new GridColumnFloat({"id":"tot_demurrage_cost"})}),new GridCell(id+":grid:foot:total_sp3",{"colSpan":"1"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ShipmentForVehOwnerList_View,ViewAjxList);ShipmentForVehOwnerList_View.prototype.setOwnerAgreed=function(btn){var row=btn.m_row;var val=btn.getValue();var keys=CommonHelper.unserialize(row.getAttr("keys"));var pm=this.getElement("grid").getReadPublicMethod().getController().getPublicMethod("owner_set_agreed");pm.setFieldValue("shipment_id",keys.id);var slef=this;pm.run({"ok":function(resp){slef.getElement("grid").onRefresh(function(){window.showTempNote("Отгрузка согласована",null,2000);});}})} 
function ShipmentForClientVehOwnerList_View(id,options){ShipmentForClientVehOwnerList_View.superclass.constructor.call(this,id,options);var self=this;var model=options.models.ShipmentForClientVehOwnerList_Model;var contr=new Shipment_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var role_id=window.getApp().getServVar("role_id");var smpl_v=(role_id=="vehicle_owner"||role_id=="client")
var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("ship_date")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(smpl_v){filters.driver={"binding":new CommandBinding({"control":new EditString(id+":filter-ctrl-driver",{"contClassName":"form-group-filter","labelCaption":"Водитель:"}),"field":new FieldString("drivers_ref->descr")}),"sign":"lk"}
filters.vehicle={"binding":new CommandBinding({"control":new EditString(id+":filter-ctrl-vehicle",{"contClassName":"form-group-filter","labelCaption":"ТС:"}),"field":new FieldString("vehicles_ref->descr")}),"sign":"lk"};}
else{filters.driver={"binding":new CommandBinding({"control":new DriverEditRef(id+":filter-ctrl-driver",{"contClassName":"form-group-filter","labelCaption":"Водитель:"}),"field":new FieldInt("driver_id")}),"sign":"e"}
filters.vehicle={"binding":new CommandBinding({"control":new VehicleEdit(id+":filter-ctrl-vehicle",{"contClassName":"form-group-filter","labelCaption":"ТС:"}),"field":new FieldInt("vehicle_id")}),"sign":"e"};}
filters.concrete_type={"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"readPublicMethod":contr.getPublicMethod("get_list_for_client_veh_owner"),"editInline":false,"editWinClass":ShipmentDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:ship_date",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("ship_date"),"dateFormat":"d/m/y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDateTime("ship_date")}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Клиент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlClass":smpl_v?EditString:ClientEdit,"searchOptions":{"field":smpl_v?new FieldString("clients_ref->descr"):new FieldInt("client_id"),"searchType":smpl_v?"on_part":"on_match","typeChange":smpl_v},"form":null})]}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"ctrlClass":smpl_v?EditString:DestinationEdit,"searchOptions":{"field":smpl_v?new FieldString("destinations_ref->descr"):new FieldInt("destination_id"),"searchType":smpl_v?"on_part":"on_match","typeChange":smpl_v},"form":null})]}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","colAttrs":{"clign":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumn({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:cost_shipment",{"value":"Стоимость доставки","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("cost_shipment")})]}),new GridCellHead(id+":grid:head:cost_concrete",{"value":"Стоимость бетона","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("cost_concrete")})]}),new GridCellHead(id+":grid:head:cost_other_owner_pump",{"value":"Стоимость чужего насоса","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("cost_other_owner_pump")})]}),new GridCellHead(id+":grid:head:cost_demurrage",{"value":"Простой","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("cost_demurrage")})]}),new GridCellHead(id+":grid:head:cost_total",{"value":"Итого","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("cost_total")})]})]})]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":"4"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_quant","gridColumn":new GridColumnFloat({"id":"tot_quant"})}),new GridCellFoot(id+":grid:foot:tot_cost_shipment",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_cost_shipment","gridColumn":new GridColumnFloat({"id":"tot_cost_shipment"})}),new GridCellFoot(id+":grid:foot:tot_cost_concrete",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_cost_concrete","gridColumn":new GridColumnFloat({"id":"tot_cost_concrete"})}),new GridCellFoot(id+":grid:foot:tot_cost_other_owner_pump",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_cost_other_owner_pump","gridColumn":new GridColumnFloat({"id":"tot_cost_other_owner_pump"})}),new GridCellFoot(id+":grid:foot:tot_cost_demurrage",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_cost_demurrage","gridColumn":new GridColumnFloat({"id":"tot_cost_demurrage"})}),new GridCellFoot(id+":grid:foot:tot_cost_total",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_cost_total","gridColumn":new GridColumnFloat({"id":"tot_cost_total"})})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ShipmentForClientVehOwnerList_View,ViewAjxList); 
function ShipmentForClientList_View(id,options){options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE="Журнал отгрузок";ShipmentForClientList_View.superclass.constructor.call(this,id,options);var self=this;var model=options.models.ShipmentForClientList_Model;var contr=new Shipment_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var role=window.getApp().getServVar("role_id")
var ext_user=(role=="vehicle_owner"||role=="client");var period_ctrl;var filters;if(ext_user){period_ctrl=new EditPeriodMonth(id+":filter-ctrl-period",{"field":new FieldDateTime("ship_date"),"onChange":function(dFrom,dTo){self.setGridFilter(dFrom,dTo);window.setGlobalWait(true);self.getElement("grid").onRefresh(function(){window.setGlobalWait(false);});}});}else{period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("ship_date")});filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};filters.destination={"binding":new CommandBinding({"control":new DestinationForClientEdit(id+":filter-ctrl-destination",{"contClassName":"form-group-filter","labelCaption":"Объект:"}),"field":new FieldInt("destination_id")}),"sign":"e"};filters.concrete_type={"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"};}
this.addElement(period_ctrl);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["order_id"],"readPublicMethod":contr.getPublicMethod("get_list_for_client"),"editInline":false,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"cmdFilter":!ext_user,"filters":filters,"variantStorage":options.variantStorage,"cmdExport":!ext_user}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:row0:ship_date",{"value":"Дата","attrs":{"rowspan":"2"},"colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("ship_date"),"dateFormat":"d/m/y","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("ship_date")}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:row0:destinations_ref",{"value":"Объект","attrs":{"rowspan":"2"},"columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"ctrlClass":ext_user?DestinationForClientEdit:DestinationEdit,"searchOptions":{"field":new FieldInt("destination_id"),"searchType":"on_match","typeChange":false},"form":null})]}),ext_user?null:new GridCellHead(id+":grid:head:row0:clients_ref",{"value":"Клиент","attrs":{"rowspan":"2"},"columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlClass":ClientEdit,"searchOptions":{"field":new FieldInt("client_id"),"searchType":"on_match","typeChange":false},"form":null})]}),new GridCellHead(id+":grid:head:row0:concrete_types_ref",{"value":"Марка","attrs":{"rowspan":"2"},"colAttrs":{"clign":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:row0:pump_exists",{"value":"Есть насос","attrs":{"rowspan":"2"},"colAttrs":{"align":"center"},"columns":[new GridColumnBool({"field":model.getField("pump_exists"),"showFalse":false})]}),new GridCellHead(id+":grid:head:row0:quant",{"value":"Количество","attrs":{"rowspan":"2"},"colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumn({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:row0:cost_title",{"value":"Стоимость","attrs":{"colspan":"4"}})]}),new GridRow(id+":grid:head:row1",{"elements":[,new GridCellHead(id+":grid:head:concrete_cost",{"value":"Бетон","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("concrete_cost"),"precision":"2"})]}),new GridCellHead(id+":grid:head:deliv_cost",{"value":"Доставка","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("deliv_cost"),"precision":"2"})]}),new GridCellHead(id+":grid:head:pump_cost",{"value":"Насос","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("pump_cost"),"precision":"2"})]}),new GridCellHead(id+":grid:head:total_cost",{"value":"Всего","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("total_cost"),"precision":"2"})]})]})]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":ext_user?"4":"5"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_quant","gridColumn":new GridColumnFloat({"id":"tot_quant"})}),new GridCellFoot(id+":grid:foot:tot_concrete_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_concrete_cost","gridColumn":new GridColumnFloat({"id":"tot_concrete_cost"})}),new GridCellFoot(id+":grid:foot:tot_deliv_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_deliv_cost","gridColumn":new GridColumnFloat({"id":"tot_deliv_cost"})}),new GridCellFoot(id+":grid:foot:tot_pump_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_pump_cost","gridColumn":new GridColumnFloat({"id":"tot_pump_cost"})}),new GridCellFoot(id+":grid:foot:tot_total_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_total_cost","gridColumn":new GridColumnFloat({"id":"tot_total_cost"})})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ShipmentForClientList_View,ViewAjxList);ShipmentForClientList_View.prototype.setGridFilter=function(dFrom,dTo){var gr=this.getElement("grid");gr.setFilter({"field":"ship_date","sign":"ge","val":DateHelper.format(dFrom,"Y-m-d")});gr.setFilter({"field":"ship_date","sign":"le","val":DateHelper.format(dTo,"Y-m-d")});} 
function OrderForClientList_View(id,options){options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE="Журнал заявок";OrderForClientList_View.superclass.constructor.call(this,id,options);var self=this;var model=options.models.OrderForClientList_Model;var contr=new Order_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodWeek(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time"),"onChange":function(dFrom,dTo){self.setGridFilter(dFrom,dTo);window.setGlobalWait(true);self.getElement("grid").onRefresh(function(){window.setGlobalWait(false);});}});this.addElement(period_ctrl);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"readPublicMethod":contr.getPublicMethod("get_list_for_client"),"editInline":false,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"cmdFilter":false,"filters":null}),"onEventSetRowOptions":function(opts){opts.className=opts.className||"";var m=this.getModel();var quant_rest=m.getFieldValue("quant_balance");var quant=m.getFieldValue("quant_ordered");if(quant_rest==0){opts.className+=(opts.className.length?" ":"")+"order_closed";}
else if(quant_rest==quant&&m.getFieldValue("date_time").getTime()<(DateHelper.time()).getTime()){opts.className+=(opts.className.length?" ":"")+"order_not_started";}
else if(quant_rest!=quant){opts.className+=(opts.className.length?" ":"")+"order_started";}
if(m.getFieldValue("no_ship_mark")){opts.className+=(opts.className.length?" ":"")+"order_no_ship_for_long";}},"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:ship_date",{"value":"Дата","attrs":{"rowspan":"2"},"colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/y H:i","ctrlClass":EditDateTime,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_part",},"master":true,"detailViewClass":ShipmentForOrderList_View,"detailViewOptions":{"detailFilters":{"ShipmentForOrderList_Model":[{"masterFieldId":"id","field":"order_id","sign":"e","val":"0"}]}}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:number",{"value":"Номер","attrs":{"rowspan":"2"},"columns":[new GridColumn({"field":model.getField("number"),"ctrlClass":EditString,"ctrlOotions":{"length":10},"searchOptions":{"field":new FieldString("number"),"searchType":"on_part","typeChange":false},"form":null})],"sortable":true}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","attrs":{"rowspan":"2"},"columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"ctrlClass":DestinationForClientEdit,"searchOptions":{"field":new FieldInt("destination_id"),"searchType":"on_match","typeChange":false},"form":null})],"sortable":true}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","attrs":{"rowspan":"2"},"colAttrs":{"clign":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:quant_title",{"value":"Количество","attrs":{"colspan":"3"}})]}),new GridRow(id+":grid:head:row1",{"elements":[new GridCellHead(id+":grid:head:row1:quant_ordered",{"value":"Завялено","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("quant_ordered")})]}),new GridCellHead(id+":grid:head:row1:quant_shipped",{"value":"Отгружено","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("quant_shipped")})]}),new GridCellHead(id+":grid:head:row1:quant_balance",{"value":"Остаток","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("quant_balance")})]})]})]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":"4"}),new GridCellFoot(id+":grid:foot:tot_quant_ordered",{"attrs":{"align":"right"},"totalFieldId":"total_quant_ordered","gridColumn":new GridColumnFloat({"id":"tot_quant_ordered"})}),new GridCellFoot(id+":grid:foot:tot_quant_shipped",{"attrs":{"align":"right"},"totalFieldId":"total_quant_shipped","gridColumn":new GridColumnFloat({"id":"tot_quant_shipped"})}),new GridCellFoot(id+":grid:foot:tot_quant_balance",{"attrs":{"align":"right"},"totalFieldId":"total_quant_balance","gridColumn":new GridColumnFloat({"id":"tot_quant_balance"})})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"selectedRowClass":"order_current_row","refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));this.setGridFilter(period_ctrl.getDateFrom(),period_ctrl.getDateTo());}
extend(OrderForClientList_View,ViewAjxList);OrderForClientList_View.prototype.setGridFilter=function(dFrom,dTo){dFrom=DateHelper.getStartOfShift(dFrom);dTo=DateHelper.getEndOfShift(dTo);var gr=this.getElement("grid");gr.setFilter({"field":"date_time","sign":"ge","val":DateHelper.format(dFrom,"Y-m-d H:i:s")});gr.setFilter({"field":"date_time","sign":"le","val":DateHelper.format(dTo,"Y-m-d H:i:s")});} 
function OrderForTranspNaklList_View(id,options){options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE="Журнал заявок";options.addElement=function(){const self=this;var model=new OrderForTranspNaklList_Model();var contr=new Order_Controller();var popup_menu=new PopUpMenu();const init_dt=new Date();var per_select=new EditPeriodShift(id+":order_make_filter",{"template":window.getApp().getTemplate(((window.getWidthType()=="sm")?"EditPeriodShiftSM":"EditPeriodShift")),"dateFrom":init_dt,"onChange":function(dateTime){self.setGridFilter(dateTime,dateTime);window.setGlobalWait(true);self.getElement("grid").onRefresh(function(){window.setGlobalWait(false);},true);}});this.addElement(per_select);this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"readPublicMethod":contr.getPublicMethod("get_transp_nakl_list"),"editInline":false,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"cmdFilter":false,"cmdPrint":false,"cmdExport":false,"filters":null,"cmdAllCommands":false,"cmdSearch":true,"addCustomCommandsAfter":function(commands){commands.push(new OrderGridCmdPrintTranspNakl(id+":grid:cmd:printTranspNakl",{"grid":self.getElement("grid")}));}}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHeadMark(id+":grid:head:mark"),new GridCellHead(id+":grid:head:ship_date",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/y H:i","ctrlClass":EditDateTime,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_part",},"master":true,"detailViewClass":ShipmentForTranspNaklList_View,"detailViewOptions":{"detailFilters":{"ShipmentForTranspNaklList_Model":[{"masterFieldId":"id","field":"order_id","sign":"e","val":"0"}]}}})],"sortable":true}),new GridCellHead(id+":grid:head:order_num",{"value":"Заявка","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("order_num"),})]}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Контрагент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlClass":ClientEdit,"form":ClientDialog_Form})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:client_ref_1c_exists",{"value":"1c","colAttrs":{"align":"center"},"columns":[new GridColumnBool({"field":model.getField("client_ref_1c_exists")})]}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"ctrlClass":DestinationForClientEdit})],"sortable":true}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","colAttrs":{"align":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit})]})]})]}),"pagination":null,"autoRefresh":true,"selectedRowClass":"order_current_row","refreshInterval":null,"rowSelect":false,"focus":true}));this.setGridFilter(per_select.getDateFrom(),per_select.getDateTo());}
OrderForTranspNaklList_View.superclass.constructor.call(this,id,options);}
extend(OrderForTranspNaklList_View,ViewAjxList);OrderForTranspNaklList_View.prototype.setGridFilter=function(dFrom,dTo){dFrom=DateHelper.getStartOfShift(dFrom);dTo=DateHelper.getEndOfShift(dTo);var gr=this.getElement("grid");gr.setFilter({"field":"date_time","sign":"ge","val":DateHelper.format(dFrom,"Y-m-d H:i:s")});gr.setFilter({"field":"date_time","sign":"le","val":DateHelper.format(dTo,"Y-m-d H:i:s")});} 
function ShipmentForTranspNaklList_View(id,options){options.templateOptions=options.templateOptions||{};ShipmentForTranspNaklList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ShipmentForTranspNaklList_Model)?options.models.ShipmentForTranspNaklList_Model:new ShipmentForTranspNaklList_Model();var contr=new Order_Controller();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"readPublicMethod":contr.getPublicMethod("get_transp_nakl_shipment_list"),"editInline":false,"editWinClass":null,"commands":null,"popUpMenu":null,"filters":(options.detailFilters&&options.detailFilters.ShipmentForTranspNaklList_Model)?options.detailFilters.ShipmentForTranspNaklList_Model:null,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHeadMark(id+":grid:head:mark"),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/y H:i","ctrlClass":EditDateTime})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:id",{"value":"Отгрузка","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("id")})]}),new GridCellHead(id+":grid:head:vehicles_ref",{"value":"ТС","colAttrs":{"align":"center"},"columns":[new GridColumnRef({"field":model.getField("vehicles_ref"),"ctrlClass":VehicleEdit,"form":VehicleDialog_Form})],"sortable":true}),new GridCellHead(id+":grid:head:drivers_ref",{"value":"Водитель","columns":[new GridColumnRef({"field":model.getField("drivers_ref"),"ctrlClass":DriverEditRef,"form":DriverDialog_Form})]}),new GridCellHead(id+":grid:head:driver_sig_exists",{"value":"Подпись","colAttrs":{"align":"center"},"columns":[new GridColumnBool({"field":model.getField("driver_sig_exists")})]}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit})]}),new GridCellHead(id+":grid:head:operators_ref",{"value":"Оператор","columns":[new GridColumnRef({"field":model.getField("operators_ref"),"ctrlClass":UserEditRef,"form":User_Form})]}),new GridCellHead(id+":grid:head:operator_sig_exists",{"value":"Подпись","colAttrs":{"align":"center"},"columns":[new GridColumnBool({"field":model.getField("operator_sig_exists")})]}),new GridCellHead(id+":grid:head:carriers_ref",{"value":"Перевозчик","columns":[new GridColumnRef({"field":model.getField("carriers_ref"),"ctrlClass":ClientEdit,"form":ClientDialog_Form})]}),new GridCellHead(id+":grid:head:carrier_ref_1c_exists",{"value":"1c","colAttrs":{"align":"center"},"columns":[new GridColumnBool({"field":model.getField("carrier_ref_1c_exists")})]})]})]}),"pagination":null,"autoRefresh":options.detailFilters?true:false,"selectedRowClass":"order_current_row","refreshInterval":null,"rowSelect":false,"navigate":false,"navigateClick":false,"navigateMouse":false,"focus":true}));}
extend(ShipmentForTranspNaklList_View,ViewAjxList); 
function ShipmentTimeList_View(id,options){options=options||{};options.publicMethod=(new Shipment_Controller()).getPublicMethod("get_time_list");options.reportViewId="ViewHTMLXSLT";options.templateId="ShipmentTimeList";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("ship_date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_site":{"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"contClassName":"form-group-filter"}),"field":new FieldInt("production_site_id"),"sendNull":false}),"sign":"e"},"client":{"binding":new CommandBinding({"control":new ClientEdit(id+":filter-ctrl-client",{"contClassName":"form-group-filter","labelCaption":"Контрагент:"}),"field":new FieldInt("client_id"),"sendNull":false}),"sign":"e"},"driver":{"binding":new CommandBinding({"control":new DriverEditRef(id+":filter-ctrl-driver",{"contClassName":"form-group-filter","labelCaption":"Водитель:"}),"field":new FieldInt("driver_id"),"sendNull":false}),"sign":"e"},"vehicle":{"binding":new CommandBinding({"control":new VehicleEdit(id+":filter-ctrl-vehicle",{"contClassName":"form-group-filter","labelCaption":"ТС:"}),"field":new FieldInt("vehicle_id"),"sendNull":false}),"sign":"e"},"destination":{"binding":new CommandBinding({"control":new DestinationEdit(id+":filter-ctrl-destination",{"contClassName":"form-group-filter","labelCaption":"Объект:"}),"field":new FieldInt("destination_id"),"sendNull":false}),"sign":"e"}};ShipmentTimeList_View.superclass.constructor.call(this,id,options);}
extend(ShipmentTimeList_View,ViewReport); 
function ShipmentDateList_View(id,options){options=options||{};ShipmentDateList_View.superclass.constructor.call(this,id,options);var model=options.models.ShipmentDateList_Model;var contr=new Shipment_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDate("ship_date")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_site":{"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"contClassName":"form-group-filter"}),"field":new FieldInt("production_site_id")}),"sign":"e"},"client":{"binding":new CommandBinding({"control":new ClientEdit(id+":filter-ctrl-client",{"contClassName":"form-group-filter","labelCaption":"Контрагент:"}),"field":new FieldInt("client_id")}),"sign":"e"},"vehicle":{"binding":new CommandBinding({"control":new VehicleEdit(id+":filter-ctrl-vehicle",{"contClassName":"form-group-filter","labelCaption":"ТС:"}),"field":new FieldInt("vehicle_id")}),"sign":"e"},"destination":{"binding":new CommandBinding({"control":new DestinationEdit(id+":filter-ctrl-destination",{"contClassName":"form-group-filter","labelCaption":"Объект:"}),"field":new FieldInt("destination_id")}),"sign":"e"},"concrete_type":{"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["ship_date"],"controller":contr,"readPublicMethod":contr.getPublicMethod("get_shipment_date_list"),"editInline":null,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdInsert":false,"cmdDelete":false,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:ship_date",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("ship_date")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:production_site",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref")})],"sortable":true}),new GridCellHead(id+":grid:head:client",{"value":"Клиент","columns":[new GridColumnRef({"field":model.getField("clients_ref")})],"sortable":true}),new GridCellHead(id+":grid:head:destination",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref")})],"sortable":true}),new GridCellHead(id+":grid:head:concrete",{"value":"Марка","columns":[new GridColumnRef({"field":model.getField("concrete_types_ref")})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:ship_cost",{"value":"Доставка","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("ship_cost")})]}),new GridCellHead(id+":grid:head:demurrage_cost",{"value":"За простой","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("demurrage_cost")})]}),new GridCellHead(id+":grid:head:demurrage",{"value":"Простой","colAttrs":{"align":"center"},"columns":[new GridColumnTime({"field":model.getField("demurrage")})]})]})]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":"5"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_quant","gridColumn":new GridColumnFloat({"id":"tot_quant"})}),new GridCellFoot(id+":grid:foot:tot_ship_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_ship_cost","gridColumn":new GridColumnFloat({"id":"tot_ship_cost"})}),new GridCellFoot(id+":grid:foot:tot_demurrage_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_demurrage_cost","gridColumn":new GridColumnFloat({"id":"tot_demurrage_cost"})}),new GridCell(id+":grid:foot:total_sp2",{"colSpan":"1"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ShipmentDateList_View,ViewAjxList); 
function AstCallList_View(id,options){AstCallList_View.superclass.constructor.call(this,id,options);var model=options.models.AstCallList_Model;var contr=new AstCall_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("start_time")});var self=this;var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"client":{"binding":new CommandBinding({"control":new ClientEdit(id+":filter-ctrl-client",{"contClassName":"form-group-filter"}),"field":new FieldInt("client_id")}),"sign":"e"},"client_tel":{"binding":new CommandBinding({"control":new EditPhone(id+":filter-ctrl-client_tel",{"contClassName":"form-group-filter","labelCaption":"Номер клиента"}),"field":new FieldString("caller_id_num")}),"sign":"e"},"call_type":{"binding":new CommandBinding({"control":new Enum_call_types(id+":filter-ctrl-call_type",{"contClassName":"form-group-filter","labelCaption":"Вид звонка:"}),"field":new FieldString("call_type")}),"sign":"e"},"client_come_from":{"binding":new CommandBinding({"control":new ClientComeFromEdit(id+":filter-ctrl-client_come_from",{"contClassName":"form-group-filter"}),"field":new FieldInt("client_come_from_id")}),"sign":"e"},"client_type":{"binding":new CommandBinding({"control":new ClientTypeEdit(id+":filter-ctrl-client_type",{"contClassName":"form-group-filter"}),"field":new FieldInt("client_type_id")}),"sign":"e"},"user":{"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group-filter","labelCaption":"Автор:"}),"field":new FieldInt("user_id")}),"sign":"e"}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["unique_id"],"controller":contr,"editInline":false,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdInsert":false,"cmdDelete":false,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:start_time_date",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"id":"start_time_date","field":model.getField("start_time")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:start_time_time",{"value":"Время","colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"id":"start_time_time","field":model.getField("start_time"),"dateFormat":"H:i"})]}),new GridCellHead(id+":grid:head:num",{"value":"Звонок","columns":[new GridColumn({"field":model.getField("num")})]}),new GridCellHead(id+":grid:head:client_tel",{"value":"Номер клиента","columns":[new GridColumnPhone({"field":model.getField("caller_id_num")})]}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Контрагент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"form":Client_Form,"ctrlClass":ClientEdit})],"sortable":true}),new GridCellHead(id+":grid:head:ours",{"value":"Наш","columns":[new GridColumnBool({"field":model.getField("ours")})]}),new GridCellHead(id+":grid:head:dur_time",{"value":"Прод-сть","columns":[new GridColumnDateTime({"field":model.getField("dur_time"),"dateFormat":"H:i:s"})]}),new GridCellHead(id+":grid:head:users_ref",{"value":"Сотрудник","columns":[new GridColumnRef({"field":model.getField("users_ref"),"form":User_Form,"ctrlClass":UserEditRef,"searchOptions":{"field":new FieldInt("user_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:client_come_from",{"value":"Источник","columns":[new GridColumnRef({"field":model.getField("client_come_from_ref")})]}),new GridCellHead(id+":grid:head:client_kind",{"value":"Вид клиента","columns":[new EnumGridColumn_client_kinds({"field":model.getField("client_kind")})]}),new GridCellHead(id+":grid:head:client_type",{"value":"Тип клиента","columns":[new GridColumnRef({"field":model.getField("client_types_ref"),"ctrlClass":ClientTypeEdit,"searchOptions":{"field":new FieldInt("client_type_id"),"searchType":"on_match"}})]}),new GridCellHead(id+":grid:head:call_type",{"value":"Звонок","columns":[new EnumGridColumn_call_types({"field":model.getField("call_type")})]}),new GridCellHead(id+":grid:head:record_link",{"value":"Запись","columns":[new GridColumn({"id":"record_link","formatFunction":function(fields,cell){var rec_href=fields.record_link.getValue();if(rec_href&&rec_href.length){var tag=window.getApp().htmlTagAudio(rec_href,"Ссылка на запись");cell.getNode().appendChild(tag);}
return"";}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"srvEvents":{"events":[{"id":"AstCall.insert"},{"id":"AstCall.update"}],"onEvent":function(json){self.getElement("grid").onRefresh();},"onSubscribed":function(message){self.getElement("grid").srvEventsOnSubscribed();},"onClose":function(message){self.getElement("grid").srvEventsOnClose(message);}},"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(AstCallList_View,ViewAjxList); 
function DOCMaterialProcurementList_View(id,options){if(!options.detailFilters){options.HEAD_TITLE="Поступление материалов.";}
DOCMaterialProcurementList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.DOCMaterialProcurementList_Model)?options.models.DOCMaterialProcurementList_Model:new DOCMaterialProcurementList_Model();var contr=new DOCMaterialProcurement_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var filters;if(!options.detailFilters){var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"material":{"binding":new CommandBinding({"control":new MaterialSelect(id+":filter-ctrl-material",{"contClassName":"form-group-filter"}),"field":new FieldInt("material_id")}),"sign":"e"},"supplier":{"binding":new CommandBinding({"control":new SupplierEdit(id+":filter-ctrl-supplier",{"contClassName":"form-group-filter"}),"field":new FieldInt("supplier_id")}),"sign":"e"},"carrier":{"binding":new CommandBinding({"control":new SupplierEdit(id+":filter-ctrl-carrier",{"contClassName":"form-group-filter","labelCaption":"Перевозчик:"}),"field":new FieldInt("carrier_id")}),"sign":"e"}};}
var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"editInline":false,"editWinClass":DOCMaterialProcurementDialog_Form,"contClassName":options.detailFilters?window.getBsCol(11):null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":true,"cmdEdit":true,"cmdDelete":true,"cmdFilter":!options.detailFilters,"filters":filters,"variantStorage":options.variantStorage,"cmdSearch":!options.detailFilters}),"filters":(options.detailFilters&&options.detailFilters.DOCMaterialProcurementList_Model)?options.detailFilters.DOCMaterialProcurementList_Model:null,"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time"),"dateFormat":"d/m/y H:i"})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:number",{"value":"Номер","columns":[new GridColumn({"field":model.getField("number")})],"sortable":true}),new GridCellHead(id+":grid:head:materials_ref",{"value":"Материал","columns":[new GridColumnRef({"field":model.getField("materials_ref"),"ctrlClass":MaterialSelect,"searchOptions":{"field":new FieldInt("material_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:cement_silos_ref",{"value":"Силос","columns":[new GridColumnRef({"field":model.getField("cement_silos_ref"),"ctrlClass":CementSiloEdit,"searchOptions":{"field":new FieldInt("cement_silos_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:store",{"value":"Место хранения","columns":[new GridColumn({"field":model.getField("store")})],"sortable":true}),new GridCellHead(id+":grid:head:suppliers_ref",{"value":"Поставщик","columns":[new GridColumnRef({"field":model.getField("suppliers_ref"),"ctrlClass":SupplierEdit,"searchOptions":{"field":new FieldInt("supplier_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:carriers_ref",{"value":"Перевозчик","columns":[new GridColumnRef({"field":model.getField("carriers_ref"),"ctrlClass":SupplierEdit,"searchOptions":{"field":new FieldInt("carrier_id"),"searchType":"on_match","typeChange":false}})]}),new GridCellHead(id+":grid:head:vehicle_plate",{"value":"ТС","columns":[new GridColumn({"field":model.getField("vehicle_plate")})],"sortable":true}),new GridCellHead(id+":grid:head:sender_name",{"value":"Пункт отправления","columns":[new GridColumn({"field":model.getField("sender_name")})]}),new GridCellHead(id+":grid:head:quant_net",{"value":"Вес нетто (весы)","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant_net"),"precision":"4"})]}),new GridCellHead(id+":grid:head:doc_quant_net",{"value":"Вес нетто (док-ты)","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("doc_quant_net"),"precision":"4","formatFunction":function(fields,cell){var v=fields.doc_quant_net.getValue();if(isNaN(v)){v=0;}
if(v>fields.quant_net.getValue()){cell.getNode().setAttribute("class","negativeNumber");}
return v;}})]}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text")})]})]})]}),"foot":new GridFoot(id+":grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:sp1",{"value":"Итого","colSpan":"9"}),new GridCellFoot(id+":grid:foot:tot_quant_net",{"attrs":{"align":"right"},"totalFieldId":"total_quant_net","gridColumn":new GridColumnFloat({"id":"tot_quant_net","precision":"4"})}),new GridCellFoot(id+":grid:foot:tot_doc_quant_net",{"attrs":{"align":"right"},"totalFieldId":"total_doc_quant_net","gridColumn":new GridColumnFloat({"id":"tot_doc_quant_net","precision":"4"})})]})]}),"pagination":options.detailFilters?null:new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(DOCMaterialProcurementList_View,ViewAjxList); 
function DOCMaterialProcurementDialog_View(id,options){options=options||{};options.controller=new DOCMaterialProcurement_Controller();options.model=options.models.DOCMaterialProcurementDialog_Model;var self=this;var constants={"first_shift_start_time":null};window.getApp().getConstantManager().get(constants);var st_time=constants.first_shift_start_time.getValue();options.addElement=function(){this.addElement(new ProductionBaseEdit(id+":production_bases_ref",{"value":new RefType({"keys":{"id":1},"descr":"Утяшево"})}));this.addElement(new EditString(id+":number",{"labelCaption":"Номер:","placeholder":"Номер накладной","length":"12"}));this.addElement(new SupplierEdit(id+":suppliers_ref",{"placeholder":"Поставщик материала","labelCaption":"Поставщик:"}));this.addElement(new SupplierEdit(id+":carriers_ref",{"placeholder":"Перевозчик материала","labelCaption":"Перевозчик:"}));this.addElement(new EditDateTime(id+":date_time",{"labelCaption":"Дата:","placeholder":"Дата поступления","title":"Если оставить пустым будет проставлено текущее время","editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i","timeValueStr":st_time}));var ac_model_dr=new DOCMaterialProcurementDriverList_Model();this.addElement(new EditString(id+":driver",{"placeholder":"ФИО водителя","labelCaption":"Водитель:","maxLength":"50","cmdAutoComplete":true,"acMinLengthForQuery":1,"acController":options.controller,"acModel":ac_model_dr,"acPublicMethod":options.controller.getPublicMethod("complete_driver"),"acPatternFieldId":"driver","acKeyFields":[ac_model_dr.getField("driver")],"acDescrFields":[ac_model_dr.getField("driver")],"acICase":"1","acMid":"1"}));var ac_model_v=new DOCMaterialProcurementVehicleList_Model();this.addElement(new EditString(id+":vehicle_plate",{"placeholder":"Гос.номер ТС","labelCaption":"Гос.номер:","maxLength":"10","cmdAutoComplete":true,"acMinLengthForQuery":1,"acController":options.controller,"acModel":ac_model_v,"acPublicMethod":options.controller.getPublicMethod("complete_vehicle_plate"),"acPatternFieldId":"vehicle_plate","acKeyFields":[ac_model_v.getField("vehicle_plate")],"acDescrFields":[ac_model_v.getField("vehicle_plate")],"acICase":"1","acMid":"1"}));this.addElement(new MaterialSelect(id+":materials_ref",{"labelCaption":"Материал:"}));this.addElement(new CementSiloEdit(id+":cement_silos_ref",{"labelCaption":"Силос (для цемента):","title":"Указывается только для материалов, учитываемых в силосах (цемент,добавки)"}));var ac_model_sender=new DOCMaterialProcurementSenderNameList_Model();this.addElement(new EditString(id+":sender_name",{"labelCaption":"Пункт отправления:","title":"Наименование пункта отправления материала","placeholder":"Наименование пункта отправления материала","maxLength":200,"cmdAutoComplete":true,"acMinLengthForQuery":1,"acController":options.controller,"acModel":ac_model_sender,"acPublicMethod":options.controller.getPublicMethod("complete_sender_name"),"acPatternFieldId":"sender_name","acKeyFields":[ac_model_sender.getField("sender_name")],"acDescrFields":[ac_model_sender.getField("sender_name")],"acICase":"1","acMid":"1"}));var ac_model_st=new DOCMaterialProcurementStoreList_Model();this.addElement(new EditString(id+":store",{"placeholder":"Место хранения материала","labelCaption":"Склад:","maxLength":"100","cmdAutoComplete":true,"acMinLengthForQuery":1,"acController":options.controller,"acModel":ac_model_st,"acPublicMethod":options.controller.getPublicMethod("complete_store"),"acPatternFieldId":"store","acKeyFields":[ac_model_st.getField("store")],"acDescrFields":[ac_model_st.getField("store")],"acICase":"1","acMid":"1"}));this.addElement(new EditFloat(id+":quant_net",{"precision":"2","length":"19","labelCaption":"Вес нетто:","title":"Вес нетто, чистый вес"}));this.addElement(new EditFloat(id+":quant_gross",{"precision":"2","length":"19","labelCaption":"Вес брутто:","title":"Вес брутто, общий вес"}));this.addElement(new EditFloat(id+":doc_quant_net",{"precision":"2","length":"19","labelCaption":"Вес нетто по документам:","title":"Вес нетто по документам, чистый вес по документам"}));this.addElement(new EditFloat(id+":doc_quant_gross",{"precision":"2","length":"19","labelCaption":"Вес брутто по документам:","title":"Вес брутто по документам, общий вес по документам"}));this.addElement(new EditText(id+":comment_text",{"labelCaption":"Комментарий:","title":"Комментарий"}));}
DOCMaterialProcurementDialog_View.superclass.constructor.call(this,id,options);var r_bd=[new DataBinding({"control":this.getElement("date_time")}),new DataBinding({"control":this.getElement("production_bases_ref")}),new DataBinding({"control":this.getElement("number")}),new DataBinding({"control":this.getElement("suppliers_ref")}),new DataBinding({"control":this.getElement("carriers_ref")}),new DataBinding({"control":this.getElement("cement_silos_ref")}),new DataBinding({"control":this.getElement("materials_ref")}),new DataBinding({"control":this.getElement("sender_name")}),new DataBinding({"control":this.getElement("driver")}),new DataBinding({"control":this.getElement("vehicle_plate")}),new DataBinding({"control":this.getElement("store")}),new DataBinding({"control":this.getElement("quant_net")}),new DataBinding({"control":this.getElement("quant_gross")}),new DataBinding({"control":this.getElement("doc_quant_gross")}),new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("doc_quant_net")})];this.setDataBindings(r_bd);this.setWriteBindings([new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("number")}),new CommandBinding({"control":this.getElement("production_bases_ref"),"fieldId":"production_base_id"}),new CommandBinding({"control":this.getElement("suppliers_ref"),"fieldId":"supplier_id"}),new CommandBinding({"control":this.getElement("carriers_ref"),"fieldId":"carrier_id"}),new CommandBinding({"control":this.getElement("cement_silos_ref"),"fieldId":"cement_silos_id"}),new CommandBinding({"control":this.getElement("materials_ref"),"fieldId":"material_id"}),new CommandBinding({"control":this.getElement("driver")}),new CommandBinding({"control":this.getElement("sender_name")}),new CommandBinding({"control":this.getElement("vehicle_plate")}),new CommandBinding({"control":this.getElement("store")}),new CommandBinding({"control":this.getElement("quant_net")}),new CommandBinding({"control":this.getElement("quant_gross")}),new CommandBinding({"control":this.getElement("doc_quant_net")}),new CommandBinding({"control":this.getElement("doc_quant_gross")}),new CommandBinding({"control":this.getElement("comment_text")})]);}
extend(DOCMaterialProcurementDialog_View,ViewObjectAjx);DOCMaterialProcurementDialog_View.prototype.onGetData=function(resp,cmd){DOCMaterialProcurementDialog_View.superclass.onGetData.call(this,resp,cmd);const m=this.getModel();const id=this.getId();var last_modif_users_ref=m.getFieldValue("last_modif_users_ref");if(last_modif_users_ref&&!last_modif_users_ref.isNull()){document.getElementById(id+":cmd-cont").style="float:left;";DOMHelper.setText(document.getElementById(id+":last_modif_user"),last_modif_users_ref.getDescr());DOMHelper.setText(document.getElementById(id+":last_modif_date_time"),DateHelper.format(m.getFieldValue("last_modif_date_time"),"d/m/y H:i"));}
var create_users_ref=m.getFieldValue("users_ref");if(create_users_ref&&!create_users_ref.isNull()){document.getElementById(id+":cmd-cont").style="float:left;";DOMHelper.setText(document.getElementById(id+":create_user"),create_users_ref.getDescr());}} 
function DOCMaterialProcurementShiftList_View(id,options){options=options||{};options.addElement=function(){this.addElement(new DOCMaterialProcurementShiftGrid(id+":grid",{"contClassName":options.detailFilters?window.getBsCol(11):null,"model":options.models.DOCMaterialProcurementShiftList_Model,"modelMat":options.models.RawMaterial_Model,"variantStorage":options.variantStorage}));}
DOCMaterialProcurementShiftList_View.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementShiftList_View,ViewAjxList); 
function ShipmentForOrderList_View(id,options){ShipmentForOrderList_View.superclass.constructor.call(this,id,options);this.m_makeGridListView=options.listView;var model=(options.models&&options.models.ShipmentForOrderList_Model)?options.models.ShipmentForOrderList_Model:new ShipmentForOrderList_Model();var contr=new Shipment_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var role=window.getApp().getServVar("role_id");var is_client=(role=="client"||role=="weighing");var popup_menu=new PopUpMenu();var grid=new GridAjx(id+":grid",{"className":"table-bordered table-responsive table-make_order","model":model,"controller":contr,"readPublicMethod":contr.getPublicMethod("get_list_for_order"),"editInline":!is_client,"editWinClass":null,"commands":is_client?null:new GridCmdContainerAjx(id+":grid:cmd",{"cmdSearch":false,"cmdFilter":false,"cmdAllCommands":false,"cmdDelete":false,"addCustomCommandsAfter":function(commands){commands.push(new ShipmentGridCmdPrintInvoice(id+":grid:cmd:printInvoice"));commands.push(new ShipmentGridCmdPrintPass(id+":grid:cmd:printPass",{"grid":grid}));commands.push(new ShipmentGridCmdPrintTTN(id+":grid:cmd:printTTN"));commands.push(new ShipmentGridCmdPrintPutevoiList(id+":grid:cmd:printPutevoiList"));commands.push(new ShipmentGridCmdChangeOrder(id+":grid:cmd:Change"));commands.push(new ShipmentGridCmdDelete(id+":grid:cmd:delete"));}}),"onEventSetRowOptions":function(opts){opts.className=opts.className||"";var m=this.getModel();if(m.getFieldValue("shipped")){opts.className+=(opts.className.length?" ":"")+"shipped";}},"popUpMenu":popup_menu,"filters":(options.detailFilters&&options.detailFilters.ShipmentForOrderList_Model)?options.detailFilters.ShipmentForOrderList_Model:null,"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:id",{"value":"№","className":window.getBsCol(1),"columns":[new GridColumn({"field":model.getField("id"),"ctrlClass":Edit,"ctrlOptions":{"enabled":false,"className":window.getBsCol(1)}})]}),is_client?null:new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","className":window.getBsCol(2),"columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlOptions":{"labelCaption":"","required":true},"ctrlBindFieldId":"production_site_id"})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Назн.","className":window.getBsCol(1),"colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("date_time"),"dateFormat":"H:i","ctrlClass":EditTime,"ctrlOptions":{"cmdClear":false,"enabled":(role=="owner")}})]}),new GridCellHead(id+":grid:head:ship_date_time",{"value":"Отгр.","className":window.getBsCol(1),"colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("ship_date_time"),"dateFormat":"H:i","ctrlClass":EditTime,"ctrlOptions":{"cmdClear":false,"enabled":(role=="owner")}})]}),is_client?null:new GridCellHead(id+":grid:head:vs_state",{"value":"Статус","className":window.getBsCol(2),"columns":[new EnumGridColumn_vehicle_states({"field":model.getField("vs_state"),"ctrlClass":Enum_vehicle_states,"ctrlOptions":{"enabled":false,"className":window.getBsCol(1)}})]}),new GridCellHead(id+":grid:head:vehicle_schedules_ref",{"value":"Экипаж","className":window.getBsCol(3),"columns":[new GridColumnRef({"field":model.getField("vehicle_schedules_ref"),"ctrlClass":VehicleScheduleEdit,"ctrlBindFieldId":"vehicle_schedule_id","ctrlOptions":{"labelCaption":"","cmdClear":false,"cmdOpen":false,"required":true}})]}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","className":window.getBsCol(2),"colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("quant"),"ctrlClass":EditFloat,"ctrlOptions":{"notZero":true}})]})]})]}),"foot":new GridFoot(id+":grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:sp",{"value":"Итого","colSpan":is_client?"4":"6"}),new GridCellFoot(id+":features_grid:foot:tot_quant",{"attrs":{"align":"right","nowrap":"nowrap"},"calcOper":"sum","calcFieldId":"quant","gridColumn":new GridColumnFloat({"id":"tot_quant"})})]})]}),"selectedRowClass":"order_current_row","pagination":null,"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});if(!is_client){var self=this;this.m_origGridEdit=grid.edit
grid.edit=function(cmd,editOptions){if(self.m_makeGridListView&&self.m_makeGridListView.enableRefreshing){self.m_makeGridListView.enableRefreshing(false);}
self.m_origGridEdit.call(self.getElement("grid"),cmd,editOptions);}
this.m_origGridCloseEditView=grid.closeEditView;grid.closeEditView=function(res){if(self.m_makeGridListView&&self.m_makeGridListView.enableRefreshing){self.m_makeGridListView.enableRefreshing(true);}
self.m_origGridCloseEditView.call(self.getElement("grid"),res);}}
this.addElement(grid);}
extend(ShipmentForOrderList_View,ViewAjx); 
function RawMaterialConsRateDateList_View(id,options){RawMaterialConsRateDateList_View.superclass.constructor.call(this,id,options);var model=options.models.RawMaterialConsRateDateList_Model;var contr=new RawMaterialConsRateDate_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDate("dt")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_site":{"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"contClassName":"form-group-filter","labelCaption":"Завод:"}),"field":new FieldInt("production_site_id")}),"sign":"e"}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdDelete":true,"cmdEdit":true,"cmdCopy":false,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage,"cmdAllCommands":false,"addCustomCommandsAfter":function(commands){commands.push(new RawMaterialConsRateDateGridCmdInsOnBase(id+":grid:cmd:insOnBase"));commands.push(new RawMaterialConsRateDateGridCmd(id+":grid:cmd:calc"));}}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:dt",{"value":"Период","columns":[new GridColumn({"field":model.getField("dt"),"ctrlClass":EditDateTime,"ctrlOptions":{"dateFormat":"d/m/y H:i","editMask":"99/99/99 99:99","fourYearDigit":false,"value":DateHelper.time()},"ctrlBindField":model.getField("dt"),"formatFunction":function(fields){return fields.period.getValue();},"master":true,"detailViewClass":RawMaterialConsRateList_View,"detailViewOptions":{"detailFilters":{"RawMaterialConsRateList_Model":[{"masterFieldId":"id","field":"rate_date_id","sign":"e","val":"0"}]}}})]}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"production_site_id"})]}),new GridCellHead(id+":grid:head:code",{"value":"№ подбора","columns":[new GridColumn({"field":model.getField("code"),"ctrlClass":EditInt})]}),new GridCellHead(id+":grid:head:name",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("name"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":500}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(RawMaterialConsRateDateList_View,ViewAjxList); 
function RawMaterialConsRateList_View(id,options){options=options||{};RawMaterialConsRateList_View.superclass.constructor.call(this,id,options);var contr=new RawMaterialConsRate_Controller();var model=(options.models&&options.models.RawMaterialConsRateList_Model)?options.models.RawMaterialConsRateList_Model:new RawMaterialConsRateList_Model();var constants={"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new RawMaterialConsRateGrid(id+":grid",{"keyIds":["rate_date_id","concrete_type_id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":true,"cmdDelete":true,"cmdFilter":false,"filters":null,"cmdSearch":false,"variantStorage":null}),"filters":(options.detailFilters&&options.detailFilters.RawMaterialConsRateList_Model)?options.detailFilters.RawMaterialConsRateList_Model:null,"popUpMenu":popup_menu,"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{})]}),"pagination":null,"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(RawMaterialConsRateList_View,ViewAjxList); 
function OrderPumpList_View(id,options){OrderPumpList_View.superclass.constructor.call(this,id,options);var model=options.models.OrderPumpList_Model;var contr=new OrderPump_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var is_v_owner=(window.getApp().getServVar("role_id")=="vehicle_owner");var filters;if(!is_v_owner){filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"unload_type":{"binding":new CommandBinding({"control":new Enum_unload_types(id+":filter-ctrl-unload_type",{"contClassName":"form-group-filter","labelCaption":"Подача:"}),"field":new FieldString("unload_type")}),"sign":"e"},"client":{"binding":new CommandBinding({"control":new ClientEdit(id+":filter-ctrl-client",{"contClassName":"form-group-filter","labelCaption":"Контрагент:"}),"field":new FieldInt("client_id")}),"sign":"e"},"destination":{"binding":new CommandBinding({"control":new DestinationEdit(id+":filter-ctrl-destination",{"contClassName":"form-group-filter","labelCaption":"Объект:"}),"field":new FieldInt("destination_id")}),"sign":"e"},"concrete_type":{"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"},"user":{"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group-filter","labelCaption":"Автор:"}),"field":new FieldInt("user_id")}),"sign":"e"}};}
var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["order_id"],"controller":contr,"editInline":false,"editWinClass":OrderDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":!is_v_owner,"cmdDelete":!is_v_owner,"cmdCopy":!is_v_owner,"cmdEdit":!is_v_owner,"cmdFilter":!is_v_owner,"cmdAllCommands":!is_v_owner,"cmdSearch":!is_v_owner,"filters":!is_v_owner?filters:null,"variantStorage":!is_v_owner?options.variantStorage:null}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/y H:i","searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"asc"}),is_v_owner?null:new GridCellHead(id+":grid:head:number",{"value":"Номер","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("number")})],"sortable":true}),is_v_owner?null:new GridCellHead(id+":grid:head:clients_ref",{"value":"Контрагент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlClass":ClientEdit,"searchOptions":{"field":new FieldInt("client_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"ctrlClass":DestinationEdit,"searchOptions":{"field":new FieldInt("destination_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","colAttrs":{"align":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match"}})],"sortable":true}),is_v_owner?null:new GridCellHead(id+":grid:head:unload_type",{"value":"Подача","colAttrs":{"align":"center"},"columns":[new EnumGridColumn_unload_types({"field":model.getField("unload_type"),"ctrlClass":Enum_unload_types,"searchOptions":{"field":new FieldString("unload_type"),"searchType":"on_match"}})]}),is_v_owner?null:new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text")})]}),new GridCellHead(id+":grid:head:pump_vehicles_ref",{"value":"Насос","columns":[new GridColumnRef({"field":model.getField("pump_vehicles_ref"),"ctrlClass":PumpVehicleEdit,"searchOptions":{"field":new FieldInt("pump_vehicle_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:phone_cel",{"value":"Телефон","columns":[new GridColumnPhone({"field":model.getField("phone_cel")})]}),new GridCellHead(id+":grid:head:descr",{"value":"Прораб","columns":[new GridColumn({"field":model.getField("descr")})],"sortable":true}),is_v_owner?null:new GridCellHead(id+":grid:head:pump_vehicle_owners_ref",{"value":"Владелец насоса","columns":[new GridColumnRef({"field":model.getField("pump_vehicle_owners_ref"),"ctrlClass":VehicleOwnerEdit,"searchOptions":{"field":new FieldInt("pump_vehicle_owner_id"),"searchType":"on_match"}})],"sortable":true}),is_v_owner?null:new GridCellHead(id+":grid:head:users_ref",{"value":"Автор","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"searchOptions":{"field":new FieldInt("user_id"),"searchType":"on_match"}})],"sortable":true})]})]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":is_v_owner?"2":"4"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"quant","gridColumn":new GridColumnFloat({"id":"tot_quant"})}),new GridCell(id+":grid:foot:total_sp2",{"colSpan":is_v_owner?"4":"8"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(OrderPumpList_View,ViewAjx); 
function OrderDialog_View(id,options){options=options||{};options.controller=options.controller||new Order_Controller();options.model=options.model||((options.models&&options.models.OrderDialog_Model)?options.models.OrderDialog_Model:new OrderDialog_Model());options.cmdSave=false;var app=window.getApp();var constants={"def_order_unload_speed":null,"def_lang":null};app.getConstantManager().get(constants);var role_id=app.getServVar("role_id");this.m_readOnly=(role_id=="lab_worker"||options.readOnly);var bool_bs_cl="control-label "+window.getBsCol(5);var obj_bs_cl=("control-label "+window.getBsCol(2));var self=this;options.addElement=function(){this.addElement(new AvailOrderTimeControl(id+":avail_time",{"controller":options.controller,"onSetTime":function(newTime){self.getElement("date_time_time").setValue(DateHelper.format(newTime,"H:i"));if(self.m_onChangeTime){self.m_onChangeTime();}},"onSetSpeed":function(newSpeed){self.getElement("unload_speed").setValue(Math.round(newSpeed,2));}}));this.addElement(new EditString(id+":number",{"enabled":false,"attrs":{"style":"width:150px;display:inline;","class":"form-control"},"inline":true,"cmdClear":false}));var date_time_ctrl=new EditDate(id+":date_time_date",{"required":true,"value":options.dateTime_date?options.dateTime_date:DateHelper.time(),"attrs":{"style":"width:150px;display:inline;","class":"form-control"},"inline":true,"cmdClear":false,"onSelect":function(){self.getAvailSpots();if(self.m_onChangeDate){self.m_onChangeDate();}},"events":{"onkeyup":function(e){self.getAvailSpots();if(self.m_onChangeDate){self.m_onChangeDate();}}}});this.addElement(date_time_ctrl);this.addElement(new OrderTimeSelect(id+":date_time_time",{"required":true,"value":options.dateTime_time,"attrs":{"style":"width:150px;display:inline;","class":"form-control"},"inline":true,"events":{"change":function(){if(self.m_onChangeTime){self.m_onChangeTime();}}}}));this.addElement(new EditCheckBox(id+":pay_cash",{"labelCaption":"Оплата на месте:","className":"","labelClassName":bool_bs_cl,"events":{"change":function(){self.getElement("calc").setPayCash();}}}));this.addElement(new EditCheckBox(id+":payed",{"labelCaption":"Оплачено:","className":"","labelClassName":bool_bs_cl}));this.addElement(new EditCheckBox(id+":under_control",{"labelCaption":"На контроле:","className":"","labelClassName":bool_bs_cl}));this.addElement(new EditCheckBox(id+":ext_production",{"labelCaption":"Не отправлять в производство автоматически:","labelClassName":obj_bs_cl}));this.addElement(new EditNum(id+":f_val",{"focus":true,"labelCaption":"Значение F:","title":"Значение F смеси"}));this.addElement(new EditNum(id+":w_val",{"labelCaption":"Значение W:","title":"Значение W смеси"}));var client_ctrl=new ClientEdit(id+":client",{"cmdInsert":true,"labelClassName":obj_bs_cl,"acPublicMethodId":"complete_for_order","acModel":new OrderClient_Model(),"onSelect":function(f){self.onSelectClient(f);var calc_ctrl=self.getElement("calc");if(calc_ctrl){calc_ctrl.setClientSpec();}},"focused":true,"required":true,"onClear":function(){self.getElement("client").getErrorControl().setValue("","info");self.getElement("descr").reset();self.onClearDescr();var calc_ctrl=self.getElement("calc");if(calc_ctrl){calc_ctrl.setClientSpec();}}});this.m_clientResetKeys=client_ctrl.resetKeys;client_ctrl.resetKeys=function(){self.m_clientResetKeys.call(self.getElement("client"));self.setClientId(null);self.setClientDebt(0);}
this.addElement(client_ctrl);this.addElement(new EditFloat(id+":unload_speed",{"labelCaption":"Скорость разгрузки:","value":constants.def_order_unload_speed.getValue(),"labelClassName":obj_bs_cl,"editContClassName":("input-group "+window.getBsCol(2)),"events":{"onchange":function(){self.getElement("calc").recalcTotal();self.getAvailSpots();},"onkeyup":function(e){self.getElement("calc").recalcTotal();self.getAvailSpots();}}}));var descr_ac_model=new ModelXML("OrderDescr_Model",{"fields":{"descr":new FieldString("descr"),"phone_cel":new FieldString("phone_cel"),"contact_id":new FieldInt("contact_id"),"tm_id":new FieldInt("tm_id"),"tm_exists":new FieldBool("tm_exists"),"tm_activated":new FieldBool("tm_activated"),"tm_photo":new FieldString("tm_photo")}})
this.addElement(new EditString(id+":descr",{"labelCaption":"Контакт:","labelClassName":obj_bs_cl,"maxLength":500,"cmdAutoComplete":true,"acMinLengthForQuery":0,"acController":options.readOnly?null:options.controller,"acModel":descr_ac_model,"acPublicMethod":options.readOnly?null:options.controller.getPublicMethod("complete_descr"),"acPatternFieldId":"descr","acKeyFields":[descr_ac_model.getField("descr")],"acDescrFunction":function(f){var tm=(f.tm_exists.getValue()&&f.tm_activated.getValue());return f.descr.getValue()+" "+CommonHelper.maskFormat(f.phone_cel.getValue(),window.getApp().getPhoneEditMask())+(tm?" (Telegarm)":" (СМС)");},"acOnCompleteTextOut":function(textHTML,modelRow){var pref="";if(modelRow&&modelRow.tm_photo.getValue()){pref="<img class='contactPhoto' src='data:image/png;base64, "+modelRow.tm_photo.getValue()+"'/img>";}
DOMHelper.delNodesOnClass("contactPhoto");return pref+textHTML;},"acICase":"1","acMid":"1","acEnabled":false,"onSelect":function(f){self.onSelectDescr(f);},"onClear":function(){self.onClearDescr();self.m_selectedContactId=undefined;},"events":{"blur":function(){self.onLeaveContact();}},"buttonSelect":new SendNotificationBtn(id+":btnSendNotif",{"getRef":function(callBack){self.getContactRef(callBack);}})}));this.addElement(new EditPhone(id+":phone_cel",{"labelClassName":obj_bs_cl,"labelCaption":"Телефон:","events":{"blur":function(){self.onLeaveContact();},"keyup":function(){var v=self.getElement("phone_cel").getValue();if(v&&v.length==10){self.onLeaveContact();}}}}));this.addElement(new UserEditRef(id+":user",{"labelClassName":obj_bs_cl,"labelCaption":"Автор документа:","enabled":(role_id=="owner"),"value":new RefType({"keys":{"id":app.getServVar("user_id")},"descr":app.getServVar("user_name"),"dataType":"users"})}));this.addElement(new EditString(id+":comment_text",{"labelClassName":obj_bs_cl,"labelCaption":"Комментарий:","maxLength":500}));this.addElement(new OrderCalc_View(id+":calc",{"readOnly":this.m_readOnly,"calc":false,"getAvailSpots":function(){self.getAvailSpots();},"getPayCash":function(){return self.getElement("pay_cash").getValue();},"dialogContext":this}));this.addElement(new ShipmentMediaList_View(id+":media",{"detail":true}));}
OrderDialog_View.superclass.constructor.call(this,id,options);var r_bd=[new DataBinding({"control":this.getElement("number")}),new DataBinding({"control":this.getElement("date_time_date"),"field":this.m_model.getField("date_time")}),new DataBinding({"control":this.getElement("date_time_time"),"field":this.m_model.getField("date_time")}),new DataBinding({"control":this.getElement("pay_cash")}),new DataBinding({"control":this.getElement("under_control")}),new DataBinding({"control":this.getElement("payed")}),new DataBinding({"control":this.getElement("client"),"field":this.m_model.getField("clients_ref")}),new DataBinding({"control":this.getElement("calc").getElement("destination"),"field":this.m_model.getField("destinations_ref")}),new DataBinding({"control":this.getElement("calc").getElement("client_specification"),"field":this.m_model.getField("client_specifications_ref")}),new DataBinding({"control":this.getElement("calc").getElement("quant")}),new DataBinding({"control":this.getElement("unload_speed")}),new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("calc").getElement("concrete_type"),"field":this.m_model.getField("concrete_types_ref")}),new DataBinding({"control":this.getElement("calc").getElement("pump_vehicle"),"field":this.m_model.getField("pump_vehicles_ref")}),new DataBinding({"control":this.getElement("calc").getElement("unload_type")}),new DataBinding({"control":this.getElement("descr")}),new DataBinding({"control":this.getElement("phone_cel")}),new DataBinding({"control":this.getElement("user"),"field":this.m_model.getField("users_ref")}),new DataBinding({"control":this.getElement("calc").getElement("destination_cost")}),new DataBinding({"control":this.getElement("calc").getElement("concrete_cost")}),new DataBinding({"control":this.getElement("calc").getElement("unload_price")}),new DataBinding({"control":this.getElement("calc").getElement("total")}),new DataBinding({"control":this.getElement("ext_production")}),new DataBinding({"control":this.getElement("f_val")}),new DataBinding({"control":this.getElement("w_val")})];this.setDataBindings(r_bd);if(this.m_readOnly){this.setWriteBindings([new CommandBinding({"control":this.getElement("comment_text")})]);}
else{this.setWriteBindings([new CommandBinding({"func":function(pm){self.setPublicMethodDateTime(pm);if(self.m_selectedContactId){pm.setFieldValue("contact_id",self.m_selectedContactId);}else{pm.unsetFieldValue("contact_id");}
if(self.getTotalEditModified()){pm.setFieldValue("total_edit",!self.m_model.getFieldValue("total_edit"));}
else{pm.unsetFieldValue("total_edit");}
return true;}}),new CommandBinding({"control":this.getElement("pay_cash")}),new CommandBinding({"control":this.getElement("under_control")}),new CommandBinding({"control":this.getElement("payed")}),new CommandBinding({"control":this.getElement("client"),"fieldId":"client_id"}),new CommandBinding({"control":this.getElement("calc").getElement("destination"),"fieldId":"destination_id"}),new CommandBinding({"control":this.getElement("calc").getElement("client_specification"),"fieldId":"client_specification_id"}),new CommandBinding({"control":this.getElement("calc").getElement("quant")}),new CommandBinding({"control":this.getElement("unload_speed")}),new CommandBinding({"control":this.getElement("comment_text")}),new CommandBinding({"control":this.getElement("calc").getElement("concrete_type"),"fieldId":"concrete_type_id"}),new CommandBinding({"control":this.getElement("calc").getElement("pump_vehicle"),"fieldId":"pump_vehicle_id"}),new CommandBinding({"control":this.getElement("calc").getElement("unload_type")}),new CommandBinding({"control":this.getElement("descr")}),new CommandBinding({"control":this.getElement("phone_cel")}),new CommandBinding({"control":this.getElement("user"),"fieldId":"user_id"}),new CommandBinding({"control":this.getElement("calc").getElement("destination_cost"),"fieldId":"destination_price"}),new CommandBinding({"control":this.getElement("calc").getElement("concrete_cost"),"fieldId":"concrete_price"}),new CommandBinding({"control":this.getElement("calc").getElement("unload_cost"),"fieldId":"unload_price"}),new CommandBinding({"control":this.getElement("calc").getElement("total")}),new CommandBinding({"control":this.getElement("ext_production")}),new CommandBinding({"control":this.getElement("f_val")}),new CommandBinding({"control":this.getElement("w_val")})]);}
this.addDetailDataSet({"control":this.getElement("media").getElement("grid"),"controlFieldId":["order_id"],"value":[function(){return self.m_model.getFieldValue("id");}]});}
extend(OrderDialog_View,ViewObjectAjx);OrderDialog_View.prototype.m_selectedContactId;OrderDialog_View.prototype.m_onChangeDate;OrderDialog_View.prototype.m_onChangeTime;OrderDialog_View.prototype.showTMInvite=function(){var tm_ctrl=this.getElement("descr").getErrorControl();tm_ctrl.setValue("Пригласить в Telegram","info");DOMHelper.addClass(tm_ctrl.getNode(),"tmInvite");if(!this.m_onTMInviteClick){var self=this;this.m_onTMInviteClick=function(){self.onTMInviteClick();}}
EventHelper.add(tm_ctrl.getNode(),"click",this.m_onTMInviteClick);}
OrderDialog_View.prototype.showPhoto=function(ctrl,base64Data){ctrl.popup('<div><img src="data:image/png;base64, '+base64Data+'"/></div>',{"title":"Данные по контакту"});}
OrderDialog_View.prototype.showTMInf=function(activated,photo,tmId){var tm_ctrl=this.getElement("descr").getErrorControl();tm_ctrl.setValue(activated?"Пользователь Telegram":"Сообщение отправлено, Telegram не активирован","info");DOMHelper.delNodesOnClass("contactPhoto");if(photo&&tmId){var img=DOMHelper.elem("IMG",{"class":"contactPhoto","src":"data:image/png;base64, "+photo});this.photoDetail=new ToolTip({"node":img,"wait":2,"onHover":(function(cont,id){return function(event){if(!cont.photoDetailData){cont.photoDetailData=[];}
if(!cont.photoDetailData[id]){var pm=(new TmUser_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",id);var ctrl=this;pm.run({"ok":function(resp){var m=resp.getModel("TmUserDialog_Model");if(m.getNextRow()){cont.photoDetailData[id]=m.getFieldValue("tm_photo");cont.showPhoto(ctrl,cont.photoDetailData[id]);}}});}else{cont.showPhoto(this,cont.photoDetailData[id]);}}})(this,tmId)});tm_ctrl.m_node.parentNode.insertBefore(img,tm_ctrl.m_node);}}
OrderDialog_View.prototype.hideTMInvite=function(){var tm_ctrl=this.getElement("descr").getErrorControl();tm_ctrl.setValue("","info");if(this.m_onTMInviteClick){EventHelper.add(tm_ctrl.getNode(),"click",this.m_onTMInviteClick);}
DOMHelper.delNodesOnClass("contactPhoto");}
OrderDialog_View.prototype.onSelectDescr=function(f){this.getElement("phone_cel").setValue(f.phone_cel.getValue());this.m_selectedContactId=f.contact_id.getValue();var descr=f.descr.getValue();this.getElement("descr").setValue(descr);if(descr&&descr.length&&!f.tm_exists.getValue()){this.showTMInvite();}else if(descr&&descr.length){this.showTMInf(f.tm_activated.getValue(),f.tm_photo.getValue(),f.tm_id.getValue());}}
OrderDialog_View.prototype.onLeaveContact=function(){var descr=this.getElement("descr").getValue();var phone_cel=this.getElement("phone_cel").getValue();if(!this.m_selectedContactId&&descr&&descr.length&&phone_cel&&phone_cel.length==10){this.showTMInvite();}}
OrderDialog_View.prototype.onClearDescr=function(f){this.getElement("phone_cel").reset();this.hideTMInvite();}
OrderDialog_View.prototype.onTMInviteClick=function(){var self=this;self.getContactRef(function(ref){window.getApp().TMInviteContact(ref,function(){self.hideTMInvite();});});}
OrderDialog_View.prototype.onSelectClient=function(f){var ctrl;ctrl=this.getElement("descr");if(!ctrl.isNull()){ctrl.setValue(f.descr.getValue());}
ctrl=this.getElement("phone_cel");if(!ctrl.isNull()){ctrl.setValue(f.phone_cel.getValue());}
var inf;if(f.quant.getValue()){inf=DateHelper.format(f.date_time.getValue(),"d/m/y")+","+f.destinations_ref.getValue().getDescr()+","+f.concrete_types_ref.getValue().getDescr()+","+f.quant.getValue()+"м3";}
else{inf="Еще не брал";}
console.log(f)
var debt=f.client_debt.getValue();if(debt!=undefined&&debt!=0){inf=inf+", "+this.getClientDebtText(debt);this.setClientDebt(debt);}
this.getElement("client").getErrorControl().setValue(inf,"info");this.setClientId(f.id.getValue());}
OrderDialog_View.prototype.getAvailSpots=function(){this.getElement("avail_time").refresh(this.getElement("date_time_date").getValue(),this.getElement("calc").getElement("quant").getValue(),this.getElement("unload_speed").getValue());}
OrderDialog_View.prototype.getModified=function(cmd){return(OrderDialog_View.superclass.getModified.call(this,cmd)||this.getDateModified()||this.getTotalEditModified());}
OrderDialog_View.prototype.getTotalEditModified=function(pm){return(this.getElement("calc").getElement("total").getEditAllowed()!=this.m_model.getFieldValue("total_edit"));}
OrderDialog_View.prototype.getDateModified=function(pm){return(this.getElement("date_time_date").getModified()||this.getElement("date_time_time").getModified());}
OrderDialog_View.prototype.setPublicMethodDateTime=function(pm){if(this.getDateModified()&&pm){var dt=this.getElement("date_time_date").getValue();if(dt){dt=DateHelper.dateStart(dt);dt=new Date(dt.getTime()+DateHelper.timeToMS(this.getElement("date_time_time").getValue()));}
pm.setFieldValue("date_time",dt);}
else if(pm){pm.unsetFieldValue("date_time");}}
OrderDialog_View.prototype.setClientId=function(clientId){var descr_ac=this.getElement("descr").getAutoComplete();var dest_ac=this.getElement("calc").getElement("destination").getAutoComplete();if(!descr_ac||!dest_ac){return;}
let descr_ac_pm=descr_ac.getPublicMethod();let dest_ac_pm=dest_ac.getPublicMethod();if(!descr_ac_pm||!dest_ac_pm){return}
if(clientId){descr_ac_pm.setFieldValue("client_id",clientId);dest_ac_pm.setFieldValue("client_id",clientId);}
else{descr_ac_pm.getField("client_id").resetValue();dest_ac_pm.getField("client_id").resetValue();}
descr_ac.setEnabled((clientId!==null));}
OrderDialog_View.prototype.getClientDebtText=function(client_debt){var client_debt_pref="";if(client_debt){client_debt_pref="Долг: ";}
var client_debt_s=CommonHelper.numberFormat(client_debt,2,","," ");return client_debt_pref+client_debt_s+" руб.";}
OrderDialog_View.prototype.setClientDebt=function(client_debt){var debt_n=document.getElementById(this.getId()+":client_debt");if(client_debt!=undefined&&client_debt!=0){if(client_debt){DOMHelper.addClass(debt_n,"text-danger");}else if(client_debt<0){DOMHelper.addClass(debt_n,"text-success");}
var client_debt_s=CommonHelper.numberFormat(client_debt,2,","," ");DOMHelper.setText(debt_n,this.getClientDebtText(client_debt));DOMHelper.show(debt_n);}else{DOMHelper.setText(debt_n,"");DOMHelper.hide(debt_n);}}
OrderDialog_View.prototype.onGetData=function(resp,cmd){OrderDialog_View.superclass.onGetData.call(this,resp,cmd);var m=this.getModel();var f=m.getField("clients_ref");if(!f.isNull()&&f.getValue()){this.setClientId(f.getValue().getKey());}
var ctrl_calc=this.getElement("calc");ctrl_calc.getElement("total").setEditAllowed(m.getFieldValue("total_edit"));ctrl_calc.changeUnloadType();ctrl_calc.setDestinationPrice(m.getFieldValue("destination_price"),m.getFieldValue("destination_distance"),m.getFieldValue("destination_time_rout"))
ctrl_calc.setConcretePrice(m.getFieldValue("concrete_price"));ctrl_calc.setClientSpec();var id=this.getId();var last_modif_users_ref=m.getFieldValue("last_modif_users_ref");if(last_modif_users_ref&&!last_modif_users_ref.isNull()){document.getElementById(id+":cmd-cont").style="float:left;";DOMHelper.setText(document.getElementById(id+":last_modif_user"),last_modif_users_ref.getDescr());DOMHelper.setText(document.getElementById(id+":last_modif_date_time"),DateHelper.format(m.getFieldValue("last_modif_date_time"),"d/m/y H:i"));}
this.setClientDebt(m.getFieldValue("client_debt"));this.getElement("user").getErrorControl().setValue("Время создания: "+DateHelper.format(m.getFieldValue("create_date_time"),"d/m/y H:i"),"warn");this.m_selectedContactId=m.getFieldValue("contact_id");var descr=m.getFieldValue("descr");if(descr&&descr.length&&!m.getFieldValue("tm_exists")){this.showTMInvite();}else if(descr&&descr.length){this.showTMInf(m.getFieldValue("tm_activated"),m.getFieldValue("tm_photo"),m.getFieldValue("tm_id"));}
if(this.m_readOnly){this.setEnabled(false);this.getElement("comment_text").setEnabled(true);this.getControlOK().setEnabled(true);}}
OrderDialog_View.prototype.getContactRef=function(callBack){var self=this;if(!this.m_selectedContactId){var descr=this.getElement("descr").getValue();if(!descr||!descr.length){window.showTempError("Не указано имя прораба!",null,5000);return;}
var phone_cel=this.getElement("phone_cel").getValue();if(!phone_cel||!phone_cel.length){window.showTempError("Не указан телефон прораба!",null,5000);return;}
var pm=(new Contact_Controller()).getPublicMethod("upsert");pm.setFieldValue("name",descr);pm.setFieldValue("tel",phone_cel);pm.run({"ok":function(resp){var m=resp.getModel("Ref_Model");if(m.getNextRow()){var r=m.getFieldValue("ref");self.m_selectedContactId=r.getKey();callBack(CommonHelper.unserialize(r));}}});}else{callBack(new RefType({"keys":{"id":this.m_selectedContactId},"descr":this.getElement("descr").getValue(),"dataType":"contacts"}));}} 
function OrderGarbageDialog_View(id,options){options=options||{};options.readOnly=true;options.model=((options.models&&options.models.OrderGarbageDialog_Model)?options.models.OrderGarbageDialog_Model:new OrderGarbageDialog_Model());options.controller=new OrderGarbage_Controller();OrderGarbageDialog_View.superclass.constructor.call(this,id,options);}
extend(OrderGarbageDialog_View,OrderDialog_View); 
function OrderMakeList_View(id,options){this.m_lowResDevice=(window.getWidthType()=="sm");options.templateOptions=options.templateOptions||{};options.templateOptions.showChart=!this.m_lowResDevice;options.templateOptions.showGridHeaders=!this.m_lowResDevice;this.m_showProductionSites=!this.m_lowResDevice;options.templateOptions.showProductionSites=this.m_showProductionSites;options.className="row";this.m_refreshMethod=(new Order_Controller()).getPublicMethod("get_make_orders_form");var self=this;this.resetTotals();var constants={"order_grid_refresh_interval":null,"first_shift_start_time":null,"day_shift_length":null,"order_step_min":null,"shift_length_time":"null"};window.getApp().getConstantManager().get(constants);var st_time=constants.first_shift_start_time.getValue();var st_time_parts=st_time.split(":");var from_h=0,to_h=0;if(st_time_parts&&st_time_parts.length){from_h=parseInt(st_time_parts[0],10);}
to_h=from_h+parseInt(constants.day_shift_length.getValue(),10);this.m_startShiftMS=DateHelper.timeToMS(st_time);this.m_endShiftMS=DateHelper.timeToMS((to_h-1).toString()+":59:59");options.templateOptions=options.templateOptions||{};options.templateOptions.workHours=from_h+"-"+to_h;this.m_prodBaseList=[];if(options.models&&options.models.ProductionBase_Model){while(options.models.ProductionBase_Model.getNextRow()){if(options.models.ProductionBase_Model.getFieldValue("deleted")){continue;}
this.m_prodBaseList.push({"productionBaseId":options.models.ProductionBase_Model.getFieldValue("id"),"productionBaseName":options.models.ProductionBase_Model.getFieldValue("name")})}}
options.templateOptions.productionBases=this.m_prodBaseList;var init_dt,cond_date;if(options.models&&options.models.InitDate&&options.models.InitDate.getNextRow()){var d_s=options.models.InitDate.getFieldValue("dt");init_dt=DateHelper.strtotime(d_s);}
options.addElement=function(){if(!this.m_lowResDevice){this.addElement(new PlantLoadGraphControl(id+":plant_load_graph",{"model":options.models.Graph_Model}));}
var per_select=new EditPeriodShift(id+":order_make_filter",{"template":window.getApp().getTemplate(((window.getWidthType()=="sm")?"EditPeriodShiftSM":"EditPeriodShift")),"dateFrom":init_dt,"onChange":function(dateTime){window.setGlobalWait(true);self.refresh(function(){window.setGlobalWait(false);},true);}});this.addElement(per_select);var model=options.models.OrderMakeList_Model;var grid=new OrderMakeGrid(id+":order_make_grid",{"model":options.models.OrderMakeList_Model,"periodSelect":per_select,"className":"table-bordered table-responsive table-make_order order_make_grid","listView":this,"stepMin":constants.order_step_min.getValue(),"shiftStart":constants.first_shift_start_time.getValue(),"shiftLength":constants.shift_length_time.getValue()});this.addElement(grid);grid.onRefresh=function(){self.refresh();}
for(var i=0;i<this.m_prodBaseList.length;i++){var base_id=this.m_prodBaseList[i].productionBaseId;var m_id="MatTotals"+base_id+"_Model";if(!options.models[m_id]){throw new Error("Model "+m_id+" not found!");}
this.addElement(new MaterialMakeOrderGrid(id+":mat_totals_grid"+base_id,{"model":new MatTotals_Model({"data":options.models[m_id].getData()}),"className":this.TABLE_CLASS,"refresh":function(){self.refresh();}}));if(this.m_showProductionSites){var m_id="CementSiloForOrderList"+base_id+"_Model";if(!options.models[m_id]){throw new Error("Model "+m_id+" not found!");}
this.addElement(new CementSiloForOrderList_View(id+":production_sites"+base_id,{"model":new CementSiloForOrderList_Model({"data":options.models[m_id].getData()}),"listView":this}));var m_id="MaterialStoreForOrderList"+base_id+"_Model";if(!options.models[m_id]){throw new Error("Model "+m_id+" not found!");}
this.addElement(new MaterialStoreForOrderList_View(id+":material_stores"+base_id,{"model":new MaterialStoreForOrderList_Model({"data":options.models[m_id].getData()}),"listView":this}));}}
this.addElement(new AssignedVehicleList_View(id+":veh_assigning",{"models":options.models,"shortDescriptions":true,"noAutoRefresh":true,"fromMakeList":true}));this.addElement(new VehicleScheduleMakeOrderGrid(id+":veh_schedule_grid",{"model":options.models.VehicleScheduleMakeOrderList_Model}));var model=options.models.VehFeaturesOnDateList_Model;this.addElement(new Grid(id+":features_grid",{"model":model,"keyIds":["feature"],"className":this.TABLE_CLASS,"attrs":{"style":"width:100%;"},"readPublicMethod":null,"editInline":false,"editWinClass":null,"commands":null,"popUpMenu":null,"head":new GridHead(id+":features_grid:head",{"elements":[new GridRow(id+"features_grid:head:row0",{"elements":[new GridCellHead(id+":features_grid:head:feature",{"value":"Св-во","title":"Свойство ТС","columns":[new GridColumn({"field":model.getField("feature")})]}),new GridCellHead(id+":features_grid:head:cnt",{"value":"Кол-во","title":"Количество ТС по свойству","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("cnt")})]})]})]}),"foot":new GridFoot(id+":features_grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":features_grid:foot:row0",{"elements":[new GridCell(id+":features_grid:foot:total_sp",{"value":"Итого"}),new GridCellFoot(id+":features_grid:foot:tot_cnt",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"cnt","gridColumn":new GridColumnFloat({"id":"tot_cnt"})})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":null,"rowSelect":false,"focus":false,"navigate":false,"navigateClick":false}));this.addElement(new Statistics_View(id+":statistics"));}
options.srvEvents={"events":[{"id":"Graph.change"},{"id":"VehicleScheduleState.insert"},{"id":"VehicleScheduleState.update"},{"id":"VehicleScheduleState.delete"},{"id":"RAMaterialFact.change"}],"onWakeup":function(){self.refresh();},"onEvent":function(json){self.srvEventsCallBack(json);},"onSubscribed":function(){self.setRefreshInterval(self.FORCE_REFRESH_INTERVAL);},"onClose":function(message){self.setRefreshInterval(self.m_httpRefreshInterval);}};this.m_httpRefreshInterval=constants.order_grid_refresh_interval.getValue()*1000;OrderMakeList_View.superclass.constructor.call(this,id,options);}
extend(OrderMakeList_View,View);OrderMakeList_View.prototype.COL_CLIENT_LEN=20;OrderMakeList_View.prototype.COL_DEST_LEN=10;OrderMakeList_View.prototype.COL_COMMENT_LEN=15;OrderMakeList_View.prototype.COL_DESCR_LEN=15;OrderMakeList_View.prototype.COL_DRIVER_LEN=10;OrderMakeList_View.prototype.COL_PUMP_VEH_LEN=10;OrderMakeList_View.prototype.TABLE_CLASS="table-bordered table-responsive table-striped table-make_order";OrderMakeList_View.prototype.TABLE_CLASS_NO_WRAP="table-bordered table-responsive table-striped table-make_order_no_wrap";OrderMakeList_View.prototype.FORCE_REFRESH_INTERVAL=30*60*1000;OrderMakeList_View.prototype.m_orderedTotal;OrderMakeList_View.prototype.m_restTotal;OrderMakeList_View.prototype.m_shippedTotal;OrderMakeList_View.prototype.m_orderedSum;OrderMakeList_View.prototype.m_orderedDay;OrderMakeList_View.prototype.m_orderedBeforeNow=0;OrderMakeList_View.prototype.m_shippedBeforeNow=0;OrderMakeList_View.prototype.m_shippedDayBeforeNow=0;OrderMakeList_View.prototype.m_startShiftMS;OrderMakeList_View.prototype.m_endShiftMS;OrderMakeList_View.prototype.refresh=function(callBack,removeWait){this.m_refreshMethod.setFieldValue("date",this.getElement("order_make_filter").getDateFrom());var self=this;this.m_refreshMethod.run({"ok":function(resp){self.onRefreshResponse(resp);if(callBack)callBack();},"fail":removeWait?function(){window.setGlobalWait(false);}:null})}
OrderMakeList_View.prototype.setRefreshInterval=function(v){if(this.m_refreshInterval==v){return;}
this.m_refreshInterval=v;if(this.m_refreshTimer!=undefined){window.clearInterval(this.m_refreshTimer);}
if(v>0){var self=this;this.m_refreshTimer=setInterval(function(){self.refresh();},v);}}
OrderMakeList_View.prototype.toDOM=function(p){OrderMakeList_View.superclass.toDOM.call(this,p);if(!window.getApp().getAppSrv()){this.setRefreshInterval(this.m_httpRefreshInterval);}
this.showTotals();var self=this;window.getApp().addCollapseOnClick({"OrderMakeList:statisticsTgl":function(callback){var ctrl=self.getElement("statistics");if(ctrl){ctrl.getElement("grid").onRefresh(callback);}}});window.getApp().initViewPanels(this);}
OrderMakeList_View.prototype.delDOM=function(){if(this.m_refreshTimer!=undefined){window.clearInterval(this.m_refreshTimer);}
OrderMakeList_View.superclass.delDOM.call(this);}
OrderMakeList_View.prototype.setTotalVal=function(id,v){var n=document.getElementById(id);if(n){n.textContent=v;}}
OrderMakeList_View.prototype.showTotals=function(){var n=DateHelper.time();var dif_sec=(n.getTime()-(DateHelper.getStartOfShift(n)).getTime())/1000;this.setTotalVal("totOrdered",this.m_orderedTotal.toFixed(2));this.setTotalVal("totShipped",this.m_shippedTotal.toFixed(2));this.setTotalVal("totBalance",(this.m_orderedTotal-this.m_shippedTotal).toFixed(2));this.setTotalVal("totEfficiency",(Math.round((this.m_shippedBeforeNow-this.m_orderedBeforeNow)*100)/100).toFixed(2));this.setTotalVal("totDayVelocity",(Math.round(this.m_orderedDay/13*100)/100).toFixed(2));this.setTotalVal("totCurVelocity",(Math.round(this.m_shippedDayBeforeNow/dif_sec*60*60*100)/100).toFixed(2));this.setTotalVal("totOrderedDay",this.m_orderedDay.toFixed(2));}
OrderMakeList_View.prototype.resetTotals=function(){this.m_orderedTotal=0;this.m_restTotal=0;this.m_shippedTotal=0;this.m_orderedSum=0;this.m_orderedDay=0;this.m_orderedBeforeNow=0;this.m_shippedBeforeNow=0;this.m_shippedDayBeforeNow=0;}
OrderMakeList_View.prototype.onRefreshResponse=function(resp){if(!resp){return;}
if(resp.modelExists("OrderMakeList_Model")){var grid=this.getElement("order_make_grid");if(!grid.getLocked()){this.resetTotals();grid.getModel().setData(resp.getModelData("OrderMakeList_Model"));grid.onGetData();}}
if(resp.modelExists("Graph_Model")&&!this.m_lowResDevice){this.getElement("plant_load_graph").setModel(resp.getModel("Graph_Model"));}
for(var i=0;i<this.m_prodBaseList.length;i++){var base_id=this.m_prodBaseList[i].productionBaseId;if(this.m_showProductionSites&&resp.modelExists("CementSiloForOrderList"+base_id+"_Model")){this.getElement("production_sites"+base_id).setData(resp.getModel("CementSiloForOrderList"+base_id+"_Model"));}
if(this.m_showProductionSites&&resp.modelExists("MaterialStoreForOrderList"+base_id+"_Model")){this.getElement("material_stores"+base_id).setData(resp.getModel("MaterialStoreForOrderList"+base_id+"_Model"));}
if(resp.modelExists("MatTotals"+base_id+"_Model")){var grid=this.getElement("mat_totals_grid"+base_id);grid.getModel().setData(resp.getModelData("MatTotals"+base_id+"_Model"));grid.onGetData();}}
if(resp.modelExists("AssignedVehicleList_Model")){this.getElement("veh_assigning").setData(resp.getModelData("AssignedVehicleList_Model"));}
if(resp.modelExists("VehicleScheduleMakeOrderList_Model")){var grid=this.getElement("veh_schedule_grid");grid.getModel().setData(resp.getModelData("VehicleScheduleMakeOrderList_Model"));grid.onGetData();}
if(resp.modelExists("VehFeaturesOnDateList_Model")){var grid=this.getElement("features_grid");grid.getModel().setData(resp.getModelData("VehFeaturesOnDateList_Model"));grid.onGetData();}
this.showTotals();}
OrderMakeList_View.prototype.runSpecificUpdateMethod=function(meth,lsn){var pm=(new Order_Controller()).getPublicMethod(meth);pm.setFieldValue("date",this.getElement("order_make_filter").getDateFrom());if(lsn&&pm.fieldExists("lsn")){pm.setFieldValue("lsn",lsn);}
var self=this;pm.run({"ok":function(resp){self.onRefreshResponse(resp);}});}
OrderMakeList_View.prototype.srvEventsCallBack=function(json){if(json.controllerId=="Order"||json.controllerId=="Shipment"||json.controllerId=="Graph"){this.runSpecificUpdateMethod("get_make_orders_form_ord",(json.params&&json.params.lsn)?json.params.lsn:null);}
else if(json.controllerId=="VehicleScheduleState"){this.runSpecificUpdateMethod("get_make_orders_form_veh",(json.params&&json.params.lsn)?json.params.lsn:null);}
else if(json.controllerId=="RAMaterialFact"){this.runSpecificUpdateMethod("get_make_orders_form_mat",(json.params&&json.params.lsn)?json.params.lsn:null);}} 
function ClientList_View(id,options){options.addElement=function(){var model=options.models.ClientList_Model;var contr=new Client_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":Client_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"addCustomCommandsAfter":function(commands){commands.push(new SendNotificationCmd(id+":grid:cmd:sendNotif",{"showCmdControl":true,"entityType":"clients","getEntityId":function(){return model.getFieldValue("id");}}));}}),"onEventSetCellOptions":function(opts){var m=this.getModel();if(opts.gridColumn.getId()=="name"){opts.attrs=opts.attrs||{};opts.attrs.class=opts.attrs.class||"";if(m.getFieldValue("ref_1c_exists")){opts.attrs.class+=((opts.attrs.class=="")?"":" ")+"ref_1c_exists";opts.attrs.title="Контрагент связан с 1с";}}},"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})]}),new GridCellHead(id+":grid:head:contact_ids",{"value":"Контакты","columns":[new GridColumn({"field":model.getField("contact_ids"),"formatFunction":function(f,cell){window.getApp().formatContactList(f,cell);return"";},"ctrlClass":ContactEdit,"searchOptions":{"searchType":"on_match","typeChange":false,"condSign":"any"}})]}),new GridCellHead(id+":grid:head:client_types_ref",{"value":"Вид клиента","columns":[new GridColumnRef({"field":model.getField("client_types_ref"),"ctrlClass":ClientTypeEdit,"searchOptions":{"field":new FieldInt("client_type_id"),"searchType":"on_match"}})]}),new GridCellHead(id+":grid:head:client_come_from_ref",{"value":"Источник обращения","columns":[new GridColumnRef({"field":model.getField("client_come_from_ref"),"ctrlClass":ClientComeFromEdit,"searchOptions":{"field":new FieldInt("client_come_from_id"),"searchType":"on_match"}})]}),new GridCellHead(id+":grid:head:first_call_date",{"value":"Первый звонок","columns":[new GridColumnDate({"field":model.getField("first_call_date")})]}),new GridCellHead(id+":grid:head:inn",{"value":"ИНН","columns":[new GridColumn({"field":model.getField("inn")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
ClientList_View.superclass.constructor.call(this,id,options);}
extend(ClientList_View,ViewAjxList); 
function ClientDialog_View(id,options){options=options||{};options.controller=new Client_Controller();options.model=options.models.ClientDialog_Model;var self=this;options.addElement=function(){this.addElement(new ClientNameEdit(id+":name",{"view":this,"required":true,"focus":true,"placeholder":"Краткое наименование","title":"Краткое наименование для удобного поиска и представления"}));this.addElement(new ClientNameFullEdit(id+":name_full",{"required":true,"placeholder":"Полное наименование","title":"Полное наименование в соответствии с учредительными документами"}));this.addElement(new EditEmail(id+":email",{"labelCaption":"Эл.почта:","title":"Адрес электронной почты","placeholder":"Адрес электронной почты"}));this.addElement(new EditText(id+":manager_comment",{"labelCaption":"Комментарий:","title":"Любой комментарий, связанный с контрагентом"}));this.addElement(new Enum_client_kinds(id+":client_kind",{"labelCaption":"Тип клиента:"}));this.addElement(new UserEditRef(id+":manager",{"labelCaption":"Менеджер:"}));this.addElement(new ClientTypeEdit(id+":client_type"));this.addElement(new ClientComeFromEdit(id+":client_come_from"));this.addElement(new EntityContactList_View(id+":contacts_list",{"detail":true}));this.addElement(new ClientSpecificationList_View(id+":specification_list",{"detail":true}));this.addElement(new EditNum(id+":inn",{"labelCaption":"ИНН:","maxLength":"12","title":"ИНН организации или предпринимателя","placeholder":"ИНН организации/предпринимателя"}));this.addElement(new EditNum(id+":kpp",{"labelCaption":"КПП:","maxLength":"10","title":"КПП организации","placeholder":"КПП организации"}));this.addElement(new EditString(id+":address_legal",{"labelCaption":"Адрес:","maxLength":"500","title":"Юридический адрес организации/предпринимателя","placeholder":"Юридический адрес организации/предпринимателя"}));this.addElement(new EditString(id+":address_fact",{"labelCaption":"Адрес:","maxLength":"500","title":"Фактический адрес организации/предпринимателя","placeholder":"Фактический адрес организации/предпринимателя"}));this.addElement(new UserEditRef(id+":accounts_ref",{"labelCaption":"Аккаунт:"}));this.addElement(new EditDate(id+":account_from_date",{"labelCaption":"Дата начала выборки данных для клиента:","title":"Клиент будет видеть данные начиная с этой даты дальше"}));this.addElement(new EditBankAcc(id+":bank_account",{"labelCaption":"Расчетный счет:","title":"Расчетный счет","placeholder":"Расчетный счет организации/предпринимателя"}));this.addElement(new BankEditRef(id+":banks_ref",{"labelCaption":"Банк:"}));this.addElement(new Client1cEdit(id+":ref_1c",{}));this.addElement(new EditFloat(id+":shipment_quant_for_cost",{"precision":2,"labelCaption":"Минмальное количество для доставки:"}));}
ClientDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("name_full")}),new DataBinding({"control":this.getElement("email")}),new DataBinding({"control":this.getElement("client_kind")}),new DataBinding({"control":this.getElement("manager_comment")}),new DataBinding({"control":this.getElement("manager"),"fieldId":"users_ref"}),new DataBinding({"control":this.getElement("accounts_ref"),"fieldId":"accounts_ref"}),new DataBinding({"control":this.getElement("client_come_from"),"fieldId":"client_come_from_ref"}),new DataBinding({"control":this.getElement("client_type"),"fieldId":"client_types_ref"}),new DataBinding({"control":this.getElement("inn")}),new DataBinding({"control":this.getElement("address_legal")}),new DataBinding({"control":this.getElement("address_fact")}),new DataBinding({"control":this.getElement("account_from_date")}),new DataBinding({"control":this.getElement("bank_account")}),new DataBinding({"control":this.getElement("banks_ref"),"fieldId":"banks_ref"}),new DataBinding({"control":this.getElement("ref_1c"),"fieldId":"ref_1c"}),new DataBinding({"control":this.getElement("shipment_quant_for_cost")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("name_full")}),new CommandBinding({"control":this.getElement("email")}),new CommandBinding({"control":this.getElement("client_kind")}),new CommandBinding({"control":this.getElement("manager_comment")}),new CommandBinding({"control":this.getElement("manager"),"fieldId":"manager_id"}),new CommandBinding({"control":this.getElement("accounts_ref"),"fieldId":"user_id"}),new CommandBinding({"control":this.getElement("client_come_from"),"fieldId":"client_come_from_id"}),new CommandBinding({"control":this.getElement("client_type"),"fieldId":"client_type_id"}),new CommandBinding({"control":this.getElement("inn")}),new CommandBinding({"control":this.getElement("address_legal")}),new CommandBinding({"control":this.getElement("address_fact")}),new CommandBinding({"control":this.getElement("account_from_date")}),new CommandBinding({"control":this.getElement("bank_account")}),new CommandBinding({"control":this.getElement("banks_ref"),"fieldId":"bank_bik"}),new CommandBinding({"control":this.getElement("ref_1c"),"fieldId":"ref_1c"}),new CommandBinding({"control":this.getElement("shipment_quant_for_cost")})]);this.addDetailDataSet({"control":this.getElement("contacts_list").getElement("grid"),"controlFieldId":["entity_type","entity_id"],"value":["clients",function(){return self.m_model.getFieldValue("id");}]});this.addDetailDataSet({"control":this.getElement("specification_list").getElement("grid"),"controlFieldId":["client_id"],"value":[function(){return self.m_model.getFieldValue("id");}]});}
extend(ClientDialog_View,ViewObjectAjx); 
function ConcreteTypeList_View(id,options){ConcreteTypeList_View.superclass.constructor.call(this,id,options);var model=options.models.ConcreteTypeList_Model;var contr=new ConcreteType_Controller();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":100,"placeholder":"Наименование марки"}})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:official_name",{"value":"Официальное наименование","attrs":{"title":"Официальное наименование для накладной"},"columns":[new GridColumn({"field":model.getField("official_name"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":200,"placeholder":"Наименование для накладной"}})]}),new GridCellHead(id+":grid:head:code_1c",{"value":"Код 1с","columns":[new GridColumn({"field":model.getField("code_1c")})]}),new GridCellHead(id+":grid:head:pres_norm",{"value":"Норма давл.","columns":[new GridColumnFloat({"field":model.getField("pres_norm")})]}),new GridCellHead(id+":grid:head:mpa_ratio",{"value":"Кф.МПА","columns":[new GridColumnFloat({"field":model.getField("mpa_ratio")})]}),new GridCellHead(id+":grid:head:material_cons_rates",{"value":"Есть подборы","colAttrs":{"align":"center"},"columns":[new GridColumnBool({"field":model.getField("material_cons_rates"),"showFalse":false})]}),new GridCellHead(id+":grid:head:show_on_site",{"value":"Отображать на сайте","colAttrs":{"align":"center"},"columns":[new GridColumnBool({"field":model.getField("show_on_site"),"showFalse":false})]}),new GridCellHead(id+":grid:head:price",{"value":"Цена","columns":[new GridColumnFloat({"field":model.getField("price"),"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":grid:head:prochnost",{"value":"Прочность","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("prochnost"),"ctrlOptions":{}})]}),new GridCellHead(id+":grid:head:f_val",{"value":"F","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("f_val"),"ctrlOptions":{"ctrlClass":EditInt}})]}),new GridCellHead(id+":grid:head:w_val",{"value":"W","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("w_val"),"ctrlOptions":{"ctrlClass":EditInt}})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":null,"rowSelect":false,"focus":true}));}
extend(ConcreteTypeList_View,ViewAjxList); 
function DestinationList_View(id,options){DestinationList_View.superclass.constructor.call(this,id,options);var model=options.models.DestinationList_Model;var contr=new Destination_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":Destination_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:distance",{"value":"Расстояние","columns":[new GridColumn({"field":model.getField("distance")})]}),new GridCellHead(id+":grid:head:time_route",{"value":"Время в пути","columns":[new GridColumnTime({"field":model.getField("time_route"),"dateFormat":"H:i"})]}),new GridCellHead(id+":grid:head:price",{"value":"Стоимость доставки","columns":[new GridColumn({"field":model.getField("price"),"formatFunction":function(f){var res=parseFloat(f.price.getValue()).toFixed(2);if(f.special_price.getValue()){res+=" (!)";}
return res;}})]}),new GridCellHead(id+":grid:head:price_for_driver",{"value":"Цена для водителей","columns":[new GridColumn({"field":model.getField("price_for_driver"),"formatFunction":function(f){var res=parseFloat(f.price_for_driver.getValue()).toFixed(2);if(f.special_price.getValue()){res+=" (!)";}
return res;}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(DestinationList_View,ViewAjxList); 
function DestinationDialog_View(id,options){options=options||{};options.controller=new Destination_Controller();options.model=options.models.DestinationDialog_Model;var self=this;options.addElement=function(){this.addElement(new DestinationSearchEdit(id+":name",{"labelCaption":"Наименование:","required":true,"value":(options.defDialogValues&&options.defDialogValues["name"])?options.defDialogValues["name"]:""}));this.addElement(new EditFloat(id+":distance",{"labelCaption":"Расстояние (км.):","editContClassName":"input-group "+window.getBsCol(4)}));this.addElement(new EditTime(id+":time_route",{"labelCaption":"Время в пути (часы):","editContClassName":"input-group "+window.getBsCol(4)}));this.addElement(new EditFloatPeriodValue(id+":price",{"labelCaption":"Стоимость доставки (все базы):","editContClassName":"input-group "+window.getBsCol(4),"periodOptions":{"formCaption":"История цен стоимость доставки","valueType":"destination_price","gridClass":GridColumnFloat,"gridOptions":{"precision":2},"ctrlClass":EditMoney,"key":function(){return self.getElement("id").getValue();}}}));this.addElement(new EditFloatPeriodValue(id+":price_for_driver",{"labelCaption":"Специальная цена для водителя:","editContClassName":"input-group "+window.getBsCol(4),"periodOptions":{"formCaption":"История цен стоимость доставки для водителя","valueType":"destination_price_for_driver","gridClass":GridColumnFloat,"gridOptions":{"precision":2},"ctrlClass":EditMoney,"key":function(){return self.getElement("id").getValue();}}}));this.addElement(new DestinationProdBasePriceList_View(id+":production_base_price_list",{"detail":true}));this.addElement(new DestinationProdBaseDriverPriceList_View(id+":production_base_driver_price_list",{"detail":true}));this.addElement(new EditCheckBox(id+":special_price",{"labelCaption":"Специальная цена:","title":"Разрешить для объекта использовать специальную цену (не по прайсу)","labelClassName":"control-label "+window.getBsCol(3),"events":{"change":function(){self.setPriceEnabled();}}}));this.addElement(new EditCheckBox(id+":send_route_sms",{"labelCaption":"Отправлять СМС с маршрутом:","labelClassName":"control-label "+window.getBsCol(3),"value":true}));this.addElement(new ButtonCmd(id+":cmdFindOnMap",{"caption":" Найти по адресу ","title":"Построить зону, проложить маршрут по адресу","glyph":"glyphicon-search","onClick":function(){self.findOnMap();}}));this.addElement(new ButtonCmd(id+":cmdMakeRoute",{"caption":" Проложить маршрут ","title":"Проложить маршрут от производства до зоны объекта","glyph":"glyphicon-road","onClick":function(){self.makeRouteToZone();}}));this.addElement(new ZoneDrawingControl(id+":map_controls",{"onDeleteZone":function(){if(self.m_routeLayers&&self.m_routeLayers.length){for(var i=0;i<self.m_routeLayers.length;i++){self.m_map.removeLayer(self.m_routeLayers[i]);delete self.m_routeLayers[i];}}}}));}
DestinationDialog_View.superclass.constructor.call(this,id,options);var r_bd=[new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("distance")}),new DataBinding({"control":this.getElement("time_route")}),new DataBinding({"control":this.getElement("price")}),new DataBinding({"control":this.getElement("special_price")}),new DataBinding({"control":this.getElement("send_route_sms")}),new DataBinding({"control":this.getElement("price_for_driver")})];this.setDataBindings(r_bd);this.setWriteBindings([new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("distance")}),new CommandBinding({"control":this.getElement("time_route")}),new CommandBinding({"control":this.getElement("send_route_sms")}),new CommandBinding({"control":this.getElement("special_price")})]);this.addDetailDataSet({"control":this.getElement("production_base_price_list").getElement("grid"),"controlFieldId":"destination_id","field":this.m_model.getField("id")});this.addDetailDataSet({"control":this.getElement("production_base_driver_price_list").getElement("grid"),"controlFieldId":"destination_id","field":this.m_model.getField("id")});}
extend(DestinationDialog_View,ViewObjectAjx);DestinationDialog_View.prototype.PAM_DIV_ID="mapdiv";DestinationDialog_View.prototype.setPriceEnabled=function(resp,cmd){var price_en=this.getElement("special_price").getValue();var ctrl=this.getElement("price");if(ctrl.getEnabled()!=price_en){ctrl.setEnabled(price_en);ctrl.setAttr("title",price_en?"Специальная цена, не по прайсу":"Цена согласно прайса");}}
DestinationDialog_View.prototype.onGetData=function(resp,cmd){DestinationDialog_View.superclass.onGetData.call(this,resp,cmd);this.setPriceEnabled();}
DestinationDialog_View.prototype.getModified=function(){var v=DestinationDialog_View.superclass.getModified.call(this);if(v){return true;}
return(this.getController().getPublicMethod("update").getField("zone").isSet()&&this.getController().getPublicMethod("insert").getField("zone").isSet());}
DestinationDialog_View.prototype.updateZone=function(zoneStr){this.getController().getPublicMethod("update").setFieldValue("zone",zoneStr);this.getController().getPublicMethod("insert").setFieldValue("zone",zoneStr);}
DestinationDialog_View.prototype.makeRouteToZoneCont=function(model){if(this.m_routeLayers!=undefined&&this.m_routeLayers.length){for(var i=0;i<this.m_routeLayers.length;i++){this.m_map.removeLayer(this.m_routeLayers[i]);delete this.m_routeLayers[i];}}
this.m_routeLayers=[];var constants={"base_geo_zone_id":null};window.getApp().getConstantManager().get(constants);let base_zone_id=constants.base_geo_zone_id.getValue();var min_dist=0;var routes=CommonHelper.unserialize(model.getFieldValue("routes"));for(var id in routes){var b_zone_points=routes[id]?routes[id].zone_str.split(" ").join(",").split(","):[];try{this.m_zones.setDrawComplete(null,null);this.m_zones.drawZoneOnCoords(b_zone_points);}finally{this.m_zones.setDrawComplete(this.drawComplete,this);}
if(!routes[id].route||routes[id].route.code!="Ok"||!routes[id].route.routes||!routes[id].route.routes.length){throw new Error("Ошибка получения данных!");}
var route=routes[id].route;if(id==base_zone_id){min_dist=Math.round(route.routes[0].distance/1000);}
var route_descr=routes[id]["name"]+" - "+route.waypoints[1]["name"];var geom_str=route.routes[0].geometry.replace(/\\\\/g,"\\");var points=decodeLine(geom_str);var route_layer=new OpenLayers.Layer.Vector(route_descr);this.m_routeLayers.push(route_layer);var map_features=[];this.m_zones.addLineFromPoints(map_features,points,{strokeColor:"#0074FF",strokeWidth:4,pointRadius:6,pointerEvents:"visiblePainted"});var center_pt=routes[id].zone_center_str.split(" ").join(",").split(",");var style_mark=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style['default']);style_mark.externalGraphic="./img/marker-blue.png";style_mark.graphicHeight=25;style_mark.graphicWidth=21;style_mark.graphicTitle=route.waypoints[0]["name"];style_mark.fillOpacity=1;style_mark.cursor='pointer';style_mark.labelXOffset=7;style_mark.labelYOffset=7;style_mark.fontSize='8px';map_features.push(new OpenLayers.Feature.Vector(this.m_zones.getMapPoint(center_pt[0],center_pt[1]),null,style_mark));var style_mark=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style['default']);style_mark.externalGraphic="./img/marker-blue.png";style_mark.graphicHeight=25;style_mark.graphicWidth=21;style_mark.graphicTitle=route.waypoints[1]["name"];style_mark.fillOpacity=1;style_mark.cursor='pointer';style_mark.labelXOffset=7;style_mark.labelYOffset=7;style_mark.fontSize='8px';map_features.push(new OpenLayers.Feature.Vector(this.m_zones.getMapPoint(model.getFieldValue("road_lon_pos"),model.getFieldValue("road_lat_pos")),null,style_mark));route_layer.addFeatures(map_features);this.m_map.addLayer(route_layer);window.showTempNote("Проложен маршрут до объекта",null,5000);}
this.getElement("distance").setValue(min_dist);}
DestinationDialog_View.prototype.makeRouteToZone=function(){var zone_coords=this.getController().getPublicMethod("update").getFieldValue("zone");if(!zone_coords||!zone_coords.length){zone_coords=this.getModel().getFieldValue("zone_str");if(!zone_coords||!zone_coords.length){return;}}
var pm=(new Destination_Controller()).getPublicMethod("get_route_to_zone");pm.setFieldValue("zone_coords",zone_coords);var self=this;pm.run({"ok":function(resp){var model=resp.getModel("Coords_Model");if(model.getNextRow()){self.makeRouteToZoneCont(resp.getModel("Coords_Model"));}}})}
DestinationDialog_View.prototype.findOnMapCont=function(model){if(model.getNextRow()){var lon_lower=model.getFieldValue("lon_lower");var lat_lower=model.getFieldValue("lat_lower");var lon_upper=model.getFieldValue("lon_upper");var lat_upper=model.getFieldValue("lat_upper");var zone_str=lon_lower+" "+lat_lower+","+
lon_lower+" "+lat_upper+","+
lon_upper+" "+lat_upper+","+
lon_upper+" "+lat_lower+","+
lon_lower+" "+lat_lower;zone_str=zone_str.split(" ").join(",");var zone_points=zone_str.split(",");this.m_zones.drawZoneOnCoords(zone_points);this.makeRouteToZoneCont(model);var move_lon=lon_lower+(lon_upper-lon_lower)/2;var move_lat=lat_lower+(lat_upper-lat_lower)/2;this.m_zones.moveMapToCoords(move_lon,move_lat,TRACK_CONSTANTS.FOUND_ZOOM);window.showTempNote("Построена зона по адресу",null,5000);}}
DestinationDialog_View.prototype.findOnMap=function(){var ctrl=this.getElement("name");if(ctrl.isNull())return;var pm=(new Destination_Controller()).getPublicMethod("get_coords_on_name");pm.setFieldValue("name",ctrl.getValue());var self=this;pm.run({"ok":function(resp){self.findOnMapCont(resp.getModel("Coords_Model"));}})}
DestinationDialog_View.prototype.toDOM=function(parent){DestinationDialog_View.superclass.toDOM.call(this,parent);this.m_map=new OpenLayers.Map("map",{"controls":[]});this.m_layer=new OpenLayers.Layer.OSM();this.m_map.addLayer(this.m_layer);var zoom_bar=new OpenLayers.Control.PanZoomBar();this.m_map.addControl(zoom_bar);this.m_map.addControl(new OpenLayers.Control.LayerSwitcher());this.m_map.addControl(new OpenLayers.Control.ScaleLine());this.m_map.addControl(new OpenLayers.Control.Navigation());var zone_str=this.getModel().getFieldValue("zone_str");var zone_points=[];if(zone_str){zone_str=zone_str.split(" ").join(",");zone_points=zone_str.split(",");zone_points.splice(zone_points.length-2,2);}
this.m_zones=new GeoZones(this.m_map,"Объект",zone_points,true);this.getElement("map_controls").setZones(this.m_zones);this.m_zones.setDrawComplete(this.drawComplete,this);var zone_center=this.getModel().getFieldValue("zone_center_str");var zone_center_ar=zone_center?zone_center.split(" "):null;if(zone_center_ar&&zone_center_ar.length>=2){move_lon=zone_center_ar[0];move_lat=zone_center_ar[1];zoom=TRACK_CONSTANTS.FOUND_ZOOM;}
else{var constants={"map_default_lon":null,"map_default_lat":null};window.getApp().getConstantManager().get(constants);move_lon=NMEAStrToDegree(constants.map_default_lon.getValue());move_lat=NMEAStrToDegree(constants.map_default_lat.getValue());zoom=TRACK_CONSTANTS.INI_ZOOM;}
this.m_zones.moveMapToCoords(move_lon,move_lat,zoom);}
DestinationDialog_View.prototype.drawComplete=function(coordsStr){this.updateZone(coordsStr);} 
function PumpVehicleList_View(id,options){PumpVehicleList_View.superclass.constructor.call(this,id,options);var model=options.models.PumpVehicleList_Model;var contr=new PumpVehicle_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var is_v_owner=(window.getApp().getServVar("role_id")=="vehicle_owner");var filters={"make":{"binding":new CommandBinding({"control":new MakeEdit(id+":filter-ctrl-make",{"contClassName":"form-group-filter"}),"field":new FieldString("make")}),"sign":"e"},"owner":{"binding":new CommandBinding({"control":new VehicleOwnerEdit(id+":filter-ctrl-owner",{"contClassName":"form-group-filter"}),"field":new FieldInt("vehicle_owner_id")}),"sign":"e"},"feature":{"binding":new CommandBinding({"control":new FeatureEdit(id+":filter-ctrl-feature",{"contClassName":"form-group-filter"}),"field":new FieldString("feature")}),"sign":"e"},"deleted":{"binding":new CommandBinding({"control":new EditSwitcher(id+":filter-ctrl-deleted",{"labelCaption":"Не показывать удаленные:","contClassName":"form-group-filter","checked":false}),"field":new FieldBool("deleted")}),"sign":"ne","falseValueNoFilter":true}}
var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":PumpVehicle_Form,"onEventSetRowOptions":function(rowOpts){if(this.getModel().getFieldValue("deleted")){rowOpts.attrs=rowOpts.attrs||{};rowOpts.attrs["class"]=rowOpts.attrs["class"]||"";rowOpts.attrs["class"]+=rowOpts.attrs["class"]==""?"":" ";rowOpts.attrs["class"]+="deleted_row";rowOpts.attrs.title="Элемент удален";}},"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage,"cmdDelete":!is_v_owner,"cmdInsert":!is_v_owner,"cmdCopy":!is_v_owner,"cmdEdit":!is_v_owner,"addCustomCommandsAfter":is_v_owner?null:function(commands){commands.push(new SendNotificationCmd(id+":grid:cmd:sendNotif",{"showCmdControl":true,"entityType":"pump_vehicles","getEntityId":function(){return model.getFieldValue("id");}}));}}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:pump_vehicles_ref",{"value":"Автомобиль","colAttrs":{"align":"center"},"columns":[new GridColumnRef({"field":model.getField("pump_vehicles_ref"),"ctrlClass":VehicleEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"vehicle_id"})]}),is_v_owner?null:new GridCellHead(id+":grid:head:vehicle_owner",{"value":"Владелец","columns":[new GridColumnRef({"field":model.getField("vehicle_owners_ref"),"ctrlClass":VehicleOwnerEdit,"ctrlOptions":{"labelCaption":"","enabled":false}})],"sortable":true}),is_v_owner?null:new GridCellHead(id+":grid:head:pump_prices",{"value":"Ценовые схемы","columns":[new GridColumn({"field":model.getField("pump_prices"),"formatFunction":function(fields){var res="";var v=fields.pump_prices.getValue();if(v&&v.rows){for(var j=0;j<v.rows.length;j++){res+=(res=="")?"":", ";res+=v.rows[j].fields.pump_price.getDescr();}}
return res;},"ctrlClass":PumpVehiclePriceListGrid,"ctrlOptions":{"labelCaption":"","contTagName":"TD"},"ctrlBindFieldId":"pump_prices"})]}),new GridCellHead(id+":grid:head:pump_length",{"value":"Длина подачи","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("pump_length"),"ctrlClass":EditInt,"ctrlOptions":{"labelCaption":""}})]}),is_v_owner?null:new GridCellHead(id+":grid:head:min_order_quant",{"value":"Мин.кол-во","colAttrs":{"align":"center","title":"Минимальное кол-во м3 в заявке."},"columns":[new GridColumn({"field":model.getField("min_order_quant"),"ctrlClass":EditFloat,"ctrlOptions":{"precision":"2","labelCaption":""}})]}),is_v_owner?null:new GridCellHead(id+":grid:head:min_order_time_interval",{"value":"Мин.интервал","colAttrs":{"align":"center","title":"Минимальный интервал между заявками."},"columns":[new GridColumn({"field":model.getField("min_order_time_interval"),"ctrlClass":EditTime,"ctrlOptions":{"labelCaption":""}})]}),is_v_owner?null:new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text"),"ctrlClass":EditString,"ctrlBindFieldId":"comment_text","ctrlOptions":{"maxLength":"100"}})]}),is_v_owner?null:new GridCellHead(id+":grid:head:specialist_inform",{"value":"Инф.спец.","colAttrs":{"align":"center"},"columns":[new GridColumnBool({"field":model.getField("specialist_inform"),"showFalse":true,"ctrlClass":EditCheckBox,"ctrlOptions":{"value":true},"ctrlBindFieldId":"specialist_inform"})]}),new GridCellHead(id+":grid:head:contact_ids",{"value":"Контакты","columns":[new GridColumn({"field":model.getField("contact_ids"),"formatFunction":function(f,cell){window.getApp().formatContactList(f,cell);return"";},"ctrlClass":ContactEdit,"searchOptions":{"searchType":"on_match","typeChange":false,"condSign":"any"}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":null,"rowSelect":false,"focus":true}));}
extend(PumpVehicleList_View,ViewAjxList);PumpVehicleList_View.prototype.sendNotification=function(model,callBack){var pm=(new PumpVehicle_Controller()).getPublicMethod("get_contact_refs");pm.setFieldValue("id",model.getFieldValue("id"));var self=this;pm.run({"ok":function(resp){var m=resp.getModel("Ref_Model");if(m){var el=[];while(m.getNextRow()){var ref=CommonHelper.unserialize(m.getFieldValue("ref"));el.push({"id":CommonHelper.uniqid(),"onClick":(function(id,descr,callBack){return function(){callBack(new RefType({"dataType":"client_tels","descr":descr,"keys":{"id":id}}));}})(ref.m_keys.id,ref.m_descr,callBack),"caption":ref.m_descr});}
if(el.length>1){var row_n=self.getElement("grid").getSelectedRow();(new PopUpMenu({"elements":el})).show(null,row_n);}else if(el.length==1){el[0].onClick();}}}})} 
function PumpVehicleDialog_View(id,options){options=options||{};options.controller=new PumpVehicle_Controller();options.model=options.models.PumpVehicleList_Model;let min_vals_enabled=window.getApp().controlePumpVehicle();options.addElement=function(){this.addElement(new VehicleEdit(id+":pump_vehicles_ref",{}));this.addElement(new VehicleOwnerEdit(id+":vehicle_owners_ref",{}));this.addElement(new PumpVehiclePriceListGrid(id+":pump_prices",{}));this.addElement(new EditInt(id+":pump_length",{"labelCaption":"Длина подачи:"}));this.addElement(new EditString(id+":comment_text",{"labelCaption":"Комметарий:","maxLength":100}));this.addElement(new EditSwitcher(id+":deleted",{"labelCaption":"Удален:","title":"Признак активности данной карточки"}));this.addElement(new EditSwitcher(id+":specialist_inform",{"labelCaption":"Информировать специалиста:","title":"Если установлен, специалист будет получать уведомления"}));this.addElement(new EditSwitcher(id+":driver_ship_inform",{"labelCaption":"Информировать водителя (отгрузка):","title":"Если установлен, водитель будет получать уведомления при отгрузке"}));this.addElement(new EditFloat(id+":min_order_quant",{"precision":2,"labelCaption":"Мин. кол-во для заявки, м3:","title":"При выборе данного насоса в заявку будет контролироваться количество по заявке. Если количество по заявке меньше минимального, заявка не будет поставлена.","enabled":!min_vals_enabled}));this.addElement(new EditInterval(id+":min_order_time_interval",{"labelCaption":"Мин. время между заявками:","editMask":"99:99","title":"При выборе данного насоса в заявку будет контролироваться временной интервал между другими заявками с этим насосом. Если временной интервал меньше заданного, заявка не будет поставлена.","enabled":!min_vals_enabled}));this.addElement(new EntityContactList_View(id+":contacts_list",{"detail":true}));}
PumpVehicleDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("pump_vehicles_ref"),"fieldId":"pump_vehicles_ref"}),new DataBinding({"control":this.getElement("vehicle_owners_ref"),"fieldId":"vehicle_owners_ref"}),new DataBinding({"control":this.getElement("pump_length")}),new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("deleted")}),new DataBinding({"control":this.getElement("specialist_inform")}),new DataBinding({"control":this.getElement("driver_ship_inform")}),new DataBinding({"control":this.getElement("min_order_quant")}),new DataBinding({"control":this.getElement("min_order_time_interval")}),new DataBinding({"control":this.getElement("pump_prices")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("pump_vehicles_ref"),"fieldId":"vehicle_id"}),new CommandBinding({"control":this.getElement("pump_length")}),new CommandBinding({"control":this.getElement("comment_text")}),new CommandBinding({"control":this.getElement("deleted")}),new CommandBinding({"control":this.getElement("specialist_inform")}),new CommandBinding({"control":this.getElement("driver_ship_inform")}),new CommandBinding({"control":this.getElement("min_order_quant")}),new CommandBinding({"control":this.getElement("min_order_time_interval")}),new CommandBinding({"control":this.getElement("pump_prices"),"fieldId":"pump_prices"})]);var self=this;this.addDetailDataSet({"control":this.getElement("contacts_list").getElement("grid"),"controlFieldId":["entity_type","entity_id"],"value":["pump_vehicles",function(){return self.m_model.getFieldValue("id");}]});}
extend(PumpVehicleDialog_View,ViewObjectAjx); 
function PumpPriceList_View(id,options){PumpPriceList_View.superclass.constructor.call(this,id,options);var model=options.models.PumpPrice_Model;var contr=new PumpPrice_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name"),"master":true,"detailViewClass":PumpPriceValueList_View,"detailViewOptions":{"detailFilters":{"PumpPriceValue_Model":[{"masterFieldId":"id","field":"pump_price_id","sign":"e","val":"0"}]}}})],"sortable":true,"sort":"asc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":null,"rowSelect":false,"focus":true}));}
extend(PumpPriceList_View,ViewAjxList); 
function PumpPriceValueList_View(id,options){PumpPriceValueList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.PumpPriceValue_Model)?options.models.PumpPriceValue_Model:new PumpPriceValue_Model();var contr=options.controller||new PumpPriceValue_Controller();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdSearch":false}),"filters":(options.detailFilters&&options.detailFilters.PumpPriceValue_Model)?options.detailFilters.PumpPriceValue_Model:null,"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:quant_from",{"value":"м3 от","columns":[new GridColumn({"field":model.getField("quant_from"),"ctrlClass":EditFloat,"ctrlOptions":{"labelCaption":""}})],"sort":"asc"}),new GridCellHead(id+":grid:head:quant_to",{"value":"м3 до","columns":[new GridColumn({"field":model.getField("quant_to"),"ctrlClass":EditFloat,"ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:price_m",{"value":"Цена/м3","columns":[new GridColumn({"field":model.getField("price_m"),"ctrlClass":EditMoney,"ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:price_fixed",{"value":"Фикс.сумма","columns":[new GridColumn({"field":model.getField("price_fixed"),"ctrlClass":EditMoney,"ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:price_garanteed",{"value":"Гарантированная сумма","columns":[new GridColumnBool({"field":model.getField("price_garanteed"),"ctrlClass":EditCheckBox,"ctrlOptions":{"showFalse":false}})]})]})]}),"pagination":null,"autoRefresh":options.detailFilters?true:false,"refreshInterval":null,"rowSelect":false,"focus":true}));}
extend(PumpPriceValueList_View,ViewAjxList); 
function VehicleScheduleMakeOrderList_View(id,options){var model=options.models.VehicleScheduleMakeOrderList_Model;var contr=new VehicleSchedule_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var self=this;options.addElement=function(){var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var grid=new GridAjx(id+":grid",{"className":"table table-bordered table-responsive","model":model,"readPublicMethod":contr.getPublicMethod("get_current_veh_list"),"editInline":false,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdFilter":false,"cmdSearch":false,"filters":null,"variantStorage":null}),"onEventSetRowOptions":function(opts){opts.className=opts.className||"";var m=this.getModel();var veh_state=m.getFieldValue("state");opts.className+=(opts.className.length?" ":"")+"veh_in_make_list";if(m.getFieldValue("is_late")){opts.className+=(opts.className.length?" ":"")+"veh_late";}
else{opts.className+=(opts.className.length?" ":"")+"veh_"+veh_state;}
if(m.getFieldValue("is_late_at_dest")){opts.className+=(opts.className.length?" ":"")+"veh_late_at_dest";}
if(veh_state=="shift"){opts.className+=(opts.className.length?" ":"")+"veh_shift";}},"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:schedule_date",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("schedule_date")})]}),new GridCellHead(id+":grid:head:vehicles_ref",{"value":"ТС","columns":[new GridColumnRef({"field":model.getField("vehicles_ref"),"ctrlClass":VehicleEdit,"searchOptions":{"field":new FieldInt("vehicle_id"),"searchType":"on_match"}})]}),new GridCellHead(id+":grid:head:drivers_ref",{"value":"Водитель","columns":[new GridColumn({"field":model.getField("drivers_ref"),"ctrlClass":DriverEditRef,"searchOptions":{"field":new FieldInt("driver_id"),"searchType":"on_match"},"formatFunction":function(fields,cell){return window.getApp().formatCell(fields.drivers_ref,cell,self.COL_DRIVER_LEN);}})]}),new GridCellHead(id+":grid:head:vehicle_owners_ref",{"value":"Владелец ТС","columns":[new GridColumnRef({"field":model.getField("vehicle_owners_ref"),"formatFunction":function(fields,cell){return window.getApp().formatCell(fields.vehicle_owners_ref,cell,self.COL_OWNER_LEN);}})]}),new GridCellHead(id+":grid:head:load_capacity",{"value":"Груз.","columns":[new GridColumn({"field":model.getField("load_capacity")})]}),new GridCellHead(id+":grid:head:state",{"value":"Сост.","columns":[new EnumGridColumn_vehicle_states({"field":model.getField("state")})]})]})]}),"selectedRowClass":"order_current_row","pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});this.addElement(grid);}
VehicleScheduleMakeOrderList_View.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleMakeOrderList_View,ViewAjxList);VehicleScheduleMakeOrderList_View.prototype.COL_DRIVER_LEN=6;VehicleScheduleMakeOrderList_View.prototype.COL_OWNER_LEN=6;VehicleScheduleMakeOrderList_View.prototype.COL_DEST_LEN=8; 
function RawMaterialList_View(id,options){options=options||{};var model=options.models.RawMaterial_Model;var contr=new RawMaterial_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var self=this;options.addElement=function(){var pagClass=window.getApp().getPaginationClass();var grid=new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":RawMaterial_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"popUpMenu":new PopUpMenu(),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name"),"ctrlOptions":{"maxLength":100}})]}),new GridCellHead(id+":grid:head:min_end_quant",{"value":"Мин.ост,тонн","columns":[new GridColumn({"field":model.getField("min_end_quant"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:max_fact_quant_tolerance_percent",{"value":"% отклонения от подборов","columns":[new GridColumnFloat({"field":model.getField("max_fact_quant_tolerance_percent"),"ctrlClass":EditFloat,"ctrlOptions":{"precision":"2"}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});this.addElement(grid);}
RawMaterialList_View.superclass.constructor.call(this,id,options);}
extend(RawMaterialList_View,ViewAjxList); 
function RawMaterialDialog_View(id,options){options=options||{};options.controller=new RawMaterial_Controller();options.model=options.models.RawMaterial_Model;options.addElement=function(){this.addElement(new EditString(id+":name",{"labelCaption":"Наименование:","required":true,"length":"100","focus":true}));this.addElement(new EditNum(id+":ord",{"labelCaption":"Порядок сортировки:","required":true}));this.addElement(new EditCheckBox(id+":concrete_part",{"labelCaption":"Используется для бетона:"}));this.addElement(new EditCheckBox(id+":is_cement",{"labelCaption":"Учитывать в силосе:"}));this.addElement(new EditCheckBox(id+":dif_store",{"labelCaption":"Учитывать по местам хранения:"}));this.addElement(new EditNum(id+":max_fact_quant_tolerance_percent",{"labelCaption":"Максимальный % отклонения от подборов:"}));this.addElement(new EditFloat(id+":min_end_quant",{"labelCaption":"Минимальный остаток,тонн:","precision":"4"}));this.addElement(new EditNum(id+":store_days",{"labelCaption":"Запас дней:"}));this.addElement(new EditFloat(id+":supply_volume",{"labelCaption":"Объем транспортного средства завоза:","precision":"4"}));this.addElement(new EditNum(id+":supply_days_count",{"labelCaption":"Количество дней завоза:"}));this.addElement(new RawMaterialPriceList_View(id+":price_list",{"detail":true}));this.addElement(new RawMaterialPriceForNormList_View(id+":price_for_norm_list",{"detail":true}));this.addElement(new RawMaterialProcurRateList_View(id+":procure_rate_list",{"detail":true}));}
RawMaterialDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("ord")}),new DataBinding({"control":this.getElement("concrete_part")}),new DataBinding({"control":this.getElement("is_cement")}),new DataBinding({"control":this.getElement("dif_store")}),new DataBinding({"control":this.getElement("max_fact_quant_tolerance_percent")}),new DataBinding({"control":this.getElement("min_end_quant")}),new DataBinding({"control":this.getElement("store_days")}),new DataBinding({"control":this.getElement("supply_volume")}),new DataBinding({"control":this.getElement("supply_days_count")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("ord")}),new CommandBinding({"control":this.getElement("concrete_part")}),new CommandBinding({"control":this.getElement("is_cement")}),new CommandBinding({"control":this.getElement("dif_store")}),new CommandBinding({"control":this.getElement("max_fact_quant_tolerance_percent")}),new CommandBinding({"control":this.getElement("min_end_quant")}),new CommandBinding({"control":this.getElement("store_days")}),new CommandBinding({"control":this.getElement("supply_volume")}),new CommandBinding({"control":this.getElement("supply_days_count")})]);this.addDetailDataSet({"control":this.getElement("price_list").getElement("grid"),"controlFieldId":"raw_material_id","fieldId":"id"});this.addDetailDataSet({"control":this.getElement("price_for_norm_list").getElement("grid"),"controlFieldId":"raw_material_id","fieldId":"id"});this.addDetailDataSet({"control":this.getElement("procure_rate_list").getElement("grid"),"controlFieldId":"material_id","fieldId":"id"});}
extend(RawMaterialDialog_View,ViewObjectAjx); 
function RawMaterialProcurUpload_View(id,options){options=options||{};var model=options.models.RawMaterialProcurUpload_Model;var contr=new RawMaterialProcurUpload_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var self=this;var is_admin=(window.getApp().getServVar("role_id")=="owner");options.addElement=function(){var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};var pagClass=window.getApp().getPaginationClass();var grid=new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":VehicleScheduleDialog_Form,"insertViewOptions":function(){return{"schedule_date":self.getElement("schedule_date").getDateFrom()};},"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":is_admin,"cmdEdit":is_admin,"cmdCopy":false,"cmdFilter":true,"cmdSearch":false,"filters":filters,"variantStorage":null}),"popUpMenu":null,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:schedule_date",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("schedule_date")})]}),new GridCellHead(id+":grid:head:doc_count",{"value":"Кол-во документов","columns":[new GridColumn({"field":model.getField("doc_count")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});this.addElement(grid);per_select.setGrid(grid);}
RawMaterialProcurUpload_View.superclass.constructor.call(this,id,options);}
extend(RawMaterialProcurUpload_View,ViewAjxList); 
function RawMaterialProcurRateList_View(id,options){options=options||{};var model=(options.models&&options.models.RawMaterialProcurRateList_Model)?options.models.RawMaterialProcurRateList_Model:new RawMaterialProcurRateList_Model();var contr=new RawMaterialProcurRate_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var self=this;options.addElement=function(){var pagClass=window.getApp().getPaginationClass();var grid=new GridAjx(id+":grid",{"model":model,"keyIds":["material_id","supplier_id"],"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdSearch":false,"cmdFilter":false,"cmdAllCommands":false}),"filters":(options.detailFilters&&options.detailFilters.RawMaterialProcurRateList_Model)?options.detailFilters.RawMaterialProcurRateList_Model:null,"popUpMenu":new PopUpMenu(),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:supplier_descr",{"value":"Поставщик","columns":[new GridColumn({"field":model.getField("supplier_descr"),"ctrlClass":SupplierEdit,"ctrlBindFieldId":"supplier_id","ctrlOptions":{"labelCaption":"","keyIds":["supplier_id"]}})]}),new GridCellHead(id+":grid:head:rate",{"value":"Доля","columns":[new GridColumn({"field":model.getField("rate"),"ctrlClass":EditFloat,"ctrlOptions":{}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});this.addElement(grid);}
RawMaterialProcurRateList_View.superclass.constructor.call(this,id,options);}
extend(RawMaterialProcurRateList_View,ViewAjxList); 
function Map_View(id,options){options=options||{};this.m_controller=new Vehicle_Controller();this.m_updateInterval=options.updateInterval||this.DEF_UPDATE_INTERVAL;this.m_paramVehicle=options.vehicle;this.m_paramTrackerId=options.tracker_id;this.m_paramValueFrom=options.valueFrom;this.m_paramValueTo=options.valueTo;stop_duration="00:05";var par_p=window.location.href.indexOf("?");if(par_p){var href_par=window.location.href.substring(par_p+1).split('&');var key_v;for(var i=0;i<href_par.length;i++){key_v=href_par[i].split('=');if(key_v&&key_v.length&&key_v.length==2){if(key_v[0]=='id'){this.m_paramVehicle=new RefType({"keys":{"id":key_v[1]},"descr":""});}
else if(key_v[0]=='tracker_id'){this.m_paramTrackerId=key_v[1];}
else if(key_v[0]=='from'||key_v[0]=='dt_from'){this.m_paramValueFrom=DateHelper.strtotime(key_v[1]);}
else if(key_v[0]=='to'||key_v[0]=='dt_to'){this.m_paramValueTo=DateHelper.strtotime(key_v[1]);}
else if(key_v[0]=='stop_duration'){stop_duration=key_v[1];}}}}
this.m_paramZone_Model=(options.models&&options.models.ZoneList_Model)?options.models.ZoneList_Model:null;this.m_paramCurrentPosition_Model=(options.models&&options.models.VehicleLastPos_Model)?options.models.VehicleLastPos_Model:null;this.m_paramTrack_Model=(options.models&&options.models.TrackData_Model)?options.models.TrackData_Model:null;this.m_paramRoute_Model=(options.models&&options.models.Route_Model)?options.models.Route_Model:null;var self=this;options.addElement=function(){var cl="input-group "+window.getBsCol(2);this.addElement(new VehicleSelect(id+":vehicle",{"addAll":true,"value":this.m_paramVehicle,"onSelect":function(fields){self.onSelectVehicle(fields.id.getValue(),fields.tracker_id.getValue());},"editContClassName":cl}));this.addElement(new ButtonCmd(id+":cmdFindVehicle",{"caption":"Найти ТС на карте","onClick":function(){var veh=self.getElement("vehicle").getValue();if(veh){var id=veh.getKey();if(self.m_vehicles.m_vehicles[id]){self.m_vehicles.setCurrentObj(id,TRACK_CONSTANTS.FOUND_ZOOM);}
else{self.refreshCurPosition(function(){self.m_vehicles.setCurrentObj(self.m_curTrackerId);});}}}}));this.addElement(new EditTime(id+":stop_duration",{"labelCaption":"Стоянки:","value":stop_duration,"editContClassName":cl}));this.addElement(new EditPeriodDateShift(id+":period",{"valueFrom":this.m_paramValueFrom,"valueTo":this.m_paramValueTo}));this.addElement(new ButtonCmd(id+":cmdBuildReport",{"caption":"Сформировать","onClick":function(){self.getTrack();}}));this.addElement(new ButtonCmd(id+":cmdDeleteReport",{"caption":"Удалить","onClick":function(){self.deleteReport();}}));this.addElement(new ButtonCmd(id+":cmdGoToStart",{"caption":"В начало","onClick":function(){self.goToStart();}}));this.addElement(new ButtonCmd(id+":cmdGoToEnd",{"caption":"В конец","onClick":function(){self.goToEnd();}}));this.addElement(new EditCheckBox(id+":cmdFollowVehicle",{"labelCaption":"Перемещать карту за ТС:","value":true,"events":{"change":function(e){self.setFollowVehicle(this.getValue());}}}));}
Map_View.superclass.constructor.call(this,id,options);}
extend(Map_View,View);Map_View.prototype.PAM_DIV_ID="mapdiv";Map_View.prototype.DEF_UPDATE_INTERVAL=30000;Map_View.prototype.m_layer;Map_View.prototype.m_curVehicleId;Map_View.prototype.m_interval;Map_View.prototype.m_controller;Map_View.prototype.m_updateInterval;Map_View.prototype.m_zone;Map_View.prototype.toDOM=function(parent){Map_View.superclass.toDOM.call(this,parent);this.m_map=new OpenLayers.Map("map",{"controls":[]});this.m_layer=new OpenLayers.Layer.OSM();this.m_map.addLayer(this.m_layer);var zoom_bar=new OpenLayers.Control.PanZoomBar();this.m_map.addControl(zoom_bar);this.m_map.addControl(new OpenLayers.Control.LayerSwitcher());this.m_map.addControl(new OpenLayers.Control.ScaleLine());this.m_map.addControl(new OpenLayers.Control.Navigation());this.m_vehicles=new VehicleLayer(this.m_map);var constants={"map_default_lon":null,"map_default_lat":null};window.getApp().getConstantManager().get(constants);this.m_vehicles.moveMapToCoords(NMEAStrToDegree(constants.map_default_lon.getValue()),NMEAStrToDegree(constants.map_default_lat.getValue()),TRACK_CONSTANTS.INI_ZOOM);if(this.m_paramVehicle&&(this.m_paramCurrentPosition_Model||this.m_paramTrack_Model||this.m_paramZone_Model||this.m_paramRoute_Model)){if(!this.m_paramTrackerId){this.m_paramTrackerId=this.getElement("vehicle").getModelRow().tracker_id.getValue();}
this.m_curVehicleId=this.m_paramVehicle.getKey();this.m_curTrackerId=this.m_paramTrackerId;if(this.m_paramZone_Model){this.addZones(this.m_paramZone_Model);}
if(this.m_paramTrack_Model){if(this.m_track==undefined){this.m_track=new TrackLayer(this.m_map);}
if(this.addTrackData(this.m_paramTrack_Model)<=1){this.moveToDefaultCoords();}}
if(this.m_paramCurrentPosition_Model){this.addPosData(this.m_paramCurrentPosition_Model);}
if(this.m_paramRoute_Model&&this.m_paramRoute_Model.getNextRow()){this.addGuessedRoute(this.m_paramRoute_Model.getFieldValue("route_rest"),"Построен маршрут");}
if(this.getElement("cmdFollowVehicle").getValue()){this.setFollowVehicle(true);}
this.m_vehicles.setCurrentObj(this.m_curVehicleId,TRACK_CONSTANTS.FOUND_ZOOM);}
else if(this.m_paramVehicle&&this.m_paramTrackerId&&!this.m_paramCurrentPosition_Model){this.onSelectVehicle(this.m_paramVehicle.getKey(),this.m_paramTrackerId);}
else{this.moveToDefaultCoords();}}
Map_View.prototype.moveToDefaultCoords=function(){var constants={"map_default_lon":null,"map_default_lat":null};window.getApp().getConstantManager().get(constants);this.m_vehicles.moveMapToCoords(NMEAStrToDegree(constants.map_default_lon.getValue()),NMEAStrToDegree(constants.map_default_lat.getValue()),TRACK_CONSTANTS.INI_ZOOM);}
Map_View.prototype.onSelectVehicle=function(vehicleId,trackerId){console.log("Map_View.prototype.onSelectVehicle")
this.setFollowVehicle(false);if(this.m_vehicles&&this.m_curVehicleId!=undefined){this.m_vehicles.removeAllVehicles();}
this.m_curVehicleId=vehicleId;this.m_curTrackerId=trackerId;this.refreshCurPosition();if(this.getElement("cmdFollowVehicle").getValue()){this.setFollowVehicle(true);}}
Map_View.prototype.setFollowVehicle=function(v){if(v){var self=this;if(window.getApp().getAppSrv()){this.subscribeToSrvEvents({"events":[{"id":"Vehicle.position."+this.m_curTrackerId},{"id":"Vehicle.route_redraw."+this.m_curTrackerId}],"onEvent":function(json){console.log("json=",json)
if(json.eventId&&json.eventId=="Vehicle.route_redraw."+self.m_curTrackerId){console.log("Redraw route!!!")
if(json.params.long_route_rest===true){self.fetchGuessedRoute("Маршрут перестроен");}else if(json.params.route_rest){self.addGuessedRoute(json.params.route_rest,"Маршрут перестроен");}}else{self.updateVehiclePosition({'id':self.m_curVehicleId,'pos_data':json.params});if(self.getElement("cmdFollowVehicle").getValue()){self.m_vehicles.setCurrentObj(self.m_curVehicleId,self.m_map.getZoom());}
if(json.params&&json.params.long_route_rest===true){self.fetchGuessedRoute(null);}else if(json.params&&json.params.route_rest){self.addGuessedRoute(json.params.route_rest,null);}}},"onSubscribed":function(){if(self.m_interval){clearInterval(self.m_interval);}},"onClose":function(message){self.startUpdateTimer();}});}
else{this.startUpdateTimer();}}
else if(window.getApp().getAppSrv()){this.unsubscribeFromSrvEvents();}
else if(this.m_interval){clearInterval(this.m_interval);this.m_interval=null;}}
Map_View.prototype.startUpdateTimer=function(){if(this.m_interval){clearInterval(this.m_interval);}
var self=this;this.m_interval=setInterval(function(){self.refreshCurPosition(function(){self.m_vehicles.setCurrentObj(self.m_curTrackerId);});},self.m_updateInterval);}
Map_View.prototype.deleteReport=function(){if(this.m_track!=undefined){this.m_track.removeLayer();delete this.m_track;}
if(this.m_zone!=undefined){this.m_zone.removeLayer();delete this.m_zone;}}
Map_View.prototype.goToStart=function(){if(this.m_track!=undefined){this.m_track.flyToStart();}}
Map_View.prototype.goToEnd=function(){if(this.m_track!=undefined){this.m_track.flyToEnd();}}
Map_View.prototype.refreshCurPosition=function(callBack){var self=this;var pm;if(!this.m_curVehicleId){pm=this.m_controller.getPublicMethod("get_current_position_all");}
else{pm=this.m_controller.getPublicMethod("get_current_position");pm.setFieldValue("id",this.m_curVehicleId)}
pm.run({"ok":function(resp){self.onGetPosData(resp,callBack);}});}
Map_View.prototype.getModelRow=function(model){var row={};for(var f_id in model.m_fields){row[f_id]=model.m_fields[f_id].getValue();}
return row;}
Map_View.prototype.updateVehiclePosition=function(rowStruc){var marker=new MapCarMarker(rowStruc);marker.image=TRACK_CONSTANTS.VEH_IMG;marker.imageScale=0.8;this.m_vehicles.removeVehicle(marker.id);this.m_vehicles.addVehicle(marker,null,true,false);}
Map_View.prototype.addPosData=function(model){while(model.getNextRow()){var r=this.getModelRow(model);r.pos_data=CommonHelper.unserialize(r.pos_data);this.updateVehiclePosition(r);}}
Map_View.prototype.onGetPosData=function(resp,callBack){var m;m=resp.getModel("VehicleLastPos_Model");if(m)
this.addPosData(m);m=resp.getModel("ZoneList_Model");if(m)
this.addZones(m);m=resp.getModel("Route_Model");if(m&&m.getNextRow()){this.addGuessedRoute(m.getFieldValue("route_rest"),"Построен маршрут");}
if(callBack)callBack();}
Map_View.prototype.addGuessedRoute=function(routeText,noteMsg){if(!routeText||!routeText.length){return;}
var route_line_style={strokeColor:"#0074FF",strokeWidth:4,pointRadius:6,pointerEvents:"visiblePainted"};var point_list=[];var lon_lat_ar=routeText.split(",");for(var i=0;i<lon_lat_ar.length;i++){var pos=lon_lat_ar[i].split(" ");point_list.push((new OpenLayers.Geometry.Point(pos[0],pos[1])).transform(new OpenLayers.Projection("EPSG:4326"),this.m_map.getProjectionObject()));}
var add_layer=false;if(this.m_guessedRouteLayer==undefined){this.m_guessedRouteLayer=new OpenLayers.Layer.Vector("Предполагаемый маршрут");add_layer=true;}else if(this.m_guessedRouteLayer.m_mapFeatures&&this.m_guessedRouteLayer.m_mapFeatures.length){this.m_guessedRouteLayer.removeFeatures(this.m_guessedRouteLayer.m_mapFeatures);}
this.m_guessedRouteLayer.m_mapFeatures=[new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(point_list),null,route_line_style)];this.m_guessedRouteLayer.addFeatures(this.m_guessedRouteLayer.m_mapFeatures);if(add_layer){this.m_map.addLayer(this.m_guessedRouteLayer);}
if(noteMsg){window.showTempNote(noteMsg,null,5000);}}
Map_View.prototype.fetchGuessedRoute=function(msg){var self=this;(window.getApp().getServConnector()).execRequest(true,null,true,function(error_n,error_s,resp){var m=resp.getModel("RouteRest_Model");if(m&&m.getNextRow()){self.addGuessedRoute(m.getFieldValue("route_rest"),msg);}},"application/json",null,"route/long_route_rest.php?"+this.m_curTrackerId);}
Map_View.prototype.addZones=function(model){if(this.m_zone==undefined){this.m_zone=new GeoZones(this.m_map,"Гео зоны");}
this.m_zone.deleteZone();var points;while(model.getNextRow()){var zone_str=model.getFieldValue("base_zone");if(zone_str){zone_str=zone_str.split(" ").join(",");var zone_points=zone_str.split(",");zone_points.splice(zone_points.length-2,2);this.m_zone.drawZoneOnCoords(zone_points);}
var zone_str=model.fieldExists("dest_zone")?model.getFieldValue("dest_zone"):null;if(zone_str){zone_str=zone_str.split(" ").join(",");var zone_points=zone_str.split(",");zone_points.splice(zone_points.length-2,2);this.m_zone.drawZoneOnCoords(zone_points);}}}
Map_View.prototype.getTrack=function(){var sel_veh_id=this.getElement("vehicle").getValue()?this.getElement("vehicle").getValue().getKey():0;if(sel_veh_id==0){return;}
if(this.m_track==undefined){this.m_track=new TrackLayer(this.m_map);}
var self=this;var pm=this.m_controller.getPublicMethod("get_track");pm.setFieldValue("id",sel_veh_id);pm.setFieldValue("dt_from",this.getElement("period").getControlFrom().getValue());pm.setFieldValue("dt_to",this.getElement("period").getControlTo().getValue());pm.setFieldValue("stop_dur",this.getElement("stop_duration").getValue());window.setGlobalWait(true);pm.run({"ok":function(resp){self.onGetTrackData(resp);},"all":function(){window.setGlobalWait(false);}})}
Map_View.prototype.addTrackData=function(model){var markers=[];var marker,ind,r;var x_max=0,x_min=9999,y_max=0,y_min=9999;ind=1;while(model.getNextRow()){r=this.getModelRow(model);r.pos_data=CommonHelper.unserialize(r.pos_data);if(r.pos_data.speed==0){marker=new MapStopMarker(r);}
else{marker=new MapMoveMarker(r);}
marker.ordNumber=ind;marker.sensorEngPresent=true;markers.push(marker);x_max=(x_max<marker.pos_data.lon)?marker.pos_data.lon:x_max;x_min=(x_min>marker.pos_data.lon)?marker.pos_data.lon:x_min;y_max=(y_max<marker.pos_data.lat)?marker.pos_data.lat:y_max;y_min=(y_min>marker.pos_data.lat)?marker.pos_data.lat:y_min;ind++;}
this.m_track.addMarkers(markers);this.m_track.zoomToCenter(x_max,x_min,y_max,y_min);return ind;}
Map_View.prototype.onGetTrackData=function(resp){var m;m=resp.getModel("ZoneList_Model");if(m)
this.addZones(m);m=resp.getModel("TrackData_Model");if(m)
this.addTrackData(m);} 
function VehicleStopsReport_View(id,options){options=options||{};var contr=new Vehicle_Controller();options.publicMethod=contr.getPublicMethod("get_stops_at_dest");options.reportViewId="ViewHTMLXSLT";options.templateId="VehicleStopsReport";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDate("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"destination":{"binding":new CommandBinding({"control":new DestinationEdit(id+":filter-ctrl-destination",{"contClassName":"form-group-filter"}),"field":new FieldInt("destination_id")}),"sign":"e"},"vehicle":{"binding":new CommandBinding({"control":new VehicleEdit(id+":filter-ctrl-vehicle",{"contClassName":"form-group-filter"}),"field":new FieldInt("vehicle_id")}),"sign":"e"},"stop_duration":{"binding":new CommandBinding({"control":new EditTime(id+":filter-ctrl-stop_duration",{"labelCaption":"Стоянка:","contClassName":"form-group-filter","value":"00:05"}),"field":new FieldTime("stop_dur")}),"sign":"e"}};VehicleStopsReport_View.superclass.constructor.call(this,id,options);}
extend(VehicleStopsReport_View,ViewReport); 
function VehicleScheduleReportAll_View(id,options){options=options||{};options.publicMethod=(new VehicleSchedule_Controller()).getPublicMethod("get_schedule_report_all");options.reportViewId="ViewHTMLXSLT";options.templateId="VehicleScheduleReportAll";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDate("date")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"vehicle":{"binding":new CommandBinding({"control":new VehicleEdit(id+":filter-ctrl-vehicle",{"contClassName":"form-group-filter"}),"field":new FieldInt("vehicle_id")}),"sign":"e"}};VehicleScheduleReportAll_View.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleReportAll_View,ViewReport);VehicleScheduleReportAll_View.prototype.onGetReportData=function(respText){VehicleScheduleReportAll_View.superclass.onGetReportData.call(this,respText);var self=this;$(".on_shift").click(function(e){self.changeProdBaseClick(e.target);e.stopPropagation();});}
VehicleScheduleReportAll_View.prototype.changeProdBase=function(forDate,callback){(new WindowFormModalBS(this.getId()+":changePBase",{"contentHead":"База на "+DateHelper.format(forDate,"d/m/Y"),"content":new View(this.getId()+":changePBase:v",{"elements":[new ProductionBaseEdit(this.getId()+":changePBase:v:prod_base",{"required":true,"focus":true})]}),"onClickOk":function(){var view=this.getContent();if(!view.validate()){return;}
callback(view.getElement("prod_base").getValue());this.close();},"cmdCancel":true})).open();}
VehicleScheduleReportAll_View.prototype.changeProdBaseClick=function(changeNode){var self=this;var schedule_date=DateHelper.strtotime(changeNode.getAttribute("dt"));this.changeProdBase(schedule_date,function(changeRef){var vehicle_id=changeNode.getAttribute("vehicle_id");var driver_id=changeNode.getAttribute("driver_id");self.setSchedule([schedule_date],[vehicle_id],driver_id,changeRef.getKey(),true,function(){changeNode.setAttribute("prod_base_id",changeRef.getKey());changeNode.setAttribute("title",changeRef.getDescr());changeNode.textContent=changeRef.getDescr();});});}
VehicleScheduleReportAll_View.prototype.setSchedule=function(scheduleDates,vehicles,driverId,prodBaseId,isShift,callback){var vehiles_pm=[];for(var i=0;i<vehicles.length;i++){var days=[];for(var n=0;n<scheduleDates.length;n++){days.push({"date":DateHelper.format(scheduleDates[n],"Y-m-d"),"shift":isShift,"driver_id":driverId,"prod_base_id":prodBaseId});}
vehiles_pm.push({"vehicle_id":vehicles[i],"days":days});}
this.setScheduleServerCall(vehiles_pm,callback);}
VehicleScheduleReportAll_View.prototype.setScheduleServerCall=function(vehicles,callback){if(!vehicles.length){if(callback)callback();return;}
var pm=(new VehicleSchedule_Controller()).getPublicMethod("set_schedule");pm.setFieldValue("vehicles",CommonHelper.serialize(vehicles));pm.run({"ok":function(){if(callback){callback();}}});} 
function ScheduleGen_View(id,options){options=options||{};options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE="Формирование графиков работы";var self=this;options.addElement=function(){this.addElement(new EditPeriodDate(id+":period",{"valueFrom":DateHelper.time(),"valueTo":DateHelper.time()}));this.addElement(new ProductionBaseEdit(id+":production_base",{"required":true,"contClassName":"form-group "+window.getBsCol(12)}));var day_cl="control-label "+window.getBsCol(3);var ctrl_cl="input-group "+window.getBsCol(1);this.addElement(new VehicleDriverForSchedGenGrid(id+":vehicle_list"));this.addElement(new FeatureEdit(id+":vehicle_feature",{"value":"основ"}));this.addElement(new EditCheckBox(id+":day1",{"labelCaption":"Понедельник","labelClassName":day_cl,"editContClassName":ctrl_cl,"checked":true}));this.addElement(new EditCheckBox(id+":day2",{"labelCaption":"Вторник","labelClassName":day_cl,"editContClassName":ctrl_cl,"checked":true}));this.addElement(new EditCheckBox(id+":day3",{"labelCaption":"Среда","labelClassName":day_cl,"editContClassName":ctrl_cl,"checked":true}));this.addElement(new EditCheckBox(id+":day4",{"labelCaption":"Четверг","labelClassName":day_cl,"checked":true}));this.addElement(new EditCheckBox(id+":day5",{"labelClassName":day_cl,"editContClassName":ctrl_cl,"labelCaption":"Пятница","checked":true}));this.addElement(new EditCheckBox(id+":day6",{"labelClassName":day_cl,"labelCaption":"Суббота"}));this.addElement(new EditCheckBox(id+":day7",{"labelClassName":day_cl,"editContClassName":ctrl_cl,"labelCaption":"Воскресенье"}));this.addElement(new ButtonCmd(id+":btnOk",{"caption":"Сформировать","onClick":function(){self.process();},"title":"Сформировать расписание по заданным ТС"}));this.addElement(new Control(id+":report","DIV"));}
ScheduleGen_View.superclass.constructor.call(this,id,options);}
extend(ScheduleGen_View,View);ScheduleGen_View.prototype.process=function(){var b_ctrl=this.getElement("production_base");var b_val=b_ctrl.getValue();if(!b_val||b_val.isNull()){b_ctrl.setNotValid("Не заполнено");return;}
b_ctrl.setValid();var pm=(new VehicleSchedule_Controller()).getPublicMethod("gen_schedule");pm.setFieldValue("date_from",this.getElement("period").getControlFrom().getValue());pm.setFieldValue("date_to",this.getElement("period").getControlTo().getValue());pm.setFieldValue("production_base_id",b_val.getKey());pm.setFieldValue("vehicle_feature",this.getElement("vehicle_feature").getValue());pm.setFieldValue("vehicle_list",this.getElement("vehicle_list").serialize());pm.setFieldValue("day1",this.getElement("day1").getValue());pm.setFieldValue("day2",this.getElement("day2").getValue());pm.setFieldValue("day3",this.getElement("day3").getValue());pm.setFieldValue("day4",this.getElement("day4").getValue());pm.setFieldValue("day5",this.getElement("day5").getValue());pm.setFieldValue("day6",this.getElement("day6").getValue());pm.setFieldValue("day7",this.getElement("day7").getValue());window.setGlobalWait(true);var self=this;pm.run({"viewId":"VehicleScheduleReport","retContentType":"text","ok":function(respText){self.getElement("report").m_node.innerHTML=respText;},"all":function(){window.setGlobalWait(false);}});} 
function DriverCheatReport_View(id,options){options=options||{};options.publicMethod=(new Driver_Controller()).getPublicMethod("driver_cheat_report");options.reportViewId="ViewHTMLXSLT";options.templateId="DriverCheatReport";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var end_d=DateHelper.getEndOfShift(DateHelper.getStartOfShift(DateHelper.monthEnd()));options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"cheat_end_date_time":{"binding":new CommandBinding({"control":new EditDateTime(id+":filter-ctrl-cheat_end_date_time",{"contClassName":"form-group-filter","labelCaption":"Окончание периода контроля:","value":end_d}),"field":new FieldDateTime("cheat_end_date_time")}),"sign":"e"},"vehicle":{"binding":new CommandBinding({"control":new VehicleEdit(id+":filter-ctrl-vehicle",{"contClassName":"form-group-filter"}),"field":new FieldInt("vehicle_id")}),"sign":"e"},"stop_duration":{"binding":new CommandBinding({"control":new EditTime(id+":filter-ctrl-stop_duration",{"contClassName":"form-group-filter","labelCaption":"Стоянка:","value":"00:05"}),"field":new FieldTime("stop_duration")}),"sign":"e"},"stop_spot_offset":{"binding":new CommandBinding({"control":new EditNum(id+":filter-ctrl-stop_spot_offset",{"contClassName":"form-group-filter","labelCaption":"Отступ от стоянки (метров):","value":20}),"field":new FieldInt("stop_spot_offset")}),"sign":"e"}};DriverCheatReport_View.superclass.constructor.call(this,id,options);}
extend(DriverCheatReport_View,ViewReport); 
function RouteToDestAvgTimeRep_View(id,options){options=options||{};options.publicMethod=(new Destination_Controller()).getPublicMethod("route_to_dest_avg_time");options.reportViewId="ViewHTMLXSLT";options.templateId="RouteToDestAvgTimeRep";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};RouteToDestAvgTimeRep_View.superclass.constructor.call(this,id,options);}
extend(RouteToDestAvgTimeRep_View,ViewReport); 
function VehicleEfficiency_View(id,options){options=options||{};options.publicMethod=(new VehicleSchedule_Controller()).getPublicMethod("get_vehicle_efficiency");options.reportViewId="ViewHTMLXSLT";options.templateId="VehicleEfficiencyReport";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var d1=DateHelper.strtotime(DateHelper.format(DateHelper.getStartOfShift(DateHelper.monthStart()),"Y-m-dTH:i:s")+window.getApp().getTimeZoneOffsetStr());var d2=DateHelper.strtotime(DateHelper.format(DateHelper.getEndOfShift(DateHelper.getStartOfShift(DateHelper.monthEnd())),"Y-m-dTH:i:s")+window.getApp().getTimeZoneOffsetStr());var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"valueFrom":d1,"valueTo":d2,"field":new FieldDateTime("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"run_type":{"binding":new CommandBinding({"control":new EditSelect(id+":run_type",{"labelCaption":"Тип рейсов:","elements":[new EditSelectOption(id+":run_type:run_type_all_sum",{"descr":"Все"}),new EditSelectOption(id+":run_type:run_type_day",{"descr":"Дневные"}),new EditSelectOption(id+":run_type:run_type_night",{"descr":"Ночные"})],"contClassName":"form-group-filter"}),"field":new FieldString("run_type")}),"sign":"e"},"shift_type":{"binding":new CommandBinding({"control":new EditSelect(id+":shift_type",{"labelCaption":"График:","elements":[new EditSelectOption(id+":shift_type:shift_type_all",{"descr":"Все"}),new EditSelectOption(id+":shift_type:shift_type_on",{"descr":"По графику"}),new EditSelectOption(id+":shift_type:shift_type_off",{"descr":"Вне графика"})],"contClassName":"form-group-filter"}),"field":new FieldString("shift_type")}),"sign":"e"},"owner":{"binding":new CommandBinding({"control":new VehicleOwnerEdit(id+":owner",{"contClassName":"form-group-filter"}),"field":new FieldInt("vehicle_owner_id")}),"sign":"e"},"feature":{"binding":new CommandBinding({"control":new FeatureEdit(id+":feature",{"contClassName":"form-group-filter"}),"field":new FieldString("vehicle_feature")}),"sign":"e"},"vehicle":{"binding":new CommandBinding({"control":new VehicleEdit(id+":vehicle",{"contClassName":"form-group-filter"}),"field":new FieldInt("vehicle_id")}),"sign":"e"}};VehicleEfficiency_View.superclass.constructor.call(this,id,options);}
extend(VehicleEfficiency_View,ViewReport); 
function OperatorList_View(id,options){this.m_lowResDevice=(window.getWidthType()=="sm");options.templateOptions=options.templateOptions||{};var role_id=window.getApp().getServVar("role_id");options.templateOptions.showPeriod=(!options.fromLabList&&CommonHelper.inArray(role_id,["dispatcher"])==-1);options.templateOptions.showGridHeaders=!this.m_lowResDevice;this.m_showProductionSites=(options.showProductionSites!==false&&!this.m_lowResDevice);options.templateOptions.showProductionSites=this.m_showProductionSites;options.templateOptions.OPERATOR=(role_id=="operator");options.templateOptions.NOT_OPERATOR=!options.templateOptions.OPERATOR;this.m_prodBaseList=[];if(options.models&&options.models.ProductionBase_Model){while(options.models.ProductionBase_Model.getNextRow()){this.m_prodBaseList.push({"productionBaseId":options.models.ProductionBase_Model.getFieldValue("id"),"productionBaseName":options.models.ProductionBase_Model.getFieldValue("name")})}}
options.templateOptions.productionBases=this.m_prodBaseList;var constants={"order_grid_refresh_interval":null,water:null};window.getApp().getConstantManager().get(constants);options.srvEvents=options.fromLabList?null:{"events":[{"id":"Shipment.insert"},{"id":"Shipment.update"},{"id":"Shipment.delete"},{"id":"Production.insert"},{"id":"Production.update"},{"id":"Production.delete"}],"onEvent":function(json){var do_refresh=true;var grid=self.getElement("grid");if(json.controllerId=="Shipment"&&(json.methodId=="update"||json.methodId=="delete")){var keys=grid.getKeyIds();var key_fields={};for(var i=0;i<keys.length;i++){if(json.params[keys[i]]){key_fields[keys[i]]=json.params[keys[i]];}}
try{grid.m_model.recLocate(key_fields,true);}
catch(e){do_refresh=false;}}
else if(json.controllerId=="Production"&&(json.methodId=="update"||json.methodId=="delete")){do_refresh=false;grid.m_model.reset();while(grid.m_model.getNextRow()){var list=grid.m_model.getFieldValue("production_list");if(list){for(var i=0;i<list.length;i++){if(list[i].id==json.params.id){do_refresh=true;break;}}}}}
if(do_refresh){grid.onRefresh();}},"onWakeup":function(){self.getElement("grid").onRefresh();},"onSubscribed":function(){self.getElement("grid").setRefreshInterval(0);},"onClose":function(message){self.getElement("grid").setRefreshInterval(self.m_httpRefreshInterval);}};this.m_httpRefreshInterval=constants.order_grid_refresh_interval.getValue()*1000;OperatorList_View.superclass.constructor.call(this,id,options);if(options.templateOptions.showPeriod){var cur=DateHelper.time();var per_select=new EditPeriodShift(id+":date_filter",{"template":window.getApp().getTemplate(((window.getWidthType()=="sm")?"EditPeriodShiftSM":"EditPeriodShift")),"dateFrom":(new Date(cur.getFullYear(),cur.getMonth(),cur.getDate())),"onChange":function(dateTime){var gr=self.getElement("grid");gr.getReadPublicMethod().setFieldValue("date",dateTime);window.setGlobalWait(true);gr.onRefresh(function(){window.setGlobalWait(false);});}});this.addElement(per_select);}
var model=options.models.OperatorList_Model;this.m_totModel=options.models.OperatorTotals_Model;this.m_prodSiteModel=options.models.OperatorProductionSite_Model;var contr=new Shipment_Controller();var self=this;var elements=[new GridCellHead(id+":grid:head:production_id",{"value":"№ произ-ва","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("production_list"),"formatFunction":function(fields,gridCell){var list=fields.production_list.getValue();if(list){var col=gridCell.getGridColumn();col.productions=col.productions||[];var cell_n=gridCell.getNode();for(var i=0;i<list.length;i++){var t_tag_cont=document.createElement("DIV");col.productions[list[i].production_id]={"pic":document.createElement("SPAN"),"txt":document.createElement("SPAN")};col.productions[list[i].production_id].pic.setAttribute("class","glyphicon glyphicon-triangle-right pull-left detailToggle");if(list[i].material_tolerance_violated){col.productions[list[i].production_id].txt.setAttribute("class","badge badge-danger");col.productions[list[i].production_id].txt.setAttribute("style","font-size:100%;");}
col.productions[list[i].production_id].txt.textContent=list[i].production_id;t_tag_cont.appendChild(col.productions[list[i].production_id].pic);t_tag_cont.appendChild(col.productions[list[i].production_id].txt);cell_n.appendChild(t_tag_cont);EventHelper.add(col.productions[list[i].production_id].pic,"click",(function(prodData){return function(e){EventHelper.stopPropagation(e);self.showProdDetails(prodData,e.target);}})(list[i]));col.productions[list[i].production_id].tooltip=new ToolTip({"node":t_tag_cont,"wait":500,"onHover":(function(prodData,toolTip){return function(ev){self.showProdTooltip(this,prodData,ev);}})(list[i],col.productions[list[i].production_id].tooltip)});}}
return"";}})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Назначен","colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("date_time"),"dateFormat":"H:i"})]}),new GridCellHead(id+":grid:head:ship_date_time",{"value":"Отгружен","colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("ship_date_time"),"dateFormat":"H:i"})]}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"formatFunction":function(f){var res="";if(f.production_sites_ref&&!f.production_sites_ref.isNull()){res=f.production_sites_ref.getValue().getDescr();}
if(f.operators_ref&&!f.operators_ref.isNull()){res+=" "+f.operators_ref.getValue().getDescr();}
return res;}})]}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Клиент","columns":[new GridColumnRef({"field":model.getField("clients_ref")})]}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref")})]}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text")})]}),new GridCellHead(id+":grid:head:quant",{"value":"Кол-во","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant"),"precision":1})]}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","colAttrs":{"align":"right"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref")})]}),new GridCellHead(id+":grid:head:vehicles_ref",{"value":"ТС","colAttrs":{"align":"center"},"columns":[new GridColumnRef({"field":model.getField("vehicles_ref")})]}),new GridCellHead(id+":grid:head:drivers_ref",{"value":"Водитель","columns":[new GridColumnRef({"field":model.getField("drivers_ref")})]})];var foot_elements=[new GridCell(id+":grid:foot:sp1",{"colSpan":"7"}),new GridCellFoot(id+":features_grid:foot:tot_quant",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"quant","gridColumn":new GridColumnFloat({"id":"tot_quant","precision":1})})];var role=window.getApp().getServVar("role_id");if(role!="operator"){elements.push(new GridCellHead(id+":grid:head:ship_norm_min",{"value":"Норма отгр.","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("ship_norm_min")})]}));elements.push(new GridCellHead(id+":grid:head:ship_fact_min",{"value":"Норма факт.","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("ship_fact_min")})]}));elements.push(new GridCellHead(id+":grid:head:ship_bal_min",{"value":"Ост.","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("ship_bal_min")})]}));foot_elements.push(new GridCell(id+":grid:foot:sp2",{"colSpan":"3"}));foot_elements.push(new GridCellFoot(id+":features_grid:foot:tot_ship_norm_min",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"ship_norm_min","gridColumn":new GridColumn({"id":"tot_ship_norm_min"})}));foot_elements.push(new GridCellFoot(id+":features_grid:foot:tot_ship_fact_min",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"ship_fact_min","gridColumn":new GridColumn({"id":"tot_ship_fact_min"})}));foot_elements.push(new GridCellFoot(id+":features_grid:foot:tot_ship_bal_min",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"ship_bal_min","gridColumn":new GridColumn({"id":"tot_ship_bal_min"})}));}
if(role=="operator"||role=="owner"||role=="boss"||role=="dispatcher"){elements.push(new GridCellHead(id+":grid:head:sys",{"value":"...","columns":[new GridColumn({"id":"sys","cellElements":[{"elementClass":ButtonCtrl,"elementOptions":{"title":"Отгрузить","glyph":"glyphicon-send","onClick":function(){self.setShipped(this);}}},{"elementClass":PrintInvoiceBtn}]})]}));}
var grid=new GridAjx(id+":grid",{"className":"table-bordered table-responsive table-make_order","attrs":{"style":"width:100%"},"model":model,"keyIds":["id"],"controller":contr,"readPublicMethod":contr.getPublicMethod("get_operator_list"),"editInline":false,"editWinClass":null,"commands":null,"popUpMenu":null,"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"onEventSetRowOptions":function(opts){opts.className=opts.className||"";var m=this.getModel();if(m.getFieldValue("shipped")){opts.className+=(opts.className.length?" ":"")+" shipped";if(m.getFieldValue("concrete_types_ref").getKey("id")==constants.water.getValue().getKey()){opts.className+=" ship_water";}}},"onEventSetCellOptions":function(opts){opts.className=opts.className||"";var col=opts.gridColumn.getId();var m=this.getModel();if(!m.getFieldValue("shipped")&&(col=="concrete_types_ref"||col=="quant")){opts.className+=(opts.className.length?" ":"")+"operatorNotShipped";}
else if(col=="production_list"&&((m.getFieldValue("production_quant")&&m.getFieldValue("production_quant")!=m.getFieldValue("quant")))){opts.className+=(opts.className.length?" ":"")+"factQuantViolation";opts.title="Объем по данным производства: "+m.getFieldValue("production_quant")+"м3";}},"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":elements})]}),"foot":new GridFoot(id+":grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":foot_elements})]}),"pagination":null,"autoRefresh":false,"refreshInterval":options.fromLabList?null:this.m_httpRefreshInterval,"rowSelect":false,"focus":!options.fromLabList,"navigate":false,"navigateClick":false});this.addElement(grid);this.m_gridOnGetData=grid.onGetData;grid.onGetData=function(resp){if(!document.getElementById(self.getId())){return;}
if(resp){self.m_totModel=resp.getModel("OperatorTotals_Model");self.m_prodSiteModel=resp.getModel("OperatorProductionSite_Model");}
if(self.m_totModel.getNextRow()){var q_shipped=parseFloat(self.m_totModel.getFieldValue("quant_shipped"));var q_ordered=parseFloat(self.m_totModel.getFieldValue("quant_ordered"));document.getElementById("totShipped").value=q_shipped.toFixed(2);document.getElementById("totOrdered").value=q_ordered.toFixed(2);document.getElementById("totBalance").value=(q_ordered-q_shipped).toFixed(2);}
var n="";while(self.m_prodSiteModel.getNextRow()){n+=(n=="")?"":", ";n+=self.m_prodSiteModel.getFieldValue("name");}
DOMHelper.setText(document.getElementById(self.getId()+":prod_site_title"),n);self.m_gridOnGetData.call(self.getElement("grid"),resp);var new_data="";this.m_model.reset();while(this.m_model.getNextRow()){new_data+=this.m_model.getFieldValue("date_time")+this.m_model.getFieldValue("ship_date_time");}
var new_data_h=CommonHelper.md5(new_data);if(!this.m_oldDataHash||this.m_oldDataHash!=new_data_h){if(this.m_oldDataHash!=undefined){window.getApp().makeGridNewDataSound();}
this.m_oldDataHash=new_data_h;}
if(resp){var ctrl=self.getElement("material_stores");if(ctrl){var m=resp.getModel("MaterialStoreForOrderList_Model");if(m){ctrl.setData(m);}}
ctrl=self.getElement("production_sites");if(ctrl){var m=resp.getModel("CementSiloForOrderList_Model");if(m){ctrl.setData(m);}}}}
if(this.m_showProductionSites){for(var i=0;i<this.m_prodBaseList.length;i++){var base_id=this.m_prodBaseList[i].productionBaseId;var m_id="MaterialStoreForOrderList"+base_id+"_Model";if(!options.models[m_id]){throw new Error("Model "+m_id+" not found!");}
this.addElement(new MaterialStoreForOrderList_View(id+":material_stores"+base_id,{"model":new MaterialStoreForOrderList_Model({"data":options.models[m_id].getData()}),"listView":this}));var m_id="CementSiloForOrderList"+base_id+"_Model";if(!options.models[m_id]){throw new Error("Model "+m_id+" not found!");}
this.addElement(new CementSiloForOrderList_View(id+":production_sites"+base_id,{"model":new CementSiloForOrderList_Model({"data":options.models[m_id].getData()}),"listView":this}));}}}
extend(OperatorList_View,ViewAjxList);OperatorList_View.prototype.setShipped=function(btnCont){var tr=DOMHelper.getParentByTagName(btnCont.m_node,"tr");if(!tr){throw new Error("TR tag not found!");}
var keys=CommonHelper.unserialize(tr.getAttribute("keys"));var grid=btnCont.gridColumn.getGrid();var pm=grid.getReadPublicMethod().getController().getPublicMethod("set_shipped");pm.setFieldValue("id",keys.id);pm.run({"ok":function(resp){grid.onRefresh();}})}
OperatorList_View.prototype.showProdDetails=function(prodData,node){this.m_details=this.m_details||[];if(!this.m_details[prodData.production_id]){var detail_view_id=CommonHelper.uniqid();var tr=DOMHelper.getParentByTagName(node,"TR");this.m_detailRow=this.m_detailRow||[];this.m_detailRow[prodData.production_id]=document.createElement(tr.tagName);this.m_detailRow[prodData.production_id].className="grid_details";this.m_detailRow[prodData.production_id].setAttribute("for_keys",tr.getAttribute("keys"));this.m_detailRow[prodData.production_id].setAttribute("detail_view_id",detail_view_id);var v_opts={};var grid=this.getElement("grid");this.m_gridRefreshInterval=grid.getRefreshInterval();grid.setRefreshInterval(0);v_opts.detailFilters={"ProductionMaterialList_Model":[{"masterFieldId":"production_site_id","field":"production_site_id","sign":"e","val":prodData.production_site_id},{"masterFieldId":"production_id","field":"production_id","sign":"e","val":prodData.production_id}]};var app=window.getApp();if(!app.m_detailViews)app.m_detailViews={};app.m_detailViews[detail_view_id]=new ProductionMaterialList_View(detail_view_id,v_opts);let viewCont=document.createElement("TD");viewCont.setAttribute("style","display: none;");viewCont.setAttribute("colspan",tr.cells.length);if(tr.nextSibling){tr.parentNode.insertBefore(this.m_detailRow[prodData.production_id],tr.nextSibling);}
else{tr.parentNode.appendChild(this.m_detailRow[prodData.production_id]);}
app.m_detailViews[detail_view_id].toDOM(viewCont);this.m_detailRow[prodData.production_id].appendChild(viewCont);$(viewCont).slideToggle(300);}
else{var tr=DOMHelper.getParentByTagName(node,"TR");var detail_view_id=tr.nextSibling.getAttribute("detail_view_id");if(detail_view_id){window.getApp().m_detailViews[detail_view_id].delDOM();}
this.getElement("grid").setRefreshInterval(this.m_gridRefreshInterval);DOMHelper.delNode(this.m_detailRow[prodData.production_id]);}
this.m_details[prodData.production_id]=!this.m_details[prodData.production_id];$(node).toggleClass("rotate-90");}
OperatorList_View.prototype.showProdTooltip=function(toolTip,prodData,ev){var t_params={"productionId":prodData.production_id,"productionDtStart":DateHelper.format(DateHelper.strtotime(prodData.production_dt_start),"H:i"),"productionDtEnd":DateHelper.format(DateHelper.strtotime(prodData.production_dt_end),"H:i"),"productionUser":prodData.production_user,"productionConcreteType":prodData.production_concrete_type_descr};var t=window.getApp().getTemplate("ElkonProdInf");t_params.bsCol=window.getBsCol();t_params.widthType=window.getWidthType();Mustache.parse(t);toolTip.popup(Mustache.render(t,t_params),{"width":200,"title":"Производство Elkon","className":"","event":ev});} 
function VehicleRun_View(id,options){options=options||{};VehicleRun_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.VehicleRun_Model)?options.models.VehicleRun_Model:new VehicleRun_Model();var contr=new VehicleSchedule_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var role=window.getApp().getServVar("role_id");var self=this;var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"className":options.detailFilters?OrderMakeList_View.prototype.TABLE_CLASS:null,"keyIds":["veh_id","st_free_start"],"model":model,"controller":contr,"readPublicMethod":contr.getPublicMethod("get_vehicle_runs"),"editInline":null,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdSearch":false,"cmdFilter":false,"cmdAllCommands":false,"cmdInsert":false,"cmdEdit":false,"cmdDelete":false}),"onEventSetRowOptions":function(opts){opts.attrs=opts.attrs||{};opts.attrs.style=opts.attrs.style||"";opts.attrs.style+="cursor:pointer;";opts.title="Кликните для отображения маршрута на карте";opts.events=opts.events||{};opts.events.click=function(e){if(e.target.tagName=="TD"){var keys=CommonHelper.unserialize(this.getAttr("keys"));console.dir(keys)
var key_fields={"veh_id":new FieldInt("veh_id",{"value":keys.veh_id}),"st_free_start":new FieldDateTime("st_free_start",{"value":DateHelper.strtotime(keys.st_free_start)})}
var m=self.getElement("grid").getModel();m.recLocate(key_fields,true);var dt_to=m.getField("st_free_end");if(!dt_to.isSet()){dt_to=new FieldDateTime("st_free_end",{"value":DateHelper.time()});}
self.showVehCurrentPosition(keys.veh_id,m.getField("st_free_start").getValueXHR(),dt_to.getValueXHR());}}},"popUpMenu":null,"filters":(options.detailFilters&&options.detailFilters.VehicleRun_Model)?options.detailFilters.VehicleRun_Model:null,"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:st_free_start",{"value":"База","columns":[new GridColumnDate({"field":model.getField("st_free_start"),"dateFormat":"H:i"})]}),new GridCellHead(id+":grid:head:st_assigned",{"value":"Назн.","columns":[new GridColumnDate({"field":model.getField("st_assigned"),"dateFormat":"H:i"})]}),new GridCellHead(id+":grid:head:st_shipped",{"value":"Отгр.","columns":[new GridColumnDate({"field":model.getField("st_shipped"),"dateFormat":"H:i"})]}),new GridCellHead(id+":grid:head:st_at_dest",{"value":"Прибыл","columns":[new GridColumnDate({"field":model.getField("st_at_dest"),"dateFormat":"H:i"})]}),new GridCellHead(id+":grid:head:st_left_for_base",{"value":"Убыл","columns":[new GridColumnDate({"field":model.getField("st_left_for_base"),"dateFormat":"H:i"})]}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref")})]}),new GridCellHead(id+":grid:head:st_free_end",{"value":"База","columns":[new GridColumnDate({"field":model.getField("st_free_end"),"dateFormat":"H:i"})]}),new GridCellHead(id+":grid:head:run_time",{"value":"Время","columns":[new GridColumnDate({"field":model.getField("run_time"),"dateFormat":"H:i"})]})]})]}),"pagination":options.detailFilters?null:new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":options.detailFilters?false:true}));}
extend(VehicleRun_View,ViewAjxList);VehicleRun_View.prototype.showVehCurrentPosition=function(vehicleId,dateFrom,dateTo){var self=this;var win_w=$(window).width();var h=$(window).height()-20;var left=win_w/3;var w=win_w/3*2;var href="t=Map&v=Child&c=Vehicle_Controller&f=get_track&id="+vehicleId+"&dt_from="+dateFrom+"&dt_to="+dateTo+"&stop_dur=00:05";var conn=window.getApp().getServConnector();if(conn.getAccessTokenParam){href+="&"+conn.getAccessTokenParam()+"="+conn.getAccessToken();}
this.m_mapForm=new WindowForm({"id":"MapForm","height":h,"width":w,"left":left,"top":10,"URLParams":href,"name":"Map","params":{"editViewOptions":{"vehicle":new RefType({"keys":{"id":vehicleId}}),"valueFrom":dateFrom,"valueTo":dateTo}},"onClose":function(){self.m_mapForm.close();delete self.m_mapForm;}});this.m_mapForm.open();} 
function ProductionSiteList_View(id,options){options=options||{};ProductionSiteList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ProductionSite_Model)?options.models.ProductionSite_Model:new ProductionSite_Model();var contr=new ProductionSite_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":options.detailFilters?null:new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false}),"popUpMenu":options.detailFilters?null:popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":100}})],"sortable":true,"sort":"asc"})]})]}),"filters":options.detailFilters?options.detailFilters.ProductionSite_Model:null,"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":options.detailFilters,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ProductionSiteList_View,ViewAjxList); 
function ProductionSiteForEditList_View(id,options){options=options||{};ProductionSiteForEditList_View.superclass.constructor.call(this,id,options);var model=options.models.ProductionSiteForEditList_Model;var contr=new ProductionSite_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"readPublicMethod":contr.getPublicMethod("get_list_for_edit"),"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"addCustomCommandsAfter":function(commands){commands.push(new ProductionSiteCmdLoadProduction(id+":grid:cmd:LoadProduction"));}}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:production_bases_ref",{"value":"База","columns":[new GridColumnRef({"field":model.getField("production_bases_ref"),"ctrlClass":ProductionBaseEdit,"ctrlBindFieldId":"production_base_id","ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":100}})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:active",{"value":"Активен","columns":[new GridColumnBool({"field":model.getField("active")})]}),new GridCellHead(id+":grid:head:production_plant_type",{"value":"Тип завода","columns":[new EnumGridColumn_production_plant_types({"field":model.getField("production_plant_type"),"ctrlOptions":{}})]}),new GridCellHead(id+":grid:head:last_elkon_production_id",{"value":"№ производства Elkon","columns":[new GridColumn({"field":model.getField("last_elkon_production_id"),"ctrlOptions":{"cmdCalc":false}})]}),new GridCellHead(id+":grid:head:elkon_connection",{"value":"Соединение с сервром Elkon","columns":[new GridColumn({"field":model.getField("elkon_connection"),"ctrlOptions":{"enabled":false},"formatFunction":function(fields){var res="";var con=fields.elkon_connection.getValue();if(con){res="Сервер:"+con.host+" Порт:"+con.port+" база:"+con.databaseName+" Уровень лога:"+con.logLevel+" Пользователь:"+con.userName+" Пароль:"+con.userPassword}
return res;}})]}),new GridCellHead(id+":grid:head:missing_elkon_production_ids",{"value":"Пропущенные пр-ва","columns":[new GridColumn({"field":model.getField("missing_elkon_production_ids"),"ctrlOptions":{"enabled":false}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ProductionSiteForEditList_View,ViewAjxList); 
function ProductionBaseList_View(id,options){options=options||{};options.HEAD_TITLE="Производственные базы";ProductionBaseList_View.superclass.constructor.call(this,id,options);var model=options.models.ProductionBaseList_Model;var contr=new ProductionBase_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":200},"master":true,"detailViewClass":ProductionSiteList_View,"detailViewOptions":{"detailFilters":{"ProductionSite_Model":[{"masterFieldId":"id","field":"production_base_id","sign":"e","val":"0"}]}}})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Геозона","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"ctrlBindFieldId":"destination_id","ctrlClass":DestinationEdit,"ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:address",{"value":"Адрес","columns":[new GridColumn({"field":model.getField("address")})]}),new GridCellHead(id+":grid:head:deleted",{"value":"Удален","columns":[new GridColumnBool({"field":model.getField("deleted"),"showFalse":false})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ProductionBaseList_View,ViewAjxList); 
function ShipQuantForCostGradeList_View(id,options){options=options||{};ShipQuantForCostGradeList_View.superclass.constructor.call(this,id,options);var model=options.models.ShipQuantForCostGrade_Model;var contr=new ShipQuantForCostGrade_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);this.m_prevQuant=0;var self=this;var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var grid=new GridAjx(id+":grid",{"keyIds":["quant"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:distance_from",{"value":"Км от","columns":[new GridColumn({"field":model.getField("distance_from"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:distance_to",{"value":"Км до","columns":[new GridColumn({"field":model.getField("distance_to"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:quant",{"value":"Объем от","columns":[new GridColumn({"field":model.getField("quant"),"ctrlClass":EditInt})]}),new GridCellHead(id+":grid:head:quant_to",{"value":"Объем до","columns":[new GridColumn({"field":model.getField("quant_to"),"ctrlClass":EditInt})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});this.m_gridOnGetData=grid.onGetData;grid.onGetData=function(resp){self.m_prevQuant=0;self.m_gridOnGetData.call(self.getElement("grid"),resp);}
this.addElement(grid);}
extend(ShipQuantForCostGradeList_View,ViewAjxList); 
function SupplierOrderList_View(id,options){options=options||{};options.publicMethod=(new RawMaterial_Controller()).getPublicMethod("supplier_orders_list");options.reportViewId="ViewHTMLXSLT";options.templateId="SupplierOrderList";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var d1=DateHelper.strtotime(DateHelper.format(DateHelper.getStartOfShift(DateHelper.monthStart()),"Y-m-dTH:i:s")+window.getApp().getTimeZoneOffsetStr());var d2=DateHelper.strtotime(DateHelper.format(DateHelper.getEndOfShift(DateHelper.getStartOfShift(DateHelper.monthEnd())),"Y-m-dTH:i:s")+window.getApp().getTimeZoneOffsetStr());var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"valueFrom":d1,"valueTo":d2,"field":new FieldDateTime("shift")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"material":{"binding":new CommandBinding({"control":new MaterialSelect(id+":material",{"contClassName":"form-group-filter","forConcrete":true}),"field":new FieldInt("material_id")}),"sign":"e"}};SupplierOrderList_View.superclass.constructor.call(this,id,options);}
extend(SupplierOrderList_View,ViewReport); 
function RawMaterialProcurUploadList_View(id,options){RawMaterialProcurUploadList_View.superclass.constructor.call(this,id,options);var model=options.models.RawMaterialProcurUploadView_Model;var contr=new RawMaterialProcurUpload_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["date_time"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":null,"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time"),"dateFormat":"d/m/y H:s"})]}),new GridCellHead(id+":grid:head:result",{"value":"Результат","columns":[new GridColumnBool({"field":model.getField("result")})]}),new GridCellHead(id+":grid:head:doc_count",{"value":"Кол-во документов","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("doc_count")})]}),new GridCellHead(id+":grid:head:descr",{"value":"Описание","colAttrs":{"align":"left"},"columns":[new GridColumn({"field":model.getField("descr")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(RawMaterialProcurUploadList_View,ViewAjx); 
function RAMaterialConsumptionDateList_View(id,options){options=options||{};options.addElement=function(){this.addElement(new RAMaterialConsumptionDateGrid(id+":grid",{"model":options.models.RAMaterialConsumptionDateList_Model,"modelMat":options.models.RawMaterial_Model,"variantStorage":options.variantStorage}));}
RAMaterialConsumptionDateList_View.superclass.constructor.call(this,id,options);}
extend(RAMaterialConsumptionDateList_View,ViewAjxList); 
function RAMaterialConsumptionDocList_View(id,options){options=options||{};options.addElement=function(){this.addElement(new RAMaterialConsumptionDocGrid(id+":grid",{"filters":options.detailFilters.RAMaterialConsumptionDocList_Model,"model":(options.models&&options.models.RAMaterialConsumptionDocList_Model)?options.models.RAMaterialConsumptionDocList_Model:new RAMaterialConsumptionDocList_Model(),"modelMat":(options.models&&options.models.RawMaterial_Model)?options.models.RawMaterial_Model:new RawMaterial_Model(),"variantStorage":options.variantStorage}));}
RAMaterialConsumptionDocList_View.superclass.constructor.call(this,id,options);}
extend(RAMaterialConsumptionDocList_View,ViewAjxList); 
function AstIncomeCall_View(id,options){options=options||{};options.controller=new AstCall_Controller();options.model=options.models.AstCallCurrent_Model;var client_id;if(options.model.getRowCount()){var pm=options.controller.getPublicMethod("update");pm.setFieldValue("unique_id",options.model.getFieldValue("unique_id"));client_id=options.model.getFieldValue("client_id");}
options.template=window.getApp().getTemplate("AstIncomeCall_View");options.templateOptions={};options.templateOptions.isClient=client_id?true:false;this.m_onMakeOrder=options.onMakeOrder;var self=this;options.addElement=function(){this.addElement(new EditPhone(id+":contact_tel",{"labelCaption":"Телефон:","enabled":false,"cmdClear":false}));this.addElement(new EditString(id+":contact_name",{"labelCaption":"Контактное лицо:","maxLength":200}));this.addElement(new EditText(id+":manager_comment",{"labelCaption":"Комментарий звонка:","rows":"2","maxLength":1000,"cmdClear":false}));this.addElement(new ClientEdit(id+":client",{"cmdInsert":true}));if(client_id){this.addElement(new AstCallClientCallHistoryList_View(id+":client_call_history",{"detail":true,"models":{"AstCallClientCallHistoryList_Model":options.models.AstCallClientCallHistoryList_Model}}));this.addElement(new AstCallClientShipHistoryList_View(id+":client_ship_history",{"detail":true,"models":{"AstCallClientShipHistoryList_Model":options.models.AstCallClientShipHistoryList_Model}}));}
this.addElement(new ButtonCmd(id+":cmdUpdate",{"caption":" Изменить","glyph":"glyphicon-pencil","onClick":function(){self.getElement("cmdUpdate").setEnabled(false);self.onSave(null,function(resp,errCode,errStr){self.setError(window.getApp().formatError(errCode,errStr));},function(){self.getElement("cmdUpdate").setEnabled(true);});}}));this.addElement(new OrderCalc_View(id+":calc",{"calc":true,"dialogContext":this,"getPayCash":function(){return true;}}));this.addElement(new ButtonCmd(id+":cmdMakeOrder",{"caption":" Оформить заявку","glyph":"glyphicon-plus","onClick":function(){self.onSave(function(){self.m_onMakeOrder();});}}));}
options.cmdOk=false;options.cmdCancel=false;options.cmdSave=false;AstIncomeCall_View.superclass.constructor.call(this,id,options);var r_bd=[new DataBinding({"control":this.getElement("contact_name")}),new DataBinding({"control":this.getElement("contact_tel")}),new DataBinding({"control":this.getElement("manager_comment")}),new DataBinding({"control":this.getElement("client"),"fieldId":"clients_ref"})];this.setDataBindings(r_bd);var write_b=[new CommandBinding({"control":this.getElement("contact_name")}),new CommandBinding({"control":this.getElement("manager_comment")}),new CommandBinding({"control":this.getElement("client"),"fieldId":"client_id"}),new CommandBinding({"func":function(pm){var client_id=self.getElement("client").getValue().getKey();if(self.m_model.getFieldValue("clients_ref").getDescr()!=self.getElement("client").getNode().value){pm.setFieldValue("client_name",self.getElement("client").getNode().value);if(!client_id||client_id=="null"){self.getElement("client").setKeys(self.getElement("client").getInitKeys());DOMHelper.delClass(self.getElement("client").getNode(),"null-ref");client_id=self.getElement("client").getInitKeys().id;}}
else{pm.unsetFieldValue("client_name");}
pm.setFieldValue("client_id",client_id);}})];this.setWriteBindings(write_b);if(client_id){this.addDetailDataSet({"control":this.getElement("client_call_history").getElement("grid"),"controlFieldId":"client_id","value":client_id});this.addDetailDataSet({"control":this.getElement("client_ship_history").getElement("grid"),"controlFieldId":"client_id","value":client_id});var client_debt=options.model.getFieldValue("debt");if(client_debt!=undefined&&client_debt!=0){var debt_n=document.getElementById(id+":client_debt");var client_debt_pref="";if(client_debt){DOMHelper.addClass(debt_n,"text-danger");client_debt_pref="Долг: ";}else if(client_debt<0){DOMHelper.addClass(debt_n,"text-success");}
var client_debt_s=CommonHelper.numberFormat(client_debt,2,","," ");DOMHelper.setText(debt_n,client_debt_pref+client_debt_s+" руб.");}}}
extend(AstIncomeCall_View,ViewObjectAjx); 
function AstIncomeUnknownCall_View(id,options){options=options||{};this.m_options=options;options.templateOptions=options.templateOptions||{};var input=new Control(this.getId()+":maskTel","input",{"attrs":{"value":options.models.AstCallCurrent_Model.getFieldValue("contact_tel")},"visible":false});$(input.getNode()).mask(window.getApp().getPhoneEditMask());options.templateOptions.contact_tel=input.m_node.value;this.m_onSetClientBuyer=options.onSetClientBuyer;var self=this;options.addElement=function(){this.addElement(new ButtonCmd(id+":cmdSetClientBuyer",{"caption":"Клиент ","glyph":"glyphicon-plus","onClick":function(){self.cmdSetClientType("buyer");}}));this.addElement(new ButtonCmd(id+":cmdSetClientAcc",{"caption":"Бухгалтерия","glyph":null,"onClick":function(){self.cmdSetClientType("acc");}}));this.addElement(new ButtonCmd(id+":cmdSetClientElse",{"caption":"Прочие","glyph":null,"onClick":function(){self.cmdSetClientType("else");}}));}
AstIncomeUnknownCall_View.superclass.constructor.call(this,id,options);}
extend(AstIncomeUnknownCall_View,View);AstIncomeUnknownCall_View.prototype.cmdSetClientType=function(tp){var pm=(new AstCall_Controller()).getPublicMethod("set_active_call_client_kind");pm.setFieldValue("kind",tp);pm.setFieldValue("id",this.m_options.models.AstCallCurrent_Model.getFieldValue("unique_id"));var self=this;pm.run({"ok":function(resp){var m=resp.getModel("InsertedId_Model");if(m&&m.getNextRow()){var cl=new RefType({"keys":{"id":m.getFieldValue("client_id")},"descr":m.getFieldValue("client_name"),"dataType":"clients"});self.m_options.models.AstCallCurrent_Model.setFieldValue("client_id",m.getFieldValue("client_id"));self.m_options.models.AstCallCurrent_Model.setFieldValue("client_kind",tp);self.m_options.models.AstCallCurrent_Model.setFieldValue("clients_ref",cl);}
self.m_onSetClientBuyer(self.m_options);}})} 
function SMSForSendingList_View(id,options){SMSForSendingList_View.superclass.constructor.call(this,id,options);var model=options.models.SMSForSending_Model;var contr=new SMSForSending_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdDelete":false,"cmdEdit":false,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата создания","columns":[new GridColumnDateTime({"field":model.getField("date_time"),"dateFormat":"d/m/y H:i"})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:sms_type",{"value":"Тип","columns":[new EnumGridColumn_sms_types({"field":model.getField("sms_type")})]}),new GridCellHead(id+":grid:head:tel",{"value":"Телефон","columns":[new GridColumnPhone({"field":model.getField("tel")})]}),new GridCellHead(id+":grid:head:body",{"value":"Текст","columns":[new GridColumn({"field":model.getField("body")})]}),new GridCellHead(id+":grid:head:sent_date_time",{"value":"Дата отправки","columns":[new GridColumnDateTime({"field":model.getField("sent_date_time"),"dateFormat":"d/m/y H:i"})],"sortable":true}),new GridCellHead(id+":grid:head:delivered_date_time",{"value":"Дата доставки","columns":[new GridColumnDateTime({"field":model.getField("delivered_date_time"),"dateFormat":"d/m/y H:i"})]}),new GridCellHead(id+":grid:head:sms_id",{"value":"ID смс","columns":[new GridColumn({"field":model.getField("sms_id")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(SMSForSendingList_View,ViewAjx); 
function SMSPatternList_View(id,options){SMSPatternList_View.superclass.constructor.call(this,id,options);var model=options.models.SMSPatternList_Model;var contr=new SMSPattern_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null,"def_lang":null};window.getApp().getConstantManager().get(constants);var role_id=window.getApp().getServVar("role_id");var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":SMSPatternDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":(role_id=="owner"),"cmdEdit":(role_id=="owner"||role_id=="boss"||role_id=="manager"),"cmdCopy":(role_id=="owner"),"cmdDelete":(role_id=="owner"),"cmdFilter":true}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:sms_type",{"value":"Тип","columns":[new EnumGridColumn_sms_types({"field":model.getField("sms_type"),"ctrlClass":Enum_sms_types,"ctrlOptions":{"required":true}})]}),new GridCellHead(id+":grid:head:lang",{"value":"Язык","columns":[new GridColumnRef({"field":model.getField("langs_ref")})]}),new GridCellHead(id+":grid:head:pattern",{"value":"Текст","columns":[new GridColumn({"field":model.getField("pattern")})]}),new GridCellHead(id+":grid:head:user_list",{"value":"Телефоны","columns":[new GridColumn({"field":model.getField("user_list")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(SMSPatternList_View,ViewAjxList); 
function SMSPatternDialog_View(id,options){options=options||{};options.controller=new SMSPattern_Controller();options.model=options.models.SMSPatternList_Model;if(options.model&&options.model.getRowIndex())
options.model.getNextRow();options.addElement=function(){this.addElement(new Enum_sms_types(id+":sms_type",{"labelCaption":"Тип:","required":true}));this.addElement(new LangEditRef(id+":langs_ref",{"required":true}));this.addElement(new EditText(id+":pattern",{"labelCaption":"Текст шаблона:","required":true}));this.addElement(new SMSPatternUserPhoneList_View(id+":user_phones",{"detail":true}));}
SMSPatternDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("sms_type")}),new DataBinding({"control":this.getElement("langs_ref")}),new DataBinding({"control":this.getElement("pattern")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("sms_type")}),new CommandBinding({"control":this.getElement("langs_ref"),"fieldId":"lang_id"}),new CommandBinding({"control":this.getElement("pattern")})]);this.addDetailDataSet({"control":this.getElement("user_phones").getElement("grid"),"controlFieldId":"sms_pattern_id","value":options.model.getFieldValue("id")});}
extend(SMSPatternDialog_View,ViewObjectAjx); 
function SMSPatternUserPhoneList_View(id,options){options=options||{};SMSPatternUserPhoneList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.SMSPatternUserPhoneList_Model)?options.models.SMSPatternUserPhoneList_Model:new SMSPatternUserPhoneList_Model();var contr=new SMSPatternUserPhone_Controller();var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdSearch":false}),"popUpMenu":popup_menu,"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:users_ref",{"value":"Пользователь","columns":[new GridColumn({"field":model.getField("users_ref"),"formatFunction":function(f){var res="";var u=f.users_ref.getValue();if(u&&!u.isNull()){res=u.getDescr();var tel=f.user_tel.getValue();if(tel&&tel.length){res+=" ("+tel+")";}}
return res;},"ctrlClass":UserEditRef,"ctrlBindFieldId":"user_id","ctrlOptions":{"labelCaption":""}})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(SMSPatternUserPhoneList_View,ViewAjxList); 
function TrackerZoneControlList_View(id,options){TrackerZoneControlList_View.superclass.constructor.call(this,id,options);var model=options.models.TrackerZoneControlList_Model;var contr=new TrackerZoneControl_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:destination",{"value":"Зона","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"form":Destination_Form,"ctrlBindFieldId":"destination_id","ctrlClass":DestinationEdit,"ctrlOptions":{"labelCaption":""}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(TrackerZoneControlList_View,ViewAjxList); 
function AssignedVehicleList_View(id,options){options=options||{};var prod_site_m=window.getApp().getProdSiteModel();if(options.shortDescriptions===true){options.template=window.getApp().getTemplate("AssignedVehicleAllBasesList_View");}else{options.templateOptions=options.templateOptions||{};var menu_n=DOMHelper.getElementsByAttr("navbar",document.body,"class",true);options.templateOptions.MENU_EXISTS=(menu_n&&menu_n.length);options.templateOptions.PROD_SITE_W=12/this.PROD_SITE_COUNT;}
var constants={"order_grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);this.m_noAutoRefresh=options.noAutoRefresh;options.addElement=function(){this.m_prodSiteControlList=[];var model=(options.models&&options.models.AssignedVehicleList_Model)?options.models.AssignedVehicleList_Model:new AssignedVehicleList_Model();prod_site_m.reset();while(prod_site_m.getNextRow()){var ps_id=prod_site_m.getFieldValue("id");if(options.shortDescriptions!==true&&ps_id>4){continue;}
var prod_cite=new AssignedVehicleGrid(id+":prodSite"+ps_id,{"model":model,"prodSiteId":ps_id,"prodSiteDescr":prod_site_m.getFieldValue("name"),"noAutoRefresh":options.noAutoRefresh,"shortDestinations":options.shortDestinations,"playSound":(options.shortDescriptions!==true)});this.addElement(prod_cite);this.m_prodSiteControlList.push(prod_cite);}
if(!options.shortDescriptions){var sh_model=(options.models&&options.models.ShippedVehicleList_Model)?options.models.ShippedVehicleList_Model:new ShippedVehicleList_Model();this.addElement(new GridAjx(id+":shipped_vehicles_list",{"model":sh_model,"readPublicMethod":(new Shipment_Controller()).getPublicMethod("get_shipped_vihicles_list"),"editInline":null,"editWinClass":null,"commands":null,"popUpMenu":null,"head":new GridHead(id+":shipped_vehicles_list-grid:head",{"elements":[new GridRow(id+":shipped_vehicles_list-grid:head:row0",{"elements":[new GridCellHead(id+":shipped_vehicles_list-grid:head:vehicles_ref",{"value":"ТС","columns":[new GridColumnRef({"field":sh_model.getField("vehicles_ref")})]}),new GridCellHead(id+":shipped_vehicles_list-grid:head:drivers_ref",{"value":"Водитель","columns":[new GridColumnRef({"field":sh_model.getField("drivers_ref")})]}),new GridCellHead(id+":shipped_vehicles_list-grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":sh_model.getField("destinations_ref")})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":null,"rowSelect":false,"navigate":false,"focus":false}));}}
if(!this.m_noAutoRefresh){var self=this;options.srvEvents={"events":[{"id":"VehicleScheduleState.insert"},{"id":"VehicleScheduleState.update"},{"id":"VehicleScheduleState.delete"}],"onEvent":function(json){self.srvEventsCallBack(json);},"onSubscribed":function(){self.setRefreshInterval(0);},"onClose":function(message){self.setRefreshInterval(self.m_httpRefreshInterval);}};this.m_httpRefreshInterval=constants.order_grid_refresh_interval.getValue()*1000;}
AssignedVehicleList_View.superclass.constructor.call(this,id,options);}
extend(AssignedVehicleList_View,View);AssignedVehicleList_View.prototype.PROD_SITE_COUNT=3;AssignedVehicleList_View.prototype.m_refreshPublicMethod;AssignedVehicleList_View.prototype.m_refreshTimer;AssignedVehicleList_View.prototype.m_refreshInterval;AssignedVehicleList_View.prototype.m_prodSiteControlList;AssignedVehicleList_View.prototype.toggleMenu=function(){var menu_n=DOMHelper.getElementsByAttr("navbar",document.body,"class",true);if(menu_n&&menu_n.length){var t=document.getElementById(this.getId()+":menu_toggle");if($(menu_n[0]).is(":visible")){$(menu_n[0]).slideUp("slow");this.m_oldToggleTitle=t.getAttribute("title");this.m_oldToggleText=DOMHelper.getText(t);DOMHelper.setText(t,">");t.setAttribute("title","Показать меню");}
else{$(menu_n[0]).slideDown("slow");DOMHelper.setText(t,this.m_oldToggleText);t.setAttribute("title",this.m_oldToggleTitle);}}}
AssignedVehicleList_View.prototype.setData=function(m){for(var i=0;i<this.m_prodSiteControlList.length;i++){var grid=this.getElement("prodSite"+this.m_prodSiteControlList[i].m_prodSiteId);if(grid){grid.getModel().setData(m);grid.onGetData();}}}
AssignedVehicleList_View.prototype.onRefresh=function(){if(!this.m_refreshPublicMethod){this.m_refreshPublicMethod=(new Shipment_Controller()).getPublicMethod("get_assigned_vehicle_list");}
var self=this;this.m_refreshPublicMethod.run({"ok":function(resp){for(var i=0;i<self.m_prodSiteControlList.length;i++){self.m_prodSiteControlList[i].m_model=resp.getModel("AssignedVehicleList_Model");self.m_prodSiteControlList[i].onGetData();}
var sh_gr=self.getElement("shipped_vehicles_list");if(sh_gr){sh_gr.m_model=resp.getModel("ShippedVehicleList_Model");sh_gr.onGetData();}}});}
AssignedVehicleList_View.prototype.setRefreshInterval=function(v){if(this.m_refreshInterval==v){return;}
this.m_refreshInterval=v;if(this.m_refreshTimer!=undefined){console.log("clearing timer")
window.clearInterval(this.m_refreshTimer);}
if(v>0){var self=this;this.m_refreshTimer=setInterval(function(){self.onRefresh();},v);}}
AssignedVehicleList_View.prototype.toDOM=function(p){AssignedVehicleList_View.superclass.toDOM.call(this,p);if(!this.m_noAutoRefresh&&!window.getApp().getAppSrv()){this.setRefreshInterval(this.m_httpRefreshInterval);}
var self=this;EventHelper.add(document.getElementById(this.getId()+":menu_toggle"),"click",function(){self.toggleMenu();});}
AssignedVehicleList_View.prototype.delDOM=function(){if(this.m_refreshTimer!=undefined){window.clearInterval(this.m_refreshTimer);}
AssignedVehicleList_View.superclass.delDOM.call(this);}
AssignedVehicleList_View.prototype.srvEventsCallBack=function(json){if(json.controllerId=="VehicleScheduleState"){this.onRefresh();}} 
function AstCallClientCallHistoryList_View(id,options){options=options||{};AstCallClientCallHistoryList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.AstCallClientCallHistoryList_Model)?options.models.AstCallClientCallHistoryList_Model:new AstCallClientCallHistoryList_Model();var contr=new AstCall_Controller();var grid_columns=[new GridCellHead(id+":grid:head:dt",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("dt"),"dateFormat":"d/m/y H:i"})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:manager_comment",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("manager_comment")})]})];this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["unique_id"],"readPublicMethod":contr.getPublicMethod("client_call_hist"),"editInline":true,"editWinClass":null,"popUpMenu":null,"commands":null,"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_columns})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(AstCallClientCallHistoryList_View,ViewAjxList); 
function AstCallClientShipHistoryList_View(id,options){options=options||{};AstCallClientShipHistoryList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.AstCallClientShipHistoryList_Model)?options.models.AstCallClientShipHistoryList_Model:new AstCallClientShipHistoryList_Model();var contr=new AstCall_Controller();var grid_columns=[new GridCellHead(id+":grid:head:order",{"value":"Заявка","columns":[new GridColumnRef({"field":model.getField("orders_ref"),"form":OrderDialog_Form})]}),new GridCellHead(id+":grid:head:concrete_type",{"value":"Марка","columns":[new GridColumnRef({"field":model.getField("concrete_types_ref")})]}),new GridCellHead(id+":grid:head:destination",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"form":Destination_Form})]}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant")})]})];this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["unique_id"],"readPublicMethod":contr.getPublicMethod("client_ship_hist"),"editInline":true,"editWinClass":null,"popUpMenu":null,"commands":null,"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_columns})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(AstCallClientShipHistoryList_View,ViewAjxList); 
function OrderCalc_View(id,options){options=options||{};var constants={"min_quant_for_ship_cost":null};window.getApp().getConstantManager().get(constants);this.m_minQuantForShipCost=constants.min_quant_for_ship_cost.getValue();options.template=options.calc?window.getApp().getTemplate("OrderCalc"):null;this.m_getAvailSpots=options.getAvailSpots;this.m_getPayCash=options.getPayCash;this.m_dialogContext=options.dialogContext;this.m_readOnly=options.readOnly;var self=this;this.m_dialogContext.m_onChangeDate=function(){self.checkPumpVehicle();}
this.m_dialogContext.m_onChangeTime=function(){self.checkPumpVehicle();}
options.addElement=function(){var obj_bs_cl=("control-label "+window.getBsCol(2));this.addElement(new DestinationForOrderEdit(id+":destination",{"labelClassName":obj_bs_cl,"required":true,"acMinLengthForQuery":0,"onSelect":function(f){self.onSelectDestination(f);self.setClientSpec();},"onClear":function(){self.getElement("destination").getErrorControl().setValue("","info");self.setClientSpec();}}));this.addElement(new EditFloat(id+":quant",{"precision":2,"labelCaption":"Количество:","labelClassName":obj_bs_cl,"editContClassName":("input-group "+window.getBsCol(2)),"events":{"change":function(){self.recalcUnloadCost();self.recalcTotal();if(self.m_getAvailSpots){self.m_getAvailSpots();}},"keyup":function(e){self.checkPumpVehicle();self.recalcUnloadCost();self.recalcTotal();if(self.m_getAvailSpots){self.m_getAvailSpots();}}}}));this.addElement(new ConcreteTypeEdit(id+":concrete_type",{"labelClassName":obj_bs_cl,"editContClassName":("input-group "+window.getBsCol(2)),"onSelect":function(f){self.onSelectConcrete(f);self.setClientSpec();},"required":true,"asyncRefresh":false}));this.addElement(new Enum_unload_types(id+":unload_type",{"labelCaption":"Вид насоса:","labelClassName":obj_bs_cl,"editContClassName":("input-group "+window.getBsCol(2)),"defaultValue":"none","addNotSelected":false,"events":{"change":function(){self.changeUnloadType();self.recalcTotal();}}}));this.addElement(new PumpVehicleEdit(id+":pump_vehicle",{"labelClassName":obj_bs_cl,"editContClassName":("input-group "+window.getBsCol(2)),"onSelect":function(f){self.onSelectPumpVehicle(f);},"asyncRefresh":false}));this.addElement(new ClientSpecificationEdit(id+":client_specification",{}));this.addElement(new EditMoney(id+":concrete_cost",{"labelClassName":("control-label "+window.getBsCol(5))+" orderMoneyFieldLab","className":"form-control orderMoneyField","labelCaption":"Бетон:","enabled":false,"value":0,"attrs":{"initvalue":"0.00"},"events":{"change":function(){self.recalcTotal();}}}));this.addElement(new EditMoney(id+":destination_cost",{"labelClassName":("control-label "+window.getBsCol(5))+" orderMoneyFieldLab","className":"form-control orderMoneyField","labelCaption":"Доставка:","value":0,"attrs":{"initvalue":"0.00"},"enabled":false,"events":{"change":function(){self.recalcTotal();}}}));this.addElement(new EditMoney(id+":unload_cost",{"labelClassName":("control-label "+window.getBsCol(5))+" orderMoneyFieldLab","className":"form-control orderMoneyField","labelCaption":"Насос:","value":0,"attrs":{"initvalue":"0.00"},"enabled":false,"events":{"change":function(){self.recalcTotal();}}}));this.addElement(new EditMoneyEditable(id+":total",{"labelClassName":("control-label "+window.getBsCol(5))+" orderMoneyFieldLab","editContClassName":("input-group "+window.getBsCol(12)),"className":"form-control orderMoneyField","labelCaption":"Всего:","value":0,"attrs":{"initvalue":"0.00"},"enabled":false,"toggleAllowed":!this.m_readOnly,"onToggleEditable":function(){self.recalcTotal();}}));}
OrderCalc_View.superclass.constructor.call(this,id,options);}
extend(OrderCalc_View,View);OrderCalc_View.prototype.m_shipQuantForCostGrade_Model;OrderCalc_View.prototype.onSelectDestination=function(f){if(f){this.setDestinationPrice(f.price.getValue(),f.distance.getValue(),f.time_route.getValue());this.recalcTotal();}}
OrderCalc_View.prototype.setDestinationPrice=function(price,distance,timeRout){this.m_destinationPrice=parseFloat(price);this.m_destinationDistance=parseFloat(distance);var dest_inf="";if(!this.getElement("destination").isNull()){dest_inf="Расстояние.:"+distance+" км."+",время:"+DateHelper.format(timeRout,"H:i")+",цена:"+(this.m_destinationPrice.toFixed(2))+"руб.";}
this.getElement("destination").getErrorControl().setValue(dest_inf,"info");}
OrderCalc_View.prototype.setConcretePrice=function(price){this.m_concretePrice=parseFloat(price);var inf=this.m_concretePrice?("Стоимость: "+(this.m_concretePrice).toFixed(2)+" руб/м3"):"";this.getElement("concrete_type").getErrorControl().setValue(inf,"info");}
OrderCalc_View.prototype.onSelectConcrete=function(f){this.setConcretePrice(f.price.getValue());this.recalcTotal();}
OrderCalc_View.prototype.recalcTotalCont=function(){var quant=this.getElement("quant").getValue();var quant_for_ship_cost=quant;if(quant_for_ship_cost<this.m_minQuantForShipCost){quant_for_ship_cost=this.m_minQuantForShipCost;}
this.m_shipQuantForCostGrade_Model.reset();while(this.m_shipQuantForCostGrade_Model.getNextRow()){var q_to=this.m_shipQuantForCostGrade_Model.getFieldValue("quant_to");var q_from=this.m_shipQuantForCostGrade_Model.getFieldValue("quant");var dist_to=this.m_shipQuantForCostGrade_Model.getFieldValue("distance_to");var dist_from=this.m_shipQuantForCostGrade_Model.getFieldValue("distance_from");if(this.m_destinationDistance<=dist_to&&this.m_destinationDistance>=dist_from&&quant<=q_to&&quant>=q_from){quant_for_ship_cost=q_to;break;}}
var concrete_cost=this.m_concretePrice*quant;var destination_cost=this.m_destinationPrice*quant_for_ship_cost;this.getElement("destination_cost").setValue(destination_cost);this.getElement("concrete_cost").setValue(concrete_cost);if(!this.getElement("total").getEnabled()){this.getElement("total").setValue((concrete_cost+destination_cost+this.getElement("unload_cost").getValue()));}}
OrderCalc_View.prototype.recalcTotal=function(){if(this.m_getPayCash()&&!this.getElement("total").getEnabled()){if(!this.m_shipQuantForCostGrade_Model){if(this.m_shipQuantForCostGradeQuerySent){return;}
var self=this;var pm=(new ShipQuantForCostGrade_Controller()).getPublicMethod("get_list");this.m_shipQuantForCostGradeQuerySent=true;pm.run({"ok":function(resp){self.m_shipQuantForCostGrade_Model=resp.getModel("ShipQuantForCostGrade_Model");self.recalcTotalCont();self.m_shipQuantForCostGradeQuerySent=false;}})}
else{this.recalcTotalCont();}}}
OrderCalc_View.prototype.changeUnloadType=function(){var v=this.getElement("unload_type").getValue();var ctrl=this.getElement("pump_vehicle");var ctrl_pr=this.getElement("unload_cost");if(v=="band"||v=="pump"){en=true;}
else{en=false;ctrl.reset();ctrl_pr.reset();}
ctrl.setEnabled(en);}
OrderCalc_View.prototype.recalcUnloadCost=function(){if(this.m_getPayCash()){var cost_ctrl=this.getElement("unload_cost");var cost=0;if(!this.getElement("pump_vehicle").isNull()&&this.m_pumpPriceValue_Model&&this.m_pumpPriceValue_Model.getRowCount()){var quant=this.getElement("quant").getValue();var quant_over=quant;var garant_sum=0;this.m_pumpPriceValue_Model.reset();while(this.m_pumpPriceValue_Model.getNextRow()){if(this.m_pumpPriceValue_Model.getFieldValue("price_garanteed")&&this.m_pumpPriceValue_Model.getFieldValue("quant_to")<=quant&&this.m_pumpPriceValue_Model.getFieldValue("price_fixed")>0){garant_sum=this.m_pumpPriceValue_Model.getFieldValue("price_fixed");quant_over=quant-this.m_pumpPriceValue_Model.getFieldValue("quant_to");}
if(quant>=this.m_pumpPriceValue_Model.getFieldValue("quant_from")&&quant<=this.m_pumpPriceValue_Model.getFieldValue("quant_to")){cost=this.m_pumpPriceValue_Model.getFieldValue("price_fixed");cost=cost?cost:(garant_sum+this.m_pumpPriceValue_Model.getFieldValue("price_m")*quant_over);break;}}}
cost_ctrl.setValue(cost);}}
OrderCalc_View.prototype.showPumpVehicleWarning=function(minQuant,minTimeInterval,tm,quant){let txt="Запрещено выбирать этот насос на "+tm+" с объемом "+quant+"м3.";this.getElement("pump_vehicle").getErrorControl().setValue(txt,"danger");if(!this.m_lastPumpVehWarn||(new Date()).getTime()-this.m_lastPumpVehWarn>10000){window.showTempError(txt+" Заявка не будет записана.",null,5000);this.m_lastPumpVehWarn=(new Date()).getTime();}}
OrderCalc_View.prototype.hidePumpVehicleWarning=function(){this.getElement("pump_vehicle").getErrorControl().clear();}
OrderCalc_View.prototype.checkPumpVehicle=function(){if(!this.getElement("pump_vehicle").isNull()&&window.getApp().controlePumpVehicle()){let order_id=this.m_dialogContext.getElement("id").getValue();let d=this.m_dialogContext.getElement("date_time_date").getValue();if(!DateHelper.isValidDate(d)){this.hidePumpVehicleWarning();return;}
let t=this.m_dialogContext.getElement("date_time_time").getValue();let pm=(new PumpVehicle_Controller()).getPublicMethod("check_order_min_vals");if(!order_id){pm.unsetFieldValue("order_id");}else{pm.setFieldValue("order_id",order_id);}
let q=this.getElement("quant").getValue();if(q==undefined){q=0;}
let dt=DateHelper.format(d,"Y-m-d")+"T"+t+":00";pm.setFieldValue("order_quant",q);pm.setFieldValue("order_date_time",dt);pm.setFieldValue("pump_vehicle_id",this.getElement("pump_vehicle").getValue().getKey("id"));let self=this;pm.run({"ok":function(resp){let m=resp.getModel("CheckResult_Model");if(!m||!m.getNextRow()){return;}
let res=m.getFieldValue("passed");if(res!="true"){self.showPumpVehicleWarning(m.getFieldValue("min_quant"),m.getFieldValue("min_time_interval"),t,q);}else{self.hidePumpVehicleWarning();}}})}else{this.hidePumpVehicleWarning();}}
OrderCalc_View.prototype.onSelectPumpVehicleCont=function(f){this.recalcUnloadCost();this.recalcTotal();this.checkPumpVehicle();}
OrderCalc_View.prototype.onSelectPumpVehicle=function(f){if(this.getElement("pump_vehicle").isNull()){this.onSelectPumpVehicleCont();}
else{if(f.pump_prices.isNull()){throw new Error("Не задана ценовая схема для насоса!")}
var pump_prices=f.pump_prices.getValue();if(!pump_prices.rows||!pump_prices.rows.length){throw new Error("Не верное значение для ценовых схем!")}
var pump_price_id,pump_price_dt;var dt;var dt_ctrl=this.m_dialogContext.getElement("date_time_date");if(dt_ctrl){dt=dt_ctrl.getValue().getTime();}
else{dt=DateHelper.time().getTime();}
for(var j=0;j<pump_prices.rows.length;j++){var pump_price_dt_tmp=DateHelper.strtotime(pump_prices.rows[j].fields.dt_from);if(pump_price_dt_tmp&&DateHelper.isValidDate(pump_price_dt_tmp)&&pump_price_dt_tmp.getTime()<=dt&&(!pump_price_dt||pump_price_dt.getTime()<pump_price_dt_tmp.getTime())){pump_price_id=pump_prices.rows[j].fields.pump_price.getKey("id");pump_price_dt=pump_price_dt_tmp;}}
var pay_cash_ctrl=this.m_dialogContext.getElement("pay_cash");if(pay_cash_ctrl&&pay_cash_ctrl.getValue()&&pump_prices.rows.length>=2){window.showTempNote("Используется ценовая схема насоса на "+DateHelper.format(pump_price_dt,"d/m/y"));}
var contr=new PumpPriceValue_Controller();var pm=contr.getPublicMethod("get_list");pm.setFieldValue(contr.PARAM_COND_FIELDS,"pump_price_id");pm.setFieldValue(contr.PARAM_COND_VALS,pump_price_id);pm.setFieldValue(contr.PARAM_COND_SGNS,contr.PARAM_SGN_EQUAL);var self=this;pm.run({"ok":function(resp){self.m_pumpPriceValue_Model=resp.getModel("PumpPriceValue_Model");self.onSelectPumpVehicleCont();}});}}
OrderCalc_View.prototype.setPayCash=function(){var field_set=document.getElementById(this.getId()+":sum_totals");if(this.m_getPayCash()){DOMHelper.delClass(field_set,"hidden");this.recalcUnloadCost();this.recalcTotal();}
else{DOMHelper.addClass(field_set,"hidden");this.getElement("total").reset();this.getElement("destination_cost").reset();this.getElement("concrete_cost").reset();this.getElement("unload_cost").reset();}
let m=this.m_dialogContext.getModel();let total=m.getFieldValue("total");if(isNaN(total)){total=0;}
let unloadCost=m.getFieldValue("unload_cost");if(isNaN(unloadCost)){unloadCost=0;}
let concrCost=m.getFieldValue("concrete_cost");if(isNaN(concrCost)){concrCost=0;}
let destCost=m.getFieldValue("destination_cost");if(isNaN(destCost)){destCost=0;}
if(total!=this.getElement("total").getValue()||unloadCost!=this.getElement("unload_cost").getValue()||concrCost!=this.getElement("concrete_cost").getValue()||destCost!=this.getElement("destination_cost").getValue()){window.showTempWarn("Пересчитана сумма, запишите документ!",null,10000);}}
OrderCalc_View.prototype.setClientSpec=function(){var cl=this.m_dialogContext.getElement("client").getValue();var dest=this.getElement("destination").getValue();var ct=this.getElement("concrete_type").getValue();var spec_ctrl=this.getElement("client_specification");var pm=spec_ctrl.getAutoComplete().getPublicMethod();var en=false;if((!cl||cl.isNull())||(!dest||dest.isNull())||(!ct||ct.isNull())){pm.unsetFieldValue("client_id");pm.unsetFieldValue("destination_id");pm.unsetFieldValue("concrete_type_id");spec_ctrl.reset();}else{var cl_id=cl.getKey();var dest_id=dest.getKey();var ct_id=ct.getKey();if((this.m_specClId&&this.m_specClId!=cl_id)||(this.m_specDestId&&this.m_specDestId!=dest_id)||(this.m_specCtId&&this.m_specCtId!=ct_id)){spec_ctrl.reset();}
this.m_specClId=cl_id;this.m_specDestId=dest_id;this.m_specCtId=ct_id;pm.setFieldValue("client_id",cl_id);pm.setFieldValue("destination_id",dest_id);pm.setFieldValue("concrete_type_id",ct_id);en=true;}
spec_ctrl.setEnabled(en);if(en&&$(spec_ctrl.getNode()).is(":focus")){spec_ctrl.getAutoComplete().fillArrayOnPattern(spec_ctrl.getNode());}} 
function ClientTelList_View(id,options){options=options||{};ClientTelList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ClientTelList_Model)?options.models.ClientTelList_Model:new ClientTelList_Model();var contr=new ClientTel_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagination;var grid_columns=[];var filters;if(!options.detail){var pagClass=window.getApp().getPaginationClass();pagination=new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()});filters={};filters.client={"binding":new CommandBinding({"control":new ClientEdit(id+":filter-ctrl-client"),"field":new FieldInt("client_id")}),"sign":"e"};grid_columns.push(new GridCellHead(id+":grid:head:clients_ref",{"value":"Клиент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"form":ClientDialog_Form,"ctrlClass":ClientEdit,"searchOptions":{"field":model.getField("client_id"),"searchType":"on_match","typeChange":false}})]}));grid_columns.push(new GridCellHead(id+":grid:head:search",{"value":"Контакт","columns":[new GridColumn({"field":model.getField("search"),"ctrlClass":EditString,"searchOptions":{"field":model.getField("search"),"typeChange":false}})],"sortable":true,"sort":"asc"}));}
else{grid_columns.push(new GridCellHead(id+":grid:head:tel",{"value":"Телефон","columns":[new GridColumnPhone({"field":model.getField("tel")})]}));grid_columns.push(new GridCellHead(id+":grid:head:name",{"value":"ФИО","columns":[new GridColumn({"field":model.getField("name")})]}));}
grid_columns.push(new GridCellHead(id+":grid:head:post",{"value":"Должность","columns":[new GridColumn({"field":model.getField("post")})]}));grid_columns.push(new GridCellHead(id+":grid:head:email",{"value":"Почта","columns":[new GridColumn({"field":model.getField("email")})]}));this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":!options.detail?options.variantStorage:null,"cmdSearch":!options.detail,"addCustomCommandsAfter":function(commands){commands.push(new SendNotificationCmd(id+":grid:cmd:sendNotif",{"showCmdControl":true,"getNotifRef":function(model,callBack){callBack(new RefType({"keys":{"id":model.getFieldValue("id")},"descr":model.getFieldValue("search"),"dataType":"client_tels"}));}}));}}),"popUpMenu":new PopUpMenu(),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_columns})]}),"pagination":pagination,"autoRefresh":false,"refreshInterval":!options.detail?(constants.grid_refresh_interval.getValue()*1000):0,"rowSelect":false,"focus":true}));}
extend(ClientTelList_View,ViewAjxList); 
function EmployeeWorkTimeScheduleList_View(id,options){EmployeeWorkTimeScheduleList_View.superclass.constructor.call(this,id,options);var model=options.models.EmployeeWorkTimeScheduleList_Model;var self=this;var init_dt;if(options.models&&options.models.InitDate&&options.models.InitDate.getNextRow()){init_dt=DateHelper.strtotime(options.models.InitDate.getFieldValue("dt"));}
var per_select=new EditPeriodMonth(id+":period_filter",{"dateFrom":init_dt,"onChange":function(dateTime){var grid=self.getElement("grid");grid.setFilter({"field":"day","sign":"ge","val":DateHelper.format(dateTime,"Y-m-d")});grid.setFilter({"field":"day","sign":"le","val":DateHelper.format(DateHelper.monthEnd(dateTime),"Y-m-d")});window.setGlobalWait(true);grid.onRefresh(function(){window.setGlobalWait(false);});}});this.addElement(per_select);this.addElement(new EmployeeWorkTimeScheduleGrid(id+":grid",{"model":model}));}
extend(EmployeeWorkTimeScheduleList_View,ViewAjx); 
function ClientValidDuplicateList_View(id,options){ClientValidDuplicateList_View.superclass.constructor.call(this,id,options);var model=options.models.ClientValidDuplicateList_Model;var contr=new ClientValidDuplicate_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["tel"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:tel",{"value":"Телефон","columns":[new GridColumnPhone({"field":model.getField("tel")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:clients",{"value":"Клиенты","columns":[new GridColumn({"field":model.getField("clients")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ClientValidDuplicateList_View,ViewAjx); 
function LabEntryReportList_View(id,options){options=options||{};var contr=new LabEntry_Controller();options.publicMethod=contr.getPublicMethod("lab_report");options.reportViewId="ViewHTMLXSLT";options.templateId="LabEntryReport";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDate("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};LabEntryReportList_View.superclass.constructor.call(this,id,options);}
extend(LabEntryReportList_View,ViewReport); 
function AstCallManagerReport_View(id,options){options=options||{};var contr=new AstCall_Controller();options.publicMethod=contr.getPublicMethod("manager_report");options.reportViewId="ViewHTMLXSLT";options.templateId="AstCallReport";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDate("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"user":{"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group-filter"}),"field":new FieldInt("user_id")}),"sign":"e"}};AstCallManagerReport_View.superclass.constructor.call(this,id,options);}
extend(AstCallManagerReport_View,ViewReport); 
function ShipmentDialog_View(id,options){options=options||{};options.controller=new Shipment_Controller();options.model=(options.models&&options.models.ShipmentDialog_Model)?options.models.ShipmentDialog_Model:new ShipmentDialog_Model();var self=this;options.addElement=function(){this.addElement(new EditInt(id+":id",{"inline":true,"enabled":false}));this.addElement(new EditDateTime(id+":date_time",{"inline":true,"dateFormat":"d/m/y H:i","editMask":"99/99/99 99:99","enabled":false}));this.addElement(new ProductionSiteEdit(id+":production_site",{"enabled":false}));this.addElement(new ClientEdit(id+":client",{"enabled":false}));this.addElement(new DestinationEdit(id+":destination",{"enabled":false}));this.addElement(new VehicleScheduleEdit(id+":vehicle_schedule",{"enabled":false}));this.addElement(new ProductionSiteEdit(id+":production_site",{"enabled":false}));this.addElement(new EditFloat(id+":quant",{"labelCaption":"Количество:","editContClassName":("input-group "+window.getBsCol(3)),"enabled":false}));this.addElement(new EditInt(id+":client_mark",{"editContClassName":("input-group "+window.getBsCol(3)),"labelCaption":"Баллы:"}));this.addElement(new EditCheckBox(id+":blanks_exist",{"labelClassName":("control-label "+window.getBsCol(4)),"labelCaption":"Бланки:"}));this.addElement(new EditInterval(id+":demurrage",{"editContClassName":("input-group "+window.getBsCol(3)),"labelCaption":"Простой:","editMask":"99:99"}));this.addElement(new EditText(id+":acc_comment",{"labelCaption":"Комментарий бухгалтерии (насос):"}));this.addElement(new EditText(id+":acc_comment_shipment",{"labelCaption":"Комментарий бухгалтерии (миксер):"}));this.addElement(new EditMoneyEditable(id+":pump_cost",{"className":"form-control orderMoneyField","labelCaption":"Стомисоть насос:","value":0,"enabled":false,"onToggleEditable":function(){if(!self.getElement("pump_cost").getEditAllowed()){self.getElement("pump_cost").setValue(self.getModel().getFieldValue("pump_cost_default"));}}}));this.addElement(new EditMoneyEditable(id+":pump_for_client_cost",{"className":"form-control orderMoneyField","labelCaption":"Стомисоть насос для клиента:","value":0,"enabled":false,"onToggleEditable":function(){if(!self.getElement("pump_for_client_cost").getEditAllowed()){self.getElement("pump_for_client_cost").setValue(self.getModel().getFieldValue("pump_for_client_cost_default"));}}}));this.addElement(new EditMoneyEditable(id+":ship_cost",{"className":"form-control orderMoneyField","labelCaption":"Стомисоть доставки:","value":0,"enabled":false,"onToggleEditable":function(){if(!self.getElement("ship_cost").getEditAllowed()){self.getElement("ship_cost").setValue(self.getModel().getFieldValue("ship_cost_default"));}}}));this.addElement(new OrderEdit(id+":orders_ref",{"labelCaption":"Заявка:"}));this.addElement(new ShipmentMediaList_View(id+":media",{"detail":true}));}
ShipmentDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("id")}),new DataBinding({"control":this.getElement("date_time")}),new DataBinding({"control":this.getElement("production_site"),"fieldId":"production_sites_ref"}),new DataBinding({"control":this.getElement("client"),"fieldId":"clients_ref"}),new DataBinding({"control":this.getElement("destination"),"fieldId":"destinations_ref"}),new DataBinding({"control":this.getElement("vehicle_schedule"),"fieldId":"vehicle_schedules_ref"}),new DataBinding({"control":this.getElement("quant")}),new DataBinding({"control":this.getElement("client_mark")}),new DataBinding({"control":this.getElement("blanks_exist")}),new DataBinding({"control":this.getElement("demurrage")}),new DataBinding({"control":this.getElement("acc_comment")}),new DataBinding({"control":this.getElement("acc_comment_shipment")}),new DataBinding({"control":this.getElement("pump_cost")}),new DataBinding({"control":this.getElement("pump_for_client_cost")}),new DataBinding({"control":this.getElement("ship_cost")}),new DataBinding({"control":this.getElement("orders_ref"),"fieldId":"orders_ref"})]);this.setWriteBindings([new CommandBinding({"func":function(pm){if(self.getPumpCostEditModified()){var pump_cost_edit=!self.m_model.getFieldValue("pump_cost_edit");pm.setFieldValue("pump_cost_edit",pump_cost_edit);if(pump_cost_edit){pm.setFieldValue("pump_cost",this.getElement("pump_cost").getValue());}
else{pm.unsetFieldValue("pump_cost");}}
else{pm.unsetFieldValue("pump_cost_edit");}
if(self.getPumpForClientCostEditModified()){var pump_for_client_cost_edit=!self.m_model.getFieldValue("pump_for_client_cost_edit");pm.setFieldValue("pump_for_client_cost_edit",pump_for_client_cost_edit);if(pump_for_client_cost_edit){pm.setFieldValue("pump_for_client_cost",this.getElement("pump_for_client_cost").getValue());}
else{pm.unsetFieldValue("pump_for_client_cost");}}
else{pm.unsetFieldValue("pump_for_client_cost_edit");}
if(self.getShipCostEditModified()){var ship_cost_edit=!self.m_model.getFieldValue("ship_cost_edit");pm.setFieldValue("ship_cost_edit",ship_cost_edit);if(ship_cost_edit){pm.setFieldValue("ship_cost",this.getElement("ship_cost").getValue());}
else{pm.unsetFieldValue("ship_cost");}}
else{pm.unsetFieldValue("ship_cost_edit");}}}),new CommandBinding({"control":this.getElement("client_mark")}),new CommandBinding({"control":this.getElement("blanks_exist")}),new CommandBinding({"control":this.getElement("demurrage")}),new CommandBinding({"control":this.getElement("acc_comment")}),new CommandBinding({"control":this.getElement("acc_comment_shipment")}),new CommandBinding({"control":this.getElement("pump_cost")}),new CommandBinding({"control":this.getElement("pump_for_client_cost")}),new CommandBinding({"control":this.getElement("ship_cost")}),new CommandBinding({"control":this.getElement("orders_ref"),"fieldId":"order_id"})]);this.addDetailDataSet({"control":this.getElement("media").getElement("grid"),"controlFieldId":["shipment_id"],"value":[function(){return self.m_model.getFieldValue("id");}]});}
extend(ShipmentDialog_View,ViewObjectAjx);ShipmentDialog_View.prototype.getModified=function(cmd){return(ShipmentDialog_View.superclass.getModified.call(this,cmd)||this.getPumpCostEditModified()||this.getElement("pump_cost").getModified()||this.getPumpForClientCostEditModified()||this.getElement("pump_for_client_cost").getModified()||this.getShipCostEditModified()||this.getElement("ship_cost").getModified());}
ShipmentDialog_View.prototype.getPumpForClientCostEditModified=function(pm){return(this.getElement("pump_for_client_cost").getVisible()&&this.getElement("pump_for_client_cost").getEditAllowed()!=this.m_model.getFieldValue("pump_for_client_cost_edit"));}
ShipmentDialog_View.prototype.getPumpCostEditModified=function(pm){return(this.getElement("pump_cost").getVisible()&&this.getElement("pump_cost").getEditAllowed()!=this.m_model.getFieldValue("pump_cost_edit"));}
ShipmentDialog_View.prototype.getShipCostEditModified=function(pm){return(this.getElement("ship_cost").getEditAllowed()!=this.m_model.getFieldValue("ship_cost_edit"));}
ShipmentDialog_View.prototype.onGetData=function(resp,cmd){ShipmentDialog_View.superclass.onGetData.call(this,resp,cmd);var m=this.getModel();var pv=m.getFieldValue("pump_vehicles_ref");if(!pv||pv.isNull()||!m.getFieldValue("order_last_shipment")){this.getElement("pump_cost").setVisible(false);this.getElement("pump_for_client_cost").setVisible(false);}
else{this.getElement("pump_cost").setEditAllowed(m.getFieldValue("pump_cost_edit"));this.getElement("pump_for_client_cost").setEditAllowed(m.getFieldValue("pump_for_client_cost_edit"));}
this.getElement("ship_cost").setVisible(true);this.getElement("ship_cost").setEditAllowed(m.getFieldValue("ship_cost_edit"));} 
function SandQuarryValList_View(id,options){SandQuarryValList_View.superclass.constructor.call(this,id,options);var model=options.models.SandQuarryValList_Model;var contr=new SandQuarryVal_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("start_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"quarry":{"binding":new CommandBinding({"control":new QuarryEdit(id+":filter-ctrl-quarry",{"contClassName":"form-group-filter"}),"field":new FieldInt("quarry_id")}),"sign":"e"}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:day",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("day"),"ctrlClass":EditDate,"ctrlOptions":{"value":DateHelper.time()}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:quarry_descr",{"value":"Карьер","columns":[new GridColumn({"field":model.getField("quarry_descr"),"ctrlClass":QuarryEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"quarry_id"})]}),new GridCellHead(id+":grid:head:v_0_05",{"value":"0,05","columns":[new GridColumnFloat({"field":model.getField("v_0_05"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_0_16",{"value":"0,16","columns":[new GridColumnFloat({"field":model.getField("v_0_16"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_0_63",{"value":"0,63","columns":[new GridColumnFloat({"field":model.getField("v_0_63"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_1_25",{"value":"1,25","columns":[new GridColumnFloat({"field":model.getField("v_1_25"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_2_5",{"value":"2,5","columns":[new GridColumnFloat({"field":model.getField("v_2_5"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_mkr",{"value":"мкр","columns":[new GridColumnFloat({"field":model.getField("v_mkr"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_nasip",{"value":"Насып","columns":[new GridColumnFloat({"field":model.getField("v_nasip"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_istin",{"value":"Истин","columns":[new GridColumnFloat({"field":model.getField("v_istin"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_dust",{"value":"Пыль","columns":[new GridColumnFloat({"field":model.getField("v_dust"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_void",{"value":"Пустотность","columns":[new GridColumnFloat({"field":model.getField("v_void"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_humid",{"value":"Влажность","columns":[new GridColumnFloat({"field":model.getField("v_humid"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_comment",{"value":"Коммент.","columns":[new GridColumn({"field":model.getField("v_comment"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":"500"}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(SandQuarryValList_View,ViewAjx); 
function StoneQuarryValList_View(id,options){StoneQuarryValList_View.superclass.constructor.call(this,id,options);var model=options.models.StoneQuarryValList_Model;var contr=new StoneQuarryVal_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("start_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"quarry":{"binding":new CommandBinding({"control":new QuarryEdit(id+":filter-ctrl-quarry",{"contClassName":"form-group-filter"}),"field":new FieldInt("quarry_id")}),"sign":"e"}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:day",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("day"),"ctrlClass":EditDate,"ctrlOptions":{"value":DateHelper.time()}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:quarry_descr",{"value":"Карьер","columns":[new GridColumn({"field":model.getField("quarry_descr"),"ctrlClass":QuarryEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"quarry_id"})]}),new GridCellHead(id+":grid:head:v_nasip",{"value":"Насып","columns":[new GridColumnFloat({"field":model.getField("v_nasip"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_istin",{"value":"Истин","columns":[new GridColumnFloat({"field":model.getField("v_istin"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_dust",{"value":"Пыль","columns":[new GridColumnFloat({"field":model.getField("v_dust"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_void",{"value":"Пустотность","columns":[new GridColumnFloat({"field":model.getField("v_void"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_humid",{"value":"Влажность","columns":[new GridColumnFloat({"field":model.getField("v_humid"),"ctrlClass":EditFloat})]}),new GridCellHead(id+":grid:head:v_comment",{"value":"Коммент.","columns":[new GridColumn({"field":model.getField("v_comment"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":"500"}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(StoneQuarryValList_View,ViewAjx); 
function LabEntryItemOnRatePeriodReport_View(id,options){options=options||{};var contr=new LabEntry_Controller();options.publicMethod=contr.getPublicMethod("item_on_rate_period_report");options.reportViewId="ViewHTMLXSLT";options.templateId="LabItemReport";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDate("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"item_type":{"binding":new CommandBinding({"control":new EditSelect(id+":filter-ctrl-item_type",{"contClassName":"form-group-filter","labelCaption":"Показатель:","elements":[new EditSelectOption(id+":filter-ctrl-item_type:ok",{"descr":"ОК","value":"ok","checked":true}),new EditSelectOption(id+":filter-ctrl-item_type:weight",{"descr":"Вес","value":"weight","checked":false}),new EditSelectOption(id+":filter-ctrl-item_type:p7",{"descr":"p7","value":"p7","checked":false}),new EditSelectOption(id+":filter-ctrl-item_type:p28",{"descr":"p28","value":"p28","checked":false}),new EditSelectOption(id+":filter-ctrl-item_type:cnt",{"descr":"Кол-во","value":"cnt","checked":false})]}),"field":new FieldString("item_type")}),"sign":"e"},"cnt":{"binding":new CommandBinding({"control":new EditInt(id+":filter-ctrl-cnt",{"contClassName":"form-group-filter","labelCaption":"Минимальное кол-во значений:","value":"10"}),"field":new FieldInt("cnt")}),"sign":"e"}};LabEntryItemOnRatePeriodReport_View.superclass.constructor.call(this,id,options);}
extend(LabEntryItemOnRatePeriodReport_View,ViewReport); 
function LabEntryItemReport_View(id,options){options=options||{};var contr=new LabEntry_Controller();options.publicMethod=contr.getPublicMethod("item_report");options.reportViewId="ViewHTMLXSLT";options.templateId="LabItemReport";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDate("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"item_type":{"binding":new CommandBinding({"control":new EditSelect(id+":filter-ctrl-item_type",{"contClassName":"form-group-filter","labelCaption":"Показатель:","elements":[new EditSelectOption(id+":filter-ctrl-item_type:ok",{"descr":"ОК","value":"ok","checked":true}),new EditSelectOption(id+":filter-ctrl-item_type:weight",{"descr":"Вес","value":"weight","checked":false}),new EditSelectOption(id+":filter-ctrl-item_type:p7",{"descr":"p7","value":"p7","checked":false}),new EditSelectOption(id+":filter-ctrl-item_type:p28",{"descr":"p28","value":"p28","checked":false}),new EditSelectOption(id+":filter-ctrl-item_type:cnt",{"descr":"Кол-во","value":"cnt","checked":false})]}),"field":new FieldString("item_type")}),"sign":"e"},"cnt":{"binding":new CommandBinding({"control":new EditInt(id+":filter-ctrl-cnt",{"contClassName":"form-group-filter","labelCaption":"Минимальное кол-во значений:","value":"10"}),"field":new FieldInt("cnt")}),"sign":"e"}};LabEntryItemReport_View.superclass.constructor.call(this,id,options);}
extend(LabEntryItemReport_View,ViewReport); 
function LabEntryAvgReport_View(id,options){options=options||{};var contr=new LabEntry_Controller();options.publicMethod=contr.getPublicMethod("lab_avg_report");options.templateId="LabAvgValsReport";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDate("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"item_type":{"binding":new CommandBinding({"control":new EditSelect(id+":filter-ctrl-item_type",{"contClassName":"form-group-filter","labelCaption":"Показатель:","elements":[new EditSelectOption(id+":filter-ctrl-item_type:ok",{"descr":"ОК","value":"ok","checked":true}),new EditSelectOption(id+":filter-ctrl-item_type:weight",{"descr":"Вес","value":"weight","checked":false}),new EditSelectOption(id+":filter-ctrl-item_type:p7",{"descr":"p7","value":"p7","checked":false}),new EditSelectOption(id+":filter-ctrl-item_type:p28",{"descr":"p28","value":"p28","checked":false}),new EditSelectOption(id+":filter-ctrl-item_type:cnt",{"descr":"Кол-во","value":"cnt","checked":false})]}),"field":new FieldString("item_type")}),"sign":"e"},"cnt":{"binding":new CommandBinding({"control":new EditInt(id+":filter-ctrl-cnt",{"contClassName":"form-group-filter","labelCaption":"Дней для средних значений:","value":"2"}),"field":new FieldInt("cnt")}),"sign":"e"},"report_type":{"binding":new CommandBinding({"control":new EditSelect(id+":filter-ctrl-report_type",{"contClassName":"form-group-filter","labelCaption":"Показатель:","elements":[new EditSelectOption(id+":filter-ctrl-report_type:table",{"descr":"Таблица","value":"table","checked":true}),new EditSelectOption(id+":filter-ctrl-report_type:chart",{"descr":"График","value":"chart","checked":false})]}),"field":new FieldString("report_type")}),"sign":"e"}};if(!window.getApp().m_concreteTypesForLabList_Model){(new ConcreteType_Controller()).getPublicMethod("get_list_for_lab").run({"async":false,"ok":function(resp){window.getApp().m_concreteTypesForLabList_Model=resp.getModel("ConcreteType_Model");}})}
var m=window.getApp().m_concreteTypesForLabList_Model;if(m){while(m.getNextRow()){var concr_id=m.getFieldValue("id");var concr_name=m.getFieldValue("name");options.filters["concrete_type_id_"+concr_id]={"binding":new CommandBinding({"control":new EditCheckBox(id+":filter-ctrl-concr_"+concr_id,{"labelClassName":"control-label col-lg-4","contClassName":"form-group-filter","labelCaption":concr_name}),"field":new FieldBool("concrete_type_id_"+concr_id)}),"sign":"in"};}}
LabEntryAvgReport_View.superclass.constructor.call(this,id,options);}
extend(LabEntryAvgReport_View,ViewReport);LabEntryAvgReport_View.prototype.getReportType=function(){return this.m_commands.getCmdFilter().getFilter().getFilter("report_type").binding.getControl().getValue();}
LabEntryAvgReport_View.prototype.onReport=function(){var is_chart=(this.getReportType()=="chart");this.setReportViewId(is_chart?"ViewXML":"ViewHTMLXSLT");this.m_retContentType=is_chart?"xml":"text";if(window["lab_avg_report"]){window["lab_avg_report"]=undefined;}
LabEntryAvgReport_View.superclass.onReport.call(this);}
LabEntryAvgReport_View.prototype.onGetReportData=function(respData){if(this.getReportType()=="chart"){var m=respData.getModel("lab_avg_report");var chart_data={"dates":[],"concrete_types":{},"data_sets":[]}
var d,ct_id;while(m.getNextRow()){d=m.getFieldValue("date_descr");if(CommonHelper.inArray(d,chart_data.dates)<0){chart_data.dates.push(d);}
ct_id="ct_"+m.getFieldValue("concrete_type_id");if(!chart_data.concrete_types[ct_id]){chart_data.concrete_types[ct_id]={"descr":m.getFieldValue("concrete_type_descr"),"vals":{}};}
chart_data.concrete_types[ct_id].vals[d]=m.getFieldValue("val");}
chart_data.dates.sort();var v;var ct_ind=0;var color,red_v=255,gr_v=99;chart_data.data_sets=[];for(var ct_id in chart_data.concrete_types){var date_vals=[];for(var i=0;i<chart_data.dates.length;i++){date_vals.push(chart_data.concrete_types[ct_id].vals[chart_data.dates[i]]);}
color='rgb('+red_v+', '+gr_v+', 132)';chart_data.data_sets.push({"label":"Показатели "+chart_data.concrete_types[ct_id].descr,"data":date_vals,"backgroundColor":color,"borderColor":color,"borderWidth":1,"fill":false});red_v-=50;if(red_v<0){red_v=0;}
else if(red_v==0){gr_v-=5;}
ct_ind++;}
var canv=document.getElementById("avg_rep_canvas");if(canv){this.m_reportControl.getNode().removeChild(canv);}
canv=document.createElement("canvas");canv.id="avg_rep_canvas";this.m_reportControl.getNode().appendChild(canv);canv.height=150;this.m_chart=new Chart(canv.getContext("2d"),{"type":"line","options":{"responsive":true,"elements":{"point":{"radius":3,"pointStyle":"circle"}},"title":{"display":true,"text":"Статистика формовки"},"tooltips":{"mode":"index","intersect":false},"hover":{"mode":"nearest","intersect":true},"scales":{"xAxes":[{"display":true,"scaleLabel":{"display":true,"labelString":"Даты"},"gridLines":{"color":"rgba(0, 0, 0, 0)",}}],"yAxes":[{"display":true,"scaleLabel":{"display":true,"labelString":"Значение"},"gridLines":{"color":"rgba(0, 0, 0, 0)"}}]}}});var colors=window.getApp().getChartColors();this.m_chart.data={"labels":chart_data.dates,"datasets":chart_data.data_sets};this.m_chart.update();}
else{this.m_reportControl.m_node.innerHTML=respData;}} 
function ShipmentForDriverCostHeaderList_View(id,options){ShipmentForDriverCostHeaderList_View.superclass.constructor.call(this,id,options);var model=options.models.ShipmentForDriverCostHeader_Model;var contr=new ShipmentForDriverCostHeader_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["date"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date"),"ctrlClass":EditDate,"ctrlOptions":{"value":DateHelper.time()},"master":true,"detailViewClass":ShipmentForDriverCostList_View,"detailViewOptions":{"detailFilters":{"ShipmentForDriverCost_Model":[{"masterFieldId":"date","field":"date","sign":"e","val":"0"}]}}})]}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":500}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ShipmentForDriverCostHeaderList_View,ViewAjx); 
function ShipmentForDriverCostList_View(id,options){options=options||{};ShipmentForDriverCostList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ShipmentForDriverCost_Model)?options.models.ShipmentForDriverCost_Model:new ShipmentForDriverCost_Model();var contr=new ShipmentForDriverCost_Controller();var popup_menu=new PopUpMenu();var pagination=null,refresh_int=0;var self=this;if(!options.detailFilters){var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);refresh_int=constants.grid_refresh_interval.getValue()*1000;var pagClass=window.getApp().getPaginationClass();pagination=new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()});}
this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":options.detailFilters?true:false,"cmdEdit":options.detailFilters?true:false,"cmdDelete":options.detailFilters?true:false,"filters":null,"cmdSearch":options.detailFilters?false:true,"variantStorage":options.variantStorage}),"onEventGetData":function(){this.m_distanceTo=0;},"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:distance_to",{"value":"Расстояние, км","columns":[new GridColumn({"field":model.getField("distance_to"),"formatFunction":function(f){var gr=self.getElement("grid");var d=f.distance_to.getValue();var res=(gr.m_distanceTo+"км - "+d+"км");gr.m_distanceTo=d+1;return res;},"ctrlClass":EditInt,"ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:price",{"value":"Цена, руб","columns":[new GridColumnFloat({"field":model.getField("price"),"ctrlClass":EditMoney,"ctrlOptions":{}})]})]})]}),"filters":options.detailFilters?options.detailFilters.ShipmentForDriverCost_Model:null,"pagination":pagination,"autoRefresh":options.detailFilters?true:false,"refreshInterval":refresh_int,"rowSelect":false,"focus":true}));}
extend(ShipmentForDriverCostList_View,ViewAjx); 
function ShipmentForOwnerCostHeaderList_View(id,options){ShipmentForOwnerCostHeaderList_View.superclass.constructor.call(this,id,options);var model=options.models.ShipmentForOwnerCostHeader_Model;var contr=new ShipmentForOwnerCostHeader_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["date"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date"),"ctrlClass":EditDate,"ctrlOptions":{"value":DateHelper.time()},"master":true,"detailViewClass":ShipmentForOwnerCostList_View,"detailViewOptions":{"detailFilters":{"ShipmentForOwnerCost_Model":[{"masterFieldId":"date","field":"date","sign":"e","val":"0"}]}}})]}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":500}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ShipmentForOwnerCostHeaderList_View,ViewAjx); 
function ShipmentForOwnerCostList_View(id,options){options=options||{};ShipmentForOwnerCostList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ShipmentForOwnerCost_Model)?options.models.ShipmentForOwnerCost_Model:new ShipmentForOwnerCost_Model();var contr=new ShipmentForOwnerCost_Controller();var popup_menu=new PopUpMenu();var pagination=null,refresh_int=0;if(!options.detailFilters){var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);refresh_int=constants.grid_refresh_interval.getValue()*1000;var pagClass=window.getApp().getPaginationClass();pagination=new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()});}
var self=this;this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":options.detailFilters?true:false,"cmdEdit":options.detailFilters?true:false,"cmdDelete":options.detailFilters?true:false,"filters":null,"cmdSearch":options.detailFilters?false:true,"variantStorage":options.variantStorage}),"onEventGetData":function(){this.m_distanceTo=0;},"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:distance_to",{"value":"Расстояние, км","columns":[new GridColumn({"field":model.getField("distance_to"),"formatFunction":function(f){var gr=self.getElement("grid");var d=f.distance_to.getValue();var res=(gr.m_distanceTo+"км - "+d+"км");gr.m_distanceTo=d+1;return res;},"ctrlClass":EditInt,"ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:price",{"value":"Цена, руб","columns":[new GridColumnFloat({"field":model.getField("price"),"ctrlClass":EditMoney,"ctrlOptions":{}})]})]})]}),"filters":options.detailFilters?options.detailFilters.ShipmentForOwnerCost_Model:null,"pagination":pagination,"autoRefresh":options.detailFilters?true:false,"refreshInterval":refresh_int,"rowSelect":false,"focus":true}));}
extend(ShipmentForOwnerCostList_View,ViewAjx); 
function ConcreteCostHeaderList_View(id,options){ConcreteCostHeaderList_View.superclass.constructor.call(this,id,options);var model=options.models.ConcreteCostHeader_Model;var contr=new ConcreteCostHeader_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date"),"ctrlClass":EditDate,"ctrlOptions":{"value":DateHelper.time()},"master":true,"detailViewClass":ConcreteCostList_View,"detailViewOptions":{"detailFilters":{"ConcreteCostList_Model":[{"masterFieldId":"id","field":"concrete_costs_h_id","sign":"e","val":"0"}]}}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:clients_list",{"value":"Список клиентов","columns":[new GridColumn({"field":model.getField("clients_list"),"formatFunction":function(fields){var res="";var v=fields.clients_list.getValue();if(v&&v.rows&&v.rows.length){for(var i=0;i<v.rows.length;i++){if(v.rows[i].fields&&v.rows[i].fields.client){res+=((res=="")?res:", ")+v.rows[i].fields.client.getDescr();}}}
return res;},"ctrlClass":ClientLocalListGrid,"ctrlOptions":{"maxLength":500}})]}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":500}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ConcreteCostHeaderList_View,ViewAjx); 
function ConcreteCostList_View(id,options){options=options||{};ConcreteCostList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ConcreteCostList_Model)?options.models.ConcreteCostList_Model:new ConcreteCostList_Model();var contr=new ConcreteCost_Controller();var popup_menu=new PopUpMenu();var pagination=null,refresh_int=0;if(!options.detailFilters){var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);refresh_int=constants.grid_refresh_interval.getValue()*1000;var pagClass=window.getApp().getPaginationClass();pagination=new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()});}
this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"contClassName":options.detailFilters?window.getBsCol(3):null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":options.detailFilters?true:false,"cmdEdit":options.detailFilters?true:false,"cmdDelete":options.detailFilters?true:false,"filters":null,"cmdSearch":options.detailFilters?false:true,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"concrete_type_id"})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:price",{"value":"Цена","columns":[new GridColumnFloat({"field":model.getField("price"),"ctrlClass":EditMoney,"ctrlOptions":{}})]})]})]}),"filters":options.detailFilters?options.detailFilters.ConcreteCostList_Model:null,"pagination":pagination,"autoRefresh":options.detailFilters?true:false,"refreshInterval":refresh_int,"rowSelect":false,"focus":true}));}
extend(ConcreteCostList_View,ViewAjx); 
function ConcreteCostForOwnerHeaderList_View(id,options){ConcreteCostForOwnerHeaderList_View.superclass.constructor.call(this,id,options);var model=options.models.ConcreteCostForOwnerHeader_Model;var contr=new ConcreteCostForOwnerHeader_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":500},"master":true,"detailViewClass":ConcreteCostForOwnerList_View,"detailViewOptions":{"detailFilters":{"ConcreteCostForOwnerList_Model":[{"masterFieldId":"id","field":"header_id","sign":"e","val":"0"}]}}})]}),new GridCellHead(id+":grid:head:create_date",{"value":"Дата создания","columns":[new GridColumnDate({"field":model.getField("create_date"),"ctrlClass":EditDate,"ctrlOptions":{"value":DateHelper.time(),"enabled":false}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ConcreteCostForOwnerHeaderList_View,ViewAjx); 
function ConcreteCostForOwnerList_View(id,options){options=options||{};ConcreteCostForOwnerList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ConcreteCostForOwnerList_Model)?options.models.ConcreteCostForOwnerList_Model:new ConcreteCostForOwnerList_Model();var contr=new ConcreteCostForOwner_Controller();var popup_menu=new PopUpMenu();var pagination=null,refresh_int=0;if(!options.detailFilters){var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);refresh_int=constants.grid_refresh_interval.getValue()*1000;var pagClass=window.getApp().getPaginationClass();pagination=new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()});}
this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":options.detailFilters?true:false,"cmdEdit":options.detailFilters?true:false,"cmdDelete":options.detailFilters?true:false,"filters":null,"cmdSearch":options.detailFilters?false:true,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"concrete_type_id"})]}),new GridCellHead(id+":grid:head:price",{"value":"Цена","columns":[new GridColumnFloat({"field":model.getField("price"),"ctrlClass":EditMoney,"ctrlOptions":{}})]})]})]}),"filters":options.detailFilters?options.detailFilters.ConcreteCostForOwnerList_Model:null,"pagination":pagination,"autoRefresh":options.detailFilters?true:false,"refreshInterval":refresh_int,"rowSelect":false,"focus":true}));}
extend(ConcreteCostForOwnerList_View,ViewAjx); 
function VehicleOwnerList_View(id,options){VehicleOwnerList_View.superclass.constructor.call(this,id,options);var model=options.models.VehicleOwnerList_Model;var contr=new VehicleOwner_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Владелец","columns":[new GridColumn({"field":model.getField("name"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":"150"}})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:client_list",{"value":"Клиенты","columns":[new GridColumn({"field":model.getField("client_list"),"ctrlClass":null,"ctrlBindFieldId":null,"ctrlOptions":{"enabled":false,"labelCaption":false},"master":true,"detailViewClass":VehicleOwnerClientList_View,"detailViewOptions":{"detailFilters":{"VehicleOwnerClientList_Model":[{"masterFieldId":"id","field":"vehicle_owner_id","sign":"e","val":"0"}]}}})],"sortable":true}),new GridCellHead(id+":grid:head:users_ref",{"value":"Аккаунт","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"ctrlBindFieldId":"user_id","ctrlOptions":{"labelCaption":""}})],"sortable":true}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Реквизиты","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlClass":ClientEdit,"ctrlBindFieldId":"client_id","ctrlOptions":{"labelCaption":""}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(VehicleOwnerList_View,ViewAjxList); 
function VehicleOwnerConcretePriceList_View(id,options){VehicleOwnerConcretePriceList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.VehicleOwnerConcretePriceList_Model)?options.models.VehicleOwnerConcretePriceList_Model:new VehicleOwnerConcretePriceList_Model();var contr=new VehicleOwnerConcretePrice_Controller();var popup_menu=new PopUpMenu();var pagination=null,refresh_int=0;if(!options.detailFilters){var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);refresh_int=constants.grid_refresh_interval.getValue()*1000;var pagClass=window.getApp().getPaginationClass();pagination=new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()});}
this.addElement(new GridAjx(id+":grid",{"keyIds":["vehicle_owner_id","date","client_id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":options.detailFilters?true:false,"cmdEdit":options.detailFilters?true:false,"cmdDelete":options.detailFilters?true:false,"filters":null,"cmdSearch":options.detailFilters?false:true,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[options.detailFilters?null:new GridCellHead(id+":grid:head:vehicle_owners_ref",{"value":"Владелец","columns":[new GridColumnRef({"field":model.getField("vehicle_owners_ref"),"ctrlClass":VehicleOwnerEdit,"ctrlBindFieldId":"vehicle_owner_id","ctrlOptions":{"labelCaption":""},"searchOptions":{"field":new FieldInt("vehicle_owner_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:date",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date"),"ctrlClass":EditDate,"ctrlOptions":{"labelCaption":"","value":DateHelper.time()}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:concrete_costs_for_owner_h_ref",{"value":"Прайс бетон","columns":[new GridColumnRef({"field":model.getField("concrete_costs_for_owner_h_ref"),"ctrlClass":ConcreteCostForOwnerHeadEdit,"ctrlBindFieldId":"concrete_costs_for_owner_h_id","ctrlOptions":{"labelCaption":""}})]})]})]}),"filters":options.detailFilters?options.detailFilters.VehicleOwnerConcretePriceList_Model:null,"pagination":pagination,"autoRefresh":options.detailFilters?true:false,"refreshInterval":refresh_int,"rowSelect":false,"focus":true}));}
extend(VehicleOwnerConcretePriceList_View,ViewAjxList); 
function VehicleOwnerClientList_View(id,options){VehicleOwnerClientList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.VehicleOwnerClientList_Model)?options.models.VehicleOwnerClientList_Model:new VehicleOwnerClientList_Model();var contr=new VehicleOwnerClient_Controller();var popup_menu=new PopUpMenu();var pagination=null,refresh_int=0;if(!options.detailFilters){var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);refresh_int=constants.grid_refresh_interval.getValue()*1000;var pagClass=window.getApp().getPaginationClass();pagination=new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()});}
this.addElement(new GridAjx(id+":grid",{"keyIds":["vehicle_owner_id","client_id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":options.detailFilters?true:false,"cmdEdit":options.detailFilters?true:false,"cmdDelete":options.detailFilters?true:false,"filters":null,"cmdSearch":options.detailFilters?false:true,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[options.detailFilters?null:new GridCellHead(id+":grid:head:vehicle_owners_ref",{"value":"Владелец","columns":[new GridColumnRef({"field":model.getField("vehicle_owners_ref"),"ctrlClass":VehicleOwnerEdit,"ctrlBindFieldId":"vehicle_owner_id","ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Клиент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlClass":ClientEdit,"ctrlBindFieldId":"client_id","ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:last_concrete_costs_for_owner_h_ref",{"value":"Прайс бетон","columns":[new GridColumnRef({"field":model.getField("last_concrete_costs_for_owner_h_ref"),"ctrlClass":null,"ctrlBindFieldId":null,"ctrlOptions":{"enabled":false,"labelCaption":false},"master":true,"detailViewClass":VehicleOwnerConcretePriceList_View,"detailViewOptions":{"detailFilters":{"VehicleOwnerConcretePriceList_Model":[{"masterFieldId":"vehicle_owner_id","field":"vehicle_owner_id","sign":"e","val":"0"},{"masterFieldId":"client_id","field":"client_id","sign":"e","val":"0"}]}}})],"sortable":true})]})]}),"filters":options.detailFilters?options.detailFilters.VehicleOwnerClientList_Model:null,"pagination":pagination,"autoRefresh":options.detailFilters?true:false,"refreshInterval":refresh_int,"rowSelect":false,"focus":true}));}
extend(VehicleOwnerClientList_View,ViewAjxList); 
function ShipmentCancelationList_View(id,options){ShipmentCancelationList_View.superclass.constructor.call(this,id,options);var model=options.models.ShipmentCancelationList_Model;var contr=new ShipmentCancelation_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":null,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})]}),new GridCellHead(id+":grid:head:orders_ref",{"value":"Заявка","columns":[new GridColumnRef({"field":model.getField("orders_ref"),"ctrlClass":OrderEdit,"searchOptions":{"field":new FieldInt("order_id"),"searchType":"on_match"}})]}),new GridCellHead(id+":grid:head:ship_date_time",{"value":"Дата отгрузки","columns":[new GridColumnDate({"field":model.getField("ship_date_time"),"dateFormat":"d/m/y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})]}),new GridCellHead(id+":grid:head:assign_date_time",{"value":"Дата назначения","columns":[new GridColumnDate({"field":model.getField("assign_date_time"),"dateFormat":"d/m/y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})]}),new GridCellHead(id+":grid:head:vehicle_schedules_ref",{"value":"ТС","columns":[new GridColumnRef({"field":model.getField("vehicle_schedules_ref"),"ctrlClass":VehicleScheduleEdit,"searchOptions":{"field":new FieldInt("vehicle_schedule_id"),"searchType":"on_match"}})]}),new GridCellHead(id+":grid:head:quant",{"value":"Кол-во","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text")})]}),new GridCellHead(id+":grid:head:users_ref",{"value":"Пользователь","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":OrderEdit,"searchOptions":{"field":new FieldInt("user_id"),"searchType":"on_match"}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ShipmentCancelationList_View,ViewAjx); 
function ShipmentPumpList_View(id,options){ShipmentPumpList_View.superclass.constructor.call(this,id,options);var self=this;var model=options.models.ShipmentPumpList_Model;var contr=new Shipment_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};filters.production_site={"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"contClassName":"form-group-filter"}),"field":new FieldInt("production_site_id")}),"sign":"e"};filters.client={"binding":new CommandBinding({"control":new ClientEdit(id+":filter-ctrl-client",{"contClassName":"form-group-filter","labelCaption":"Контрагент:"}),"field":new FieldInt("client_id")}),"sign":"e"};filters.destination={"binding":new CommandBinding({"control":new DestinationEdit(id+":filter-ctrl-destination",{"contClassName":"form-group-filter","labelCaption":"Объект:"}),"field":new FieldInt("destination_id")}),"sign":"e"};filters.concrete_type={"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"};filters.user={"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group-filter","labelCaption":"Автор:"}),"field":new FieldInt("user_id")}),"sign":"e"};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["last_ship_id"],"readPublicMethod":contr.getPublicMethod("get_pump_list"),"editInline":false,"editWinClass":ShipmentDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":true,"cmdDelete":false,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:order_number",{"value":"Номер","colAttrs":{"clign":"center"},"columns":[new GridColumn({"field":model.getField("order_number")})],"sortable":true}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"searchOptions":{"field":new FieldInt("production_site_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Контрагент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"form":ClientDialog_Form,"ctrlClass":ClientEdit,"searchOptions":{"field":new FieldInt("client_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"form":Destination_Form,"ctrlClass":DestinationEdit,"searchOptions":{"field":(new FieldInt("destination_id")),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","colAttrs":{"clign":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:pump_vehicles_ref",{"value":"Насос","columns":[new GridColumnRef({"field":model.getField("pump_vehicles_ref"),"ctrlClass":VehicleEdit,"searchOptions":{"field":new FieldInt("pump_vehicle_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:pump_vehicle_owners_ref",{"value":"Насос,влад.","columns":[new GridColumnRef({"field":model.getField("pump_vehicle_owners_ref"),"ctrlClass":VehicleOwnerEdit,"searchOptions":{"field":new FieldInt("pump_vehicle_owner_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:pump_cost",{"value":"Стоим.насос","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("pump_cost")})]}),new GridCellHead(id+":grid:head:acc_comment",{"value":"Комментарий","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("acc_comment")})]}),new GridCellHead(id+":grid:head:owner_pump_agreed_date_time",{"value":"Согл.миксер","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("owner_pump_agreed_date_time"),"dateFormat":"d/m/y"})]}),new GridCellHead(id+":grid:head:users_ref",{"value":"Автор","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"searchOptions":{"field":new FieldInt("user_id"),"searchType":"on_match"}})],"sortable":true})]})]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":"8"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_quant","gridColumn":new GridColumnFloat({"id":"tot_quant"})}),new GridCellFoot(id+":grid:foot:tot_pump_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_pump_cost","gridColumn":new GridColumnFloat({"id":"tot_pump_cost"})}),new GridCell(id+":grid:foot:total_sp3",{"colSpan":"3"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ShipmentPumpList_View,ViewAjxList); 
function ShipmentPumpForVehOwnerList_View(id,options){ShipmentPumpForVehOwnerList_View.superclass.constructor.call(this,id,options);var self=this;var model=options.models.ShipmentPumpForVehOwnerList_Model;var contr=new Shipment_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null,"vehicle_owner_accord_from_day":null,"vehicle_owner_accord_to_day":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var cur_d=(DateHelper.time()).getDate();var prev_month_acc_allowed=(cur_d>=constants.vehicle_owner_accord_from_day.getValue()&&cur_d<=constants.vehicle_owner_accord_to_day.getValue());this.m_accDescr={};var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};filters.concrete_type={"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"};filters.pump_vehicle={"binding":new CommandBinding({"control":new VehicleEdit(id+":filter-ctrl-pump_vehicle",{"contClassName":"form-group-filter","labelCaption":"Насос:"}),"field":new FieldInt("pump_vehicle_id")}),"sign":"e"};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["last_ship_id"],"readPublicMethod":contr.getPublicMethod("get_pump_list_for_veh_owner"),"editInline":false,"editWinClass":ShipmentDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage,"addCustomCommandsAfter":function(commands){commands.push(new ShipmentPumpForVehOwnerCmdSetAgreed(id+":grid:cmd:setPumpAgreed"));}}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"form":null,"ctrlClass":EditString,"searchOptions":{"field":(new FieldString("destinations_ref->descr")),"searchType":"on_part","typeChange":true}})],"sortable":true}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","colAttrs":{"clign":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:pump_vehicles_ref",{"value":"Насос","columns":[new GridColumnRef({"field":model.getField("pump_vehicles_ref"),"ctrlClass":VehicleEdit,"searchOptions":{"field":new FieldInt("pump_vehicle_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:pump_cost",{"value":"Стоим.насос","colAttrs":{"align":"right","nowrap":"nowrap"},"columns":[new GridColumnFloat({"field":model.getField("pump_cost")})]}),new GridCellHead(id+":grid:head:acc_comment",{"value":"Комментарий","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("acc_comment")})]}),new GridCellHead(id+":grid:head:owner_pump_agreed",{"value":"Согласование","colAttrs":{"align":"center"},"columns":[new GridColumn({"id":model.getField("owner_pump_agreed"),"cellOptions":function(column,row){var res={};var m=self.getElement("grid").getModel();if(m.getFieldValue("owner_pump_agreed")){res.value=DateHelper.format(m.getFieldValue("owner_pump_agreed_date_time"),"d/m/y");}
else if(!m.getFieldValue("date_time")){res.value="Не отгружено";}
else{var m_dif=((DateHelper.time()).getMonth()-m.getFieldValue("date_time").getMonth());if(m_dif==1&&prev_month_acc_allowed){var ctrl=new ButtonCmd(null,{"caption":"Согласовать","onClick":function(){self.setOwnerAgreed(this);}});ctrl.m_row=row;res.elements=[ctrl];}
else if(m_dif<=1){if(!self.m_accDescr["m_"+m_dif]){var ship_time=m.getFieldValue("date_time");self.m_accDescr["m_"+m_dif]={"from":DateHelper.format(new Date(ship_time.getFullYear(),ship_time.getMonth()+1,constants.vehicle_owner_accord_from_day.getValue()),"d/m/y"),"to":DateHelper.format(new Date(ship_time.getFullYear(),ship_time.getMonth()+1,constants.vehicle_owner_accord_to_day.getValue()),"d/m/y")};}
res.value="Разрешено с "+self.m_accDescr["m_"+m_dif].from+" до "+self.m_accDescr["m_"+m_dif].to;}}
return res;}})]})]})]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":"4"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_quant","gridColumn":new GridColumnFloat({"id":"tot_quant"})}),new GridCellFoot(id+":grid:foot:tot_pump_cost",{"attrs":{"align":"right","nowrap":"nowrap"},"totalFieldId":"total_pump_cost","gridColumn":new GridColumnFloat({"id":"tot_pump_cost"})}),new GridCell(id+":grid:foot:total_sp3",{"colSpan":"1"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ShipmentPumpForVehOwnerList_View,ViewAjxList);ShipmentPumpForVehOwnerList_View.prototype.setOwnerAgreed=function(btn){var row=btn.m_row;var val=btn.getValue();var keys=CommonHelper.unserialize(row.getAttr("keys"));var pm=this.getElement("grid").getReadPublicMethod().getController().getPublicMethod("owner_set_pump_agreed");pm.setFieldValue("shipment_id",keys.last_ship_id);var self=this;pm.run({"ok":function(resp){self.getElement("grid").onRefresh(function(){window.showTempNote("Отгрузка согласована",null,2000);});}})} 
function UserOperatorList_View(id,options){UserOperatorList_View.superclass.constructor.call(this,id,options);var model=options.models.UserOperatorList_Model;var contr=new User_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"readPublicMethod":contr.getPublicMethod("get_user_operator_list"),"updatePublicMethod":contr.getPublicMethod("update_production_site"),"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":true,"cmdPrint":false,"cmdSearch":false,"cmdExport":false,"cmdAllCommandes":false}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"ФИО","columns":[new GridColumn({"field":model.getField("name"),"ctrlOptions":{"enabled":false}})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:contact_ids",{"value":"Контакты","columns":[new GridColumn({"formatFunction":function(f,cell){window.getApp().formatContactList(f,cell);return"";},"ctrlClass":ContactEdit,"searchOptions":{"searchType":"on_match","typeChange":false,"condSign":"any"}})]}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlBindFieldId":"production_site_id","ctrlOptions":{"labelCaption":""}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(UserOperatorList_View,ViewAjxList); 
function VehicleOwnerTotReport_View(id,options){options=options||{};var role_id=window.getApp().getServVar("role_id");var self=this;var vehicle_owner,vehicle_owner_id=0;if(role_id!="vehicle_owner"){var vals=this.getSavedValues();if(vals&&vals.vehicle_owner){vehicle_owner=vals.vehicle_owner;vehicle_owner_id=vehicle_owner.getKey("id");}}
options.addElement=function(){if(role_id!="vehicle_owner"){this.addElement(new VehicleOwnerEdit(id+":vehicle_owner",{"onSelect":function(f){self.makeReport(self.getElement("period").getDateFrom(),f.id.getValue());},"value":vehicle_owner,"focus":true}));}
this.addElement(new EditPeriodMonth(id+":period",{"onChange":function(dFrom,dTo){var vehicle_owner_ctrl=self.getElement("vehicle_owner");var vehicle_owner_id=0;if(vehicle_owner_ctrl){var vehicle_owner_ref=vehicle_owner_ctrl.getValue();if(vehicle_owner_ref&&!vehicle_owner_ref.isNull()){vehicle_owner_id=vehicle_owner_ref.getKey("id");}}
self.makeReport(dFrom,vehicle_owner_id);}}));this.addElement(new Control(id+":report","DIV",{}));}
VehicleOwnerTotReport_View.superclass.constructor.call(this,id,options);this.makeReport(this.getElement("period").getDateFrom(),vehicle_owner_id);}
extend(VehicleOwnerTotReport_View,ViewAjxList);VehicleOwnerTotReport_View.prototype.getSavedValues=function(){var res={"vehicle_owner":null};if(window["localStorage"]){res.vehicle_owner=CommonHelper.unserialize(localStorage.getItem('VehicleOwnerTotReport_vehicle_owner'));}
return res;}
VehicleOwnerTotReport_View.prototype.saveValues=function(){if(window["localStorage"]){var vehicle_owner_ctrl=this.getElement("vehicle_owner");if(vehicle_owner_ctrl){localStorage.setItem('VehicleOwnerTotReport_vehicle_owner',CommonHelper.serialize(vehicle_owner_ctrl.getValue()));}}}
VehicleOwnerTotReport_View.prototype.makeReport=function(d,vehicleOwnerId){this.saveValues();window.setGlobalWait(true);var pm=(new VehicleOwner_Controller()).getPublicMethod("get_tot_report");pm.setFieldValue("date",d);pm.setFieldValue("vehicle_owner_id",vehicleOwnerId);pm.setFieldValue("templ","VehicleOwnerTotReport");var self=this;pm.run({"viewId":"ViewXSLT","retContentType":"text","ok":function(resp){self.getElement("report").getNode().innerHTML=resp;},"all":function(){window.setGlobalWait(false);}});} 
function MatTotalList_View(id,options){options=options||{};MatTotalList_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new EditPeriodMonth(id+":period",{"onChange":function(dFrom,dTo){dFrom=DateHelper.getStartOfShift(new Date(dFrom.getTime()+24*60*60*1000));dTo=DateHelper.getEndOfShift(new Date(dTo.getTime()+24*60*60*1000));var f_from=new FieldDateTime("d_from",{"value":dFrom});var f_to=new FieldDateTime("d_to",{"value":dTo});var gr=self.getElement("grid");gr.setFilter({"field":"date_time","sign":"ge","val":f_from.getValueXHR()});gr.setFilter({"field":"date_time","sign":"le","val":f_to.getValueXHR()});window.setGlobalWait(true);gr.onRefresh(function(){window.setGlobalWait(false);});}}));this.addElement(new MatTotalGrid(id+":grid",{"model":options.models.total_list,"modelMaterial":options.models.material_list}));}
extend(MatTotalList_View,ViewAjxList); 
function MatCorrectList_View(id,options){options=options||{};MatCorrectList_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new EditPeriodMonth(id+":period",{"onChange":function(dFrom,dTo){dFrom=DateHelper.getStartOfShift(new Date(dFrom.getTime()+24*60*60*1000));dTo=DateHelper.getEndOfShift(new Date(dTo.getTime()+24*60*60*1000));var f_from=new FieldDateTime("d_from",{"value":dFrom});var f_to=new FieldDateTime("d_to",{"value":dTo});var gr=self.getElement("grid");gr.setFilter({"field":"date_time","sign":"ge","val":f_from.getValueXHR()});gr.setFilter({"field":"date_time","sign":"le","val":f_to.getValueXHR()});window.setGlobalWait(true);gr.onRefresh(function(){window.setGlobalWait(false);});}}));this.addElement(new MatCorrectGrid(id+":grid",{"model":options.models.correct_list,"modelMaterial":options.models.material_list}));}
extend(MatCorrectList_View,ViewAjxList); 
function ConcreteTypeMapToProductionList_View(id,options){options=options||{};options.models=options.models||{};ConcreteTypeMapToProductionList_View.superclass.constructor.call(this,id,options);var auto_refresh=options.models.ConcreteTypeMapToProductionList_Model?false:true;var model=options.models.ConcreteTypeMapToProductionList_Model?options.models.ConcreteTypeMapToProductionList_Model:new ConcreteTypeMapToProductionList_Model();var contr=new ConcreteTypeMapToProduction_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка в этой программе","columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"concrete_type_id"})]}),new GridCellHead(id+":grid:head:production_descr",{"value":"Марка в производстве","columns":[new GridColumn({"field":model.getField("production_descr")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":auto_refresh,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ConcreteTypeMapToProductionList_View,ViewAjxList); 
function UserMapToProductionList_View(id,options){options=options||{};options.models=options.models||{};UserMapToProductionList_View.superclass.constructor.call(this,id,options);var auto_refresh=options.models.UserMapToProductionList_Model?false:true;var model=options.models.UserMapToProductionList_Model?options.models.UserMapToProductionList_Model:new UserMapToProductionList_Model();var contr=new UserMapToProduction_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"production_site_id"})]}),new GridCellHead(id+":grid:head:users_ref",{"value":"Пользователь в этой программе","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"user_id"})]}),new GridCellHead(id+":grid:head:production_descr",{"value":"Пользователь в производстве","columns":[new GridColumn({"field":model.getField("production_descr")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":auto_refresh,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(UserMapToProductionList_View,ViewAjxList); 
function RawMaterialMapToProductionList_View(id,options){options=options||{};options.models=options.models||{};RawMaterialMapToProductionList_View.superclass.constructor.call(this,id,options);var auto_refresh=options.models.RawMaterialMapToProductionList_Model?false:true;var model=options.models.RawMaterialMapToProductionList_Model?options.models.RawMaterialMapToProductionList_Model:new RawMaterialMapToProductionList_Model();var contr=new RawMaterialMapToProduction_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_sites_ref":{"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_sites_ref",{"contClassName":"form-group-filter","labelCaption":"Завод:"}),"field":new FieldInt("production_site_id")}),"sign":"e"},"materials_ref":{"binding":new CommandBinding({"control":new MaterialSelect(id+":filter-ctrl-materials_ref",{"contClassName":"form-group-filter","labelCaption":"Материал:"}),"field":new FieldInt("raw_material_id")}),"sign":"e"},"production_descr":{"binding":new CommandBinding({"control":new Edit(id+":filter-ctrl-production_descr",{"contClassName":"form-group-filter","labelCaption":"Материал в производстве:"}),"field":new FieldText("production_descr")}),"sign":"lk","icase":true,lwcards:true,rwcards:true}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[,new GridCellHead(id+":grid:head:raw_materials_ref",{"value":"Материал в этой программе","columns":[new GridColumnRef({"field":model.getField("raw_materials_ref"),"ctrlClass":MaterialSelect,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"raw_material_id"})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:production_descr",{"value":"Материал в производстве","columns":[new GridColumn({"field":model.getField("production_descr"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":100}})],"sortable":true}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод (если не указан, то для всех заводов)","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlBindFieldId":"production_site_id","ctrlOptions":{"labelCaption":""}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":auto_refresh,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(RawMaterialMapToProductionList_View,ViewAjxList); 
function MaterialFactConsumptionUpload_View(id,options){options=options||{};var role_id=window.getApp().getServVar("role_id");options.templateOptions=options.templateOptions||{};options.templateOptions.matchingEnabled=(role_id=="admin"||role_id=="owner"||role_id=="boss"||role_id=="supervisor"||role_id=="manager"||role_id=="accountant");options.templateOptions.matchingDisabled=!options.templateOptions.matchingEnabled;options.templateOptions.productions=[];var prod_site_m=window.getApp().getProdSiteModel();prod_site_m.reset();while(prod_site_m.getNextRow()){options.templateOptions.productions.push({"productionId":prod_site_m.getFieldValue("id"),"productionName":prod_site_m.getFieldValue("name")});}
options.addElement=function(){for(var i=0;i<options.templateOptions.productions.length;i++){var file_ctrl=new EditFile(id+":production_file_"+options.templateOptions.productions[i].productionId,{"labelClassName":"control-label","labelCaption":"Файл данных:","template":window.getApp().getTemplate("EditFile"),"mainView":this,"onFileAdded":(function(productionId,fileCtrl){})(options.templateOptions.productions[i].productionId,file_ctrl)});this.addElement(file_ctrl);this.addElement(new ButtonCmd(id+":cmd_uploading_"+options.templateOptions.productions[i].productionId,{"caption":"Загрузить данные","onClick":(function(productionId,fileCtrl,formContext,matchingEnabled){return function(){var fl=fileCtrl.getValue();if(!fl||!fl.length){throw new Error("Не выбран файл!");}
var pm=new MaterialFactConsumption_Controller().getPublicMethod("upload_production_file");pm.setFieldValue("production_site_id",productionId);pm.setFieldValue("production_file",fl);window.setGlobalWait(true);formContext.getElement("cmd_uploading_"+productionId).setEnabled(false);fileCtrl.setEnabled(false);pm.run({"all":function(){formContext.getElement("cmd_uploading_"+productionId).setEnabled(true);fileCtrl.setEnabled(true);window.setGlobalWait(false);if(matchingEnabled){formContext.getElement("material_fact_consumptions_list").getElement("grid").onRefresh();}},"ok":function(resp){window.showOk("Файл успешно загружен",null);}})}})(options.templateOptions.productions[i].productionId,file_ctrl,this,options.templateOptions.matchingEnabled)}));}
if(options.templateOptions.matchingEnabled){this.addElement(new ConcreteTypeMapToProductionList_View(id+":concrete_type_map_to_production_list"));this.addElement(new RawMaterialMapToProductionList_View(id+":raw_material_map_to_production_list"));this.addElement(new MaterialFactConsumptionRolledList_View(id+":material_fact_consumptions_list"));this.addElement(new UserMapToProductionList_View(id+":user_map_to_production_list"));}}
MaterialFactConsumptionUpload_View.superclass.constructor.call(this,id,options);}
extend(MaterialFactConsumptionUpload_View,View); 
function MaterialFactConsumptionList_View(id,options){options=options||{};options.models=options.models||{};this.HEAD_TITLE="Фактический расход материалов";MaterialFactConsumptionList_View.superclass.constructor.call(this,id,options);var auto_refresh=options.detailFilters?true:(options.models.MaterialFactConsumptionList_Model?false:true);var model=options.models.MaterialFactConsumptionList_Model?options.models.MaterialFactConsumptionList_Model:new MaterialFactConsumptionList_Model();var contr=new MaterialFactConsumption_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters;if(!options.detailFilters){filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_site":{"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"contClassName":"form-group-filter","labelCaption":"Завод:"}),"field":new FieldInt("production_site_id")}),"sign":"e"},"concrete_type":{"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"}};}
var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdDelete":false,"cmdEdit":false,"cmdFilter":!options.detailFilters,"filters":filters,"variantStorage":options.variantStorage,"cmdSearch":!options.detailFilters}),"popUpMenu":popup_menu,"onEventSetCellOptions":function(opts){if(!this.m_matchCheckColList){this.m_matchCheckColList=["vehicles_ref","raw_materials_ref","concrete_types_ref"];}
var col=opts.gridColumn.getId();if(CommonHelper.inArray(col,this.m_matchCheckColList)!=-1){opts.className=opts.className||"";var m=this.getModel();if(m.getField(col).isNull()){opts.title="Соответствие не определено!";opts.className+=(opts.className.length?" ":"")+"production_upload_no_match";}}},"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[options.detailFilters?null:new GridCellHead(id+":grid:head:date_time",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("date_time"),"ctrlClass":EditDateTime,"ctrlOptions":{"labelCaption":"","enabled":false}})],"sort":"desc"}),options.detailFilters?null:new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlOptions":{"labelCaption":"","enabled":false},"ctrlBindFieldId":"production_site_id"})]}),options.detailFilters?null:new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"concrete_type_id","formatFunction":function(fields){return fields.concrete_types_ref.isNull()?fields.concrete_type_production_descr.getValue():fields.concrete_types_ref.getValue().getDescr();}})]}),options.detailFilters?null:new GridCellHead(id+":grid:head:vehicles_ref",{"value":"ТС","columns":[new GridColumnRef({"field":model.getField("vehicles_ref"),"form":VehicleDialog_Form,"ctrlClass":VehicleEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"vehicle_id","formatFunction":function(fields){return fields.vehicles_ref.isNull()?fields.vehicle_production_descr.getValue():fields.vehicles_ref.getValue().getDescr();}})]}),new GridCellHead(id+":grid:head:raw_materials_ref",{"value":"Материал","columns":[new GridColumnRef({"field":model.getField("raw_materials_ref"),"ctrlClass":MaterialSelect,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"raw_material_id","formatFunction":function(fields){return fields.raw_materials_ref.isNull()?fields.raw_material_production_descr.getValue():fields.raw_materials_ref.getValue().getDescr();}})]}),options.detailFilters?null:new GridCellHead(id+":grid:head:orders_ref",{"value":"Заявка","columns":[new GridColumnRef({"field":model.getField("orders_ref"),"ctrlClass":OrderEdit,"ctrlOptions":{"labelCaption":"","enabled":false},"form":OrderDialog_Form})]}),options.detailFilters?null:new GridCellHead(id+":grid:head:shipments_inf",{"value":"Отгрузка","columns":[new GridColumn({"field":model.getField("shipments_inf"),"ctrlClass":EditString,"ctrlOptions":{"labelCaption":"","enabled":false}})]}),options.detailFilters?null:new GridCellHead(id+":grid:head:concrete_quant",{"value":"Объем","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("concrete_quant"),"ctrlClass":EditFloat,"ctrlOptions":{"precision":4}})]}),new GridCellHead(id+":grid:head:material_quant",{"value":"Количество","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("material_quant"),"ctrlClass":EditFloat,"ctrlOptions":{"precision":4}})]}),new GridCellHead(id+":grid:head:material_quant_req",{"value":"Количество треб.","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("material_quant_req"),"ctrlClass":EditFloat,"ctrlOptions":{"precision":4}})]})]})]}),"pagination":options.detailFilters?null:(new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()})),"filters":options.detailFilters?options.detailFilters.MaterialFactConsumptionList_Model:null,"autoRefresh":auto_refresh,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(MaterialFactConsumptionList_View,ViewAjxList); 
function MaterialFactConsumptionRolledList_View(id,options){options=options||{};options.models=options.models||{};this.HEAD_TITLE="Фактический расход материалов (свернуто)";MaterialFactConsumptionRolledList_View.superclass.constructor.call(this,id,options);var auto_refresh=options.models.MaterialFactConsumptionRolledList_Model?false:true;var model=options.models.MaterialFactConsumptionRolledList_Model?options.models.MaterialFactConsumptionRolledList_Model:new MaterialFactConsumptionRolledList_Model();var contr=new MaterialFactConsumption_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var self=this;var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_site":{"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"contClassName":"form-group-filter","labelCaption":"Завод:"}),"field":new FieldInt("production_site_id")}),"sign":"e"},"production_id":{"binding":new CommandBinding({"control":new EditInt(id+":filter-ctrl-production_id",{"contClassName":"form-group-filter","labelCaption":"№ производства:"}),"field":new FieldInt("production_id")}),"sign":"e"},"concrete_type":{"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"}}
var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var grid_struc=this.getGridStruc(options.models.MaterialFactConsumptionMaterialList_Model?options.models.MaterialFactConsumptionMaterialList_Model:null,model);var grid=new GridAjx(id+":grid",{"keyIds":["production_site_id","production_id"],"model":model,"controller":contr,"readPublicMethod":contr.getPublicMethod("get_rolled_list"),"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":true,"cmdEdit":false,"cmdInsert":false,"cmdDelete":false,"filters":filters,"variantStorage":options.variantStorage,"cmdExport":new GridCmdExportExcelLocal(id+":export",{"fileName":"Фактический расход материалов.xls","sheetName":"Фактический расход материалов"})}),"popUpMenu":popup_menu,"onEventSetCellOptions":function(opts){if(!this.m_matchCheckColList){this.m_matchCheckColList=["vehicles_ref","concrete_types_ref"];}
var col=opts.gridColumn.getId();if(CommonHelper.inArray(col,this.m_matchCheckColList)!=-1){opts.className=opts.className||"";var m=this.getModel();if(m.getField(col).isNull()){opts.title="Соответствие не определено!";opts.className+=(opts.className.length?" ":"")+"production_upload_no_match";}}
if(col=="production_id"&&this.getModel().getFieldValue("material_tolerance_violated")){opts.className=opts.className||"";opts.className+=(opts.className.length?" ":"")+"factQuantViolation";opts.title="Отклонение вышло за допустимые пределы";}
else if(col=="shipments_ref"){opts.events=opts.events||{"dblclick":(function(productionKey,dateTime){return function(e){self.selectShipment(productionKey,dateTime);}})(this.getModel().getFieldValue("production_key"),this.getModel().getFieldValue("date_time"))}}
else if(col=="vehicles_ref"){opts.events=opts.events||{"dblclick":(function(productionSiteId,productionId){return function(e){self.selectVehicle(productionSiteId,productionId);}})(this.getModel().getFieldValue("production_site_id"),this.getModel().getFieldValue("production_id"))}}},"head":new GridHead(id+":grid:head",{"elements":grid_struc.head}),"foot":new GridFoot(id+":grid:foot",{"autoCalc":true,"elements":grid_struc.foot}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":auto_refresh,"refreshInterval":null,"rowSelect":false,"focus":true});this.m_orig_onGetData=grid.onGetData
grid.onGetData=function(resp){if(resp){var h=this.getHead();this.m_model=resp.getModel("MaterialFactConsumptionRolledList_Model");h.delDOM();var grid_struc=self.getGridStruc(resp.getModel("MaterialFactConsumptionMaterialList_Model"),this.m_model);h.m_elements=grid_struc.head;h.toDOM(this.m_node);var f=this.getFoot();f.delDOM();f.m_elements=grid_struc.foot;f.toDOM(this.m_node);}
self.m_orig_onGetData.call(this);}
this.addElement(grid);}
extend(MaterialFactConsumptionRolledList_View,ViewAjxList);MaterialFactConsumptionRolledList_View.prototype.getGridStruc=function(headModel,model){var id=this.getId();var row0_elem=[new GridCellHead(id+":grid:head:row0:date_time",{"value":"Дата","colAttrs":{"align":"center"},"attrs":{"rowspan":"3"},"columns":[new GridColumnDateTime({"field":model.getField("date_time"),"ctrlClass":EditDateTime,"ctrlOptions":{"labelCaption":"","enabled":false},"master":true,"detailViewClass":ProductionMaterialList_View,"detailViewOptions":{"detailFilters":{"ProductionMaterialList_Model":[{"masterFieldId":"production_site_id","field":"production_site_id","sign":"e","val":"0"},{"masterFieldId":"production_id","field":"production_id","sign":"e","val":"0"}]}}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:row0:production_sites_ref",{"value":"Завод","attrs":{"rowspan":"3"},"columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlOptions":{"labelCaption":"","enabled":false},"ctrlBindFieldId":"production_site_id"})]}),new GridCellHead(id+":grid:head:row0:production_id",{"value":"№ пр-ва","attrs":{"rowspan":"3"},"columns":[new GridColumn({"field":model.getField("production_id"),"ctrlClass":EditNum})]}),new GridCellHead(id+":grid:head:row0:concrete_types_ref",{"value":"Марка","attrs":{"rowspan":"3"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"concrete_type_id","formatFunction":function(fields){return fields.concrete_types_ref.isNull()?fields.concrete_type_production_descr.getValue():fields.concrete_types_ref.getValue().getDescr();}})]}),new GridCellHead(id+":grid:head:row0:vehicles_ref",{"value":"ТС","attrs":{"rowspan":"3"},"columns":[new GridColumnRef({"field":model.getField("vehicles_ref"),"form":VehicleDialog_Form,"ctrlClass":VehicleEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"vehicle_id","formatFunction":function(fields){return fields.vehicles_ref.isNull()?fields.vehicle_production_descr.getValue():fields.vehicles_ref.getValue().getDescr();}})]}),new GridCellHead(id+":grid:head:row0:orders_ref",{"value":"Заявка","attrs":{"rowspan":"3"},"columns":[new GridColumnRef({"field":model.getField("orders_ref"),"ctrlClass":OrderEdit,"ctrlOptions":{"labelCaption":"","enabled":false},"form":OrderDialog_Form})]}),new GridCellHead(id+":grid:head:row0:shipments_inf",{"value":"Отгрузка","attrs":{"rowspan":"3"},"columns":[new GridColumnRef({"field":model.getField("shipments_ref"),"ctrlClass":ShipmentEdit,"ctrlOptions":{"labelCaption":"","enabled":false},"form":ShipmentDialog_Form})]}),new GridCellHead(id+":grid:head:row0:concrete_quant",{"value":"Объем","colAttrs":{"align":"right"},"attrs":{"rowspan":"3"},"columns":[new GridColumn({"field":model.getField("concrete_quant"),"ctrlClass":EditFloat,"precision":2,"ctrlOptions":{"precision":2}})]})];var row1_elem=[];var row2_elem=[];if(headModel){headModel.reset();var mat_ref;var cur_mat_id;var prev_mat_id=0;var prev_mat_descr;var col_span_ar;var row0_id=0,row1_id=0;var mat_ind=0;var add_rows=function(){if(col_span_ar&&col_span_ar.length){var attrs0={};var attrs1={};if(!prev_mat_id){attrs0["class"]="production_upload_no_match";attrs1["class"]="production_upload_no_match";}
if(col_span_ar.length>1){attrs0.colspan=col_span_ar.length*3;row0_elem.push(new GridCellHead(id+":grid:head:row0:mat_"+row0_id,{"name":"mat_"+row0_id,"value":prev_mat_descr,"colAttrs":{"align":"center"},"attrs":attrs0}));row0_id++;attrs1.colspan="3";var attrs1_tmp;for(var i=0;i<col_span_ar.length;i++){mat_ind++;attrs1_tmp=CommonHelper.clone(attrs1);attrs1_tmp["class"]=attrs1_tmp["class"]||"";attrs1_tmp["class"]+=((attrs1_tmp["class"]=="")?"":" ")+((mat_ind%2)?"mat_odd":"mat_even");row1_elem.push(new GridCellHead(id+":grid:head:row1:mat_"+row1_id,{"name":"mat_"+row1_id,"value":col_span_ar[i],"colAttrs":{"align":"center"},"attrs":attrs1_tmp}));row1_id++;}}
else{mat_ind++;attrs0["class"]=attrs0["class"]||"";attrs0["class"]+=((attrs0["class"]=="")?"":" ")+((mat_ind%2)?"mat_odd":"mat_even");attrs0.rowspan="2";attrs0.colspan="3";row0_elem.push(new GridCellHead(id+":grid:head:row0:mat_"+row0_id,{"name":"mat_"+row0_id,"value":prev_mat_descr,"colAttrs":{"align":"center"},"attrs":attrs0}));row0_id++;}}}
while(headModel.getNextRow()){mat_ref=CommonHelper.unserialize(headModel.getFieldValue("raw_materials_ref"));cur_mat_id=(mat_ref&&!mat_ref.isNull())?mat_ref.getKey("id"):undefined;if((cur_mat_id&&cur_mat_id!=prev_mat_id)||!cur_mat_id){add_rows();prev_mat_id=cur_mat_id;prev_mat_descr=cur_mat_id?mat_ref.getDescr():headModel.getFieldValue("raw_material_production_descr");col_span_ar=[];}
col_span_ar.push(headModel.getFieldValue("raw_material_production_descr")+" ("+headModel.getFieldValue("production_name")+")");}
add_rows();headModel.reset();var m_descr;var m_ind=0;var mat_col_ids={};while(headModel.getNextRow()){if(m_ind==0){var foot0_elem=[new GridCell(id+":grid:foot:sp2",{"colSpan":"7"}),new GridCellFoot(id+":grid:foot:concrete_quant",{"attrs":{"align":"right"},"value":parseFloat(headModel.getFieldValue("concrete_quant")),"gridColumn":new GridColumnFloat({"id":"tot_concrete_quant","precision":"2"})})];}
m_descr=headModel.getFieldValue("raw_material_production_descr");var col_q_id="m_"+m_ind+"_q";var col_q_r_id="m_"+m_ind+"_q_r";var col_q_sh_id="m_"+m_ind+"_q_sh";mat_col_ids[m_descr+"_"+headModel.getFieldValue("production_site_id")]=m_ind;m_ind++;var f_q=new FieldFloat(col_q_id,{"precision":4,"length":19});var f_q_r=new FieldFloat(col_q_r_id,{"precision":4,"length":19});var f_q_sh=new FieldFloat(col_q_sh_id,{"precision":4,"length":19});model.addField(f_q);model.addField(f_q_r);model.addField(f_q_sh);row2_elem.push(new GridCellHead(id+":grid:head:row2:"+col_q_id,{"value":"Расход факт","attrs":{"class":((m_ind%2)?"mat_odd":"mat_even")},"colAttrs":{"align":"right","class":((m_ind%2)?"mat_odd":"mat_even")},"columns":[new GridColumnFloat({"field":f_q,"precision":"4","ctrlOptions":{"precision":"4"}})]}));row2_elem.push(new GridCellHead(id+":grid:head:row2:m_"+col_q_r_id,{"value":"Подбор завод","attrs":{"class":((m_ind%2)?"mat_odd":"mat_even")},"colAttrs":{"align":"right","class":((m_ind%2)?"mat_odd":"mat_even")},"columns":[new GridColumnFloat({"field":f_q_r,"precision":"4","ctrlOptions":{"precision":"4"}})]}));row2_elem.push(new GridCellHead(id+":grid:head:row2:m_"+col_q_sh_id,{"value":"Подбор отгузка","attrs":{"class":((m_ind%2)?"mat_odd":"mat_even")},"colAttrs":{"align":"right","class":((m_ind%2)?"mat_odd":"mat_even")},"columns":[new GridColumnFloat({"field":f_q_sh,"precision":"4","ctrlOptions":{"precision":"4"}})]}));foot0_elem.push(new GridCellFoot(id+":grid:foot:row0:m_"+col_q_id,{"attrs":{"align":"right","class":((m_ind%2)?"mat_odd":"mat_even")},"value":parseFloat(headModel.getFieldValue("material_quant")),"gridColumn":new GridColumnFloat({"id":"tot_m_"+col_q_id,"precision":"4"})}));foot0_elem.push(new GridCellFoot(id+":grid:foot:row0:m_"+col_q_r_id,{"attrs":{"align":"right","class":((m_ind%2)?"mat_odd":"mat_even")},"value":parseFloat(headModel.getFieldValue("material_quant_req")),"gridColumn":new GridColumnFloat({"id":"tot_m_"+col_q_r_id,"precision":"4"})}));foot0_elem.push(new GridCellFoot(id+":grid:foot:row0:m_"+col_q_sh_id,{"attrs":{"align":"right","class":((m_ind%2)?"mat_odd":"mat_even")},"value":parseFloat(headModel.getFieldValue("material_quant_shipped")),"gridColumn":new GridColumnFloat({"id":"tot_m_"+col_q_sh_id,"precision":"4"})}));}
var materials,site_ref,site_id;var m_descr;while(model.getNextRow()){materials=model.getFieldValue("materials");site_ref=model.getFieldValue("production_sites_ref");site_id=(site_ref&&!site_ref.isNull())?site_ref.getKey():"0";headModel.reset();while(headModel.getNextRow()){if(site_id==headModel.getFieldValue("production_site_id")){m_descr=headModel.getFieldValue("raw_material_production_descr");for(var j=0;j<materials.length;j++){if(materials[j].production_descr==m_descr){var col_q_id="m_"+mat_col_ids[m_descr+"_"+site_id]+"_q";var col_q_r_id="m_"+mat_col_ids[m_descr+"_"+site_id]+"_q_r";var col_q_sh_id="m_"+mat_col_ids[m_descr+"_"+site_id]+"_q_sh";model.setFieldValue(col_q_id,materials[j].quant);model.setFieldValue(col_q_r_id,materials[j].quant_req);model.setFieldValue(col_q_sh_id,materials[j].quant_shipped);break;}}}}
model.recUpdate();}
model.reset();}
return{"head":[new GridRow(id+":grid:head:row0",{"elements":row0_elem}),new GridRow(id+":grid:head:row1",{"elements":row1_elem}),new GridRow(id+":grid:head:row2",{"elements":row2_elem})],"foot":[new GridRow(id+":grid:foot:row0",{"elements":foot0_elem})]};}
MaterialFactConsumptionRolledList_View.prototype.selectShipment=function(productionKey,dateTime){var self=this;this.m_view=new ShipmentList_View("ShipmentList:cont",{"forSelect":true,"date_time":dateTime,"onSelect":(function(productionKey){return function(row){self.closeShipmentSelect(productionKey,row.id.getValue());}})(productionKey)});this.m_form=new WindowFormModalBS("ShipmentList",{"content":this.m_view,"dialogWidth":"80%","cmdCancel":true,"cmdOk":false,"contentHead":"Выберите отгрузку","onClickCancel":function(){self.closeShipmentSelect();}});this.m_form.open();}
MaterialFactConsumptionRolledList_View.prototype.selectVehicle=function(productionSiteId,productionId){var self=this;this.m_view=new View("Vehicle:cont",{"elements":[new VehicleEdit("Vehicle:cont:vehicles_ref",{"labelCaption":"ТС:","focus":true})]});this.m_form=new WindowFormModalBS("Vehicle",{"content":this.m_view,"dialogWidth":"30%","cmdCancel":true,"cmdOk":true,"contentHead":"Выберите ТС","onClickCancel":function(){self.closeVehicleSelect();},"onClickOk":(function(productionSiteId,productionId){return function(){var v=self.m_view.getElement("vehicles_ref").getValue();if(!v||v.isNull()){throw Error("Не выбрано ТС!");}
self.closeVehicleSelect(productionSiteId,productionId,v.getKey());}})(productionSiteId,productionId)});this.m_form.open();}
MaterialFactConsumptionRolledList_View.prototype.closeSelect=function(){if(this.m_view){this.m_view.delDOM()
delete this.m_view;}
if(this.m_form){this.m_form.delDOM();delete this.m_form;}}
MaterialFactConsumptionRolledList_View.prototype.closeVehicleSelect=function(productionSiteId,productionId,vehicleId){this.closeSelect();if(productionSiteId&&productionId&&vehicleId){var pm=(new ProductionVehicleCorrection_Controller()).getPublicMethod("insert");var self=this;pm.setFieldValue("production_site_id",productionSiteId);pm.setFieldValue("production_id",productionId);pm.setFieldValue("vehicle_id",vehicleId);window.setGlobalWait(true);pm.run({"ok":function(){if(self.getElement("grid")){self.getElement("grid").onRefresh(function(){window.setGlobalWait(false);window.showTempNote("К производству привязано новое ТС",null,5000);});}},"fail":function(resp,errCode,errStr){window.setGlobalWait(false);throw Error(errStr);}});}}
MaterialFactConsumptionRolledList_View.prototype.closeShipmentSelect=function(productionKey,shipmentId){this.closeSelect();if(productionKey&&shipmentId){var pm=(new Production_Controller()).getPublicMethod("update");var self=this;pm.setFieldValue("old_id",productionKey);pm.setFieldValue("shipment_id",shipmentId);window.setGlobalWait(true);pm.run({"ok":function(){if(self.getElement("grid")){self.getElement("grid").onRefresh(function(){window.setGlobalWait(false);window.showTempNote("К производству привязана отгрузка",null,5000);});}},"fail":function(resp,errCode,errStr){window.setGlobalWait(false);throw Error(errStr);}});}} 
function MaterialFactConsumptionCorretionList_View(id,options){MaterialFactConsumptionCorretionList_View.superclass.constructor.call(this,id,options);var model=options.models.MaterialFactConsumptionCorretionList_Model;var contr=new MaterialFactConsumptionCorretion_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};var role_id=window.getApp().getServVar("role_id");var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"production_site_id","searchOptions":{"field":new FieldInt("production_site_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time"),"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg","ctrlClass":EditDate}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:users_ref",{"value":"Пользователь","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"user_id","searchOptions":{"field":new FieldInt("user_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:materials_ref",{"value":"Материал","columns":[new GridColumnRef({"field":model.getField("materials_ref"),"ctrlClass":MaterialSelect,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"material_id","searchOptions":{"field":new FieldInt("material_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:cement_silos_ref",{"value":"Силос","columns":[new GridColumnRef({"field":model.getField("cement_silos_ref"),"ctrlClass":CementSiloEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"cement_silo_id","searchOptions":{"field":new FieldInt("cement_silo_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:production_id",{"value":"Номер производства","attrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("production_id"),"ctrlClass":EditInt})],"sortable":true}),new GridCellHead(id+":grid:head:elkon_id",{"value":"Номер записи Elkon","attrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("elkon_id"),"ctrlClass":EditString})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Количество","columns":[new GridColumnFloat({"field":model.getField("quant"),"precision":"4"})]})]})]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":"7"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right"},"totalFieldId":"total_quant","gridColumn":new GridColumnFloat({"id":"tot_quant","length":19,"precision":4})})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(MaterialFactConsumptionCorretionList_View,ViewAjx); 
function MaterialFactBalanceCorretionList_View(id,options){this.HEAD_TITLE="Корректировки фактических остатков материалов";MaterialFactBalanceCorretionList_View.superclass.constructor.call(this,id,options);var model=options.models.MaterialFactBalanceCorretionList_Model;var contr=new MaterialFactBalanceCorretion_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};var role_id=window.getApp().getServVar("role_id");var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:balance_date_time",{"value":"Дата остатка","columns":[new GridColumnDateTime({"field":model.getField("balance_date_time"),"ctrlClass":EditDateTime,"searchOptions":{"field":new FieldDate("balance_date_time"),"searchType":"on_beg","ctrlClass":EditDate}})],"sortable":true}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"production_site_id","searchOptions":{"field":new FieldInt("production_site_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:materials_ref",{"value":"Материал","columns":[new GridColumnRef({"field":model.getField("materials_ref"),"ctrlClass":MaterialSelect,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"material_id","searchOptions":{"field":new FieldInt("material_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:required_balance_quant",{"value":"Кол-во фактич.","columns":[new GridColumnFloat({"field":model.getField("required_balance_quant"),"length":"19","precision":"4","ctrlClass":EditFloat,"ctrlOptions":{"precision":"4"}})]}),new GridCellHead(id+":grid:head:quant_dif",{"value":"Корр-ка","columns":[new GridColumnFloat({"field":model.getField("quant_dif"),"length":"19","precision":"4","ctrlClass":EditFloat,"ctrlEdit":false,"ctrlOptions":{"precision":"4"}})]}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text")})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата корректировки","columns":[new GridColumnDateTime({"field":model.getField("date_time"),"dateFormat":"d/m/y H:i","searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg","ctrlClass":EditDate}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:users_ref",{"value":"Пользователь","columns":[new GridColumnRef({"field":model.getField("users_ref"),"form":User_Form,"ctrlClass":UserEditRef,"ctrlBindFieldId":"user_id","ctrlOptions":{"labelCaption":"","enabled":(role_id=="admin"||role_id=="owner"),},"searchOptions":{"field":new FieldInt("user_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:last_modif_users_ref",{"value":"Кто изменил","columns":[new GridColumnRef({"field":model.getField("last_modif_users_ref"),"ctrlClass":UserEditRef,"ctrlEdit":false,"searchOptions":{"field":new FieldInt("last_modif_user_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:last_modif_date_time",{"value":"Дата изменения","columns":[new GridColumnDateTime({"field":model.getField("last_modif_date_time"),"ctrlEdit":false})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(MaterialFactBalanceCorretionList_View,ViewAjx); 
function LabEntryList_View(id,options){options=options||{};options.models=options.models||{};LabEntryList_View.superclass.constructor.call(this,id,options);var model=options.models.LabEntryList_Model?options.models.LabEntryList_Model:new LabEntryList_Model();var contr=new LabEntry_Controller();var grid_filters;if(options.listView){grid_filters=[this.getPeriodFilterFrom(options.dateTime),this.getPeriodFilterTo(options.dateTime)];}else if(options.detailFilters){grid_filters=options.detailFilters.LabEntryList_Model;}
var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var filters;if(!options.detailFilters&&!options.listView){var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_site":{"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"contClassName":"form-group-filter","labelCaption":"Завод:"}),"field":new FieldInt("production_site_id")}),"sign":"e"},"concrete_type":{"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"},"client":{"binding":new CommandBinding({"control":new ClientEdit(id+":filter-ctrl-client",{"contClassName":"form-group-filter","labelCaption":"Клиент:"}),"field":new FieldInt("client_id")}),"sign":"e"},"destination":{"binding":new CommandBinding({"control":new DestinationEdit(id+":filter-ctrl-destination",{"contClassName":"form-group-filter","labelCaption":"Объект:"}),"field":new FieldInt("destination_id")}),"sign":"e"},"ok":{"binding":new CommandBinding({"control":new EditInt(id+":filter-ctrl-ok",{"contClassName":"form-group-filter","labelCaption":"ОК:"}),"field":new FieldInt("ok")}),"sign":"e"},"shipment_id":{"binding":new CommandBinding({"control":new ShipmentEdit(id+":filter-ctrl-shipment",{"contClassName":"form-group-filter","labelCaption":"Отгрузка:","keyIds":["shipment_id"]}),"field":new FieldInt("shipment_id")}),"sign":"e"}};}
var self=this;this.addElement(new EditCheckBox(id+":filter-samples_exist",{"labelCaption":"Только отобранные","labelAlign":"right","className":"col-lg-2","labelClassName":"col-lg-10","editContClassName":"col-lg-2","value":options.listView,"events":{"change":function(){var gr=self.getElement("grid");var sel=this.getValue();if(sel){gr.setFilter({"field":"samples_exist","sign":"e","val":"1"});}
else{gr.unsetFilter("samples_exist"+"e");}
window.setGlobalWait(true);gr.onRefresh(function(){window.setGlobalWait(false);});}}}));var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var grid=new GridAjx(id+":grid",{"keyIds":["shipment_id"],"model":model,"attrs":options.listView?{"style":"width:100%;"}:null,"className":options.listView?OrderMakeList_View.prototype.TABLE_CLASS:null,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":!options.detailFilters&&!options.listView,"cmdAllCommands":!options.listView,"cmdInsert":false,"cmdDelete":true,"cmdEdit":true,"filters":filters,"variantStorage":options.variantStorage,"cmdSearch":!options.detailFilters&&!options.listView}),"popUpMenu":popup_menu,"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:shipment_id",{"value":"№","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("shipment_id"),"ctrlClass":EditNum,"ctrlOptions":{"labelCaption":"","enabled":false},"searchOptions":{"field":new FieldInt("shipment_id"),"searchType":"on_match"},"master":true,"detailViewClass":LabEntryDetailList_View,"detailViewOptions":{"detailFilters":{"LabEntryDetailList_Model":[{"masterFieldId":"shipment_id","field":"shipment_id","sign":"e","val":"0"}]}}})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("date_time"),"ctrlClass":EditDateTime,"dateFormat":"d/m/y H:i","ctrlOptions":{"labelCaption":"","enabled":false}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlOptions":{"labelCaption":"","enabled":false}})],"sortable":true}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"ctrlOptions":{"labelCaption":"","enabled":false}})],"sortable":true}),new GridCellHead(id+":grid:head:ok",{"value":"ОК","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("ok"),"ctrlClass":EditInt,"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":grid:head:weight",{"value":"Масса","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("weight"),"ctrlClass":EditInt,"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":grid:head:p7",{"value":"p7","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("p7"),"ctrlClass":EditInt,"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":grid:head:p28",{"value":"p28","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("p28"),"ctrlClass":EditInt,"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":grid:head:samples",{"value":"Подборы","colAttrs":{"align":"left"},"columns":[new GridColumn({"field":model.getField("samples"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":500}})]}),new GridCellHead(id+":grid:head:raw_material_cons_rate_dates_ref",{"value":"Подборы (справочник)","columns":[new GridColumnRef({"field":model.getField("raw_material_cons_rate_dates_ref"),"ctrlClass":RawMaterialConsRateDateEdit,"ctrlBindFieldId":"rate_date_id","ctrlOptions":{"labelCaption":"","onSelect":function(fields){self.setCodeToEditForm(fields.code.getValue());}}})]}),new GridCellHead(id+":grid:head:ok2",{"value":"ОК2","colAttrs":{"align":"left"},"columns":[new GridColumn({"field":model.getField("ok2"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":500}})]}),new GridCellHead(id+":grid:head:f",{"value":"F","colAttrs":{"align":"left"},"columns":[new GridColumn({"field":model.getField("f"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":50}})]}),new GridCellHead(id+":grid:head:w",{"value":"W","colAttrs":{"align":"left"},"columns":[new GridColumn({"field":model.getField("w"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":50}})]}),new GridCellHead(id+":grid:head:time",{"value":"Время","colAttrs":{"align":"left"},"columns":[new GridColumn({"field":model.getField("time"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":500}})]}),new GridCellHead(id+":grid:head:no_additive_material",{"value":"Нет добавки","colAttrs":{"align":"center"},"columns":[new GridColumnBool({"field":model.getField("no_additive_material"),"showFalse":false,"ctrlClass":EditCheckBox,"ctrlEdit":false})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"filters":grid_filters,"autoRefresh":(options.models&&options.models.LabEntryList_Model)?false:!options.listView,"refreshInterval":options.listView?0:constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});grid.afterServerDelRow=function(){this.setEnabled(true);window.showTempNote(this.NT_REC_DELETED,null,this.m_onDelOkMesTimeout);this.focus();this.onRefresh();}
this.addElement(grid);}
extend(LabEntryList_View,ViewAjxList);LabEntryList_View.prototype.setCodeToEditForm=function(code){var view=this.getElement("grid").getEditViewObj();if(view){view.getElement("samples").setValue(code);}}
LabEntryList_View.prototype.getPeriodFilterFrom=function(dt){return{"field":"date_time","sign":"ge","val":(new FieldDateTime("dt",{"value":dt})).getValueXHR()}}
LabEntryList_View.prototype.getPeriodFilterTo=function(dt){return{"field":"date_time","sign":"le","val":(new FieldDateTime("dt",{"value":DateHelper.getEndOfShift(dt)})).getValueXHR()}} 
function LabEntryDetailList_View(id,options){options=options||{};options.models=options.models||{};LabEntryDetailList_View.superclass.constructor.call(this,id,options);var auto_refresh=options.detailFilters?true:(options.models.LabEntryDetailList_Model?false:true);var model=options.models.LabEntryDetailList_Model?options.models.LabEntryDetailList_Model:new LabEntryDetailList_Model();var contr=new LabEntryDetail_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters;var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["id_key"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":false,"filters":null,"variantStorage":options.variantStorage,"cmdSearch":false}),"popUpMenu":popup_menu,"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:code",{"value":"№","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("code"),"ctrlClass":EditString,"ctrlOptions":{"labelCaption":"","enabled":false}})]}),new GridCellHead(id+":grid:head:ok",{"value":"ОК","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("ok"),"ctrlClass":EditString,"ctrlOptions":{}})]}),new GridCellHead(id+":grid:head:weight",{"value":"Масса","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("weight"),"ctrlClass":EditInt,"ctrlOptions":{}})]}),new GridCellHead(id+":grid:head:p7",{"value":"p7","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("p7"),"ctrlClass":EditInt,"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":grid:head:p28",{"value":"p28","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("p28"),"ctrlClass":EditInt,"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":grid:head:p_date",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("p_date"),"ctrlClass":EditDate,"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":grid:head:kn",{"value":"kn","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("kn"),"ctrlClass":EditInt,"ctrlOptions":{}})]}),new GridCellHead(id+":grid:head:mpa",{"value":"МПА","colAttrs":{"align":"center"},"columns":[new GridColumnFloat({"field":model.getField("mpa"),"precision":"2","ctrlClass":EditFloat,"ctrlOptions":{"enabled":false,"precision":"2"}})]}),new GridCellHead(id+":grid:head:mpa_avg",{"value":"МПА средн.","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("mpa_avg"),"ctrlClass":EditInt,"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":grid:head:pres_norm",{"value":"Норма","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("pres_norm"),"ctrlClass":EditString,"ctrlOptions":{"enabled":false}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"filters":options.detailFilters?options.detailFilters.LabEntryDetailList_Model:null,"autoRefresh":auto_refresh,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(LabEntryDetailList_View,ViewAjxList); 
function OrderMakeForLabList_View(id,options){options.templateOptions=options.templateOptions||{};options.className="row";this.m_refreshMethod=(new Order_Controller()).getPublicMethod("get_make_orders_for_lab_form");var self=this;var constants={"order_grid_refresh_interval":null,"first_shift_start_time":null,"day_shift_length":null,"order_step_min":null,"shift_length_time":"null"};window.getApp().getConstantManager().get(constants);var st_time=constants.first_shift_start_time.getValue();var st_time_parts=st_time.split(":");var from_h=0,to_h=0;if(st_time_parts&&st_time_parts.length){from_h=parseInt(st_time_parts[0],10);}
to_h=from_h+parseInt(constants.day_shift_length.getValue(),10);this.m_startShiftMS=DateHelper.timeToMS(st_time);this.m_endShiftMS=DateHelper.timeToMS((to_h-1).toString()+":59:59");options.templateOptions=options.templateOptions||{};options.templateOptions.workHours=from_h+"-"+to_h;this.m_prodBaseList=[];if(options.models&&options.models.ProductionBase_Model){while(options.models.ProductionBase_Model.getNextRow()){this.m_prodBaseList.push({"productionBaseId":options.models.ProductionBase_Model.getFieldValue("id"),"productionBaseName":options.models.ProductionBase_Model.getFieldValue("name")})}}
options.templateOptions.productionBases=this.m_prodBaseList;options.addElement=function(){var init_dt;if(options.models&&options.models.InitDate&&options.models.InitDate.getNextRow()){init_dt=DateHelper.strtotime(options.models.InitDate.getFieldValue("dt"));}
var per_select=new EditPeriodShift(id+":order_make_filter",{"template":window.getApp().getTemplate(((window.getWidthType()=="sm")?"EditPeriodShiftSM":"EditPeriodShift")),"dateFrom":init_dt,"onChange":function(dateTime){var refr_inv=self.m_refreshInterval;self.setRefreshInterval(0);self.m_refreshMethod.setFieldValue("date",dateTime);window.setGlobalWait(true);var lab_v=self.getElement("lab_entry_grid");var lab_grid=lab_v.getElement("grid")
lab_grid.setFilter(lab_v.getPeriodFilterFrom(dateTime));lab_grid.setFilter(lab_v.getPeriodFilterTo(dateTime));lab_grid.onRefresh();self.refresh(function(){window.setGlobalWait(false);self.setRefreshInterval(refr_inv);});}});this.addElement(per_select);var model=options.models.OrderMakeForLabList_Model;var grid=new OrderMakeGrid(id+":order_make_grid",{"editViewClass":OrderMakeForLabDialog_View,"editWinClass":WindowFormModalBS,"editWinOptions":{"dialogWidth":"30%"},"model":options.models.OrderMakeForLabList_Model,"className":"table-bordered table-responsive table-make_order order_make_grid","periodSelect":per_select,"listView":this,"stepMin":constants.order_step_min.getValue(),"shiftStart":constants.first_shift_start_time.getValue(),"shiftLength":constants.shift_length_time.getValue()});this.addElement(grid);grid.onRefresh=function(){self.refresh();}
this.addElement(new AssignedVehicleList_View(id+":veh_assigning",{"models":options.models,"shortDescriptions":true,"noAutoRefresh":true}));for(var i=0;i<this.m_prodBaseList.length;i++){var base_id=this.m_prodBaseList[i].productionBaseId;var m_id="MatTotals"+base_id+"_Model";if(!options.models[m_id]){throw new Error("Model "+m_id+" not found!");}
this.addElement(new MaterialMakeOrderGrid(id+":mat_totals_grid"+base_id,{"model":new MatTotals_Model({"data":options.models[m_id].getData()}),"className":this.TABLE_CLASS,"refresh":function(){self.refresh();}}));var m_id="MaterialStoreForOrderList"+base_id+"_Model";if(!options.models[m_id]){throw new Error("Model "+m_id+" not found!");}
this.addElement(new MaterialStoreForOrderList_View(id+":material_stores"+base_id,{"model":new MaterialStoreForOrderList_Model({"data":options.models[m_id].getData()}),"listView":this}));var m_id="CementSiloForOrderList"+base_id+"_Model";if(!options.models[m_id]){throw new Error("Model "+m_id+" not found!");}
this.addElement(new CementSiloForOrderList_View(id+":production_sites"+base_id,{"model":new CementSiloForOrderList_Model({"data":options.models[m_id].getData()}),"listView":this}));}
this.addElement(new VehicleScheduleMakeOrderGrid(id+":veh_schedule_grid",{"model":options.models.VehicleScheduleMakeOrderList_Model}));this.addElement(new LabEntryList_View(id+":lab_entry_grid",{"listView":this,"dateTime":init_dt}));this.addElement(new OperatorList_View(id+":OperatorList_View",{"models":options.models,"fromLabList":true,"showProductionSites":false}));}
options.srvEvents={"events":[{"id":"Graph.change"},{"id":"VehicleScheduleState.insert"},{"id":"VehicleScheduleState.update"},{"id":"VehicleScheduleState.delete"},{"id":"RAMaterialFact.change"},{"id":"LabEntry.insert"},{"id":"LabEntry.update"},{"id":"LabEntry.delete"},{"id":"Production.insert"},{"id":"Production.update"},{"id":"Production.delete"}],"onWakeup":function(){self.refresh();},"onEvent":function(json){self.srvEventsCallBack(json);},"onSubscribed":function(){self.setRefreshInterval(self.FORCE_REFRESH_INTERVAL);},"onClose":function(message){self.setRefreshInterval(self.m_httpRefreshInterval);}}
this.m_httpRefreshInterval=constants.order_grid_refresh_interval.getValue()*1000;OrderMakeForLabList_View.superclass.constructor.call(this,id,options);}
extend(OrderMakeForLabList_View,View);OrderMakeForLabList_View.prototype.TABLE_CLASS="table-bordered table-responsive table-striped table-make_order";OrderMakeForLabList_View.prototype.COL_CLIENT_LEN=20;OrderMakeForLabList_View.prototype.COL_DEST_LEN=10;OrderMakeForLabList_View.prototype.COL_COMMENT_LEN=15;OrderMakeForLabList_View.prototype.COL_DESCR_LEN=15;OrderMakeForLabList_View.prototype.COL_DRIVER_LEN=10;OrderMakeForLabList_View.prototype.COL_PUMP_VEH_LEN=10;OrderMakeForLabList_View.prototype.FORCE_REFRESH_INTERVAL=30*60*1000;OrderMakeForLabList_View.prototype.m_startShiftMS;OrderMakeForLabList_View.prototype.m_endShiftMS;OrderMakeForLabList_View.prototype.setRefreshInterval=function(v){if(this.m_refreshInterval==v){return;}
console.log("OrderMakeForLabList_View.prototype.setRefreshInterval v="+v)
this.m_refreshInterval=v;if(this.m_refreshTimer!=undefined){console.log("clearing timer")
window.clearInterval(this.m_refreshTimer);}
if(v>0){var self=this;this.m_refreshTimer=setInterval(function(){self.refresh();},v);}}
OrderMakeForLabList_View.prototype.refresh=function(callBack){this.m_refreshMethod.setFieldValue("date",this.getElement("order_make_filter").getDateFrom());var self=this;this.m_refreshMethod.run({"ok":function(resp){self.onRefreshResponse(resp);if(callBack){callBack();}}})}
OrderMakeForLabList_View.prototype.toDOM=function(p){OrderMakeForLabList_View.superclass.toDOM.call(this,p);if(!window.getApp().getAppSrv()){this.setRefreshInterval(this.m_httpRefreshInterval);}
window.getApp().addCollapseOnClick();window.getApp().initViewPanels(this);}
OrderMakeForLabList_View.prototype.delDOM=function(){if(this.m_refreshTimer!=undefined){window.clearInterval(this.m_refreshTimer);}
OrderMakeForLabList_View.superclass.delDOM.call(this);}
OrderMakeForLabList_View.prototype.onRefreshResponse=function(resp){if(resp.modelExists("OrderMakeForLabList_Model")){var grid=this.getElement("order_make_grid");if(!grid.getLocked()){grid.getModel().setData(resp.getModelData("OrderMakeForLabList_Model"));grid.onGetData();}}
for(var i=0;i<this.m_prodBaseList.length;i++){var base_id=this.m_prodBaseList[i].productionBaseId;if(this.m_showProductionSites&&resp.modelExists("CementSiloForOrderList"+base_id+"_Model")){this.getElement("production_sites"+base_id).setData(resp.getModel("CementSiloForOrderList"+base_id+"_Model"));}
if(this.m_showProductionSites&&resp.modelExists("MaterialStoreForOrderList"+base_id+"_Model")){this.getElement("material_stores"+base_id).setData(resp.getModel("MaterialStoreForOrderList"+base_id+"_Model"));}
if(resp.modelExists("MatTotals"+base_id+"_Model")){var grid=this.getElement("mat_totals_grid"+base_id);grid.getModel().setData(resp.getModelData("MatTotals"+base_id+"_Model"));grid.onGetData();}}
if(resp.modelExists("AssignedVehicleList_Model")){this.getElement("veh_assigning").setData(resp.getModelData("AssignedVehicleList_Model"));}
if(resp.modelExists("VehicleScheduleMakeOrderList_Model")){var grid=this.getElement("veh_schedule_grid");grid.getModel().setData(resp.getModelData("VehicleScheduleMakeOrderList_Model"));grid.onGetData();}
if(resp.modelExists("OperatorList_Model")){this.getElement("OperatorList_View").getElement("grid").onGetData(resp);}}
OrderMakeForLabList_View.prototype.runSpecificUpdateMethod=function(meth,lsn){var pm=(new Order_Controller()).getPublicMethod(meth);pm.setFieldValue("date",this.getElement("order_make_filter").getDateFrom());if(lsn&&pm.fieldExists("lsn")){pm.setFieldValue("lsn",lsn);}
var self=this;pm.run({"ok":function(resp){self.onRefreshResponse(resp);}});}
OrderMakeForLabList_View.prototype.srvEventsCallBack=function(json){if(json.controllerId=="Graph"){this.runSpecificUpdateMethod("get_make_orders_form_ord",(json.params&&json.params.lsn)?json.params.lsn:null);this.getElement("OperatorList_View").getElement("grid").onRefresh();}
else if(json.controllerId=="VehicleScheduleState"){this.runSpecificUpdateMethod("get_make_orders_for_lab_form_veh",(json.params&&json.params.lsn)?json.params.lsn:null);}
else if(json.controllerId=="RAMaterialFact"){this.runSpecificUpdateMethod("get_make_orders_for_lab_form_mat",(json.params&&json.params.lsn)?json.params.lsn:null);}
else if(json.controllerId=="Production"){this.getElement("OperatorList_View").getElement("grid").onRefresh();}} 
function OrderMakeForLabDialog_View(id,options){options=options||{};options.HEAD_TITLE="Заявка";options.cmdSave=true;options.controller=new Order_Controller();options.readPublicMethod=options.controller.getPublicMethod("get_object_for_lab");options.model=(options.models&&options.models.OrderMakeForLabDialog_Model)?options.models.OrderMakeForLabDialog_Model:new OrderMakeForLabDialog_Model();options.addElement=function(){this.addElement(new EditString(id+":comment_text",{"labelCaption":"Комментарий:","title":"Комментарий к заявке","focus":true}));this.addElement(new ConcreteTypeEdit(id+":concrete_type",{"editContClassName":("input-group "+window.getBsCol(2)),"required":true,"asyncRefresh":false}));}
OrderMakeForLabDialog_View.superclass.constructor.call(this,id,options);var r_bd=[new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("concrete_type"),"field":this.m_model.getField("concrete_types_ref")})];this.setDataBindings(r_bd);var wr_b=[new CommandBinding({"control":this.getElement("comment_text")}),new CommandBinding({"control":this.getElement("concrete_type"),"fieldId":"concrete_type_id"})];this.setWriteBindings(wr_b);}
extend(OrderMakeForLabDialog_View,ViewObjectAjx); 
function OrderMakeForWeighingList_View(id,options){options.templateOptions=options.templateOptions||{};options.className="row";this.m_refreshMethod=(new Order_Controller()).getPublicMethod("get_make_orders_for_weighing_form");var self=this;var constants={"order_grid_refresh_interval":null,"first_shift_start_time":null,"day_shift_length":null,"order_step_min":null,"shift_length_time":"null"};window.getApp().getConstantManager().get(constants);this.resetTotals();var st_time=constants.first_shift_start_time.getValue();var st_time_parts=st_time.split(":");var from_h=0,to_h=0;if(st_time_parts&&st_time_parts.length){from_h=parseInt(st_time_parts[0],10);}
to_h=from_h+parseInt(constants.day_shift_length.getValue(),10);this.m_startShiftMS=DateHelper.timeToMS(st_time);this.m_endShiftMS=DateHelper.timeToMS((to_h-1).toString()+":59:59");var init_dt,cond_date;if(options.models&&options.models.InitDate&&options.models.InitDate.getNextRow()){var d_s=options.models.InitDate.getFieldValue("dt");init_dt=DateHelper.strtotime(d_s);}
options.templateOptions=options.templateOptions||{};options.templateOptions.workHours=from_h+"-"+to_h;this.m_prodBaseList=[];if(options.models&&options.models.ProductionBase_Model){while(options.models.ProductionBase_Model.getNextRow()){this.m_prodBaseList.push({"productionBaseId":options.models.ProductionBase_Model.getFieldValue("id"),"productionBaseName":options.models.ProductionBase_Model.getFieldValue("name")})}}
options.templateOptions.productionBases=this.m_prodBaseList;options.addElement=function(){this.addElement(new RawMaterialTicketClose_View(id+":ticket_close",{"model":options.models.RawMaterialTicketCarrierAggList_Model,"listView":this}));for(var i=0;i<this.m_prodBaseList.length;i++){var base_id=this.m_prodBaseList[i].productionBaseId;var m_id="MatTotals"+base_id+"_Model";if(!options.models[m_id]){throw new Error("Model "+m_id+" not found!");}
this.addElement(new MaterialMakeOrderGrid(id+":mat_totals_grid"+base_id,{"model":new MatTotals_Model({"data":options.models[m_id].getData()}),"className":this.TABLE_CLASS,"refresh":function(){self.refresh();}}));var m_id="CementSiloForOrderList"+base_id+"_Model";if(!options.models[m_id]){throw new Error("Model "+m_id+" not found!");}
this.addElement(new CementSiloForOrderList_View(id+":production_sites"+base_id,{"model":new CementSiloForOrderList_Model({"data":options.models[m_id].getData()}),"listView":this}));var m_id="MaterialStoreForOrderList"+base_id+"_Model";if(!options.models[m_id]){throw new Error("Model "+m_id+" not found!");}
this.addElement(new MaterialStoreForOrderList_View(id+":material_stores"+base_id,{"model":new MaterialStoreForOrderList_Model({"data":options.models[m_id].getData()}),"listView":this}));}
var per_select=new EditPeriodShift(id+":order_make_filter",{"template":window.getApp().getTemplate(((window.getWidthType()=="sm")?"EditPeriodShiftSM":"EditPeriodShift")),"dateFrom":init_dt,"onChange":function(dateTime){window.setGlobalWait(true);self.refresh(function(){window.setGlobalWait(false);},true);}});this.addElement(per_select);var grid=new OrderMakeGrid(id+":order_make_grid",{"model":options.models.OrderMakeList_Model,"periodSelect":per_select,"className":"table-bordered table-responsive table-make_order order_make_grid","listView":this,"stepMin":constants.order_step_min.getValue(),"shiftStart":constants.first_shift_start_time.getValue(),"shiftLength":constants.shift_length_time.getValue()});this.addElement(grid);}
options.srvEvents={"events":[{"id":"Graph.change"},{"id":"RAMaterialFact.change"},{"id":"Production.insert"},{"id":"Production.update"},{"id":"Production.delete"}],"onWakeup":function(){self.refresh();},"onEvent":function(json){self.srvEventsCallBack(json);},"onSubscribed":function(){self.setRefreshInterval(self.FORCE_REFRESH_INTERVAL);},"onClose":function(message){self.setRefreshInterval(self.m_httpRefreshInterval);}}
this.m_httpRefreshInterval=constants.order_grid_refresh_interval.getValue()*1000;OrderMakeForWeighingList_View.superclass.constructor.call(this,id,options);}
extend(OrderMakeForWeighingList_View,View);OrderMakeForWeighingList_View.prototype.TABLE_CLASS="table-bordered table-responsive table-striped table-make_order";OrderMakeForWeighingList_View.prototype.COL_CLIENT_LEN=20;OrderMakeForWeighingList_View.prototype.COL_DEST_LEN=10;OrderMakeForWeighingList_View.prototype.COL_COMMENT_LEN=15;OrderMakeForWeighingList_View.prototype.COL_DESCR_LEN=15;OrderMakeForWeighingList_View.prototype.COL_DRIVER_LEN=10;OrderMakeForWeighingList_View.prototype.COL_PUMP_VEH_LEN=10;OrderMakeForWeighingList_View.prototype.FORCE_REFRESH_INTERVAL=30*60*1000;OrderMakeForWeighingList_View.prototype.m_startShiftMS;OrderMakeForWeighingList_View.prototype.m_endShiftMS;OrderMakeForWeighingList_View.prototype.m_orderedTotal;OrderMakeForWeighingList_View.prototype.m_restTotal;OrderMakeForWeighingList_View.prototype.m_shippedTotal;OrderMakeForWeighingList_View.prototype.m_orderedSum;OrderMakeForWeighingList_View.prototype.m_orderedDay;OrderMakeForWeighingList_View.prototype.m_orderedBeforeNow=0;OrderMakeForWeighingList_View.prototype.m_shippedBeforeNow=0;OrderMakeForWeighingList_View.prototype.m_shippedDayBeforeNow=0;OrderMakeForWeighingList_View.prototype.setRefreshInterval=function(v){if(this.m_refreshInterval==v){return;}
this.m_refreshInterval=v;if(this.m_refreshTimer!=undefined){console.log("clearing timer")
window.clearInterval(this.m_refreshTimer);}
if(v>0){var self=this;this.m_refreshTimer=setInterval(function(){self.refresh();},v);}}
OrderMakeForWeighingList_View.prototype.refresh=function(callBack){var self=this;this.m_refreshMethod.run({"ok":function(resp){self.onRefreshResponse(resp);if(callBack){callBack();}}})}
OrderMakeForWeighingList_View.prototype.toDOM=function(p){OrderMakeForWeighingList_View.superclass.toDOM.call(this,p);if(!window.getApp().getAppSrv()){this.setRefreshInterval(this.m_httpRefreshInterval);}
this.showTotals();window.getApp().addCollapseOnClick();window.getApp().initViewPanels(this);this.getElement("ticket_close").getElement("barcode").focus();}
OrderMakeForWeighingList_View.prototype.delDOM=function(){if(this.m_refreshTimer!=undefined){window.clearInterval(this.m_refreshTimer);}
OrderMakeForWeighingList_View.superclass.delDOM.call(this);}
OrderMakeForWeighingList_View.prototype.onRefreshResponse=function(resp){for(var i=0;i<this.m_prodBaseList.length;i++){var base_id=this.m_prodBaseList[i].productionBaseId;if(resp.modelExists("CementSiloForOrderList"+base_id+"_Model")){this.getElement("production_sites"+base_id).setData(resp.getModel("CementSiloForOrderList"+base_id+"_Model"));}
if(resp.modelExists("MaterialStoreForOrderList"+base_id+"_Model")){this.getElement("material_stores"+base_id).setData(resp.getModel("MaterialStoreForOrderList"+base_id+"_Model"));}
if(resp.modelExists("MatTotals"+base_id+"_Model")){var grid=this.getElement("mat_totals_grid"+base_id);grid.getModel().setData(resp.getModelData("MatTotals"+base_id+"_Model"));grid.onGetData();}}
if(resp.modelExists("RawMaterialTicketCarrierAggList_Model")){var grid=this.getElement("ticket_close").getElement("grid");grid.getModel().setData(resp.getModelData("RawMaterialTicketCarrierAggList_Model"));grid.onGetData();}
if(resp.modelExists("OrderMakeList_Model")){var grid=this.getElement("order_make_grid");grid.getModel().setData(resp.getModelData("OrderMakeList_Model"));grid.onGetData();}
this.showTotals();}
OrderMakeForWeighingList_View.prototype.showTotals=function(){var n=DateHelper.time();var dif_sec=(n.getTime()-(DateHelper.getStartOfShift(n)).getTime())/1000;this.setTotalVal("totOrdered",this.m_orderedTotal.toFixed(2));this.setTotalVal("totShipped",this.m_shippedTotal.toFixed(2));this.setTotalVal("totBalance",(this.m_orderedTotal-this.m_shippedTotal).toFixed(2));this.setTotalVal("totEfficiency",(Math.round((this.m_shippedBeforeNow-this.m_orderedBeforeNow)*100)/100).toFixed(2));this.setTotalVal("totDayVelocity",(Math.round(this.m_orderedDay/13*100)/100).toFixed(2));this.setTotalVal("totCurVelocity",(Math.round(this.m_shippedDayBeforeNow/dif_sec*60*60*100)/100).toFixed(2));this.setTotalVal("totOrderedDay",this.m_orderedDay.toFixed(2));}
OrderMakeForWeighingList_View.prototype.resetTotals=function(){this.m_orderedTotal=0;this.m_restTotal=0;this.m_shippedTotal=0;this.m_orderedSum=0;this.m_orderedDay=0;this.m_orderedBeforeNow=0;this.m_shippedBeforeNow=0;this.m_shippedDayBeforeNow=0;}
OrderMakeForWeighingList_View.prototype.setTotalVal=function(id,v){var n=document.getElementById(id);if(n){n.textContent=v;}}
OrderMakeForWeighingList_View.prototype.runSpecificUpdateMethod=function(meth,lsn){var pm=(new Order_Controller()).getPublicMethod(meth);pm.setFieldValue("date",(new FieldDateTime("d",{"value":DateHelper.time()})).getValueXHR());if(lsn&&pm.fieldExists("lsn")){pm.setFieldValue("lsn",lsn);}
var self=this;pm.run({"ok":function(resp){self.onRefreshResponse(resp);}});}
OrderMakeForWeighingList_View.prototype.srvEventsCallBack=function(json){if(json.controllerId=="RAMaterialFact"||json.controllerId=="Production"){this.runSpecificUpdateMethod("get_make_orders_for_weighing_form",(json.params&&json.params.lsn)?json.params.lsn:null);}} 
function CementSiloList_View(id,options){options=options||{};CementSiloList_View.superclass.constructor.call(this,id,options);var model=options.models.CementSiloList_Model;var contr=new CementSilo_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"production_site_id"})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name"),"ctrlClass":EditString,"ctrlOptions":{"labelCaption":"","maxLength":"100"}})]}),new GridCellHead(id+":grid:head:production_descr",{"value":"Наименование в Elkon","columns":[new GridColumn({"field":model.getField("production_descr"),"ctrlClass":EditString,"ctrlOptions":{"labelCaption":"","maxLength":"100"}})]}),new GridCellHead(id+":grid:head:weigh_app_name",{"value":"Наименование в весовой прогр.","columns":[new GridColumn({"field":model.getField("weigh_app_name"),"ctrlClass":EditString,"ctrlOptions":{"labelCaption":"","maxLength":"100"}})]}),new GridCellHead(id+":grid:head:load_capacity",{"value":"Вместимость, т.","columns":[new GridColumn({"field":model.getField("load_capacity"),"ctrlClass":EditFloat,"ctrlOptions":{"labelCaption":"","precision":"4"}})]}),new GridCellHead(id+":grid:head:visible",{"value":"Показывать","columns":[new GridColumnBool({"field":model.getField("visible")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(CementSiloList_View,ViewAjxList); 
function CementSiloForOrderList_View(id,options){options=options||{};this.m_listView=options.listView;this.m_connectCheck=new ConnectElkonCheck();this.setData(options.model);options.templateOptions=this.getTemplateOptions();CementSiloForOrderList_View.superclass.constructor.call(this,id,"TEMPLATE",options);this.fillSilos();}
extend(CementSiloForOrderList_View,Control);CementSiloForOrderList_View.prototype.m_silos;CementSiloForOrderList_View.prototype.m_connectCheck;CementSiloForOrderList_View.prototype.setData=function(modelSilos){if(!modelSilos){return;}
var is_init=(this.m_silos==undefined);var redraw=false;if(!is_init){var silo_cnt=0;var silo_id;while(modelSilos.getNextRow()){silo_id=modelSilos.getFieldValue("id");if(!this.m_silos["silo_"+silo_id]||!document.getElementById("silo_canvas_"+silo_id)){redraw=true;}
else if(this.m_silos["silo_"+silo_id]){this.m_silos["silo_"+silo_id].balance=parseFloat(modelSilos.getFieldValue("balance"),10);if(isNaN(this.m_silos["silo_"+silo_id].balance)){this.m_silos["silo_"+silo_id].balance=0;}}
this.m_connectCheck.addProductionSite(silo_id,modelSilos.getFieldValue("pong"));silo_cnt++;}
if(!redraw&&(modelSilos.getRowCount()!=silo_cnt)){redraw=true;}
modelSilos.reset();}
if(is_init||redraw){this.m_silos=[];var templ_opts={"productionSites":[]};var prod_site,cur_prod_site;while(modelSilos.getNextRow()){var s_name=modelSilos.getFieldValue("name");var s_id=modelSilos.getFieldValue("id");cur_prod_site=modelSilos.getFieldValue("production_sites_ref");if(!prod_site||prod_site.productionSiteId!=cur_prod_site.getKey("id")){if(cur_prod_site.getDescr){prod_site={"productionSiteName":cur_prod_site.getDescr(),"productionSiteId":cur_prod_site.getKey("id"),"silos":[]};templ_opts.productionSites.push(prod_site);}}
prod_site.silos.push({"siloName":s_name,"siloId":s_id});this.m_silos["silo_"+s_id]={"name":s_name,"id":s_id,"balance":modelSilos.getFieldValue("balance"),"load_capacity":modelSilos.getFieldValue("load_capacity")}}
this.setTemplateOptions(templ_opts);}
if(redraw){this.setTemplate(window.getApp().getTemplate("CementSiloForOrderList_View"));}
if(!is_init){this.fillSilos();}}
CementSiloForOrderList_View.prototype.fillSilos=function(){for(var silo_id in this.m_silos){var silo_n=document.getElementById("silo_canvas_"+this.m_silos[silo_id].id);var silo_cont_n=document.getElementById("silo_cont_"+this.m_silos[silo_id].id);if(silo_n&&silo_cont_n){var percent=(!this.m_silos[silo_id].load_capacity||isNaN(this.m_silos[silo_id].load_capacity)||!this.m_silos[silo_id].balance||isNaN(this.m_silos[silo_id].balance))?0:Math.floor((this.m_silos[silo_id].balance/this.m_silos[silo_id].load_capacity*100));if(percent>100){percent=100;}
else if(isNaN(percent)){percent=0;}
silo_n.title="Остаток:"+((this.m_silos[silo_id].balance&&!isNaN(this.m_silos[silo_id].balance))?this.m_silos[silo_id].balance:0);if(this.m_silos[silo_id].load_percent!=percent){silo_n.setAttribute("silo_id",this.m_silos[silo_id].id);this.m_silos[silo_id].load_percent=percent;this.drawSilo(silo_n,silo_cont_n,0,0,percent);var self=this;EventHelper.add(silo_n,"dblclick",function(e){self.onCorrectQuant(e.target.getAttribute("silo_id"));});}}}}
CementSiloForOrderList_View.prototype.drawSilo=function(siloNode,siloContNode,posLeft,posTop,fillPercent){var silo_height=100;var silo_cone_height_k=0.25;var silo_cone_width=8;var silo_width=56;var fill_tolerance=1;var silo_cone_height=silo_height*silo_cone_height_k;var silo_cone_parts=Math.floor(silo_width/silo_cone_width);var silo_cone_parts_one_side=(silo_cone_parts-1)/2;var fill_style="#8c8c8c";var cx=siloNode.getContext("2d");cx.clearRect(posLeft,posTop,silo_width,silo_height+silo_height*silo_cone_height_k);cx.lineWidth="2";cx.beginPath();cx.moveTo(posLeft,posTop);cx.lineTo(posLeft,posTop+silo_height);cx.lineTo(posLeft+silo_cone_width*silo_cone_parts_one_side,posTop+silo_height+silo_cone_height);cx.lineTo(posLeft+silo_cone_width*(silo_cone_parts_one_side+1),posTop+silo_height+silo_cone_height);cx.lineTo(posLeft+silo_cone_width*silo_cone_parts,posTop+silo_height);cx.lineTo(posLeft+silo_cone_width*silo_cone_parts,posTop);cx.lineTo(posLeft,posTop);cx.stroke();if(fillPercent){var extra_height=Math.floor(silo_cone_height*silo_cone_width*silo_cone_parts_one_side/silo_width);var fill_main_h=Math.floor((silo_height+silo_cone_height)*fillPercent/100)+extra_height-fill_tolerance;var fill_main_top=posTop+silo_height+silo_cone_height-fill_main_h;if(fill_main_top>posTop+silo_height+silo_cone_height-fill_tolerance*2){return;}
cx.fillStyle=fill_style;cx.lineWidth="0.5";cx.beginPath();var main_part=(fill_main_h>silo_cone_height);if(main_part){cx.moveTo(posLeft+fill_tolerance,fill_main_top+fill_tolerance);cx.lineTo(posLeft+fill_tolerance,posTop+silo_height-fill_tolerance);}
else{var m=silo_cone_height/(silo_cone_width*silo_cone_parts_one_side);var b=(posTop+silo_height+silo_cone_height)-(m*(posLeft+silo_cone_width*silo_cone_parts_one_side));var cone_pos_y=fill_main_top+fill_tolerance;var cone_pos_x=Math.floor((cone_pos_y-b)/m);cx.moveTo(cone_pos_x+fill_tolerance,cone_pos_y+fill_tolerance);}
cx.lineTo(posLeft+silo_cone_width*silo_cone_parts_one_side,posTop+silo_height-fill_tolerance+silo_cone_height);cx.lineTo(posLeft+silo_cone_width*(silo_cone_parts_one_side+1),posTop+silo_height-fill_tolerance+silo_cone_height);if(main_part){cx.lineTo(posLeft-fill_tolerance+silo_cone_width*silo_cone_parts,posTop+silo_height-fill_tolerance);cx.lineTo(posLeft-fill_tolerance+silo_cone_width*silo_cone_parts,fill_main_top+fill_tolerance*2);cx.lineTo(posLeft+fill_tolerance,fill_main_top+fill_tolerance*2);}
else{var n=(posLeft-fill_tolerance+silo_cone_width*silo_cone_parts_one_side)-cone_pos_x;var n2=posLeft+silo_cone_width*(silo_cone_parts_one_side+1)-fill_tolerance+n;cx.lineTo(n2,cone_pos_y+fill_tolerance);}
cx.fill();}
DOMHelper.delAllChildren(siloContNode);DOMHelper.setText(siloContNode,fillPercent+"%");siloContNode.style="position:relative;top:-"+((silo_height+silo_cone_height)/2+0)+"px;left:"+((silo_width+silo_cone_width)/2-25)+"px";}
CementSiloForOrderList_View.prototype.setCorrectionOnServer=function(newValues,fieldValues){var self=this;var pm=(new CementSilo_Controller()).getPublicMethod("reset_balance");pm.setFieldValue("cement_silo_id",fieldValues.silo_id);pm.setFieldValue("comment_text",newValues.comment_text);pm.run({"ok":function(){window.showTempNote(fieldValues.silo_descr+": остаток обнулен",null,5000);self.closeCorrection();self.m_listView.refresh();}})}
CementSiloForOrderList_View.prototype.onCorrectQuant=function(siloId){if(!siloId||!parseInt(siloId,10))return;var elem_id="silo_"+siloId;if(!this.m_silos[elem_id].balance){throw new Error("Нет остатка в силосе "+this.m_silos[elem_id]["name"]);}
this.closeCorrection();var self=this;this.m_view=new EditJSON("CorrectQuant:cont",{"elements":[new ControlContainer("CorrectQuant:cont:text","DIV",{"className":"alert alert-info alert-styled-left alert-bordered","elements":[new Control("CorrectQuant:cont:text:p","DIV",{"className":"no-margin text-semibold","value":"Количество по данному силосу будет обнулено, для продолжение нажмите ОК"})]}),new EditText("CorrectQuant:cont:comment_text",{"labelCaption":"Комментарий:","rows":3,"focus":true})]});this.m_form=new WindowFormModalBS("CorrectQuant",{"content":this.m_view,"cmdCancel":true,"cmdOk":true,"contentHead":"Обнуление силоса "+this.m_silos[elem_id]["name"],"onClickCancel":function(){self.closeCorrection();},"onClickOk":function(){var res=self.m_view.getValueJSON();self.setCorrectionOnServer(res,self.m_view.fieldValues);}});this.m_view.fieldValues={"silo_id":siloId,"silo_descr":this.m_silos[elem_id]["name"]}
this.m_form.open();}
CementSiloForOrderList_View.prototype.closeCorrection=function(){if(this.m_view)this.m_view.delDOM()
if(this.m_form)this.m_form.delDOM();if(this.m_view)delete this.m_view;if(this.m_form)delete this.m_form;} 
function MaterialStoreForOrderList_View(id,options){options=options||{};this.m_listView=options.listView;this.setData(options.model);options.templateOptions=this.getTemplateOptions();options.templateOptions=options.templateOptions||{};options.templateOptions.PIC_H=this.PIC_H;options.templateOptions.CONT_H=this.CONT_H;options.templateOptions.PIC_W=this.PIC_W;MaterialStoreForOrderList_View.superclass.constructor.call(this,id,"TEMPLATE",options);this.fillStores();}
extend(MaterialStoreForOrderList_View,Control);MaterialStoreForOrderList_View.prototype.PIC_H=17;MaterialStoreForOrderList_View.prototype.PIC_W=150;MaterialStoreForOrderList_View.prototype.CONT_H=17;MaterialStoreForOrderList_View.prototype.setData=function(modelStores){var is_init=(this.m_stores==undefined);var redraw=false;if(!is_init){var store_cnt=0;var store_id;while(modelStores.getNextRow()){if(!modelStores.getFieldValue("material_id")){continue;}
store_id=modelStores.getFieldValue("id");if(!this.m_stores["store_"+store_id]||!document.getElementById("store_canvas_"+store_id)){redraw=true;}
else if(this.m_stores["store_"+store_id]){this.m_stores["store_"+store_id].balance=parseFloat(modelStores.getFieldValue("balance"),10);if(isNaN(this.m_stores["store_"+store_id].balance)){this.m_stores["store_"+store_id].balance=0;}}
store_cnt++;}
if(!redraw&&(modelStores.getRowCount()!=store_cnt)){redraw=true;}
modelStores.reset();}
if(is_init||redraw){this.m_stores=[];var templ_opts={"productionSites":[]};var prod_site,cur_prod_site;while(modelStores.getNextRow()){if(!modelStores.getFieldValue("material_id")){continue;}
cur_prod_site=modelStores.getFieldValue("production_sites_ref");var s_name=modelStores.getFieldValue("name");var s_id=cur_prod_site.getKey("id");if(!prod_site||prod_site.productionSiteId!=cur_prod_site.getKey("id")){prod_site={"productionSiteName":cur_prod_site.getDescr(),"productionSiteId":cur_prod_site.getKey("id"),"stores":[]};templ_opts.productionSites.push(prod_site);}
prod_site.stores.push({"storeName":s_name,"storeId":s_id});this.m_stores["store_"+s_id]={"name":s_name,"id":s_id,"balance":modelStores.getFieldValue("balance"),"load_capacity":modelStores.getFieldValue("load_capacity"),"material_id":modelStores.getFieldValue("material_id")}}
this.setTemplateOptions(templ_opts);}
if(redraw){this.setTemplate(window.getApp().getTemplate("MaterialStoreForOrderList_View"));}
if(!is_init){this.fillStores();}}
MaterialStoreForOrderList_View.prototype.fillStores=function(){for(var store_id in this.m_stores){var store_n=document.getElementById("store_canvas_"+this.m_stores[store_id].id);var store_cont_n=document.getElementById("store_cont_"+this.m_stores[store_id].id);if(store_n&&store_cont_n){var percent=(!this.m_stores[store_id].load_capacity||isNaN(this.m_stores[store_id].load_capacity)||!this.m_stores[store_id].balance||isNaN(this.m_stores[store_id].balance))?0:Math.floor((this.m_stores[store_id].balance/this.m_stores[store_id].load_capacity*100));if(percent>100){percent=100;}
else if(isNaN(percent)){percent=0;}
store_n.title="Остаток:"+((this.m_stores[store_id].balance&&!isNaN(this.m_stores[store_id].balance))?this.m_stores[store_id].balance:0);if(this.m_stores[store_id].load_percent!=percent){store_n.setAttribute("store_id",this.m_stores[store_id].id);this.m_stores[store_id].load_percent=percent;this.drawStore(store_n,store_cont_n,0,0,percent);EventHelper.add(store_n,"dblclick",(function(materialId,materialDescr,productionSiteId){return function(e){window.getApp().materialQuantCorrection({"material_id":new FieldInt("material_id",{"value":materialId}),"material_descr":new FieldString("material_descr",{"value":materialDescr}),"production_site_id":productionSiteId});}})(this.m_stores[store_id].material_id,this.m_stores[store_id]["name"],this.m_stores[store_id].id));}}}}
MaterialStoreForOrderList_View.prototype.drawStore=function(storeNode,storeContNode,posLeft,posTop,fillPercent){var store_height=this.PIC_H;var store_width=this.PIC_W;var fill_tolerance=1;storeNode.width=this.PIC_W;storeNode.height=this.PIC_H;var cx=storeNode.getContext("2d");cx.clearRect(posLeft,posTop,store_width,store_height+store_height);cx.width=this.PIC_W;cx.height=this.PIC_H;cx.lineWidth="2";cx.beginPath();cx.moveTo(posLeft,posTop);cx.lineTo(posLeft,posTop+store_height);cx.lineTo(posLeft+store_width,posTop+store_height);cx.lineTo(posLeft+store_width,posTop);cx.lineTo(posLeft,posTop);cx.stroke();var fill_w=Math.floor(store_width*fillPercent/100)-fill_tolerance*2;cx.fillStyle="#8c8c8c";cx.lineWidth="0.5";cx.beginPath();cx.moveTo(posLeft+fill_tolerance,posTop+fill_tolerance);cx.lineTo(fill_w,posTop+fill_tolerance);cx.lineTo(fill_w,posTop+(store_height-fill_tolerance*2));cx.lineTo(posLeft+fill_tolerance,(store_height-fill_tolerance*2));cx.fill();DOMHelper.delAllChildren(storeContNode);DOMHelper.setText(storeContNode,fillPercent+"%");storeContNode.style="position:relative;top:-20px;left:5px";} 
function ProductionList_View(id,options){ProductionList_View.superclass.constructor.call(this,id,options);var model=options.models.ProductionList_Model;var contr=new Production_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var production_dt_start_ctrl=new EditPeriodDate(id+":filter-ctrl-production_dt_start",{"field":new FieldDateTime("production_dt_start")});var production_dt_end_ctrl=new EditPeriodDate(id+":filter-ctrl-production_dt_end",{"field":new FieldDateTime("production_dt_start")});var filters={"production_dt_start":{"binding":new CommandBinding({"control":production_dt_start_ctrl,"field":production_dt_start_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":production_dt_start_ctrl.getControlFrom(),"field":production_dt_start_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":production_dt_start_ctrl.getControlTo(),"field":production_dt_start_ctrl.getField()}),"sign":"le"}]},"production_dt_end":{"binding":new CommandBinding({"control":production_dt_end_ctrl,"field":production_dt_end_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":production_dt_end_ctrl.getControlFrom(),"field":production_dt_end_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":production_dt_end_ctrl.getControlTo(),"field":production_dt_end_ctrl.getField()}),"sign":"le"}]},"production_id":{"binding":new CommandBinding({"control":new EditString(id+":filter-ctrl-production_id",{"contClassName":"form-group-filter","labelCaption":"№ производства:"}),"field":new FieldInt("production_id")}),"sign":"e"},"production_user":{"binding":new CommandBinding({"control":new EditString(id+":filter-ctrl-production_user",{"maxLength":"100","contClassName":"form-group-filter","labelCaption":"Пользователь:"}),"field":new FieldString("production_user")}),"sign":"e"},"production_site":{"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"contClassName":"form-group-filter","labelCaption":"Завод:"}),"field":new FieldString("production_site_id")}),"sign":"e"},"concrete_type":{"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"contClassName":"form-group-filter","labelCaption":"Марка:"}),"field":new FieldString("concrete_type_id")}),"sign":"e"},"order":{"binding":new CommandBinding({"control":new OrderEdit(id+":filter-ctrl-order",{"contClassName":"form-group-filter","labelCaption":"Заявка:"}),"field":new FieldString("order_id")}),"sign":"e"},"shipment":{"binding":new CommandBinding({"control":new OrderEdit(id+":filter-ctrl-shipment",{"contClassName":"form-group-filter","labelCaption":"Отгрузка:"}),"field":new FieldString("shipment_id")}),"sign":"e"},"vehicle":{"binding":new CommandBinding({"control":new OrderEdit(id+":filter-ctrl-vehicle",{"contClassName":"form-group-filter","labelCaption":"ТС:"}),"field":new FieldString("vehicle_id")}),"sign":"e"}}
var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:production_id",{"value":"№ произв-ва","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("production_id")})]}),new GridCellHead(id+":grid:head:production_dt_start",{"value":"Дата начала","colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("production_dt_start")})]}),new GridCellHead(id+":grid:head:dt_start_set",{"value":"Установка даты начала","colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("dt_start_set")})]}),new GridCellHead(id+":grid:head:production_dt_end",{"value":"Дата окончания","colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("production_dt_end")})]}),new GridCellHead(id+":grid:head:dt_end_set",{"value":"Установка даты окончания","colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("dt_end_set")})]}),new GridCellHead(id+":grid:head:production_user",{"value":"Пользователь","columns":[new GridColumn({"field":model.getField("production_user")})]}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref")})]}),new GridCellHead(id+":grid:head:orders_ref",{"value":"Заявка","columns":[new GridColumnRef({"field":model.getField("orders_ref"),"form":OrderDialog_Form})]}),new GridCellHead(id+":grid:head:shipments_ref",{"value":"Отгрузка","columns":[new GridColumnRef({"field":model.getField("shipments_ref"),"form":ShipmentDialog_Form})]}),new GridCellHead(id+":grid:head:vehicle_schedules_ref",{"value":"Экипаж","columns":[new GridColumnRef({"field":model.getField("vehicle_schedules_ref")})]}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","columns":[new GridColumnRef({"field":model.getField("concrete_types_ref")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ProductionList_View,ViewAjx); 
function ProductionVehicleCorrectionList_View(id,options){ProductionVehicleCorrectionList_View.superclass.constructor.call(this,id,options);var model=options.models.ProductionVehicleCorrectionList_Model;var contr=new ProductionVehicleCorrection_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["production_site_id","production_id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"production_site_id"})]}),new GridCellHead(id+":grid:head:production_id",{"value":"№ производства","columns":[new GridColumn({"field":model.getField("production_id")})]}),new GridCellHead(id+":grid:head:vehicles_ref",{"value":"ТС","columns":[new GridColumnRef({"field":model.getField("vehicles_ref"),"ctrlClass":VehicleEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"vehicle_id"})]}),new GridCellHead(id+":grid:head:users_ref",{"value":"Пользователь","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"user_id"})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time")})],"sortable":true,"sort":"desc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ProductionVehicleCorrectionList_View,ViewAjxList); 
function ProductionMaterialList_View(id,options){var production_id,production_site_id;if(options.detailFilters){for(var i=0;i<options.detailFilters.ProductionMaterialList_Model.length;i++){if(options.detailFilters.ProductionMaterialList_Model[i].masterFieldId=="production_id"){production_id=options.detailFilters.ProductionMaterialList_Model[i].val;}
else if(options.detailFilters.ProductionMaterialList_Model[i].masterFieldId=="production_site_id"){production_site_id=options.detailFilters.ProductionMaterialList_Model[i].val;}}}
this.HEAD_TITLE="Списание материалов в производство"+(production_id?" №"+production_id:"");ProductionMaterialList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ProductionMaterialList_Model)?options.models.ProductionMaterialList_Model:new ProductionMaterialList_Model();var contr=new Production_Controller();var popup_menu=new PopUpMenu();var pagination=null,refresh_int=0;var role_id=window.getApp().getServVar("role_id");var show_comment=(CommonHelper.inArray(role_id,["operator","dispatcher"])==-1);if(!options.detailFilters){var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);refresh_int=constants.grid_refresh_interval.getValue()*1000;var pagClass=window.getApp().getPaginationClass();pagination=new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()});}
var self=this;this.addElement(new GridAjx(id+":grid",{"keyIds":["production_site_id","production_id","material_id","cement_silo_id"],"className":"table table-bordered table-responsive table-striped productionMaterialList","model":model,"controller":contr,"readPublicMethod":contr.getPublicMethod("get_production_material_list"),"editInline":true,"editWinClass":null,"contClassName":options.detailFilters?window.getBsCol(6):null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":options.detailFilters?(new ProductionMaterialListGridInsertCmd(id+":grid:cmd:insert",{"production_id":production_id,"production_site_id":production_site_id})):false,"cmdEdit":false,"cmdCopy":false,"cmdDelete":(options.detailFilters&&(role_id=="admin"||role_id=="owner"||role_id=="manager"||role_id=="accountant"||role_id=="supervisor"))?(new ProductionMaterialListGridDelCmd(id+":grid:cmd:delete",{"production_id":production_id,"production_site_id":production_site_id})):false,"filters":null,"cmdAllCommands":options.detailFilters?false:true,"cmdSearch":options.detailFilters?false:true,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"onEventSetCellOptions":function(opts){if(opts.gridColumn.getId()=="quant_fact"){var q_editable=true;if(q_editable){opts.className="quant_editable";}
var v=opts.fields.quant_corrected.getValue();opts.attrs=opts.attrs||{};if(v){opts.className=opts.className||"";var elkon_cor=opts.fields.elkon_correction_id.getValue();if(elkon_cor&&elkon_cor!="0"){opts.attrs.title="Исправления Elkon №"+elkon_cor+" от "+DateHelper.format(opts.fields.correction_date_time_set.getValue(),"d/m/y H:i")+", "+opts.fields.correction_users_ref.getValue().getDescr();opts.className+=((opts.className=="")?"":" ")+"factQuantCorrectedElkon";}
else{opts.className+=((opts.className=="")?"":" ")+"factQuantCorrected";opts.attrs.title="Ручное исправление:"+" от "+DateHelper.format(opts.fields.correction_date_time_set.getValue(),"d/m/y H:i")+", "+opts.fields.correction_users_ref.getValue().getDescr();}}
else{opts.attrs.title="Двойной клик для корректировки";}
if(q_editable){opts.events=opts.event||{};opts.events.dblclick=(function(thisForm){return function(e){if(thisForm.m_editMode)return;var grid=thisForm.getElement("grid");var row=DOMHelper.getParentByTagName(e.target,"TR");if(row){grid.setModelToCurrentRow(row);thisForm.onEditCons(grid.getModel().getFields());}
if(e.preventDefault){e.preventDefault();}
e.stopPropagation();return false;}})(self);}}
else if(opts.gridColumn.getId()=="quant_req_dif"){if(opts.fields.req_dif_violation.getValue()){opts.className="factQuantViolation";opts.title="Отклонение вышло за допустимые пределы";}}
else if(opts.gridColumn.getId()=="production_comment"){opts.className="quant_editable";opts.attrs=opts.attrs||{};var el=opts.fields.production_comment?opts.fields.production_comment.getValue():null;if(el){opts.attrs.title="Добавлено:"+DateHelper.format(DateHelper.strtotime(el.date_time),"d/m/y H:i");}
opts.events=opts.event||{};opts.events.dblclick=(function(thisForm){return function(e){if(thisForm.m_editMode)return;var grid=thisForm.getElement("grid");var row=DOMHelper.getParentByTagName(e.target,"TR");if(row){grid.setModelToCurrentRow(row);thisForm.onEditComment(grid.getModel().getFields());}
if(e.preventDefault){e.preventDefault();}
e.stopPropagation();return false;}})(self);}},"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[options.detailFilters?null:new GridCellHead(id+":grid:head:prodution_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("prodution_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlBindFieldId":"prodution_site_id","ctrlOptions":{"labelCaption":""}})],"sortable":true,"sort":"desc"}),options.detailFilters?null:new GridCellHead(id+":grid:head:prodution_id",{"value":"№ произв-ва","columns":[new GridColumn({"field":model.getField("prodution_id"),"ctrlClass":ProductionSiteEdit,"ctrlBindFieldId":"prodution_id","ctrlOptions":{"labelCaption":""}})],"sortable":true,"sort":"desc"}),options.detailFilters?null:new GridCellHead(id+":grid:head:shipments_ref",{"value":"Отгрузка","columns":[new GridColumnRef({"field":model.getField("shipments_ref"),"ctrlClass":ShipmentEdit,"ctrlBindFieldId":"shipment_id","ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:materials_ref",{"value":"Материал","className":options.detailFilters?window.getBsCol(2):"","columns":[new GridColumn({"field":model.getField("materials_ref"),"ctrlClass":MaterialSelect,"ctrlBindFieldId":"material_id","ctrlOptions":{"labelCaption":""},"formatFunction":function(fields){var mat=fields.materials_ref.getValue();var res=!mat.isNull()?mat.getDescr():"";var sil=fields.cement_silos_ref.getValue();if(!sil.isNull()){res+=" (силос:"+sil.getDescr()+")";}
return res;}})]}),new GridCellHead(id+":grid:head:quant_consuption",{"value":"Кол-во подбор (Бетон)","className":options.detailFilters?window.getBsCol(1):"","colAttrs":{"align":"right","width":"10px"},"columns":[new GridColumnFloat({"field":model.getField("quant_consuption"),"precision":"4","ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":grid:head:quant_fact_req",{"value":"Кол-во подбор (Elkon)","className":options.detailFilters?window.getBsCol(1):"","colAttrs":{"align":"right","width":"10px"},"columns":[new GridColumnFloat({"field":model.getField("quant_fact_req"),"precision":"4"})]}),new GridCellHead(id+":grid:head:quant_fact",{"value":"Кол-во факт","className":options.detailFilters?window.getBsCol(1):"","colAttrs":{"align":"right","width":"10px"},"title":"Двойной клик для ручного исправления","columns":[new GridColumnFloat({"field":model.getField("quant_fact"),"precision":"4"})]}),new GridCellHead(id+":grid:head:quant_dif",{"value":"Отклонение (факт-Бетон)","className":options.detailFilters?window.getBsCol(1):"","colAttrs":{"align":"right","width":"10px"},"columns":[new GridColumnFloat({"field":model.getField("quant_dif"),"precision":"4","sign":true,"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":grid:head:quant_req_dif",{"value":"Отклонение (факт-Elkon)","className":options.detailFilters?window.getBsCol(1):"","colAttrs":{"align":"right","width":"10px"},"columns":[new GridColumnFloat({"field":model.getField("quant_req_dif"),"precision":"4","sign":true})]}),show_comment?new GridCellHead(id+":grid:head:production_comment",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("production_comment"),"ctrlOptions":{"enabled":false},"formatFunction":function(fields){var el=fields.production_comment?fields.production_comment.getValue():null;var res=el?el.comment_text:"";return res;}})]}):null]})]}),"filters":options.detailFilters?options.detailFilters.ProductionMaterialList_Model:null,"pagination":pagination,"autoRefresh":options.detailFilters?true:false,"refreshInterval":refresh_int,"rowSelect":false,"focus":true}));}
extend(ProductionMaterialList_View,ViewAjxList);ProductionMaterialList_View.prototype.setCommentOnServer=function(newValues,fieldValues){var self=this;var pm=(new ProductionComment_Controller()).getPublicMethod("insert");pm.setFieldValue("production_site_id",fieldValues.production_site_id);pm.setFieldValue("material_id",fieldValues.material_id);pm.setFieldValue("production_id",fieldValues.production_id);pm.setFieldValue("comment_text",newValues.comment_text);pm.run({"ok":function(){window.showTempNote(fieldValues.material_descr+": установлен комментарий",null,5000);self.closeForm();self.getElement("grid").onRefresh();}})}
ProductionMaterialList_View.prototype.setCorrectionOnServer=function(newValues,fieldValues){var self=this;var pm=(new MaterialFactConsumptionCorretion_Controller()).getPublicMethod("operator_insert_correction");pm.setFieldValue("production_site_id",fieldValues.production_site_id);pm.setFieldValue("material_id",fieldValues.material_id);pm.setFieldValue("cement_silo_id",fieldValues.cement_silo_id);pm.setFieldValue("production_id",fieldValues.production_id);pm.setFieldValue("cor_quant",newValues.quant);pm.setFieldValue("comment_text",newValues.comment_text);pm.run({"ok":function(){window.showTempNote(fieldValues.material_descr+": откорректирован фактический расход по материалу",null,5000);self.closeForm();self.getElement("grid").onRefresh();}})}
ProductionMaterialList_View.prototype.onEditCons=function(fields){this.m_editMode=true;var self=this;this.m_view=new EditJSON("CorrectQuant:cont",{"elements":[new EditFloat("CorrectQuant:cont:quant",{"labelCaption":"Количество добавить:","length":19,"precision":4,"focus":true,"value":0,"focus":true}),new EditText("CorrectQuant:cont:comment_text",{"labelCaption":"Комментарий:","rows":3})]});this.m_form=new WindowFormModalBS("CorrectQuant",{"content":this.m_view,"cmdCancel":true,"cmdOk":true,"contentHead":"Корректировка фактического расхода "+fields.materials_ref.getValue().getDescr(),"onClickCancel":function(){self.closeForm();},"onClickOk":function(){var res=self.m_view.getValueJSON();if(!res||!res.quant){self.closeForm();}
else{self.setCorrectionOnServer(res,self.m_view.fieldValues);}}});this.m_view.fieldValues={"material_descr":fields.materials_ref.getValue().getDescr(),"production_site_id":fields.production_site_id.getValue(),"production_id":fields.production_id.getValue(),"material_id":fields.material_id.getValue(),"cement_silo_id":fields.cement_silo_id.getValue(),"material_quant":fields.material_quant.getValue()}
this.m_form.open();}
ProductionMaterialList_View.prototype.onEditComment=function(fields){this.m_editMode=true;var el=fields.production_comment?fields.production_comment.getValue():null;var comment_text=el?el.comment_text:"";var self=this;this.m_view=new EditJSON("Comment:cont",{"elements":[new EditText("Comment:cont:comment_text",{"labelCaption":"Комментарий:","rows":3,"value":comment_text,"focus":true})]});this.m_form=new WindowFormModalBS("Comment",{"content":this.m_view,"cmdCancel":true,"cmdOk":true,"contentHead":"Комментарий по материалу: "+fields.materials_ref.getValue().getDescr(),"onClickCancel":function(){self.closeForm();},"onClickOk":function(){var res=self.m_view.getValueJSON();self.setCommentOnServer(res,self.m_view.fieldValues);}});this.m_view.fieldValues={"material_descr":fields.materials_ref.getValue().getDescr(),"production_site_id":fields.production_site_id.getValue(),"production_id":fields.production_id.getValue(),"material_id":fields.material_id.getValue()}
this.m_form.open();}
ProductionMaterialList_View.prototype.closeForm=function(){this.m_view.delDOM()
this.m_form.delDOM();delete this.m_view;delete this.m_form;this.m_editMode=false;} 
function ELKONLogList_View(id,options){ELKONLogList_View.superclass.constructor.call(this,id,options);var model=options.models.ELKONLogList_Model;var contr=new ELKONLog_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_site":{"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"contClassName":"form-group-filter","labelCaption":"Завод"}),"field":new FieldInt("production_site_id")}),"sign":"e"}}
var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"cmdFilter":true,"filters":filters}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","colAttrs":{"align":"center"},"columns":[new GridColumnDateTime({"field":model.getField("date_time")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref")})]}),new GridCellHead(id+":grid:head:message",{"value":"Сообщение","columns":[new GridColumn({"field":model.getField("message")})]}),new GridCellHead(id+":grid:head:level",{"value":"Уровень","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("level")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ELKONLogList_View,ViewAjx); 
function CementSiloBalanceResetList_View(id,options){CementSiloBalanceResetList_View.superclass.constructor.call(this,id,options);var model=options.models.CementSiloBalanceResetList_Model;var contr=new CementSiloBalanceReset_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};var role_id=window.getApp().getServVar("role_id");var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"onEventSetCellOptions":function(opts){if(opts.gridColumn.getId()=="quant"&&this.getModel().getFieldValue("quant")<0){opts.attrs=opts.attrs||{};opts.attrs["class"]=opts.attrs["class"]||"";opts.attrs["class"]+=(opts.attrs["class"]=="")?"":" ";opts.attrs["class"]+="negativeNumber";}},"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time"),"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg","ctrlClass":EditDate}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:cement_silos_ref",{"value":"Силос","columns":[new GridColumnRef({"field":model.getField("cement_silos_ref"),"ctrlClass":CementSiloEdit,"ctrlBindFieldId":"cement_silo_id","ctrlOptions":{"labelCaption":""},"searchOptions":{"field":new FieldInt("cement_silo_id"),"searchType":"on_match"}})],"sortable":true}),new GridCellHead(id+":grid:head:quant_required",{"value":"Кол-во фактич.","columns":[new GridColumnFloat({"field":model.getField("quant_required"),"precision":"4","ctrlOptions":{"length":"19","precision":"4"}})]}),new GridCellHead(id+":grid:head:quant",{"value":"Разница (-не хватило,+ излишек)","columns":[new GridColumnFloat({"field":model.getField("quant"),"precision":"4","ctrlOptions":{"enabled":false,"precision":"4"}})]}),new GridCellHead(id+":grid:head:users_ref",{"value":"Пользователь","columns":[new GridColumnRef({"field":model.getField("users_ref"),"form":User_Form,"ctrlClass":UserEditRef,"ctrlBindFieldId":"user_id","ctrlOptions":{"labelCaption":"","enabled":(role_id=="admin"||role_id=="owner"),},"searchOptions":{"field":new FieldInt("user_id"),"searchType":"on_match"}})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(CementSiloBalanceResetList_View,ViewAjxList); 
function RepMaterialFactConsumption_View(id,options){options=options||{};var contr=new MaterialFactConsumption_Controller();options.publicMethod=contr.getPublicMethod("get_report");options.reportViewId="ViewHTMLXSLT";options.templateId="RepMaterialFactConsumption";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDate("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_site":{"binding":new CommandBinding({"control":new EmployeeEditRef(id+":filter-ctrl-production_site",{"labelCaption":"Завод:","contClassName":"form-group-filter"}),"field":new FieldInt("production_site_id")}),"sign":"e"}};RepMaterialFactConsumption_View.superclass.constructor.call(this,id,options);}
extend(RepMaterialFactConsumption_View,ViewReport); 
function RepMaterialAction_View(id,options){options=options||{};var contr=new RawMaterial_Controller();options.publicMethod=contr.getPublicMethod("get_material_actions_list");options.reportViewId="ViewHTMLXSLT";options.templateId="RepMaterialAction";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=false;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"valueFrom":(options.templateParams)?options.templateParams.date_from:DateHelper.getStartOfShift(DateHelper.time()),"valueTo":(options.templateParams)?options.templateParams.date_to:DateHelper.getEndOfShift(DateHelper.time()),"field":new FieldDateTime("date_time"),"cmdUpFast":false,"cmdDownFast":false,"periodSelectOptions":{"periodShift":true,"value":"shift"}});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_base":{"binding":new CommandBinding({"control":new ProductionBaseEdit(id+":filter-ctrl-production_base",{"labelCaption":"База:","contClassName":"form-group-filter"}),"field":new FieldInt("production_base_id")}),"sign":"e"}};this.m_filter=new ModelFilter({"filters":options.filters});options.openFilterOnInit=false;options.addElement=function(){this.addElement(new GridCmdFilterView(id+":filter_view",{"filter":this.m_filter,"cmdSet":false,"cmdUnset":false}));}
RepMaterialAction_View.superclass.constructor.call(this,id,options);}
extend(RepMaterialAction_View,ViewReport);RepMaterialAction_View.prototype.fillParams=function(){var pm=this.getPublicMethod();try{this.m_filter.applyFiltersToPublicMethod(pm);}
catch(e){throw Error(e.message);}} 
function RepMaterialActionByShift_View(id,options){options=options||{};var contr=new RawMaterial_Controller();options.publicMethod=contr.getPublicMethod("get_material_actions_by_shift_list");options.reportViewId="ViewHTMLXSLT";options.templateId="RepMaterialActionByShift";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"valueFrom":(options.templateParams)?options.templateParams.date_from:DateHelper.getStartOfShift(DateHelper.time()),"valueTo":(options.templateParams)?options.templateParams.date_to:DateHelper.getEndOfShift(DateHelper.time()),"field":new FieldDateTime("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"material":{"binding":new CommandBinding({"control":new MaterialSelect(id+":filter-ctrl-material",{"labelCaption":"Материал:","contClassName":"form-group-filter"}),"field":new FieldInt("material_id")}),"sign":"e"}};RepMaterialActionByShift_View.superclass.constructor.call(this,id,options);}
extend(RepMaterialActionByShift_View,ViewReport); 
function RepMaterialConsToleranceViolation_View(id,options){options=options||{};options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE="Отчет по отклонению от нормативного расхода материалов";var contr=new RawMaterial_Controller();options.publicMethod=contr.getPublicMethod("get_material_cons_tolerance_violation_list");options.retContentType="xml";options.reportControl=new Control(id+":report","DIV",{"visible":false,"template":window.getApp().getTemplate("RepMaterialConsToleranceViolationGrid")});options.reportViewId="ViewXML";options.templateId=null;options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"valueFrom":(options.templateParams)?options.templateParams.date_from:DateHelper.getStartOfShift(DateHelper.time()),"valueTo":(options.templateParams)?options.templateParams.date_to:DateHelper.getEndOfShift(DateHelper.time()),"field":new FieldDateTime("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};RepMaterialConsToleranceViolation_View.superclass.constructor.call(this,id,options);}
extend(RepMaterialConsToleranceViolation_View,ViewReport);RepMaterialConsToleranceViolation_View.prototype.formatQuantForTmpl=function(v){return CommonHelper.numberFormat(v,4,","," ");}
RepMaterialConsToleranceViolation_View.prototype.formatPercentForTmpl=function(v){return CommonHelper.numberFormat(v,4,","," ");}
RepMaterialConsToleranceViolation_View.prototype.onGetReportData=function(resp){var m=resp.getModel("MaterialConsToleranceViolationList_Model");var ctrl=this.getReportControl();ctrl.m_templateOptions={"materials":[],"dates":[]}
var materials=[];var prev_date_time,date_time,material_id;while(m.getNextRow()){material_id=m.getFieldValue("material_id");if(CommonHelper.inArray(material_id,materials)==-1){ctrl.m_templateOptions.materials.push({"material_descr":m.getFieldValue("materials_ref").getDescr(),"material_id":m.getFieldValue("materials_ref").getKey(),"material_ord":m.getFieldValue("material_ord")});materials.push(material_id);}}
ctrl.m_templateOptions.materials.sort(function(a,b){return a.material_ord-b.material_ord;});m.reset();var d_ind=-1,m_ind=0,material_id;while(m.getNextRow()){date_time=m.getFieldValue("date_time");if(!prev_date_time||date_time.getTime()!=prev_date_time.getTime()){ctrl.m_templateOptions.dates.push({"date_descr":DateHelper.format(date_time,"d/m/y"),"materials":[]});d_ind++;for(var m_id=0;m_id<ctrl.m_templateOptions.materials.length;m_id++){ctrl.m_templateOptions.dates[d_ind].materials.push({"material_id":ctrl.m_templateOptions.materials[m_id].material_id,"norm_quant":0,"fact_quant":0,"diff_quant":0,"diff_percent":0});}
m_ind=0;prev_date_time=date_time;}
material_id=m.getFieldValue("material_id");while(ctrl.m_templateOptions.dates[d_ind].materials[m_ind].material_id!=material_id){m_ind++;}
ctrl.m_templateOptions.dates[d_ind].materials[m_ind].norm_quant=this.formatQuantForTmpl(m.getFieldValue("norm_quant"));ctrl.m_templateOptions.dates[d_ind].materials[m_ind].fact_quant=this.formatQuantForTmpl(m.getFieldValue("fact_quant"));ctrl.m_templateOptions.dates[d_ind].materials[m_ind].diff_quant=this.formatQuantForTmpl(m.getFieldValue("diff_quant"));ctrl.m_templateOptions.dates[d_ind].materials[m_ind].diff_percent=this.formatPercentForTmpl(m.getFieldValue("diff_percent"));m_ind++;}
ctrl.updateHTML();ctrl.setVisible(true);} 
function RawMaterialPriceList_View(id,options){options=options||{};options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE="Цена на материалы (факт)";var model=(options.models&&options.models.RawMaterialPriceList_Model)?options.models.RawMaterialPriceList_Model:new RawMaterialPriceList_Model();var contr=new RawMaterialPrice_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var self=this;options.addElement=function(){var pagClass=window.getApp().getPaginationClass();var grid=new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"variantStorage":!options.detail?options.variantStorage:null,"cmdSearch":!options.detail}),"popUpMenu":new PopUpMenu(),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[options.detail?null:new GridCellHead(id+":grid:head:raw_materials_ref",{"value":"Материал","columns":[new GridColumnRef({"field":model.getField("raw_materials_ref"),"ctrlClass":MaterialSelect,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"raw_material_id"})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:price",{"value":"Цена","columns":[new GridColumnFloat({"field":model.getField("price"),"precision":"2"})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":!options.detail?(constants.grid_refresh_interval.getValue()*1000):0,"rowSelect":false,"focus":true});this.addElement(grid);}
RawMaterialPriceList_View.superclass.constructor.call(this,id,options);}
extend(RawMaterialPriceList_View,ViewAjxList); 
function RawMaterialPriceForNormList_View(id,options){options=options||{};options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE="Цена на материалы (подборы)";var model=(options.models&&options.models.RawMaterialPriceForNormList_Model)?options.models.RawMaterialPriceForNormList_Model:new RawMaterialPriceForNormList_Model();var contr=new RawMaterialPriceForNorm_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var self=this;options.addElement=function(){var pagClass=window.getApp().getPaginationClass();var grid=new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"variantStorage":!options.detail?options.variantStorage:null,"cmdSearch":!options.detail}),"popUpMenu":new PopUpMenu(),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[options.detail?null:new GridCellHead(id+":grid:head:raw_materials_ref",{"value":"Материал","columns":[new GridColumnRef({"field":model.getField("raw_materials_ref"),"ctrlClass":MaterialSelect,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"raw_material_id"})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:price",{"value":"Цена","columns":[new GridColumnFloat({"field":model.getField("price"),"precision":"2"})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":!options.detail?(constants.grid_refresh_interval.getValue()*1000):0,"rowSelect":false,"focus":true});this.addElement(grid);}
RawMaterialPriceForNormList_View.superclass.constructor.call(this,id,options);}
extend(RawMaterialPriceForNormList_View,ViewAjxList); 
function RepMaterialAvgConsumptionOnCtp_View(id,options){options=options||{};var contr=new RawMaterial_Controller();options.publicMethod=contr.getPublicMethod("get_material_avg_cons_on_ctp");options.reportViewId="ViewHTMLXSLT";options.templateId="RepMaterialAvgConsumptionOnCtp";options.cmdMake=true;options.cmdPrint=false;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;this.m_periodCtrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"valueFrom":(options.templateParams)?options.templateParams.date_from:DateHelper.getStartOfShift(DateHelper.time()),"valueTo":(options.templateParams)?options.templateParams.date_to:DateHelper.getEndOfShift(DateHelper.time()),"field":new FieldDateTime("date_time")});options.addElement=function(){this.addElement(new Control(id+":period","SPAN"));};options.filters={"period":{"binding":new CommandBinding({"control":this.m_periodCtrl,"field":this.m_periodCtrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":this.m_periodCtrl.getControlFrom(),"field":this.m_periodCtrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":this.m_periodCtrl.getControlTo(),"field":this.m_periodCtrl.getField()}),"sign":"le"}]}};RepMaterialAvgConsumptionOnCtp_View.superclass.constructor.call(this,id,options);}
extend(RepMaterialAvgConsumptionOnCtp_View,ViewReport);RepMaterialAvgConsumptionOnCtp_View.prototype.fillParams=function(){RepMaterialAvgConsumptionOnCtp_View.superclass.fillParams.call(this);this.getElement("period").setText(DateHelper.format(this.m_periodCtrl.getControlFrom().getValue(),"d/m/y H:i")+" - "+DateHelper.format(this.m_periodCtrl.getControlTo().getValue(),"d/m/y H:i"));}
RepMaterialAvgConsumptionOnCtp_View.prototype.onGetReportData=function(respText){RepMaterialAvgConsumptionOnCtp_View.superclass.onGetReportData.call(this,respText);var self=this;(new ButtonCmd(this.getId()+":printConcrTypeCost",{"title":"Печать таблицы стоимости м3","glyph":"glyphicon-print","onClick":function(){WindowPrint.show({content:document.getElementById(self.getId()+":gridConcrTypeCost").outerHTML});}})).toDOM(this.getNode());(new ButtonCmd(this.getId()+":exportConcrTypeCost",{"title":"Экспорт таблицы стоимости м3 в Excel","glyph":"glyphicon-save-file","onClick":function(){DOMHelper.tableToExcel(self.getId()+":gridConcrTypeCost","Стоимость м3",'Стоимость_м3.xls');}})).toDOM(this.getNode());(new ButtonCmd(this.getId()+":printMatCost",{"title":"Печать таблицы стоимости материалов","glyph":"glyphicon-print","onClick":function(){WindowPrint.show({content:document.getElementById(self.getId()+":gridMatCost").outerHTML});}})).toDOM(this.getNode());(new ButtonCmd(this.getId()+":exportMatCost",{"title":"Экспорт таблицы стоимости материалов в Excel","glyph":"glyphicon-save-file","onClick":function(){DOMHelper.tableToExcel(self.getId()+":gridMatCost","Стоимость материалов",'Стоимость_материалов.xls');}})).toDOM(this.getNode());(new ButtonCmd(this.getId()+":printMatQuant",{"title":"Печать таблицы объема материалов","glyph":"glyphicon-print","onClick":function(){WindowPrint.show({content:document.getElementById(self.getId()+":gridMatQuant").outerHTML});}})).toDOM(this.getNode());(new ButtonCmd(this.getId()+":exportMatQuant",{"title":"Экспорт таблицы объема материалов в Excel","glyph":"glyphicon-save-file","onClick":function(){DOMHelper.tableToExcel(self.getId()+":gridMatQuant","Объем материала",'Объем_материала.xls');}})).toDOM(this.getNode());(new ButtonCmd(this.getId()+":printTot",{"title":"Печать итоговой таблицы","glyph":"glyphicon-print","onClick":function(){WindowPrint.show({content:document.getElementById(self.getId()+":gridTot").outerHTML});}})).toDOM(this.getNode());(new ButtonCmd(this.getId()+":exportTot",{"title":"Экспорт итоговой таблицы в Excel","glyph":"glyphicon-save-file","onClick":function(){DOMHelper.tableToExcel(self.getId()+":gridTot","Итоговая таблица",'Итоговая_таблица.xls');}})).toDOM(this.getNode());(new ButtonCmd(this.getId()+":printBalanceCorrect",{"title":"Печать таблицы корректировки остатков материалов","glyph":"glyphicon-print","onClick":function(){WindowPrint.show({content:document.getElementById(self.getId()+":gridBalanceCorrect").outerHTML});}})).toDOM(this.getNode());(new ButtonCmd(this.getId()+":exportBalanceCorrect",{"title":"Экспорт таблицы корректировки остатков материалов в Excel","glyph":"glyphicon-save-file","onClick":function(){DOMHelper.tableToExcel(self.getId()+":gridBalanceCorrect","Корректировка остатков материалов",'Корректировка_остатков_материалов.xls');}})).toDOM(this.getNode());(new ButtonCmd(this.getId()+":printMaterialPrice",{"title":"Печать таблицы цен на материалы","glyph":"glyphicon-print","onClick":function(){WindowPrint.show({content:document.getElementById(self.getId()+":gridMaterialPrice").outerHTML});}})).toDOM(this.getNode());(new ButtonCmd(this.getId()+":exportMaterialPrice",{"title":"Экспорт таблицы цен на материалы в Excel","glyph":"glyphicon-save-file","onClick":function(){DOMHelper.tableToExcel(self.getId()+":gridMaterialPrice","Цены на материалы",'Цена_на_материалы.xls');}})).toDOM(this.getNode());} 
function RepShipProdQuantDif_View(id,options){options=options||{};var contr=new Production_Controller();options.publicMethod=contr.getPublicMethod("get_ship_prod_quant_dif");options.reportViewId="ViewHTMLXSLT";options.templateId="RepShipProdQuantDif";options.cmdMake=true;options.cmdPrint=false;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;this.m_periodCtrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"valueFrom":(options.templateParams)?options.templateParams.date_from:DateHelper.getStartOfShift(DateHelper.time()),"valueTo":(options.templateParams)?options.templateParams.date_to:DateHelper.getEndOfShift(DateHelper.time()),"field":new FieldDateTime("date_time")});options.addElement=function(){this.addElement(new Control(id+":period","SPAN"));};options.filters={"period":{"binding":new CommandBinding({"control":this.m_periodCtrl,"field":this.m_periodCtrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":this.m_periodCtrl.getControlFrom(),"field":this.m_periodCtrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":this.m_periodCtrl.getControlTo(),"field":this.m_periodCtrl.getField()}),"sign":"le"}]}};RepShipProdQuantDif_View.superclass.constructor.call(this,id,options);}
extend(RepShipProdQuantDif_View,ViewReport);RepShipProdQuantDif_View.prototype.fillParams=function(){RepShipProdQuantDif_View.superclass.fillParams.call(this);this.getElement("period").setText(DateHelper.format(this.m_periodCtrl.getControlFrom().getValue(),"d/m/y H:i")+" - "+DateHelper.format(this.m_periodCtrl.getControlTo().getValue(),"d/m/y H:i"));} 
function ClientSpecificationList_View(id,options){options=options||{};options.HEAD_TITLE="Договоры";ClientSpecificationList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ClientSpecificationList_Model)?options.models.ClientSpecificationList_Model:new ClientSpecificationList_Model();var contr=new ClientSpecification_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var self=this;this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"filters":(options.detailFilters&&options.detailFilters.ClientSpecificationList_Model)?options.detailFilters.ClientSpecificationList_Model:null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"editViewClass":ClientSpecificationListEdit_View,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[options.detailFilters||options.detail?null:new GridCellHead(id+":grid:head:clients_ref",{"value":"Контрагент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlClass":DestinationEdit,"ctrlBindFieldId":"client_id","searchOptions":{"field":new FieldInt("client_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:client_contracts_1c_ref",{"value":"Contract","columns":[new GridColumnRef({"field":model.getField("client_contracts_1c_ref"),"ctrlBindFieldId":"client_contract_1c_ref","ctrlClass":ClientContract1cEdit,"ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:specification_date",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("specification_date")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:contract",{"value":"Договор","columns":[new GridColumn({"field":model.getField("contract")})],"sortable":true}),new GridCellHead(id+":grid:head:specification",{"value":"Спецификация","columns":[new GridColumn({"field":model.getField("specification")})],"sortable":true}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlClass":ConcreteTypeEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"concrete_type_id","searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"ctrlClass":DestinationEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"destination_id","searchOptions":{"field":new FieldInt("destination_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Кол-во","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant"),"precision":"4","ctrlClass":EditFloat,"ctrlOptions":{"precision":"4","events":{"input":(function(viewCont){return function(n){viewCont.calcTotal();}})(self)}},"searchOptions":{"field":new FieldInt("quant"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:quant_balance",{"value":"Кол-во, остаток","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant_balance"),"precision":"4","ctrlClass":EditFloat,"ctrlEdit":false,"searchOptions":{"field":new EditFloat("quant_balance"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:price",{"value":"Цена","columns":[new GridColumnFloat({"precision":"2","field":model.getField("price"),"ctrlClass":EditMoney,"ctrlOptions":{"events":{"input":(function(viewCont){return function(n){viewCont.calcTotal();}})(self)}},"searchOptions":{"field":new FieldFloat("price"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:total",{"value":"Сумма","columns":[new GridColumnFloat({"precision":"2","field":model.getField("total"),"ctrlClass":EditMoney,"searchOptions":{"field":new FieldFloat("total"),"searchType":"on_match","typeChange":false}})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ClientSpecificationList_View,ViewAjxList);ClientSpecificationList_View.prototype.calcTotal=function(){var v=this.getElement("grid").getEditViewObj();if(!v){return;}
v.getElement("total").setValue(v.getElement("price").getValue()*v.getElement("quant").getValue());}
function ClientSpecificationListEdit_View(id,options){ClientSpecificationListEdit_View.superclass.constructor.call(this,id,options);}
extend(ClientSpecificationListEdit_View,ViewGridEditInlineAjx);ClientSpecificationListEdit_View.prototype.onGetData=function(resp,cmd){ClientSpecificationListEdit_View.superclass.onGetData.call(this,resp,cmd);if(resp){const model=resp.getModel("ClientSpecificationList_Model");model.getRow(0);const clientRef1c=model.getFieldValue("client_ref_1c");this.getElement("client_contracts_1c_ref").setClientRef1c(clientRef1c);}} 
function GPSTrackerList_View(id,options){GPSTrackerList_View.superclass.constructor.call(this,id,options);var model=options.models.GPSTracker_Model;var contr=new GPSTracker_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:id",{"value":"Идентификатор","columns":[new GridColumn({"field":model.getField("id")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:sim_id",{"value":"sim_id","columns":[new GridColumn({"field":model.getField("sim_id")})],"sortable":true}),new GridCellHead(id+":grid:head:sim_number",{"value":"sim_number","columns":[new GridColumnPhone({"field":model.getField("sim_number")})],"sortable":true}),new GridCellHead(id+":grid:head:puk",{"value":"puk","columns":[new GridColumn({"field":model.getField("puk"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":8}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(GPSTrackerList_View,ViewAjx); 
function StoreMapToProductionSiteList_View(id,options){StoreMapToProductionSiteList_View.superclass.constructor.call(this,id,options);var model=options.models.StoreMapToProductionSiteList_Model;var contr=new StoreMapToProductionSite_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjxScroll(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:store",{"value":"Места хранения в весовой программе","columns":[new GridColumn({"field":model.getField("store")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlBindFieldId":"production_site_id","ctrlOptions":{"labelCaption":""},"searchOptions":{"field":new FieldInt("production_site_id"),"searchType":"on_match"}})]}),new GridCellHead(id+":grid:head:load_capacity",{"value":"Вместимость материала, т.","columns":[new GridColumn({"field":model.getField("load_capacity")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"rowSelect":false,"focus":true}));}
extend(StoreMapToProductionSiteList_View,ViewAjxList); 
function GornyiCarrierMatchList_View(id,options){GornyiCarrierMatchList_View.superclass.constructor.call(this,id,options);var model=options.models.GornyiCarrierMatchList_Model;var contr=new GornyiCarrierMatch_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:plate",{"value":"Гос.номер","columns":[new GridColumn({"field":model.getField("plate")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:carriers_ref",{"value":"Перевозчик","columns":[new GridColumnRef({"field":model.getField("carriers_ref"),"ctrlClass":SupplierEdit,"ctrlOptions":{"labelCaption":""},"searchOptions":{"field":new FieldInt("carrier_id"),"searchType":"on_match"},"ctrlBindFieldId":"carrier_id"})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(GornyiCarrierMatchList_View,ViewAjx); 
function RoleViewRestrictionList_View(id,options){options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE="Запрет на просмотр заяок/отгрузок по ролям";RoleViewRestrictionList_View.superclass.constructor.call(this,id,options);var model=options.models.RoleViewRestriction_Model;var contr=new RoleViewRestriction_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["role_id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:role_id",{"value":"Роль","columns":[new EnumGridColumn_role_types({"field":model.getField("role_id")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:back_days_allowed",{"value":"Дней назад","columns":[new GridColumn({"field":model.getField("back_days_allowed")})]}),new GridCellHead(id+":grid:head:front_days_allowed",{"value":"Дней вперед","columns":[new GridColumn({"field":model.getField("front_days_allowed")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(RoleViewRestrictionList_View,ViewAjxList); 
function ExcelTemplateList_View(id,options){options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE="Шаблоны Excel";ExcelTemplateList_View.superclass.constructor.call(this,id,options);var model=options.models.ExcelTemplateList_Model;var contr=new ExcelTemplate_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"editInline":false,"editWinClass":ExcelTemplateDialog_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:file_info",{"value":"Файл","columns":[new GridColumn({"file_info":model.getField("file_info"),"formatFunction":function(fields){var res="";if(fields&&fields.file_info&&fields.file_info["name"]){res=fields.file_info["name"];if(fields.file_info["size"]){var sz=CommonHelper.byteForamt(fields.file_info["size"],2);res+=" ("+sz+")";}}
return res;}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ExcelTemplateList_View,ViewAjxList); 
function ExcelTemplateDialog_View(id,options){options=options||{};options.controller=new ExcelTemplate_Controller();options.model=options.models.ExcelTemplateDialog_Model;options.addElement=function(){this.addElement(new EditString(id+":name",{"labelCaption":"Наименование:","required":true,"maxLength":500}));this.addElement(new EditText(id+":sql_query",{"labelCaption":"Запрос к базе данных:"}));var self=this;this.addElement(new EditFile(id+":excel_file",{"labelCaption":"Файл шаблона:","showHref":true,"showPic":false,"fileInfTemplate":window.getApp().getTemplate("EmployeePhoto"),"onDeleteFile":function(fileId){self.deleteExcelFile(fileId);},"onFileAdded":function(fileId){self.excelFileAdded(fileId);},"onDownload":function(fileId){self.downloadFile(fileId);},"allowedFileExtList":["xlsx","xls"]}));this.addElement(new ExcelTemplateFieldMatchGrid(id+":cell_matching",{}));this.addElement(new ExcelTemplateImageSQLGrid(id+":image_sql",{}));}
ExcelTemplateDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("sql_query")}),new DataBinding({"control":this.getElement("cell_matching")}),new DataBinding({"control":this.getElement("image_sql")}),new DataBinding({"control":this.getElement("excel_file"),"field":this.m_model.getField("file_info")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("sql_query")}),new CommandBinding({"control":this.getElement("excel_file"),"fieldId":"excel_file"}),new CommandBinding({"control":this.getElement("cell_matching"),"fieldId":"cell_matching"}),new CommandBinding({"control":this.getElement("image_sql"),"fieldId":"image_sql"})]);}
extend(ExcelTemplateDialog_View,ViewObjectAjx);ExcelTemplateDialog_View.prototype.deleteExcelFile=function(fileId){var id=this.getElement("id").getValue();if(!id){throw new Error("Не записан.");}
var pm=this.getController().getPublicMethod("delete_excel_file");pm.setFieldValue("excel_template_id",id);pm.run({"ok":function(){DOMHelper.delNode(document.getElementById(fileId));window.showTempNote("Данные удалены.",null,5000);}});}
ExcelTemplateDialog_View.prototype.excelFileAdded=function(fileId){DOMHelper.previewImage(this.getElement("excel_file").getElement("file").getNode(),document.getElementById(fileId+"_pic"));}
ExcelTemplateDialog_View.prototype.downloadFile=function(fileId){var pm=this.getController().getPublicMethod("download_excel_file");pm.setFieldValue("excel_template_id",this.getElement("id").getValue());pm.download();} 
function Bank_View(id,options){options=options||{};options.enabled=false;options.cmdOk=false;options.cmdSave=false;Bank_View.superclass.constructor.call(this,id,options);this.addElement(new EditString(id+":bik",{"editMask":"999999999","maxLenght":"9","fixLength":true,"enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_BIK}));this.addElement(new EditString(id+":name",{"maxLenght":"500","enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_NAME}));this.addElement(new EditString(id+":gor",{"maxLenght":"500","enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_CITY}));this.addElement(new EditString(id+":gr_descr",{"maxLenght":"50","enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_GROUP}));this.addElement(new EditString(id+":korshet",{"editMask":"99999999999999999999","maxLenght":"20","fixLength":true,"enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_BANK_ACC}));this.addElement(new EditString(id+":adres",{"maxLenght":"500","enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_ADDRESS}));this.setReadPublicMethod((new Bank_Controller()).getPublicMethod("get_object"));this.m_model=options.models.BankList_Model;this.setDataBindings([new DataBinding({"control":this.getElement("bik"),"model":this.m_model}),new DataBinding({"control":this.getElement("name"),"model":this.m_model}),new DataBinding({"control":this.getElement("korshet"),"model":this.m_model}),new DataBinding({"control":this.getElement("gor"),"model":this.m_model}),new DataBinding({"control":this.getElement("gr_descr"),"model":this.m_model})]);}
extend(Bank_View,ViewObjectAjx); 
function BankList_View(id,options){options=options||{};BankList_View.superclass.constructor.call(this,id,options);var model=options.models.BankList_Model;var contr=new Bank_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["bik"],"controller":contr,"editInline":false,"editWinClass":Bank_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdCopy":false,"cmdDelete":false}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:bik",{"columns":[new GridColumn({"field":model.getField("bik")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:gr_descr",{"columns":[new GridColumn({"field":model.getField("gr_descr")})],"sortable":true}),new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn({"field":model.getField("name")})],"sortable":true}),new GridCellHead(id+":grid:head:korshet",{"columns":[new GridColumn({"field":model.getField("korshet")})],"sortable":true}),new GridCellHead(id+":grid:head:gor",{"columns":[new GridColumn({"field":model.getField("gor")})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(BankList_View,ViewAjx); 
function PeriodValueList_View(id,options){PeriodValueList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.PeriodValue_Model)?options.models.PeriodValue_Model:new PeriodValue_Model();var contr=new PeriodValue_Controller();var filtered=false;if(options.periodOptions){filtered=true;var key=(typeof(options.periodOptions.key)=="function")?options.periodOptions.key():options.periodOptions.key;contr.getPublicMethod("update").setFieldValue("key",key);contr.getPublicMethod("update").setFieldValue("period_value_type",options.periodOptions.valueType);contr.getPublicMethod("insert").setFieldValue("key",key);contr.getPublicMethod("insert").setFieldValue("period_value_type",options.periodOptions.valueType);}else{options.periodOptions={};}
options.periodOptions.gridClass=options.periodOptions.gridClass||GridColumn;options.periodOptions.ctrlClass=options.periodOptions.ctrlClass||EditString;options.periodOptions.ctrlOptions=options.periodOptions.ctrlOptions||{};options.periodOptions.gridOptions=options.periodOptions.gridOptions||{};options.periodOptions.gridOptions.field=model.getField("val");var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters=filtered?null:{"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"period_value_type":filtered?null:{"binding":new CommandBinding({"control":new Enum_period_value_types(id+":filter-ctrl-period_value_type",{"labelCaption":"Вид значения:"}),"field":new FieldString("period_value_type")}),"sign":"e"}}
var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[filtered?null:new GridCellHead(id+":grid:head:period_value_type",{"value":"Вид значений","columns":[new EnumGridColumn_period_value_types({"field":model.getField("period_value_type")})]}),filtered?null:new GridCellHead(id+":grid:head:key",{"value":"Ключ","columns":[new GridColumn({"field":model.getField("key")})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:val",{"value":"Значение","columns":[new options.periodOptions.gridClass(options.periodOptions.gridOptions)]})]})]}),"pagination":filtered?null:new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":filtered,"refreshInterval":filtered?0:constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true,"filters":filtered?[{"field":"period_value_type","sign":"e","val":options.periodOptions.valueType},{"field":"key","sign":"e","val":key}]:null}));}
extend(PeriodValueList_View,ViewAjx); 
function TmUserList_View(id,options){options.HEAD_TITLE="Соответствие пользователей в Telegram";TmUserList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.TmUserList_Model)?options.models.TmUserList_Model:new TmUserList_Model();var contr=new TmUser_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":true,"cmdDelete":true}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:id",{"value":"ИД","columns":[new GridColumn({"field":model.getField("id"),"ctrlOptions":{"enabled":false,"labelCaption":""}})],"sortable":true}),new GridCellHead(id+":grid:head:tm_id",{"value":"ИД телеграм","columns":[new GridColumn({"field":model.getField("tm_id"),"ctrlOptions":{"enabled":false,"labelCaption":""}})],"sortable":true}),new GridCellHead(id+":grid:head:tm_first_name",{"value":"Имя в телеграм","columns":[new GridColumn({"field":model.getField("tm_first_name"),"ctrlOptions":{"enabled":false,"labelCaption":""}})],"sortable":true}),new GridCellHead(id+":grid:head:ext_obj",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("ext_obj"),"ctrlBindFieldId":"ext_obj","ctrlClass":ClientTelEdit,"ctrlOptions":{"labelCaption":""},"formatFunction":function(fields){return window.getApp().getTmUserDescr(fields["ext_obj"].getValue());}})],"sortable":true}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата создания","columns":[new GridColumnDateTime({"field":model.getField("date_time")})],"sortable":true,"sort":"desc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(TmUserList_View,ViewAjxList); 
function TmUserPhotoList_View(id,options){options.HEAD_TITLE="Соответствие пользователей в Telegram";TmUserPhotoList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.TmUserPhotoList_Model)?options.models.TmUserPhotoList_Model:new TmUserPhotoList_Model();var contr=new TmUser_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var self=this;var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":true,"cmdDelete":true}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:id",{"value":"ИД","columns":[new GridColumn({"field":model.getField("id"),"ctrlOptions":{"enabled":false,"labelCaption":""}})],"sortable":true}),new GridCellHead(id+":grid:head:tm_id",{"value":"ИД Telegram","columns":[new GridColumn({"field":model.getField("tm_id"),"ctrlOptions":{"enabled":false,"labelCaption":""},"ctrlEdit":false})],"sortable":true}),new GridCellHead(id+":grid:head:tm_first_name",{"value":"Имя в Telegram","columns":[new GridColumn({"field":model.getField("tm_first_name"),"ctrlOptions":{"enabled":false,"labelCaption":""},"ctrlEdit":false,"formatFunction":(function(self){return function(f,cell){var cell_n=cell.getNode();var ft=f.tm_photo.getValue();if(ft){var i=document.createElement("img");i.setAttribute("src","data:image/png;base64, "+ft);i.className="userPhoto";cell_n.appendChild(i);(new ToolTip({"node":cell_n,"wait":500,"onHover":(function(grid,id){return function(event){if(!grid.photoDetailData){grid.photoDetailData=[];}
if(!grid.photoDetailData[id]){var pm=(new TmUser_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",id);var ctrl=this;pm.run({"ok":function(resp){var m=resp.getModel("TmUserDialog_Model");if(m.getNextRow()){self.photoDetailData[id]=m.getFieldValue("tm_photo");self.showPhoto(ctrl,self.photoDetailData[id]);}}});}else{self.showPhoto(this,self.photoDetailData[id]);}}})(self,f.id.getValue())}));}
var nm=f.tm_first_name.getValue();var t=document.createElement("span");DOMHelper.setText(t,((nm&&nm.length)?nm:""));cell_n.appendChild(t);}})(self)})],"sortable":true}),new GridCellHead(id+":grid:head:ext_contacts_ref",{"value":"Контакт","columns":[new GridColumnRef({"field":model.getField("ext_contacts_ref"),"ctrlBindFieldId":"ext_contact_id","ctrlClass":ContactEdit,"ctrlOptions":{"labelCaption":""}})],"sortable":true}),new GridCellHead(id+":grid:head:ext_contacts_tel",{"value":"Телефон","columns":[new GridColumnPhone({"field":model.getField("ext_contacts_tel"),"ctrlEdit":false,"ctrlClass":EditPhone,"ctrlOptions":{"labelCaption":""}})],"sortable":true}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата создания","columns":[new GridColumnDateTime({"field":model.getField("date_time"),"ctrlEdit":false})],"sortable":true,"sort":"desc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(TmUserPhotoList_View,ViewAjxList);TmUserPhotoList_View.prototype.showPhoto=function(ctrl,base64Data){ctrl.popup('<div><img src="data:image/png;base64, '+base64Data+'"/></div>',{"title":"Данные по контакту"});} 
function TmOutMessageList_View(id,options){options.HEAD_TITLE="Исходящие сообщения Telegram";TmUserList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.TmOutMessageList_Model)?options.models.TmOutMessageList_Model:new TmOutMessageList_Model();var contr=new TmOutMessage_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:ext_obj",{"value":"Получатель","columns":[new GridColumnRef({"field":model.getField("ext_obj"),"formatFunction":function(fields){return window.getApp().getTmUserDescr(fields["ext_obj"].getValue());}})],"sortable":true}),new GridCellHead(id+":grid:head:message",{"value":"Сообщение","columns":[new GridColumnRef({"field":model.getField("message"),"formatFunction":function(fields){var v=fields["message"].getValue();return(v&&v.text)?v.text:"";}})]}),new GridCellHead(id+":grid:head:sent_date_time",{"value":"Отправлено","columns":[new GridColumnDateTime({"field":model.getField("sent_date_time")})],"sortable":true,"sort":"desc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(TmOutMessageList_View,ViewAjxList); 
function TmInMessageList_View(id,options){options.HEAD_TITLE="Входящие сообщения из Telegram";TmUserList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.TmInMessageList_Model)?options.models.TmInMessageList_Model:new TmInMessageList_Model();var contr=new TmInMessage_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:contacts_ref",{"value":"Отправитель","columns":[new GridColumn({"field":model.getField("contacts_ref"),"formatFunction":function(fields){var res="";var ct=fields.contacts_ref.getValue();if(ct&&ct.getDescr){res=ct.getDescr();}
var ent=fields.entity.getValue();if(ent&&CommonHelper.isArray(ent)&&ent.length){var res_tp="";for(var i=0;i<ent.length;i++){if(ent[i]&&ent[i].getDescr){if(res_tp!=""){res_tp+=", ";}
var tp=ent[i].getDataType();var tp_descr="";if(tp=="users"){tp_descr="сотрудник";}else if(tp=="clients"){tp_descr="клиент";}else if(tp=="drivers"){tp_descr="водитель";}else if(tp=="suppliers"){tp_descr="поставщик";}
res_tp+=tp_descr+" "+ent[i].getDescr();}}
if(res_tp.length){if(res.length){res+=" ("+res_tp+")";}else{res=res_tp;}}}
return res;}})]}),new GridCellHead(id+":grid:head:message",{"value":"Сообщение","columns":[new GridColumnRef({"field":model.getField("message"),"formatFunction":function(fields,cell){return window.getApp().tmMessageFormat(fields,cell);}})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Получено","columns":[new GridColumnDateTime({"field":model.getField("date_time")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));window.getApp().addVideoPlayerSupport();}
extend(TmInMessageList_View,ViewAjxList); 
function PostList_View(id,options){options=options||{};options.HEAD_TITLE="Должности";PostList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.Post_Model)?options.models.Post_Model:new Post_Model();var contr=new Post_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(PostList_View,ViewAjxList); 
function PostDialog_View(id,options){options=options||{};options.controller=new Post_Controller();options.model=options.models.Post_Model;options.addElement=function(){this.addElement(new EditString(id+":name",{"required":true,"focus":true,"maxLength":250,"labelCaption":"Наименование","placeholder":"Наименование должности","title":"Наименование должности"}));}
PostDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("name")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("name")})]);}
extend(PostDialog_View,ViewObjectAjx); 
function ContactList_View(id,options){options=options||{};options.HEAD_TITLE="Контакты";ContactList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ContactList_Model)?options.models.ContactList_Model:new ContactList_Model();var contr=new Contact_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var self=this;this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":Contact_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:tm_first_name",{"value":"Telegram","columns":[new GridColumn({"field":model.getField("tm_first_name"),"ctrlOptions":{"enabled":false,"labelCaption":""},"formatFunction":function(f,cell){var cell_n=cell.getNode();var ft=f.tm_photo.getValue();if(ft){var i=document.createElement("img");i.setAttribute("src","data:image/png;base64, "+ft);i.className="userPhoto";cell_n.appendChild(i);if(self.photoDetail){delete self.photoDetail;}
self.photoDetail=new ToolTip({"node":cell_n,"wait":2,"onHover":(function(grid,id){return function(event){if(!grid.photoDetailData){grid.photoDetailData=[];}
if(!grid.photoDetailData[id]){var pm=(new TmUser_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",id);var ctrl=this;pm.run({"ok":function(resp){var m=resp.getModel("TmUserDialog_Model");if(m.getNextRow()){self.photoDetailData[id]=m.getFieldValue("tm_photo");self.showPhoto(ctrl,self.photoDetailData[id]);}}});}else{self.showPhoto(this,self.photoDetailData[id]);}}})(self,f.ext_id.getValue())});}
var nm=f.tm_first_name.getValue();if(nm&&nm.length){var t=document.createElement("span");DOMHelper.setText(t,nm);cell_n.appendChild(t);}
return"";}})],"sortable":true}),new GridCellHead(id+":grid:head:email",{"value":"Email","columns":[new GridColumn({"field":model.getField("email"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":50}})],"sortable":true}),new GridCellHead(id+":grid:head:tel",{"value":"Телефон","columns":[new GridColumnPhone({"field":model.getField("tel"),"ctrlClass":EditPhone})],"sortable":true}),new GridCellHead(id+":grid:head:tel_ext",{"value":"Добавочный","columns":[new GridColumn({"field":model.getField("tel_ext")})]}),new GridCellHead(id+":grid:head:posts_ref",{"value":"Должность","columns":[new GridColumnRef({"field":model.getField("posts_ref"),"ctrlClass":PostEdit,"ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ContactList_View,ViewAjxList);ContactList_View.prototype.showPhoto=function(ctrl,base64Data){ctrl.popup('<div><img src="data:image/png;base64, '+base64Data+'"/></div>',{"title":"Данные по контакту"});} 
function ContactDialog_View(id,options){options=options||{};options.controller=new Contact_Controller();options.model=options.models.ContactDialog_Model;var tm_inv_vis=true;if(options.model&&options.model.getNextRow()){if(options.model.getFieldValue("tm_activated")){options.templateOptions=options.templateOptions||{};options.templateOptions.TM_ACTIVATED=true;options.templateOptions.TM_PHOTO=options.model.getFieldValue("tm_photo");tm_inv_vis=false;}}
var self=this;options.addElement=function(){this.addElement(new EditString(id+":name",{"required":true,"focus":true,"maxLength":250,"labelCaption":"Фамилия имя отчество","placeholder":"ФИО","title":"Фамилия имя отчество физического лица"}));this.addElement(new PostEdit(id+":posts_ref",{"placeholder":"Должность","title":"Должность физического лица"}));this.addElement(new EditEmail(id+":email",{"labelCaption":"Эл.почта:","title":"Адрес электронной почты","placeholder":"Адрес электронной почты"}));this.addElement(new EditPhone(id+":tel",{"labelCaption":"Телефон:","title":"Телефон физического лица"}));this.addElement(new EditString(id+":tel_ext",{"labelCaption":"Добавочный номер:","placeholder":"Добавочный номер телефона","title":"Добавочный номер телефона физического лиц"}));this.addElement(new EditText(id+":comment_text",{"labelCaption":"Коммантарий:","title":"Коммантарий менеджера о физическом лице"}));this.addElement(new ButtonCtrl(id+":btnTmInvite",{"caption":"Пригласить в Telegram:","title":"Отправить контакту приглашение в Telegram","glyph":"glyphicon-send","visible":tm_inv_vis,"onClick":function(){var b=this;b.setEnabled(false);window.getApp().TMInviteContact(new RefType({"keys":{"id":self.getElement("id").getValue()},"descr":self.getElement("name").getValue(),"dataType":"contacts"}),function(){b.setEnabled(true);});}}));this.addElement(new EditFile(id+":attachments_list",{"maxWidth":"100","maxHeight":"100","multipleFiles":false,"showHref":true,"showPic":false,"onDeleteFile":function(fileId,callBack){self.m_attachManager.deleteAttachment(fileId,callBack);},"onFileAdded":function(fileId){self.m_attachManager.addAttachment(fileId);},"onDownload":function(fileId){self.m_attachManager.downloadAttachment(fileId);},"allowedFileExtList":"jpeg,png,jpg"}));}
ContactDialog_View.superclass.constructor.call(this,id,options);this.m_attachManager=new AttachmentManager({"view":this,"dataType":"contacts","attachmentViewName":"attachments_list"});this.setDataBindings([new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("posts_ref"),"fieldId":"posts_ref"}),new DataBinding({"control":this.getElement("email")}),new DataBinding({"control":this.getElement("tel")}),new DataBinding({"control":this.getElement("tel_ext")}),new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("attachments_list")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("posts_ref"),"fieldId":"post_id"}),new CommandBinding({"control":this.getElement("email")}),new CommandBinding({"control":this.getElement("tel")}),new CommandBinding({"control":this.getElement("tel_ext")}),new CommandBinding({"control":this.getElement("comment_text")})]);}
extend(ContactDialog_View,ViewObjectAjx); 
function EntityContactList_View(id,options){options=options||{};options.HEAD_TITLE="Контакты";EntityContactList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.EntityContactList_Model)?options.models.EntityContactList_Model:new EntityContactList_Model();var contr=new EntityContact_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var self=this;this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:contacts_ref",{"value":"Контакт","columns":[new GridColumn({"field":model.getField("contacts_ref"),"cellOptions":{"title":"Двойной клик для редактивания контакта","events":{"dblclick":function(e){e.preventDefault();e.stopPropagation();self.openContact(e.target);}}},"ctrlClass":ContactEdit,"ctrlOptions":{"labelCaption":""},"formatFunction":function(f,cell){self.formatContact(f,cell);return"";},"ctrlBindFieldId":"contact_id"})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"rowSelect":false,"focus":true}));}
extend(EntityContactList_View,ViewAjxList);EntityContactList_View.prototype.formatContact=function(f,cell){var attrs=f.contact_attrs.getValue();if(!attrs||!attrs["name"]){return;}
var cell_n=cell.getNode();cell_n.setAttribute("contact_id",f.contact_id.getValue());var c_tag=document.createElement("DIV");var tel=attrs.tel;var tel_m=tel;if(tel_m&&tel_m.length==10){tel_m="+7"+tel;}
else if(tel_m&&tel_m.length==11){tel_m="+7"+tel.substr(1);}
var s_tag=document.createElement("DIV");s_tag.textContent=attrs["name"];s_tag.setAttribute("style","cursor:pointer;");if(attrs["email"]){s_tag.textContent+=", "+attrs["email"];}
if(attrs["post"]){s_tag.textContent+=", "+attrs["post"];}
if(tel_m&&tel_m.length){s_tag.textContent+=", ";var t_tag=document.createElement("A");t_tag.setAttribute("href","tel:"+tel_m);t_tag.textContent=CommonHelper.maskFormat(tel,window.getApp().getPhoneEditMask());if(attrs["tel_ext"]){t_tag.textContent+=" ("+attrs["tel_ext"]+")";}
s_tag.appendChild(t_tag);}
c_tag.appendChild(s_tag);cell_n.appendChild(c_tag);}
EntityContactList_View.prototype.openContact=function(n){var td=DOMHelper.getParentByTagName(n,"TD");if(!td){return;}
var id=td.getAttribute("contact_id");if(!id){return;}
(new Contact_Form({"name":"Contact_Form_"+id,"keys":{"id":id},"params":{"cmd":"edit","editViewOptions":{}}})).open();} 
function RawMaterialTicketList_View(id,options){options.HEAD_TITLE="Журнал талонов на материала";RawMaterialTicketList_View.superclass.constructor.call(this,id,options);var model=options.models.RawMaterialTicketList_Model;var contr=new RawMaterialTicket_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var r=window.getApp().getServVar("role_id");var issue_period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-issue_period",{"field":new FieldDateTime("issue_date_time")});var close_period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-close_period",{"field":new FieldDateTime("close_date_time")});var filters={"issue_period":{"binding":new CommandBinding({"control":issue_period_ctrl,"field":issue_period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":issue_period_ctrl.getControlFrom(),"field":issue_period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":issue_period_ctrl.getControlTo(),"field":issue_period_ctrl.getField()}),"sign":"le"}]},"carrier":{"binding":new CommandBinding({"control":new SupplierEdit(id+":filter-ctrl-carrier",{"contClassName":"form-group-filter","labelCaption":"Перевозчик:"}),"field":new FieldInt("carrier_id")}),"sign":"e"},"quarry":{"binding":new CommandBinding({"control":new QuarryEdit(id+":filter-ctrl-quarry",{"contClassName":"form-group-filter","labelCaption":"Карьер:"}),"field":new FieldInt("quarry_id")}),"sign":"e"},"material":{"binding":new CommandBinding({"control":new MaterialSelect(id+":filter-ctrl-material",{"contClassName":"form-group-filter","labelCaption":"Материал:"}),"field":new FieldInt("raw_material_id")}),"sign":"e"}}
var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":(r=="owner"||r=="admin"||r=="boss"||r=="weighing"),"cmdDelete":(r=="owner"||r=="admin"||r=="boss"||r=="weighing"),"cmdFilter":true,"filters":filters,"addCustomCommandsAfter":function(commands){commands.push(new RawMaterialTicketGridCmdIssue(id+":grid:cmd:issue"));}}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:carriers_ref",{"value":"Перевозчик","columns":[new GridColumnRef({"field":model.getField("carriers_ref"),"ctrlOptions":{"labelCaption":""},"ctrlClass":SupplierEdit,"ctrlBindFieldId":"carrier_id"})],"sortable":true}),new GridCellHead(id+":grid:head:raw_materials_ref",{"value":"Материал","columns":[new GridColumnRef({"field":model.getField("raw_materials_ref"),"ctrlOptions":{"labelCaption":""},"ctrlClass":MaterialSelect,"ctrlBindFieldId":"raw_material_id"})]}),new GridCellHead(id+":grid:head:quarries_ref",{"value":"Карьер","columns":[new GridColumnRef({"field":model.getField("quarries_ref"),"ctrlOptions":{"labelCaption":""},"ctrlClass":QuarryEdit,"ctrlBindFieldId":"quarry_id"})],"sortable":true}),new GridCellHead(id+":grid:head:barcode",{"value":"Штрихкод","columns":[new GridColumn({"field":model.getField("barcode"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":13}})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Вес","columns":[new GridColumn({"field":model.getField("quant"),"ctrlClass":EditInt})]}),new GridCellHead(id+":grid:head:issue_date_time",{"value":"Дата выпуска","columns":[new GridColumnDateTime({"field":model.getField("issue_date_time"),"ctrlClass":EditDateTime,"ctrlEdit":false})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:issue_users_ref",{"value":"Кто выдал","columns":[new GridColumnRef({"field":model.getField("issue_users_ref"),"ctrlClass":UserEditRef,"ctrlEdit":false})]}),new GridCellHead(id+":grid:head:close_date_time",{"value":"Дата гашения","columns":[new GridColumnDateTime({"field":model.getField("close_date_time"),"ctrlClass":EditDateTime,"ctrlEdit":false})],"sortable":true}),new GridCellHead(id+":grid:head:close_users_ref",{"value":"Кто погасил","columns":[new GridColumnRef({"field":model.getField("close_users_ref"),"ctrlClass":UserEditRef,"ctrlEdit":false})]})]})]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":"4"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right"},"totalFieldId":"total_quant","gridColumn":new GridColumnFloat({"id":"tot_quant"})}),new GridCell(id+":grid:foot:total_sp2",{"colSpan":"4"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(RawMaterialTicketList_View,ViewAjx); 
function RawMaterialTicketClose_View(id,options){options=options||{};var self=this;options.addElement=function(){if(!options.forSelect){this.addElement(new EditString(id+":barcode",{"labelCaption":"Штрих код талона:","maxLength":13,"autofocus":true,"events":{"keypress":function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){self.closeTicket(e.target.value);}},"input":function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13||(e.target.value&&e.target.value.length>=6)){self.closeTicket(e.target.value);}}}}));}
var model=options.listView?options.model:((options.models&&options.models.RawMaterialTicketCarrierAggList_Model)?options.models.RawMaterialTicketCarrierAggList_Model:new RawMaterialTicketCarrierAggList_Model());let constants,contr;if(!options.listView){constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);}
contr=new RawMaterialTicket_Controller();window.getApp().getConstantManager().get(constants);this.addElement(new GridAjx(id+":grid",{"model":model,"attrs":{"style":"width:100%;"},"readPublicMethod":contr.getPublicMethod("get_carrier_agg_list"),"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdAllCommands":false}),"popUpMenu":null,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:carriers_ref",{"value":"Перевозчик","columns":[new GridColumnRef({"field":model.getField("carriers_ref"),"ctrlBindFieldId":"carrier_id","ctrlClass":SupplierEdit})],"sortable":true}),new GridCellHead(id+":grid:head:raw_materials_ref",{"value":"Материал","columns":[new GridColumnRef({"field":model.getField("raw_materials_ref"),"ctrlBindFieldId":"raw_material_id","ctrlClass":MaterialSelect})],"sortable":true}),new GridCellHead(id+":grid:head:quarries_ref",{"value":"Карьер","columns":[new GridColumnRef({"field":model.getField("quarries_ref"),"ctrlBindFieldId":"quarry_id","ctrlClass":QuarryEdit})],"sortable":true}),new GridCellHead(id+":grid:head:ticket_count",{"value":"Количество","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("ticket_count")})]}),new GridCellHead(id+":grid:head:quant",{"value":"Вес за талон, т","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("quant")})]}),new GridCellHead(id+":grid:head:quant_tot",{"value":"Вес итого, т","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("quant_tot")})]})]})]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_sp1",{"colSpan":"4"}),new GridCellFoot(id+":grid:foot:tot_ticket_count",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"ticket_count"}),new GridCellFoot(id+":grid:foot:tot_quant_tot",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"quant_tot"})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":options.listView?null:constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":false}));}
RawMaterialTicketClose_View.superclass.constructor.call(this,id,options);}
extend(RawMaterialTicketClose_View,View);RawMaterialTicketClose_View.prototype.closeTicket=function(barcode){var pm=(new RawMaterialTicket_Controller()).getPublicMethod("close_ticket");pm.setFieldValue("barcode",barcode);window.setGlobalWait(true);var self=this;var ok_text="Талон погашен";var w_tm=3000;pm.run({"ok":function(resp){self.getElement("barcode").reset();self.getElement("barcode").getErrorControl().setValue(ok_text,"info");setTimeout(function(){self.getElement("barcode").getErrorControl().clear();},w_tm);self.getElement("barcode").focus();var pm=(new RawMaterialTicket_Controller()).getPublicMethod("get_carrier_agg_list");pm.run({"ok":function(resp){var grid=self.getElement("grid");grid.getModel().setData(resp.getModelData("RawMaterialTicketCarrierAggList_Model"));grid.onGetData();window.showTempNote(ok_text,null,w_tm);}})},"fail":function(resp,errCode,errStr){if(errCode==1000||errCode==1001){self.getElement("barcode").getErrorControl().setValue(errStr,(errCode==1000)?"danger":"warn");setTimeout(function(){self.getElement("barcode").getErrorControl().clear();},w_tm);self.getElement("barcode").focus();}else{throw new Error(errStr);}},"all":function(){window.setGlobalWait(false);}});} 
function LabChart1Rep_View(id,options){options=options||{};options=options||{};var contr=new LabChart_Controller();options.publicMethod=contr.getPublicMethod("get_lab_chart1");options.reportViewId="ViewXML";options.cmdMake=true;options.cmdPrint=false;options.cmdFilter=true;options.cmdExcel=false;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDate("date_time")});var bs_col=window.getApp().getBsCol();options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_site":{"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"labelCaption":"Завод:","contClassName":"form-group-filter"}),"field":new FieldInt("production_site_id")}),"sign":"e"},"concrete_type":{"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"labelCaption":"Марка:","contClassName":"form-group-filter"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"},"p_type":{"binding":new CommandBinding({"control":new EditRadioGroup(id+":p_val",{"elements":[new EditRadio(id+":p_val:p7",{"checked":true,"name":"p_type","value":"7","labelCaption":"p7","labelClassName":"control-label "+bs_col+"1"}),new EditRadio(id+":p_val:p28",{"name":"p_type","value":"28","labelCaption":"p28","labelClassName":"control-label "+bs_col+"1"})]}),"field":new FieldInt("p_type")}),"sign":"e"}};options.reportControl=new Control(id+":report","canvas",{});LabChart1Rep_View.superclass.constructor.call(this,id,options);options.reportControl.getNode().height=60;var ctx=options.reportControl.getNode().getContext('2d');this.m_chart=new Chart(ctx,{"type":"line","options":{"responsive":true,"elements":{"point":{"radius":0}},"title":{"display":false,"text":"% МПа от времени"},"tooltips":{"mode":"index","intersect":false},"hover":{"mode":"nearest","intersect":true},"scales":{"xAxes":[{"display":true,"scaleLabel":{"display":false,"labelString":"Дни"},"gridLines":{"color":"rgba(0, 0, 0, 0)",}}],"yAxes":[{"display":true,"ticks":{"min":50,"max":120,"stepSize":5},"scaleLabel":{"display":true,"labelString":"ОК"},"gridLines":{"color":"rgba(0, 0, 0, 0)"}}]}}});}
extend(LabChart1Rep_View,ViewReport);LabChart1Rep_View.prototype.P7_LIMIT_VAL=80;LabChart1Rep_View.prototype.P28_LIMIT_VAL=100;LabChart1Rep_View.prototype.onGetReportData=function(resp){var p_type=this.m_commands.getCmdFilter().getFilter().getFilter("p_type").binding.getControl().getValue();var m=new ModelXML("LabChart1_Model",{"data":resp.getModelData("LabChart1_Model"),"fields":{"dates":new FieldJSON("dates"),"vals":new FieldJSON("vals")}});var dates=[];var vals=[];var limits=[];if(m.getNextRow()){dates=m.getFieldValue("dates");vals=m.getFieldValue("vals");var v_val=(p_type=="7")?this.P7_LIMIT_VAL:this.P28_LIMIT_VAL;for(var i=0;i<vals.length;i++){limits.push(v_val);}}
var colors=window.getApp().getChartColors();this.m_chart.data={"labels":dates,"datasets":[{"label":"Граница","data":limits,"backgroundColor":colors.red,"borderColor":colors.red,"borderDash":[5,5],"borderWidth":3,"fill":false},{"label":"% Мпа p"+p_type+" по дням","data":vals,"backgroundColor":colors.green,"borderColor":colors.green,"borderWidth":4,"fill":false}]};this.m_chart.update();} 
function LabChart2Rep_View(id,options){options=options||{};options=options||{};var contr=new LabChart_Controller();options.publicMethod=contr.getPublicMethod("get_lab_chart2");options.reportViewId="ViewXML";options.cmdMake=true;options.cmdPrint=false;options.cmdFilter=true;options.cmdExcel=false;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDate("date_time")});var bs_col=window.getApp().getBsCol();options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_site":{"binding":new CommandBinding({"control":new ProductionSiteEdit(id+":filter-ctrl-production_site",{"labelCaption":"Завод:","contClassName":"form-group-filter"}),"field":new FieldInt("production_site_id")}),"sign":"e"},"concrete_type":{"binding":new CommandBinding({"control":new ConcreteTypeEdit(id+":filter-ctrl-concrete_type",{"labelCaption":"Марка:","contClassName":"form-group-filter"}),"field":new FieldInt("concrete_type_id")}),"sign":"e"},"p_type":{"binding":new CommandBinding({"control":new EditRadioGroup(id+":p_val",{"elements":[new EditRadio(id+":p_val:p7",{"checked":true,"name":"p_type","value":"7","labelCaption":"p7","labelClassName":"control-label "+bs_col+"1"}),new EditRadio(id+":p_val:p28",{"name":"p_type","value":"28","labelCaption":"p28","labelClassName":"control-label "+bs_col+"1"})]}),"field":new FieldInt("p_type")}),"sign":"e"}};var chart_ctrl=new Control(id+":report:chart","canvas",{});options.reportControl=new ControlContainer(id+":report","DIV",{"elements":[new ControlContainer(id+":report:oks","DIV",{}),chart_ctrl]});LabChart2Rep_View.superclass.constructor.call(this,id,options);chart_ctrl.getNode().height=60;var ctx=chart_ctrl.getNode().getContext('2d');this.m_chart=new Chart(ctx,{"type":"line","options":{"responsive":true,"elements":{"point":{"radius":0}},"title":{"display":false,"text":"Зависимость ОК от p7,p28"},"tooltips":{"mode":"index","intersect":false},"hover":{"mode":"nearest","intersect":true},"scales":{"xAxes":[{"display":true,"scaleLabel":{"display":false,"labelString":"Дни"},"gridLines":{"color":"rgba(0, 0, 0, 0)",}}],"yAxes":[{"display":true,"ticks":{"min":50,"max":120,"stepSize":5},"scaleLabel":{"display":true,"labelString":"ОК"},"gridLines":{"color":"rgba(0, 0, 0, 0)"}}]}}});}
extend(LabChart2Rep_View,ViewReport);LabChart2Rep_View.prototype.P7_LIMIT_VAL=80;LabChart2Rep_View.prototype.P28_LIMIT_VAL=100;LabChart2Rep_View.prototype.rebuildLocal=function(){var data_sets=[];var oks=this.getReportControl().getElement("oks").getElements();data_sets.push(this.m_dataSets[0]);for(var id in oks){if(oks[id]&&oks[id].getValue()){data_sets.push(this.m_dataSets[parseInt(oks[id].getAttr("ok_ind"),10)+1]);}}
this.m_chart.data={"labels":this.m_dates,"datasets":data_sets};this.m_chart.update();}
LabChart2Rep_View.prototype.onGetReportData=function(resp){var p_type=this.m_commands.getCmdFilter().getFilter().getFilter("p_type").binding.getControl().getValue();var m=new ModelXML("LabChart1_Model",{"data":resp.getModelData("LabChart1_Model"),"fields":{"dates":new FieldJSON("dates"),"vals":new FieldJSON("vals"),"oks":new FieldJSON("oks")}});var colors=window.getApp().getChartColors();var limits=[];this.m_dataSets=[{}];var self=this;this.m_dates=[];var vals=[];var oks_cont_ctrl=this.getReportControl().getElement("oks");var ok_ctrl_lb_class="control-label "+window.getBsCol(1);oks_cont_ctrl.clear();if(m.getNextRow()){this.m_dates=m.getFieldValue("dates");for(var i=0;i<this.m_dates.length;i++){limits.push((p_type=="7")?this.P7_LIMIT_VAL:this.P28_LIMIT_VAL);}
vals=m.getFieldValue("vals");var oks=m.getFieldValue("oks");var val_colors=["red","orange","yellow","green","blue","purple","grey"];var color_p=0;for(var i=0;i<oks.length;i++){if(!vals["ok_"+oks[i]]){throw new Error("Значения для p="+oks[i]+" не найдены!");}
oks_cont_ctrl.addElement(new EditCheckBox(this.getId()+"::report:oks:ok_"+i,{"labelClassName":ok_ctrl_lb_class,"labelAlign":"left","checked":true,"labelCaption":"p"+p_type+" = "+oks[i],"attrs":{"ok_ind":i},"events":{"change":function(e){self.rebuildLocal();}}}));this.m_dataSets.push({"ok":oks[i],"label":"% Мпа p"+p_type+"= "+oks[i],"data":vals["ok_"+oks[i]],"backgroundColor":colors[val_colors[color_p]],"borderColor":colors[val_colors[color_p]],"borderWidth":4,"fill":false});color_p+=1
if(color_p==val_colors.length){color_p=0;}}}
this.m_dataSets[0]={"label":"Граница","data":limits,"backgroundColor":colors.red,"borderColor":colors.red,"borderDash":[5,5],"borderWidth":3,"fill":false};this.m_chart.data={"labels":this.m_dates,"datasets":this.m_dataSets};this.m_chart.update();oks_cont_ctrl.toDOM();} 
function DriverDialog_View(id,options){options=options||{};options.controller=new Driver_Controller();options.model=options.models.DriverList_Model;options.addElement=function(){this.addElement(new EditString(id+":name",{"labelCaption":"Наименование:","required":true,"maxLength":50}));this.addElement(new EditString(id+":driver_licence",{"labelCaption":"Водительское удостоверение:","required":false,"maxLength":150}));this.addElement(new EditString(id+":driver_licence_class",{"labelCaption":"Категории:","required":false,"maxLength":10}));this.addElement(new EditCheckBox(id+":employed",{"labelCaption":"Сотрудник:"}));this.addElement(new Edit(id+":inn",{"labelCaption":"ИНН:","title":"ИНН физического лица"}));this.addElement(new EntityContactList_View(id+":contacts_list",{"detail":true}));}
DriverDialog_View.superclass.constructor.call(this,id,options);var r_bd=[new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("driver_licence")}),new DataBinding({"control":this.getElement("driver_licence_class")}),new DataBinding({"control":this.getElement("employed")}),new DataBinding({"control":this.getElement("inn")})];this.setDataBindings(r_bd);this.setWriteBindings([new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("driver_licence")}),new CommandBinding({"control":this.getElement("driver_licence_class")}),new CommandBinding({"control":this.getElement("employed")}),new CommandBinding({"control":this.getElement("inn")})]);var self=this;this.addDetailDataSet({"control":this.getElement("contacts_list").getElement("grid"),"controlFieldId":["entity_type","entity_id"],"value":["drivers",function(){return self.m_model.getFieldValue("id");}]});}
extend(DriverDialog_View,ViewObjectAjx); 
function DestinationProdBasePriceList_View(id,options){options=options||{};DestinationProdBasePriceList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.DestinationProdBasePriceList_Model)?options.models.DestinationProdBasePriceList_Model:new DestinationProdBasePriceList_Model();var contr=new DestinationProdBasePrice_Controller();var pagClass=window.getApp().getPaginationClass();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var filters;this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":!options.detail?options.variantStorage:null,"cmdSearch":!options.detail}),"popUpMenu":new PopUpMenu(),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:production_bases_ref",{"value":"База","columns":[new GridColumnRef({"field":model.getField("production_bases_ref"),"ctrlClass":ProductionBaseEdit,"ctrlBindFieldId":"production_base_id","ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time")})]}),new GridCellHead(id+":grid:head:price",{"value":"Цена","columns":[new GridColumnFloat({"field":model.getField("price"),"precision":"2","ctrlClass":EditMoney})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":!options.detail?(constants.grid_refresh_interval.getValue()*1000):0,"rowSelect":false,"focus":true}));}
extend(DestinationProdBasePriceList_View,ViewAjxList); 
function DestinationProdBaseDriverPriceList_View(id,options){options=options||{};DestinationProdBaseDriverPriceList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.DestinationProdBaseDriverPriceList_Model)?options.models.DestinationProdBaseDriverPriceList_Model:new DestinationProdBaseDriverPriceList_Model();var contr=new DestinationProdBaseDriverPrice_Controller();var pagClass=window.getApp().getPaginationClass();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var filters;this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":!options.detail?options.variantStorage:null,"cmdSearch":!options.detail}),"popUpMenu":new PopUpMenu(),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:production_bases_ref",{"value":"База","columns":[new GridColumnRef({"field":model.getField("production_bases_ref"),"ctrlClass":ProductionBaseEdit,"ctrlBindFieldId":"production_base_id","ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time")})]}),new GridCellHead(id+":grid:head:price",{"value":"Цена","columns":[new GridColumnFloat({"field":model.getField("price"),"precision":"2","ctrlClass":EditMoney})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":!options.detail?(constants.grid_refresh_interval.getValue()*1000):0,"rowSelect":false,"focus":true}));}
extend(DestinationProdBaseDriverPriceList_View,ViewAjxList); 
function VehicleTotRepItemDialog_View(id,options){options=options||{};options.controller=new VehicleTotRepItem_Controller();options.model=options.models.VehicleTotRepItem_Model;options.addElement=function(){this.addElement(new EditNum(id+":code",{"required":true,"focus":true,"labelCaption":"Код:","title":"Код статьи для сортировки"}));this.addElement(new EditString(id+":name",{"required":true,"maxLength":1000,"labelCaption":"Наименование:","placeholder":"Наименование должности","title":"Наименование статьи"}));this.addElement(new EditCheckBox(id+":is_income",{"labelCaption":"Это статья доходов:","title":"Если установлено - это статья доходов, иначе - это статья расодов"}));this.addElement(new EditCheckBox(id+":info",{"labelCaption":"Информационная статья:","title":"Установлено для статей, которые не влияют на остаток, вводятся для оборотов"}));this.addElement(new EditText(id+":query",{"rows":5,"labelCaption":"Запрос SQL:","title":"Если поле заполнено, оно будет рассчитано автомаически, иначе заплняется вручную"}));}
VehicleTotRepItemDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("code")}),new DataBinding({"control":this.getElement("is_income")}),new DataBinding({"control":this.getElement("info")}),new DataBinding({"control":this.getElement("query")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("code")}),new CommandBinding({"control":this.getElement("is_income")}),new CommandBinding({"control":this.getElement("info")}),new CommandBinding({"control":this.getElement("query")})]);}
extend(VehicleTotRepItemDialog_View,ViewObjectAjx); 
function VehicleTotRepItemList_View(id,options){options=options||{};options.HEAD_TITLE="Статьи доходов/расходов по ТС отчета по ТС";VehicleTotRepItemList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.VehicleTotRepItemList_Model)?options.models.VehicleTotRepItemList_Model:new VehicleTotRepItemList_Model();var contr=new VehicleTotRepItem_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":VehicleTotRepItem_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:code",{"value":"Код","columns":[new GridColumn({"field":model.getField("code")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true}),new GridCellHead(id+":grid:head:is_income",{"value":"Доход","columns":[new GridColumnBool({"field":model.getField("is_income"),"showFalse":false})]}),new GridCellHead(id+":grid:head:info",{"value":"Информационная статья","columns":[new GridColumnBool({"field":model.getField("info"),"showFalse":false})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(VehicleTotRepItemList_View,ViewAjxList); 
function VehicleTotRepCommonItemList_View(id,options){options=options||{};options.HEAD_TITLE="Общие статьи доходов/расходов отчета по ТС";VehicleTotRepCommonItemList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.VehicleTotRepCommonItemList_Model)?options.models.VehicleTotRepCommonItemList_Model:new VehicleTotRepCommonItemList_Model();var contr=new VehicleTotRepCommonItem_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:code",{"value":"Код","columns":[new GridColumn({"field":model.getField("code")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true}),new GridCellHead(id+":grid:head:is_income",{"value":"Доход","columns":[new GridColumnBool({"field":model.getField("is_income"),"showFalse":false})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(VehicleTotRepCommonItemList_View,ViewAjxList); 
function VehicleTotRepBalanceList_View(id,options){options=options||{};options.HEAD_TITLE="Остатки взаиморасчетов с владельцами ТС";VehicleTotRepBalanceList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.VehicleTotRepBalanceList_Model)?options.models.VehicleTotRepBalanceList_Model:new VehicleTotRepBalanceList_Model();var contr=new VehicleTotRepBalance_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:vehicle_owners_ref",{"value":"Владелец","columns":[new GridColumnRef({"field":model.getField("vehicle_owners_ref"),"ctrlClass":VehicleOwnerEdit,"ctrlBindFieldId":"vehicle_owner_id","ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:period",{"value":"Период","columns":[new GridColumnDate({"field":model.getField("period")})]}),new GridCellHead(id+":grid:head:value",{"value":"Сумма","columns":[new GridColumnFloat({"field":model.getField("value"),"precision":"2"})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(VehicleTotRepBalanceList_View,ViewAjxList); 
function VehicleListReport_View(id,options){options=options||{};options.publicMethod=(new Vehicle_Controller()).getPublicMethod("vehicle_list_report");options.reportViewId="ViewHTMLXSLT";options.templateId="VehicleListReport";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDate("date")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"vehicle":{"binding":new CommandBinding({"control":new VehicleEdit(id+":filter-ctrl-vehicle",{"contClassName":"form-group-filter"}),"field":new FieldInt("vehicle_id")}),"sign":"e"}};VehicleListReport_View.superclass.constructor.call(this,id,options);}
extend(VehicleListReport_View,ViewReport); 
function TaskImportanceLevelList_View(id,options){options=options||{};options.HEAD_TITLE="Уровни важности задач";TaskImportanceLevelList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.TaskImportanceLevel_Model)?options.models.TaskImportanceLevel_Model:new TaskImportanceLevel_Model();var contr=new TaskImportanceLevel_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:code",{"value":"Код","columns":[new GridColumn({"field":model.getField("code")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(TaskImportanceLevelList_View,ViewAjxList); 
function ProgUpdateList_View(id,options){options=options||{};options.HEAD_TITLE="Обновления прогрммы";ProgUpdateList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ProgUpdate_Model)?options.models.ProgUpdate_Model:new ProgUpdate_Model();var contr=new ProgUpdate_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("creata_date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:create_date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("create_date_time")})],"sortable":true}),new GridCellHead(id+":grid:head:release",{"value":"Релиз","columns":[new GridColumn({"field":model.getField("release"),"master":true,"detailViewClass":ProgUpdateDetailList_View,"detailViewOptions":{"detailFilters":{"ProgUpdateDetail_Model":[{"masterFieldId":"id","field":"prog_update_id","sign":"e","val":"0"}]}}})],"sortable":true,"sort":"desc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ProgUpdateList_View,ViewAjxList); 
function ProgUpdateDetailList_View(id,options){options=options||{};this.m_view=options.view;ProgUpdateDetailList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ProgUpdateDetail_Model)?options.models.ProgUpdateDetail_Model:new ProgUpdateDetail_Model();var contr=new ProgUpdateDetail_Controller();var popup_menu=new PopUpMenu();var self=this;this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"popUpMenu":popup_menu,"filters":(options.detailFilters&&options.detailFilters.ProgUpdateDetail_Model)?options.detailFilters.ProgUpdateDetail_Model:null,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:code",{"value":"Код","columns":[new GridColumn({"field":model.getField("code")})]}),new GridCellHead(id+":grid:head:description",{"value":"Описание","columns":[new GridColumn({"field":model.getField("description"),"ctrlClass":EditText})]}),new GridCellHead(id+":grid:head:description_tech",{"value":"Описание техн.","columns":[new GridColumn({"field":model.getField("description_tech"),"ctrlClass":EditText})]})]})]}),"pagination":null,"autoRefresh":options.detailFilters?true:false,"refreshInterval":null,"rowSelect":false,"focus":true,"srvEvents":null}));}
extend(ProgUpdateDetailList_View,ViewAjxList); 
function QualityPassport_View(id,options){options=options||{};options.template=window.getApp().getTemplate("QualityPassport");options.controller=new QualityPassport_Controller();options.model=(options.models&&options.models.QualityPassport_Model)?options.models.QualityPassport_Model:new QualityPassport_Model();var self=this;options.addElement=function(){if(options.noPrintBtn!==true){this.addElement(new PrintPassBtn(id+":printPass",{"dialogView":this}));}
this.addElement(new EditDate(id+":vidan",{"labelCaption":"Выдан:","title":"Дата выдачи"}));this.addElement(new EditNum(id+":f_val",{"focus":true,"labelCaption":"Значение F:","title":"Значение F смеси"}));this.addElement(new EditNum(id+":w_val",{"labelCaption":"Значение W:","title":"Значение W смеси"}));var ac_model=new QualityPassport_Model();this.addElement(new EditString(id+":vid_smesi_gost",{"labelCaption":"Вид смеси, ГОСТ:","title":"Вид смеси, ГОСТ, например, ГОСТ 7473-2010","cmdAutoComplete":true,"acMinLengthForQuery":0,"acIc":true,"acPublicMethod":options.controller.getPublicMethod("complete_vid_smesi_gost"),"acDescrFields":[ac_model.getField("vid_smesi_gost")],"acKeyFields":[ac_model.getField("vid_smesi_gost")],"acPatternFieldId":"vid_smesi_gost","acModel":ac_model}));this.addElement(new EditString(id+":uklad",{"labelCaption":"Место укладки:","title":"Место укладки","cmdAutoComplete":true,"acMinLengthForQuery":0,"acIc":true,"acPublicMethod":options.controller.getPublicMethod("complete_uklad"),"acDescrFields":[ac_model.getField("uklad")],"acKeyFields":[ac_model.getField("uklad")],"acPatternFieldId":"uklad","acModel":ac_model}));this.addElement(new EditString(id+":sohran_udobouklad",{"labelCaption":"Сохран. удобоук-ти,ч-мин:","title":"Сохраняемость удобоукладываемости и других нормируемых показателей, ч-мин","cmdAutoComplete":true,"acMinLengthForQuery":0,"acIc":true,"acPublicMethod":options.controller.getPublicMethod("complete_sohran_udobouklad"),"acDescrFields":[ac_model.getField("sohran_udobouklad")],"acKeyFields":[ac_model.getField("sohran_udobouklad")],"acPatternFieldId":"sohran_udobouklad","acModel":ac_model}));this.addElement(new EditString(id+":kf_prochnosti",{"labelCaption":"Коэффициент прочности:","title":"Коэффициент вариации прочности бетона, %","cmdAutoComplete":true,"acMinLengthForQuery":0,"acIc":true,"acPublicMethod":options.controller.getPublicMethod("complete_kf_prochnosti"),"acDescrFields":[ac_model.getField("kf_prochnosti")],"acKeyFields":[ac_model.getField("kf_prochnosti")],"acPatternFieldId":"kf_prochnosti","acModel":ac_model}));this.addElement(new EditNum(id+":prochnost",{"labelCaption":"Прочность, Мпа (кгс/см2):","title":"Требуемая прочность бетона в проектном возрасте 28 сут., Мпа (кгс/см2) ","cmdAutoComplete":true,"acMinLengthForQuery":0,"acIc":true,"acPublicMethod":options.controller.getPublicMethod("complete_prochnost"),"acDescrFields":[ac_model.getField("prochnost")],"acKeyFields":[ac_model.getField("prochnost")],"acPatternFieldId":"prochnost","acModel":ac_model}));this.addElement(new EditString(id+":naim_dobavki",{"labelCaption":"Добавка:","title":"Наименование, масса (объём) добавки, кг (л)","cmdAutoComplete":true,"acMinLengthForQuery":0,"acIc":true,"acPublicMethod":options.controller.getPublicMethod("complete_naim_dobavki"),"acDescrFields":[ac_model.getField("naim_dobavki")],"acKeyFields":[ac_model.getField("naim_dobavki")],"acPatternFieldId":"naim_dobavki","acModel":ac_model}));this.addElement(new EditString(id+":aeff",{"labelCaption":"Аэфф:","title":"Класс материалов по удельной эффективной активности естественных радионуклидов и цифровое значение Аэфф","cmdAutoComplete":true,"acMinLengthForQuery":0,"acIc":true,"acPublicMethod":options.controller.getPublicMethod("complete_aeff"),"acDescrFields":[ac_model.getField("aeff")],"acKeyFields":[ac_model.getField("aeff")],"acPatternFieldId":"aeff","acModel":ac_model}));this.addElement(new EditString(id+":krupnost",{"labelCaption":"Крупность, мм:","title":"Наибольшая крупность заполнителей, мм","cmdAutoComplete":true,"acMinLengthForQuery":0,"acIc":true,"acPublicMethod":options.controller.getPublicMethod("complete_krupnost"),"acDescrFields":[ac_model.getField("krupnost")],"acKeyFields":[ac_model.getField("krupnost")],"acPatternFieldId":"krupnost","acModel":ac_model}));this.addElement(new EditString(id+":reg_nomer_dekl",{"labelCaption":"Регистр. номер декларации:","title":"Регистрационный номер декларации о соотвествии","cmdAutoComplete":true,"acMinLengthForQuery":0,"acIc":true,"acPublicMethod":options.controller.getPublicMethod("complete_reg_nomer_dekl"),"acDescrFields":[ac_model.getField("reg_nomer_dekl")],"acKeyFields":[ac_model.getField("reg_nomer_dekl")],"acPatternFieldId":"reg_nomer_dekl","acModel":ac_model}));}
QualityPassport_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("f_val")}),new DataBinding({"control":this.getElement("w_val")}),new DataBinding({"control":this.getElement("vid_smesi_gost")}),new DataBinding({"control":this.getElement("uklad")}),new DataBinding({"control":this.getElement("sohran_udobouklad")}),new DataBinding({"control":this.getElement("kf_prochnosti")}),new DataBinding({"control":this.getElement("prochnost")}),new DataBinding({"control":this.getElement("naim_dobavki")}),new DataBinding({"control":this.getElement("aeff")}),new DataBinding({"control":this.getElement("krupnost")}),new DataBinding({"control":this.getElement("vidan")}),new DataBinding({"control":this.getElement("reg_nomer_dekl")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("f_val")}),new CommandBinding({"control":this.getElement("w_val")}),new CommandBinding({"control":this.getElement("vid_smesi_gost")}),new CommandBinding({"control":this.getElement("uklad")}),new CommandBinding({"control":this.getElement("sohran_udobouklad")}),new CommandBinding({"control":this.getElement("kf_prochnosti")}),new CommandBinding({"control":this.getElement("prochnost")}),new CommandBinding({"control":this.getElement("naim_dobavki")}),new CommandBinding({"control":this.getElement("aeff")}),new CommandBinding({"control":this.getElement("krupnost")}),new CommandBinding({"control":this.getElement("vidan")}),new CommandBinding({"control":this.getElement("reg_nomer_dekl")}),new CommandBinding({"func":function(pm){pm.setFieldValue("shipment_id",self.m_model.getFieldValue("shipment_id"));}})]);}
extend(QualityPassport_View,ViewObjectAjx); 
function Firm1cList_View(id,options){options=options||{};options.HEAD_TITLE="Организации 1с";Firm1cList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.Firm1cList_Model)?options.models.Firm1cList_Model:new Firm1cList_Model();var contr=new Firm1c_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var filters;this.addElement(new GridAjx(id+":grid",{"filters":filters,"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"exportFileName":"Организации 1с"}),"popUpMenu":popup_menu,"filters":(options.detailFilters&&options.detailFilters.Firm1cList_Model)?options.detailFilters.Firm1cList_Model:null,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:descr",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("descr")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:inn",{"value":"ИНН","columns":[new GridColumn({"field":model.getField("inn"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":"12"}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(Firm1cList_View,ViewAjxList); 
function ClientDebtList_View(id,options){options=options||{};options.HEAD_TITLE="Взаиморасчеты 1с с контрагентами";ClientDebtList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ClientDebtList_Model)?options.models.ClientDebtList_Model:new ClientDebtList_Model();var contr=new ClientDebt_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var filters;this.addElement(new GridAjx(id+":grid",{"filters":filters,"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"exportFileName":"Взаиморасчеты1с"}),"popUpMenu":popup_menu,"filters":(options.detailFilters&&options.detailFilters.ClientDebtList_Model)?options.detailFilters.ClientDebtList_Model:null,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:firms_ref",{"value":"Организация","columns":[new GridColumnRef({"field":model.getField("firms_ref"),"ctrlEdit":Firm1cEdit,"ctrlBindFieldId":"firm_id","ctrlOptions":{"labelCaption":""}})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Контрагент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlEdit":ClientEdit,"ctrlBindFieldId":"client_id","ctrlOptions":{"labelCaption":""}})],"sortable":true}),new GridCellHead(id+":grid:head:client_contracts_ref",{"value":"Contract","columns":[new GridColumnRef({"field":model.getField("client_contracts_ref"),"ctrlBindFieldId":"client_contract_id","ctrlOptions":{"labelCaption":""}})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:debt_total",{"value":"Сумма","columns":[new GridColumnFloat({"field":model.getField("debt_total"),"ctrlClass":EditMoney,"ctrlOptions":{}})]}),new GridCellHead(id+":grid:head:update_date",{"value":"Дата обновления","columns":[new GridColumnDateTime({"field":model.getField("update_date"),"ctrlClass":EditDateTime,"ctrlOptions":{}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ClientDebtList_View,ViewAjxList); 
function QualityPassportList_View(id,options){options=options||{};options.HEAD_TITLE="Реестр паспартов качества";QualityPassportList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.QualityPassportList_Model)?options.models.QualityPassportList_Model:new QualityPassportList_Model();var contr=new QualityPassport_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var self=this;var filters;if(!options.detail){var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDate("vidan")});filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}}}
this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":WindowFormModalBS,"editViewClass":QualityPassport_View,"editViewOptions":function(){return{"dialogWidth":"80%"}},"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":true,"exportFileName":"РеестрПаспартовКачества","filters":filters}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:num",{"value":"Номер","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("num")})],"sortable":true}),new GridCellHead(id+":grid:head:vidan",{"value":"Выдан","columns":[new GridColumnDate({"field":model.getField("vidan")})],"sortable":true,"sort":"desc"}),,new GridCellHead(id+":grid:head:orders_ref",{"value":"Заявка","columns":[new GridColumnRef({"field":model.getField("orders_ref"),"ctrlClass":OrderEdit,"ctrlOptions":{"lableCaption":""},"form":OrderDialog_Form,"ctrlBindFieldId":"order_id"})],"sortable":true}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Контрагент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlClass":ClientEdit,"form":ClientDialog_Form,"ctrlOptions":{"lableCaption":""},"ctrlBindFieldId":"client_id"})],"sortable":true}),new GridCellHead(id+":grid:head:shipments_list",{"value":"Отгрузки","columns":[new GridColumnRef({"field":model.getField("shipments_list"),"ctrlEdit":false,"formatFunction":function(f,gridCell){var sh=f.shipments_list.getValue();if(!sh||!sh.length){return"";}
var ref_list=document.createElement("ul");for(var i=0;i<sh.length;i++){if(!sh[i].getDescr||!sh[i].getKey){continue;}
var ref_item=document.createElement("li");var href=document.createElement("a");href.setAttribute("href","#");href.setAttribute("key",sh[i].getKey());href.textContent=sh[i].getDescr();EventHelper.add(href,"click",function(e){if(e.preventDefault){e.preventDefault();}
e.stopPropagation();var k=this.getAttribute("key");self.openShipment(k);return false;});ref_item.appendChild(href);ref_list.appendChild(ref_item);}
gridCell.getNode().appendChild(ref_list);return"";}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(QualityPassportList_View,ViewAjxList);QualityPassportList_View.prototype.openShipment=function(k){(new ShipmentDialog_Form({"keys":{"id":k}})).open();} 
function ShipmentMediaList_View(id,options){options=options||{};options.HEAD_TITLE="Медиа файлы водителей";ShipmentMediaList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ShipmentMediaList_Model)?options.models.ShipmentMediaList_Model:new ShipmentMediaList_Model();var contr=new ShipmentMedia_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var filters;if(!options.detail){var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}}}
var grid=new GridAjx(id+":grid",{"filters":filters,"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"editViewClass":null,"editViewOptions":null,"commands":options.detail?null:new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"exportFileName":"Медиа файлы водителей"}),"popUpMenu":popup_menu,"filters":(options.detailFilters&&options.detailFilters.ShipmentMediaList_Model)?options.detailFilters.ShipmentMediaList_Model:null,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:drivers_ref",{"value":"Водитель","columns":[new GridColumnRef({"field":model.getField("drivers_ref"),"form":DriverDialog_Form,"ctrlClass":DriverEditRef,"ctrlOptions":{"lableCaption":""},"ctrlBindFieldId":"driver_id"})]}),options.detail?null:new GridCellHead(id+":grid:head:orders_ref",{"value":"Заявка","columns":[new GridColumnRef({"field":model.getField("orders_ref"),"form":OrderDialog_Form,"ctrlClass":OrderEdit,"ctrlOptions":{"lableCaption":""},"ctrlBindFieldId":"order_id"})]}),options.detail?null:new GridCellHead(id+":grid:head:shipments_ref",{"value":"Отгрузка","columns":[new GridColumnRef({"field":model.getField("shipments_ref"),"form":ShipmentDialog_Form,"ctrlClass":ShipmentEdit,"ctrlOptions":{"lableCaption":""},"ctrlBindFieldId":"shipment_id"})]}),new GridCellHead(id+":grid:head:message",{"value":"Сообщение","columns":[new GridColumn({"field":model.getField("message"),"formatFunction":function(fields,cell){return window.getApp().tmMessageFormat(fields,cell);}})]})]})]}),"pagination":options.detail?null:new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});this.addElement(grid);if(options.detail){var self=this;grid.onGetData_orig=grid.onGetData;grid.onGetData=function(resp){if(resp&&resp.getModel("ShipmentMediaList_Model").getRowCount()>0){DOMHelper.show("ShipmentDialog:media_cont");this.onGetData_orig.call(this,resp);}}}}
extend(ShipmentMediaList_View,ViewAjxList); 
function ChatStatusList_View(id,options){options=options||{};options.HEAD_TITLE="Статусы чата";ChatStatusList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ChatStatus_Model)?options.models.ChatStatus_Model:new ChatStatus_Model();var contr=new ChatStatus_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var filters;this.addElement(new GridAjx(id+":grid",{"filters":filters,"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"editViewClass":null,"editViewOptions":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"exportFileName":"Статусы чата"}),"popUpMenu":popup_menu,"filters":(options.detailFilters&&options.detailFilters.ChatStatusList_Model)?options.detailFilters.ChatStatusList_Model:null,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ChatStatusList_View,ViewAjxList); 
function VehicleOwnerTotIncomeAllRep_View(id,options){options=options||{};var contr=new VehicleOwner_Controller();options.publicMethod=contr.getPublicMethod("get_tot_income_report_all");options.reportViewId="ViewHTMLXSLT";options.templateId="VehicleOwnerTotIncomeAllRep";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=true;options.cmdPdf=false;var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"valueFrom":(options.templateParams)?options.templateParams.date_from:DateHelper.getStartOfShift(DateHelper.time()),"valueTo":(options.templateParams)?options.templateParams.date_to:DateHelper.getEndOfShift(DateHelper.time()),"field":new FieldDateTime("date_time")});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};VehicleOwnerTotIncomeAllRep_View.superclass.constructor.call(this,id,options);}
extend(VehicleOwnerTotIncomeAllRep_View,ViewReport); 
function CementSiloMaterialList_View(id,options){options=options||{};options.HEAD_TITLE="Материалы в силосах";CementSiloMaterialList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.CementSiloMaterialList_Model)?options.models.CementSiloMaterialList_Model:new CementSiloMaterialList_Model();var contr=new CementSiloMaterial_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var filters;this.addElement(new GridAjx(id+":grid",{"filters":filters,"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"editViewClass":null,"editViewOptions":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"exportFileName":"МатериалыВСилосах"}),"popUpMenu":popup_menu,"filters":(options.detailFilters&&options.detailFilters.CementSiloMaterialList_Model)?options.detailFilters.CementSiloMaterialList_Model:null,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time")})]}),options.detailFilters?null:new GridCellHead(id+":grid:head:cement_silos_ref",{"value":"Силос","columns":[new GridColumnRef({"field":model.getField("cement_silos_ref"),"ctrlClass":CementSiloEdit,"searchOptions":{"field":new FieldInt("cement_silo_id"),"searchType":"on_match"},"ctrlBindFieldId":"cement_silo_id",})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:materials_ref",{"value":"Материал","columns":[new GridColumnRef({"field":model.getField("materials_ref"),"ctrlClass":MaterialSelect,"ctrlOptions":{"labelCaption":""},"searchOptions":{"field":new FieldInt("material_id"),"searchType":"on_match"},"ctrlBindFieldId":"material_id",})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":options.detailFilters?true:false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(CementSiloMaterialList_View,ViewAjxList); 
function VehicleMileageList_View(id,options){options=options||{};options.HEAD_TITLE="Пробег транспортного средства";VehicleMileageList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.VehicleMileageList_Model)?options.models.VehicleMileageList_Model:new VehicleMileageList_Model();var contr=new VehicleMileage_Controller();var constants={"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var self=this;this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdSearch":false,"cmdAllCommands":false}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:for_date",{"value":"Пробег на дату","columns":[new GridColumnDateTime({"field":model.getField("for_date")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:mileage",{"value":"Пробег","columns":[new GridColumn({"field":model.getField("mileage")})]}),new GridCellHead(id+":grid:head:users_ref",{"value":"Сотрудник","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"ctrlEdit":false,"ctrlOptions":{"labelCaption":""}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":10}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(VehicleMileageList_View,ViewAjxList); 
function OperatorForTranspNaklList_View(id,options){options=options||{};options.HEAD_TITLE="Список операторов (официальный)";OperatorForTranspNaklList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.OperatorForTranspNaklList_Model)?options.models.OperatorForTranspNaklList_Model:new OperatorForTranspNaklList_Model();var contr=new OperatorForTranspNakl_Controller();var constants={"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();var self=this;this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["user_id"],"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdSearch":false,"cmdAllCommands":false}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:users_ref",{"value":"Сотрудник","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"ctrlEdit":false,"ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":grid:head:production_sites_ref",{"value":"Завод","columns":[new GridColumnRef({"field":model.getField("production_sites_ref"),"ctrlClass":ProductionSiteEdit,"ctrlEdit":false,"ctrlOptions":{"labelCaption":""}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":10}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(OperatorForTranspNaklList_View,ViewAjxList); 
function UserAllowedMaterialCorrectionList_View(id,options){options=options||{};options.HEAD_TITLE="Список пользователей с разрешенным правом редактирования данных по материалам";UserAllowedMaterialCorrectionList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.UserAllowedMaterialCorrectionList_Model)?options.models.UserAllowedMaterialCorrectionList_Model:new UserAllowedMaterialCorrectionList_Model();var contr=new UserAllowedMaterialCorrection_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["user_id"],"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdSearch":false,"cmdAllCommands":false}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:users_ref",{"value":"Сотрудник","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"ctrlOptions":{"labelCaption":""}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(UserAllowedMaterialCorrectionList_View,ViewAjxList); 
function DOCMaterialMovementList_View(id,options){options.HEAD_TITLE="Перемещение материалов.";DOCMaterialMovementList_View.superclass.constructor.call(this,id,options);const model=(options.models&&options.models.DOCMaterialMovementList_Model)?options.models.DOCMaterialMovementList_Model:new DOCMaterialMovementList_Model();const contr=new DOCMaterialMovement_Controller();const constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);const period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});const filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"material":{"binding":new CommandBinding({"control":new MaterialSelect(id+":filter-ctrl-material",{"contClassName":"form-group-filter"}),"field":new FieldInt("material_id")}),"sign":"e"},"production_base_from":{"binding":new CommandBinding({"control":new ProductionBaseEdit(id+":filter-ctrl-production_base_from",{"contClassName":"form-group-filter"}),"field":new FieldInt("production_base_from")}),"sign":"e"},"production_base_to":{"binding":new CommandBinding({"control":new ProductionBaseEdit(id+":filter-ctrl-production_base_to",{"contClassName":"form-group-filter"}),"field":new FieldInt("production_base_to")}),"sign":"e"}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":true,"cmdEdit":true,"cmdDelete":true,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage,"cmdSearch":true}),"filters":null,"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time"),"dateFormat":"d/m/y H:i"})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:number",{"value":"Номер","columns":[new GridColumn({"field":model.getField("number")})],"sortable":true}),new GridCellHead(id+":grid:head:materials_ref",{"value":"Материал","columns":[new GridColumnRef({"field":model.getField("materials_ref"),"ctrlClass":MaterialSelect,"ctrlOptions":{"labelCaption":"","required":true},"ctrlBindFieldId":"material_id","searchOptions":{"field":new FieldInt("material_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:production_base_from",{"value":"Отправитель","columns":[new GridColumnRef({"field":model.getField("production_bases_from_ref"),"ctrlClass":ProductionBaseEdit,"ctrlOptions":{"labelCaption":"","required":true},"ctrlBindFieldId":"production_base_from_id","searchOptions":{"field":new FieldInt("production_base_from_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:production_base_to",{"value":"Получатель","columns":[new GridColumnRef({"field":model.getField("production_bases_to_ref"),"ctrlClass":ProductionBaseEdit,"ctrlOptions":{"labelCaption":"","required":true},"ctrlBindFieldId":"production_base_to_id","searchOptions":{"field":new FieldInt("production_base_from_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:carriers_ref",{"value":"Перевозчик","columns":[new GridColumnRef({"field":model.getField("carriers_ref"),"ctrlClass":SupplierEdit,"ctrlOptions":{"labelCaption":""},"ctrlBindFieldId":"carrier_id","searchOptions":{"field":new FieldInt("carrier_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:vehicle_plate",{"value":"Номер ТС","columns":[new GridColumn({"field":model.getField("vehicle_plate")})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Кол-во","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant"),"precision":"4"})]}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text")})]}),new GridCellHead(id+":grid:head:users_ref",{"value":"Кто создал","columns":[new GridColumnRef({"field":model.getField("users_ref"),"ctrlClass":UserEditRef,"ctrlEdit":false,"searchOptions":{"field":new FieldInt("user_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:last_modif_users_ref",{"value":"Кто изменил","columns":[new GridColumnRef({"field":model.getField("last_modif_users_ref"),"ctrlClass":UserEditRef,"ctrlEdit":false,"searchOptions":{"field":new FieldInt("last_modif_user_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:last_modif_date_time",{"value":"Дата изменения","columns":[new GridColumnDateTime({"field":model.getField("last_modif_date_time"),"ctrlEdit":false})]})]})]}),"foot":new GridFoot(id+":grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:sp1",{"value":"Итого","colSpan":"7"}),new GridCellFoot(id+":grid:foot:tot_quant",{"attrs":{"align":"right"},"totalFieldId":"total_quant","gridColumn":new GridColumnFloat({"id":"tot_quant","precision":"4"})})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(DOCMaterialMovementList_View,ViewAjxList); 
function ViewList_Form(options){options=options||{};options.formName="ViewList";options.controller="View_Controller";options.method="get_list";ViewList_Form.superclass.constructor.call(this,options);}
extend(ViewList_Form,WindowFormObject); 
function MainMenuConstructor_Form(options){options=options||{};options.formName="MainMenuConstructor";options.controller="MainMenuConstructor_Controller";options.method="get_object";MainMenuConstructor_Form.superclass.constructor.call(this,options);}
extend(MainMenuConstructor_Form,WindowFormObject); 
function User_Form(options){options=options||{};options.formName="UserDialog";options.controller="User_Controller";options.method="get_object";User_Form.superclass.constructor.call(this,options);}
extend(User_Form,WindowFormObject); 
function UserList_Form(options){options=options||{};options.formName="UserList";options.controller="User_Controller";options.method="get_list";UserList_Form.superclass.constructor.call(this,options);}
extend(UserList_Form,WindowFormObject); 
function DriverDialog_Form(options){options=options||{};options.formName="DriverDialog";options.controller="Driver_Controller";options.method="get_object";DriverDialog_Form.superclass.constructor.call(this,options);}
extend(DriverDialog_Form,WindowFormObject); 
function SupplierDialog_Form(options){options=options||{};options.formName="SupplierDialog";options.controller="Supplier_Controller";options.method="get_object";SupplierDialog_Form.superclass.constructor.call(this,options);}
extend(SupplierDialog_Form,WindowFormObject); 
function VehicleDialog_Form(options){options=options||{};options.formName="VehicleDialog";options.controller="Vehicle_Controller";options.method="get_object";VehicleDialog_Form.superclass.constructor.call(this,options);}
extend(VehicleDialog_Form,WindowFormObject); 
function VehicleScheduleDialog_Form(options){options=options||{};options.formName="VehicleScheduleDialog";options.controller="VehicleSchedule_Controller";options.method="get_object";VehicleScheduleDialog_Form.superclass.constructor.call(this,options);}
extend(VehicleScheduleDialog_Form,WindowFormObject); 
function DriverList_Form(options){options=options||{};options.formName="DriverList";options.controller="Driver_Controller";options.method="get_list";DriverList_Form.superclass.constructor.call(this,options);}
extend(DriverList_Form,WindowFormObject); 
function Driver_Form(options){options=options||{};options.formName="DriverDialog";options.controller="Driver_Controller";options.method="get_object";Driver_Form.superclass.constructor.call(this,options);}
extend(Driver_Form,WindowFormObject); 
function OrderDialog_Form(options){options=options||{};options.formName="OrderDialog";options.controller="Order_Controller";options.method="get_object";OrderDialog_Form.superclass.constructor.call(this,options);}
extend(OrderDialog_Form,WindowFormObject); 
function OrderGarbageDialog_Form(options){options=options||{};options.formName="OrderGarbageDialog";options.controller="OrderGarbage_Controller";options.method="get_object";OrderGarbageDialog_Form.superclass.constructor.call(this,options);}
extend(OrderGarbageDialog_Form,WindowFormObject); 
function Client_Form(options){options=options||{};options.formName="ClientDialog";options.controller="Client_Controller";options.method="get_object";Client_Form.superclass.constructor.call(this,options);}
extend(Client_Form,WindowFormObject); 
function ClientList_Form(options){options=options||{};options.formName="ClientList";options.controller="Client_Controller";options.method="get_list";ClientList_Form.superclass.constructor.call(this,options);}
extend(ClientList_Form,WindowFormObject); 
function ClientTelList_Form(options){options=options||{};options.formName="ClientTelList";options.controller="ClientTel_Controller";options.method="get_list";ClientTelList_Form.superclass.constructor.call(this,options);}
extend(ClientTelList_Form,WindowFormObject); 
function DestinationList_Form(options){options=options||{};options.formName="DestinationList";options.controller="Destination_Controller";options.method="get_list";DestinationList_Form.superclass.constructor.call(this,options);}
extend(DestinationList_Form,WindowFormObject); 
function Destination_Form(options){options=options||{};options.formName="DestinationDialog";options.controller="Destination_Controller";options.method="get_object";Destination_Form.superclass.constructor.call(this,options);}
extend(Destination_Form,WindowFormObject); 
function PumpVehicleList_Form(options){options=options||{};options.formName="PumpVehicleList";options.controller="PumpVehicle_Controller";options.method="get_list";PumpVehicleList_Form.superclass.constructor.call(this,options);}
extend(PumpVehicleList_Form,WindowFormObject); 
function PumpVehicle_Form(options){options=options||{};options.formName="PumpVehicleDialog";options.controller="PumpVehicle_Controller";options.method="get_object";PumpVehicle_Form.superclass.constructor.call(this,options);}
extend(PumpVehicle_Form,WindowFormObject); 
function VehicleList_Form(options){options=options||{};options.formName="VehicleList";options.controller="Vehicle_Controller";options.method="get_list";VehicleList_Form.superclass.constructor.call(this,options);}
extend(VehicleList_Form,WindowFormObject); 
function Vehicle_Form(options){options=options||{};options.formName="VehicleDialog";options.controller="Vehicle_Controller";options.method="get_object";Vehicle_Form.superclass.constructor.call(this,options);}
extend(Vehicle_Form,WindowFormObject); 
function VehicleScheduleMakeOrderList_Form(options){options=options||{};options.formName="VehicleScheduleMakeOrderList";options.controller="VehicleSchedule_Controller";options.method="get_current_veh_list";VehicleScheduleMakeOrderList_Form.superclass.constructor.call(this,options);}
extend(VehicleScheduleMakeOrderList_Form,WindowFormObject); 
function SupplierList_Form(options){options=options||{};options.formName="SupplierList";options.controller="Supplier_Controller";options.method="get_list";SupplierList_Form.superclass.constructor.call(this,options);}
extend(SupplierList_Form,WindowFormObject); 
function SMSPatternDialog_Form(options){options=options||{};options.formName="SMSPatternDialog";options.controller="SMSPattern_Controller";options.method="get_object";SMSPatternDialog_Form.superclass.constructor.call(this,options);}
extend(SMSPatternDialog_Form,WindowFormObject); 
function ClientDialog_Form(options){options=options||{};options.formName="ClientDialog";options.controller="Client_Controller";options.method="get_object";ClientDialog_Form.superclass.constructor.call(this,options);}
extend(ClientDialog_Form,WindowFormObject); 
function ShipmentDialog_Form(options){options=options||{};options.formName="ShipmentDialog";options.controller="Shipment_Controller";options.method="get_object";ShipmentDialog_Form.superclass.constructor.call(this,options);}
extend(ShipmentDialog_Form,WindowFormObject); 
function QuarryList_Form(options){options=options||{};options.formName="QuarryList";options.controller="Quarry_Controller";options.method="get_list";QuarryList_Form.superclass.constructor.call(this,options);}
extend(QuarryList_Form,WindowFormObject); 
function VehicleOwnerList_Form(options){options=options||{};options.formName="VehicleOwnerList";options.controller="VehicleOwner_Controller";options.method="get_list";VehicleOwnerList_Form.superclass.constructor.call(this,options);}
extend(VehicleOwnerList_Form,WindowFormObject); 
function OrderList_Form(options){options=options||{};options.formName="OrderList";options.controller="Order_Controller";options.method="get_list";OrderList_Form.superclass.constructor.call(this,options);}
extend(OrderList_Form,WindowFormObject); 
function ShipmentList_Form(options){options=options||{};options.formName="ShipmentList";options.controller="Shipment_Controller";options.method="get_list";ShipmentList_Form.superclass.constructor.call(this,options);}
extend(ShipmentList_Form,WindowFormObject); 
function RawMaterial_Form(options){options=options||{};options.formName="RawMaterialDialog";options.controller="RawMaterial_Controller";options.method="get_object";RawMaterial_Form.superclass.constructor.call(this,options);}
extend(RawMaterial_Form,WindowFormObject); 
function RawMaterialConsRateDateList_Form(options){options=options||{};options.formName="RawMaterialConsRateDateList";options.controller="RawMaterialConsRateDate_Controller";options.method="get_list";RawMaterialConsRateDateList_Form.superclass.constructor.call(this,options);}
extend(RawMaterialConsRateDateList_Form,WindowFormObject); 
function DOCMaterialProcurementDialog_Form(options){options=options||{};options.formName="DOCMaterialProcurementDialog";options.controller="DOCMaterialProcurement_Controller";options.method="get_object";DOCMaterialProcurementDialog_Form.superclass.constructor.call(this,options);}
extend(DOCMaterialProcurementDialog_Form,WindowFormObject); 
function ExcelTemplateDialog_Form(options){options=options||{};options.formName="ExcelTemplateDialog";options.controller="ExcelTemplate_Controller";options.method="get_object";ExcelTemplateDialog_Form.superclass.constructor.call(this,options);}
extend(ExcelTemplateDialog_Form,WindowFormObject); 
function Bank_Form(options){options=options||{};options.formName="Bank";options.method="get_object";options.controller="Bank_Controller";options.keys={"bik":null};options.height=500;options.width=500;Bank_Form.superclass.constructor.call(this,options);}
extend(Bank_Form,WindowFormObject); 
function BankList_Form(options){options=options||{};options.formName="BankList";options.controller="Bank_Controller";options.method="get_list";BankList_Form.superclass.constructor.call(this,options);}
extend(BankList_Form,WindowFormObject); 
function PostList_Form(options){options=options||{};options.formName="PostList";options.controller="Post_Controller";options.method="get_list";PostList_Form.superclass.constructor.call(this,options);}
extend(PostList_Form,WindowFormObject); 
function Post_Form(options){options=options||{};options.formName="PostDialog";options.controller="Post_Controller";options.method="get_object";Post_Form.superclass.constructor.call(this,options);}
extend(Post_Form,WindowFormObject); 
function Contact_Form(options){options=options||{};options.formName="ContactDialog";options.controller="Contact_Controller";options.method="get_object";Contact_Form.superclass.constructor.call(this,options);}
extend(Contact_Form,WindowFormObject); 
function ContactList_Form(options){options=options||{};options.formName="ContactList";options.controller="Contact_Controller";options.method="get_list";ContactList_Form.superclass.constructor.call(this,options);}
extend(ContactList_Form,WindowFormObject); 
function ClientSpecificationList_Form(options){options=options||{};options.formName="ClientSpecificationList";options.controller="ClientSpecification_Controller";options.method="get_list";ClientSpecificationList_Form.superclass.constructor.call(this,options);}
extend(ClientSpecificationList_Form,WindowFormObject); 
function VehicleTotRepItem_Form(options){options=options||{};options.formName="VehicleTotRepItemDialog";options.controller="VehicleTotRepItem_Controller";options.method="get_object";VehicleTotRepItem_Form.superclass.constructor.call(this,options);}
extend(VehicleTotRepItem_Form,WindowFormObject); 
App.prototype.m_serverTemplateIds=["About","ConstantList","BankList","MainMenuConstructorList","ViewList","LoginList","LoginDeviceList","UserList","MailForSendingList","EmailTemplateList","UserMacAddressList","ClientTypeList","EmployeeList","ClientComeFromList","ShipmentTimeNormList","ShipmentPumpList","DriverList","VehicleList","SupplierList","QuarryList","LangList","OrderList","OrderGarbageList","ShipmentForOrderList","OrderPumpList","ClientList","DestinationList","PumpVehicleList","PumpPriceList","ConcreteTypeList","VehicleScheduleList","VehicleScheduleMakeOrderList","RawMaterialList","VehicleStopsReport","VehicleScheduleReportAll","DriverCheatReport","RouteToDestAvgTimeRep","VehicleEfficiency","ProductionSiteList","ProductionSiteForEditList","ProductionBaseList","ShipQuantForCostGradeList","ShipmentTimeList","ShipmentDateList","AstCallList","DOCMaterialProcurementShiftList","DOCMaterialProcurementList","RawMaterialConsRateDateList","RawMaterialConsRateList","SupplierOrderList","RawMaterialProcurUploadList","RAMaterialConsumptionDateList","RAMaterialConsumptionDocList","SMSForSendingList","SMSPatternList","TrackerZoneControlList","AstCallClientCallHistoryList","AstCallClientShipHistoryList","ClientTelList","EmployeeWorkTimeScheduleList","ClientValidDuplicateList","SandQuarryValList","StoneQuarryValList","AstCallManagerReport","LabEntryItemReport","LabEntryItemOnRatePeriodReport","LabEntryAvgReport","ShipmentForDriverCostHeaderList","ShipmentForOwnerCostHeaderList","ConcreteCostHeaderList","ConcreteCostForOwnerHeaderList","VehicleOwnerList","VehicleOwnerConcretePriceList","VehicleOwnerClientList","ShipmentCancelationList","ShipmentForVehOwnerList","ShipmentForClientVehOwnerList","ShipmentForClientList","OrderForClientList","ShipmentPumpForVehOwnerList","CementSiloBalanceResetList","UserOperatorList","VehicleOwnerTotReport","MatTotalList","MatCorrectList","RawMaterialMapToProductionList","ConcreteTypeMapToProductionList","UserMapToProductionList","MaterialFactConsumptionList","MaterialFactConsumptionCorretionList","MaterialFactBalanceCorretionList","MaterialFactConsumptionRolledList","LabEntryList","LabEntryDetailList","CementSiloList","ProductionList","ProductionVehicleCorrectionList","ProductionMaterialList","ELKONLogList","RepMaterialAction","RepMaterialActionByShift","RepMaterialConsToleranceViolation","RawMaterialPriceList","RawMaterialPriceForNormList","GPSTrackerList","StoreMapToProductionSiteList","LabEntryReportList","GornyiCarrierMatchList","RoleViewRestrictionList","ExcelTemplateList","PeriodValueList","TmUserList","TmUserPhotoList","TmOutMessageList","TmInMessageList","PostList","ContactList","RawMaterialTicketList","LabChart1Rep","LabChart2Rep","ClientSpecificationList","VehicleTotRepItemList","VehicleTotRepCommonItemList","VehicleTotRepBalanceList","TaskImportanceLevelList","ProgUpdateList","ProgUpdateDetailList","Firm1cList","ClientDebtList","QualityPassportList","QualityPassport","ShipmentMediaList","ChatStatusList","CementSiloMaterialList","VehicleOwnerTotIncomeAllRep","VehicleMileageList","OperatorForTranspNaklList"];App.prototype.m_templates={"FatalException":"<div class=\"panel panel-flat\"> \n\t <!--      \n\t <div class=\"panel-heading\">\n\t  <h1>Ошибка <strong>{{code}}</strong></h1>\n\t </div>\n\t -->\n\t <div class=\"panel-body\">\n\t      <h3>{{message}}\n\t      </h3>\n\t      <div>Необходима повторная <a href=\"{{baseURL}}\">авторизация</a>.</div>\n\t </div>\n\t</div>\n\t\n\t","DbException":"<div class=\"panel panel-flat\"> \n\t <div class=\"panel-body\">\n\t      <h3>{{message}}\n\t      </h3>\n\t </div>\n\t</div>\n\t\n\t","VersException":"<div class=\"panel panel-flat\"> \n\t <div class=\"panel-body\">\n\t      <h3>Версия программы на сервере была обновлена!\n\t      </h3>\n\t      <h4>Необходимо применить обновление.\n\t      </h4>\n\t      <h4>Вы можете отложить эту операцию для записи несохраненных данных.\n\t      </h4>\n\t      \n\t </div>\n\t <div class=\"panel-footer\">\n\t  <div id=\"versException:reload\">\n\t  </div>\n\t \n\t  <div id=\"versException:postpone\">\n\t  </div>\n\t </div>\n\t</div>\n\t\n\t","GridCmdContainerAjx":"<div id=\"{{id}}\">\n\t {{#this.getCmdInsert()}}\n\t <div id=\"{{id}}:insert\"></div> \n\t {{/this.getCmdInsert()}}\n\t \n\t {{#this.getCmdSearch()}}\n\t <div class=\"btn-group\">\n\t  <div id=\"{{id}}:search:set\"></div>\n\t  <div id=\"{{id}}:search:unset\"></div>\n\t </div>\n\t {{/this.getCmdSearch()}}\n\t \n\t {{#this.getCmdFilter()}}\n\t <div id=\"{{id}}:filter\"></div>\n\t {{/this.getCmdFilter()}}\n\t  \n\t {{#this.getCmdPrintObj()}}\n\t <div id=\"{{id}}:printObj\"></div>\n\t {{/this.getCmdPrintObj()}}\n\t  \n\t {{#this.getCmdAllCommands()}}\n\t <div id=\"{{id}}:allCommands\"></div>\n\t {{/this.getCmdAllCommands()}}\n\t \n\t {{#cmdFilterInfo}}\n\t <div id=\"{{id}}:inf\" class=\"hidden\"></div>\n\t {{/cmdFilterInfo}}\n\t \n\t</div>\n\t","PopOver":"<div id=\"{{id}}\" class=\"popover\" role=\"tooltip\" style=\"position:absolute;display:block;max-width:100%;\">\n\t <div class=\"tooltip-arrow\"></div>\n\t <h3 id=\"{{id}}:title\" class=\"popover-title\"></h3>\n\t <div id=\"{{id}}:content\" class=\"popover-content\"></div>\n\t</div>\n\t","GridCmdFilterView":"<form id=\"{{id}}\" class=\"form-horizontal\">\n\t <div class=\"form-group {{bsCol}}12\">\n\t  <div id=\"{{id}}:set\"></div>\n\t  <div id=\"{{id}}:unset\"></div>\n\t  <div id=\"{{id}}:save\"></div>\n\t  <div id=\"{{id}}:open\"></div>\n\t </div>\n\t</form>\n\t","EditPeriodDate":"<div id=\"{{id}}\" class=\"form-group-filter {{bsCol}}12\">\n\t {{#LABEL}}\n\t <lable id=\"{{id}}:label\" class=\"control-label {{bsCol}}4\">{{LABEL}}\n\t </lable>\n\t {{/LABEL}}\n\t\n\t {{#PERIOD_SELECT}}\n\t <a class=\"{{bsCol}}2\" id=\"{{id}}:periodSelect\"></a> \n\t {{/PERIOD_SELECT}}\n\t  \n\t {{#DOWN}}\n\t <div class=\"btn-group {{bsCol}}2\">\n\t  {{#DOWN_FAST}}\n\t  <div id=\"{{id}}:downFast\" title=\"{{CONTR_DOWN_FAST_TITLE}}\"></div>\n\t  {{/DOWN_FAST}}\n\t  <div id=\"{{id}}:down\" title=\"{{CONTR_DOWN_TITLE}}\"></div>\n\t </div>\n\t {{/DOWN}}\n\t \n\t <div id=\"{{id}}:d-cont\" class=\"{{bsCol}}6\" style=\"padding-right:0px;padding-left:0px;\">\n\t  <div id=\"{{id}}:from\" class=\"{{bsCol}}6\" style=\"padding:0px 20px 0px 0px;\"></div>\n\t  <!--<span class=\"{{bsCol}}1\" style=\"padding-left:0px;padding-right:0px\">-</span>-->\n\t  <div id=\"{{id}}:to\" class=\"{{bsCol}}6\" style=\"padding:0px 0px;margin:0px 0px;\"></div> \n\t </div>\n\t \n\t {{#UP}}\n\t <div class=\"btn-group {{bsCol}}2\">   \n\t  <div id=\"{{id}}:up\" title=\"{{CONTR_UP_TITLE}}\"></div>\n\t  {{#UP_FAST}}\n\t  <div id=\"{{id}}:upFast\" title=\"{{CONTR_UP_FAST_TITLE}}\"></div>\n\t  {{/UP_FAST}}\n\t </div>\n\t {{/UP}}\n\t</div>\n\t","WindowPrint":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n\t<html>\n\t <head>\n\t  <meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\">\n\t  <link rel=\"stylesheet\" href=\"js20/custom-css/print.css?'+{{scriptId}}+'\" type=\"text/css\" media=\"all\">\n\t  <title>{{title}}</title>\n\t </head>\n\t <body>{{content}}</body>\n\t</html>\n\t\n\t","VariantStorageSaveView":"<div id=\"{{id}}\">\n\t <div id=\"{{id}}:variants\"></div>\n\t <div id=\"{{id}}:name\"></div>\n\t <div id=\"{{id}}:default_variant\"></div>\n\t <div id=\"{{id}}:cmdSave\"></div>\n\t <div id=\"{{id}}:cmdCancel\"></div>\n\t</div>\n\t","VariantStorageOpenView":"<div id=\"{{id}}\">\n\t <div id=\"{{id}}:variants\"></div>\n\t <div id=\"{{id}}:cmdOpen\"></div>\n\t <div id=\"{{id}}:cmdCancel\"></div>\n\t</div>\n\t","Captcha":"<div id=\"{{id}}\">\n\t <div class=\"text-center\">\n\t  <button id=\"{{id}}:refresh\" glyph=\"glyphicon-refresh\" title=\"Обновить\">\n\t  </button>\n\t  \n\t  <img id=\"{{id}}:img\">\n\t  </img>\n\t </div>\n\t <div class=\"form-group has-feedback has-feedback-left\">\n\t  <input id=\"{{id}}:key\" type=\"text\" class=\"form-control\" style=\"width:100%;\" placeholder=\"Код с картинки\" title=\"Введите код с картинки\"></input>\n\t  <div class=\"form-control-feedback\"><i class=\"icon-alert text-muted\"></i></div> \n\t  <span class=\"help-block text-danger hidden\" id=\"{{id}}:error\" name=\"error\">\n\t   <i class=\"icon-cancel-circle2 position-left\"></i>\n\t  </span>  \n\t </div>\n\t</div>\n\t","ErrorControl":"<span class=\"help-block text-danger\">\n\t <i class=\"icon-cancel-circle2 position-left\">\n\t </i>\n\t</span>\n\t","MailAttachment":"<li id=\"{{id}}\" {{#file_uploaded}}uploaded=\"true\"{{/file_uploaded}} file_id=\"{{file_id}}\" file_name=\"{{file_name}}\">\n\t {{#file_uploaded}}\n\t <i class=\"glyphicon glyphicon-ok\" title=\"Файл загружен на сервер\"></i> \n\t {{/file_uploaded}}\n\t {{#file_not_uploaded}}\n\t <i class=\"file-pic glyphicon glyphicon-cloud-upload\" title=\"Необходимо загрузить файл!\"></i>\n\t {{/file_not_uploaded}}\n\t \n\t {{#file_signed}}\n\t <a id=\"{{id}}_href_sig\" href=\"#\">\n\t  <i class=\"icon-file-locked\" title=\"Файл подписан ЭЦП\"></i> \n\t </a>\n\t {{/file_signed}}\n\t {{#file_not_signed}}\n\t <a id=\"{{id}}_href_sig\" href=\"#\">\n\t  <i class=\"icon-file-minus\" title=\"Необходимо загрузить файл ЭЦП\"></i> \n\t </a> \n\t {{/file_not_signed}}\n\t \n\t <a id=\"{{id}}_href\" href=\"#\" title=\"Скачать файл\">\n\t  {{file_name}}({{file_size_formatted}})\n\t </a>\n\t {{#isNotSent}}<div id=\"{{id}}_del\" class=\"btn btn-sm fileDeleteBtn\" title=\"Удалить файл\"></div>{{/isNotSent}}\n\t</li>\n\t\n\t","IcomoonList":"<div class=\"row glyphs\">\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home\"></i> icon-home</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home2\"></i> icon-home2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home5\"></i> icon-home5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home7\"></i> icon-home7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home8\"></i> icon-home8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home9\"></i> icon-home9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-office\"></i> icon-office</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-city\"></i> icon-city</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-newspaper\"></i> icon-newspaper</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-magazine\"></i> icon-magazine</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-design\"></i> icon-design</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil\"></i> icon-pencil</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil3\"></i> icon-pencil3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil4\"></i> icon-pencil4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil5\"></i> icon-pencil5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil6\"></i> icon-pencil6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil7\"></i> icon-pencil7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eraser\"></i> icon-eraser</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eraser2\"></i> icon-eraser2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eraser3\"></i> icon-eraser3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quill2\"></i> icon-quill2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quill4\"></i> icon-quill4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pen\"></i> icon-pen</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pen-plus\"></i> icon-pen-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pen-minus\"></i> icon-pen-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pen2\"></i> icon-pen2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-blog\"></i> icon-blog</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pen6\"></i> icon-pen6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-brush\"></i> icon-brush</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spray\"></i> icon-spray</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-color-sampler\"></i> icon-color-sampler</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-toggle\"></i> icon-toggle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bucket\"></i> icon-bucket</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-gradient\"></i> icon-gradient</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eyedropper\"></i> icon-eyedropper</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eyedropper2\"></i> icon-eyedropper2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eyedropper3\"></i> icon-eyedropper3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-droplet\"></i> icon-droplet</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-droplet2\"></i> icon-droplet2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-color-clear\"></i> icon-color-clear</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paint-format\"></i> icon-paint-format</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stamp\"></i> icon-stamp</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-image2\"></i> icon-image2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-image-compare\"></i> icon-image-compare</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-images2\"></i> icon-images2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-image3\"></i> icon-image3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-images3\"></i> icon-images3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-image4\"></i> icon-image4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-image5\"></i> icon-image5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-camera\"></i> icon-camera</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shutter\"></i> icon-shutter</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-headphones\"></i> icon-headphones</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-headset\"></i> icon-headset</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-music\"></i> icon-music</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-album\"></i> icon-album</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tape\"></i> icon-tape</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-piano\"></i> icon-piano</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-speakers\"></i> icon-speakers</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-play\"></i> icon-play</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clapboard-play\"></i> icon-clapboard-play</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clapboard\"></i> icon-clapboard</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-media\"></i> icon-media</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-presentation\"></i> icon-presentation</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-movie\"></i> icon-movie</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-film\"></i> icon-film</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-film2\"></i> icon-film2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-film3\"></i> icon-film3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-film4\"></i> icon-film4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-video-camera\"></i> icon-video-camera</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-video-camera2\"></i> icon-video-camera2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-video-camera-slash\"></i> icon-video-camera-slash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-video-camera3\"></i> icon-video-camera3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dice\"></i> icon-dice</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chess-king\"></i> icon-chess-king</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chess-queen\"></i> icon-chess-queen</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chess\"></i> icon-chess</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-megaphone\"></i> icon-megaphone</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-new\"></i> icon-new</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-connection\"></i> icon-connection</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-station\"></i> icon-station</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-satellite-dish2\"></i> icon-satellite-dish2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-feed\"></i> icon-feed</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mic2\"></i> icon-mic2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mic-off2\"></i> icon-mic-off2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-book\"></i> icon-book</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-book2\"></i> icon-book2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-book-play\"></i> icon-book-play</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-book3\"></i> icon-book3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bookmark\"></i> icon-bookmark</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-books\"></i> icon-books</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-archive\"></i> icon-archive</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reading\"></i> icon-reading</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-library2\"></i> icon-library2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-graduation2\"></i> icon-graduation2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-text\"></i> icon-file-text</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-profile\"></i> icon-profile</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-empty\"></i> icon-file-empty</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-empty2\"></i> icon-file-empty2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-files-empty\"></i> icon-files-empty</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-files-empty2\"></i> icon-files-empty2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-plus\"></i> icon-file-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-plus2\"></i> icon-file-plus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-minus\"></i> icon-file-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-minus2\"></i> icon-file-minus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-download\"></i> icon-file-download</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-download2\"></i> icon-file-download2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-upload\"></i> icon-file-upload</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-upload2\"></i> icon-file-upload2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-check\"></i> icon-file-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-check2\"></i> icon-file-check2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-eye\"></i> icon-file-eye</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-eye2\"></i> icon-file-eye2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-text2\"></i> icon-file-text2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-text3\"></i> icon-file-text3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-picture\"></i> icon-file-picture</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-picture2\"></i> icon-file-picture2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-music\"></i> icon-file-music</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-music2\"></i> icon-file-music2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-play\"></i> icon-file-play</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-play2\"></i> icon-file-play2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-video\"></i> icon-file-video</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-video2\"></i> icon-file-video2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-copy\"></i> icon-copy</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-copy2\"></i> icon-copy2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-zip\"></i> icon-file-zip</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-zip2\"></i> icon-file-zip2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-xml\"></i> icon-file-xml</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-xml2\"></i> icon-file-xml2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-css\"></i> icon-file-css</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-css2\"></i> icon-file-css2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-presentation\"></i> icon-file-presentation</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-presentation2\"></i> icon-file-presentation2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-stats\"></i> icon-file-stats</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-stats2\"></i> icon-file-stats2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-locked\"></i> icon-file-locked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-locked2\"></i> icon-file-locked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-spreadsheet\"></i> icon-file-spreadsheet</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-spreadsheet2\"></i> icon-file-spreadsheet2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-copy3\"></i> icon-copy3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-copy4\"></i> icon-copy4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paste\"></i> icon-paste</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paste2\"></i> icon-paste2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paste3\"></i> icon-paste3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paste4\"></i> icon-paste4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack\"></i> icon-stack</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack2\"></i> icon-stack2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack3\"></i> icon-stack3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder\"></i> icon-folder</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-search\"></i> icon-folder-search</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-download\"></i> icon-folder-download</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-upload\"></i> icon-folder-upload</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-plus\"></i> icon-folder-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-plus2\"></i> icon-folder-plus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-minus\"></i> icon-folder-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-minus2\"></i> icon-folder-minus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-check\"></i> icon-folder-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-heart\"></i> icon-folder-heart</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-remove\"></i> icon-folder-remove</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder2\"></i> icon-folder2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-open\"></i> icon-folder-open</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder3\"></i> icon-folder3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder4\"></i> icon-folder4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-plus3\"></i> icon-folder-plus3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-minus3\"></i> icon-folder-minus3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-plus4\"></i> icon-folder-plus4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-minus4\"></i> icon-folder-minus4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-download2\"></i> icon-folder-download2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-upload2\"></i> icon-folder-upload2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-download3\"></i> icon-folder-download3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-upload3\"></i> icon-folder-upload3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder5\"></i> icon-folder5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-open2\"></i> icon-folder-open2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder6\"></i> icon-folder6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-open3\"></i> icon-folder-open3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-certificate\"></i> icon-certificate</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cc\"></i> icon-cc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-price-tag\"></i> icon-price-tag</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-price-tag2\"></i> icon-price-tag2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-price-tags\"></i> icon-price-tags</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-price-tag3\"></i> icon-price-tag3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-price-tags2\"></i> icon-price-tags2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-barcode2\"></i> icon-barcode2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-qrcode\"></i> icon-qrcode</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ticket\"></i> icon-ticket</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-theater\"></i> icon-theater</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-store\"></i> icon-store</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-store2\"></i> icon-store2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart\"></i> icon-cart</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart2\"></i> icon-cart2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart4\"></i> icon-cart4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart5\"></i> icon-cart5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart-add\"></i> icon-cart-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart-add2\"></i> icon-cart-add2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart-remove\"></i> icon-cart-remove</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-basket\"></i> icon-basket</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bag\"></i> icon-bag</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-percent\"></i> icon-percent</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coins\"></i> icon-coins</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coin-dollar\"></i> icon-coin-dollar</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coin-euro\"></i> icon-coin-euro</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coin-pound\"></i> icon-coin-pound</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coin-yen\"></i> icon-coin-yen</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-piggy-bank\"></i> icon-piggy-bank</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wallet\"></i> icon-wallet</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cash\"></i> icon-cash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cash2\"></i> icon-cash2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cash3\"></i> icon-cash3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cash4\"></i> icon-cash4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-credit-card\"></i> icon-credit-card</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-credit-card2\"></i> icon-credit-card2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calculator4\"></i> icon-calculator4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calculator2\"></i> icon-calculator2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calculator3\"></i> icon-calculator3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chip\"></i> icon-chip</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lifebuoy\"></i> icon-lifebuoy</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone\"></i> icon-phone</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone2\"></i> icon-phone2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-slash\"></i> icon-phone-slash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-wave\"></i> icon-phone-wave</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-plus\"></i> icon-phone-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-minus\"></i> icon-phone-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-plus2\"></i> icon-phone-plus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-minus2\"></i> icon-phone-minus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-incoming\"></i> icon-phone-incoming</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-outgoing\"></i> icon-phone-outgoing</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-hang-up\"></i> icon-phone-hang-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-address-book\"></i> icon-address-book</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-address-book2\"></i> icon-address-book2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-address-book3\"></i> icon-address-book3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-notebook\"></i> icon-notebook</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelop\"></i> icon-envelop</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelop2\"></i> icon-envelop2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelop3\"></i> icon-envelop3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelop4\"></i> icon-envelop4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelop5\"></i> icon-envelop5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mailbox\"></i> icon-mailbox</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pushpin\"></i> icon-pushpin</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-location3\"></i> icon-location3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-location4\"></i> icon-location4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-compass4\"></i> icon-compass4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-map\"></i> icon-map</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-map4\"></i> icon-map4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-map5\"></i> icon-map5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-direction\"></i> icon-direction</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reset\"></i> icon-reset</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-history\"></i> icon-history</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-watch\"></i> icon-watch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-watch2\"></i> icon-watch2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alarm\"></i> icon-alarm</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alarm-add\"></i> icon-alarm-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alarm-check\"></i> icon-alarm-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alarm-cancel\"></i> icon-alarm-cancel</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell2\"></i> icon-bell2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell3\"></i> icon-bell3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell-plus\"></i> icon-bell-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell-minus\"></i> icon-bell-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell-check\"></i> icon-bell-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell-cross\"></i> icon-bell-cross</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar\"></i> icon-calendar</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar2\"></i> icon-calendar2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar3\"></i> icon-calendar3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar52\"></i> icon-calendar52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-printer\"></i> icon-printer</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-printer2\"></i> icon-printer2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-printer4\"></i> icon-printer4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shredder\"></i> icon-shredder</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mouse\"></i> icon-mouse</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mouse-left\"></i> icon-mouse-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mouse-right\"></i> icon-mouse-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-keyboard\"></i> icon-keyboard</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-typewriter\"></i> icon-typewriter</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-display\"></i> icon-display</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-display4\"></i> icon-display4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-laptop\"></i> icon-laptop</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mobile\"></i> icon-mobile</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mobile2\"></i> icon-mobile2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tablet\"></i> icon-tablet</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mobile3\"></i> icon-mobile3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tv\"></i> icon-tv</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-radio\"></i> icon-radio</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cabinet\"></i> icon-cabinet</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drawer\"></i> icon-drawer</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drawer2\"></i> icon-drawer2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drawer-out\"></i> icon-drawer-out</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drawer-in\"></i> icon-drawer-in</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drawer3\"></i> icon-drawer3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-box\"></i> icon-box</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-box-add\"></i> icon-box-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-box-remove\"></i> icon-box-remove</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-download\"></i> icon-download</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-upload\"></i> icon-upload</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-floppy-disk\"></i> icon-floppy-disk</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-floppy-disks\"></i> icon-floppy-disks</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-usb-stick\"></i> icon-usb-stick</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drive\"></i> icon-drive</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-server\"></i> icon-server</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database\"></i> icon-database</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database2\"></i> icon-database2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database4\"></i> icon-database4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-menu\"></i> icon-database-menu</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-add\"></i> icon-database-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-remove\"></i> icon-database-remove</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-insert\"></i> icon-database-insert</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-export\"></i> icon-database-export</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-upload\"></i> icon-database-upload</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-refresh\"></i> icon-database-refresh</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-diff\"></i> icon-database-diff</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-edit2\"></i> icon-database-edit2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-check\"></i> icon-database-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-arrow\"></i> icon-database-arrow</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-time2\"></i> icon-database-time2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-undo\"></i> icon-undo</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-redo\"></i> icon-redo</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-ccw\"></i> icon-rotate-ccw</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-cw\"></i> icon-rotate-cw</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-ccw2\"></i> icon-rotate-ccw2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-cw2\"></i> icon-rotate-cw2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-ccw3\"></i> icon-rotate-ccw3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-cw3\"></i> icon-rotate-cw3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flip-vertical2\"></i> icon-flip-vertical2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flip-horizontal2\"></i> icon-flip-horizontal2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flip-vertical3\"></i> icon-flip-vertical3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flip-vertical4\"></i> icon-flip-vertical4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-angle\"></i> icon-angle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shear\"></i> icon-shear</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-left\"></i> icon-align-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-center-horizontal\"></i> icon-align-center-horizontal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-right\"></i> icon-align-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-top\"></i> icon-align-top</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-center-vertical\"></i> icon-align-center-vertical</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-bottom\"></i> icon-align-bottom</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-undo2\"></i> icon-undo2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-redo2\"></i> icon-redo2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-forward\"></i> icon-forward</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reply\"></i> icon-reply</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reply-all\"></i> icon-reply-all</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble\"></i> icon-bubble</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles\"></i> icon-bubbles</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles2\"></i> icon-bubbles2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble2\"></i> icon-bubble2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles3\"></i> icon-bubbles3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles4\"></i> icon-bubbles4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble-notification\"></i> icon-bubble-notification</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles5\"></i> icon-bubbles5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles6\"></i> icon-bubbles6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble6\"></i> icon-bubble6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles7\"></i> icon-bubbles7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble7\"></i> icon-bubble7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles8\"></i> icon-bubbles8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble8\"></i> icon-bubble8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble-dots3\"></i> icon-bubble-dots3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble-lines3\"></i> icon-bubble-lines3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble9\"></i> icon-bubble9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble-dots4\"></i> icon-bubble-dots4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble-lines4\"></i> icon-bubble-lines4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles9\"></i> icon-bubbles9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles10\"></i> icon-bubbles10</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user\"></i> icon-user</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-users\"></i> icon-users</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-plus\"></i> icon-user-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-minus\"></i> icon-user-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-cancel\"></i> icon-user-cancel</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-block\"></i> icon-user-block</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-lock\"></i> icon-user-lock</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-check\"></i> icon-user-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-users2\"></i> icon-users2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-users4\"></i> icon-users4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-tie\"></i> icon-user-tie</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-collaboration\"></i> icon-collaboration</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-vcard\"></i> icon-vcard</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hat\"></i> icon-hat</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bowtie\"></i> icon-bowtie</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quotes-left\"></i> icon-quotes-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quotes-right\"></i> icon-quotes-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quotes-left2\"></i> icon-quotes-left2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quotes-right2\"></i> icon-quotes-right2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hour-glass\"></i> icon-hour-glass</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hour-glass2\"></i> icon-hour-glass2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hour-glass3\"></i> icon-hour-glass3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner\"></i> icon-spinner</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner2\"></i> icon-spinner2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner3\"></i> icon-spinner3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner4\"></i> icon-spinner4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner6\"></i> icon-spinner6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner9\"></i> icon-spinner9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner10\"></i> icon-spinner10</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner11\"></i> icon-spinner11</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-microscope\"></i> icon-microscope</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enlarge\"></i> icon-enlarge</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shrink\"></i> icon-shrink</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enlarge3\"></i> icon-enlarge3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shrink3\"></i> icon-shrink3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enlarge5\"></i> icon-enlarge5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shrink5\"></i> icon-shrink5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enlarge6\"></i> icon-enlarge6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shrink6\"></i> icon-shrink6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enlarge7\"></i> icon-enlarge7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shrink7\"></i> icon-shrink7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-key\"></i> icon-key</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lock\"></i> icon-lock</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lock2\"></i> icon-lock2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lock4\"></i> icon-lock4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unlocked\"></i> icon-unlocked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lock5\"></i> icon-lock5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unlocked2\"></i> icon-unlocked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-safe\"></i> icon-safe</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wrench\"></i> icon-wrench</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wrench2\"></i> icon-wrench2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wrench3\"></i> icon-wrench3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-equalizer\"></i> icon-equalizer</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-equalizer2\"></i> icon-equalizer2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-equalizer3\"></i> icon-equalizer3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-equalizer4\"></i> icon-equalizer4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog\"></i> icon-cog</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cogs\"></i> icon-cogs</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog2\"></i> icon-cog2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog3\"></i> icon-cog3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog4\"></i> icon-cog4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog52\"></i> icon-cog52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog6\"></i> icon-cog6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog7\"></i> icon-cog7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hammer\"></i> icon-hammer</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hammer-wrench\"></i> icon-hammer-wrench</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-magic-wand\"></i> icon-magic-wand</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-magic-wand2\"></i> icon-magic-wand2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pulse2\"></i> icon-pulse2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-aid-kit\"></i> icon-aid-kit</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bug2\"></i> icon-bug2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-construction\"></i> icon-construction</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-traffic-cone\"></i> icon-traffic-cone</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-traffic-lights\"></i> icon-traffic-lights</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart\"></i> icon-pie-chart</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart2\"></i> icon-pie-chart2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart3\"></i> icon-pie-chart3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart4\"></i> icon-pie-chart4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart5\"></i> icon-pie-chart5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart6\"></i> icon-pie-chart6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart7\"></i> icon-pie-chart7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-dots\"></i> icon-stats-dots</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-bars\"></i> icon-stats-bars</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart8\"></i> icon-pie-chart8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-bars2\"></i> icon-stats-bars2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-bars3\"></i> icon-stats-bars3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-bars4\"></i> icon-stats-bars4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chart\"></i> icon-chart</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-growth\"></i> icon-stats-growth</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-decline\"></i> icon-stats-decline</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-growth2\"></i> icon-stats-growth2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-decline2\"></i> icon-stats-decline2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stairs-up\"></i> icon-stairs-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stairs-down\"></i> icon-stairs-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stairs\"></i> icon-stairs</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ladder\"></i> icon-ladder</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rating\"></i> icon-rating</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rating2\"></i> icon-rating2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rating3\"></i> icon-rating3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-podium\"></i> icon-podium</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stars\"></i> icon-stars</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal-star\"></i> icon-medal-star</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal\"></i> icon-medal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal2\"></i> icon-medal2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal-first\"></i> icon-medal-first</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal-second\"></i> icon-medal-second</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal-third\"></i> icon-medal-third</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-crown\"></i> icon-crown</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-trophy2\"></i> icon-trophy2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-trophy3\"></i> icon-trophy3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diamond\"></i> icon-diamond</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-trophy4\"></i> icon-trophy4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-gift\"></i> icon-gift</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pipe\"></i> icon-pipe</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mustache\"></i> icon-mustache</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cup2\"></i> icon-cup2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coffee\"></i> icon-coffee</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paw\"></i> icon-paw</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-footprint\"></i> icon-footprint</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rocket\"></i> icon-rocket</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-meter2\"></i> icon-meter2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-meter-slow\"></i> icon-meter-slow</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-meter-fast\"></i> icon-meter-fast</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hammer2\"></i> icon-hammer2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-balance\"></i> icon-balance</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-fire\"></i> icon-fire</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-fire2\"></i> icon-fire2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lab\"></i> icon-lab</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-atom\"></i> icon-atom</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-atom2\"></i> icon-atom2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bin\"></i> icon-bin</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bin2\"></i> icon-bin2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-briefcase\"></i> icon-briefcase</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-briefcase3\"></i> icon-briefcase3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-airplane2\"></i> icon-airplane2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-airplane3\"></i> icon-airplane3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-airplane4\"></i> icon-airplane4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paperplane\"></i> icon-paperplane</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-car\"></i> icon-car</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-steering-wheel\"></i> icon-steering-wheel</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-car2\"></i> icon-car2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-gas\"></i> icon-gas</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bus\"></i> icon-bus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-truck\"></i> icon-truck</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bike\"></i> icon-bike</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-road\"></i> icon-road</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-train\"></i> icon-train</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-train2\"></i> icon-train2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ship\"></i> icon-ship</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-boat\"></i> icon-boat</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chopper\"></i> icon-chopper</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cube\"></i> icon-cube</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cube2\"></i> icon-cube2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cube3\"></i> icon-cube3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cube4\"></i> icon-cube4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pyramid\"></i> icon-pyramid</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pyramid2\"></i> icon-pyramid2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-package\"></i> icon-package</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-puzzle\"></i> icon-puzzle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-puzzle2\"></i> icon-puzzle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-puzzle3\"></i> icon-puzzle3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-puzzle4\"></i> icon-puzzle4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-glasses-3d2\"></i> icon-glasses-3d2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-brain\"></i> icon-brain</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-accessibility\"></i> icon-accessibility</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-accessibility2\"></i> icon-accessibility2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-strategy\"></i> icon-strategy</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-target\"></i> icon-target</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-target2\"></i> icon-target2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shield-check\"></i> icon-shield-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shield-notice\"></i> icon-shield-notice</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shield2\"></i> icon-shield2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-racing\"></i> icon-racing</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-finish\"></i> icon-finish</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-power2\"></i> icon-power2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-power3\"></i> icon-power3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-switch\"></i> icon-switch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-switch22\"></i> icon-switch22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-power-cord\"></i> icon-power-cord</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard\"></i> icon-clipboard</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard2\"></i> icon-clipboard2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard3\"></i> icon-clipboard3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard4\"></i> icon-clipboard4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard5\"></i> icon-clipboard5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard6\"></i> icon-clipboard6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-playlist\"></i> icon-playlist</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-playlist-add\"></i> icon-playlist-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list-numbered\"></i> icon-list-numbered</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list\"></i> icon-list</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list2\"></i> icon-list2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-more\"></i> icon-more</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-more2\"></i> icon-more2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid\"></i> icon-grid</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid2\"></i> icon-grid2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid3\"></i> icon-grid3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid4\"></i> icon-grid4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid52\"></i> icon-grid52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid6\"></i> icon-grid6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid7\"></i> icon-grid7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tree5\"></i> icon-tree5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tree6\"></i> icon-tree6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tree7\"></i> icon-tree7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lan\"></i> icon-lan</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lan2\"></i> icon-lan2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lan3\"></i> icon-lan3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu\"></i> icon-menu</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-small\"></i> icon-circle-small</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu2\"></i> icon-menu2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu3\"></i> icon-menu3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu4\"></i> icon-menu4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu5\"></i> icon-menu5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu62\"></i> icon-menu62</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu7\"></i> icon-menu7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu8\"></i> icon-menu8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu9\"></i> icon-menu9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu10\"></i> icon-menu10</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud\"></i> icon-cloud</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-download\"></i> icon-cloud-download</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-upload\"></i> icon-cloud-upload</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-check\"></i> icon-cloud-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud2\"></i> icon-cloud2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-download2\"></i> icon-cloud-download2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-upload2\"></i> icon-cloud-upload2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-check2\"></i> icon-cloud-check2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-import\"></i> icon-import</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-download4\"></i> icon-download4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-upload4\"></i> icon-upload4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-download7\"></i> icon-download7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-upload7\"></i> icon-upload7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-download10\"></i> icon-download10</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-upload10\"></i> icon-upload10</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sphere\"></i> icon-sphere</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sphere3\"></i> icon-sphere3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-earth\"></i> icon-earth</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-link\"></i> icon-link</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unlink\"></i> icon-unlink</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-link2\"></i> icon-link2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unlink2\"></i> icon-unlink2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-anchor\"></i> icon-anchor</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flag3\"></i> icon-flag3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flag4\"></i> icon-flag4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flag7\"></i> icon-flag7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flag8\"></i> icon-flag8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-attachment\"></i> icon-attachment</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-attachment2\"></i> icon-attachment2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye\"></i> icon-eye</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye-plus\"></i> icon-eye-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye-minus\"></i> icon-eye-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye-blocked\"></i> icon-eye-blocked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye2\"></i> icon-eye2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye-blocked2\"></i> icon-eye-blocked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye4\"></i> icon-eye4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bookmark2\"></i> icon-bookmark2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bookmark3\"></i> icon-bookmark3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bookmarks\"></i> icon-bookmarks</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bookmark4\"></i> icon-bookmark4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spotlight2\"></i> icon-spotlight2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-starburst\"></i> icon-starburst</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-snowflake\"></i> icon-snowflake</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-weather-windy\"></i> icon-weather-windy</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-fan\"></i> icon-fan</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-umbrella\"></i> icon-umbrella</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sun3\"></i> icon-sun3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-contrast\"></i> icon-contrast</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bed2\"></i> icon-bed2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-furniture\"></i> icon-furniture</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chair\"></i> icon-chair</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-star-empty3\"></i> icon-star-empty3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-star-half\"></i> icon-star-half</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-star-full2\"></i> icon-star-full2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-heart5\"></i> icon-heart5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-heart6\"></i> icon-heart6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-heart-broken2\"></i> icon-heart-broken2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-thumbs-up2\"></i> icon-thumbs-up2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-thumbs-down2\"></i> icon-thumbs-down2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-thumbs-up3\"></i> icon-thumbs-up3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-thumbs-down3\"></i> icon-thumbs-down3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-height\"></i> icon-height</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-man\"></i> icon-man</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-woman\"></i> icon-woman</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-man-woman\"></i> icon-man-woman</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-yin-yang\"></i> icon-yin-yang</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cursor\"></i> icon-cursor</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cursor2\"></i> icon-cursor2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lasso2\"></i> icon-lasso2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-select2\"></i> icon-select2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-point-up\"></i> icon-point-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-point-right\"></i> icon-point-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-point-down\"></i> icon-point-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-point-left\"></i> icon-point-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pointer\"></i> icon-pointer</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reminder\"></i> icon-reminder</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drag-left-right\"></i> icon-drag-left-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drag-left\"></i> icon-drag-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drag-right\"></i> icon-drag-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-touch\"></i> icon-touch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-multitouch\"></i> icon-multitouch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-touch-zoom\"></i> icon-touch-zoom</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-touch-pinch\"></i> icon-touch-pinch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hand\"></i> icon-hand</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grab\"></i> icon-grab</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-empty\"></i> icon-stack-empty</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-plus\"></i> icon-stack-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-minus\"></i> icon-stack-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-star\"></i> icon-stack-star</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-picture\"></i> icon-stack-picture</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-down\"></i> icon-stack-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-up\"></i> icon-stack-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-cancel\"></i> icon-stack-cancel</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-check\"></i> icon-stack-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-text\"></i> icon-stack-text</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack4\"></i> icon-stack4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-music\"></i> icon-stack-music</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-play\"></i> icon-stack-play</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move\"></i> icon-move</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dots\"></i> icon-dots</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-warning\"></i> icon-warning</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-warning22\"></i> icon-warning22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-notification2\"></i> icon-notification2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-question3\"></i> icon-question3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-question4\"></i> icon-question4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-plus3\"></i> icon-plus3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-minus3\"></i> icon-minus3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-plus-circle2\"></i> icon-plus-circle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-minus-circle2\"></i> icon-minus-circle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cancel-circle2\"></i> icon-cancel-circle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-blocked\"></i> icon-blocked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cancel-square\"></i> icon-cancel-square</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cancel-square2\"></i> icon-cancel-square2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spam\"></i> icon-spam</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cross2\"></i> icon-cross2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cross3\"></i> icon-cross3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark\"></i> icon-checkmark</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark3\"></i> icon-checkmark3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark2\"></i> icon-checkmark2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark4\"></i> icon-checkmark4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spell-check\"></i> icon-spell-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spell-check2\"></i> icon-spell-check2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enter\"></i> icon-enter</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-exit\"></i> icon-exit</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enter2\"></i> icon-enter2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-exit2\"></i> icon-exit2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enter3\"></i> icon-enter3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-exit3\"></i> icon-exit3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wall\"></i> icon-wall</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-fence\"></i> icon-fence</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-play3\"></i> icon-play3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pause\"></i> icon-pause</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stop\"></i> icon-stop</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-previous\"></i> icon-previous</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-next\"></i> icon-next</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-backward\"></i> icon-backward</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-forward2\"></i> icon-forward2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-play4\"></i> icon-play4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pause2\"></i> icon-pause2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stop2\"></i> icon-stop2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-backward2\"></i> icon-backward2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-forward3\"></i> icon-forward3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-first\"></i> icon-first</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-last\"></i> icon-last</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-previous2\"></i> icon-previous2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-next2\"></i> icon-next2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eject\"></i> icon-eject</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-high\"></i> icon-volume-high</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-medium\"></i> icon-volume-medium</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-low\"></i> icon-volume-low</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-mute\"></i> icon-volume-mute</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-speaker-left\"></i> icon-speaker-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-speaker-right\"></i> icon-speaker-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-mute2\"></i> icon-volume-mute2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-increase\"></i> icon-volume-increase</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-decrease\"></i> icon-volume-decrease</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-mute5\"></i> icon-volume-mute5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-loop\"></i> icon-loop</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-loop3\"></i> icon-loop3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-infinite-square\"></i> icon-infinite-square</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-infinite\"></i> icon-infinite</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-loop4\"></i> icon-loop4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shuffle\"></i> icon-shuffle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wave\"></i> icon-wave</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wave2\"></i> icon-wave2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-split\"></i> icon-split</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-merge\"></i> icon-merge</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up5\"></i> icon-arrow-up5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right5\"></i> icon-arrow-right5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down5\"></i> icon-arrow-down5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left5\"></i> icon-arrow-left5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-left2\"></i> icon-arrow-up-left2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up7\"></i> icon-arrow-up7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-right2\"></i> icon-arrow-up-right2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right7\"></i> icon-arrow-right7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-right2\"></i> icon-arrow-down-right2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down7\"></i> icon-arrow-down7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-left2\"></i> icon-arrow-down-left2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left7\"></i> icon-arrow-left7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-left3\"></i> icon-arrow-up-left3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up8\"></i> icon-arrow-up8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-right3\"></i> icon-arrow-up-right3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right8\"></i> icon-arrow-right8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-right3\"></i> icon-arrow-down-right3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down8\"></i> icon-arrow-down8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-left3\"></i> icon-arrow-down-left3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left8\"></i> icon-arrow-left8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-up2\"></i> icon-circle-up2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-right2\"></i> icon-circle-right2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-down2\"></i> icon-circle-down2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-left2\"></i> icon-circle-left2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-resize7\"></i> icon-arrow-resize7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-resize8\"></i> icon-arrow-resize8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-up-left\"></i> icon-square-up-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-up\"></i> icon-square-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-up-right\"></i> icon-square-up-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-right\"></i> icon-square-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-down-right\"></i> icon-square-down-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-down\"></i> icon-square-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-down-left\"></i> icon-square-down-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-left\"></i> icon-square-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up15\"></i> icon-arrow-up15</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right15\"></i> icon-arrow-right15</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down15\"></i> icon-arrow-down15</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left15\"></i> icon-arrow-left15</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up16\"></i> icon-arrow-up16</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right16\"></i> icon-arrow-right16</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down16\"></i> icon-arrow-down16</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left16\"></i> icon-arrow-left16</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu-open\"></i> icon-menu-open</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu-open2\"></i> icon-menu-open2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu-close\"></i> icon-menu-close</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu-close2\"></i> icon-menu-close2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enter5\"></i> icon-enter5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-esc\"></i> icon-esc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enter6\"></i> icon-enter6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-backspace\"></i> icon-backspace</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-backspace2\"></i> icon-backspace2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tab\"></i> icon-tab</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-transmission\"></i> icon-transmission</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort\"></i> icon-sort</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-up2\"></i> icon-move-up2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-down2\"></i> icon-move-down2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-alpha-asc\"></i> icon-sort-alpha-asc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-alpha-desc\"></i> icon-sort-alpha-desc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-numeric-asc\"></i> icon-sort-numeric-asc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-numberic-desc\"></i> icon-sort-numberic-desc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-amount-asc\"></i> icon-sort-amount-asc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-amount-desc\"></i> icon-sort-amount-desc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-time-asc\"></i> icon-sort-time-asc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-time-desc\"></i> icon-sort-time-desc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-battery-6\"></i> icon-battery-6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-battery-0\"></i> icon-battery-0</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-battery-charging\"></i> icon-battery-charging</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-command\"></i> icon-command</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shift\"></i> icon-shift</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ctrl\"></i> icon-ctrl</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-opt\"></i> icon-opt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-checked\"></i> icon-checkbox-checked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-unchecked\"></i> icon-checkbox-unchecked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-partial\"></i> icon-checkbox-partial</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square\"></i> icon-square</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-triangle\"></i> icon-triangle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-triangle2\"></i> icon-triangle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diamond3\"></i> icon-diamond3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diamond4\"></i> icon-diamond4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-checked2\"></i> icon-checkbox-checked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-unchecked2\"></i> icon-checkbox-unchecked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-partial2\"></i> icon-checkbox-partial2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-radio-checked\"></i> icon-radio-checked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-radio-checked2\"></i> icon-radio-checked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-radio-unchecked\"></i> icon-radio-unchecked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark-circle\"></i> icon-checkmark-circle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle\"></i> icon-circle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle2\"></i> icon-circle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circles\"></i> icon-circles</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circles2\"></i> icon-circles2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-crop\"></i> icon-crop</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-crop2\"></i> icon-crop2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-make-group\"></i> icon-make-group</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ungroup\"></i> icon-ungroup</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-vector\"></i> icon-vector</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-vector2\"></i> icon-vector2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rulers\"></i> icon-rulers</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil-ruler\"></i> icon-pencil-ruler</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-scissors\"></i> icon-scissors</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-filter3\"></i> icon-filter3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-filter4\"></i> icon-filter4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-font\"></i> icon-font</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ampersand2\"></i> icon-ampersand2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ligature\"></i> icon-ligature</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-font-size\"></i> icon-font-size</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-typography\"></i> icon-typography</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-text-height\"></i> icon-text-height</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-text-width\"></i> icon-text-width</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-height2\"></i> icon-height2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-width\"></i> icon-width</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-strikethrough2\"></i> icon-strikethrough2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-font-size2\"></i> icon-font-size2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bold2\"></i> icon-bold2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-underline2\"></i> icon-underline2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-italic2\"></i> icon-italic2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-strikethrough3\"></i> icon-strikethrough3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-omega\"></i> icon-omega</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sigma\"></i> icon-sigma</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-nbsp\"></i> icon-nbsp</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-page-break\"></i> icon-page-break</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-page-break2\"></i> icon-page-break2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-superscript\"></i> icon-superscript</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-subscript\"></i> icon-subscript</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-superscript2\"></i> icon-superscript2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-subscript2\"></i> icon-subscript2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-text-color\"></i> icon-text-color</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-highlight\"></i> icon-highlight</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pagebreak\"></i> icon-pagebreak</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clear-formatting\"></i> icon-clear-formatting</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-table\"></i> icon-table</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-table2\"></i> icon-table2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-insert-template\"></i> icon-insert-template</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pilcrow\"></i> icon-pilcrow</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ltr\"></i> icon-ltr</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rtl\"></i> icon-rtl</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ltr2\"></i> icon-ltr2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rtl2\"></i> icon-rtl2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-section\"></i> icon-section</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-left2\"></i> icon-paragraph-left2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-center2\"></i> icon-paragraph-center2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-right2\"></i> icon-paragraph-right2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-justify2\"></i> icon-paragraph-justify2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-indent-increase\"></i> icon-indent-increase</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-indent-decrease\"></i> icon-indent-decrease</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-left3\"></i> icon-paragraph-left3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-center3\"></i> icon-paragraph-center3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-right3\"></i> icon-paragraph-right3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-justify3\"></i> icon-paragraph-justify3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-indent-increase2\"></i> icon-indent-increase2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-indent-decrease2\"></i> icon-indent-decrease2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-share\"></i> icon-share</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-share2\"></i> icon-share2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-new-tab\"></i> icon-new-tab</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-new-tab2\"></i> icon-new-tab2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-popout\"></i> icon-popout</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-embed\"></i> icon-embed</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-embed2\"></i> icon-embed2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-markup\"></i> icon-markup</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-regexp\"></i> icon-regexp</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-regexp2\"></i> icon-regexp2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-code\"></i> icon-code</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-css\"></i> icon-circle-css</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-code\"></i> icon-circle-code</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-terminal\"></i> icon-terminal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unicode\"></i> icon-unicode</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-0\"></i> icon-seven-segment-0</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-1\"></i> icon-seven-segment-1</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-2\"></i> icon-seven-segment-2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-3\"></i> icon-seven-segment-3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-4\"></i> icon-seven-segment-4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-5\"></i> icon-seven-segment-5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-6\"></i> icon-seven-segment-6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-7\"></i> icon-seven-segment-7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-8\"></i> icon-seven-segment-8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-9\"></i> icon-seven-segment-9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-share3\"></i> icon-share3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-share4\"></i> icon-share4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-google\"></i> icon-google</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-google-plus\"></i> icon-google-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-google-plus2\"></i> icon-google-plus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-google-drive\"></i> icon-google-drive</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-facebook\"></i> icon-facebook</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-facebook2\"></i> icon-facebook2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-instagram\"></i> icon-instagram</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-twitter\"></i> icon-twitter</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-twitter2\"></i> icon-twitter2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-feed2\"></i> icon-feed2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-feed3\"></i> icon-feed3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-youtube\"></i> icon-youtube</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-youtube2\"></i> icon-youtube2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-youtube3\"></i> icon-youtube3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-vimeo\"></i> icon-vimeo</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-vimeo2\"></i> icon-vimeo2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lanyrd\"></i> icon-lanyrd</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flickr\"></i> icon-flickr</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flickr2\"></i> icon-flickr2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flickr3\"></i> icon-flickr3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-picassa\"></i> icon-picassa</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-picassa2\"></i> icon-picassa2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dribbble\"></i> icon-dribbble</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dribbble2\"></i> icon-dribbble2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dribbble3\"></i> icon-dribbble3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-forrst\"></i> icon-forrst</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-forrst2\"></i> icon-forrst2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-deviantart\"></i> icon-deviantart</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-deviantart2\"></i> icon-deviantart2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-steam\"></i> icon-steam</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-steam2\"></i> icon-steam2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dropbox\"></i> icon-dropbox</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-onedrive\"></i> icon-onedrive</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-github\"></i> icon-github</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-github4\"></i> icon-github4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-github5\"></i> icon-github5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wordpress\"></i> icon-wordpress</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wordpress2\"></i> icon-wordpress2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-joomla\"></i> icon-joomla</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-blogger\"></i> icon-blogger</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-blogger2\"></i> icon-blogger2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tumblr\"></i> icon-tumblr</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tumblr2\"></i> icon-tumblr2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-yahoo\"></i> icon-yahoo</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tux\"></i> icon-tux</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-apple2\"></i> icon-apple2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-finder\"></i> icon-finder</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-android\"></i> icon-android</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-windows\"></i> icon-windows</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-windows8\"></i> icon-windows8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-soundcloud\"></i> icon-soundcloud</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-soundcloud2\"></i> icon-soundcloud2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-skype\"></i> icon-skype</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reddit\"></i> icon-reddit</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-linkedin\"></i> icon-linkedin</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-linkedin2\"></i> icon-linkedin2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lastfm\"></i> icon-lastfm</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lastfm2\"></i> icon-lastfm2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-delicious\"></i> icon-delicious</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stumbleupon\"></i> icon-stumbleupon</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stumbleupon2\"></i> icon-stumbleupon2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stackoverflow\"></i> icon-stackoverflow</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pinterest2\"></i> icon-pinterest2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-xing\"></i> icon-xing</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flattr\"></i> icon-flattr</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-foursquare\"></i> icon-foursquare</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paypal\"></i> icon-paypal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paypal2\"></i> icon-paypal2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-yelp\"></i> icon-yelp</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-pdf\"></i> icon-file-pdf</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-openoffice\"></i> icon-file-openoffice</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-word\"></i> icon-file-word</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-excel\"></i> icon-file-excel</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-libreoffice\"></i> icon-libreoffice</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-html5\"></i> icon-html5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-html52\"></i> icon-html52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-css3\"></i> icon-css3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git\"></i> icon-git</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-svg\"></i> icon-svg</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-codepen\"></i> icon-codepen</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chrome\"></i> icon-chrome</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-firefox\"></i> icon-firefox</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-IE\"></i> icon-IE</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-opera\"></i> icon-opera</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-safari\"></i> icon-safari</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-check2\"></i> icon-check2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home4\"></i> icon-home4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-people\"></i> icon-people</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark-circle2\"></i> icon-checkmark-circle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-left32\"></i> icon-arrow-up-left32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up52\"></i> icon-arrow-up52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-right32\"></i> icon-arrow-up-right32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right6\"></i> icon-arrow-right6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-right32\"></i> icon-arrow-down-right32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down52\"></i> icon-arrow-down52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-left32\"></i> icon-arrow-down-left32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left52\"></i> icon-arrow-left52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar5\"></i> icon-calendar5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-alt1\"></i> icon-move-alt1</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reload-alt\"></i> icon-reload-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-vertical\"></i> icon-move-vertical</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-horizontal\"></i> icon-move-horizontal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hash\"></i> icon-hash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bars-alt\"></i> icon-bars-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye8\"></i> icon-eye8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-search4\"></i> icon-search4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-zoomin3\"></i> icon-zoomin3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-zoomout3\"></i> icon-zoomout3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-add\"></i> icon-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-subtract\"></i> icon-subtract</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-exclamation\"></i> icon-exclamation</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-question6\"></i> icon-question6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-close2\"></i> icon-close2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-task\"></i> icon-task</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-inbox\"></i> icon-inbox</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-inbox-alt\"></i> icon-inbox-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelope\"></i> icon-envelope</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-compose\"></i> icon-compose</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-newspaper2\"></i> icon-newspaper2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar22\"></i> icon-calendar22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hyperlink\"></i> icon-hyperlink</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-trash\"></i> icon-trash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-trash-alt\"></i> icon-trash-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid5\"></i> icon-grid5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid-alt\"></i> icon-grid-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu6\"></i> icon-menu6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list3\"></i> icon-list3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-gallery\"></i> icon-gallery</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calculator\"></i> icon-calculator</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-windows2\"></i> icon-windows2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-browser\"></i> icon-browser</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-portfolio\"></i> icon-portfolio</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-comments\"></i> icon-comments</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-screen3\"></i> icon-screen3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-iphone\"></i> icon-iphone</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ipad\"></i> icon-ipad</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-googleplus5\"></i> icon-googleplus5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pin\"></i> icon-pin</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pin-alt\"></i> icon-pin-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog5\"></i> icon-cog5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-graduation\"></i> icon-graduation</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-air\"></i> icon-air</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-droplets\"></i> icon-droplets</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-statistics\"></i> icon-statistics</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie5\"></i> icon-pie5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cross\"></i> icon-cross</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-minus2\"></i> icon-minus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-plus2\"></i> icon-plus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-info3\"></i> icon-info3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-info22\"></i> icon-info22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-question7\"></i> icon-question7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-help\"></i> icon-help</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-warning2\"></i> icon-warning2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-add-to-list\"></i> icon-add-to-list</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left12\"></i> icon-arrow-left12</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down12\"></i> icon-arrow-down12</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up12\"></i> icon-arrow-up12</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right13\"></i> icon-arrow-right13</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left22\"></i> icon-arrow-left22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down22\"></i> icon-arrow-down22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up22\"></i> icon-arrow-up22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right22\"></i> icon-arrow-right22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left32\"></i> icon-arrow-left32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down32\"></i> icon-arrow-down32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up32\"></i> icon-arrow-up32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right32\"></i> icon-arrow-right32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-switch2\"></i> icon-switch2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark5\"></i> icon-checkmark5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ampersand\"></i> icon-ampersand</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alert\"></i> icon-alert</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alignment-align\"></i> icon-alignment-align</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alignment-aligned-to\"></i> icon-alignment-aligned-to</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alignment-unalign\"></i> icon-alignment-unalign</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down132\"></i> icon-arrow-down132</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up13\"></i> icon-arrow-up13</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left13\"></i> icon-arrow-left13</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right14\"></i> icon-arrow-right14</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-small-down\"></i> icon-arrow-small-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-small-left\"></i> icon-arrow-small-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-small-right\"></i> icon-arrow-small-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-small-up\"></i> icon-arrow-small-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-check\"></i> icon-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chevron-down\"></i> icon-chevron-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chevron-left\"></i> icon-chevron-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chevron-right\"></i> icon-chevron-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chevron-up\"></i> icon-chevron-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clippy\"></i> icon-clippy</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-comment\"></i> icon-comment</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-comment-discussion\"></i> icon-comment-discussion</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dash\"></i> icon-dash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff\"></i> icon-diff</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff-added\"></i> icon-diff-added</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff-ignored\"></i> icon-diff-ignored</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff-modified\"></i> icon-diff-modified</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff-removed\"></i> icon-diff-removed</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff-renamed\"></i> icon-diff-renamed</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-media\"></i> icon-file-media</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-fold\"></i> icon-fold</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-gear\"></i> icon-gear</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git-branch\"></i> icon-git-branch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git-commit\"></i> icon-git-commit</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git-compare\"></i> icon-git-compare</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git-merge\"></i> icon-git-merge</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git-pull-request\"></i> icon-git-pull-request</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-graph\"></i> icon-graph</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-law\"></i> icon-law</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list-ordered\"></i> icon-list-ordered</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list-unordered\"></i> icon-list-unordered</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mail5\"></i> icon-mail5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mail-read\"></i> icon-mail-read</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mention\"></i> icon-mention</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mirror\"></i> icon-mirror</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-down\"></i> icon-move-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-left\"></i> icon-move-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-right\"></i> icon-move-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-up\"></i> icon-move-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-person\"></i> icon-person</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-plus22\"></i> icon-plus22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-primitive-dot\"></i> icon-primitive-dot</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-primitive-square\"></i> icon-primitive-square</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-repo-forked\"></i> icon-repo-forked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-screen-full\"></i> icon-screen-full</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-screen-normal\"></i> icon-screen-normal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sync\"></i> icon-sync</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-three-bars\"></i> icon-three-bars</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unfold\"></i> icon-unfold</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-versions\"></i> icon-versions</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-x\"></i> icon-x</div>\n\t</div>\n\t","ColorPaletteList":"<div class=\"panel\">\n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink-800 demo-color\" color_palette=\"pink-800\">\n\t       <span>pink-800</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink-700 demo-color\" color_palette=\"pink-700\">\n\t       <span>pink-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink-600 demo-color\" color_palette=\"pink-600\">\n\t       <span>pink-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink demo-color\" color_palette=\"pink\">\n\t       <span>pink</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink-400 demo-color\" color_palette=\"pink-400\">\n\t       <span>pink-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink-300 demo-color\" color_palette=\"pink-300\">\n\t       <span>pink-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet-800 demo-color\" color_palette=\"violet-800\">\n\t       <span>violet</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet-700 demo-color\" color_palette=\"violet-700\">\n\t       <span>violet-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet-600 demo-color\" color_palette=\"violet-600\">\n\t       <span>violet-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet demo-color\" color_palette=\"violet\">\n\t       <span>violet</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet-400 demo-color\" color_palette=\"violet-400\">\n\t       <span>violet-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet-300 demo-color\" color_palette=\"violet-300\">\n\t       <span>violet-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple-800 demo-color\" color_palette=\"purple-800\">\n\t       <span>purple</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple-700 demo-color\" color_palette=\"purple-700\">\n\t       <span>purple-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple-600 demo-color\" color_palette=\"purple-600\">\n\t       <span>purple-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple demo-color\" color_palette=\"purple\">\n\t       <span>purple</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple-400 demo-color\" color_palette=\"purple-400\">\n\t       <span>purple-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple-300 demo-color\" color_palette=\"purple-300\">\n\t       <span>purple-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo-800 demo-color\" color_palette=\"indigo-800\">\n\t       <span>indigo</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo-700 demo-color\" color_palette=\"indigo-700\">\n\t       <span>indigo-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo-600 demo-color\" color_palette=\"indigo-600\">\n\t       <span>indigo-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo demo-color\" color_palette=\"indigo\">\n\t       <span>indigo</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo-400 demo-color\" color_palette=\"indigo-400\">\n\t       <span>indigo-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo-300 demo-color\" color_palette=\"indigo-300\">\n\t       <span>indigo-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue-800 demo-color\" color_palette=\"blue-800\">\n\t       <span>blue</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue-700 demo-color\" color_palette=\"blue-700\">\n\t       <span>blue-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue-600 demo-color\" color_palette=\"blue-600\">\n\t       <span>blue-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue demo-color\" color_palette=\"blue\">\n\t       <span>blue</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue-400 demo-color\" color_palette=\"blue-400\">\n\t       <span>blue-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue-300 demo-color\" color_palette=\"blue-300\">\n\t       <span>blue-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal-800 demo-color\" color_palette=\"teal-800\">\n\t       <span>teal</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal-700 demo-color\" color_palette=\"teal-700\">\n\t       <span>teal-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal-600 demo-color\" color_palette=\"teal-600\">\n\t       <span>teal-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal demo-color\" color_palette=\"teal\">\n\t       <span>teal</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal-400 demo-color\" color_palette=\"teal-400\">\n\t       <span>teal-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal-300 demo-color\" color_palette=\"teal-300\">\n\t       <span>teal-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green-800 demo-color\" color_palette=\"green-800\">\n\t       <span>green</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green-700 demo-color\" color_palette=\"green-700\">\n\t       <span>green-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green-600 demo-color\" color_palette=\"green-600\">\n\t       <span>green-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green demo-color\" color_palette=\"green\">\n\t       <span>green</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green-400 demo-color\" color_palette=\"green-400\">\n\t       <span>green-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green-300 demo-color\" color_palette=\"green-300\">\n\t       <span>green-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div>  \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange-800 demo-color\" color_palette=\"orange-800\">\n\t       <span>orange</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange-700 demo-color\" color_palette=\"orange-700\">\n\t       <span>orange-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange-600 demo-color\" color_palette=\"orange-600\">\n\t       <span>orange-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange demo-color\" color_palette=\"orange\">\n\t       <span>orange</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange-400 demo-color\" color_palette=\"orange-400\">\n\t       <span>orange-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange-300 demo-color\" color_palette=\"orange-300\">\n\t       <span>orange-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown-800 demo-color\" color_palette=\"brown-800\">\n\t       <span>brown</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown-700 demo-color\" color_palette=\"brown-700\">\n\t       <span>brown-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown-600 demo-color\" color_palette=\"brown-600\">\n\t       <span>brown-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown demo-color\" color_palette=\"brown\">\n\t       <span>brown</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown-400 demo-color\" color_palette=\"brown-400\">\n\t       <span>brown-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown-300 demo-color\" color_palette=\"brown-300\">\n\t       <span>brown-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey-800 demo-color\" color_palette=\"grey-800\">\n\t       <span>grey</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey-700 demo-color\" color_palette=\"grey-700\">\n\t       <span>grey-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey-600 demo-color\" color_palette=\"grey-600\">\n\t       <span>grey-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey demo-color\" color_palette=\"grey\">\n\t       <span>grey</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey-400 demo-color\" color_palette=\"grey-400\">\n\t       <span>grey-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey-300 demo-color\" color_palette=\"grey-300\">\n\t       <span>grey-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate-800 demo-color\" color_palette=\"slate-800\">\n\t       <span>slate</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate-700 demo-color\" color_palette=\"slate-700\">\n\t       <span>slate-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate-600 demo-color\" color_palette=\"slate-600\">\n\t       <span>slate-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate demo-color\" color_palette=\"slate\">\n\t       <span>slate</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate-400 demo-color\" color_palette=\"slate-400\">\n\t       <span>slate-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate-300 demo-color\" color_palette=\"slate-300\">\n\t       <span>slate-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t \n\t</div> \n\t","EditFile":"<div id=\"{{id}}\" class=\"form-group\">\n\t <label id=\"{{id}}:label\" for=\"{{id}}\">\n\t </label>\n\t <div id=\"{{id}}:add\">\n\t </div>\n\t <span id=\"{{id}}:file_cont\">\n\t </span>\n\t <input id=\"{{id}}:file\" type=\"file\" style=\"display:none;\">\n\t </input>\n\t</div>\n\t","EditSwitcher":"<div id=\"{{id}}:cont\" class=\"{{CONT_CLASS_NAME}}\" {{#TITLE}}title=\"{{TITLE}}\"{{/TITLE}}>\n\t <label id=\"{{id}}:lb\" class=\"{{LABEL_CLASS_NAME}}\">\n\t  <input id=\"{{id}}\" type=\"checkbox\" class=\"{{CLASS_NAME}}\" {{#CHECKED}}checked=\"{{CHECKED}}\"{{/CHECKED}}>\n\t </input>\n\t {{LABEL_CAPTION}}\n\t </label>\n\t</div>  \n\t","EditFileInf":"<div id=\"{{id}}\">\n\t \n\t <a id=\"{{id}}-href\" file_id=\"{{id}}\" href=\"#\" title=\"Скачать файл\" file_uploaded=\"{{file_uploaded}}\" class=\"uploadedFile\">\n\t  {{name}}({{file_size_formatted}})\n\t </a>\n\t\n\t <span id=\"{{id}}-sigList\">\n\t </span>\n\t\n\t {{#file_deletable}}\n\t <div id=\"{{id}}-del\" class=\"btn btn-sm fileDeleteBtn\" title=\"Удалить файл\" file_id=\"{{id}}\" file_uploaded=\"{{file_uploaded}}\">\n\t  <i class=\"glyphicon glyphicon-trash\"></i> \n\t </div>\n\t {{/file_deletable}}\n\t</div>\n\t","EditPeriodShift":"<div id=\"{{id}}\" class=\"{{bsCol}}6\" style=\"margin-bottom:5px;\">\n\t <div class=\"btn-group {{bsCol}}3\" style=\"padding:0px,0px\">\n\t  <div id=\"{{id}}:downFast\" title=\"{{CONTR_DOWN_FAST_TITLE}}\"></div>\n\t  <div id=\"{{id}}:down\" title=\"{{CONTR_DOWN_TITLE}}\"></div>\n\t </div>\n\t \n\t <label id=\"{{id}}:inf\" class=\"{{bsCol}}6 periodLabel\" style=\"padding-right:0px;padding-left:0px;\">\n\t </label>\n\t \n\t <div class=\"btn-group {{bsCol}}3\" style=\"padding:0px,0px\">  \n\t  <div id=\"{{id}}:up\" title=\"{{CONTR_UP_TITLE}}\"></div>\n\t  <div id=\"{{id}}:upFast\" title=\"{{CONTR_UP_FAST_TITLE}}\"></div>\n\t </div>\n\t \n\t</div>\n\t","EditPeriodShiftSM":"<div id=\"{{id}}\" class=\"row\" style=\"margin-bottom:5px;\">\n\t <div class=\"btn-group {{bsCol}}3\" style=\"padding:0px,0px\">\n\t  <div id=\"{{id}}:downFast\" title=\"{{CONTR_DOWN_FAST_TITLE}}\"></div>\n\t  <div id=\"{{id}}:down\" title=\"{{CONTR_DOWN_TITLE}}\"></div>\n\t </div>\n\t \n\t <label id=\"{{id}}:inf\" class=\"{{bsCol}}6 periodLabel\" style=\"padding-right:0px;padding-left:0px;\">\n\t </label>\n\t \n\t <div class=\"btn-group {{bsCol}}3\" style=\"padding:0px,0px\">  \n\t  <div id=\"{{id}}:up\" title=\"{{CONTR_UP_TITLE}}\"></div>\n\t  <div id=\"{{id}}:upFast\" title=\"{{CONTR_UP_FAST_TITLE}}\"></div>\n\t </div>\n\t \n\t</div>\n\t","EditPeriodMonth":"<div id=\"{{id}}\" class=\"{{bsCol}}6\" style=\"margin-bottom:5px;\">\n\t <span id=\"{{id}}:down\" title=\"{{CONTR_DOWN_TITLE}}\">\n\t </span>\n\t \n\t <label id=\"{{id}}:inf\" class=\"periodLabel\" style=\"padding-right:3px;padding-left:3px;\">\n\t </label>\n\t \n\t <span id=\"{{id}}:up\" title=\"{{CONTR_UP_TITLE}}\">\n\t </span>\n\t <div id=\"{{id}}:error\">\n\t </div>\n\t</div>\n\t","EditPeriodMonthFromTo":"<span id=\"{{id}}\">\n\t <span id=\"{{id}}:down\" title=\"{{CONTR_DOWN_TITLE}}\">\n\t </span>\n\t \n\t <label id=\"{{id}}:inf\" class=\"periodLabel\" style=\"padding-right:3px;padding-left:3px;\">\n\t </label>\n\t \n\t <span id=\"{{id}}:up\" title=\"{{CONTR_UP_TITLE}}\">\n\t </span>\n\t \n\t <div id=\"{{id}}:error\">\n\t </div>\n\t \n\t</span>\n\t","ZoneDrawingControl":"<div id=\"{{id}}\">\n\t <input id=\"{{id}}:navigate\" type=\"radio\" checked=\"checked\" name=\"draw_type\" value=\"navigate\" title=\"При движении мышкой перемещать карту\">\n\t </input>\n\t <label for=\"{{id}}:navigate\">Перемещать карту</label>\n\t \n\t <input id=\"{{id}}:draw\" type=\"radio\" name=\"draw_type\" value=\"draw\" title=\"При движении мышкой рисовать зону\">\n\t </input>\n\t <label for=\"{{id}}:draw\">Рисовать зону</label>\n\t\n\t <input id=\"{{id}}:drag\" type=\"radio\" name=\"draw_type\" value=\"drag\" title=\"При движении мышкой перемещать зону\">\n\t </input>\n\t <label for=\"{{id}}:drag\">Перетащить зону</label>\n\t \n\t <div id={{id}}:btn_delete>\n\t </div>\n\t</div>\n\t","OrderDialog_View":"<div id=\"{{id}}\" class=\"panel\">\n\t <div id=\"{{id}}:cmd-cont\">\n\t  <div id=\"{{id}}:cmdOk\">\n\t  </div>\n\t  <div id=\"{{id}}:cmdCancel\">\n\t  </div>  \n\t </div>\n\t \n\t <div class=\"text-right orderLastModif\" title=\"Последнее изменение\"> \n\t  <div id=\"{{id}}:last_modif_user\" class=\"text-info\">\n\t  </div>\n\t  <div id=\"{{id}}:last_modif_date_time\" class=\"text-info\">\n\t  </div>    \n\t </div>\n\t \n\t <div class=\"text-right clientDebt\" title=\"Взаиморасчеты с контрагентом\"> \n\t  <div id=\"{{id}}:client_debt\">\n\t  </div>\n\t </div>\n\t \n\t <div class=\"panel-heading\">\n\t \n\t  <h2 class=\"panel-title\">Заявка №\n\t   <span id=\"{{id}}:number\">\n\t   </span> от <span id=\"{{id}}:date_time_date\">\n\t   </span>\n\t   <span id=\"{{id}}:date_time_time\">\n\t   </span>      \n\t  </h2> \n\t </div>\n\t\n\t <div class=\"panel-body\">\n\t  <fieldset id=\"{{id}}:avail_time\" class=\"content-group hidden\">\n\t   <i id=\"{{id}}:avail_time:wait\">\n\t   </i>\n\t   <span id=\"{{id}}:avail_time:cont\">\n\t   </span>\n\t  </fieldset>\n\t  \n\t  <fieldset class=\"content-group\">\n\t   <div id=\"{{id}}:pay_cash\" class=\"{{bsCol}}4\">\n\t   </div>\n\t \n\t   <div id=\"{{id}}:payed\" class=\"{{bsCol}}4\">\n\t   </div>\n\t \n\t   <div id=\"{{id}}:under_control\" class=\"{{bsCol}}4\">\n\t   </div>\n\t  </fieldset>\n\t \n\t  <fieldset class=\"content-group\">\n\t   <div id=\"{{id}}:client\"> \n\t   </div>\n\t   <div id=\"{{id}}:calc:destination\">\n\t   </div>\n\t   <div id=\"{{id}}:calc:quant\"> \n\t   </div>\n\t   <div id=\"{{id}}:unload_speed\">\n\t   </div>\n\t   <div id=\"{{id}}:comment_text\">\n\t   </div>\n\t   \n\t   <div id=\"{{id}}:calc:concrete_type\">\n\t   </div>\n\t \n\t   <div id=\"{{id}}:calc:unload_type\"> \n\t   </div>   \n\t   <div id=\"{{id}}:calc:pump_vehicle\">\n\t   </div>\n\t   \n\t   <div id=\"{{id}}:calc:client_specification\">\n\t   </div>\n\t   \n\t   <div id=\"{{id}}:descr\">\n\t   </div>\n\t   <div id=\"{{id}}:phone_cel\"> \n\t   </div>\n\t   \n\t  </fieldset>\n\t  \n\t  <div id=\"{{id}}:calc:sum_totals\" class=\"content-group row hidden\">\n\t   <div id=\"{{id}}:calc:concrete_cost\" class=\"{{bsCol}}3\">\n\t   </div>\n\t  \n\t   <div id=\"{{id}}:calc:destination_cost\" class=\"{{bsCol}}3\">\n\t   </div>\n\t   <div id=\"{{id}}:calc:unload_cost\" class=\"{{bsCol}}3\">\n\t   </div>\n\t   <div id=\"{{id}}:calc:total\" class=\"{{bsCol}}3\">\n\t   </div>\n\t  </div>\n\t \n\t  <fieldset class=\"content-group\">\n\t   <div id=\"{{id}}:f_val\" class=\"{{bsCol}}4\">\n\t   </div>\n\t   <div id=\"{{id}}:w_val\" class=\"{{bsCol}}4\">\n\t   </div>\n\t   \n\t  </fieldset>\n\t \n\t  <fieldset class=\"content-group\">\n\t   <!--\n\t   <div id=\"{{id}}:lang\">\n\t   </div>\n\t   -->\n\t   <div id=\"{{id}}:ext_production\">\n\t   </div>\n\t   \n\t   <div id=\"{{id}}:user\">\n\t   </div>\n\t   \n\t  </fieldset>\n\t </div>  \n\t</div> \n\t","OrderGarbageDialog_View":"<div id=\"{{id}}\" class=\"panel\">\n\t <div id=\"{{id}}:cmd-cont\">\n\t  <div id=\"{{id}}:cmdOk\">\n\t  </div>\n\t  <div id=\"{{id}}:cmdCancel\">\n\t  </div>  \n\t </div>\n\t \n\t <div class=\"text-right orderLastModif\" title=\"Последнее изменение\"> \n\t  <div id=\"{{id}}:last_modif_user\" class=\"text-info\">\n\t  </div>\n\t  <div id=\"{{id}}:last_modif_date_time\" class=\"text-info\">\n\t  </div>    \n\t </div>\n\t \n\t <div class=\"text-right clientDebt\" title=\"Взаиморасчеты с контрагентом\"> \n\t  <div id=\"{{id}}:client_debt\">\n\t  </div>\n\t </div>\n\t \n\t <div class=\"panel-heading\">\n\t \n\t  <h2 class=\"panel-title\">Удаленная заявка №\n\t   <span id=\"{{id}}:number\">\n\t   </span> от <span id=\"{{id}}:date_time_date\">\n\t   </span>\n\t   <span id=\"{{id}}:date_time_time\">\n\t   </span>      \n\t  </h2> \n\t </div>\n\t\n\t <div class=\"panel-body\">\n\t  <fieldset id=\"{{id}}:avail_time\" class=\"content-group hidden\">\n\t   <i id=\"{{id}}:avail_time:wait\">\n\t   </i>\n\t   <span id=\"{{id}}:avail_time:cont\">\n\t   </span>\n\t  </fieldset>\n\t  \n\t  <fieldset class=\"content-group\">\n\t   <div id=\"{{id}}:pay_cash\" class=\"{{bsCol}}4\">\n\t   </div>\n\t \n\t   <div id=\"{{id}}:payed\" class=\"{{bsCol}}4\">\n\t   </div>\n\t \n\t   <div id=\"{{id}}:under_control\" class=\"{{bsCol}}4\">\n\t   </div>\n\t  </fieldset>\n\t \n\t  <fieldset class=\"content-group\">\n\t   <div id=\"{{id}}:client\"> \n\t   </div>\n\t   <div id=\"{{id}}:calc:destination\">\n\t   </div>\n\t   <div id=\"{{id}}:calc:quant\"> \n\t   </div>\n\t   <div id=\"{{id}}:unload_speed\">\n\t   </div>\n\t   <div id=\"{{id}}:comment_text\">\n\t   </div>\n\t   \n\t   <div id=\"{{id}}:calc:concrete_type\">\n\t   </div>\n\t \n\t   <div id=\"{{id}}:calc:unload_type\"> \n\t   </div>   \n\t   <div id=\"{{id}}:calc:pump_vehicle\">\n\t   </div>\n\t   \n\t   <div id=\"{{id}}:calc:client_specification\">\n\t   </div>\n\t   \n\t   <div id=\"{{id}}:descr\">\n\t   </div>\n\t   <div id=\"{{id}}:phone_cel\"> \n\t   </div>\n\t   \n\t  </fieldset>\n\t  \n\t  <div id=\"{{id}}:calc:sum_totals\" class=\"content-group row hidden\">\n\t   <div id=\"{{id}}:calc:concrete_cost\" class=\"{{bsCol}}3\">\n\t   </div>\n\t  \n\t   <div id=\"{{id}}:calc:destination_cost\" class=\"{{bsCol}}3\">\n\t   </div>\n\t   <div id=\"{{id}}:calc:unload_cost\" class=\"{{bsCol}}3\">\n\t   </div>\n\t   <div id=\"{{id}}:calc:total\" class=\"{{bsCol}}3\">\n\t   </div>\n\t  </div>\n\t \n\t  <fieldset class=\"content-group\">\n\t   <div id=\"{{id}}:f_val\" class=\"{{bsCol}}4\">\n\t   </div>\n\t   <div id=\"{{id}}:w_val\" class=\"{{bsCol}}4\">\n\t   </div>\n\t   \n\t  </fieldset>\n\t \n\t  <fieldset class=\"content-group\">\n\t   <!--\n\t   <div id=\"{{id}}:lang\">\n\t   </div>\n\t   -->\n\t   <div id=\"{{id}}:ext_production\">\n\t   </div>\n\t   \n\t   <div id=\"{{id}}:user\">\n\t   </div>\n\t   \n\t  </fieldset>\n\t </div>  \n\t</div> \n\t","AssignedVehicleAllBasesList_View":"<!-- Шаблон используется ТОЛЬКО для вызова из фолмы главного экрана\n\tЗаводы отображаются по два\n\tprodSite(db ID!!!) AssignedVehicleGrid!!!\n\t-->\n\t<div id=\"{{id}}\">\n\t <div class=\"row\" style=\"margin-bottom:10px;\">\n\t  <div id=\"{{id}}:prodSite1\" class=\"{{bsCol}}6\">\n\t  </div>\n\t  <div id=\"{{id}}:prodSite2\" class=\"{{bsCol}}6\">\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div id=\"{{id}}:prodSite4\" class=\"{{bsCol}}6\">\n\t  </div>\n\t  <div id=\"{{id}}:prodSite5\" class=\"{{bsCol}}6\">\n\t  </div>\n\t </div>  \n\t <div class=\"row\">\n\t  <div id=\"{{id}}:prodSite6\" class=\"{{bsCol}}6\">\n\t  </div>\n\t </div>   \n\t<div\n\t","AstIncomeCall_View":"<div id=\"{{id}}\">\n\t \n\t <div class=\"row content-group\">\n\t  <div id=\"{{id}}:contact_tel\" class=\"{{bsCol}}6\">\n\t  </div>\n\t \n\t  <div id=\"{{id}}:contact_name\" class=\"{{bsCol}}6\">\n\t  </div>\n\t </div>\n\t \n\t <div id=\"{{id}}:manager_comment\">\n\t </div>\n\t \n\t <div id=\"{{id}}:client\">\n\t </div>\n\t \n\t <div class=\"text-right clientDebt\" title=\"Взаиморасчеты с контрагентом\"> \n\t  <div id=\"{{id}}:client_debt\">\n\t  </div>\n\t </div>\n\t \n\t <div id=\"{{id}}:cmdUpdate\">\n\t </div>\n\t \n\t <div id=\"{{id}}:calc\">\n\t </div>\n\t\n\t <div id=\"{{id}}:cmdMakeOrder\">\n\t </div>\n\t\n\t {{#isClient}}\n\t <div class=\"row content-group\">\n\t  <div class=\"panel {{bsCol}}6\">\n\t   <h4>Звонки\n\t   </h4>\n\t   <div id=\"{{id}}:client_call_history\">\n\t   </div>\n\t  </div>\n\t\n\t  <div class=\"panel {{bsCol}}6\">\n\t   <h4>Отгрузки\n\t   </h4>\n\t   <div id=\"{{id}}:client_ship_history\">\n\t   </div>\n\t  </div>\n\t </div> \n\t {{/isClient}}\n\t \n\t</div> \n\t","AstIncomeUnknownCall_View":"<div id=\"{{id}}\" class=\"text-center\">\n\t <h1>{{contact_tel}}\n\t </h1>\n\t \n\t <div id=\"{{id}}:cmdSetClientBuyer\">\n\t </div>\n\t <div id=\"{{id}}:cmdSetClientAcc\">\n\t </div>\n\t <div id=\"{{id}}:cmdSetClientElse\">\n\t </div>\n\t \n\t</div>\n\t","OrderCalc":"<div id=\"{{id}}\">\n\t <div id=\"{{id}}:destination\">\n\t </div>\n\t <div id=\"{{id}}:quant\"> \n\t </div>\n\t <div id=\"{{id}}:concrete_type\">\n\t </div>\n\t\n\t <div class=\"content-group row\">\n\t  <div id=\"{{id}}:unload_type\" class=\"{{bsCol}}6\"> \n\t  </div>   \n\t  <div id=\"{{id}}:pump_vehicle\" class=\"{{bsCol}}6\">\n\t  </div>\n\t </div>\n\t \n\t <div id=\"{{id}}:client_specification\">\n\t </div>\n\t  \n\t <div id=\"{{id}}:sum_totals\" class=\"content-group row\">\n\t  <div id=\"{{id}}:concrete_cost\" class=\"{{bsCol}}3\">\n\t  </div>\n\t   \n\t  <div id=\"{{id}}:destination_cost\" class=\"{{bsCol}}3\">\n\t  </div>\n\t  \n\t  <div id=\"{{id}}:unload_cost\" class=\"{{bsCol}}3\">\n\t  </div>\n\t  \n\t  <div id=\"{{id}}:total\" class=\"{{bsCol}}3\">\n\t  </div>\n\t </div>\n\t \n\t</div>\n\t","MatTotalGridInner":"<thead>\n\t <tr>\n\t  <th rowspan=\"2\">Смена\n\t  </th>\n\t  <th rowspan=\"2\">Объем\n\t  </th>\n\t  {{#materials}}\n\t  <th colspan=\"4\" class=\"{{mat_class}}\">{{mat_name}}\n\t   <div>Ср.расх.:{{mat_avg_cons}}\n\t   </div>\n\t  </th>\n\t  {{/materials}}\n\t </tr>\n\t <tr>\n\t  {{#materials}}\n\t  <th class=\"{{mat_class}}\">На начало\n\t  </th>\n\t  \n\t  <th class=\"{{mat_class}}\">Приход\n\t  </th>\n\t     \n\t  <th class=\"{{mat_class}}\">Расход\n\t  </th>      \n\t  \n\t  <th class=\"{{mat_class}}\">На конец\n\t  </th>\n\t  {{/materials}}\n\t </tr>\n\t</thead>\n\t<tbody>\n\t {{#dates}}\n\t <tr {{#cur_date}}class=\"order_current_row\"{{/cur_date}}>\n\t  <td>{{date_descr}}\n\t  </td>\n\t  \n\t  <td align=\"right\">{{quant_shipment}}\n\t  </td>\n\t  \n\t  {{#date_materials}}\n\t  <td align=\"right\" class=\"{{mat_class}}\">{{quant_beg}}\n\t  </td>\n\t  \n\t  <td align=\"right\" class=\"{{mat_class}}\">{{quant_procur}}\n\t  </td>\n\t  \n\t  <td mat_id=\"{{mat_id}}\" dt=\"{{dt}}\" align=\"right\" class=\"{{mat_class}} quant_consump_editable{{#quant_consump_editted}} quant_consump_editted{{/quant_consump_editted}}\" title=\"Двойной клик для редактирования\">{{quant_consump}}\n\t  </td>\n\t  \n\t  <td align=\"right\" class=\"{{mat_class}}\">{{quant_end}}\n\t  </td>\n\t  {{/date_materials}}\n\t </tr>\n\t {{/dates}}\n\t</tbody>\n\t<tfoot>\n\t <tr>\n\t  <td>Итого\n\t  </td>\n\t  \n\t  <td align=\"right\">{{quant_shipment}}\n\t  </td>\n\t  \n\t  {{#materials}}\n\t  <td>\n\t  </td>\n\t  \n\t  <td align=\"right\">{{quant_procur}}\n\t  </td>\n\t  \n\t  <td align=\"right\">{{quant_consump}}\n\t  </td>\n\t  \n\t  <td>\n\t  </td>\n\t  \n\t  {{/materials}}\n\t  \n\t </tr>\n\t<tfoot>\n\t","MatCorrectGridInner":"<thead>\n\t <tr>\n\t  <th rowspan=\"2\">Смена\n\t  </th>\n\t  {{#materials}}\n\t  <th colspan=\"4\" class=\"{{mat_class}}\">{{mat_name}}\n\t  </th>\n\t  {{/materials}}\n\t </tr>\n\t <tr>\n\t  {{#materials}}\n\t  <th class=\"{{mat_class}}\">Норма\n\t  </th>\n\t  \n\t  <th class=\"{{mat_class}}\">Факт\n\t  </th>\n\t     \n\t  <th class=\"{{mat_class}}\">Обнул.\n\t  </th>      \n\t  \n\t  <th class=\"{{mat_class}}\">Сальдо\n\t  </th>\n\t  {{/materials}}\n\t </tr>\n\t</thead>\n\t<tbody>\n\t {{#dates}}\n\t <tr {{#cur_date}}class=\"order_current_row\"{{/cur_date}}>\n\t  <td>{{date_descr}}\n\t  </td>\n\t  \n\t  {{#date_materials}}\n\t  <td align=\"right\" class=\"{{mat_class}}\">{{norm}}\n\t  </td>\n\t  \n\t  <td mat_id=\"{{mat_id}}\" dt=\"{{dt}}\" align=\"right\"\n\t  class=\"{{mat_class}} quant_consump_editable{{#corrected_editted}} quant_consump_editted{{/corrected_editted}}\"\n\t  title=\"Двойной клик для редактирования\">{{corrected}}\n\t  </td>\n\t  \n\t  <td mat_id=\"{{mat_id}}\" dt=\"{{dt}}\" align=\"right\"\n\t  class=\"{{mat_class}} quant_consump_editable obnul {{#obnul_editted}} quant_consump_editted{{/obnul_editted}}\"\n\t  title=\"Двойной клик для редактирования\">{{obnul}}\n\t  </td>\n\t  <td align=\"right\" class=\"{{mat_class}}\">{{balance}}\n\t  </td>\n\t  \n\t  {{/date_materials}}\n\t </tr>\n\t {{/dates}}\n\t</tbody>\n\t<tfoot>\n\t <tr>\n\t  <td>Итого\n\t  </td>\n\t  \n\t  {{#materials}}\n\t  <td>{{norm}}\n\t  </td>\n\t  \n\t  <td align=\"right\">{{corrected}}\n\t  </td>\n\t  \n\t  <td align=\"right\">{{obnul}}\n\t  </td>\n\t  \n\t  <td>{{balance}}\n\t  </td>\n\t  \n\t  {{/materials}}\n\t  \n\t </tr>\n\t<tfoot>\n\t","CementSiloForOrderList_View":"<div id={{id}} class=\"row\">\n\t {{#productionSites}}\n\t <div id=\"{{id}}:productionSite_{{productionSiteId}}\" class=\"col-{{widthType}}-4\">\n\t   <legend>{{productionSiteName}}\n\t   <img id=\"production_site_conn_img_{{productionSiteId}}\" src=\"./img/dot_red.png\">\n\t   </img>\n\t   </legend>\n\t  {{#silos}}\n\t  <div id=\"{{id}}:silo_{{siloId}}\" class=\"col-{{widthType}}-4\">\n\t   <div class=\"siloName\">{{siloName}}\n\t   </div>\n\t   <canvas id=\"silo_canvas_{{siloId}}\" class=\"cementSiloPic\">\n\t   </canvas>\n\t   <div id=\"silo_cont_{{siloId}}\" class=\"silo_cont\">\n\t   </div>   \n\t  </div>\n\t  {{/silos}}\n\t  {{#material_stores}}\n\t  <div id=\"{{id}}:material_store_{{materialStoreId}}\" class=\"col-{{widthType}}-4\">\n\t   <div class=\"materialStoreName\">{{materialStoreName}}\n\t   </div>\n\t   <canvas id=\"material_store_canvas_{{materialStoreId}}\" class=\"materialStorePic\">\n\t   </canvas>\n\t   <div id=\"material_store_cont_{{materialStoreId}}\" class=\"material_store_cont\">\n\t   </div>   \n\t  </div>\n\t  {{/material_stores}}\n\t  \n\t </div>\n\t {{/productionSites}}\n\t</div>\n\t","ElkonProdInf":"<div>\n\t <div class=\"row\">\n\t  <div class=\"{{bsCol}}8\">№ производства:\n\t  </div>\n\t  <div class=\"{{bsCol}}4\">{{productionId}}\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"{{bsCol}}8\">Начало:\n\t  </div>\n\t  <div class=\"{{bsCol}}4\">{{productionDtStart}}\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"{{bsCol}}8\">Окончание:\n\t  </div>\n\t  <div class=\"{{bsCol}}4\">{{productionDtEnd}}\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"{{bsCol}}8\">Марка:\n\t  </div>\n\t  <div class=\"{{bsCol}}4\">{{productionConcreteType}}\n\t  </div>\n\t </div>  \n\t <div class=\"row\">\n\t  <div class=\"{{bsCol}}8\">Пользователь:\n\t  </div>\n\t  <div class=\"{{bsCol}}4\">{{productionUser}}\n\t  </div>\n\t </div> \n\t \n\t</div>\n\t","MaterialFactBalanceCorretionInf":"<div>\n\t {{#rows}}\n\t <div class=\"row\">\n\t  <div>Исправление: {{user_descr}} от {{date_time_descr}}\n\t  </div>\n\t </div> \n\t {{/rows}}\n\t</div>\n\t","RepMaterialConsToleranceViolationGrid":"<table id={{id}} class=\"table table-bordered table-responsive table-striped\">\n\t <thead>\n\t  <tr>\n\t   <td rowspan=\"2\">Смена\n\t   </td>\n\t   {{#materials}}\n\t   <td colspan=\"4\">{{material_descr}}\n\t   </td>\n\t   {{/materials}} \n\t  </tr>\n\t  <tr>\n\t   {{#materials}}\n\t   <td>Расход нормативный\n\t   </td>\n\t   <td>Расход фактический\n\t   </td>\n\t   <td>Отклонение (+пересыпали, -недосыпали)\n\t   </td>\n\t   <td>% отклонение\n\t   </td>   \n\t   {{/materials}} \n\t  </tr>\n\t  \n\t </thead>\n\t \n\t <tbody>\n\t  {{#dates}}\n\t  <tr>\n\t   <td>{{date_descr}}\n\t   </td>\n\t   {{#materials}}\n\t   <td align=\"right\" nowrap=\"nowrap\">{{norm_quant}}\n\t   </td>\n\t   <td align=\"right\" nowrap=\"nowrap\">{{fact_quant}}\n\t   </td>\n\t   <td align=\"right\" nowrap=\"nowrap\">{{diff_quant}}\n\t   </td>\n\t   <td align=\"right\" nowrap=\"nowrap\">{{diff_percent}}\n\t   </td>   \n\t   {{/materials}} \n\t  </tr>\n\t  {{/dates}}\n\t </tbody>\n\t</table>\n\t","MaterialStoreForOrderList_View":"<div id={{id}} class=\"row\">\n\t {{#productionSites}}\n\t <div id=\"{{id}}:productionSite_{{productionSiteId}}\" class=\"col-{{widthType}}-4\">\n\t  {{#stores}}\n\t  <div id=\"{{id}}:store_{{storeId}}\">\n\t   <div class=\"storeName\">{{storeName}}\n\t   </div>\n\t   <canvas id=\"store_canvas_{{storeId}}\" style=\"cursor:pointer;\">\n\t   </canvas>\n\t   <div id=\"store_cont_{{storeId}}\" class=\"store_cont\">\n\t   </div>   \n\t  </div>\n\t  {{/stores}}\n\t </div>\n\t {{/productionSites}}\n\t</div>\n\t","Chat_View":"<div id=\"{{id}}\" class=\"chat draggable\" title=\"Чаты {{HEADER}}\">\n\t <div class=\"panel panel-collapsed\">\n\t  <div class=\"panel-heading chatBar\" >\n\t   <h4 class=\"panel-title\">{{HEADER}}\n\t   </h4>\n\t   <div class=\"heading-elements\">\n\t    <ui class=\"icons-list\">\n\t     <li>\n\t      <span id=\"{{id}}:unviewedMsg\" title=\"Непрочитанные сообщения\">&nbsp;\n\t      </span>\n\t     </li>\n\t     <li>\n\t      <a id=\"{{id}}:toggle\" class=\"rotate-180\" data-action=\"collapse\" title=\"Свернуть/развернуть\" href=\"#\">\n\t      </a>\n\t     </li>\n\t    </ui>\n\t   </div>\n\t  </div>\n\t  <div id=\"{{id}}:body\" class=\"panel-body chatBody\">\n\t   <div id=\"{{id}}:recipient\">\n\t   </div>\n\t   <div>\n\t    <div id=\"{{id}}:contacts\" class=\"chatContacts\">\n\t    </div>\n\t    <div id=\"{{id}}:activeChat\" class=\"chatActive\">\n\t    </div>    \n\t   </div>\n\t  </div>\n\t </div>\n\t</div>\n\t","Notification_View":"<div id=\"{{id}}\" style=\"width:100%;\">\n\t <div id=\"{{id}}:recipient\">\n\t </div>\n\t <div id=\"{{id}}:history\"> \n\t </div>\n\t <div id=\"{{id}}:message\">\n\t </div>\n\t\n\t <div>\n\t  <div id=\"{{id}}:submit\">\n\t  </div>\n\t  <div id=\"{{id}}:addAttachment\">\n\t  </div>\n\t </div>\n\t  \n\t <div>\n\t  <img id=\"{{id}}:photo\" class=\"userPhotoBig hidden\">\n\t  </img>\n\t  <div id=\"{{id}}:inf\">\n\t  </div>\n\t  <div id=\"{{id}}:inf_tm\">\n\t  </div>\n\t </div>\n\t</div>\n\t","UserChat_View":"<div id=\"{{id}}\" class=\"chat draggable\" title=\"Чат сотрудников\">\n\t <div class=\"panel panel-collapsed\">\n\t  <div class=\"panel-heading chatBar\" >\n\t   <h4 class=\"panel-title\">Чат с сотрудниками\n\t   </h4>\n\t   <div class=\"heading-elements\">\n\t    <ui class=\"icons-list\">\n\t     <li>\n\t      <span id=\"{{id}}:unviewedMsg\" title=\"Непрочитанные сообщения\">&nbsp;\n\t      </span>\n\t     </li>\n\t     <li>\n\t      <a id=\"{{id}}:toggle\" class=\"rotate-180\" data-action=\"collapse\" title=\"Свернуть/развернуть\" href=\"#\">\n\t      </a>\n\t     </li>\n\t    </ui>\n\t   </div>\n\t  </div>\n\t  <div id=\"{{id}}:body\" class=\"panel-body chatBody\">\n\t   <div id=\"{{id}}:status\">\n\t   </div>\n\t   <div>\n\t    <div id=\"{{id}}:contacts\" class=\"chatContacts\">\n\t    </div>\n\t    <div id=\"{{id}}:activeChat\" class=\"chatActive\">\n\t    </div>    \n\t   </div>\n\t  </div>\n\t </div>\n\t</div>\n\t","VehicleScheduleEdit_View":"<table class=\"table-bordered table-responsive table-striped\">\n\t <thead>\n\t  <tr>\n\t   <th rowspan=\"2\">Отметка\n\t    <input id=\"owner_schedule_mark_all\" type=\"checkbox\" title=\"Выбрать/отменить все автомобили\"></input>\n\t   </th>\n\t   <th rowspan=\"2\">Автомобиль\n\t   </th>\n\t   <th colspan=\"{{DAY_COUNT}}\">График\n\t   </th>\n\t  </tr>\n\t  <tr>\n\t   {{#DAYS}}\n\t   <th class=\"owner_schedule_day_header{{#WEEKEND}} owner_schedule_weekend{{/WEEKEND}}\">\n\t    <span class=\"owner_schedule_head_day\">{{DAY}}</span>\n\t    <span class=\"owner_schedule_head_dow\">{{DOW}}</span>\n\t   </th>\n\t   {{/DAYS}}\n\t  </tr>\n\t </thead>\n\t <tbody>\n\t  {{#ROWS}}\n\t  <tr vehicle_id=\"{{VEHICLE_ID}}\">\n\t   <td>\n\t    <input class=\"owner_schedule_vehicle_mark\" type=\"checkbox\" title=\"Выбрать/отменить выбор автомобиля\"></input>\n\t   </td>\n\t   <td>{{VEHICLE}}\n\t   </td>\n\t   {{#DAYS}}\n\t   <td dt=\"{{DATE}}\" class=\"owner_schedule_day{{#SHIFT}} owner_schedule_shift{{/SHIFT}}{{#WEEKEND}} owner_schedule_weekend{{/WEEKEND}}\">\n\t    {{#SHIFT}}<span class=\"owner_schedule_driver\" driver_id=\"{{DRIVER_ID}}\" title=\"{{DRIVER}}\">{{DRIVER_SHORT}}</span>\n\t    <span class=\"owner_schedule_prod_base\" driver_id=\"{{PROD_BASE_ID}}\" title=\"{{PROD_BASE}}\">{{PROD_BASE_SHORT}}</span>{{/SHIFT}}\n\t    {{#NO_SHIFT}}&nbsp;{{/NO_SHIFT}}\n\t   </td>\n\t   {{/DAYS}}\n\t  </tr>\n\t  {{/ROWS}}\n\t </tbody>\n\t</table>\n\t\n\t","VehicleOwnerTotIncomeRep_View":"<div class=\"panel\">\n\t <div class=\"form-group\">\n\t  <label id=\"VehicleOwnerTotIncomeRep:balance_beg:label\" class=\"control-label col-lg-2\" for=\"VehicleOwnerTotIncomeRep:balance_beg\" name=\"label\">Остаток на {{PERIOD_FROM}}:\n\t  </label>  \n\t  <div id=\"VehicleOwnerTotIncomeRep:balance_beg:edit-cont\" class=\"input-group col-lg-2\" name=\"edit-cont\">\n\t   <input id=\"VehicleOwnerTotIncomeRep:balance_beg\" class=\"form-control\" readonly=\"readOnly\" type=\"text\" name=\"balance_beg\" autocomplete=\"off\" value=\"{{BALANCE_BEG}}\">\n\t   </input>\n\t  </div>\n\t </div>\n\t\n\t {{#VEHICLES}}\n\t <div class=\"panel veh_owner_tot_income_panel\">\n\t  <table class=\"table table-bordered table-responsive table-striped{{#TOTAL_TABLE}} veh_owner_tot_income_total_table{{/TOTAL_TABLE}}{{#NOT_TOTAL_TABLE}} veh_owner_tot_income_veh_table{{/NOT_TOTAL_TABLE}}\">\n\t   <thead>\n\t    <tr>\n\t     <th class=\"veh_owner_tot_income_th\">{{PLATE}}\n\t     </th>\n\t     {{#PERIODS}}\n\t     <th class=\"veh_owner_tot_income_th\">{{PERIOD}}\n\t     </th>\n\t     {{/PERIODS}}\n\t     <th class=\"veh_owner_tot_income_th veh_owner_tot_income_th_total\" align=\"right\">Всего\n\t     </th>\n\t    </tr>\n\t   </thead>\n\t   <tbody>\n\t    {{#ROWS}}\n\t    <tr>\n\t     <td class=\"{{ITEM_CLASS}}\">{{ITEM_NAME}}\n\t     </td>\n\t     {{#PERIODS}}\n\t     <td align=\"right\" class=\"veh_owner_tot_income_all {{ITEM_CLASS}}{{#COMMON_ITEM}} veh_owner_tot_income_common_input{{/COMMON_ITEM}}{{#NOT_COMMON_ITEM}} veh_owner_tot_income_input{{/NOT_COMMON_ITEM}}{{#ITEM_INPUT}} veh_owner_tot_income_input_edit{{/ITEM_INPUT}}{{#ITEM_INFO}} veh_owner_tot_income_info{{/ITEM_INFO}}\"\n\t     item_id=\"{{ITEM_ID}}\" vehicle_id=\"{{VEH_ID}}\" period=\"{{PERIOD}}\">{{VAL}}\n\t     </td>\n\t     {{/PERIODS}}\n\t     <td align=\"right\" class=\"veh_owner_tot_income_total {{ITEM_CLASS}}\">{{VAL_TOTAL}}\n\t     </td>\n\t    </tr>\n\t    {{/ROWS}}\n\t   </tbody>\n\t   <tfoot>\n\t    <tr>\n\t     <td>Итого\n\t     </td>\n\t     {{#PERIOD_TOTALS}}\n\t     <td align=\"right\" nowrap=\"nowrap\">{{VAL}}\n\t     </td>\n\t     {{/PERIOD_TOTALS}}\n\t     <td align=\"right\" nowrap=\"nowrap\">{{VAL_TOTAL}}\n\t     </td>\n\t    </tr>\n\t    <tr name=\"runs\">\n\t     <td>Количество рейсов\n\t     </td>\n\t     {{#PERIOD_RUNS}}\n\t     <td align=\"right\">{{VAL}}\n\t     </td>\n\t     {{/PERIOD_RUNS}}\n\t     <td align=\"right\">{{RUN_TOTAL}}\n\t     </td>\n\t    </tr>\n\t    <tr name=\"avg_runs\">\n\t     <td>Сред.количество рейсов\n\t     </td>\n\t     {{#PERIOD_AVG_RUNS}}\n\t     <td align=\"right\">{{VAL}}\n\t     </td>\n\t     {{/PERIOD_AVG_RUNS}}\n\t     <td align=\"right\">{{AVG_RUN_TOTAL}}\n\t     </td>\n\t    </tr>\n\t    <tr name=\"avg_quant\">\n\t     <td>Средний объём\n\t     </td>\n\t     {{#PERIOD_AVG_QUANT}}\n\t     <td align=\"right\">{{VAL}}\n\t     </td>\n\t     {{/PERIOD_AVG_QUANT}}\n\t     <td align=\"right\">{{AVG_QUANT_TOTAL}}\n\t     </td>\n\t    </tr>\n\t    <tr name=\"self_runs\">\n\t     <td>Количество рейсов сымовывоз\n\t     </td>\n\t     {{#PERIOD_SELF_RUNS}}\n\t     <td align=\"right\">{{VAL}}\n\t     </td>\n\t     {{/PERIOD_SELF_RUNS}}\n\t     <td align=\"right\">{{SELF_RUN_TOTAL}}\n\t     </td>\n\t    </tr>\n\t    \n\t   </tfoot>\n\t  </table>\n\t </div>\n\t {{/VEHICLES}}\n\t <div class=\"form-group\">\n\t  <label id=\"VehicleOwnerTotIncomeRep:balance_end:label\" class=\"control-label col-lg-2\" for=\"VehicleOwnerTotIncomeRep:balance_end\" name=\"label\">Остаток на {{PERIOD_TO}}:\n\t  </label>  \n\t  <div id=\"VehicleOwnerTotIncomeRep:balance_end:edit-cont\" class=\"input-group col-lg-2\" name=\"edit-cont\">\n\t   <input id=\"VehicleOwnerTotIncomeRep:balance_end\" class=\"form-control\" type=\"text\" readonly=\"readOnly\" name=\"balance_end\" autocomplete=\"off\" value=\"{{BALANCE_END}}\">\n\t   </input>\n\t  </div>\n\t </div>\n\t\n\t</div>\n\t","UserChatUserList":"<div id=\"{{id}}\">\n\t <table>\n\t {{#rows}}\n\t  <tr>\n\t   <td nowrap=\"nowrap\" title=\"{{user_title}}\" class=\"chat_user\" user_id=\"{{user_id}}\">\n\t    <img src=\"{{user_img}}\" width=\"10\" height=\"10\">\n\t    </img>\n\t    {{name}}\n\t    <span id=\"unviewd_msg_for_{{user_id}}\" class=\"{{#no_unviewed}}hidden{{/no_unviewed}} badge bg-info\" title=\"Непрочитанные сообщения от этого пользователя для меня\">\n\t     {{unviewed_msg_cnt}}\n\t    </span>\n\t   </td>\n\t  </tr>\n\t {{/rows}}\n\t </table>\n\t</div>\n\t","ShipmentDocRep_View":"<div class=\"panel panel-default\">\n\t <div class=\"panel-heading\">\n\t  <h6 class=\"panel-title\">Выбор экипажей\n\t  </h6>\n\t  <div id=\"{{ID}}:cmdFetchShipmentList\">\n\t  </div>\n\t  <div class=\"heading-elements\">\n\t   <ul class=\"icons-list\">\n\t     <li>\n\t      <a id=\"{{ID}}:vehSchedSelTgl\" data-action=\"collapse\" class=\"\">\n\t      </a>\n\t     </li>\n\t    </ul>\n\t  </div>    \n\t </div>\n\t <div class=\"panel-body ShipmentDocRep-vehicle_select\">\n\t  <ul>\n\t   {{#VEHICLES}}\n\t   <li>\n\t    <input id=\"{{ID}}:veh_sched_sel_{{VEHICLE_SCHEDULE_ID}}\" type=\"checkbox\" vehicle_schedule_id=\"{{VEHICLE_SCHEDULE_ID}}\" class=\"schedule_select\">\n\t    </input>\n\t    <label for=\"{{ID}}:veh_sched_sel_{{VEHICLE_SCHEDULE_ID}}\">{{VEHICLE_DESCR}}, {{DRIVER_DESCR}}</label>\n\t   </li>\n\t   {{/VEHICLES}}\n\t  </ul>\n\t </div>\n\t</div>\n\t\n\t<div class=\"panel panel-default\">\n\t <div class=\"panel-heading\">\n\t  <h6 class=\"panel-title\">Документы отгрузки\n\t  </h6>\n\t  <div class=\"heading-elements\">\n\t   <ul class=\"icons-list\">\n\t     <li>\n\t      <a id=\"{{ID}}:vehSchedDocTgl\" data-action=\"collapse\" class=\"\">\n\t      </a>\n\t     </li>\n\t    </ul>\n\t  </div>    \n\t </div>\n\t <div class=\"panel-body ShipmentDocRep-vehicle_select\">\n\t  <div id=\"{{ID}}:doc_grid_cont\">\n\t  </div>\n\t </div>\n\t</div>\n\t"}; 
function EditDateInlineValidation(id,options){options=options||{};options.required=(options.required==undefined)?options.required:true;options.labelCaption=(options.labelCaption!=undefined)?options.labelCaption:"Дата:";options.placeholder=options.placeholder||"ДД.ММ.ГГГГ";options.title=options.title||"Дата в формате ДД.ММ.ГГГГ";options.formatterOptions={date:true,delimiter:this.DATE_PART_SEP,datePattern:['d','m','Y']};options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:true;if(options.cmdSelect){options.buttonSelect=options.buttonSelect||new ButtonCalendar(id+':btn_calend',{"dateFormat":options.dateFormat||window.getApp().getDateFormat(),"editControl":this,"timeValueStr":options.timeValueStr,"enabled":options.enabled});}
options.events=options.events||{};options.events.focus=function(){this.setValid();};options.events.blur=function(){var v=this.getNode().value;if(v&&v.length){v=this.getValue();if(isNaN(v)){this.setNotValid(this.INVALID_DATE_MSG);}else{this.setValid();}}else{this.setValid();}};EditDateInlineValidation.superclass.constructor.call(this,id,options);}
extend(EditDateInlineValidation,EditString);EditDateInlineValidation.prototype.DATE_PART_SEP="."
EditDateInlineValidation.prototype.INVALID_DATE_MSG="Неверный формат"
EditDateInlineValidation.prototype.getValue=function(){var v=EditDateInlineValidation.superclass.getValue.call(this);if(v){var d_parts=v.split(this.DATE_PART_SEP);if(d_parts.length!=3){return null;}
return DateHelper.strtotime(d_parts[2]+"-"+d_parts[1]+"-"+d_parts[0]);}
return null;}
EditDateInlineValidation.prototype.setInitValue=function(v){this.setValue(v);this.setAttr(this.VAL_INIT_ATTR,this.getValue());}
EditDateInlineValidation.prototype.setValue=function(v){if(typeof v=="object"&&!isNaN(v)){v=DateHelper.format(v,"d/m/Y");}
EditDateInlineValidation.superclass.setValue.call(this,v);} 
App.prototype.m_predefinedItems={}; 
function ErrorControl(id,options){options=options||{};options.template=options.template||window.getApp().getTemplate("ErrorControl");options.visible=false;ErrorControl.superclass.constructor.call(this,id,"SPAN",options);}
extend(ErrorControl,Control);ErrorControl.prototype.DEF_TAG="SPAN";ErrorControl.prototype.setValue=function(val,level){level=level?level:"danger";if(!val||val.trim()==""){DOMHelper.addClass(this.getNode(),"hidden");}
else{this.setAttr("class","help-block text-"+level);var ic=DOMHelper.getElementsByAttr("icon-cancel-circle2",this.m_node,"class",true,"I");if(level!="danger"){DOMHelper.addClass(ic[0],"hidden");}
else{DOMHelper.delClass(ic[0],"hidden");}}
var node;if(this.m_node.childNodes){for(var i=0;i<this.m_node.childNodes.length;i++){if(this.m_node.childNodes[i].nodeType==3){this.m_node.childNodes[i].parentNode.removeChild(this.m_node.childNodes[i]);break;}}}
if(!node){node=document.createTextNode(val);DOMHelper.insertAfter(node,DOMHelper.firstChildElement(this.m_node));}
node.nodeValue=val;}
ErrorControl.prototype.clear=function(){this.setValue("");} 
function AppBeton(options){options=options||{};options.lang="rus";options.paginationClass=Pagination;this.setColorClass(options.servVars.color_palette||this.COLOR_CLASS);AppBeton.superclass.constructor.call(this,"AppBeton",options);if(this.storageGet(this.getSidebarId())=="xs"){$('body').toggleClass('sidebar-xs');}
this.m_phpAppServer=true;}
extend(AppBeton,App);AppBeton.prototype.DEF_phoneEditMask="7-(999)-999-99-99";AppBeton.prototype.ER_PERIOD_NOT_ALLOWED="Запрещено просматривать данный период!";AppBeton.prototype.FILE_MIME_TYPES={'audio/x-mpeg':'mpega','application/postscript':'ps','audio/x-aiff':'aiff','application/x-aim':'aim','image/x-jg':'art','video/x-ms-asf':'asx','audio/basic':'ulw','video/x-msvideo':'avi','video/x-rad-screenplay':'avx','application/x-bcpio':'bcpio','application/octet-stream':'exe','image/bmp':'dib','text/html':'html','application/x-cdf':'cdf','application/pkix-cert':'cer','application/java':'class','application/x-cpio':'cpio','application/x-csh':'csh','text/css':'css','application/msword':'doc','application/xml-dtd':'dtd','video/x-dv':'dv','application/x-dvi':'dvi','application/vnd.ms-fontobject':'eot','text/x-setext':'etx','image/gif':'gif','application/x-gtar':'gtar','application/x-gzip':'gz','application/x-hdf':'hdf','application/mac-binhex40':'hqx','text/x-component':'htc','image/ief':'ief','text/vnd.sun.j2me.app-descriptor':'jad','application/java-archive':'jar','text/x-java-source':'java','application/x-java-jnlp-file':'jnlp','image/jpeg':'jpg','application/javascript':'js','text/plain':'txt','application/json':'json','audio/midi':'midi','application/x-latex':'latex','audio/x-mpegurl':'m3u','image/x-macpaint':'pnt','text/troff':'tr','application/mathml+xml':'mathml','application/x-mif':'mif','video/quicktime':'qt','video/x-sgi-movie':'movie','audio/mpeg':'mpa','video/mp4':'mp4','video/mpeg':'mpg','video/mpeg2':'mpv2','application/x-wais-source':'src','application/x-netcdf':'nc','application/oda':'oda','application/vnd.oasis.opendocument.database':'odb','application/vnd.oasis.opendocument.chart':'odc','application/vnd.oasis.opendocument.formula':'odf','application/vnd.oasis.opendocument.graphics':'odg','application/vnd.oasis.opendocument.image':'odi','application/vnd.oasis.opendocument.text-master':'odm','application/vnd.oasis.opendocument.presentation':'odp','application/vnd.oasis.opendocument.spreadsheet':'ods','application/vnd.oasis.opendocument.text':'odt','application/vnd.oasis.opendocument.graphics-template':'otg','application/vnd.oasis.opendocument.text-web':'oth','application/vnd.oasis.opendocument.presentation-template':'otp','application/vnd.oasis.opendocument.spreadsheet-template':'ots','application/vnd.oasis.opendocument.text-template':'ott','application/ogg':'ogx','video/ogg':'ogv','audio/ogg':'spx','application/x-font-opentype':'otf','audio/flac':'flac','application/annodex':'anx','audio/annodex':'axa','video/annodex':'axv','application/xspf+xml':'xspf','image/x-portable-bitmap':'pbm','image/pict':'pict','application/pdf':'pdf','image/x-portable-graymap':'pgm','audio/x-scpls':'pls','image/png':'png','image/x-portable-anymap':'pnm','image/x-portable-pixmap':'ppm','application/vnd.ms-powerpoint':'pps','image/vnd.adobe.photoshop':'psd','image/x-quicktime':'qtif','image/x-cmu-raster':'ras','application/rdf+xml':'rdf','image/x-rgb':'rgb','application/vnd.rn-realmedia':'rm','application/rtf':'rtf','text/richtext':'rtx','application/font-sfnt':'sfnt','application/x-sh':'sh','application/x-shar':'shar','application/x-stuffit':'sit','application/x-sv4cpio':'sv4cpio','application/x-sv4crc':'sv4crc','image/svg+xml':'svgz','application/x-shockwave-flash':'swf','application/x-tar':'tar','application/x-tcl':'tcl','application/x-tex':'tex','application/x-texinfo':'texinfo','image/tiff':'tiff','text/tab-separated-values':'tsv','application/x-font-ttf':'ttf','application/x-ustar':'ustar','application/voicexml+xml':'vxml','image/x-xbitmap':'xbm','application/xhtml+xml':'xhtml','application/vnd.ms-excel':'xls','application/xml':'xsl','image/x-xpixmap':'xpm','application/xslt+xml':'xslt','application/vnd.mozilla.xul+xml':'xul','image/x-xwindowdump':'xwd','application/vnd.visio':'vsd','audio/x-wav':'wav','image/vnd.wap.wbmp':'wbmp','text/vnd.wap.wml':'wml','application/vnd.wap.wmlc':'wmlc','text/vnd.wap.wmlsc':'wmls','application/vnd.wap.wmlscriptc':'wmlscriptc','video/x-ms-wmv':'wmv','application/font-woff':'woff','application/font-woff2':'woff2','model/vrml':'wrl','application/wspolicy+xml':'wspolicy','application/x-compress':'z','application/zip':'zip'};AppBeton.prototype.m_colorClass;AppBeton.prototype.makeItemCurrent=function(elem){if(elem){var l=DOMHelper.getElementsByAttr("active",document.body,"class",true,"LI");for(var i=0;i<l.length;i++){DOMHelper.delClass(l[i],"active");}
DOMHelper.addClass(elem.parentNode,"active");if(elem.nextSibling){elem.nextSibling.style="display: block;";}}}
AppBeton.prototype.showMenuItem=function(item,c,f,t,extra,title){AppBeton.superclass.showMenuItem.call(this,item,c,f,t,extra,title);this.makeItemCurrent(item);}
AppBeton.prototype.getSidebarId=function(){return this.getServVar("user_name")+"_"+"sidebar-xs";}
AppBeton.prototype.toggleSidebar=function(){var id=this.getSidebarId();this.storageSet(id,(this.storageGet(id)=="xs")?"":"xs");}
AppBeton.prototype.formatError=function(erCode,erStr){return(erStr+((erCode)?(", код:"+erCode):""));}
AppBeton.prototype.getColorClass=function(){return this.m_colorClass;}
AppBeton.prototype.setColorClass=function(v){this.m_colorClass=v;}
AppBeton.prototype.formatCellStr=function(fVal,cell,len){var res="";if(fVal&&fVal.length>len+2){cell.setAttr("title",fVal);res=fVal.substr(0,len)+"...";}
else if(fVal){res=fVal;}
return res;}
AppBeton.prototype.formatCell=function(field,cell,len){var res="";if(field&&!field.isNull()){var f_val=field.getValue();if(typeof f_val=="object")
f_val=f_val.getDescr();res=this.formatCellStr(f_val,cell,len);}
return res;}
AppBeton.prototype.getProdSiteModel=function(){if(!this.m_prodSite_Model){var self=this;(new ProductionSite_Controller()).getPublicMethod("get_list").run({"async":false,"ok":function(resp){self.m_prodSite_Model=resp.getModel("ProductionSite_Model");}})}
return this.m_prodSite_Model;}
AppBeton.prototype.makeGridNewDataSound=function(){var audio=new Audio("img/Bell-sound-effect-ding.mp3");audio.play();}
AppBeton.prototype.callActions=function(callId,tel){var self=this;this.m_callSubscriptions=this.m_callSubscriptions||{};this.m_callSubscriptions[callId]=this.m_appSrv.subscribe({"events":[{"id":"AstCall.pickup."+callId},{"id":"AstCall.hangup."+callId}],"onEvent":(function(call_id,phone){return function(json){if(json&&json.eventId=="AstCall.pickup."+call_id){window.showTempNote("Начало разговора "+phone,null,5000);}else if(json&&json.eventId=="AstCall.hangup."+call_id){window.showTempNote("Окончания разговора "+phone,null,5000);self.m_appSrv.unsubscribe(self.m_callSubscriptions[call_id]);}}})(callId,tel)});}
AppBeton.prototype.makeCallContinue=function(tel){var pm=(new Caller_Controller()).getPublicMethod("call");pm.setFieldValue("tel",tel);var self=this;pm.run({"ok":function(resp){if(self.m_appSrv){var m=resp.getModel("Call_Model");if(m&&m.getNextRow()){self.callActions(m.getFieldValue("call_id"),tel);}}
window.showTempNote("Набор номера: "+tel,null,10000);}})}
AppBeton.prototype.makeCall=function(tel){if(!window.Caller_Controller){throw new Error("Контроллер Caller_Controlle не определен!");}
var self=this;WindowQuestion.show({"cancel":false,"text":"Набрать номер "+tel+"?","callBack":function(res){if(res==WindowQuestion.RES_YES){self.makeCallContinue(tel);}}});}
AppBeton.prototype.materialQuantCorrection=function(fields){var mat_id=fields.material_id.getValue();this.m_materialDifStore=this.m_materialDifStore||{};if(this.m_materialDifStore["id"+mat_id]==undefined){var self=this;var pm=(new RawMaterial_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",mat_id);pm.run({"ok":(function(fields,matId){return function(resp){var m=resp.getModel("RawMaterial_Model");if(m.getNextRow()){var dif_store=m.getFieldValue("dif_store");self.m_materialDifStore["id"+matId]=dif_store;self.materialQuantCorrectionCont(fields,dif_store);}}})(fields,mat_id)});}
else{this.materialQuantCorrectionCont(fields,this.m_materialDifStore["id"+mat_id]);}}
AppBeton.prototype.materialQuantCorrectionCont=function(fields,matDifStore){var self=this;var elements=[];if(matDifStore){elements.push(new ProductionSiteEdit("CorrectQuant:cont:production_sites_ref",{"labelCaption":"Завод:","required":"true","focus":(!fields.production_site_id),"enabled":(!fields.production_site_id),"value":fields.production_site_id}));}
elements.push(new EditFloat("CorrectQuant:cont:quant",{"labelCaption":"Количество:","length":19,"precision":4,"focus":!(matDifStore&&!fields.production_site_id)}));elements.push(new EditText("CorrectQuant:cont:comment_text",{"labelCaption":"Комментарий:","rows":3}));this.m_viewMatertialQuantCorrect=new EditJSON("CorrectQuant:cont",{"elements":elements});this.m_formMatertialQuantCorrect=new WindowFormModalBS("CorrectQuant",{"content":this.m_viewMatertialQuantCorrect,"cmdCancel":true,"cmdOk":true,"contentHead":"Корректировка количества "+fields.material_descr.getValue(),"onClickCancel":function(){self.closeMatertialQuantCorrect();},"onClickOk":(function(matDifStore,self){return function(){var res=self.m_viewMatertialQuantCorrect.getValueJSON();if(!res||!res.production_sites_ref||res.production_sites_ref.isNull()){throw new Error("Не указан завод!");}
self.setMatertialQuantCorrectOnServer(res,matDifStore,self.m_viewMatertialQuantCorrect.fieldValues);}})(matDifStore,self)});this.m_viewMatertialQuantCorrect.fieldValues={"material_id":fields.material_id.getValue(),"material_descr":fields.material_descr.getValue()}
this.m_formMatertialQuantCorrect.open();}
AppBeton.prototype.setMatertialQuantCorrectOnServer=function(newValues,matDifStore,fieldValues){var self=this;var pm=(new MaterialFactBalanceCorretion_Controller()).getPublicMethod("insert");pm.setFieldValue("material_id",fieldValues.material_id);pm.setFieldValue("comment_text",newValues.comment_text);pm.setFieldValue("required_balance_quant",newValues.quant);if(matDifStore){pm.setFieldValue("production_site_id",newValues.production_sites_ref.getKey("id"));}
else{pm.resetFieldValue("production_site_id");}
pm.run({"ok":function(){window.showTempNote(fieldValues.material_descr+": откорректирован остаток на утро",null,5000);self.closeMatertialQuantCorrect();self.m_refresh();}})}
AppBeton.prototype.closeMatertialQuantCorrect=function(){this.m_viewMatertialQuantCorrect.delDOM()
this.m_formMatertialQuantCorrect.delDOM();delete this.m_viewMatertialQuantCorrect;delete this.m_formMatertialQuantCorrect;}
AppBeton.prototype.getChartColors=function(){if(!this.m_chartColors){this.m_chartColors={red:'rgb(255, 99, 132)',orange:'rgb(255, 159, 64)',yellow:'rgb(255, 205, 86)',green:'rgb(75, 192, 192)',blue:'rgb(54, 162, 235)',purple:'rgb(153, 102, 255)',grey:'rgb(201, 203, 207)'};}
return this.m_chartColors;}
AppBeton.prototype.checkRoleViewRestriction=function(dateFrom,dateTo){var vars={"role_view_restriction":null};this.getSessionVarManager().get(vars);if(vars&&vars.role_view_restriction){if(dateFrom&&vars.role_view_restriction.back_days_allowed>=0){var date=DateHelper.getStartOfShift();date.setDate(date.getDate()-vars.role_view_restriction.back_days_allowed);if(dateFrom<date){return false;}}
if(dateTo&&vars.role_view_restriction.front_days_allowed>=0){var date=DateHelper.getEndOfShift();date.setDate(date.getDate()+vars.role_view_restriction.front_days_allowed);if(dateTo>date){return false;}}}
return true;}
AppBeton.prototype.sendNotificationToEntityCont=function(m,selectedRowNode){var el=[];var self=this;while(m.getNextRow()){var ct_ref=m.getFieldValue("contacts_ref");var descr=ct_ref.getDescr();var id=ct_ref.getKey("id");el.push({"id":CommonHelper.uniqid(),"onClick":(function(id,descr){return function(){self.sendNotification(new RefType({"dataType":"contacts","descr":descr,"keys":{"id":id}}));}})(id,descr),"caption":descr,"glyph":(m.getFieldValue("tm_exists"))?"glyphicon-send":""});}
if(el.length>1){(new PopUpMenu({"elements":el})).show(null,selectedRowNode);}else if(el.length==1){el[0].onClick();}}
AppBeton.prototype.sendNotificationToEntity=function(entityType,entityId,selectedRowNode){var pm=(new EntityContact_Controller()).getPublicMethod("get_list");var sep=ControllerObj.prototype.PARAM_FIELD_SEP_VAL;var c_fields="entity_type"+sep+"entity_id";var c_vals=entityType+sep+entityId;var c_sgns=ControllerObj.prototype.PARAM_SGN_EQUAL+sep+ControllerObj.prototype.PARAM_SGN_EQUAL;pm.setFieldValue("cond_fields",c_fields);pm.setFieldValue("cond_vals",c_vals);pm.setFieldValue("cond_sgns",c_sgns);pm.setFieldValue("field_sep",sep);var self=this;pm.run({"ok":function(resp){var m=resp.getModel("EntityContactList_Model");if(m){self.sendNotificationToEntityCont(m,selectedRowNode);}}});}
AppBeton.prototype.sendNotification=function(ref){var view=new TmNotification_View("notification:body:view",{"ref":ref});var closeForm=function(v,f){v.delDOM()
f.delDOM();delete v;delete f;}
var form=new WindowFormModalBS("notification",{"content":view,"cmdCancel":true,"cmdOk":true,"contentHead":"Отправка сообщения: "+ref.getDescr(),"onClickCancel":function(){closeForm(view,form);},"onClickOk":function(){view.onSubmit(function(res){if(res==true){closeForm(view,form);}});}});form.open();}
AppBeton.prototype.showUserChat=function(){var r=this.getServVar("role_id");var w=window.getWidthType();return((w!="sm"&&w!="xs")&&(r!="client"));}
AppBeton.prototype.showTmChat=function(){var r=this.getServVar("role_id");var w=window.getWidthType();return((w!="sm"&&w!="xs")&&(r=="admin"||r=="owner"||r=="manager"||r=="sales"));}
AppBeton.prototype.subscribeToEventSrv=function(clientId){AppBeton.superclass.subscribeToEventSrv.call(this,clientId);if(this.showTmChat()){var self=this;this.m_appSrv.subscribe({"events":[{"id":"TmInMessage.insert"},{"id":"TmOutMessage.sent"}],"onEvent":function(json){self.m_tmChat.onNewMessage(json);}});}
if(this.showUserChat()){var self=this;this.m_appSrv.subscribe({"events":[{"id":"UserChat.common"},{"id":this.getServVar("chat_private_id")},{"id":this.getServVar("chat_out_id")}],"onEvent":function(json){self.m_userChat.onNewMessage(json);}});}}
AppBeton.prototype.getTmUserDescr=function(ref){if(!ref)return"";var dt=ref.getDataType();var res="";if(!dt){res="<неопределен тип>";}
return(res+ref.getDescr());}
AppBeton.prototype.setContactRefOnTel=function(tel,callBack){var pm=(new ClientTel_Controller()).getPublicMethod("get_ref");pm.setFieldValue("tel",tel);pm.run({"ok":function(resp){var m=resp.getModel("Ref_Model");if(m&&m.getNextRow()){callBack(CommonHelper.unserialize(m.getFieldValue("ref")));}}})}
AppBeton.prototype.formatContactList=function(f,cell){var contact_list=f.contact_list.getValue();if(!contact_list||!contact_list.length){return;}
var cell_n=cell.getNode();var ul_tag=document.createElement("ul");for(var i=0;i<contact_list.length;i++){var tel=contact_list[i].tel;var tel_m=tel;if(tel_m&&tel_m.length==10){tel_m="+7"+tel;}
else if(tel_m&&tel_m.length==11){tel_m="+7"+tel.substr(1);}
var li_tag=document.createElement("li");li_tag.textContent=contact_list[i]["name"];if(contact_list[i]["email"]){li_tag.textContent+=", "+contact_list[i]["email"];}
if(contact_list[i]["post"]){li_tag.textContent+=", "+contact_list[i]["post"];}
if(tel_m&&tel_m.length){li_tag.textContent+=", ";var t_tag=document.createElement("A");t_tag.setAttribute("href","tel:"+tel_m);t_tag.textContent=CommonHelper.maskFormat(tel,window.getApp().getPhoneEditMask());t_tag.setAttribute("title","Позвонить на номер "+t_tag.textContent);if(window.getWidthType()!="sm"){t_tag.setAttribute("tel",tel_m);EventHelper.add(t_tag,"click",function(e){e.preventDefault();window.getApp().makeCall(this.getAttribute("tel"));});}
li_tag.appendChild(t_tag);}
ul_tag.appendChild(li_tag);}
cell_n.appendChild(ul_tag);}
AppBeton.prototype.TMInviteContact=function(contactRef,callBack){var pm=(new TmOutMessage_Controller()).getPublicMethod("tm_invite_contact");pm.setFieldValue("contact_id",contactRef.getKey("id"));window.setGlobalWait(true);pm.run({"all":function(){window.setGlobalWait(false);if(callBack){callBack();}},"ok":function(){window.showTempNote("Отправлено приглашение в Telegram",null,5000);}});}
AppBeton.prototype.selectLoginRole=function(){var allowed_roles=this.getServVar("allowed_roles");if(!this.m_allowed_roles&&!allowed_roles||!allowed_roles.length){return;}
if(!this.m_allowed_roles&&typeof(allowed_roles)=="string"){this.m_allowed_roles=CommonHelper.unserialize(allowed_roles);}
if(!this.m_allowed_roles.length){return;}
var role_id=this.getServVar("role_id");var opts=[];for(var i=0;i<this.m_allowed_roles.length;i++){opts.push(new EditSelectOption("selectLoginRole:cont:role_id:"+this.m_allowed_roles[i].id,{"checked":(this.m_allowed_roles[i].id==role_id),"value":this.m_allowed_roles[i].id,"descr":this.m_allowed_roles[i].descr}));}
this.m_viewSelectLoginRole=new EditJSON("selectLoginRole:cont",{"elements":[new EditSelect("selectLoginRole:cont:role_id",{"addNotSelected":false,"elements":opts})]});var self=this;this.m_formSelectLoginRole=new WindowFormModalBS("selectLoginRole",{"content":this.m_viewSelectLoginRole,"cmdCancel":true,"cmdOk":true,"contentHead":"Смена роли пользователя","onClickCancel":function(){self.closeSelectLoginRole();},"onClickOk":(function(self){return function(){var res=self.m_viewSelectLoginRole.getValueJSON();self.closeSelectLoginRole();if(!res||!res.role_id){throw new Error("Не указана роль!");}
self.setSelectLoginRoleOnServer(res.role_id);}})(self)});this.m_formSelectLoginRole.open();}
AppBeton.prototype.setSelectLoginRoleOnServer=function(roleId){if(roleId==this.getServVar("role_id")){this.closeSelectLoginRole();return;}
const self=this;const pm=(new User_Controller()).getPublicMethod("select_login_role");pm.setFieldValue("role_id",roleId);pm.run({"ok":function(resp){if(resp){console.log("redirecting:"+document.location.href)}}});}
AppBeton.prototype.closeSelectLoginRole=function(){if(this.m_viewSelectLoginRole){this.m_viewSelectLoginRole.delDOM()
delete this.m_viewSelectLoginRole;}
if(this.m_formSelectLoginRole){this.m_formSelectLoginRole.delDOM();delete this.m_formSelectLoginRole;}}
AppBeton.prototype.containerHeight=function(){var availableHeight=$(window).height()-$('.page-container').offset().top-$('.navbar-fixed-bottom').outerHeight();$('.page-container').attr('style','min-height:'+availableHeight+'px');}
AppBeton.prototype.panelToggle=function(panelNode){var $panelCollapse=$(panelNode).parent().parent().parent().parent().nextAll();$(panelNode).parents('.panel').toggleClass('panel-collapsed');$(panelNode).toggleClass('rotate-180');this.containerHeight();$panelCollapse.slideToggle(150);}
AppBeton.prototype.panelSaveState=function(target){if(target.id&&window["localStorage"]){var v=localStorage.getItem(target.id);localStorage.setItem(target.id,(v==1)?0:1);}}
AppBeton.prototype.addCollapseOnClick=function(callbacks){var self=this;$('.panel-collapsed').children('.panel-heading').nextAll().hide();$('.panel-collapsed').find('[data-action=collapse]').addClass('rotate-180');$('.panel [data-action=collapse]').click(function(e){e.preventDefault();if(callbacks&&callbacks[e.target.id]&&DOMHelper.hasClass(e.target,"rotate-180")){var panel_cont=this;callbacks[e.target.id].call(this,function(){self.panelToggle(panel_cont);self.panelSaveState(e.target);});}else{self.panelToggle(this);self.panelSaveState(e.target);}});if(window["localStorage"]){var panels=DOMHelper.getElementsByAttr("collapse",document.body,"data-action",false);for(var i=0;i<panels.length;i++){if(panels[i].id){var v=localStorage.getItem(panels[i].id);if(v==1){self.panelToggle(panels[i]);}}}}}
AppBeton.prototype.initViewPanels=function(view){var self_id=view.getId();if(window["localStorage"]){var p_order=localStorage.getItem(self_id+"PanelOrder");if(p_order){panel_order=CommonHelper.unserialize(p_order);var l=DOMHelper.getElementsByAttr("draggable",view.m_node,"class",false);for(i=0;i<panel_order.length;i++){var n=document.getElementById(panel_order[i]);if(n){n.parentNode.append(n);}}}}
DOMHelper.show(self_id+":panelCont");view.m_panels=[];var l=DOMHelper.getElementsByAttr("draggable",view.m_node,"class",false);for(i=0;i<l.length;i++){var obj={"drag":new DragObject(l[i],{"offsetY":0,"offsetX":0}),"drop":new DropTarget(l[i])};obj.drop.accept=function(dragObject){var drag_n=dragObject.element;drag_n.parentNode.insertBefore(drag_n,this.element);if(window["localStorage"]){var p_order=[];var l=DOMHelper.getElementsByAttr("draggable",drag_n.parentNode,"class",false);for(i=0;i<l.length;i++){p_order.push(l[i].id)}
localStorage.setItem(self_id+"PanelOrder",CommonHelper.serialize(p_order));}};view.m_panels.push(obj);}}
AppBeton.prototype.getChatFileRef=function(chatFolder,fileId){return"output/"+chatFolder+"/"+fileId;}
AppBeton.prototype.htmlTagVideo=function(msg,chat){var href=this.getChatFileRef(chat,msg.video.file_unique_id);var mimeType=msg.video.mime_type;var w=msg.video.width
var h=msg.video.height;var caption=(msg.caption&&msg.caption.length)?msg.caption:"Видео";var tag=document.createElement("a");tag.href="#";tag.textContent=(caption&&caption.length)?caption:"Видео";tag.title="Кликните для открытия видео";EventHelper.add(tag,"click",(function(href,mimeType,w,h){return function(){var win=window,doc=document,docElem=doc.documentElement,body=doc.getElementsByTagName('body')[0],x=(win.innerWidth||docElem.clientWidth||body.clientWidth)-10,y=(win.innerHeight||docElem.clientHeight||body.clientHeight)-150;var img_w=w;var img_h=h;if(y<h){var k=y/h;img_h=y;img_w=Math.round(img_h*k);}
(new WindowFormModalBS("TmRes",{"dialogWidth":y+"px","cmdOk":true,"cmdCancel":false,"onClickOk":function(){this.close();},"cmdClose":true,"content":new ControlContainer("TmRes:view","VIDEO",{"elements":[new Control("TmRes:view:source","source",{"attrs":{"src":href,"type":mimeType}})],"attrs":{"class":"video-js","controls":"controls","data-setup":"{}","preload":"auto","width":img_w,"height":img_h}})})).open();}})(href,mimeType,w,h));return tag;}
AppBeton.prototype.htmlTagAudio=function(msg,tagId,chat){var recHref=this.getChatFileRef(chat,msg[tagId].file_unique_id);var caption=(msg.caption&&msg.caption.length)?msg.caption:"Аудио файл";var tag=document.createElement("audio");tag.setAttribute("controls",null);tag.setAttribute("src",recHref);var subst=document.createElement("A");subst.setAttribute("href",recHref);subst.setAttribute("target","_blank");subst.textContent=caption;tag.appendChild(subst);return tag;}
AppBeton.prototype.htmlTagDocument=function(msg,chat){if(!msg.document){return;}
var caption=(msg.caption&&msg.caption.length)?msg.caption:(msg.document.file_name?msg.document.file_name:"Документ");var href=this.getChatFileRef(chat,msg.document.file_unique_id);var tag=document.createElement("A");tag.textContent=caption;tag.href=href;if(msg.document.file_name){tag.download=msg.document.file_name;}else if(msg.document.mime_type){tag.download="Документ."+this.FILE_MIME_TYPES[msg.document.mime_type];}
if(msg.document&&msg.document.thumb){tag.target="_blank";var prHref=this.getChatFileRef(chat,msg.document.thumb.file_unique_id);var prW=msg.document.thumb.width;var prH=msg.document.thumb.height;var img=document.createElement("IMG");img.src=prHref;img.width=prW;img.height=prH;img.alt="<файл не найден>";tag.appendChild(img);}else if(msg.document.file_name&&(!caption||!caption.length)){tag.textContent=msg.document.file_name;}else if(msg.document.file_name){var img=document.createElement("IMG");img.src="img/paperClip.png";img.width=30;img.height=30;img.alt="<файл не найден>";tag.appendChild(img);}
return tag;}
AppBeton.prototype.htmlTagPhoto=function(msg,chat){var prHref=this.getChatFileRef(chat,msg.photo[0].file_unique_id);var prW=msg.photo[0].width;var prH=msg.photo[0].height;var href=this.getChatFileRef(chat,msg.photo[msg.photo.length-1].file_unique_id);var w=msg.photo[msg.photo.length-1].width;var h=msg.photo[msg.photo.length-1].height;var caption=(msg.caption&&msg.caption.length)?msg.caption:"Фото";var tag=document.createElement("A");tag.textContent=caption;var img=document.createElement("IMG");img.src=prHref;img.width=prW;img.height=prH;img.alt="<файл не найден>";tag.appendChild(img);EventHelper.add(tag,"click",(function(href,w,h){return function(){var win=window,doc=document,docElem=doc.documentElement,body=doc.getElementsByTagName('body')[0],x=(win.innerWidth||docElem.clientWidth||body.clientWidth)-10,y=(win.innerHeight||docElem.clientHeight||body.clientHeight)-150;var img_w=w;var img_h=h;if(y<h){var k=y/h;img_h=y;img_w=Math.round(img_h*k);}
(new WindowFormModalBS("TmRes",{"dialogWidth":y+"px","cmdOk":true,"cmdCancel":false,"onClickOk":function(){this.close();},"cmdClose":true,"content":new Control("TmRes:view","IMG",{"attrs":{"src":href,"width":img_w,"height":img_h}})})).open();}})(href,w,h));return tag;}
AppBeton.prototype.htmlTagSticker=function(msg,chat){var prHref=this.getChatFileRef(chat,msg.sticker.thumbnail.file_unique_id);var prW=msg.sticker.thumbnail.width;var prH=msg.sticker.thumbnail.height;var href=this.getChatFileRef(chat,msg.sticker.file_unique_id);var w=msg.sticker.width;var h=msg.sticker.height;var caption=(msg.caption&&msg.caption.length)?msg.caption:"Стикер";var tag=document.createElement("A");tag.textContent=caption;var img=document.createElement("IMG");img.src=prHref;img.width=prW;img.height=prH;img.alt="<файл не найден>";tag.appendChild(img);EventHelper.add(tag,"click",(function(href,w,h){return function(){var win=window,doc=document,docElem=doc.documentElement,body=doc.getElementsByTagName('body')[0],x=(win.innerWidth||docElem.clientWidth||body.clientWidth)-10,y=(win.innerHeight||docElem.clientHeight||body.clientHeight)-150;var img_w=w;var img_h=h;if(y<h){var k=y/h;img_h=y;img_w=Math.round(img_h*k);}
(new WindowFormModalBS("TmRes",{"dialogWidth":y+"px","cmdOk":true,"cmdCancel":false,"onClickOk":function(){this.close();},"cmdClose":true,"content":new Control("TmRes:view","IMG",{"attrs":{"src":href,"width":img_w,"height":img_h}})})).open();}})(href,w,h));return tag;}
AppBeton.prototype.addVideoPlayerSupport=function(){import('https://vjs.zencdn.net/8.10.0/video-js.css');import('https://vjs.zencdn.net/8.10.0/video.min.js');}
AppBeton.prototype.tmMessageFormat=function(fields,cell){var msg=fields["message"].getValue();let chat="tm";if(msg.sticker){var tag=window.getApp().htmlTagSticker(msg,chat);cell.getNode().appendChild(tag);}else if(msg.document){var tag=window.getApp().htmlTagDocument(msg,chat);cell.getNode().appendChild(tag);}else if(msg.video){var tag=window.getApp().htmlTagVideo(msg,chat);cell.getNode().appendChild(tag);}else if(msg.audio){var tag=window.getApp().htmlTagAudio(msg,"audio",chat);cell.getNode().appendChild(tag);}else if(msg.voice){var tag=window.getApp().htmlTagAudio(msg,"voice",chat);cell.getNode().appendChild(tag);}else if(msg.animation){var tag=window.getApp().htmlTagVideo(msg,chat);cell.getNode().appendChild(tag);}else if(msg.text){return msg.text;}else if(msg.photo&&CommonHelper.isArray(msg.photo)&&msg.photo.length){var tag=window.getApp().htmlTagPhoto(msg);cell.getNode().appendChild(tag);}
return"";}
AppBeton.prototype.getChatStatusRef=function(){if(!this.m_chatStatusRef){this.m_chatStatusRef=CommonHelper.unserialize(this.getServVar("chat_statuses_ref"));}
return this.m_chatStatusRef;}
AppBeton.prototype.controlePumpVehicle=function(){let role_id=this.getServVar("role_id");return!(role_id=="admin"||role_id=="boss"||role_id=="owner");}
AppBeton.prototype.openHrefDownload=function(cont,pm,viewId,href){var wnd=pm.openHref(viewId,href);if(pm.fieldExists("inline")&&(!wnd||!wnd.top)){pm.setFieldValue("inline",0);pm.download();cont.showTempWarn("Всплывающие окна заблокированы, файл открыт в режиме скачивания",null,10000);}} 
function Pagination(id,options){options=options||{};options.ctrlGoFirstCaption="⇤";options.ctrlGoNextCaption="⇢";options.ctrlGoPrevCaption="⇠";options.ctrlGoLastCaption="⇥";options.ctrlGoFirstGlyph="";options.ctrlGoNextGlyph="";options.ctrlGoPrevGlyph="";options.ctrlGoLastGlyph="";options.pageClassName="page";options.pageTagName="A";options.pageCurClassName="page active";options.pagesTagName="UL";options.pagesClassName="pagination-flat pagination-sm twbs-prev-next pagination";Pagination.superclass.constructor.call(this,id,options);}
extend(Pagination,GridPagination);Pagination.prototype.createPageElement=function(options){var cont_class=options.className;options.className="page-link";return(new ControlContainer(null,"LI",{"className":cont_class,"elements":[new Control(null,"A",options)]}));} 
function ViewSectionSelect(id,options){options=options||{};options.model=new ViewSectionList_Model();options.required=true;if(options.labelCaption!=""){options.labelCaption=options.labelCaption||this.LABEL_CAPTION;}
options.keyIds=options.keyIds||["section"];options.modelKeyFields=[options.model.getField("section")];options.modelDescrFields=[options.model.getField("section")];var contr=new View_Controller();options.readPublicMethod=contr.getPublicMethod("get_section_list");ViewSectionSelect.superclass.constructor.call(this,id,options);}
extend(ViewSectionSelect,EditSelectRef); 
function UserEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Пользователь:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=UserList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=User_Form;options.acMinLengthForQuery=1;options.acController=new User_Controller();options.acModel=new UserList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";UserEditRef.superclass.constructor.call(this,id,options);}
extend(UserEditRef,EditRef); 
function ViewEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||this.LABEL_CAPTION;}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["viewId"];options.selectWinClass=ViewList_Form;options.selectDescrIds=options.selectDescrIds||["user_descr"];options.editWinClass=null;options.acMinLengthForQuery=1;options.acController=new View_Controller();options.acModel=new ViewList_Model();options.acPatternFieldId=options.acPatternFieldId||"user_descr";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("user_descr")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";this.m_menuTree=options.menuTree;var self=this;this.m_origOnSelect=options.onSelect;options.onSelect=function(fields){if(self.m_menuTree){self.m_menuTree.m_editViewDescr=fields.user_descr.getValue();}
if(self.m_origOnSelect){self.m_origOnSelect.call(self,fields);}}
ViewEditRef.superclass.constructor.call(this,id,options);}
extend(ViewEditRef,EditRef); 
function UserNameEdit(id,options){options=options||{};if(options.labelCaption==undefined){options.labelCaption="Наименование:";}
options.placeholder="Краткое наименование пользователя";options.required=true;options.maxLength=50;options.minLength=this.NAME_MIN_LEN;options.cmdClear=false;this.m_takenNames=[];UserNameEdit.superclass.constructor.call(this,id,options);}
extend(UserNameEdit,EditString);UserNameEdit.prototype.m_nameCheckTimeout;UserNameEdit.prototype.m_takenNames;UserNameEdit.prototype.m_takenError;UserNameEdit.prototype.NAME_MIN_LEN=3;UserNameEdit.prototype.NAME_CHECK_DELAY=1000;UserNameEdit.prototype.checkName=function(){if(this.m_nameCheckTimeout){window.clearTimeout(this.m_nameCheckTimeout);}
var self=this;var v=this.getValue();if(!v||v.length<=this.NAME_MIN_LEN){this.getErrorControl().setValue("");return;}
if(CommonHelper.inArray(v,this.m_takenNames)>=0){this.getErrorControl().setValue(this.m_takenError);return;}
this.m_nameCheckTimeout=window.setTimeout(function(){var pm=new User_Controller().getPublicMethod("name_check");pm.setFieldValue("name",self.getValue());pm.run({"ok":function(resp){self.getErrorControl().setValue("");},"fail":function(resp,errCode,errStr){self.m_takenError=errStr;self.getErrorControl().setValue(errStr);self.m_takenNames.push(v);}});},this.NAME_CHECK_DELAY);} 
function UserPwdEdit(id,options){options=options||{};options.maxLength=50;options.minLength=this.PWD_MIN_LEN;options.cmdClear=false;var self=this;options.events=options.events||{};this.m_origKeyup=options.events.keyup;options.events.keyup=function(e){if(self.m_origKeyup){self.m_origKeyup.call(self,e);}
e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){e.preventDefault();e.stopPropagation();}
self.m_view.getElement("pwd").checkPassDelay();}
this.m_view=options.view;UserPwdEdit.superclass.constructor.call(this,id,options);}
extend(UserPwdEdit,EditPassword);UserPwdEdit.prototype.m_nameCheckTimeout;UserPwdEdit.prototype.m_takenNames;UserPwdEdit.prototype.m_takenError;UserPwdEdit.prototype.PWD_CHECK_DELAY=500;UserPwdEdit.prototype.PWD_MIN_LEN="6";UserPwdEdit.prototype.m_pwdCheckTimeout;UserPwdEdit.prototype.m_view;UserPwdEdit.prototype.checkPassDelay=function(){if(this.m_pwdCheckTimeout){window.clearTimeout(this.m_pwdCheckTimeout);}
var self=this;this.m_pwdCheckTimeout=window.setTimeout(function(){self.checkPass();},this.PWD_CHECK_DELAY);}
UserPwdEdit.prototype.checkPass=function(){var pwd=this.m_view.getElement("pwd").getValue();if(pwd&&pwd.length){var pwd_conf=this.m_view.getElement("pwd_confirm").getValue();if(pwd.length<this.PWD_MIN_LEN){this.m_view.getElement("pwd").setNotValid(this.TXT_PWD_TOO_SHORT);this.m_view.getElement("pwd_confirm").setValid();}
else if(pwd_conf&&pwd_conf.length&&pwd!=pwd_conf){this.m_view.getElement("pwd_confirm").setNotValid(this.TXT_PWD_ER);this.m_view.getElement("pwd").setValid();}
else if(pwd_conf&&pwd_conf.length){this.m_view.getElement("pwd_confirm").setValid();this.m_view.getElement("pwd").setValid();}
else{this.m_view.getElement("pwd").setValid();}}} 
UserPwdEdit.prototype.TXT_PWD_TOO_SHORT="Длина пароля должна быть не меньше "+UserPwdEdit.prototype.PWD_MIN_LEN+" символов.";UserPwdEdit.prototype.TXT_PWD_ER="Пароли не совпадают"; 
function DriverEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Водитель:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=DriverList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=null;options.acMinLengthForQuery=1;options.acController=new Driver_Controller(options.app);options.acModel=new DriverList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";DriverEditRef.superclass.constructor.call(this,id,options);}
extend(DriverEditRef,EditRef); 
function VehicleOwnerEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Владелец:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=VehicleOwnerList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=null;options.acMinLengthForQuery=1;options.acController=new VehicleOwner_Controller();options.acModel=new VehicleOwner_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";VehicleOwnerEdit.superclass.constructor.call(this,id,options);}
extend(VehicleOwnerEdit,EditRef); 
function MakeEdit(id,options){options=options||{};if(options.labelCaption==undefined){options.labelCaption="Марка:";}
options.maxLength=200;options.cmdAutoComplete=true;options.acMinLengthForQuery=1;options.acController=new Vehicle_Controller();options.acModel=new VehicleMakeList_Model();options.acPublicMethod=options.acController.getPublicMethod("complete_makes")
options.acPatternFieldId=options.acPatternFieldId||"make";options.acKeyFields=options.acKeyFields||[options.acModel.getField("make")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("make")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";MakeEdit.superclass.constructor.call(this,id,options);}
extend(MakeEdit,EditString); 
function FeatureEdit(id,options){options=options||{};if(options.labelCaption==undefined){options.labelCaption="Свойство:";}
options.maxLength=50;options.cmdAutoComplete=true;options.acMinLengthForQuery=1;options.acController=new Vehicle_Controller();options.acModel=new VehicleFeatureList_Model();options.acPublicMethod=options.acController.getPublicMethod("complete_features")
options.acPatternFieldId=options.acPatternFieldId||"feature";options.acKeyFields=options.acKeyFields||[options.acModel.getField("feature")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("feature")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";FeatureEdit.superclass.constructor.call(this,id,options);}
extend(FeatureEdit,EditString); 
function TrackerEdit(id,options){options=options||{};if(options.labelCaption==undefined){options.labelCaption="Трэкер:";}
options.maxLength=15;TrackerEdit.superclass.constructor.call(this,id,options);}
extend(TrackerEdit,EditString); 
function LangEditRef(id,options){options=options||{};options.model=new Lang_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Язык:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new Lang_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");LangEditRef.superclass.constructor.call(this,id,options);}
extend(LangEditRef,EditSelectRef); 
function GPSTrackerRef(id,options){options=options||{};if(options.labelCaption==undefined){options.labelCaption="GPS трэкер:";}
options.maxLength=50;options.cmdAutoComplete=true;options.acMinLengthForQuery=1;options.acController=new GPSTracker_Controller();options.acModel=new GPSTracker_Model();options.acPublicMethod=options.acController.getPublicMethod("complete")
options.acPatternFieldId=options.acPatternFieldId||"id";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("id")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";GPSTrackerRef.superclass.constructor.call(this,id,options);}
extend(GPSTrackerRef,EditString); 
function EditPeriodShift(id,options){options=options||{};options.template=options.template||window.getApp().getTemplate("EditPeriodShift");options.cmdPeriodSelect=false;options.downFastTitle="Предыдущая неделя";options.downTitle="Предыдущая смена";options.upFastTitle="Следующая неделя";options.upTitle="Следующая смена";options.cmdControlTo=false;options.cmdControlFrom=false;options.periodSelectClass=PeriodSelectBeton;options.periodSelectOptions={"periodShift":true};var constants={"first_shift_start_time":null,"shift_length_time":null};window.getApp().getConstantManager().get(constants);this.m_shiftLengthMS=DateHelper.timeToMS(constants.shift_length_time.getValue());this.m_shiftStartMS=DateHelper.timeToMS(constants.first_shift_start_time.getValue());if(options.dateFrom){options.dateFrom=new Date(options.dateFrom.getTime()+this.m_shiftStartMS);}
this.m_dateFrom=DateHelper.getStartOfShift(options.dateFrom);this.calcDateTo();this.m_daysOfWeek=['Воскресенье','Понедельник','Вторник','Среда','Четверг','Пятница','Суббота'];this.m_dateTempl="d/m";this.m_filters=options.filters;this.m_dateFormat=options.dateFormat;this.m_onChange=options.onChange;EditPeriodShift.superclass.constructor.call(this,id,options);}
extend(EditPeriodShift,EditPeriodDate);EditPeriodShift.prototype.FAST_GO_SHIFT_CNT=7;EditPeriodShift.prototype.m_dateFrom;EditPeriodShift.prototype.m_dateTo;EditPeriodShift.prototype.m_timeFrom;EditPeriodShift.prototype.shiftLengthMS;EditPeriodShift.prototype.addControls=function(){this.addElement(this.m_controlDownFast);this.addElement(this.m_controlDown);var self=this;this.addElement(new Label(this.getId()+":inf",{"caption":this.getPeriodDescr(),"events":{"click":function(){self.picCustomDate();}}}));this.addElement(this.m_controlUp);this.addElement(this.m_controlUpFast);}
EditPeriodShift.prototype.picCustomDate=function(){var self=this;var p=$(this.getElement("inf").getNode());p.datepicker({format:{toDisplay:function(date,format,language){self.setDateFrom(new Date(date.getTime()+self.m_shiftStartMS+date.getTimezoneOffset()*60*1000));},toValue:function(date,format,language){}},language:"ru",daysOfWeekHighlighted:"0,6",autoclose:true,todayHighlight:true,orientation:"bottom right",showOnFocus:false,clearBtn:true});p.on('hide',function(ev){});p.datepicker("show");}
EditPeriodShift.prototype.goFast=function(sign){this.setDateFrom(new Date(this.m_dateFrom.getTime()+this.m_shiftLengthMS*this.FAST_GO_SHIFT_CNT*sign),true);}
EditPeriodShift.prototype.go=function(sign){this.setDateFrom(new Date(this.m_dateFrom.getTime()+this.m_shiftLengthMS*sign),true);}
EditPeriodShift.prototype.setDateFrom=function(dt){if(!window.getApp().checkRoleViewRestriction(dt,dt)){return;}
this.m_dateFrom=dt;this.calcDateTo();this.updateDateInf();if(this.m_grid){this.applyFilter();this.m_grid.onRefresh();}
else if(this.m_onChange){this.m_onChange(this.m_dateFrom,this.m_dateTo);}}
EditPeriodShift.prototype.getDateFrom=function(){return this.m_dateFrom;}
EditPeriodShift.prototype.getDateTo=function(){return this.m_dateTo;}
EditPeriodShift.prototype.calcDateTo=function(){var dt=new Date(this.m_dateFrom.getTime()+this.m_shiftLengthMS-1000);if(!window.getApp().checkRoleViewRestriction(dt,dt)){return;}
this.m_dateTo=dt;}
EditPeriodShift.prototype.updateDateInf=function(){this.getElement("inf").setValue(this.getPeriodDescr());}
EditPeriodShift.prototype.getPeriodDescr=function(){return(DateHelper.format(this.m_dateFrom,this.m_dateTempl)+" "+this.m_daysOfWeek[this.m_dateFrom.getDay()]);}
EditPeriodShift.prototype.applyFilter=function(v){if(this.m_filters&&this.m_filters.length){this.m_filters[0].val=DateHelper.format(this.m_dateFrom,this.m_dateFormat);if(this.m_filters.length>1){this.m_filters[1].val=DateHelper.format(this.m_dateTo,this.m_dateFormat);}}}
EditPeriodShift.prototype.setGrid=function(v){this.m_grid=v;if(this.m_filters&&this.m_filters.length){this.applyFilter();for(var i=0;i<this.m_filters.length;i++){this.m_grid.setFilter(this.m_filters[i]);}}}
EditPeriodShift.prototype.setPredefinedPeriod=function(per){if(per=="shift"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.dateStart());this.setCtrlDateTime(this.getControlTo(),new Date(DateHelper.dateStart().getTime()+24*60*60*1000));}
else if(per=="prev_shift"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.dateStart(new Date(DateHelper.time().getTime()-24*60*60*1000)));this.setCtrlDateTime(this.getControlTo(),new Date(DateHelper.dateStart().getTime()-24*60*60*1000));}
EditPeriodShift.superclass.setPredefinedPeriod.call(this,per);} 
function EditPeriodMonth(id,options){options=options||{};options.template=options.template||window.getApp().getTemplate("EditPeriodMonth");options.cmdPeriodSelect=false;options.downTitle=options.downTitle||"Предыдущий месяц";options.upTitle=options.upTitle||"Следующий месяц";options.cmdControlTo=false;options.cmdControlFrom=false;options.cmdDownFast=false;options.cmdUpFast=false;options.periodSelectClass=PeriodSelectBeton;options.periodSelectOptions={"periodShift":true};this.m_dateFrom=options.dateFrom;if(!this.m_dateFrom)this.m_dateFrom=this.getPeriodFrom();this.calcDateTo();this.m_filters=options.filters;this.m_dateFormat=options.dateFormat;this.m_onChange=options.onChange;EditPeriodMonth.superclass.constructor.call(this,id,options);}
extend(EditPeriodMonth,EditPeriodDate);EditPeriodMonth.prototype.m_dateFrom;EditPeriodMonth.prototype.m_dateTo;EditPeriodMonth.prototype.m_timeFrom;EditPeriodMonth.prototype.shiftLengthMS;EditPeriodMonth.prototype.INCORRECT_VAL_CLASS="error";EditPeriodMonth.prototype.getPeriodFrom=function(dt){return DateHelper.monthStart(dt);}
EditPeriodMonth.prototype.addControls=function(){this.addElement(this.m_controlDownFast);this.addElement(this.m_controlDown);var self=this;this.addElement(new Label(this.getId()+":inf",{"caption":this.getPeriodDescr(),"events":{"click":function(){self.picCustomDate();}}}));this.addElement(this.m_controlUp);this.addElement(this.m_controlUpFast);this.m_errorControl=new ErrorControl(this.getId()+":error");this.addElement(this.m_errorControl);}
EditPeriodMonth.prototype.picCustomDate=function(){var self=this;var p=$(this.getElement("inf").getNode());p.datepicker({format:{toDisplay:function(date,format,language){var constants={"first_shift_start_time":null};window.getApp().getConstantManager().get(constants);date=DateHelper.dateStart(date);date=new Date(date.getTime()+DateHelper.timeToMS(constants.first_shift_start_time.getValue()));self.setDateFrom(date);},toValue:function(date,format,language){}},language:"ru",daysOfWeekHighlighted:"0,6",autoclose:true,todayHighlight:true,orientation:"bottom right",showOnFocus:false,clearBtn:true});p.on("hide",function(ev){});p.datepicker("show");}
EditPeriodMonth.prototype.go=function(sign){var t=(sign>0)?this.m_dateTo.getTime():this.m_dateFrom.getTime();this.setDateFrom(DateHelper.monthStart(new Date(t+sign*24*60*60*1000)));}
EditPeriodMonth.prototype.setDateFrom=function(dt){this.m_dateFrom=this.getPeriodFrom(dt);this.calcDateTo();this.updateDateInf();if(this.m_grid){this.applyFilter();this.m_grid.onRefresh();}
else if(this.m_onChange){this.m_onChange(this.m_dateFrom,this.m_dateTo);}}
EditPeriodMonth.prototype.getDateFrom=function(){return this.m_dateFrom;}
EditPeriodMonth.prototype.getDateTo=function(){return this.m_dateTo;}
EditPeriodMonth.prototype.calcDateTo=function(){this.m_dateTo=DateHelper.monthEnd(this.m_dateFrom);}
EditPeriodMonth.prototype.updateDateInf=function(){this.getElement("inf").setValue(this.getPeriodDescr());}
EditPeriodMonth.prototype.getPeriodDescr=function(){return(DateHelper.format(this.m_dateFrom,"FF Y"));}
EditPeriodMonth.prototype.applyFilter=function(v){if(this.m_filters&&this.m_filters.length){this.m_filters[0].val=DateHelper.format(this.m_dateFrom,this.m_dateFormat);if(this.m_filters.length>1){this.m_filters[1].val=DateHelper.format(this.m_dateTo,this.m_dateFormat);}}}
EditPeriodMonth.prototype.setGrid=function(v){this.m_grid=v;if(this.m_filters&&this.m_filters.length){this.applyFilter();for(var i=0;i<this.m_filters.length;i++){this.m_grid.setFilter(this.m_filters[i]);}}}
EditPeriodMonth.prototype.isNull=function(){return isNaN(this.m_dateFrom.getTime());}
EditPeriodMonth.prototype.focus=function(){}
EditPeriodMonth.prototype.reset=function(){this.m_dateFrom=undefined;this.m_dateTo=undefined;}
EditPeriodMonth.prototype.setValid=function(){DOMHelper.delClass(this.m_node,this.INCORRECT_VAL_CLASS);this.m_errorControl.clear();}
EditPeriodMonth.prototype.setNotValid=function(erStr){DOMHelper.addClass(this.m_node,this.INCORRECT_VAL_CLASS);this.m_errorControl.setValue(erStr);} 
function EditPeriodWeek(id,options){options=options||{};options.downTitle="Предыдущая неделя";options.upTitle="Следующая неделя";EditPeriodWeek.superclass.constructor.call(this,id,options);}
extend(EditPeriodWeek,EditPeriodMonth);EditPeriodWeek.prototype.getPeriodFrom=function(dt){return DateHelper.weekStart(dt);}
EditPeriodWeek.prototype.go=function(sign){var t=(sign>0)?this.m_dateTo.getTime():this.m_dateFrom.getTime();this.setDateFrom(DateHelper.weekStart(new Date(t+sign*24*60*60*1000)));}
EditPeriodWeek.prototype.calcDateTo=function(){this.m_dateTo=DateHelper.weekEnd(this.m_dateFrom);}
EditPeriodWeek.prototype.getPeriodDescr=function(){return(DateHelper.format(this.m_dateFrom,"d FF")+" (Пн.) - "+DateHelper.format(this.m_dateTo,"d FF")+" (Вс.)");} 
function EditPeriodDateShift(id,options){options=options||{};var constants={"first_shift_start_time":null,"shift_length_time":null};window.getApp().getConstantManager().get(constants);options.downTitle="Предыдущая смена";options.upTitle="Следующая смена";options.periodSelectClass=PeriodSelectBeton;options.periodSelectOptions=options.periodSelectOptions||{"periodShift":true};this.DEF_FROM_TIME=constants.first_shift_start_time.getValue();var sh_end=DateHelper.getEndOfShift();var h=sh_end.getHours();var m=sh_end.getMinutes();var s=sh_end.getSeconds();this.DEF_TO_TIME=((h<10)?"0":"")+h.toString()+":"+((m<10)?"0":"")+m.toString()+":"+((s<10)?"0":"")+s.toString();EditPeriodDateShift.superclass.constructor.call(this,id,options);}
extend(EditPeriodDateShift,EditPeriodDateTime);EditPeriodDateShift.prototype.setPredefinedPeriod=function(per){if(per=="shift"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.dateStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.dateEnd())}else if(per=="prev_shift"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.dateStart(new Date(DateHelper.time().getTime()-24*60*60*1000)));this.setCtrlDateTime(this.getControlTo(),new Date(DateHelper.dateStart().getTime()-24*60*60*1000));}else if(per=="prev_month"){var m_start=DateHelper.monthStart(new Date(DateHelper.monthStart()-24*60*60*1000));this.setCtrlDateTime(this.getControlFrom(),m_start);this.setCtrlDateTime(this.getControlTo(),DateHelper.monthEnd(m_start));}
EditPeriodDateShift.superclass.setPredefinedPeriod.call(this,per);}
EditPeriodDateShift.prototype.goFast=function(sign){if(this.getControlPeriodSelect().getValue()=="shift"){this.addMonthsToControl(this.getControlFrom(),1*sign);this.addMonthsToControl(this.getControlTo(),1*sign);}
else{EditPeriodDateShift.superclass.goFast.call(this,sign);}}
EditPeriodDateShift.prototype.setCtrlDateTime=function(ctrl,dt){dt.setHours(0);dt.setMinutes(0);dt.setSeconds(0);var tm=0;if(ctrl.getAttr("name")=="to"){tm=24*60*60*1000;}
dt.setTime(dt.getTime()+DateHelper.timeToMS(ctrl.getTimeValueStr())+tm);ctrl.setValue(dt);}
EditPeriodDateShift.prototype.go=function(sign){if(this.getControlPeriodSelect().getValue()=="shift"){this.addDaysToControl(this.getControlFrom(),1*sign);this.addDaysToControl(this.getControlTo(),1*sign);}
else if(this.getControlPeriodSelect().getValue()=="prev_shift"){this.addDaysToControl(this.getControlFrom(),2*sign);this.addDaysToControl(this.getControlTo(),2*sign);}
else if(this.getControlPeriodSelect().getValue()=="prev_month"){this.addYearsToControl(this.getControlFrom(),2*sign);this.getControlTo().setValue(DateHelper.monthEnd(this.getControlFrom().getValue()));}
else{EditPeriodDateShift.superclass.go.call(this,sign);}} 
function PlantLoadGraphControl(id,options){PlantLoadGraphControl.superclass.constructor.call(this,id,"canvas",options);this.getNode().height=60;var ctx=this.getNode().getContext('2d');var constants={"chart_step_quant":null,"chart_max_quant":null};window.getApp().getConstantManager().get(constants);this.m_chart=new Chart(ctx,{"type":"line","options":{"responsive":true,"elements":{"point":{"radius":0}},"title":{"display":false,"text":"Выполнение заявок"},"tooltips":{"mode":"index","intersect":false},"hover":{"mode":"nearest","intersect":true},"scales":{"xAxes":[{"display":true,"scaleLabel":{"display":false,"labelString":"Время, ч."},"gridLines":{"color":"rgba(0, 0, 0, 0)",}}],"yAxes":[{"display":true,"ticks":{"min":0,"max":constants.chart_max_quant.getValue(),"stepSize":constants.chart_step_quant.getValue()},"scaleLabel":{"display":true,"labelString":"Объём, м3"},"gridLines":{"color":"rgba(0, 0, 0, 0)"}}]}}});this.setModel(options.model);}
extend(PlantLoadGraphControl,Control);PlantLoadGraphControl.prototype.setModel=function(model){if(model.getNextRow()){var chart_data_s=model.getFieldValue("chart_data");if(this.m_chartDataPrevStr&&this.m_chartDataPrevStr==chart_data_s)return;this.m_chartDataPrevStr=chart_data_s;var chart_data=CommonHelper.unserialize(chart_data_s);var colors=window.getApp().getChartColors();this.m_chart.data={"labels":chart_data.times,"datasets":[{"label":"Макс.загрузка","data":chart_data.norm,"backgroundColor":colors.red,"borderColor":colors.red,"borderDash":[5,5],"borderWidth":3,"fill":false},{"label":"Отгрузки","data":chart_data.shipments,"backgroundColor":colors.yellow,"borderColor":colors.yellow,"borderWidth":4,"fill":false},{"label":"Заявки","data":chart_data.orders,"backgroundColor":colors.green,"borderColor":colors.green,"borderWidth":4,"fill":false}]};this.m_chart.update();}}
PlantLoadGraphControl.prototype.clearGraph=function(){} 
function ClientTypeEdit(id,options){options=options||{};options.model=new ClientType_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Вид клиента:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new ClientType_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");ClientTypeEdit.superclass.constructor.call(this,id,options);}
extend(ClientTypeEdit,EditSelectRef); 
function ClientComeFromEdit(id,options){options=options||{};options.model=new ClientComeFrom_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Источник обращения:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new ClientComeFrom_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");ClientComeFromEdit.superclass.constructor.call(this,id,options);}
extend(ClientComeFromEdit,EditSelectRef); 
function ClientNameEdit(id,options){options=options||{};var self=this;if(options.labelCaption==undefined){options.labelCaption="Наименование:";}
options.labelCaption="Наименование:";options.placeholder="Краткое наименование контрагента";options.maxLength=100;options.events=options.events||{};this.m_onBlur=options.events.blur;options.events.blur=function(){self.fillFullName.call(self);if(self.m_onBlur){self.m_onBlur.call(self);}};this.m_view=options.view;ClientNameEdit.superclass.constructor.call(this,id,options);}
extend(ClientNameEdit,EditString);ClientNameEdit.prototype.m_view;ClientNameEdit.prototype.m_onBlur;ClientNameEdit.prototype.fillFullName=function(){if(this.m_view.getElement("name_full").isNull()&&!this.isNull()){var full_names=[{"short":"ООО","full":"Общество с ограниченной ответственностью"},{"short":"ЗАО","full":"Закрытое акционерное общество"},{"short":"ОАО","full":"Открытое акционерное общество"},{"short":"ПАО","full":"Публичное акционерное общество"},{"short":"АО","full":"Акционерное общество"},{"short":"ИП","full":""}];var short=this.getValue();var res=false;var res_s=short;for(var i=0;i<full_names.length;i++){if(short.substr(0,full_names[i].short.length+1)==(full_names[i].short+" ")){res_s=((full_names[i].full.length)?full_names[i].full+" ":"")+short.substr(full_names[i].short.length);res_s=res_s.trim();res=false;break;}}
this.m_view.getElement("name_full").setValue(res?res_s:short);}} 
function ClientNameFullEdit(id,options){options=options||{};var self=this;if(options.labelCaption==undefined){options.labelCaption="Официальное наименование:";}
options.placeholder="Наименование в точном соответствии с учредительными документами";options.maxLength=500;ClientNameEdit.superclass.constructor.call(this,id,options);}
extend(ClientNameFullEdit,EditString); 
function ConcreteTypeEdit(id,options){options=options||{};options.model=new ConcreteTypeList_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Марка бетона:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new ConcreteType_Controller();if(window.getApp().getServVar("role_id")=="client"){options.readPublicMethod=contr.getPublicMethod("get_for_client_list");}
else{options.readPublicMethod=contr.getPublicMethod("get_list");}
ConcreteTypeEdit.superclass.constructor.call(this,id,options);}
extend(ConcreteTypeEdit,EditSelectRef); 
function DestinationEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Объект:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=DestinationList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=Destination_Form;options.acMinLengthForQuery=(options.acMinLengthForQuery!=undefined)?options.acMinLengthForQuery:1;options.acController=new Destination_Controller();options.acPublicMethod=options.acController.getPublicMethod("complete_dest");options.acModel=new DestinationList_Model();options.acPatternFieldId=options.acPatternFieldId||"name_pat";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";DestinationEdit.superclass.constructor.call(this,id,options);}
extend(DestinationEdit,EditRef); 
function DestinationForClientEdit(id,options){options=options||{};options.model=new DestinationList_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Объект:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new Destination_Controller();options.readPublicMethod=contr.getPublicMethod("get_for_client_list");DestinationForClientEdit.superclass.constructor.call(this,id,options);}
extend(DestinationForClientEdit,EditSelectRef); 
function DestinationForOrderEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Объект:";}
var self=this;options.cmdInsert=true;options.cmdSmInsert=true;options.buttonInsert=new ButtonInsert(id+":btn_insert",{"editControl":this,"onClick":function(e){if(CommonHelper.isEmpty(this.getEditControl().getKeys())){self.openNewDest(this.getEditControl().getNode().value);}}});options.keyIds=options.keyIds||["id"];options.selectWinClass=DestinationList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=Destination_Form;this.m_orig_onSelect=options.onSelect;options.onSelect=(function(orig_onSelect){return function(fields){if(CommonHelper.isEmpty(this.getKeys())){DOMHelper.addClass(this.getNode(),"null-ref");}
if(orig_onSelect){orig_onSelect(fields);}}})(this.m_orig_onSelect);options.acOnCompleteTextOut=function(textHTML,modelRow){var pref="";if(modelRow&&modelRow.is_address.getValue()){pref="<span class='glyphicon glyphicon-envelope'></span> ";}
else if(modelRow&&modelRow.client_dest.getValue()){pref="<i class='icon-user-check'></i> ";}
else if(modelRow){pref="<i class='icon-truck'></i> ";}
return pref+textHTML;}
options.acMinLengthForQuery=(options.acMinLengthForQuery!=undefined)?options.acMinLengthForQuery:1;options.acController=new Destination_Controller();options.acPublicMethod=options.acController.getPublicMethod("complete_for_order");options.acModel=new DestinationForOrderList_Model();options.acPatternFieldId=options.acPatternFieldId||"name_pat";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";DestinationForOrderEdit.superclass.constructor.call(this,id,options);}
extend(DestinationForOrderEdit,EditRef);DestinationForOrderEdit.prototype.openNewDest=function(descr){var self=this;var win_w=$(window).width();var h=$(window).height()-20;var left=win_w/3;var w=win_w/3*2;this.m_mapForm=new Destination_Form({"id":CommonHelper.uniqid(),"height":h,"width":w,"left":left,"top":10,"params":{"cmd":"insert","editViewOptions":{"defDialogValues":{"name":descr}}},"onClose":function(res){res=res||{"updated":false};self.m_mapForm.close();delete self.m_mapForm;}});this.m_mapForm.open();} 
function DestinationSearchEdit(id,options){options=options||{};options.cmdAutoComplete=true;if(options.labelCaption==undefined){options.labelCaption="Объект:";}
options.maxLength=250;options.acMinLengthForQuery=1;options.acController=new Destination_Controller();options.acPublicMethod=options.acController.getPublicMethod("complete_for_order");options.acModel=new DestinationForOrderList_Model();options.acPatternFieldId=options.acPatternFieldId||"name_pat";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";DestinationSearchEdit.superclass.constructor.call(this,id,options);}
extend(DestinationSearchEdit,EditString); 
function ClientEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Клиент:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;if(options.cmdInsert){var self=this;options.buttonInsert=new ButtonInsert(id+":cmdInsert",{"editControl":this,"onClick":function(){var ctrl=this.getEditControl();var keys=ctrl.getKeys();if(!keys||!keys.id||keys.id=="null"){var n=ctrl.getNode().value;if(n&&n.length){var pm=(new Client_Controller()).getPublicMethod("insert_from_order");pm.setFieldValue("name",n);pm.run({"ok":function(resp){var m=resp.getModel("Client_Model");if(m.getNextRow()){ctrl.setKeys({"id":m.getFieldValue("id")});window.showTempNote("Создан новый клиент",null,5000);}}})}}}});}
options.keyIds=options.keyIds||["id"];options.selectWinClass=ClientList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=Client_Form;options.acMinLengthForQuery=1;options.acController=new Client_Controller();options.acModel=options.acModel||(new Client_Model());options.acPublicMethod=options.acController.getPublicMethod((options.acPublicMethodId||"complete"))
options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name"),options.acModel.getField("inn")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";ClientEdit.superclass.constructor.call(this,id,options);}
extend(ClientEdit,EditRef); 
function DriverEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Водитель:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=DriverList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=Driver_Form;options.acMinLengthForQuery=1;options.acController=new Driver_Controller();options.acModel=options.acModel||(new DriverList_Model());options.acPublicMethod=options.acController.getPublicMethod((options.acPublicMethodId||"complete"))
options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";DriverEdit.superclass.constructor.call(this,id,options);}
extend(DriverEdit,EditRef); 
function ClientTelEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Контакт:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=ClientTelList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=null;options.acMinLengthForQuery=1;options.acController=new ClientTel_Controller();options.acModel=options.acModel||(new ClientTelList_Model());options.acPublicMethod=options.acController.getPublicMethod("complete_tel");if(options.tm_exists===true){options.acPublicMethod.setFieldValue("tm_exists",true);options.selectWinParams="cond_fields=tm_exists&cond_sgns=e&cond_vals=1";}
options.acPatternFieldId=options.acPatternFieldId||"search";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("search")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";ClientTelEdit.superclass.constructor.call(this,id,options);}
extend(ClientTelEdit,EditRef); 
function PumpVehicleEdit(id,options){options=options||{};options.model=new PumpVehicleWorkList_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Насос:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFormatFunction=function(f){var res=f.plate.getValue();var mk=f.make.getValue();res+=(mk&&mk.length)?" "+mk:"";var owner=f.vehicle_owners_ref.getValue();res+=(owner&&!owner.isNull())?" "+owner.getDescr():"";var l=f.pump_length.getValue();res+=l?" ("+l+"м.)":"";let pump_prices=f.pump_prices.getValue();if(pump_prices&&pump_prices.rows&&pump_prices.rows.length){let last_price=pump_prices.rows[pump_prices.rows.length-1];if(last_price.fields.pump_price&&last_price.fields.pump_price.m_descr){res+=", "+last_price.fields.pump_price.m_descr;}}
return res;}
options.readPublicMethod=(new PumpVehicle_Controller()).getPublicMethod("get_work_list");PumpVehicleEdit.superclass.constructor.call(this,id,options);}
extend(PumpVehicleEdit,EditSelectRef); 
function VehicleEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Автомобиль:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=VehicleList_Form;options.selectDescrIds=options.selectDescrIds||["plate"];options.editWinClass=Vehicle_Form;options.acMinLengthForQuery=1;options.acController=new Vehicle_Controller();options.acModel=new VehicleDialog_Model();options.acPatternFieldId=options.acPatternFieldId||"plate";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFunction=function(f){var res=f.plate.getValue();var owner=f.vehicle_owners_ref.getValue();if(owner&&!owner.isNull()){res+="("+owner.getDescr()+")";}
return res;}
options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";VehicleEdit.superclass.constructor.call(this,id,options);}
extend(VehicleEdit,EditRef); 
function VehicleSelect(id,options){options=options||{};options.model=options.addAll?new ModelXML("vehicles_with_trackers",{"fields":{"id":new FieldInt("id"),"plate":new FieldString("plate"),"tracker_id":new FieldString("tracker_id")}}):new Vehicle_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"ТС:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("plate")];var contr=new Vehicle_Controller();options.readPublicMethod=contr.getPublicMethod(options.addAll?"vehicles_with_trackers":"get_list");VehicleSelect.superclass.constructor.call(this,id,options);}
extend(VehicleSelect,EditSelectRef); 
function VehicleScheduleEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Экипаж:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=VehicleScheduleMakeOrderList_Form;options.selectDescrIds=options.selectDescrIds||["vehicle_schedules_ref"];options.editWinClass=Vehicle_Form;options.acMinLengthForQuery=1;options.acController=new VehicleSchedule_Controller();options.acModel=new VehicleScheduleComplete_Model();options.acPatternFieldId=options.acPatternFieldId||"vehicle_schedule_descr";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("vehicle_schedule_descr")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";VehicleScheduleEdit.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleEdit,EditRef); 
function PumpPriceEdit(id,options){options=options||{};options.model=new PumpPrice_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Ценовая схема насоса:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new PumpPrice_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");PumpPriceEdit.superclass.constructor.call(this,id,options);}
extend(PumpPriceEdit,EditSelectRef); 
function OrderDescrEdit(id,options){options=options||{};if(options.labelCaption==undefined){options.labelCaption="Прораб:";}
options.maxLength=50;options.cmdAutoComplete=true;options.acMinLengthForQuery=1;options.acController=new Order_Controller();options.acModel=new OrderDescr_Model();options.acPublicMethod=options.acController.getPublicMethod("complete_descr")
options.acPatternFieldId=options.acPatternFieldId||"descr";options.acKeyFields=options.acKeyFields||[options.acModel.getField("descr")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("descr")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";OrderDescrEdit.superclass.constructor.call(this,id,options);}
extend(OrderDescrEdit,EditString); 
function OrderTimeSelect(id,options){options=options||{};options.addNotSelected=false;var app=window.getApp();app.m_orderTimeElements=[];var constants={"order_step_min":null,"first_shift_start_time":null,"shift_length_time":null};app.getConstantManager().get(constants);var step_s=constants.order_step_min.getValue()*60;var start_s=DateHelper.timeToMS(constants.first_shift_start_time.getValue())/1000;var end_s=start_s+DateHelper.timeToMS(constants.shift_length_time.getValue())/1000;var h,m,sec;var i=0;while(start_s<end_s){h=Math.floor(start_s/3600);h=(h<=24)?h:(h-24);h=((h<=9)?"0":"")+h.toString();m=(start_s%3600)/60;m=((m<=9)?"0":"")+m.toString();var val=(h+":"+m);app.m_orderTimeElements.push(new EditSelectOption(id+":"+i,{"descr":val,"value":val,"checked":(options.value==val)}));start_s+=step_s;i++;}
options.elements=app.m_orderTimeElements;OrderTimeSelect.superclass.constructor.call(this,id,options);}
extend(OrderTimeSelect,EditSelect);OrderTimeSelect.prototype.setInitValue=function(val){val=(val&&typeof(val)=="object")?DateHelper.format(val,"H:i"):val;this.setAttr(this.VAL_INIT_ATTR,val);this.setValue(val);}
OrderTimeSelect.prototype.setValue=function(val){val=(val&&typeof(val)=="object")?DateHelper.format(val,"H:i"):val;OrderTimeSelect.superclass.setValue.call(this,val);} 
function AvailOrderTimeControl(id,options){options=options||{};this.m_controller=options.controller;this.m_onSetTime=options.onSetTime;this.m_onSetSpeed=options.onSetSpeed;options.addElement=function(){this.addElement(new WaitControl(id+":wait"));this.addElement(new ControlContainer(id+":cont","DIV"));}
AvailOrderTimeControl.superclass.constructor.call(this,id,"FIELDSET",options);}
extend(AvailOrderTimeControl,ControlContainer);AvailOrderTimeControl.prototype.m_onSetTime;AvailOrderTimeControl.prototype.m_onSetSpeed;AvailOrderTimeControl.prototype.m_old_date;AvailOrderTimeControl.prototype.m_old_quant;AvailOrderTimeControl.prototype.m_old_speed;AvailOrderTimeControl.prototype.refresh=function(date,quant,speed){if(!date||!DateHelper.isValidDate(date)||!quant||!speed||((this.m_old_date&&date.getTime()==this.m_old_date.getTime())&&quant==this.m_old_quant&&speed==this.m_old_speed))return;this.setVisible(true);this.getElement("wait").setVisible(true);var self=this;var pm=this.m_controller.getPublicMethod("get_avail_spots");pm.setFieldValue("quant",quant);pm.setFieldValue("speed",speed);pm.setFieldValue("date",date);this.m_speed=speed;pm.run({"ok":function(resp){self.m_old_date=date;self.m_old_quant=quant;self.m_old_speed=speed;self.m_old_select=undefined;var m=resp.getModel("OrderAvailSpots_Model");var ctrl=self.getElement("cont");ctrl.clear();var i=0;var btn;while(m.getNextRow()){btn=new ButtonCtrl(ctrl.getId()+":"+i,{"caption":DateHelper.format(m.getFieldValue("avail_date_time"),"H:i"),"attrs":{"class":("btn btn-default "+((self.m_speed==m.getFieldValue("avail_speed"))?"normal_speed":"dif_speed"))},"onClick":function(){if(self.m_old_select)DOMHelper.delClass(self.m_old_select,"selected_time");DOMHelper.addClass(this.m_node,"selected_time");self.m_old_select=this.m_node;self.m_onSetTime(this.m_availDateTime);self.m_onSetSpeed(this.m_speed);}});btn.m_availDateTime=m.getFieldValue("avail_date_time");btn.m_speed=m.getFieldValue("avail_speed");ctrl.addElement(btn);i++;}
ctrl.toDOM();},"all":function(){self.getElement("wait").setVisible(false);}});} 
function SupplierEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Поставщик:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=SupplierList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=SupplierDialog_Form;options.acMinLengthForQuery=1;options.acController=new Supplier_Controller();options.acModel=new SupplierList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";SupplierEdit.superclass.constructor.call(this,id,options);}
extend(SupplierEdit,EditRef); 
function VehicleScheduleGridCmdSetFree(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;options.glyph="glyphicon-time";options.title="Перевести в состояние 'свободен'";options.caption="Освободить ";VehicleScheduleGridCmdSetFree.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleGridCmdSetFree,GridCmd);VehicleScheduleGridCmdSetFree.prototype.onCommandCont=function(vehSchedId,productionBaseId,vehDescr){var pm=this.m_grid.getReadPublicMethod().getController().getPublicMethod("set_free");pm.setFieldValue("id",vehSchedId);pm.setFieldValue("production_base_id",productionBaseId);var self=this;pm.run({"ok":function(resp){self.m_grid.onRefresh(function(){window.showTempNote(vehDescr+" переведен в статус 'свободен'",null,3000);});}});}
VehicleScheduleGridCmdSetFree.prototype.onCommand=function(){this.m_grid.setModelToCurrentRow();var model=this.m_grid.getModel();var vehDescr=model.getFieldValue("drivers_ref").getDescr()+", "+model.getFieldValue("vehicles_ref").getDescr();var self=this;(new WindowFormModalBS("VSSetFree",{"content":new EditJSON("VSSetFree:cont",{"elements":[new ProductionBaseEdit("VSSetFree:cont:production_bases_ref",{"required":true})]}),"cmdCancel":true,"cmdOk":true,"contentHead":vehDescr,"onClickCancel":function(){this.close();},"onClickOk":function(){var view=this.getContent();if(!view.validate()){return;}
var res=view.getValueJSON();self.onCommandCont(model.getFieldValue("id"),res.production_bases_ref.getKey("id"),vehDescr);this.close();}})).open();} 
function VehicleScheduleGridCmdSetOut(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;options.glyph="glyphicon-ban-circle";options.title="Завршить работу (с указанием причины)";options.caption="Завершить работу ";VehicleScheduleGridCmdSetOut.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleGridCmdSetOut,GridCmd);VehicleScheduleGridCmdSetOut.prototype.onCommand=function(){this.m_grid.setModelToCurrentRow();var model=this.m_grid.getModel();var vehDescr=model.getFieldValue("drivers_ref").getDescr()+", "+model.getFieldValue("vehicles_ref").getDescr();var id=model.getFieldValue("id");var self=this;this.m_view=new EditJSON("VSOut:cont",{"elements":[new EditText("VSOut:cont:comment_text",{"labelCaption":"Причина завершения:","rows":3})]});this.m_form=new WindowFormModalBS("VSOut",{"content":this.m_view,"cmdCancel":true,"cmdOk":true,"contentHead":vehDescr,"onClickCancel":function(){self.closeComment();},"onClickOk":function(){var res=self.m_view.getValueJSON();if(!res||!res.comment_text||!res.comment_text.length){throw new Error("Не указана причина выхода со смены!");}
self.setOutOnServer(id,res.comment_text,vehDescr);}});this.m_form.open();}
VehicleScheduleGridCmdSetOut.prototype.closeComment=function(){this.m_view.delDOM()
this.m_form.delDOM();delete this.m_view;delete this.m_form;}
VehicleScheduleGridCmdSetOut.prototype.setOutOnServer=function(id,commentText,vehDescr){var pm=this.m_grid.getReadPublicMethod().getController().getPublicMethod("set_out");pm.setFieldValue("id",id);pm.setFieldValue("comment_text",commentText);var self=this;pm.run({"ok":function(resp){self.m_grid.onRefresh(function(){self.closeComment();window.showTempNote(vehDescr+" завершил смену",null,5000);});}})} 
function VehicleScheduleGridCmdShowPosition(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;options.glyph="glyphicon-road";options.title="Показать местоположение ТС";options.caption="Местоположение ";VehicleScheduleGridCmdShowPosition.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleGridCmdShowPosition,GridCmd);VehicleScheduleGridCmdShowPosition.prototype.onCommand=function(){console.log(this.m_grid.getName())
this.m_grid.setModelToCurrentRow();var veh_ref=this.m_grid.getModel().getFieldValue("vehicles_ref");if(!veh_ref||veh_ref.isNull())return;var self=this;var win_w=$(window).width();var h=$(window).height()-20;var left=win_w/3;var w=win_w/3*2;var veh_key=veh_ref.getKey();var href="t=Map&v=Child&c=Vehicle_Controller&f=get_current_position&id="+veh_key;var conn=window.getApp().getServConnector();if(conn.getAccessTokenParam){href+="&"+conn.getAccessTokenParam()+"="+conn.getAccessToken();}
this.m_mapForm=new WindowForm({"id":"MapForm","height":h,"width":w,"left":left,"top":10,"URLParams":href,"name":"Map","params":{"editViewOptions":{"vehicle":new RefType({"keys":{"id":veh_key}}),"tracker_id":this.m_grid.getModel().getFieldValue("tracker_id")}},"onClose":function(){self.m_mapForm.close();delete self.m_mapForm;}});this.m_mapForm.open();} 
function VehicleScheduleGridCmdShowVehicle(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;options.glyph="glyphicon-pencil";options.title="Открыть карточку ТС";options.caption="Карточка ТС";VehicleScheduleGridCmdShowVehicle.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleGridCmdShowVehicle,GridCmd);VehicleScheduleGridCmdShowVehicle.prototype.onCommand=function(){this.m_grid.setModelToCurrentRow();let model=this.m_grid.getModel();let v_ref=model.getFieldValue("vehicles_ref");if(!v_ref||v_ref.isNull()){throw new Error("vehicle ref not defined.");}
let veh_id=v_ref.getKey();(new VehicleDialog_Form({"keys":{"id":veh_id}})).open();} 
function PrintInvoiceBtn(id,options){options=options||{};if(options.cmd){options.colorClass="bg-"+window.getApp().getColorClass();options.className="btn "+options.colorClass+" btn-cmd";options.caption=" Накладная ";}
else{options.className="btn btn-default";}
options.glyph="glyphicon-print";options.title="Напечатать накладную";var self=this;options.onClick=function(){self.onClick();}
this.m_cmd=options.cmd;PrintInvoiceBtn.superclass.constructor.call(this,id,options);}
extend(PrintInvoiceBtn,Button);PrintInvoiceBtn.prototype.m_grid;PrintInvoiceBtn.prototype.onClick=function(){var id,pm;if(this.m_cmd){this.m_grid.setModelToCurrentRow();id=this.m_grid.getModel().getFieldValue("id");pm=this.m_grid.getReadPublicMethod().getController().getPublicMethod("shipment_invoice");}
else{var tr=DOMHelper.getParentByTagName(this.m_node,"tr");if(!tr){throw new Error("TR tag not found!");}
var keys=CommonHelper.unserialize(tr.getAttribute("keys"));id=keys.id;pm=this.gridColumn.getGrid().getReadPublicMethod().getController().getPublicMethod("shipment_invoice");}
var offset=0;pm.setFieldValue("id",id);pm.setFieldValue("templ","ShipmentInvoice");pm.setFieldValue("inline","1");var h=$(window).width()/3*2;var left=$(window).width()/2;var w=left-20;pm.openHref("ViewPDF","location=0,menubar=0,status=0,titlebar=0,top="+(50+offset)+",left="+(left+offset)+",width="+w+",height="+h);} 
function PrintTTNBtn(id,options){options=options||{};if(options.cmd){options.colorClass="bg-"+window.getApp().getColorClass();options.className="btn "+options.colorClass+" btn-cmd";options.caption=" ТТН ";}
else{options.className="btn btn-default";}
options.glyph="glyphicon-print";options.title="Напечатать ТТН";var self=this;options.onClick=function(){self.onClick();}
this.m_cmd=options.cmd;PrintTTNBtn.superclass.constructor.call(this,id,options);}
extend(PrintTTNBtn,Button);PrintTTNBtn.prototype.m_grid;PrintTTNBtn.prototype.onClick=function(){var id,pm;if(this.m_cmd){this.m_grid.setModelToCurrentRow();id=this.m_grid.getModel().getFieldValue("id");pm=this.m_grid.getReadPublicMethod().getController().getPublicMethod("shipment_ttn");}
else{var tr=DOMHelper.getParentByTagName(this.m_node,"tr");if(!tr){throw new Error("TR tag not found!");}
var keys=CommonHelper.unserialize(tr.getAttribute("keys"));id=keys.id;pm=this.gridColumn.getGrid().getReadPublicMethod().getController().getPublicMethod("shipment_ttn");}
pm.setFieldValue("id",id);pm.download();} 
function PrintPutevoiListBtn(id,options){options=options||{};if(options.cmd){options.colorClass="bg-"+window.getApp().getColorClass();options.className="btn "+options.colorClass+" btn-cmd";options.caption=" Путевой лист ";}
else{options.className="btn btn-default";}
options.glyph="glyphicon-print";options.title="Напечатать путевой лист";var self=this;options.onClick=function(){self.onClick();}
this.m_cmd=options.cmd;PrintPutevoiListBtn.superclass.constructor.call(this,id,options);}
extend(PrintPutevoiListBtn,Button);PrintPutevoiListBtn.prototype.m_grid;PrintPutevoiListBtn.prototype.onClick=function(){var id,pm;if(this.m_cmd){this.m_grid.setModelToCurrentRow();id=this.m_grid.getModel().getFieldValue("id");pm=this.m_grid.getReadPublicMethod().getController().getPublicMethod("shipment_putevoi_list");}
else{var tr=DOMHelper.getParentByTagName(this.m_node,"tr");if(!tr){throw new Error("TR tag not found!");}
var keys=CommonHelper.unserialize(tr.getAttribute("keys"));id=keys.id;pm=this.gridColumn.getGrid().getReadPublicMethod().getController().getPublicMethod("shipment_putevoi_list");}
pm.setFieldValue("id",id);pm.download();} 
function ShipmentGridCmdPrintInvoice(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;this.m_btn=new PrintInvoiceBtn(id+"btn",{"cmd":true});options.controls=[this.m_btn]
ShipmentGridCmdPrintInvoice.superclass.constructor.call(this,id,options);}
extend(ShipmentGridCmdPrintInvoice,GridCmd);ShipmentGridCmdPrintInvoice.prototype.setGrid=function(v){ShipmentGridCmdPrintInvoice.superclass.setGrid.call(this,v);this.m_btn.m_grid=v;this.m_grid=v;} 
function ShipmentGridCmdPrintPass(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;options.glyph="glyphicon-print";options.caption=" Паспорт";options.title="Печать паспорта качества";this.m_grid=options.grid;ShipmentGridCmdPrintPass.superclass.constructor.call(this,id,options);}
extend(ShipmentGridCmdPrintPass,GridCmd);ShipmentGridCmdPrintPass.prototype.onCommand=function(e){var self=this;var p=new PopUpMenu({"elements":[new Button(this.getId()+":stamp_ship",{"caption":"На одну отгрузку с печатью","onClick":function(){self.onCommandCont("get_passport_stamp_ship");}}),new Button(this.getId()+":stamp_order",{"caption":"На все отгрузки с печатью","onClick":function(){self.onCommandCont("get_passport_stamp_all");}}),new Button(this.getId()+":ship",{"caption":"На одну отгрузку без печати","onClick":function(){self.onCommandCont("get_passport_ship");}}),new Button(this.getId()+":order",{"caption":"На все отгрузки без печати","onClick":function(){self.onCommandCont("get_passport_all");}})],"caption":"Печать паспорта"});var btn=DOMHelper.getParentByAttrValue(e.target,"name","printPass");if(!btn){throw new Error("parent button not found");}
p.show(e,btn);}
ShipmentGridCmdPrintPass.prototype.onPrintCont=function(pmId,dlg,shipment_id){dlg.close();var pm=(new Shipment_Controller()).getPublicMethod(pmId);var offset=0;pm.setFieldValue("id",shipment_id);var h=$(window).width()/3*2;var left=$(window).width()/2;var w=left-20;pm.openHref("ViewPDF","location=0,menubar=0,status=0,titlebar=0,top="+(50+offset)+",left="+(left+offset)+",width="+w+",height="+h);}
ShipmentGridCmdPrintPass.prototype.onPrint=function(pmId,dlg,shipment_id){var view=dlg.getContent();var self=this;view.execCommand(view.CMD_OK,function(resp){self.onPrintCont(pmId,dlg,shipment_id);},function(resp,erCode,erStr){throw new Error(erStr);});}
ShipmentGridCmdPrintPass.prototype.onCommandContCont=function(pmId,model,shipment_id){var self=this;model.getNextRow();var id=model.getFieldValue("id");var cmd=id?"edit":"insert";var params={"models":{"QualityPassport_Model":model},"cmd":cmd,"cmdSave":false,"cmdOk":false,"cmdCancel":false,"noPrintBtn":true};(new WindowFormModalBS("qualityPassport",{"dialogWidth":"50%","cmdOk":true,"controlOkCaption":"Печать","onClickOk":function(){self.onPrint(pmId,this,shipment_id);},"cmdCancel":true,"onClickCancel":function(){this.close();},"cmdClose":true,"content":new QualityPassport_View("qualityPassport:view",params)})).open();}
ShipmentGridCmdPrintPass.prototype.onCommandCont=function(pmId){var self=this;this.m_grid.setModelToCurrentRow();var shipment_id=this.m_grid.getModel().getFieldValue("id");var pm=(new QualityPassport_Controller).getPublicMethod("get_object_or_last");pm.setFieldValue("shipment_id",shipment_id);pm.run({"ok":function(resp){self.onCommandContCont(pmId,resp.getModel("QualityPassport_Model"),shipment_id);}});} 
function PrintTranspNaklBtn(id,options){options=options||{};if(options.cmd){options.colorClass="bg-"+window.getApp().getColorClass();options.className="btn "+options.colorClass+" btn-cmd";options.caption=" Транс.накл. ";}
else{options.className="btn btn-default";}
options.glyph="glyphicon-print";options.title="Напечатать транспортную накладную";var self=this;options.onClick=function(){self.onClick();}
this.m_cmd=options.cmd;PrintTranspNaklBtn.superclass.constructor.call(this,id,options);}
extend(PrintTranspNaklBtn,Button);PrintTranspNaklBtn.prototype.m_grid;PrintTranspNaklBtn.prototype.onClick=function(){var id,pm;if(this.m_cmd){this.m_grid.setModelToCurrentRow();id=this.m_grid.getModel().getFieldValue("id");pm=this.m_grid.getReadPublicMethod().getController().getPublicMethod("shipment_transp_nakl");}
else{var tr=DOMHelper.getParentByTagName(this.m_node,"tr");if(!tr){throw new Error("TR tag not found!");}
var keys=CommonHelper.unserialize(tr.getAttribute("keys"));id=keys.id;pm=this.gridColumn.getGrid().getReadPublicMethod().getController().getPublicMethod("shipment_transp_nakl");}
pm.setFieldValue("id",id);pm.download();} 
function PrintPassBtn(id,options){options=options||{};if(options.cmd){options.colorClass="bg-"+window.getApp().getColorClass();options.className="btn "+options.colorClass+" btn-cmd";options.caption=" Паспорт ";}
else{options.className="btn btn-default";}
options.glyph="glyphicon-print";options.caption="Паспорт";options.title="Печать паспорта качества";var self=this;options.onClick=function(e){self.onClick(e);}
this.m_cmd=options.cmd;this.m_dialogView=options.dialogView;this.m_closeAfterPrint=options.closeAfterPrint;PrintPassBtn.superclass.constructor.call(this,id,options);}
extend(PrintPassBtn,ButtonCmd);PrintPassBtn.prototype.m_grid;PrintPassBtn.prototype.onClick=function(e){var self=this;var p=new PopUpMenu({"elements":[new Button(this.getId()+":stamp_ship",{"caption":"На одну отгрузку с печатью","onClick":function(){self.onCommandCont("get_passport_stamp_ship");}}),new Button(this.getId()+":stamp_order",{"caption":"На все отгрузки с печатью","onClick":function(){self.onCommandCont("get_passport_stamp_all");}}),new Button(this.getId()+":ship",{"caption":"На одну отгрузку без печати","onClick":function(){self.onCommandCont("get_passport_ship");}}),new Button(this.getId()+":order",{"caption":"На все отгрузки без печати","onClick":function(){self.onCommandCont("get_passport_all");}})],"caption":"Печать паспорта"});var btn=DOMHelper.getParentByAttrValue(e.target,"name","printPass");if(!btn){throw new Error("parent button not found");}
p.show(e,btn);}
PrintPassBtn.prototype.onPrint=function(pmId,shipment_id){var pm=(new Shipment_Controller()).getPublicMethod(pmId);var offset=0;pm.setFieldValue("id",shipment_id);var h=$(window).width()/3*2;var left=$(window).width()/2;var w=left-20;pm.openHref("ViewPDF","location=0,menubar=0,status=0,titlebar=0,top="+(50+offset)+",left="+(left+offset)+",width="+w+",height="+h);if(this.m_closeAfterPrint&&this.m_dialogView){this.m_dialogView.close();}}
PrintPassBtn.prototype.onCommandCont=function(pmId){var self=this;var shipment_id;if(this.m_grid){this.m_grid.setModelToCurrentRow();shipment_id=this.m_grid.getModel().getFieldValue("id");}else if(this.m_dialogView){shipment_id=this.m_dialogView.getModel().getFieldValue("shipment_id");}else{throw new Error("shipment_id not defind");}
if(this.m_dialogView.getCmd()=="insert"||this.m_dialogView.getModified()){this.m_dialogView.getControlOK().setEnabled(false);this.m_dialogView.getControlSave().setEnabled(false);this.m_dialogView.onSave(function(){self.onPrint(pmId,shipment_id);},null,function(){self.m_dialogView.getControlOK().setEnabled(true);self.m_dialogView.getControlSave().setEnabled(true);});}else{this.onPrint(pmId,shipment_id);}} 
function ShipmentGridCmdPrintTTN(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;this.m_btn=new PrintTTNBtn(id+"btn",{"cmd":true});options.controls=[this.m_btn]
ShipmentGridCmdPrintTTN.superclass.constructor.call(this,id,options);}
extend(ShipmentGridCmdPrintTTN,GridCmd);ShipmentGridCmdPrintTTN.prototype.setGrid=function(v){ShipmentGridCmdPrintTTN.superclass.setGrid.call(this,v);this.m_btn.m_grid=v;this.m_grid=v;} 
function ShipmentGridCmdPrintPutevoiList(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;this.m_btn=new PrintPutevoiListBtn(id+"btn",{"cmd":true});options.controls=[this.m_btn]
ShipmentGridCmdPrintPutevoiList.superclass.constructor.call(this,id,options);}
extend(ShipmentGridCmdPrintPutevoiList,GridCmd);ShipmentGridCmdPrintPutevoiList.prototype.setGrid=function(v){ShipmentGridCmdPrintPutevoiList.superclass.setGrid.call(this,v);this.m_btn.m_grid=v;this.m_grid=v;} 
function OrderGridCmdPrintTranspNakl(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;options.glyph="glyphicon-print";options.title="Напечатать транспортную накладную";options.caption=" Транс.накл. ";OrderGridCmdPrintTranspNakl.superclass.constructor.call(this,id,options);}
extend(OrderGridCmdPrintTranspNakl,GridCmd);OrderGridCmdPrintTranspNakl.prototype.onCommandCont=function(model){const nakls=[];const docs1c=JSON.parse(model.getFieldValue("docs"));const shipmentIds=model.getFieldValue("shipment_ids");docs1c.forEach((doc,ind)=>{nakls.push(new EditSelectOption("naklSelect:view:nakl:"+doc.ref,{value:doc.ref,descr:"№ "+doc.nomer+" от "+doc.data+" , факт."+doc.faktura_nomer,checked:(ind==0),attrs:{doc:JSON.stringify(doc)}}));});const self=this;this.m_form=new WindowFormModalBS("naklSelect",{"dialogWidth":"30%","cmdOk":false,"cmdCancel":true,"onClickCancel":function(){this.close();},"cmdClose":true,"content":new View("naklSelect:view",{addElement:function(){const naklView=this;this.addElement(new EditSelect("naklSelect:view:nakl",{labelCaption:"УПД:",elements:nakls}));this.addElement(new ButtonCmd("naklSelect:view:nakl:printSgn",{caption:"С подписями",onClick:function(){const ctrl=naklView.getElement("nakl");const opt=ctrl.getNode().options[ctrl.getIndex()];self.printWithSgn(opt.getAttribute("doc"),shipmentIds,naklView);}}));this.addElement(new ButtonCmd("naklSelect:view:nakl:printNoSgn",{caption:"Без подписей",onClick:function(){const ctrl=naklView.getElement("nakl");const opt=ctrl.getNode().options[ctrl.getIndex()];self.printNoSgn(opt.getAttribute("doc"),shipmentIds,naklView);}}))}})});this.m_form.open();}
OrderGridCmdPrintTranspNakl.prototype.printWithSgn=function(doc,shipmentIds,naklView){this.print(doc,shipmentIds,"1",naklView);}
OrderGridCmdPrintTranspNakl.prototype.printNoSgn=function(doc,shipmentIds,naklView){this.print(doc,shipmentIds,"0",naklView);}
OrderGridCmdPrintTranspNakl.prototype.print=function(doc,shipmentIds,faksim,naklView){if(!doc){throw new Error("Документ не выбран");}
window.setGlobalWait(true);naklView.getElement("printSgn").setEnabled(false);naklView.getElement("printNoSgn").setEnabled(false);const self=this;const pm=(new Shipment_Controller()).getPublicMethod("shipment_transp_nakl_on_list");pm.setFieldValue("shipment_ids",shipmentIds);pm.setFieldValue("faksim",faksim);pm.setFieldValue("buh_doc",doc);pm.download("ViewXML",0,function(res){window.setGlobalWait(false);naklView.getElement("printSgn").setEnabled(true);naklView.getElement("printNoSgn").setEnabled(true);if(res==0){if(self.m_form){self.m_form.close();}
window.showTempNote("Файл загружен",null,5000);}});}
OrderGridCmdPrintTranspNakl.prototype.onCommand=function(e){const selectNodes=DOMHelper.getElementsByAttr("selectMark",this.m_grid.getNode(),"class",false);if(!selectNodes||!selectNodes.length){return;}
const selectedOrders=[];const selectedShips=[];selectNodes.forEach((inpNode)=>{if(inpNode.checked===true){const table=DOMHelper.getParentByTagName(inpNode,"TABLE");const tr=DOMHelper.getParentByTagName(inpNode,"TR");if(!table||!tr){return;}
const keys=tr.getAttribute("keys");if(!keys||!keys.length){return;}
const id=JSON.parse(keys).id;if(table.id=="OrderForTranspNaklList:grid"){selectedOrders.push(id);}else{selectedShips.push(id);}}});if(!selectedOrders.length&&!selectedShips.length){window.showTempError("Не выбраны заявки/отгрузки",null,5000);return;}
const pm=(new Order_Controller()).getPublicMethod("get_nakl_1c_list");pm.setFieldValue("shipment_ids",selectedShips.join(","));pm.setFieldValue("order_ids",selectedOrders.join(","));window.setGlobalWait(true);const self=this;pm.run({"ok":function(resp){const m=resp.getModel("ShipmentDoc_Model");if(!m.getNextRow()){throw new Error("УПД не найдена");}
self.onCommandCont(m);},"all":function(){window.setGlobalWait(false);}});} 
function ShipmentGridCmdChangeOrder(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;var self=this;this.m_btn=new ButtonCmd(id+"btn",{"caption":" Сменить заявку ","glyph":"glyphicon-refresh","title":"Перенести отгрузку в другую заявку","onClick":function(){self.changeOrder();}});options.controls=[this.m_btn]
ShipmentGridCmdChangeOrder.superclass.constructor.call(this,id,options);}
extend(ShipmentGridCmdChangeOrder,GridCmd);ShipmentGridCmdChangeOrder.prototype.setGrid=function(v){ShipmentGridCmdChangeOrder.superclass.setGrid.call(this,v);this.m_btn.m_grid=v;this.m_grid=v;}
ShipmentGridCmdChangeOrder.prototype.changeOrder=function(){this.m_grid.setModelToCurrentRow();var f=this.m_grid.getModel().getFields();var id=f.id.getValue();var date_time=f.date_time.getValue();var self=this;WindowQuestion.show({"yes":true,"cancel":false,"no":true,"text":"Выбрать новую завку?","callBack":function(res){if(res==WindowQuestion.RES_YES){self.changeOrderCont(id,date_time);}}});}
ShipmentGridCmdChangeOrder.prototype.changeOrderCont=function(shipmentId,dateTime){var self=this;this.m_view=new OrderForSelectList_View("OrderList:cont",{"dateTime":dateTime,"onSelect":(function(shipmentId){return function(row){self.closeSelect(shipmentId,row.id.getValue());}})(shipmentId)});this.m_form=new WindowFormModalBS("OrderList",{"content":this.m_view,"dialogWidth":"100%","cmdCancel":true,"cmdOk":false,"contentHead":"Выберите новую заявку","onClickCancel":function(){self.closeSelect();}});this.m_form.open();}
ShipmentGridCmdChangeOrder.prototype.closeSelect=function(shipmentId,newOrderId){if(this.m_view){this.m_view.delDOM()
delete this.m_view;}
if(this.m_form){this.m_form.delDOM();delete this.m_form;}
if(shipmentId&&newOrderId){var pm=(new Shipment_Controller()).getPublicMethod("update");var self=this;pm.setFieldValue("old_id",shipmentId);pm.setFieldValue("order_id",newOrderId);pm.run({"ok":function(){if(self.m_grid){self.m_grid.onRefresh(function(){window.showTempNote("Отгрузка переставлена на другую заявку",null,5000);})}}});}} 
function ShipmentGridCmdDelete(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;var self=this;this.m_btn=new ButtonCmd(id+"btn",{"caption":" Удалить ","glyph":"glyphicon-remove","title":"Удалить отгрузку","onClick":function(){self.deleteShipment();}});options.controls=[this.m_btn]
ShipmentGridCmdDelete.superclass.constructor.call(this,id,options);}
extend(ShipmentGridCmdDelete,GridCmd);ShipmentGridCmdDelete.prototype.setGrid=function(v){ShipmentGridCmdDelete.superclass.setGrid.call(this,v);this.m_btn.m_grid=v;this.m_grid=v;}
ShipmentGridCmdDelete.prototype.deleteShipment=function(){this.m_grid.setModelToCurrentRow();var f=this.m_grid.getModel().getFields();var id=f.id.getValue();var shipped=f.shipped.getValue();var self=this;WindowQuestion.show({"yes":true,"cancel":false,"no":true,"text":shipped?"Удалить отгрузку с вводом комментария?":"Удалить назначение?","callBack":function(res){if(res==WindowQuestion.RES_YES){if(shipped){self.deleteShipped(id);}
else{self.deleteAssigned(id);}}}});}
ShipmentGridCmdDelete.prototype.deleteShippedCont=function(id,commentText){var pm=(new Shipment_Controller()).getPublicMethod("delete_shipped");pm.setFieldValue("shipment_id",id);pm.setFieldValue("comment_text",commentText);this.closeComment();var self=this;pm.run({"ok":function(resp){window.showTempNote("Отгрузка удалена.",function(){self.m_grid.onRefresh();},2000);}})}
ShipmentGridCmdDelete.prototype.deleteShipped=function(shipmentId){var self=this;this.m_view=new EditJSON("ShDelete:cont",{"elements":[new EditText("ShDelete:cont:comment_text",{"labelCaption":"Причина удаления:","rows":3})]});this.m_form=new WindowFormModalBS("ShDelete",{"content":this.m_view,"cmdCancel":true,"cmdOk":true,"onClickCancel":function(){self.closeComment();},"onClickOk":function(){var res=self.m_view.getValueJSON();if(!res||!res.comment_text||!res.comment_text.length){throw new Error("Не указана причина удаления отгрузки!");}
self.deleteShippedCont(shipmentId,res.comment_text);}});this.m_form.open();}
ShipmentGridCmdDelete.prototype.closeComment=function(){this.m_view.delDOM()
this.m_form.delDOM();delete self.m_view;delete self.m_form;}
ShipmentGridCmdDelete.prototype.deleteAssigned=function(id){var pm=(new Shipment_Controller()).getPublicMethod("delete_assigned");pm.setFieldValue("shipment_id",id);var self=this;pm.run({"ok":function(resp){window.showTempNote("Назначение удалено.",function(){self.m_grid.onRefresh();},2000);}});} 
function RawMaterialConsRateCalcBtn(id,options){options=options||{};if(options.cmd){options.colorClass="bg-"+window.getApp().getColorClass();options.className="btn "+options.colorClass+" btn-cmd";options.caption=" Пересчитать ";}
else{options.className="btn btn-default";}
options.glyph="glyphicon-flash";options.title="Пересчитать расход за период";var self=this;options.onClick=function(){self.onClick();}
this.m_cmd=options.cmd;RawMaterialConsRateCalcBtn.superclass.constructor.call(this,id,options);}
extend(RawMaterialConsRateCalcBtn,Button);RawMaterialConsRateCalcBtn.prototype.m_grid;RawMaterialConsRateCalcBtn.prototype.onClick=function(){var id,pm,period_str,prod_sites_ref;if(this.m_cmd){this.m_grid.setModelToCurrentRow();id=this.m_grid.getModel().getFieldValue("id");period_str=this.m_grid.getModel().getFieldValue("period");prod_sites_ref=this.m_grid.getModel().getFieldValue("production_sites_ref");pm=this.m_grid.getReadPublicMethod().getController().getPublicMethod("recalc_consumption");pm.setFieldValue("period_id",id);pm.setFieldValue("production_site_id",prod_sites_ref.getKey("id"));}
else{var tr=DOMHelper.getParentByTagName(this.m_node,"tr");if(!tr){throw new Error("TR tag not found!");}
var keys=CommonHelper.unserialize(tr.getAttribute("keys"));id=keys.id;this.gridColumn.getGrid().setModelToCurrentRow(tr);period_str=this.m_grid.getModel().getFieldValue("period");prod_sites_ref=this.m_grid.getModel().getFieldValue("production_sites_ref");pm=this.gridColumn.getGrid().getReadPublicMethod().getController().getPublicMethod("recalc_consumption");pm.setFieldValue("period_id",id);pm.setFieldValue("production_site_id",prod_sites_ref.getKey("id"));}
var self=this;WindowQuestion.show({"text":"Пересчитать расход за период:"+period_str+" по заводу: "+prod_sites_ref.getDescr()+"?","no":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){self.doRecalc(id,pm);}}});}
RawMaterialConsRateCalcBtn.prototype.doRecalc=function(id,pm){pm.run({"ok":function(resp){window.showNote("Выполнен пересчет расхода.");}})} 
function RawMaterialConsRateInsOnBaseBtn(id,options){options=options||{};if(options.cmd){options.colorClass="bg-"+window.getApp().getColorClass();options.className="btn "+options.colorClass+" btn-cmd";options.caption=" Добавить на основании ";}
else{options.className="btn btn-default";}
options.glyph="glyphicon-repeat";options.title="Добавить на основании данного подбора";var self=this;options.onClick=function(){self.onClick();}
this.m_cmd=options.cmd;RawMaterialConsRateInsOnBaseBtn.superclass.constructor.call(this,id,options);}
extend(RawMaterialConsRateInsOnBaseBtn,Button);RawMaterialConsRateInsOnBaseBtn.prototype.m_grid;RawMaterialConsRateInsOnBaseBtn.prototype.onClick=function(){var base_id;if(this.m_cmd){this.m_grid.setModelToCurrentRow();base_id=this.m_grid.getModel().getFieldValue("id");}
else{var tr=DOMHelper.getParentByTagName(this.m_node,"tr");if(!tr){throw new Error("TR tag not found!");}
var keys=CommonHelper.unserialize(tr.getAttribute("keys"));base_id=keys.id;}
(this.m_grid.getInsertPublicMethod()).setFieldValue("base_id",base_id);this.m_grid.edit("insert");} 
function RawMaterialConsRateDateGridCmd(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;this.m_btn=new RawMaterialConsRateCalcBtn(id+"btn",{"cmd":true});options.controls=[this.m_btn]
RawMaterialConsRateDateGridCmd.superclass.constructor.call(this,id,options);}
extend(RawMaterialConsRateDateGridCmd,GridCmd);RawMaterialConsRateDateGridCmd.prototype.setGrid=function(v){RawMaterialConsRateDateGridCmd.superclass.setGrid.call(this,v);this.m_btn.m_grid=v;this.m_grid=v;} 
function RawMaterialConsRateDateGridCmdInsOnBase(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;this.m_btn=new RawMaterialConsRateInsOnBaseBtn(id+"btnIns",{"cmd":true});options.controls=[this.m_btn]
RawMaterialConsRateDateGridCmdInsOnBase.superclass.constructor.call(this,id,options);}
extend(RawMaterialConsRateDateGridCmdInsOnBase,GridCmd);RawMaterialConsRateDateGridCmdInsOnBase.prototype.setGrid=function(v){RawMaterialConsRateDateGridCmdInsOnBase.superclass.setGrid.call(this,v);this.m_btn.m_grid=v;this.m_grid=v;} 
function RawMaterialConsRateGrid(id,options){options=options||{};RawMaterialConsRateGrid.superclass.constructor.call(this,id,options);}
extend(RawMaterialConsRateGrid,GridAjx);RawMaterialConsRateGrid.prototype.initEditView=function(parent,replacedNode,cmd){RawMaterialConsRateGrid.superclass.initEditView.call(this,parent,replacedNode,cmd);var fields=this.m_model.getFields();var pm=this.m_editViewObj.getWritePublicMethod();for(var i=1;i<=10;i++){pm.setFieldValue("mat"+i+"_id",fields["mat"+i+"_id"].getValue());}}
RawMaterialConsRateGrid.prototype.onGetData=function(resp){var mat_m=resp?resp.getModel("RawMaterial_Model"):null;var h_row=this.getHead().getElement("row0");h_row.delDOM();h_row.clear();h_row.addElement(new GridCellHead(h_row.getId()+":concrete_type_descr",{"value":"Марка бетона","columns":[new GridColumn({"field":this.getModel().getField("concrete_type_descr"),"ctrlClass":EditString,"ctrlOptions":{"enabled":false,"cmdClear":false}})]}));if(mat_m){var mat_ind=0;while(mat_m.getNextRow()){mat_ind++;var col_mat_id=mat_m.getFieldValue("id");var col_id="mat"+mat_ind+"_rate";h_row.addElement(new GridCellHead(h_row.getId()+":"+col_id,{"value":mat_m.getFieldValue("name"),"colAttrs":{"material_id":col_mat_id,"align":"right"},"columns":[new GridColumnFloat({"field":this.getModel().getField(col_id),"precision":"4","ctrlClass":EditFloat,"ctrlOptions":{"precision":4}})]}));}}
this.getHead().toDOM();RawMaterialConsRateGrid.superclass.onGetData.call(this,resp);} 
function Statistics_View(id,options){options=options||{};options.addElement=function(){var model=new ModelXML("get_vehicle_statistics",{"fields":["key","val"]});this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["key"],"className":OrderMakeList_View.prototype.TABLE_CLASS_NO_WRAP,"contClassName":"v_scroll_grid_cont","attrs":{"style":"width:100%;"},"readPublicMethod":(new Vehicle_Controller()).getPublicMethod("get_vehicle_statistics"),"editInline":false,"editWinClass":null,"commands":null,"popUpMenu":null,"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:key",{"value":"Показатель","columns":[new GridColumn({"field":model.getField("key")})]}),new GridCellHead(id+":grid:head:val",{"value":"Зн-е","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("val")})]})]})]}),"pagination":null,"autoRefresh":true,"refreshInterval":null,"rowSelect":false,"focus":false,"navigate":false,"navigateClick":false}));}
Statistics_View.superclass.constructor.call(this,id,options);}
extend(Statistics_View,ViewAjxList);Statistics_View.prototype.toDOM=function(p){Statistics_View.superclass.toDOM.call(this,p);} 
function VehicleRunGridCmdShowMap(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;options.glyph="glyphicon-road";options.title="Показать местоположение ТС";options.caption="Местоположение ";VehicleRunGridCmdShowMap.superclass.constructor.call(this,id,options);}
extend(VehicleRunGridCmdShowMap,GridCmd);VehicleRunGridCmdShowMap.prototype.onCommand=function(){this.m_grid.setModelToCurrentRow();var veh_ref=this.m_grid.getModel().getFieldValue("vehicles_ref");var dt_from=this.m_grid.getModel().getFieldValue("st_free_start");var dt_to=this.m_grid.getModel().getFieldValue("st_free_end");if(!veh_ref||veh_ref.isNull())return;var win_w=$(window).width();var h=$(window).height()-20;var left=win_w/3;var w=win_w/3*2;var veh_key=veh_ref.getKey();var db_fm="d/m/Y H:i:s";var href="t=Map&v=Child&c=Vehicle_Controller&f=get_track&id="+veh_key+"&dt_from="+DateHelper.format(dt_from,db_fm)+"&dt_to="+DateHelper.format(dt_to,db_fm)+"&stop_dur=00:05";var conn=window.getApp().getServConnector();if(conn.getAccessTokenParam){href+="&"+conn.getAccessTokenParam()+"="+conn.getAccessToken();}
alert("href="+href)
this.m_mapForm=new WindowForm({"id":"MapForm","height":h,"width":w,"left":left,"top":10,"URLParams":href,"name":"Map","params":{"editViewOptions":{"vehicle":new RefType({"keys":{"id":veh_key}}),"valueFrom":dt_from,"valueTo":dt_to}},"onClose":function(){self.m_mapForm.close();delete self.m_mapForm;}});this.m_mapForm.open();} 
function EditMoneyEditable(id,options){options=options||{};options.enabled=false;this.m_onToggleEditable=options.onToggleEditable;this.m_toggleAllowed=(options.toggleAllowed!=undefined)?options.toggleAllowed:true;var self=this;options.buttonOpen=new ButtonCtrl(id+"_btn_edit",{"glyph":"glyphicon-pencil glyphMoneyField","className":"btn btn-default btnMoneyField","onClick":function(){if(self.m_toggleAllowed){self.toggleEdit();if(self.m_onToggleEditable)self.m_onToggleEditable();}}});EditMoneyEditable.superclass.constructor.call(this,id,options);}
extend(EditMoneyEditable,EditMoney);EditMoneyEditable.prototype.EDIT_ALLOWED_CLASS="moneyEditable";EditMoneyEditable.prototype.m_editAllowed;EditMoneyEditable.prototype.m_toggleAllowed;EditMoneyEditable.prototype.applyEdit=function(){this.setEnabled(this.m_editAllowed);if(this.m_editAllowed){this.m_node.focus();if(!DOMHelper.hasClass(this.m_node,this.EDIT_ALLOWED_CLASS)){DOMHelper.addClass(this.m_node,this.EDIT_ALLOWED_CLASS);}}
else{DOMHelper.delClass(this.m_node,this.EDIT_ALLOWED_CLASS);}}
EditMoneyEditable.prototype.toggleEdit=function(){this.m_editAllowed=!this.m_editAllowed;this.applyEdit();}
EditMoneyEditable.prototype.setEnabled=function(en){EditMoneyEditable.superclass.setEnabled.call(this,en);if(this.m_btnEdit){this.m_btnEdit.setEnabled(true);}}
EditMoneyEditable.prototype.setEditAllowed=function(v){this.m_editAllowed=v;this.applyEdit();}
EditMoneyEditable.prototype.getEditAllowed=function(){return this.m_editAllowed;} 
function OrderMakeGrid(id,options){options=options||{};this.m_listView=options.listView;this.m_stepMin=parseInt(options.stepMin,10);this.m_shiftStartMS=DateHelper.timeToMS(options.shiftStart);this.m_shiftLengthMS=DateHelper.timeToMS(options.shiftLength);this.m_periodSelect=options.periodSelect;var self=this;var w=window.getWidthType();var model=options.model;var role=window.getApp().getServVar("role_id");var editable=(role=="admin"||role=="owner"||role=="boss"||role=="manager"||role=="accountant"||role=="sales"||role=="plant_director"||role=="supervisor"||role=="dispatcher");var elements,foot;if(w=="sm"||w=="xs"){elements=[new GridCellHead(id+":order_make_grid:head:quant_rest",{"value":"Ост.","columns":[new GridColumn({"field":model.getField("quant_rest"),"master":true,"detailViewClass":ShipmentForOrderList_View,"detailViewOptions":{"listView":self.m_listView,"detailFilters":{"ShipmentForOrderList_Model":[{"masterFieldId":"id","field":"order_id","sign":"e","val":"0"}]}}})]}),new GridCellHead(id+":order_make_grid:head:date_time_time",{"value":"Время","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"H:i"})]}),new GridCellHead(id+":order_make_grid:head:inf1",{"value":"Клиент","colAttrs":{"data-label":"Клиент"},"columns":[new GridColumn({"id":"inf1","formatFunction":function(fields,cell){var res=String.fromCharCode(10)+window.getApp().formatCell(fields.clients_ref,cell,self.m_listView.COL_CLIENT_LEN);res+=String.fromCharCode(10)+window.getApp().formatCell(fields.destinations_ref,cell,self.m_listView.COL_DEST_LEN);res+=String.fromCharCode(10);var tel=fields.phone_cel.getValue();var tel_m=tel;if(tel_m&&tel_m.length==10){tel_m="+7"+tel;}
else if(tel_m&&tel_m.length==11){tel_m="+7"+tel.substr(1);}
var cell_n=cell.getNode();var c_tag=document.createElement("SPAN");c_tag.textContent=res;cell_n.appendChild(c_tag);if(tel_m&&tel_m.length){var t_tag=document.createElement("A");t_tag.setAttribute("href","tel:"+tel_m);t_tag.textContent=CommonHelper.maskFormat(tel,window.getApp().getPhoneEditMask());cell_n.appendChild(t_tag);}
return"";}})]}),new GridCellHead(id+":order_make_grid:head:inf3",{"value":"Насос","colAttrs":{"data-label":"Насос"},"columns":[new GridColumn({"id":"inf3","formatFunction":function(fields,cell){var res="";var unl_t=fields.unload_type.getValue();if(unl_t=="band"||unl_t=="pump"){var cmt=fields.pump_vehicle_comment.getValue();res+=(unl_t=="band"?"Лента":"Насос")+":"+String.fromCharCode(10);res+=window.getApp().formatCell(fields.pump_vehicle_owners_ref,cell,self.m_listView.COL_PUMP_VEH_LEN-4);var l=fields.pump_vehicle_length.getValue();if(l){res+="("+l+((cmt&&cmt.length)?","+cmt:"")+")";}
else if(cmt&&cmt.length){res+="("+cmt+")";}}
return res;}})]}),new GridCellHead(id+":order_make_grid:head:inf2",{"value":"Кол-во,марка","colAttrs":{"data-label":"Кол-во,марка"},"columns":[new GridColumn({"id":"inf2","formatFunction":function(fields,cell){var res=fields.quant.getValue();res+=String.fromCharCode(10)+fields.concrete_types_ref.getValue().getDescr();return res;}})]})];}
else{elements=[new GridCellHead(id+":order_make_grid:head:quant_rest",{"value":"Ост.","columns":[new GridColumn({"field":model.getField("quant_rest"),"master":true,"detailViewClass":ShipmentForOrderList_View,"detailViewOptions":{"listView":self.m_listView,"detailFilters":{"ShipmentForOrderList_Model":[{"masterFieldId":"id","field":"order_id","sign":"e","val":"0"}]}}})]}),new GridCellHead(id+":order_make_grid:head:clients_ref",{"value":"Клиент","columns":[new GridColumn({"field":model.getField("clients_ref"),"formatFunction":function(fields,cell){return window.getApp().formatCell(fields.clients_ref,cell,self.m_listView.COL_CLIENT_LEN);}})]}),new GridCellHead(id+":order_make_grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumn({"field":model.getField("destinations_ref"),"formatFunction":function(fields,cell){return window.getApp().formatCell(fields.destinations_ref,cell,self.m_listView.COL_DEST_LEN);}})]}),new GridCellHead(id+":order_make_grid:head:quant",{"value":"Кол-во","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("quant")})]}),new GridCellHead(id+":order_make_grid:head:concrete_types_ref",{"value":"Марка","colAttrs":{"align":"center"},"columns":[new GridColumnRef({"field":model.getField("concrete_types_ref")})]}),new GridCellHead(id+":order_make_grid:head:f_val",{"value":"F","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("f_val")})]}),new GridCellHead(id+":order_make_grid:head:w_val",{"value":"W","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("w_val")})]}),new GridCellHead(id+":order_make_grid:head:date_time_time",{"value":"Время","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"H:i"})]}),new GridCellHead(id+":order_make_grid:head:unload_type",{"value":"Подача","columns":[new GridColumn({"field":model.getField("unload_type"),"formatFunction":function(fields,cell){var res="";var tp=fields.unload_type.getValue();if(tp=="band"||tp=="pump"){var cmt=fields.pump_vehicle_comment.getValue();res=window.getApp().formatCell(fields.pump_vehicle_owners_ref,cell,self.m_listView.COL_PUMP_VEH_LEN-4);var l=fields.pump_vehicle_length.getValue();if(l){res+="("+l+((cmt&&cmt.length)?","+cmt:"")+")";}
else if(cmt&&cmt.length){res+="("+cmt+")";}}
return res;}})]}),!editable?null:new GridCellHead(id+":order_make_grid:head:total",{"value":"Сумма","colAttrs":{"align":"right"},"columns":[new GridColumn({"field":model.getField("total"),"formatFunction":function(fields){var res="";if(fields.pay_cash.getValue()){res=CommonHelper.numberFormat(fields.total.getValue(),2,","," ");}
return res;}})]}),!editable?null:new GridCellHead(id+":order_make_grid:head:payed",{"value":"Оплата","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("payed"),"formatFunction":function(fields){var res="";if(fields.payed.getValue()){res="опл";}
else if(fields.under_control.getValue()){res="!";}
else{res="-";}
return res;}})]}),new GridCellHead(id+":order_make_grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text"),"formatFunction":function(fields,cell){return window.getApp().formatCell(fields.comment_text,cell,self.m_listView.COL_COMMENT_LEN);}})]}),new GridCellHead(id+":order_make_grid:head:phone_cel",{"value":"Телефон","columns":[new GridColumnPhone({"field":model.getField("phone_cel"),"telExt":window.getApp().getServVar("tel_ext")})]}),new GridCellHead(id+":order_make_grid:head:descr",{"value":"Прораб","columns":[new GridColumn({"field":model.getField("descr"),"formatFunction":function(fields,cell){return window.getApp().formatCell(fields.descr,cell,self.m_listView.COL_DESCR_LEN);}})]}),(role!="lab_worker")?null:new GridCellHead(id+":order_make_grid:head:is_needed",{"value":"Нужно","columns":[new GridColumn({"field":model.getField("is_needed"),"assocValueList":{"true":"нужно","null":"","false":""}})]})];foot=new GridFoot(id+"order_make_grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":order_make_grid:foot:row0",{"elements":[new GridCellFoot(id+":order_make_grid:foot:tot_quant_rest",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"quant_rest","gridColumn":new GridColumnFloat({"id":"tot_quant_rest","precision":1,"thousandSeparator":""})}),new GridCell(id+":order_make_grid:foot:total_sp1",{"colSpan":"2"}),new GridCellFoot(id+":order_make_grid:foot:tot_quant",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"quant","gridColumn":new GridColumnFloat({"id":"tot_quant","precision":1,"thousandSeparator":""}),"calc":function(model){var ct_ref=model.getFieldValue("concrete_types_ref");if(ct_ref&&ct_ref.getDescr()!="Вода"){var f_val=model.getFieldValue(this.m_calcFieldId);if(isNaN(f_val))f_val=0;this.setTotal(this.getTotal()+f_val);}}}),new GridCell(id+":order_make_grid:foot:total_sp2",{"colSpan":"5"}),!editable?null:new GridCellFoot(id+":order_make_grid:foot:tot_total",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"total","gridColumn":new GridColumnFloat({"id":"tot_total"})}),new GridCell(id+":order_make_grid:foot:total_sp3",{"colSpan":"4"})]})]});};CommonHelper.merge(options,{"model":model,"attrs":{"style":"width:100%;"},"editInline":false,"editViewClass":options.editViewClass?options.editViewClass:(editable?OrderDialog_View:null),"commands":new GridCmdContainerAjx(id+":order_make_grid:cmd",{"cmdInsert":editable,"cmdDelete":editable,"cmdCopy":editable,"cmdEdit":true,"cmdSearch":false,"cmdExport":false}),"editViewOptions":{"template":window.getApp().getTemplate("OrderDialogView")},"insertViewOptions":function(){return{"template":window.getApp().getTemplate("OrderDialogView"),"dateTime_time":self.m_dateTime_time,"dateTime_date":self.m_periodSelect.getDateFrom()}},"onEventSetCellOptions":function(opts){if(window.getWidthType()=="sm"){opts.attrs=opts.attrs||{};opts.attrs.style="white-space:pre-wrap; word-wrap:break-word;";}},"onEventSetRowOptions":function(opts){opts.className=opts.className||"";var m=this.getModel();var quant_rest=m.getFieldValue("quant_rest");var quant=m.getFieldValue("quant");if(quant_rest==0){opts.className+=(opts.className.length?" ":"")+"order_closed";}
else if(quant_rest==quant&&m.getFieldValue("date_time").getTime()<(DateHelper.time()).getTime()){opts.className+=(opts.className.length?" ":"")+"order_not_started";}
else if(quant_rest!=quant){opts.className+=(opts.className.length?" ":"")+"order_started";}
if(m.getFieldValue("no_ship_mark")){opts.className+=(opts.className.length?" ":"")+"order_no_ship_for_long";}
self.m_listView.m_orderedTotal+=quant;self.m_listView.m_restTotal+=quant_rest;self.m_listView.m_shippedTotal+=(quant-quant_rest);self.m_listView.m_orderedSum+=m.getFieldValue("total");self.m_listView.m_orderedDay+=m.getFieldValue("quant_ordered_day");self.m_listView.m_orderedBeforeNow+=m.getFieldValue("quant_ordered_before_now");self.m_listView.m_shippedBeforeNow+=m.getFieldValue("quant_shipped_before_now");self.m_listView.m_shippedDayBeforeNow+=m.getFieldValue("quant_shipped_day_before_now");},"popUpMenu":new PopUpMenu(),"head":new GridHead(id+":order_make_grid:head",{"elements":[new GridRow(id+":order_make_grid:head:row0",{"elements":elements})]}),"foot":foot,"selectedRowClass":"order_current_row","pagination":null,"autoRefresh":false,"refreshInterval":null,"navigate":true,"rowSelect":true,"focus":true});OrderMakeGrid.superclass.constructor.call(this,id,options);}
extend(OrderMakeGrid,Grid);OrderMakeGrid.prototype.onGetData=function(){if(this.m_model){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();var detail_keys={};var rows=body.getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);for(var i=0;i<rows.length;i++){if(rows[i].getAttribute("for_keys")!=null){detail_keys[hex_md5(rows[i].getAttribute("for_keys"))]={"for_keys":rows[i].getAttribute("for_keys"),"node":rows[i]};}}
var details_expanded=(detail_keys&&!CommonHelper.isEmpty(detail_keys));var master_cell=null;if(foot&&foot.calcBegin){this.m_foot.calcBegin(this.m_model);}
if(!this.getHead())return;var columns=this.getHead().getColumns();var row_cnt=0,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.m_from=parseInt(this.m_model.getPageFrom());pag.setCountTotal(this.m_model.getTotCount());}
var h_row_ind=0;var key_id_ar=this.getKeyIds();var shift_start_time=this.m_periodSelect.getDateFrom();var now=DateHelper.time();var now_shift_start=DateHelper.getStartOfShift();var prev_time_m,init_time_m;var future_shift;var now_m=now.getHours()*60+now.getMinutes();if(now.getTime()<shift_start_time.getTime()){future_shift=true;prev_time_m=shift_start_time.getHours()*60+shift_start_time.getMinutes();}
else{future_shift=false;now.setMinutes(Math.ceil(now.getMinutes()/this.m_stepMin)*this.m_stepMin);prev_time_m=now.getHours()*60+now.getMinutes();}
init_time_m=prev_time_m;var model_ind=0;var closed_shift;while(this.m_model.getNextRow()){var dt=this.m_model.getFieldValue("date_time");if(row_cnt==0){closed_shift=(dt.getTime()<now_shift_start.getTime());}
var dt_m=dt.getHours()*60+dt.getMinutes();var comp_time_m=(init_time_m>prev_time_m)?init_time_m:prev_time_m;if(!closed_shift&&dt_m>comp_time_m&&(future_shift||now_m<dt_m)){row_cnt=this.addEmptyRows(comp_time_m,dt_m,columns,row_cnt);}
prev_time_m=dt_m+this.m_stepMin;row=this.createNewRow(row_cnt,h_row_ind,model_ind);model_ind++;row_keys={};for(var k=0;k<key_id_ar.length;k++){row_keys[key_id_ar[k]]=this.m_model.getFieldValue(key_id_ar[k]);}
field_cnt=0;for(var col_id=0;col_id<columns.length;col_id++){columns[col_id].setGrid(this);if(columns[col_id].getField()&&columns[col_id].getField().getPrimaryKey()){row_keys[columns[col_id].getField().getId()]=columns[col_id].getField().getValue();}
var cell=this.createNewCell(columns[col_id],row);if(columns[col_id].getMaster()&&details_expanded){master_cell=cell;}
if(this.m_onEventAddCell){this.m_onEventAddCell.call(this,cell);}
row.addElement(cell);field_cnt++;}
row.setAttr("keys",CommonHelper.serialize(row_keys));if(details_expanded){var row_key_h=hex_md5(row.getAttr("keys"));if(detail_keys[row_key_h]){detail_keys[row_key_h].masterNode=row.getNode();detail_keys[row_key_h].masterCell=master_cell;}}
var row_cmd_class=this.getRowCommandClass();if(row_cmd_class){var row_class_options={"grid":this};row.addElement(new row_cmd_class(this.getId()+":"+body.getName()+":"+row.getId()+":cell-sys",row_class_options));}
if(this.m_onEventAddRow){this.m_onEventAddRow.call(this,row);}
body.addElement(row);row_cnt++;if(foot&&foot.calc){foot.calc(this.m_model);}}
var mm=this.m_shiftLengthMS/60/1000;if(!closed_shift&&prev_time_m<mm&&(future_shift||now_m<prev_time_m)){this.addEmptyRows(prev_time_m,mm,columns,row_cnt);}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd(this.m_model);}
body.toDOM(this.m_node);if(details_expanded){for(var det_h in detail_keys){if(!detail_keys[det_h].masterNode){DOMHelper.delNode(detail_keys[det_h].node);}
else{var p=detail_keys[det_h].masterNode.parentNode;var n_r=detail_keys[det_h].masterNode.nextSibling;var det_row;if(n_r){det_row=p.insertBefore(detail_keys[det_h].node,n_r);}
else{det_row=p.appendChild(detail_keys[det_h].node);}
if(detail_keys[det_h].masterCell){var tg=detail_keys[det_h].masterCell.getDetailToggle();if(tg){tg.setDetailRow(det_row);tg.setDetailVisible(true);}}}}}}
if(this.m_navigate||this.m_navigateClick){this.setSelection();}}
OrderMakeGrid.prototype.createNewRow=function(rowCnt,hRowInd,modelIndex){var r_class=this.getHead().getRowClass(hRowInd);var row_opts;var opts=this.getHead().getRowOptions();if(typeof(opts)=="function"){row_opts=opts.call(this);}
else{row_opts=CommonHelper.clone(opts);}
row_opts.attrs=row_opts.attrs||{};row_opts.attrs.modelIndex=modelIndex;if(this.m_onSelect){row_opts.className+=(row_opts.className?" ":"")+"for_select";}
if(this.m_onEventSetRowOptions){this.m_onEventSetRowOptions(row_opts);}
if(this.m_onEventSetRowClass){this.m_onEventSetRowClass(this.m_model,row_opts.className);}
var row;if(r_class.name=="Control"||r_class.name=="ControlContainer"){row=new r_class(this.getId()+":"+this.getBody().getName()+":"+rowCnt,row_opts.tagName||"DIV",row_opts);}
else{row=new r_class(this.getId()+":"+this.getBody().getName()+":"+rowCnt,row_opts);}
return row;}
OrderMakeGrid.prototype.addEmptyRows=function(fromMin,toMin,columns,rowCnt){var date_start=DateHelper.dateStart(this.m_periodSelect.getDateFrom());var row;var self=this;var row_pref=this.getId()+":"+this.getBody().getName()+":";for(var m=fromMin;m<toMin;m+=this.m_stepMin){var h=Math.floor(m/60);var mm=m-h*60;var value=((h<10)?"0":"")+h+":"+((mm<10)?"0":"")+mm;row=new GridRow(row_pref+rowCnt,{"className":"emptyRow","attrs":{"keys":("empty_"+rowCnt),"time":value}});var field_cnt=0,cell,cell_opts;for(var col_id=0;col_id<columns.length;col_id++){columns[col_id].setGrid(this);cell_opts={};if(columns[col_id].getId()=="date_time"){var h=Math.floor(m/60);var mm=m-h*60;cell_opts.attrs={"align":"center"};cell_opts.value=value;}
cell=new GridCell(null,cell_opts);row.addElement(cell);field_cnt++;}
this.getBody().addElement(row);rowCnt++;}
return rowCnt;}
OrderMakeGrid.prototype.onEditSelect=function(event){var tr=DOMHelper.getParentByTagName(event.target,"TR");if(tr&&DOMHelper.hasClass(tr,"emptyRow")){var self=this;this.m_dateTime_time=tr.getAttribute("time");this.dateTime_date=this.m_periodSelect.getDateFrom();var parent=this.getNode().parentNode.parentNode;this.m_oldParent=this.getNode().parentNode.parentNode;this.initEditView(parent,null,"insert");this.delDOM();this.editViewToDOM(parent,null,"insert");this.fillEditView("insert");}
else{return OrderMakeGrid.superclass.onEditSelect.call(this,event);}}
OrderMakeGrid.prototype.keysToPublicMethod=function(pm){var pm_fields=pm.getFields();var fields=this.m_model.getFields();for(id in pm_fields){if(fields[id]&&fields[id].getPrimaryKey()){var v=fields[id].getValue();pm_fields[id].setValue(v);}
else if(pm_fields[id].getPrimaryKey()){pm_fields[id].resetValue();}}}
OrderMakeGrid.prototype.delRow=function(rowNode){var pm=(new Order_Controller()).getPublicMethod("delete");this.setEnabled(false);this.setModelToCurrentRow();this.keysToPublicMethod(pm);var self=this;pm.run({"async":false,"ok":function(){self.afterServerDelRow();},"fail":function(resp,erCode,erStr){self.setEnabled(true);self.onError(resp,erCode,erStr);}});}
OrderMakeGrid.prototype.fillEditView=function(cmd){if(cmd!="insert"){this.keysToPublicMethod(this.m_editViewObj.getReadPublicMethod());}
OrderMakeGrid.superclass.fillEditView.call(this,cmd);}
OrderMakeGrid.prototype.afterServerDelRow=function(){this.deleteRowNode();this.setEnabled(true);var self=this;window.showTempNote("Заявка удалена",function(){self.focus();self.onRefresh();},2000);} 
function ProductionSiteEdit(id,options){options=options||{};options.model=new ProductionSite_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Завод:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new ProductionSite_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");ProductionSiteEdit.superclass.constructor.call(this,id,options);}
extend(ProductionSiteEdit,EditSelectRef); 
function ProductionBaseEdit(id,options){options=options||{};options.model=new ProductionBaseList_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"База:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new ProductionBase_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");ProductionBaseEdit.superclass.constructor.call(this,id,options);}
extend(ProductionBaseEdit,EditSelectRef); 
function DOCMaterialProcurementShiftGrid(id,options){options=options||{};this.m_initRawMaterial_Model=options.modelMat;var contr=new DOCMaterialProcurement_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("shift_date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"production_base":{"binding":new CommandBinding({"control":new ProductionBaseEdit(id+":filter-ctrl-production_base",{"contClassName":"form-group "+window.getBsCol(12)}),"field":new FieldInt("production_base_id")}),"sign":"e"}};var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();CommonHelper.merge(options,{"keyIds":["shift_date_time"],"controller":contr,"readPublicMethod":contr.getPublicMethod("get_shift_list"),"editInline":false,"editWinClass":DOCMaterialProcurementDialog_Form,"commands":new GridCmdContainerAjx(id+":cmd",{"cmdInsert":true,"cmdEdit":false,"cmdDelete":false,"cmdFilter":true,"filters":filters,"cmdSearch":false,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0")]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});DOCMaterialProcurementShiftGrid.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementShiftGrid,GridAjx);DOCMaterialProcurementShiftGrid.prototype.onGetData=function(resp){if(resp){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
if(this.m_model){var mat_m=resp?resp.getModel("RawMaterial_Model"):this.m_initRawMaterial_Model;var h_row=this.getHead().getElement("row0");h_row.delDOM();h_row.clear();h_row.addElement(new GridCellHead(h_row.getId()+":shift_date_time",{"value":"Смена","columns":[new GridColumnDateTime({"field":this.m_model.getField("shift_date_time"),"master":true,"detailViewClass":DOCMaterialProcurementList_View,"detailViewOptions":{"detailFilters":{"DOCMaterialProcurementList_Model":[{"masterFieldId":"shift_date_time","field":"date_time","sign":"ge","val":"0"},{"masterFieldId":"shift_date_time_end","field":"date_time","sign":"le","val":"0"}]}}})],"sortable":true,"sort":"desc"}));while(mat_m.getNextRow()){var col_mat_id=mat_m.getFieldValue("id");var col_id="quant_"+col_mat_id;h_row.addElement(new GridCellHead(h_row.getId()+":"+col_id,{"value":mat_m.getFieldValue("name"),"colAttrs":{"material_id":col_mat_id,"align":"right"},"columns":[new GridColumnFloat({"id":col_id})]}));}
var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();var detail_keys={};var rows=body.getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);for(var i=0;i<rows.length;i++){if(rows[i].getAttribute("for_keys")!=null){detail_keys[hex_md5(rows[i].getAttribute("for_keys"))]={"for_keys":rows[i].getAttribute("for_keys"),"node":rows[i]};}}
var details_expanded=(detail_keys&&!CommonHelper.isEmpty(detail_keys));var master_cell=null;if(foot&&foot.calcBegin){this.m_foot.calcBegin(this.m_model);}
if(!this.getHead())return;var columns=this.getHead().getColumns();var row_cnt=0,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.m_from=parseInt(this.m_model.getPageFrom());pag.setCountTotal(this.m_model.getTotCount());}
var h_row_ind=0;var key_id_ar=this.getKeyIds();var prev_shift;while(this.m_model.getNextRow()){var shift_date_time=this.m_model.getFieldValue("shift_date_time");var same_row=(prev_shift&&prev_shift.getTime()==shift_date_time.getTime());var quant=this.m_model.getFieldValue("quant");var mat_id=this.m_model.getFieldValue("material_id");if(!same_row){row=this.createNewRow(row_cnt,h_row_ind);row_keys={};for(var k=0;k<key_id_ar.length;k++){row_keys[key_id_ar[k]]=this.m_model.getFieldValue(key_id_ar[k]);}
field_cnt=0;for(var col_id=0;col_id<columns.length;col_id++){columns[col_id].setGrid(this);if(columns[col_id].getField()&&columns[col_id].getField().getPrimaryKey()){row_keys[columns[col_id].getField().getId()]=columns[col_id].getField().getValue();}
var cell=this.createNewCell(columns[col_id],row);if(cell.getAttr("material_id")==mat_id){cell.setValue(quant);}
if(columns[col_id].getMaster()&&details_expanded){master_cell=cell;}
if(this.m_onEventAddCell){this.m_onEventAddCell.call(this,cell);}
row.addElement(cell);field_cnt++;}
row.setAttr("keys",CommonHelper.serialize(row_keys));if(details_expanded){var row_key_h=hex_md5(row.getAttr("keys"));if(detail_keys[row_key_h]){detail_keys[row_key_h].masterNode=row.getNode();detail_keys[row_key_h].masterCell=master_cell;}}
var row_cmd_class=this.getRowCommandClass();if(row_cmd_class){var row_class_options={"grid":this};row.addElement(new row_cmd_class(this.getId()+":"+body.getName()+":"+row.getId()+":cell-sys",row_class_options));}
if(this.m_onEventAddRow){this.m_onEventAddRow.call(this,row);}
body.addElement(row);if(foot&&foot.calc){foot.calc(this.m_model);}}
else{for(var col_id=0;col_id<columns.length;col_id++){var cell=columns[col_id].getGridCell();if(cell.getAttr("material_id")==mat_id){cell.setValue(quant);break;}}}
row_cnt++;prev_shift=shift_date_time;}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd(this.m_model);}
this.getHead().toDOM();body.toDOM(this.m_node);if(details_expanded){for(var det_h in detail_keys){if(!detail_keys[det_h].masterNode){DOMHelper.delNode(detail_keys[det_h].node);}
else{var p=detail_keys[det_h].masterNode.parentNode;var n_r=detail_keys[det_h].masterNode.nextSibling;var det_row;if(n_r){det_row=p.insertBefore(detail_keys[det_h].node,n_r);}
else{det_row=p.appendChild(detail_keys[det_h].node);}
if(detail_keys[det_h].masterCell){var tg=detail_keys[det_h].masterCell.getDetailToggle();if(tg){tg.setDetailRow(det_row);tg.setDetailVisible(true);}}}}}}
if(this.m_navigate||this.m_navigateClick){this.setSelection();}} 
function MaterialSelect(id,options){options=options||{};options.model=new RawMaterial_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Материал:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new RawMaterial_Controller();options.readPublicMethod=contr.getPublicMethod(options.forConcrete?"get_list_for_concrete":"get_list");MaterialSelect.superclass.constructor.call(this,id,options);}
extend(MaterialSelect,EditSelectRef); 
function RAMaterialConsumptionDateGrid(id,options){options=options||{};this.m_initRawMaterial_Model=options.modelMat;var contr=new RAMaterialConsumption_Controller();var constants={"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("shift")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};var popup_menu=new PopUpMenu();CommonHelper.merge(options,{"keyIds":["shift"],"controller":contr,"readPublicMethod":contr.getPublicMethod("get_dates_list"),"editInline":null,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":cmd",{"cmdInsert":false,"cmdInsert":false,"cmdDelete":false,"cmdFilter":true,"filters":filters,"cmdSearch":false,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0")]}),"foot":new GridFoot(id+"grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":foot:row0")]}),"pagination":null,"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true});RAMaterialConsumptionDateGrid.superclass.constructor.call(this,id,options);}
extend(RAMaterialConsumptionDateGrid,GridAjx);RAMaterialConsumptionDateGrid.prototype.onGetData=function(resp){if(resp){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
if(this.m_model){var model_fields;if(!this.m_model.getRowCount()){this.m_model.setFields({"shift":new FieldDateTime("shift"),"shift_descr":new FieldString("shift_descr"),"shift_from_descr":new FieldString("shift_from_descr"),"shift_to_descr":new FieldString("shift_to_descr"),"concrete_quant":new FieldString("concrete_quant")});}
var mat_m=resp?resp.getModel("RawMaterial_Model"):this.m_initRawMaterial_Model;var f_row=this.getFoot().getElement("row0");var h_row=this.getHead().getElement("row0");h_row.delDOM();h_row.clear();f_row.delDOM();f_row.clear();h_row.addElement(new GridCellHead(h_row.getId()+":shift",{"value":"Смена","columns":[new GridColumn({"field":this.m_model.getField("shift_descr"),"master":true,"detailViewClass":RAMaterialConsumptionDocList_View,"detailViewOptions":{"detailFilters":{"RAMaterialConsumptionDocList_Model":[{"masterFieldId":"shift","field":"date_time","sign":"ge","val":"0"},{"masterFieldId":"shift_to","field":"date_time","sign":"le","val":"0"}]}}})]}));f_row.addElement(new GridCell(h_row.getId()+":sp1"));h_row.addElement(new GridCellHead(h_row.getId()+":concrete_quant",{"value":"Объем","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":this.m_model.getField("concrete_quant"),"precision":2})]}));f_row.addElement(new GridCellFoot(f_row.getId()+":tot_concrete_quant",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"concrete_quant","gridColumn":new GridColumnFloat({"id":"tot_concrete_quant"})}));var mat_ind=0;while(mat_m.getNextRow()){mat_ind++;var col_mat_id=mat_m.getFieldValue("id");var col_id="mat"+mat_ind+"_quant";if(!this.m_model.fieldExists(col_id)){this.m_model.addField(new FieldFloat(col_id));}
h_row.addElement(new GridCellHead(h_row.getId()+":"+col_id,{"value":mat_m.getFieldValue("name"),"colAttrs":{"material_id":col_mat_id,"align":"right"},"columns":[new GridColumnFloat({"field":this.m_model.getField(col_id),"precision":3})]}));f_row.addElement(new GridCellFoot(f_row.getId()+":tot_quant_"+col_mat_id,{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":col_id,"gridColumn":new GridColumnFloat({"id":"tot_quant_"+col_mat_id,"precision":3,"thousandSeparator":""})}));}
this.getHead().toDOM();this.getFoot().toDOM();}
RAMaterialConsumptionDateGrid.superclass.onGetData.call(this,resp);} 
function RAMaterialConsumptionDocGrid(id,options){options=options||{};this.m_initRawMaterial_Model=options.modelMat;var contr=new RAMaterialConsumption_Controller();var constants={"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var period_ctrl=new EditPeriodDateShift(id+":filter-ctrl-period",{"field":new FieldDateTime("shift")});var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();CommonHelper.merge(options,{"keyIds":["date_time"],"controller":contr,"readPublicMethod":contr.getPublicMethod("get_docs_list"),"editInline":null,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":cmd",{"cmdInsert":false,"cmdInsert":false,"cmdDelete":false,"cmdFilter":false,"cmdSearch":true,"variantStorage":options.variantStorage}),"popUpMenu":popup_menu,"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0")]}),"pagination":null,"autoRefresh":true,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true,"lastRowFooter":true});RAMaterialConsumptionDocGrid.superclass.constructor.call(this,id,options);}
extend(RAMaterialConsumptionDocGrid,GridAjx);RAMaterialConsumptionDocGrid.prototype.onGetData=function(resp){if(resp){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
if(this.m_model){var model_fields;if(!this.m_model.getRowCount()){this.m_model.setFields({"date_time":new FieldDateTime("date_time"),"vehicle_descr":new FieldString("vehicle_descr"),"driver_descr":new FieldString("driver_descr"),"concrete_type_descr":new FieldString("concrete_type_descr"),"concrete_quant":new FieldString("concrete_quant")});}
var mat_m=resp?resp.getModel("RawMaterial_Model"):this.m_initRawMaterial_Model;var h_row=this.getHead().getElement("row0");h_row.delDOM();h_row.clear();h_row.addElement(new GridCellHead(h_row.getId()+":date_time",{"value":"Смена","colAttrs":{"align":"center"},"columns":[new GridColumnDate({"field":this.m_model.getField("date_time"),"dateFormat":"H:i"})]}));h_row.addElement(new GridCellHead(h_row.getId()+":concrete_type_descr",{"value":"Марка","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":this.m_model.getField("concrete_type_descr")})]}));h_row.addElement(new GridCellHead(h_row.getId()+":vehicle_descr",{"value":"ТС","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":this.m_model.getField("vehicle_descr")})]}));h_row.addElement(new GridCellHead(h_row.getId()+":driver_descr",{"value":"Водитель","columns":[new GridColumn({"field":this.m_model.getField("driver_descr")})]}));h_row.addElement(new GridCellHead(h_row.getId()+":concrete_quant",{"value":"Объем","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":this.m_model.getField("concrete_quant"),"precision":2})]}));var mat_ind=0;while(mat_m.getNextRow()){mat_ind++;var col_mat_id=mat_m.getFieldValue("id");var col_id="mat"+mat_ind+"_quant";if(!this.m_model.fieldExists(col_id)){this.m_model.addField(new FieldFloat(col_id));}
h_row.addElement(new GridCellHead(h_row.getId()+":"+col_id,{"value":mat_m.getFieldValue("name"),"colAttrs":{"material_id":col_mat_id,"align":"right"},"columns":[new GridColumnFloat({"field":this.m_model.getField(col_id),"precision":3})]}));}
this.getHead().toDOM();}
RAMaterialConsumptionDocGrid.superclass.onGetData.call(this,resp);} 
function PeriodSelectBeton(id,options){options=options||{};if(options.periodShift){this.PERIOD_ALIASES=["all","shift","prev_shift","week","month","prev_month","quarter","year"];this.PERIODS=["Произвольный период","Текущая смена","Предыдущая смена","Текущая неделя","Текущий месяц","Предыдущий месяц","Текущий квартал","Текущий год"];}
else{this.PERIOD_ALIASES=["all","day","week","month","quarter","year"];this.PERIODS=["Произвольный период","Текущий день","Текущая неделя","Текущий месяц","Текущий квартал","Текущий год"];}
PeriodSelectBeton.superclass.constructor.call(this,id,options);}
extend(PeriodSelectBeton,PeriodSelect); 
function EditColorPalette(id,options){options=options||{};var self=this;options.buttonSelect=new ButtonCtrl(id+":btnSel",{"glyph":"glyphicon-menu-hamburger","onClick":function(e){self.selectColor(this.getEditControl());}});EditColorPalette.superclass.constructor.call(this,id,options);}
extend(EditColorPalette,EditString);EditColorPalette.prototype.selectColor=function(editCtrl){var self=this;this.m_view=new View(this.getId()+":view:body:view",{"template":window.getApp().getTemplate("ColorPaletteList"),"events":{"click":function(e){if(e.target.tagName.toUpperCase()=="DIV"){var color=e.target.attributes.color_palette.value;editCtrl.setValue(color);self.closeSelect();var old_color=window.getApp().getColorClass();window.getApp().setColorClass(color);var sl=$(document.body);$(".bg-"+old_color).toggleClass(".bg-"+old_color+" bg-"+color);$(".text-"+old_color).toggleClass(".text-"+old_color+" text-"+color);$(".border-"+old_color).toggleClass(".border-"+old_color+" border-"+color);}}}});this.m_form=new WindowFormModalBS(this.getId()+":form",{"cmdCancel":true,"controlCancelCaption":this.BTN_CANCEL_CAP,"controlCancelTitle":this.BTN_CANCEL_TITLE,"cmdOk":false,"controlOkCaption":null,"controlOkTitle":null,"onClickCancel":function(){self.closeSelect();},"onClickOk":function(){self.closeSelect();},"content":this.m_view,"contentHead":"Цветовая схема"});this.m_form.open();}
EditColorPalette.prototype.closeSelect=function(){if(this.m_view){this.m_view.delDOM();delete this.m_view;}
if(this.m_form){this.m_form.close();delete this.m_form;}} 
function AssignedVehicleGrid(id,options){options=options||{};options.className=OrderMakeList_View.prototype.TABLE_CLASS_NO_WRAP+" "+window.getApp().getBsCol(12);if(options.noAutoRefresh===true){options.contClassName=window.getApp().getBsCol(4);}
this.m_playSound=options.playSound;this.m_shortDescriptions=options.shortDescriptions;var self=this;options.keyIds=["id"];options.editInline=false;options.editWinClass=null;options.commands=null;options.popUpMenu=null;options.onEventSetRowOptions=function(opts){var m=this.getModel();var ass_time=m.getFieldValue("date_time");if(ass_time&&((DateHelper.time().getTime()-ass_time.getTime())/1000/60)<=self.JUST_ASSIGNED_SEC){opts.className=opts.className||"";opts.className+=(opts.className.length?" ":"")+"just_assigned";}};options.head=new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":[new GridCellHead(id+":head:row0:header",{"value":options.prodSiteDescr,"colSpan":2})]}),new GridRow(id+":head:row1",{"elements":[new GridCellHead(id+":head:row1:driver",{"value":"Водитель","columns":[new GridColumn({"id":"driver","formatFunction":function(f,cell){var v=(f&&f.vehicles_ref&&!f.vehicles_ref.isNull())?f.vehicles_ref.getValue().getDescr():"";var res="";if(self.m_shortDescriptions){var ch;for(var i=0;i<v.length;i++){ch=v.charCodeAt(i);if(ch>=48&&ch<=57){res+=v[i];}}}else{res=v;}
var fio=(f&&f.drivers_ref&&!f.drivers_ref.isNull())?f.drivers_ref.getValue().getDescr():"";var names=fio.split(" ");if(names.length>0){fio=names[0];if(names.length>1){fio+=" "+names[1].substring(0,1).toUpperCase()+".";}
if(names.length>2){fio+=names[2].substring(0,1).toUpperCase()+".";}}
res+=(fio&&fio.length)?", "+fio:"";if(self.m_shortDescriptions){res=window.getApp().formatCellStr(res,cell,10);}
return res;}})]}),new GridCellHead(id+":head:row1:destinations_ref",{"value":"Объект","columns":[new GridColumn({"field":options.model.getField("destinations_ref"),"formatFunction":function(f,cell){var res="";var not_empty=(f&&f.destinations_ref&&!f.destinations_ref.isNull());if(self.m_shortDescriptions&&not_empty){res=window.getApp().formatCell(f.destinations_ref,cell,VehicleScheduleMakeOrderList_View.prototype.COL_DEST_LEN);}
else if(not_empty){res=f.destinations_ref.getValue().getDescr();}
return res;}})]})]})]});this.m_prodSiteId=options.prodSiteId;AssignedVehicleGrid.superclass.constructor.call(this,id,options);}
extend(AssignedVehicleGrid,GridAjx);AssignedVehicleGrid.prototype.JUST_ASSIGNED_SEC=2;AssignedVehicleGrid.prototype.m_oldDataHash;AssignedVehicleGrid.prototype.onGetData=function(){var new_data=" ";if(this.m_model){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();var detail_keys={};var rows=body.getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);for(var i=0;i<rows.length;i++){if(rows[i].getAttribute("for_keys")!=null){detail_keys[hex_md5(rows[i].getAttribute("for_keys"))]={"for_keys":rows[i].getAttribute("for_keys"),"node":rows[i]};}}
var details_expanded=(detail_keys&&!CommonHelper.isEmpty(detail_keys));var master_cell=null;if(foot&&foot.calcBegin){this.m_foot.calcBegin(this.m_model);}
if(!this.getHead())return;var columns=this.getHead().getColumns();var row_cnt=0,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.m_from=parseInt(this.m_model.getPageFrom());pag.setCountTotal(this.m_model.getTotCount());}
var h_row_ind=0;var key_id_ar=this.getKeyIds();while(this.m_model.getNextRow()){var site_ref=this.m_model.getFieldValue("production_sites_ref");if(site_ref&&!site_ref.isNull()&&site_ref.getKey()!=this.m_prodSiteId){continue;}
row=this.createNewRow(row_cnt,h_row_ind);row_keys={};for(var k=0;k<key_id_ar.length;k++){row_keys[key_id_ar[k]]=this.m_model.getFieldValue(key_id_ar[k]);}
field_cnt=0;for(var col_id=0;col_id<columns.length;col_id++){columns[col_id].setGrid(this);if(columns[col_id].getField()&&columns[col_id].getField().getPrimaryKey()){row_keys[columns[col_id].getField().getId()]=columns[col_id].getField().getValue();}
var cell=this.createNewCell(columns[col_id],row);if(columns[col_id].getMaster()&&details_expanded){master_cell=cell;}
if(this.m_onEventAddCell){this.m_onEventAddCell.call(this,cell);}
row.addElement(cell);field_cnt++;}
var row_keys_str=CommonHelper.serialize(row_keys);new_data+=row_keys_str;row.setAttr("keys",row_keys_str);if(details_expanded){var row_key_h=hex_md5(row.getAttr("keys"));if(detail_keys[row_key_h]){detail_keys[row_key_h].masterNode=row.getNode();detail_keys[row_key_h].masterCell=master_cell;}}
var row_cmd_class=this.getRowCommandClass();if(row_cmd_class){var row_class_options={"grid":this};row.addElement(new row_cmd_class(this.getId()+":"+body.getName()+":"+row.getId()+":cell-sys",row_class_options));}
if(this.m_onEventAddRow){this.m_onEventAddRow.call(this,row);}
body.addElement(row);row_cnt++;if(foot&&foot.calc){foot.calc(this.m_model);}}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd(this.m_model);}
body.toDOM(this.m_node);if(details_expanded){for(var det_h in detail_keys){if(!detail_keys[det_h].masterNode){DOMHelper.delNode(detail_keys[det_h].node);}
else{var p=detail_keys[det_h].masterNode.parentNode;var n_r=detail_keys[det_h].masterNode.nextSibling;var det_row;if(n_r){det_row=p.insertBefore(detail_keys[det_h].node,n_r);}
else{det_row=p.appendChild(detail_keys[det_h].node);}
if(detail_keys[det_h].masterCell){var tg=detail_keys[det_h].masterCell.getDetailToggle();if(tg){tg.setDetailRow(det_row);tg.setDetailVisible(true);}}}}}}
if(this.m_navigate||this.m_navigateClick){this.setSelection();}
var new_data_h=CommonHelper.md5(new_data);if(!this.m_oldDataHash||this.m_oldDataHash!=new_data_h){if(this.m_oldDataHash!=undefined&&this.m_playSound){this.makeSound();}
this.m_oldDataHash=new_data_h;}}
AssignedVehicleGrid.prototype.makeSound=function(){if(!this.m_shortDescriptions){window.getApp().makeGridNewDataSound();}} 
function Weather(id,options){options=options||{};this.m_refreshInterval=(options.refreshInterval||this.DEF_REFRESH)*1000;this.m_collapsed=true;var self=this;options.events={"onclick":function(){var cont=new Control("WeatherDetails:cont","DIV");cont.getNode().innerHTML=self.m_contentDetails;(new WindowFormModalBS("WeatherDetails",{"contentHead":"Подробности погоды","content":cont,"cmdCancel":true})).open();}}
Weather.superclass.constructor.call(this,id,"A",options);if(options.model)
this.setData(options.model);}
extend(Weather,Control);Weather.prototype.m_collapsed;Weather.prototype.CLASS_COLLAPSED="icon-plus3";Weather.prototype.CLASS_EXPANDED="icon-minus3";Weather.prototype.DEF_REFRESH=10*60;Weather.prototype.toDOM=function(p){Weather.superclass.toDOM.call(this,p);var self=this;this.m_timer=setInterval(function(){self.refresh();},this.m_refreshInterval);this.refresh();}
Weather.prototype.delDOM=function(){if(this.m_timer)
clearInterval(this.m_timer);Weather.superclass.delDOM.call(this);}
Weather.prototype.setData=function(model){if(model&&model.getNextRow()){this.getNode().innerHTML=model.getFieldValue("content");this.m_contentDetails=model.getFieldValue("content_details");var v=model.getFieldValue("update_dt");var upd_dt_s="";if(v){upd_dt_s+="Обновлено в "+DateHelper.format(v,"H:i");}
this.setAttr("title",upd_dt_s);}}
Weather.prototype.refresh=function(){var self=this;(new Weather_Controller()).getPublicMethod("get_current").run({"ok":function(resp){self.setData(resp.getModel("Weather_Model"));}});} 
function Connect1cCheck(id,options){options=options||{};this.m_lastValue=false;this.m_refreshInterval=0;Connect1cCheck.superclass.constructor.call(this,id,"IMG",{"attrs":{"src":this.PIC_ERR,"width":"10","height":"10","title":"Статус соединения с 1с"}});}
extend(Connect1cCheck,Control);Connect1cCheck.prototype.DEF_REFRESH=1*60;Connect1cCheck.prototype.DEF_REFRESH_AJX=10*60;Connect1cCheck.prototype.m_lastValue;Connect1cCheck.prototype.PIC_OK="./img/dot_green.png";Connect1cCheck.prototype.PIC_ERR="./img/dot_red.png";Connect1cCheck.prototype.setRefreshInterval=function(newInterval){var self=this;if(this.m_timer!==undefined){clearInterval(this.m_timer);this.m_timer=undefined;}
this.m_refreshInterval=newInterval;if(newInterval>0){this.m_timer=setInterval(function(){self.refresh();},this.m_refreshInterval);}}
Connect1cCheck.prototype.toDOM=function(p){const evSrv=window.getApp().getAppSrv();if(evSrv&&evSrv.connActive()){const self=this;this.m_srvEvents={events:[{"id":"Connect1cCheck.update"}],onEvent:function(params){self.onPing1cChange(params);},onClose:function(params){self.srvEventsOnClose(params)},onSubscribed:function(){self.setRefreshInterval(0);}};this.setRefreshInterval(this.DEF_REFRESH*1000);}else{this.setRefreshInterval(this.DEF_REFRESH_AJX*1000);}
Connect1cCheck.superclass.toDOM.call(this,p);this.refresh();}
Connect1cCheck.prototype.delDOM=function(){if(this.m_timer){clearInterval(this.m_timer);this.m_timer=undefined;}
Connect1cCheck.superclass.delDOM.call(this);}
Connect1cCheck.prototype.updateConnectStatus=function(connected){}
Connect1cCheck.prototype.refresh=function(){var self=this;(new Connect1cCheck_Controller()).getPublicMethod("connected").run({"ok":function(resp){const modelData=resp.getModelData("Connect1c_Model");const f=new FieldBool("pong");const model=new ModelXML("Connect1c_Model",{data:modelData,fields:[f]});let connected=false;if(model.getNextRow()){connected=model.getFieldValue("pong");}
if(connected!==self.m_lastValue){self.onValueChange(connected);}}});}
Connect1cCheck.prototype.onValueChange=function(newVal){this.m_lastValue=newVal;this.setAttr("src",newVal?this.PIC_OK:this.PIC_ERR);}
Connect1cCheck.prototype.onPing1cChange=function(json){if(json.params&&json.params.result!==undefined&&this.m_lastValue!==json.params.result){this.onValueChange(json.params.result);}}
Connect1cCheck.prototype.srvEventsOnClose=function(message){if(message&&message.code>1000){this.setRefreshInterval(this.DEF_REFRESH*1000);}} 
function VehicleDriverForSchedGenGrid(id,options){var model=new VehicleDriverForSchedGen_Model({"sequences":{"id":0}});var self=this;var cells=[new GridCellHead(id+":head:vehicle",{"value":"Автомобиль","columns":[new GridColumnRef({"field":model.getField("vehicle"),"ctrlClass":VehicleEdit,"ctrlOptions":{"labelCaption":"","onSelect":function(f){self.getEditViewObj().getElement("driver").setValue(f.drivers_ref.getValue());}}})]}),new GridCellHead(id+":head:driver",{"value":"Водитель","columns":[new GridColumnRef({"field":model.getField("driver"),"ctrlClass":DriverEditRef,"ctrlOptions":{"labelCaption":""}})]})];options={"model":model,"keyIds":["id"],"controller":new VehicleDriverForSchedGen_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false,"cmdPrint":false,"cmdRefresh":false}),"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};VehicleDriverForSchedGenGrid.superclass.constructor.call(this,id,options);}
extend(VehicleDriverForSchedGenGrid,GridAjx); 
function EmployeeWorkTimeScheduleGrid(id,options){options=options||{};var contr=new EmployeeWorkTimeSchedule_Controller();CommonHelper.merge(options,{"keyIds":["day","employee_id"],"controller":contr,"readPublicMethod":contr.getPublicMethod("get_list"),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdInsert":false,"cmdEdit":true,"cmdDelete":false,"cmdFilter":false,"cmdSearch":false,"cmdAllCommands":true,"cmdPrint":true}),"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0")]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true});EmployeeWorkTimeScheduleGrid.superclass.constructor.call(this,id,options);}
extend(EmployeeWorkTimeScheduleGrid,GridAjx);EmployeeWorkTimeScheduleGrid.prototype.m_month;EmployeeWorkTimeScheduleGrid.prototype.m_employeeId;EmployeeWorkTimeScheduleGrid.prototype.m_employeeTotal;EmployeeWorkTimeScheduleGrid.prototype.onRefresh=function(callBack){this.m_month=undefined;this.m_employeeId=undefined;this.m_employeeTotal=0;EmployeeWorkTimeScheduleGrid.superclass.onRefresh.call(this,callBack);}
EmployeeWorkTimeScheduleGrid.prototype.onGetData=function(resp){if(resp){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
if(this.m_model){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();var detail_keys={};var rows=body.getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);for(var i=0;i<rows.length;i++){if(rows[i].getAttribute("for_keys")!=null){detail_keys[hex_md5(rows[i].getAttribute("for_keys"))]={"for_keys":rows[i].getAttribute("for_keys"),"node":rows[i]};}}
var details_expanded=(detail_keys&&!CommonHelper.isEmpty(detail_keys));var master_cell=null;if(foot&&foot.calcBegin){this.m_foot.calcBegin(this.m_model);}
if(!this.getHead())return;var row_cnt=0,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.m_from=parseInt(this.m_model.getPageFrom());pag.setCountTotal(this.m_model.getTotCount());}
var h_row_ind=0;var key_id_ar=this.getKeyIds();var columns;while(this.m_model.getNextRow()){if(!this.m_month||this.m_month!=this.m_model.getFieldValue("day").getMonth()){var head=this.getHead();var h_row=head.getElement("row0");h_row.delDOM();h_row.clear();var dd=this.m_model.getFieldValue("day");this.m_month=dd.getMonth();h_row.addElement(new GridCellHead(h_row.getId()+":employee",{"value":"ФИО","colAttrs":{"style":"white-space:nowrap;"},"columns":[new GridColumn({"id":"employee_descr"})]}));for(var i=1;i<=DateHelper.daysInMonth(dd);i++){h_row.addElement(new GridCellHead(h_row.getId()+":day_"+i,{"value":i,"columns":[new GridColumn({"id":"day_"+i})]}));}
h_row.addElement(new GridCellHead(h_row.getId()+":total",{"value":"Итого","colAttrs":{"align":"right","style":"font-weight:bolder;"},"columns":[new GridColumn({"id":"total"})]}));head.toDOM();columns=this.getHead().getColumns();}
var employee_id=this.m_model.getFieldValue("employee_id");var day=this.m_model.getFieldValue("day");var col_id;var cell;if(!this.m_employeeId||this.m_employeeId!=employee_id){if(this.m_employeeId){console.log("Setting totalTo "+this.m_employeeTotal)
cell=this.createNewCell(columns[columns.length-1],row);cell.setValue(this.m_employeeTotal);row.addElement(cell);}
this.m_employeeId=employee_id;this.m_employeeTotal=0;row=this.createNewRow(row_cnt,h_row_ind);row.setAttr("keys",CommonHelper.serialize({"employee_id":employee_id}));body.addElement(row);row_cnt++;cell=this.createNewCell(columns[0],row);cell.setValue(this.m_model.getFieldValue("employee_descr"));row.addElement(cell);}
var d_ind=day.getDate();cell=this.createNewCell(columns[d_ind],row);var h=this.m_model.getFieldValue("hours");cell.setValue((h!=undefined)?h:"");cell.setAttr("day_off",this.m_model.getFieldValue("day_off"));cell.setAttr("align","center");cell.setAttr("day",DateHelper.format(day,"Y-m-d"));row.addElement(cell);this.m_employeeTotal+=parseInt((h!=undefined)?h:"0",10);}
if(row&&this.m_employeeId){cell=this.createNewCell(columns[columns.length-1],row);cell.setValue(this.m_employeeTotal);row.addElement(cell);}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd(this.m_model);}
body.toDOM(this.m_node);if(details_expanded){for(var det_h in detail_keys){if(!detail_keys[det_h].masterNode){DOMHelper.delNode(detail_keys[det_h].node);}
else{var p=detail_keys[det_h].masterNode.parentNode;var n_r=detail_keys[det_h].masterNode.nextSibling;var det_row;if(n_r){det_row=p.insertBefore(detail_keys[det_h].node,n_r);}
else{det_row=p.appendChild(detail_keys[det_h].node);}
if(detail_keys[det_h].masterCell){var tg=detail_keys[det_h].masterCell.getDetailToggle();if(tg){tg.setDetailRow(det_row);tg.setDetailVisible(true);}}}}}}
if(this.m_navigate||this.m_navigateClick){this.setSelection();}}
EmployeeWorkTimeScheduleGrid.prototype.edit=function(cmd,editOptions){if(this.m_hEdit)return;this.m_editNode=this.getSelectedNode();if(this.m_editNode&&this.m_editNode.getAttribute("name")!="employee_descr"&&this.m_editNode.getAttribute("name")!="total"){var self=this;var val=this.m_editNode.textContent;this.m_refInt=this.getRefreshInterval();this.setRefreshInterval(0);var keys=this.getSelectedNodeKeys();this.m_hEdit=new EditHour("hour_inplace_edit",{"employee_id":keys["employee_id"],"day":DOMHelper.getAttr(this.m_editNode,"day"),"value":val,"onEsc":function(){self.onEditComplete(true);},"onSave":function(){var val=self.m_hEdit.getValue();if(val!=self.m_hEdit.m_oldVal){var pm=(new Employee_Controller()).getPublicMethod("set_work_schedule_hour");pm.setFieldValue("employee_id",self.m_hEdit.m_employeeId);pm.setFieldValue("day",self.m_hEdit.m_day);pm.setFieldValue("hours",val);pm.run({"ok":function(resp){self.onEditComplete();},"fail":function(resp,errCode,errStr){self.onEditComplete(true);throw Error(errStr);}});}
else{self.onEditComplete(true);}}});this.m_editNode.textContent="";this.m_hEdit.toDOM(this.m_editNode);this.m_hEdit.m_node.focus();this.m_hEdit.m_node.setSelectionRange(0,val.length,"backward");}}
EmployeeWorkTimeScheduleGrid.prototype.onEditComplete=function(esc){var n=this.m_hEdit.m_node.parentNode;var val=esc?this.m_hEdit.m_oldVal:this.m_hEdit.getValue();this.m_hEdit.delDOM();delete this.m_hEdit;this.m_editNode.textContent=val;this.setRefreshInterval(this.m_refInt);}
function EditHour(id,options){var self=this;options.attrs={};options.maxLength=3;options.cmdClear=false;this.m_oldVal=options.value;this.m_employeeId=options.employee_id;this.m_day=options.day;this.m_onSave=options.onSave;this.m_onEsc=options.onEsc;EditHour.superclass.constructor.call(this,id,options);}
extend(EditHour,EditNum);EditHour.prototype.toDOM=function(parent){EditHour.superclass.toDOM.call(this,parent);var self=this;EventHelper.add(this.m_node,"keydown",function(event){event=EventHelper.fixMouseEvent(event);var key_code=(event.charCode)?event.charCode:event.keyCode;if(key_code==13){self.m_onSave();}
else if(key_code==27){self.m_onEsc();}});} 
function QuarryEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Карьер:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=QuarryList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=null;options.acMinLengthForQuery=1;options.acController=new Quarry_Controller();options.acModel=new Quarry_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";QuarryEdit.superclass.constructor.call(this,id,options);}
extend(QuarryEdit,EditRef); 
function OrderEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Заявка:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=OrderList_Form;options.selectDescrIds=options.selectDescrIds||["number"];options.editWinClass=null;options.acMinLengthForQuery=1;options.acController=new Order_Controller();options.acModel=new OrderList_Model();options.acPatternFieldId=options.acPatternFieldId||"number";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFunction=function(fields){return fields.number.getValue()+" от "+DateHelper.format(fields.date_time.getValue(),"d/m/y H:i")+" ("+fields.clients_ref.getValue().getDescr()+")";}
options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";OrderEdit.superclass.constructor.call(this,id,options);}
extend(OrderEdit,EditRef); 
function ShipmentEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Отгрузка:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=ShipmentList_Form;options.selectDescrIds=options.selectDescrIds||["id"];options.editWinClass=ShipmentDialog_Form;options.acMinLengthForQuery=1;options.acController=new Shipment_Controller();options.acModel=new ShipmentList_Model();options.acPatternFieldId=options.acPatternFieldId||"id";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFunction=function(fields){return fields.id.getValue()+" от "+DateHelper.format(fields.ship_date_time.getValue(),"d/m/y H:i")+" ("+fields.clients_ref.getValue().getDescr()+")";}
options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";ShipmentEdit.superclass.constructor.call(this,id,options);}
extend(ShipmentEdit,EditRef); 
function ConcreteCostForOwnerHeadEdit(id,options){options=options||{};options.model=new ConcreteCostForOwnerHeader_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Прайс бетон:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFormatFunction=function(fields){return fields.comment_text.getValue()+" ("+DateHelper.format(fields.create_date.getValue(),"d/m/y")+")";}
var contr=new ConcreteCostForOwnerHeader_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");ConcreteCostForOwnerHeadEdit.superclass.constructor.call(this,id,options);}
extend(ConcreteCostForOwnerHeadEdit,EditSelectRef); 
function ShipmentForVehOwnerCmdSetAgreed(id,options){options=options||{};var cur_d=DateHelper.time();this.m_accPeriodStartDescr=DateHelper.format(new Date(cur_d.getFullYear(),cur_d.getMonth()-1,1),"d/m/y");this.m_accPeriodEndDescr=DateHelper.format(DateHelper.monthEnd(new Date(cur_d.getFullYear(),cur_d.getMonth()-1,1)),"d/m/y");this.TITLE=this.TITLE+" с "+this.m_accPeriodStartDescr+" по "+this.m_accPeriodEndDescr;options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;options.glyph="glyphicon-ok";options.title=this.TITLE;options.caption="Согласовать все с "+this.m_accPeriodStartDescr+" по "+this.m_accPeriodEndDescr+" ";ShipmentForVehOwnerCmdSetAgreed.superclass.constructor.call(this,id,options);}
extend(ShipmentForVehOwnerCmdSetAgreed,GridCmd);ShipmentForVehOwnerCmdSetAgreed.prototype.TITLE="Согласовать все несогласованные";ShipmentForVehOwnerCmdSetAgreed.prototype.METHOD_ID="owner_set_agreed_all";ShipmentForVehOwnerCmdSetAgreed.prototype.doAgree=function(){this.m_grid.setModelToCurrentRow();var pm=(new Shipment_Controller()).getPublicMethod(this.METHOD_ID);var self=this;pm.run({"ok":function(resp){self.m_grid.onRefresh(function(){window.showNote("Все документы согласованы");});}})}
ShipmentForVehOwnerCmdSetAgreed.prototype.onCommand=function(){var constants={"vehicle_owner_accord_from_day":null,"vehicle_owner_accord_to_day":null};window.getApp().getConstantManager().get(constants);var cur_d=DateHelper.time();if(!(cur_d.getDate()>=constants.vehicle_owner_accord_from_day.getValue()&&cur_d.getDate()<=constants.vehicle_owner_accord_to_day.getValue())){var acc_start=DateHelper.format(new Date(cur_d.getFullYear(),cur_d.getMonth(),constants.vehicle_owner_accord_from_day.getValue()),"d/m/y");var acc_end=DateHelper.format(new Date(cur_d.getFullYear(),cur_d.getMonth(),constants.vehicle_owner_accord_to_day.getValue()),"d/m/y");throw new Error("Согласование предыдущего месяца разрешено с "+DateHelper.format(acc_start,"d/m/y")+" по "+DateHelper.format(acc_end,"d/m/y"));}
var self=this;WindowQuestion.show({"yes":true,"no":false,"cancel":true,"text":this.TITLE+"?","callBack":function(res){if(res==WindowQuestion.RES_YES){self.doAgree();}}});} 
function ShipmentPumpForVehOwnerCmdSetAgreed(id,options){options=options||{};ShipmentPumpForVehOwnerCmdSetAgreed.superclass.constructor.call(this,id,options);}
extend(ShipmentPumpForVehOwnerCmdSetAgreed,ShipmentForVehOwnerCmdSetAgreed);ShipmentPumpForVehOwnerCmdSetAgreed.prototype.METHOD_ID="owner_set_pump_agreed_all"; 
function MatTotalGrid(id,options){options=options||{};this.m_matModel=options.modelMaterial;var contr=new RawMaterial_Controller();var constants={"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();CommonHelper.merge(options,{"keyIds":["date_time"],"readPublicMethod":contr.getPublicMethod("total_list"),"editInline":null,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":cmd",{"cmdInsert":false,"cmdEdit":true,"cmdDelete":false,"cmdFilter":false,"filters":null,"cmdSearch":false,"variantStorage":null,"cmdAllCommands":false,"cmdPrint":false}),"popUpMenu":popup_menu,"head":null,"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"navigate":false,"navigateClick":false,"focus":true});MatTotalGrid.superclass.constructor.call(this,id,options);}
extend(MatTotalGrid,GridAjx);MatTotalGrid.prototype.onGetData=function(resp){var model_mat;if(resp){model_mat=resp.getModel("material_list");this.m_model=resp.getModel("total_list");}
else{model_mat=this.m_matModel;}
var options={"materials":[],"dates":[],"quant_shipment":0};var mat_indexes={};var i=0;while(model_mat.getNextRow()){options.materials.push({"mat_id":model_mat.getFieldValue("id"),"mat_name":model_mat.getFieldValue("name"),"mat_avg_cons":model_mat.getFieldValue("avg_cons"),"mat_class":((i==0||i%2==0)?"mat_even":"mat_odd"),"quant_procur":0,"quant_consump":0});mat_indexes["mat_"+model_mat.getFieldValue("id")]=i;i++;}
var cur_bal_date=DateHelper.format(DateHelper.time(),"d/m/Y");var cur_date,prev_mat_ind;this.m_model.reset();while(this.m_model.getNextRow()){if(!cur_date||cur_date!=this.m_model.getFieldValue("date_time_descr")){cur_date=this.m_model.getFieldValue("date_time_descr");var q=parseFloat(this.m_model.getFieldValue("quant_shipment"));if(isNaN(q))q=0.0;var date_data={"date_descr":this.m_model.getFieldValue("date_time_descr"),"quant_shipment":q.toFixed(2),"cur_date":(cur_date==cur_bal_date),"date_materials":[]}
options.quant_shipment+=q;for(var i=0;i<options.materials.length;i++){date_data.date_materials.push({"mat_id":options.materials[i].mat_id,"dt":this.m_model.getFieldValue("date_time"),"mat_class":((i==0||i%2==0)?"mat_even":"mat_odd"),"quant_consump_editted":(parseFloat(this.m_model.getFieldValue("quant_correct"))!=0),"quant_beg":0,"quant_procur":0,"quant_consump":0,"quant_end":0})}
options.dates.push(date_data);}
var mat_ind=mat_indexes["mat_"+this.m_model.getFieldValue("material_id")];date_data.date_materials[mat_ind].quant_beg=(Math.round(parseFloat(this.m_model.getFieldValue("quant_beg"))*1000)/1000).toFixed(3);date_data.date_materials[mat_ind].quant_procur=(Math.round(parseFloat(this.m_model.getFieldValue("quant_procur"))*1000)/1000).toFixed(3);date_data.date_materials[mat_ind].quant_consump=(Math.round(parseFloat(this.m_model.getFieldValue("quant_consump"))*1000)/1000).toFixed(3);date_data.date_materials[mat_ind].quant_end=(Math.round(parseFloat(this.m_model.getFieldValue("quant_end"))*1000)/1000).toFixed(3);options.materials[mat_ind].quant_procur+=parseFloat(date_data.date_materials[mat_ind].quant_procur);options.materials[mat_ind].quant_consump+=parseFloat(date_data.date_materials[mat_ind].quant_consump);}
options.quant_shipment=(Math.round(options.quant_shipment*100)/100).toFixed(2);for(var i=0;i<options.materials.length;i++){options.materials[i].quant_procur=(Math.round(options.materials[i].quant_procur*1000)/1000).toFixed(3);options.materials[i].quant_consump=(Math.round(options.materials[i].quant_consump*1000)/1000).toFixed(3);}
this.setTemplateOptions(options);this.setTemplate(window.getApp().getTemplate("MatTotalGridInner"));var self=this;$(".quant_consump_editable").dblclick(function(){if(self.m_editMode)return;self.m_editMode=true;self.onEditCons.call(self,this,this.getAttribute("mat_id"),this.getAttribute("dt"));});}
MatTotalGrid.prototype.onEditCons=function(n,matId,dt){var self=this;var val=n.textContent;this.m_editCell=n;this.m_oldEditval=val;this.m_matEdit=new EditFloat("mat_inplace_edit",{"inline":true,"cmdOpen":true,"precision":"3","unsigned":false,"title":"Для отмены: ESC","value":val,"events":{"keydown":function(event){event=EventHelper.fixMouseEvent(event);var key_code=(event.charCode)?event.charCode:event.keyCode;if(key_code==13){self.onSaveCons(matId,dt);}
else if(key_code==27){this.setValue(self.m_oldEditval);self.onEditConsComplete();}}}});n.textContent="";this.m_matEdit.toDOM(n);this.m_matEdit.m_node.focus();this.m_matEdit.m_node.setSelectionRange(0,val.length,"backward");}
MatTotalGrid.prototype.onEditConsComplete=function(){var val=this.m_matEdit.getValue();this.m_matEdit.delDOM();delete this.m_matEdit;this.m_editCell.textContent=(Math.round(val*1000)/1000).toFixed(3);this.m_editMode=false;}
MatTotalGrid.prototype.onSaveCons=function(matId,dt){var val=this.m_matEdit.getValue();if(val!=this.m_matEdit.m_oldVal){var self=this;var pm=(new RawMaterial_Controller()).getPublicMethod("correct_consumption");pm.setFieldValue("material_id",matId);pm.setFieldValue("date",DateHelper.strtotime(dt));pm.setFieldValue("quant",val);pm.run({"all":function(){DOMHelper.addClass(self.m_editCell,"quant_consump_editted");self.m_editMode=false;self.onRefresh();}});}
else{this.onEditComplete();}} 
function MatCorrectGrid(id,options){options=options||{};this.m_matModel=options.modelMaterial;var contr=new RawMaterial_Controller();var constants={"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();CommonHelper.merge(options,{"keyIds":["shift"],"readPublicMethod":contr.getPublicMethod("correct_list"),"editInline":null,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":cmd",{"cmdInsert":false,"cmdEdit":true,"cmdDelete":false,"cmdFilter":false,"filters":null,"cmdSearch":false,"variantStorage":null,"cmdAllCommands":false}),"popUpMenu":popup_menu,"head":null,"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"navigate":false,"navigateClick":false,"focus":true});MatCorrectGrid.superclass.constructor.call(this,id,options);}
extend(MatCorrectGrid,GridAjx);MatCorrectGrid.prototype.onGetData=function(resp){var model_mat;if(resp){model_mat=resp.getModel("material_list");this.m_model=resp.getModel("correct_list");}
else{model_mat=this.m_matModel;}
var options={"materials":[],"dates":[],"quant_shipment":0};var mat_indexes={};var i=0;while(model_mat.getNextRow()){options.materials.push({"mat_id":model_mat.getFieldValue("id"),"mat_name":model_mat.getFieldValue("name"),"mat_class":((i==0||i%2==0)?"mat_even":"mat_odd"),"norm":0,"corrected":0,"obnul":0,"balance":0});mat_indexes["mat_"+model_mat.getFieldValue("id")]=i;i++;}
var cur_bal_date=DateHelper.format(DateHelper.time(),"d/m/Y");var cur_date,prev_mat_ind;this.m_model.reset();while(this.m_model.getNextRow()){if(!cur_date||cur_date!=this.m_model.getFieldValue("shift_descr")){cur_date=this.m_model.getFieldValue("shift_descr");var date_data={"date_descr":this.m_model.getFieldValue("shift_descr"),"cur_date":(cur_date==cur_bal_date),"date_materials":[]}
for(var i=0;i<options.materials.length;i++){date_data.date_materials.push({"mat_id":options.materials[i].mat_id,"dt":this.m_model.getFieldValue("shift"),"mat_class":((i==0||i%2==0)?"mat_even":"mat_odd"),"corrected_editted":false,"obnul_editted":(parseFloat(this.m_model.getFieldValue("obnul"))!=0),"norm":0,"corrected":0,"obnul":0,"balance":0})}
options.dates.push(date_data);}
var mat_ind=mat_indexes["mat_"+this.m_model.getFieldValue("material_id")];date_data.date_materials[mat_ind].norm=(Math.round(parseFloat(this.m_model.getFieldValue("norm"))*1000)/1000).toFixed(3);date_data.date_materials[mat_ind].corrected=(Math.round(parseFloat(this.m_model.getFieldValue("corrected"))*1000)/1000).toFixed(3);date_data.date_materials[mat_ind].obnul=(Math.round(parseFloat(this.m_model.getFieldValue("obnul"))*1000)/1000).toFixed(3);date_data.date_materials[mat_ind].balance=(Math.round(parseFloat(this.m_model.getFieldValue("balance"))*1000)/1000).toFixed(3);options.materials[mat_ind].norm+=parseFloat(date_data.date_materials[mat_ind].norm);options.materials[mat_ind].corrected+=parseFloat(date_data.date_materials[mat_ind].corrected);options.materials[mat_ind].obnul+=parseFloat(date_data.date_materials[mat_ind].obnul);options.materials[mat_ind].balance+=parseFloat(date_data.date_materials[mat_ind].balance);}
options.quant_shipment=(Math.round(options.quant_shipment*100)/100).toFixed(2);for(var i=0;i<options.materials.length;i++){options.materials[i].norm=(Math.round(options.materials[i].norm*1000)/1000).toFixed(3);options.materials[i].corrected=(Math.round(options.materials[i].corrected*1000)/1000).toFixed(3);options.materials[i].obnul=(Math.round(options.materials[i].obnul*1000)/1000).toFixed(3);options.materials[i].balance=(Math.round(options.materials[i].balance*1000)/1000).toFixed(3);}
this.setTemplateOptions(options);this.setTemplate(window.getApp().getTemplate("MatCorrectGridInner"));var self=this;$(".quant_consump_editable").dblclick(function(){if(self.m_editMode)return;self.m_editMode=true;self.onEditCons.call(self,this,this.getAttribute("mat_id"),this.getAttribute("dt"));});}
MatCorrectGrid.prototype.onEditCons=function(n,matId,dt){var self=this;var val=n.textContent;this.m_editCell=n;this.m_oldEditval=val;this.m_matEdit=new EditFloat("mat_inplace_edit",{"inline":true,"cmdOpen":true,"precision":"3","unsigned":false,"value":val,"events":{"keydown":function(event){event=EventHelper.fixMouseEvent(event);var key_code=(event.charCode)?event.charCode:event.keyCode;if(key_code==13){self.onSaveCons(matId,dt);}
else if(key_code==27){this.setValue(self.m_oldEditval);self.onEditConsComplete();}}}});n.textContent="";this.m_matEdit.toDOM(n);this.m_matEdit.m_node.focus();this.m_matEdit.m_node.setSelectionRange(0,val.length,"backward");}
MatCorrectGrid.prototype.onEditConsComplete=function(){var val=this.m_matEdit.getValue();this.m_matEdit.delDOM();delete this.m_matEdit;this.m_editCell.textContent=(Math.round(val*1000)/1000).toFixed(3);this.m_editMode=false;}
MatCorrectGrid.prototype.onSaveCons=function(matId,dt){var val=this.m_matEdit.getValue();if(val!=this.m_matEdit.m_oldVal){var meth=(DOMHelper.hasClass(this.m_editCell,"obnul"))?"correct_obnul":"correct_consumption";var self=this;var pm=(new RawMaterial_Controller()).getPublicMethod(meth);pm.setFieldValue("material_id",matId);pm.setFieldValue("date",DateHelper.strtotime(dt));pm.setFieldValue("quant",val);pm.run({"all":function(){DOMHelper.addClass(self.m_editCell,"quant_consump_editted");self.m_editMode=false;self.onRefresh();}});}
else{this.onEditComplete();}} 
function TelListGrid(id,options){var model=new TelList_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:tel",{"columns":[new GridColumnPhone({"field":model.getField("tel")})]})];options={"showHead":false,"model":model,"keyIds":["id"],"controller":new TelList_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false,"cmdInsert":true,"cmdEdit":true,"cmdDelete":true,"cmdAllCommands":false}),"readOnly":true,"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};TelListGrid.superclass.constructor.call(this,id,options);}
extend(TelListGrid,GridAjx); 
function VehicleScheduleMakeOrderGrid(id,options){options=options||{};var self=this;var model=options.model;CommonHelper.merge(options,{"model":model,"className":"table-bordered table-responsive table-make_order veh_schedule_grid","attrs":{"style":"width:100%;"},"readPublicMethod":(new VehicleSchedule_Controller()).getPublicMethod("get_current_veh_list"),"editInline":false,"editWinClass":null,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":false,"cmdSearch":false,"cmdInsert":false,"cmdAllCommands":false,"cmdExport":false,"cmdPrint":false,"cmdEdit":false,"cmdRefresh":false,"cmdDelete":false,"cmdCopy":false,"filters":null,"variantStorage":null,"addCustomCommandsAfter":function(commands){commands.push(new VehicleScheduleGridCmdSetFree(id+":grid:cmd:setFree",{"showCmdControl":false}));commands.push(new VehicleScheduleGridCmdSetOut(id+":grid:cmd:setOut",{"showCmdControl":false}));commands.push(new VehicleScheduleGridCmdShowPosition(id+":grid:cmd:showPos",{"showCmdControl":false}));commands.push(new VehicleScheduleGridCmdShowVehicle(id+":grid:cmd:showVeh",{"showCmdControl":false}));}}),"popUpMenu":new PopUpMenu(),"onEventSetCellOptions":function(opts){if(opts.gridColumn.getId()=="vehicles_ref"){opts.className=opts.className||"";var m=this.getModel();if(m.getFieldValue("no_tracker")){opts.title="Нет оборудования мониторинга";opts.className+=(opts.className.length?" ":"")+"no_tracker";}
else if(m.getFieldValue("tracker_no_data")){opts.title="Нет сигнала";opts.className+=(opts.className.length?" ":"")+"tracker_no_data";}}},"onEventSetRowOptions":function(opts){opts.className=opts.className||"";var m=this.getModel();var veh_state=m.getFieldValue("state");opts.className+=(opts.className.length?" ":"")+"veh_in_make_list";if(m.getFieldValue("is_late")){opts.className+=(opts.className.length?" ":"")+"veh_late";}
else{opts.className+=(opts.className.length?" ":"")+"veh_"+veh_state;}
if(m.getFieldValue("is_late_at_dest")){opts.className+=(opts.className.length?" ":"")+"veh_late_at_dest";}
if(veh_state=="shift"){opts.className+=(opts.className.length?" ":"")+"veh_shift";}},"head":new GridHead(id+":veh_schedule_grid:head",{"elements":[new GridRow(id+"veh_schedule_grid:head:row0",{"elements":[new GridCellHead(id+":veh_schedule_grid:head:vehicles_ref",{"value":"Номер","columns":[new GridColumnRef({"field":model.getField("vehicles_ref"),"master":true,"detailViewClass":VehicleRun_View,"detailViewOptions":{"detailFilters":{"VehicleRun_Model":[{"masterFieldId":"id","field":"schedule_id","sign":"e","val":"0"}]}},"formatFunction":(function(gridCont){return function(f,cell){let ref=f.vehicles_ref.getValue();if(!ref||ref.isNull()){return"";}
let cell_n=cell.getNode();(new ToolTip({"node":cell_n,"wait":3000,"onHover":(function(cont,vehID){return function(ev){cont.showVehicleInfo(this,vehID);}})(gridCont,ref.getKey())}));return ref.getDescr();}})(self)})]}),new GridCellHead(id+":veh_schedule_grid:head:drivers_ref",{"value":"Водитель","columns":[new GridColumn({"field":model.getField("drivers_ref"),"formatFunction":function(fields,cell){var dr_name=window.getApp().formatCell(fields.drivers_ref,cell,VehicleScheduleMakeOrderList_View.prototype.COL_DRIVER_LEN);var tel=fields.driver_tel.getValue();var ext=window.getApp().getServVar("tel_ext");if(!tel||!tel.length||!ext||!ext.length){return dr_name;}
else{var cell_n=cell.getNode();var c_tag=document.createElement("I");c_tag.className="fa fa-phone";c_tag.title="Набрать номер водителя";c_tag.setAttribute("tel",tel);EventHelper.add(c_tag,"click",(function(t){return function(){window.getApp().makeCall(t);}})(tel));cell_n.appendChild(c_tag);var c_tag=document.createElement("I");c_tag.className="fa fa-send";c_tag.title="Отправить сообщение водителю";EventHelper.add(c_tag,"click",(function(id,descr){return function(){window.getApp().sendNotification(new RefType({"dataType":"drivers","keys":{"id":id},"descr":descr}));}})(fields.drivers_ref.getValue().getKey("id"),fields.drivers_ref.getValue().getDescr()));cell_n.appendChild(c_tag);var c_tag=document.createElement("SPAN");c_tag.textContent=" "+dr_name;cell_n.appendChild(c_tag);return"";}}})]}),new GridCellHead(id+":veh_schedule_grid:head:owner",{"value":"Владелец","columns":[new GridColumn({"field":model.getField("owner"),"formatFunction":function(fields,cell){return window.getApp().formatCell(fields.owner,cell,VehicleScheduleMakeOrderList_View.prototype.COL_OWNER_LEN);}})]}),new GridCellHead(id+":veh_schedule_grid:head:load_capacity",{"value":"Гр","title":"Грузоподъемность","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("load_capacity")})]}),new GridCellHead(id+":veh_schedule_grid:head:state",{"value":"Сост.","columns":[new GridColumn({"field":model.getField("state"),"formatFunction":function(fields,cell){if(!fields.state){return"";}
var st=fields.state.getValue();if(st=="shift"){cell.getNode().title="Должен работать согласно графика";let b_descr=self.getProdBaseDescr(fields,4);return"см."+b_descr;}else if(st=="free"){var b_descr=self.getProdBaseDescr(fields,6);cell.getNode().title="Свободен на базе: "+b_descr;self.setBaseChangeEvent(cell.getNode(),fields.state.getValue(),(b_descr&&b_descr.length)?b_descr:"база",fields.id.getValue(),fields.vehicles_ref.getValue().getDescr());}else if(st=="assigned"){var b_descr=self.getProdBaseDescr(fields,3);cell.getNode().title="Назначен на базе: "+b_descr;self.setBaseChangeEvent(cell.getNode(),fields.state.getValue(),"назн."+b_descr,fields.id.getValue(),fields.vehicles_ref.getValue().getDescr());}else if(st=="busy"){var b_descr=self.getProdBaseDescr(fields,10);cell.getNode().title="Отгружен с базы: "+b_descr;return"отгр."+b_descr.substring(0,3);}else if(st=="left_for_dest"){cell.getNode().title="Едет на объект";return"-> объект"}else if(st=="at_dest"){cell.getNode().title="Находится на объекте: "+fields.destination_name.getValue();return"объект";}else if(st=="left_for_base"){var b_descr=self.getProdBaseDescr(fields,10);cell.getNode().title="Едет на базу: "+b_descr;return"-> "+b_descr.substring(0,3);}else if(st=="out_from_shift"){cell.getNode().title="Закончил смену";return"сошёл(см)";}else if(st=="out"){cell.getNode().title="Закончил работу с добавочной смены";return"сошёл";}else if(st=="shift_added"){cell.getNode().title="Добавочная смена";return"доб.см.";}else{return"";}}})]}),new GridCellHead(id+":veh_schedule_grid:head:inf_on_return",{"value":"Вр.","title":"Время","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("inf_on_return")})]}),new GridCellHead(id+":veh_schedule_grid:head:runs",{"value":"Р-сы","title":"Количество рейсов","colAttrs":{"align":"center"},"columns":[new GridColumn({"field":model.getField("runs")})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":null,"rowSelect":true,"selectedRowClass":"order_current_row","navigate":true,"navigateMouse":true,"focus":false});VehicleScheduleMakeOrderGrid.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleMakeOrderGrid,GridAjx);VehicleScheduleMakeOrderGrid.prototype.nodeClickable=function(node){return(this.getEnabled()&&(node.nodeName==this.DEF_CELL_TAG_NAME||node.nodeName=="SPAN")&&DOMHelper.getParentByTagName(node,this.DEF_BODY_TAG_NAME));}
VehicleScheduleMakeOrderGrid.prototype.getProdBaseDescr=function(fields,smCount){var res="";var ref=fields.production_bases_ref.getValue();if(ref&&!ref.isNull()){res+=" ";res+=ref.getDescr().substring(0,smCount);}
return res;}
VehicleScheduleMakeOrderGrid.prototype.setBaseChangeCont=function(vsId,productionBaseId,curSt,vhDescr){var pm=this.getReadPublicMethod().getController().getPublicMethod("set_production_base");pm.setFieldValue("id",vsId);pm.setFieldValue("production_base_id",productionBaseId);pm.setFieldValue("last_state",curSt);var self=this;pm.run({"ok":function(resp){self.onRefresh(function(){window.showTempNote("Для ТС "+vhDescr+" устновлена новая база",null,3000);});}});}
VehicleScheduleMakeOrderGrid.prototype.setBaseChange=function(vsId,curSt,vhDescr){var self=this;(new WindowFormModalBS("VSChange",{"content":new EditJSON("VSChange:cont",{"elements":[new ProductionBaseEdit("VSChange:cont:production_bases_ref",{"required":true})]}),"cmdCancel":true,"cmdOk":true,"contentHead":"Замена базы для ТС "+vhDescr,"onClickCancel":function(){this.close();},"onClickOk":function(){var view=this.getContent();if(!view.validate()){return;}
var res=view.getValueJSON();self.setBaseChangeCont(vsId,res.production_bases_ref.getKey("id"),curSt,vhDescr);this.close();}})).open();}
VehicleScheduleMakeOrderGrid.prototype.setBaseChangeEvent=function(cellNode,curSt,stDescr,vsId,vhDescr){var st_t=document.createElement("a");st_t.textContent=stDescr;st_t.setAttribute("vs_id",vsId);st_t.setAttribute("vh_descr",vhDescr);st_t.setAttribute("cur_st",curSt);var self=this;EventHelper.add(st_t,"click",function(e){self.setBaseChange(e.target.getAttribute("vs_id"),e.target.getAttribute("cur_st"),e.target.getAttribute("vh_descr"));});cellNode.appendChild(st_t);}
VehicleScheduleMakeOrderGrid.prototype.showVehicleInfoCont=function(ctrl,info){ctrl.popup('<h4>'+info.plate.getValue()+'</h4>'+'<table>'+'<tr>'+'<td>Марка:</td>'+'<td>'+info.make.getValue()+'</td>'+'</tr>'+'<tr>'+'<td>Грузоподъемность:</td>'+'<td>'+info.load_capacity.getValue()+'</td>'+'</tr>'+'<tr>'+'<td>Трэкер:</td>'+'<td>'+info.tracker_id.getValue()+'</td>'+'</tr>'+'<tr>'+'<td>Послeдние данные:</td>'+'<td>'+DateHelper.format(info.tracker_last_dt.getValue(),"d.m.y H:i")+'</td>'+'</tr>'+'<tr>'+'<td>Кол-во спутников:</td>'+'<td>'+info.tracker_sat_num.getValue()+'</td>'+'</tr>'+'</table>',{"title":"Данные по ТС"});}
VehicleScheduleMakeOrderGrid.prototype.showVehicleInfo=function(ctrl,vehID){var pm=(new Vehicle_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",vehID);pm.run({"ok":(function(cont){return function(resp){let m=resp.getModel("VehicleDialog_Model");if(m.getNextRow()){cont.showVehicleInfoCont(ctrl,m.getFields());}}})(this)});} 
function MaterialMakeOrderGrid(id,options){options=options||{};var model=options.model;this.m_refresh=options.refresh;var self=this;CommonHelper.merge(options,{"attrs":{"style":"width:100%;"},"keyIds":["material_descr"],"readPublicMethod":null,"editInline":false,"editWinClass":null,"commands":null,"popUpMenu":null,"onEventSetCellOptions":function(opts){if(opts.gridColumn.getId()=="quant_morn_fact_cur_balance"){var rows=this.getModel().getFieldValue("balance_corrected_data");if(rows&&rows.length){opts.className=opts.className||"";opts.className+=((opts.className=="")?"":" ")+"factQuantCorrected";}}},"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":[new GridCellHead(id+":head:material_descr",{"value":"Материал","columns":[new GridColumn({"field":model.getField("material_descr")})]}),new GridCellHead(id+":head:quant_morn_fact_cur_balance",{"value":"Ост.утро","colAttrs":{"align":"right","class":"quant_editable","title":"Двойной клик для корректировки остатка"},"columns":[new GridColumnFloat({"field":model.getField("quant_morn_fact_cur_balance"),"precision":3,"cellOptions":{"events":{"dblclick":function(ev){self.setModelToCurrentRow(DOMHelper.getParentByTagName(ev.target,"TR"));window.getApp().materialQuantCorrection(self.getModel().getFields());}}},"formatFunction":function(fields,gridCell){var col=gridCell.getGridColumn();col.tooltip=new ToolTip({"node":gridCell.getNode(),"wait":500,"onHover":function(ev){var tr=DOMHelper.getParentByTagName(ev.target,"TR");if(tr){self.setModelToCurrentRow(tr);var f=self.getModel().getFields();var t_params={"rows":f.balance_corrected_data.getValue()};if(t_params.rows&&t_params.rows.length){for(var i=0;i<t_params.rows.length;i++){t_params.rows[i].user_descr=t_params.rows[i].users_ref.m_descr;t_params.rows[i].date_time_descr=DateHelper.format(DateHelper.strtotime(t_params.rows[i].date_time),"d/m/y H:i");}
console.log(t_params.rows)
var t=window.getApp().getTemplate("MaterialFactBalanceCorretionInf");t_params.bsCol=window.getBsCol();t_params.widthType=window.getWidthType();Mustache.parse(t);col.tooltip.popup(Mustache.render(t,t_params),{"width":200,"title":"Коорректировки остатка по материалу","className":"","event":ev});}}}});return CommonHelper.numberFormat(fields.quant_morn_fact_cur_balance.getValue(),3,"."," ");}})],}),new GridCellHead(id+":head:quant_procured",{"value":"Приход","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant_procured"),"precision":3})]}),new GridCellHead(id+":head:quant_fact_balance",{"value":"Ост.тек.","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant_fact_balance"),"precision":3})]}),new GridCellHead(id+":head:quant_morn_next_balance",{"value":"Ост.веч.","colAttrs":{"align":"right"},"columns":[new GridColumnFloat({"field":model.getField("quant_morn_next_balance"),"precision":3})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":null,"rowSelect":false,"focus":false,"navigate":false,"navigateClick":false});MaterialMakeOrderGrid.superclass.constructor.call(this,id,options);}
extend(MaterialMakeOrderGrid,Grid); 
function OwnerListGrid(id,options){var model=new OwnerList_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:dt_from",{"value":"Дата с","columns":[new GridColumnDateTime({"field":model.getField("dt_from")})]}),new GridCellHead(id+":head:dt_from",{"value":"Владелец","columns":[new GridColumnDateTime({"field":model.getField("dt_from")}),new GridColumnRef({"field":model.getField("owner"),"ctrlClass":VehicleOwnerEdit,"ctrlOptions":{"labelCaption":""}})]})];options={"model":model,"keyIds":["id"],"controller":new OwnerList_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false,"cmdInsert":true,"cmdEdit":true,"cmdDelete":true,"cmdAllCommands":false}),"readOnly":true,"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};OwnerListGrid.superclass.constructor.call(this,id,options);}
extend(OwnerListGrid,GridAjx); 
function InsuranceListGrid(id,options){var model=new InsuranceList_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:issuer",{"value":"Страховщик","columns":[new GridColumn({"field":model.getField("issuer"),"ctrlClass":InsuranceIssuerEdit,"ctrlOptions":{"labelCaption":""}})]}),new GridCellHead(id+":head:total",{"value":"Сумма","columns":[new GridColumnFloat({"field":model.getField("total"),"precision":"2","length":"15"})]}),new GridCellHead(id+":head:dt_from",{"value":"Дата с","columns":[new GridColumnDate({"field":model.getField("dt_from")})]}),new GridCellHead(id+":head:dt_to",{"value":"Дата по","columns":[new GridColumnDate({"field":model.getField("dt_to")})]})];options={"model":model,"keyIds":["id"],"controller":new InsuranceList_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false,"cmdInsert":true,"cmdEdit":true,"cmdDelete":true,"cmdAllCommands":false}),"readOnly":true,"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};InsuranceListGrid.superclass.constructor.call(this,id,options);}
extend(InsuranceListGrid,GridAjx); 
function ClientLocalListGrid(id,options){var model=new ClientLocalList_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:client",{"columns":[new GridColumnRef({"field":model.getField("client"),"ctrlClass":ClientEdit,"ctrlOptions":{"labelCaption":""}})]})];options={"showHead":false,"model":model,"keyIds":["id"],"controller":new ClientLocalList_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false,"cmdInsert":true,"cmdEdit":true,"cmdDelete":true,"cmdAllCommands":false}),"readOnly":true,"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};ClientLocalListGrid.superclass.constructor.call(this,id,options);}
extend(ClientLocalListGrid,GridAjx); 
function PumpVehiclePriceListGrid(id,options){var model=new PumpVehiclePriceList_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:dt_from",{"columns":[new GridColumnDateTime({"field":model.getField("dt_from")}),new GridColumnRef({"field":model.getField("pump_price"),"ctrlClass":PumpPriceEdit,"ctrlOptions":{"labelCaption":""}})]})];options={"showHead":false,"model":model,"keyIds":["id"],"controller":new PumpVehiclePriceList_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false,"cmdInsert":true,"cmdEdit":true,"cmdDelete":true,"cmdAllCommands":false}),"readOnly":true,"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};PumpVehiclePriceListGrid.superclass.constructor.call(this,id,options);}
extend(PumpVehiclePriceListGrid,GridAjx); 
function CementSiloEdit(id,options){options=options||{};options.model=new CementSiloList_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Силос:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new CementSilo_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");CementSiloEdit.superclass.constructor.call(this,id,options);}
extend(CementSiloEdit,EditSelectRef); 
function ProductionSiteCmdLoadProduction(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;var self=this;this.m_btn=new ButtonCmd(id+"btn",{"caption":"Загрузить данные прозводства по номеру ","glyph":"glyphicon-refresh","title":"Загрузить данные производства из Elkon","onClick":function(){self.doanloadProduction();}});options.controls=[this.m_btn]
ProductionSiteCmdLoadProduction.superclass.constructor.call(this,id,options);}
extend(ProductionSiteCmdLoadProduction,GridCmd);ProductionSiteCmdLoadProduction.prototype.setGrid=function(v){ProductionSiteCmdLoadProduction.superclass.setGrid.call(this,v);this.m_btn.m_grid=v;this.m_grid=v;}
ProductionSiteCmdLoadProduction.prototype.doanloadProduction=function(){this.m_grid.setModelToCurrentRow();var f=this.m_grid.getModel().getFields();var id=f.id.getValue();var self=this;this.m_view=new View("dialog:cont",{"elements":[new EditNum("dialog:cont:production_id",{"labelCaption":"№ производства Elkon:","focus":true})]});this.m_form=new WindowFormModalBS("dialog",{"content":this.m_view,"dialogWidth":"20%","cmdCancel":true,"cmdOk":true,"contentHead":"Введите номер производства для загрузки","onClickCancel":function(){self.closeSelect();},"onClickOk":(function(productionSiteId){return function(){var pr=self.m_view.getElement("production_id").getValue();if(!pr){throw Error("Не задан номер производства!");}
self.closeSelect(productionSiteId,pr);}})(id)});this.m_form.open();}
ProductionSiteCmdLoadProduction.prototype.closeSelect=function(productionSiteId,productionId){if(this.m_view){this.m_view.delDOM()
delete this.m_view;}
if(this.m_form){this.m_form.delDOM();delete this.m_form;}
if(productionSiteId&&productionId){var pm=(new Production_Controller()).getPublicMethod("check_production");var self=this;pm.setFieldValue("production_site_id",productionSiteId);pm.setFieldValue("production_id",productionId);window.setGlobalWait(true);pm.run({"ok":function(){window.showTempNote("Данные производства загружены",null,5000);},"all":function(){window.setGlobalWait(false);}});}} 
function ProductionMaterialListGridInsertCmd(id,options){options=options||{};options.showCmdControl=true;options.glyph="glyphicon-plus";options.title="Добавить новый материал в производство";options.caption=" Добавить ";this.m_productionId=options.production_id;this.m_productionSiteId=options.production_site_id;ProductionMaterialListGridInsertCmd.superclass.constructor.call(this,id,options);}
extend(ProductionMaterialListGridInsertCmd,GridCmd);ProductionMaterialListGridInsertCmd.prototype.onCommand=function(){var self=this;this.m_view=new EditJSON("ProdMatAdd:cont",{"elements":[new MaterialSelect("ProdMatAdd:cont:materials_ref",{"labelCaption":"Материал:","forConcrete":true,"required":true,"events":{"change":function(e){self.checkMaterial()}}}),new CementSiloEdit("ProdMatAdd:cont:cement_silos_ref",{"labelCaption":"Силос:","required":false,"visible":false,"events":{"change":function(e){self.checkMaterial()}}}),new EditFloat("ProdMatAdd:cont:quant_fact",{"labelCaption":"Количество (факт):","precision":"4","required":true})]});this.m_form=new WindowFormModalBS("ProdMatAdd",{"content":this.m_view,"cmdCancel":true,"cmdOk":true,"contentHead":"Добавление материала в производство","onClickCancel":function(){self.closeForm();},"onClickOk":function(){if(self.m_view.validate()&&self.checkMaterial()){var res=self.m_view.getValueJSON();self.addMatOnServer(res);}}});this.m_form.open();}
ProductionMaterialListGridInsertCmd.prototype.closeForm=function(){this.m_view.delDOM()
this.m_form.delDOM();delete this.m_view;delete this.m_form;}
ProductionMaterialListGridInsertCmd.prototype.addMatOnServer=function(controls){var pm=(new MaterialFactConsumptionCorretion_Controller()).getPublicMethod("operator_add_material_to_production");pm.setFieldValue("production_id",this.m_productionId);pm.setFieldValue("production_site_id",this.m_productionSiteId);pm.setFieldValue("cement_silo_id",controls.cement_silos_ref?controls.cement_silos_ref.getKey():null);pm.setFieldValue("material_id",controls.materials_ref.getKey());pm.setFieldValue("cor_quant",controls.quant_fact);var self=this;pm.run({"ok":function(resp){self.closeForm();self.m_grid.onRefresh(function(){window.showTempNote("Добавлен материал в производство.",null,5000);});}})}
ProductionMaterialListGridInsertCmd.prototype.checkMaterial=function(){var ctrl=this.m_view.getElement("materials_ref");var ctrl_silo=this.m_view.getElement("cement_silos_ref");var fields=ctrl.getModelRow();var new_material_id=fields.id.getValue();var new_material_cement=fields.is_cement.getValue();var new_cement_silos_id;if(new_material_cement){var new_cem=ctrl_silo.getValue();new_cement_silos_id=(new_cem&&!new_cem.isNull())?new_cem.getKey():null;}
err=false;var model=this.m_grid.getModel();model.reset();while(model.getNextRow()){var m_ref=model.getFieldValue("materials_ref");var m_id=(m_ref&&!m_ref.isNull())?m_ref.getKey():null
if(m_id&&new_material_id==m_id&&!new_material_cement){ctrl.setNotValid("Материал уже есть в списке!");err=true;break;}
else if(m_id&&new_material_id==m_id){var ref=model.getFieldValue("cement_silos_ref");var m_silo_id=(ref&&!ref.isNull())?ref.getKey():null;if(m_silo_id&&new_cement_silos_id==m_silo_id){ctrl_silo.setNotValid("Материал с данным силосом уже есть в списке!");err=true;break;}}}
if(!err){ctrl.setValid();ctrl_silo.setValid();}
ctrl_silo.setVisible(new_material_cement==true);ctrl_silo.setRequired(new_material_cement==true);return!err;} 
function ProductionMaterialListGridDelCmd(id,options){options=options||{};options.showCmdControl=true;options.glyph="glyphicon-remove";options.title="Удалить материал из производства";options.caption=" Удалить ";this.m_productionId=options.production_id;this.m_productionSiteId=options.production_site_id;ProductionMaterialListGridDelCmd.superclass.constructor.call(this,id,options);}
extend(ProductionMaterialListGridDelCmd,GridCmd);ProductionMaterialListGridDelCmd.prototype.onCommand=function(){this.m_grid.setModelToCurrentRow();var model=this.m_grid.getModel();var m_descr=model.getFieldValue("materials_ref").getDescr();var sil_ref=model.getFieldValue("cement_silos_ref");if(sil_ref&&!sil_ref.isNull()){m_descr+=" (силос:"+sil_ref.getDescr()+")";}
var self=this;WindowQuestion.show({"text":"Удалить материал "+m_descr+" из производства?","no":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){self.onCommandCont(model.getFieldValue("material_id"),model.getFieldValue("cement_silo_id"),m_descr);}}});}
ProductionMaterialListGridDelCmd.prototype.onCommandCont=function(materialId,cementSiloId,materialDescr){var pm=(new MaterialFactConsumption_Controller()).getPublicMethod("delete_material");pm.setFieldValue("production_site_id",this.m_productionSiteId);pm.setFieldValue("production_id",this.m_productionId);pm.setFieldValue("raw_material_id",materialId);pm.setFieldValue("cement_silo_id",cementSiloId);var self=this;pm.run({"ok":function(resp){self.m_grid.onRefresh(function(){window.showTempNote("Удален материал "+materialDescr+" из производства.",null,5000);});}})} 
function RawMaterialConsRateDateEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Подбор:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["rate_date_id"];options.selectWinClass=RawMaterialConsRateDateList_Form;options.selectDescrIds=options.selectDescrIds||["code","period"];options.editWinClass=null;options.acMinLengthForQuery=1;options.acController=new RawMaterialConsRateDate_Controller();options.acModel=new RawMaterialConsRateDateList_Model();options.acPatternFieldId=options.acPatternFieldId||"code";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("code"),options.acModel.getField("period")];options.acICase=options.acICase||"0";options.acMid=options.acMid||"0";RawMaterialConsRateDateEdit.superclass.constructor.call(this,id,options);}
extend(RawMaterialConsRateDateEdit,EditRef); 
function ExcelTemplateFieldMatchGrid(id,options){var model=new ExcelTemplateFieldMatch_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:field",{"value":"Поле запроса","columns":[new GridColumn({"field":model.getField("field"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":100}})]}),new GridCellHead(id+":head:cell",{"value":"Ячейка Excel","columns":[new GridColumn({"field":model.getField("cell"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":20}})]})];options={"model":model,"keyIds":["id"],"controller":new ExcelTemplateFieldMatch_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false}),"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};ExcelTemplateFieldMatchGrid.superclass.constructor.call(this,id,options);}
extend(ExcelTemplateFieldMatchGrid,GridAjx); 
function ExcelTemplateImageSQLGrid(id,options){var model=new ExcelTemplateImageSQL_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:name",{"value":"Ячейка картинки","columns":[new GridColumn({"field":model.getField("name"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":100}})]}),new GridCellHead(id+":head:h",{"value":"Длина","columns":[new GridColumn({"field":model.getField("h"),"ctrlClass":EditInt})]}),new GridCellHead(id+":head:w",{"value":"Ширина","columns":[new GridColumn({"field":model.getField("w"),"ctrlClass":EditInt})]}),new GridCellHead(id+":head:offset_y",{"value":"Отступ сверху","columns":[new GridColumn({"field":model.getField("offset_y"),"ctrlClass":EditInt})]}),new GridCellHead(id+":head:offset_x",{"value":"Отступ слева","columns":[new GridColumn({"field":model.getField("offset_x"),"ctrlClass":EditInt})]}),new GridCellHead(id+":head:sql_query",{"value":"Запрос SQL","columns":[new GridColumn({"field":model.getField("sql_query"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":5000}})]}),new GridCellHead(id+":head:comment_text",{"value":"Описание","columns":[new GridColumn({"field":model.getField("comment_text"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":5000}})]})];options={"model":model,"keyIds":["id"],"controller":new ExcelTemplateImageSQL_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false}),"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};ExcelTemplateImageSQLGrid.superclass.constructor.call(this,id,options);}
extend(ExcelTemplateImageSQLGrid,GridAjx); 
function EditBankAcc(id,options){options=options||{};options.type="text";options.maxLength=20;options.fixLength=true;options.cmdSelect=false;EditBankAcc.superclass.constructor.call(this,id,options);}
extend(EditBankAcc,EditNum); 
function BankEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Банк:";}
options.maxLength=9;this.m_descrFunction=function(fields){return fields["bik"].getValue()+", "+
fields["name"].getValue()+
(fields["korshet"].isSet()?(", к/с "+fields["korshet"].getValue()):"")};options.placeholder="Введите БИК для поиска";options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["bank_bik"];options.selectWinClass=BankList_Form;options.selectFormatFunction=this.m_descrFunction;options.selectKeyIds=options.selectKeyIds||["bik"];options.editWinClass=Bank_Form;options.acMinLengthForQuery=1;options.acController=new Bank_Controller();options.acModel=new BankList_Model();options.acPatternFieldId=options.acPatternFieldId||"bik";options.acKeyFields=options.acKeyFields||[options.acModel.getField("bik")];options.acDescrFunction=this.m_descrFunction;options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";this.m_view=options.view;var self=this;options.onSelect=options.onSelect||function(fields){if(self.m_view){self.m_view.m_bankDescr=self.m_descrFunction(fields);}}
BankEditRef.superclass.constructor.call(this,id,options);}
extend(BankEditRef,EditRef); 
function Chat_View(id,options){options=options||{};options.template=options.template||window.getApp().getTemplate("Chat_View");this.m_opened=false;Chat_View.superclass.constructor.call(this,id,options);window.getApp().addVideoPlayerSupport();}
extend(Chat_View,View);Chat_View.prototype.m_opened;Chat_View.prototype.m_msgInEventId;Chat_View.prototype.m_msgOutEventId;Chat_View.prototype.m_msgInEventId;Chat_View.prototype.m_msgOutEventId;Chat_View.prototype.onAddNewMessage=function(msgType,json){let pm,model_id;if(msgType=='in'){pm=(new this.m_newMsgInControllerClass()).getPublicMethod("get_object");model_id=this.m_newMsgInModelId;}else{pm=(new this.m_newMsgOutControllerClass()).getPublicMethod("get_object");model_id=this.m_newMsgOutModelId;}
pm.setFieldValue("id",json.params.msg_id);var self=this;pm.run({"ok":function(resp){var m=resp.getModel(model_id);if(!m){throw new Error("Model: "+model_id+" not found!");}
if(m.getNextRow()){self.onAddNewMessageCont(msgType,json,m.getFieldValue("message"));}}});}
Chat_View.prototype.msgBeep=function(){(new Audio("img/new_msg.mp3")).play();}
Chat_View.prototype.addMsgToActiveContact=function(msgType,text,contactId,senderDescr,mediaType,message){var hist_cont=this.getElement("activeChat");if(hist_cont){hist_cont.getElement("notif").addMessage(senderDescr,text,msgType,DateHelper.time(),mediaType,message);}}
Chat_View.prototype.setTotUnviewdMsg=function(cnt){let n=document.getElementById(this.m_statusNodeId);if(!n){return;}
if(isNaN(cnt)||cnt<0){cnt=0;}
let n_cnt=DOMHelper.getElementsByAttr("msg_unviewed",n,"class",true);if(cnt&&(!n_cnt||!n_cnt.length)){let n_cnt=document.createElement("SPAN");n_cnt.className="badge bg-warning-400 msg_unviewed";n_cnt.title="Непрсмотренные сообщения";n_cnt.textContent=cnt;n.appendChild(n_cnt);}else if(cnt){n_cnt[0].textContent=cnt;}else if(!cnt){DOMHelper.delNode(n_cnt[0]);}}
Chat_View.prototype.getTotUnviewdMsg=function(){let n=document.getElementById(this.m_statusNodeId);if(!n){return 0;}
let n_cnt=DOMHelper.getElementsByAttr("msg_unviewed",n,"class",true);if(!n_cnt||!n_cnt.length){return 0;}
let r=(n_cnt[0].textContent&&n_cnt[0].textContent.length)?parseInt(n_cnt[0].textContent,10):0;return r;}
Chat_View.prototype.hide=function(){Chat_View.superclass.hide.call(this);this.m_opened=false;}
Chat_View.prototype.show=function(){if(!this.m_lastTop||this.m_lastTop.length==0){this.m_lastTop="0px";}
if(!this.m_lastLeft||this.m_lastLeft.length==0){this.m_lastLeft=this.getLeftPos();}
var n=this.getNode();n.style=n.style||{};n.style.left=this.m_lastLeft;n.style.top=this.m_lastTop;DOMHelper.delClass(n,"chatInactive");DOMHelper.show(document.getElementById(this.getId()+":body"));this.m_opened=true;}
Chat_View.prototype.onToggleClick=function(e){e.preventDefault();e.stopPropagation();if(this.m_opened){this.hide();}else{this.show();}}
Chat_View.prototype.toDOM=function(p){Chat_View.superclass.toDOM.call(this,p);this.hide();var n=this.getNode();this.m_drag=new DragObject(n,{"offsetY":50,"offsetX":0});this.m_drag.onDragSuccess=function(dropTarget){}
this.m_drop=new DropTarget(document.body);this.m_drop.accept=function(dragObject){return true;}}
Chat_View.prototype.getLeftPos=function(){} 
function TmChat_View(id,options){options=options||{};options.templateOptions=options.templateOptions||{};options.templateOptions.HEADER="Чат Telegram";this.m_newMsgInControllerClass=TmInMessage_Controller;this.m_newMsgOutControllerClass=TmOutMessage_Controller;this.m_newMsgInModelId="TmInMessageList_Model";this.m_newMsgOutModelId="TmOutMessageList_Model";this.m_statusNodeId="tm_status";var self=this;options.addElement=function(){this.addElement(new ContactEdit(id+":recipient",{"labelCaption":"Найти контакт:","tm_activated":true,"contClassName":"recipEditCont","onSelect":function(f){var ctrl=self.getElement("recipient");if(ctrl){var v=ctrl.getValue();if(v&&!v.isNull()){v.m_dataType="contacts";self.addContact(v,true,f.tm_photo.getValue(),f.ext_id.getValue());self.getElement("recipient").reset();}}}}));this.addElement(new ControlContainer(id+":contacts","DIV",{}));this.addElement(new ControlContainer(id+":activeChat","DIV",{}));this.addElement(new Control(id+":toggle","TEMPLATE",{"events":{"click":function(e){self.onToggleClick(e);}}}));this.addElement(new Control(id+":unviewedMsg","TEMPLATE",{}));}
TmChat_View.superclass.constructor.call(this,id,options);}
extend(TmChat_View,Chat_View);TmChat_View.prototype.EVENT_ID_IN_MSG="TmInMessage.insert";TmChat_View.prototype.EVENT_ID_OUT_MSG="TmOutMessage.sent";TmChat_View.prototype.m_currentContId;TmChat_View.prototype.contactExists=function(keyId){var contacts=this.getElement("contacts").getElements();for(var id in contacts){if(id=="k_"+keyId&&contacts[id]){return true;}}
return false;}
TmChat_View.prototype.onNewMessage=function(json){if(json.eventId&&json.eventId==this.EVENT_ID_IN_MSG&&json.params&&json.params.ext_obj&&json.params.ext_obj.m_keys&&json.params.ext_obj.m_keys.id){var contact_exists=this.contactExists(json.params.ext_obj.m_keys.id);var contact_active=(contact_exists&&this.m_currentContId&&"k_"+json.params.ext_obj.m_keys.id==this.m_currentContId);if(contact_exists&&!contact_active){this.addUnviewdMsgToContact(json.params.ext_obj.m_keys.id);this.msgBeep();}else if(contact_exists&&contact_active){this.onAddNewMessage("in",json);this.msgBeep();}else if(!contact_exists){this.addContact(json.params.ext_obj,true);if(!this.m_opened){this.addUnviewdMsgToContact(json.params.ext_obj.m_keys.id);}
this.msgBeep();}}else if(json.eventId&&json.eventId==this.EVENT_ID_OUT_MSG&&json.params&&json.params.res!=undefined&&json.params.res===false&&json.params.errText&&json.params.errText.length){var contact_exists=this.contactExists(json.params.ext_obj.m_keys.id);var contact_active=(contact_exists&&this.m_currentContId&&"k_"+json.params.ext_obj.m_keys.id==this.m_currentContId);if(contact_exists&&contact_active){this.msgBeep();window.showError(json.params.errText,null,5000);}}else if(json.eventId&&json.eventId==this.EVENT_ID_OUT_MSG&&json.params&&json.params.res!=undefined&&json.params.res===true&&json.params.ext_obj&&json.params.ext_obj.m_keys&&json.params.ext_obj.m_keys.id){var contact_exists=this.contactExists(json.params.ext_obj.m_keys.id);var contact_active=(contact_exists&&this.m_currentContId&&"k_"+json.params.ext_obj.m_keys.id==this.m_currentContId);if(contact_exists&&!contact_active){this.msgBeep();this.addUnviewdMsgToContact(json.params.ext_obj.m_keys.id);}else if(contact_exists&&contact_active){this.msgBeep();this.onAddNewMessage("out",json);}}}
TmChat_View.prototype.onAddNewMessageCont=function(msgType,json,message){this.addMsgToActiveContact(msgType,json.params.text,json.params.ext_obj.m_keys.id,json.params.sender.m_descr,json.params.media_type,message);if(!this.m_opened){this.addUnviewdMsgToContact(json.params.ext_obj.m_keys.id);}}
TmChat_View.prototype.setTotUnviewdMsg=function(msgCount){TmChat_View.superclass.setTotUnviewdMsg.call(this,msgCount);if(isNaN(msgCount)||msgCount<=0){msgCount="";}
var tot_uv_ctrl=this.getElement("unviewedMsg");tot_uv_ctrl.setValue(msgCount);if(msgCount==""){tot_uv_ctrl.delAttr("class");}else{tot_uv_ctrl.setAttr("class","badge badge-danger");}}
TmChat_View.prototype.clearContactUnviewdMsg=function(contactId){var ctrl=this.getElement("contacts");if(!ctrl){return;}
var contact_cont=ctrl.getElement("k_"+contactId);if(!contact_cont){return;}
var unv_ctrl=contact_cont.getElement("contact_unviewed");if(!unv_ctrl){return;}
var cont_cnt=parseInt(unv_ctrl.getValue(),10);if(!cont_cnt||isNaN(cont_cnt)){cont_cnt=0;}
unv_ctrl.setValue("");let tot_cnt=this.getTotUnviewdMsg();this.setTotUnviewdMsg(tot_cnt-cont_cnt);}
TmChat_View.prototype.addUnviewdMsgToContact=function(contactId){var ctrl=this.getElement("contacts");if(!ctrl)return;var contact_cont=ctrl.getElement("k_"+contactId);if(!contact_cont)return;var unv_ctrl=contact_cont.getElement("contact_unviewed");if(!unv_ctrl)return;var v=parseInt(unv_ctrl.getValue(),10);if(!v||isNaN(v)){v=0;}
unv_ctrl.setValue(++v);let tot_cnt=this.getTotUnviewdMsg();this.setTotUnviewdMsg(++tot_cnt);}
TmChat_View.prototype.show=function(){TmChat_View.superclass.show.call(this);if(this.m_currentContId&&this.m_currentContId.length){var hist_cont=this.getElement("activeChat");if(hist_cont){var notif=hist_cont.getElement("notif");if(notif){let msg_ctrl=notif.getElement("message");if(msg_ctrl){msg_ctrl.focus();}
var cont=notif.getElement("history");var chat_n=$(cont.getNode());chat_n.scrollTop(chat_n[0].scrollHeight);}}
this.clearContactUnviewdMsg(this.m_currentContId.substr(2));}else{this.getElement("recipient").focus();}}
TmChat_View.prototype.addContact=function(ref,makeCurrent,tmPhoto,tmId){var ctrl=this.getElement("contacts");if(!ctrl)return;var self=this;var cont_id="k_"+ref.getKey("id");var cont=new ControlContainer(cont_id,"DIV",{"attrs":{"class":"chatContactCont"},"events":{"click":(function(contId){return function(e){e.stopPropagation();self.onSelectChat(contId,true);}})(cont_id)},"elements":[new Control(cont_id+":contact_photo","IMG",{"attrs":{"class":"contactPhoto","src":tmPhoto?"data:image/png;base64, "+tmPhoto:"#"}}),new Control(cont_id+":contact","SPAN",{"attrs":{"class":"chatContact"},"value":ref.getDescr()}),new Control(cont_id+":contact_unviewed","SPAN",{"attrs":{"class":"badge badge-danger"},"title":"Непрочитанные сообщения"}),new Control(cont_id+":contact_cl","SPAN",{"attrs":{"class":"chatContactClose"},"value":"X","title":"Удалить контакт","events":{"click":(function(contId){return function(e){e.stopPropagation();self.contactCloseClick(contId);}})(cont_id)}})]});cont.m_ref=ref;ctrl.addElement(cont);ctrl.elementsToDOM();if(makeCurrent){this.onSelectChat(cont_id,false);}}
TmChat_View.prototype.onSelectChat=function(contactContId,interactive){if(contactContId==this.m_currentContId){return;}
var cont_cont_ctrl=this.getElement("contacts").getElement(contactContId);if(this.m_currentContId){DOMHelper.delClass(this.getElement("contacts").getElement(this.m_currentContId).getNode(),"chatContactActive");}
this.m_currentContId=contactContId;DOMHelper.addClass(cont_cont_ctrl.getNode(),"chatContactActive");var hist_cont=this.getElement("activeChat");hist_cont.clear();hist_cont.addElement(new TmNotification_View(this.getId()+":notif",{"tm_exists":true,"ref":cont_cont_ctrl.m_ref,"chatMode":true,"msgOutControllerClass":this.m_newMsgOutControllerClass,"afterMessageSend":(function(histCont){return function(res){if(res===true){var nt=histCont.getElement("notif");nt.getElement("message").reset();}}})(hist_cont)}));hist_cont.elementsToDOM();var notif=hist_cont.getElement("notif");if(notif){notif.getElement("message").focus();}
if(interactive){this.clearContactUnviewdMsg(contactContId.substr(2));}}
TmChat_View.prototype.contactCloseClick=function(contactContId){this.clearContactUnviewdMsg(contactContId.substr(2));var cont=this.getElement("contacts");if(this.m_currentContId&&this.m_currentContId==contactContId){var hist_cont=this.getElement("activeChat");hist_cont.clear();hist_cont.elementsToDOM();this.m_currentContId=undefined;}
cont.delElement(contactContId);cont.elementsToDOM();}
TmChat_View.prototype.getLeftPos=function(){return(document.documentElement.clientWidth/2-this.getNode().offsetWidth/2)+"px";} 
function Notification_View(id,options){options=options||{};options.template=window.getApp().getTemplate("Notification_View");this.m_ref=options.ref;this.m_msgOutControllerClass=options.msgOutControllerClass;this.m_chatControllerClass=options.chatControllerClass;this.m_chatModelId=options.chatModelId;this.m_chatFolder=options.chatFolder;this.m_afterMessageSend=options.afterMessageSend;this.m_addElement=options.addElement;var self=this;options.addElement=function(){this.addElement(new ControlContainer(id+":history","DIV",{"visible":false,"attrs":{"class":"chatCont"}}));this.addElement(new EditText(id+":message",{"labelCaption":((options.chatMode===true)?null:"Сообщение:"),"editContClassName":"input-group "+window.getBsCol(12),"rows":3,"required":true,"focus":options.ref?true:false}));this.addElement(new ButtonCmd(id+":addAttachment",{"caption":" Отправить файл","title":"Отправить фотографию, видео, документ и т.д. Можно также перетащить файл мышкой.","glyph":"glyphicon-plus","onClick":function(){self.addAttachment();}}));this.addElement(new Control(id+":inf","DIV",{"attrs":{"class":"text-inf"}}));this.addElement(new Control(id+":inf_tm","DIV",{"attrs":{"class":"text-danger"}}));if(!options.ref||options.chatMode===true){this.addElement(new ButtonCmd(id+":submit",{"glyph":"glyphicon-send","caption":" Отправить сообщение","onClick":function(e){self.onSubmit(function(res){if(self.m_afterMessageSend){self.m_afterMessageSend(res);}});},"rows":3,"required":true}));}}
Notification_View.superclass.constructor.call(this,id,options);}
extend(Notification_View,View);Notification_View.prototype.SEND_MSG_PM="send";Notification_View.prototype.SEND_ATT_PM="send_media";Notification_View.prototype.WIN_MAX_HEIGHT=400;Notification_View.prototype.m_ref;Notification_View.prototype.m_msgOutControllerClass;Notification_View.prototype.sendFileToServer=function(files,caption){let rec=this.getRecipientForQuery();let pm=(new this.m_msgOutControllerClass()).getPublicMethod(this.SEND_ATT_PM);pm.setFieldValue("recipient",rec);pm.setFieldValue("caption",caption);pm.setFieldValue("media_file",files);pm.run({"ok":function(){window.showTempNote("Файлы отправлены",null,5000);}});}
Notification_View.prototype.addAttachment=function(){let self=this;var input=document.createElement('input');input.type='file';input.onchange=e=>{self.addAttachmentCont(e.target.files);}
input.click();}
Notification_View.prototype.closeCaptDialog=function(dlgCont,files,caption){this.sendFileToServer(files,caption);dlgCont.close();document.getElementById("Chat").style.zIndex="99999";}
Notification_View.prototype.addAttachmentCont=function(files){document.getElementById("Chat").style.zIndex="1";var self=this;let id=this.getId()+":cpt";this.m_dlgCont=new WindowFormModalBS(id,{"dialogWidth":"20%","cmdOk":true,"cmdCancel":true,"onClickOk":function(){self.closeCaptDialog(this,files,this.getContent().getElement("txt").getValue());},"onClickCancel":function(){self.closeCaptDialog(this,files,null);},"cmdClose":true,"content":new ControlContainer(id+":view","DIV",{"elements":[new EditText(id+":view:txt",{"focus":true,"rows":2,"labelCaption":"Подпись:","events":{"keyup":function(e){if(e.code==='Enter'){self.closeCaptDialog(self.m_dlgCont,files,this.getValue());e.preventDefault();return false;}}}})]})});this.m_dlgCont.open();}
Notification_View.prototype.addMsgToCont=function(cont,text,tp,dt,fromUser,show,mediaType,msg){var cont_id=cont.getId()+":msg"+(cont.getCount()+1);var app=window.getApp();var msg_ctrl;if(!mediaType||mediaType=="text"){msg_ctrl=new Control(cont_id+":t","DIV",{"attrs":{"class":"chatMsg_text"},"value":text});}else{var tag;if(mediaType=="video"){tag=app.htmlTagVideo(msg,this.m_chatFolder);}else if(mediaType=="audio"){tag=window.getApp().htmlTagAudio(msg,"audio",this.m_chatFolder);}else if(mediaType=="voice"){tag=window.getApp().htmlTagAudio(msg,"voice",this.m_chatFolder);}else if(mediaType=="document"){tag=app.htmlTagDocument(msg,this.m_chatFolder);}else if(mediaType=="photo"&&msg.photo&&CommonHelper.isArray(msg.photo)&&msg.photo.length){tag=app.htmlTagPhoto(msg,this.m_chatFolder);}else if(mediaType=="animation"){tag=app.htmlTagVideo(msg,this.m_chatFolder);}else if(mediaType=="sticker"){tag=app.htmlTagSticker(msg,this.m_chatFolder);}
msg_ctrl=new ControlContainer(cont_id+":t","DIV",{"attrs":{"class":"chatMsg_cont"},"elements":[new Control(cont_id+":t:msg",null,{"node":tag})]});}
cont.addElement(new ControlContainer(cont_id,"DIV",{"attrs":{"class":"chatMsg chatMsg_"+tp},"elements":[new Control(cont_id+":from","DIV",{"attrs":{"class":"chatMsg_from"},"value":fromUser}),msg_ctrl,new Control(cont_id+":d","DIV",{"attrs":{"class":"chatMsg_date"},"value":DateHelper.format(dt,"d F H:i")})]}));if(show){cont.elementsToDOM();var chat_n=$(cont.getNode());chat_n.scrollTop(chat_n[0].scrollHeight);}}
Notification_View.prototype.getHistory=function(callBack){this.m_TM=true;var pm=(new this.m_chatControllerClass()).getPublicMethod("get_history");if(this.m_ref){pm.setFieldValue("recipient",JSON.stringify(this.m_ref.toJSON()));}else{pm.unsetFieldValue("recipient");}
var self=this;pm.run({"ok":function(resp){var m=resp.getModel(self.m_chatModelId);if(!m){return;}
var cont=self.getElement("history");cont.clear();while(m.getNextRow()){var from=m.getFieldValue("from_user");if(typeof(from)=="string"){from=CommonHelper.unserialize(from);}
var from_descr=(from&&from.m_descr)?from.m_descr:"";self.addMsgToCont(cont,m.getFieldValue("text"),m.getFieldValue("tp"),m.getFieldValue("date_time"),from_descr,false,m.getFieldValue("media_type"),m.getFieldValue("message"));}
cont.setAttr("style","max-height: "+self.WIN_MAX_HEIGHT+"px;")
cont.elementsToDOM();cont.setVisible(true);var chat_n=$(cont.getNode());chat_n.scrollTop(chat_n[0].scrollHeight);if(callBack){callBack.call(self);}}});}
Notification_View.prototype.updateInf=function(refStr){}
Notification_View.prototype.getRecipientForQuery=function(){if(!this.m_ref||this.m_ref.isNull()){throw new Error("Не заполнен получатель!");}
return CommonHelper.serialize(this.m_ref);}
Notification_View.prototype.onSubmit=function(callBack){var rec=this.m_ref;if(!rec||rec.isNull()){if(callBack){callBack(false);}
return;}
rec.m_dataType="client_tels";var msg=this.getElement("message").getValue();if(!msg||!msg.length){this.getElement("message").setNotValid("Не заполнено");if(callBack){callBack(false);}
return;}
this.getElement("message").setValid();var pm=(new this.m_msgOutControllerClass()).getPublicMethod(this.SEND_MSG_PM);pm.setFieldValue("recipient",JSON.stringify(rec.toJSON()));pm.setFieldValue("message",msg);this.getElement("message").setEnabled(false);window.setGlobalWait(true);var self=this;pm.run({"all":function(){window.setGlobalWait(false);self.getElement("message").setEnabled(true);},"ok":function(){if(!self.m_TM){window.showTempNote("Собщение отправлено",null,5000);}
if(callBack){callBack(true);}}});}
Notification_View.prototype.addMessage=function(user,text,msType,dt,mediaType,message){var ctrl=this.getElement("history");this.addMsgToCont(ctrl,text,msType,dt,user,true,mediaType,message);} 
function TmNotification_View(id,options){options=options||{};options.msgOutControllerClass=TmOutMessage_Controller;options.msgControllerClass=TmOutMessage_Controller;options.chatControllerClass=Chat_Controller;options.chatModelId="Chat_Model";options.chatFolder="tm";options.addElement=function(){this.addElement(new Control(id+":inf","DIV",{"attrs":{"class":"text-inf"}}));this.addElement(new Control(id+":inf_tm","DIV",{"attrs":{"class":"text-danger"}}));}
TmNotification_View.superclass.constructor.call(this,id,options);if(options.ref){this.updateInf(JSON.stringify(options.ref.toJSON()));}}
extend(TmNotification_View,Notification_View);TmNotification_View.prototype.m_TM;TmNotification_View.prototype.showTMInvite=function(){var tm_ctrl=this.getElement("inf_tm");tm_ctrl.setValue("Пригласить в Telegram","info");DOMHelper.addClass(tm_ctrl.getNode(),"tmInvite");if(!this.m_onTMInviteClick){var self=this;this.m_onTMInviteClick=function(){self.onTMInviteClick();}}
EventHelper.add(tm_ctrl.getNode(),"click",this.m_onTMInviteClick);}
TmNotification_View.prototype.hideTMInvite=function(){var tm_ctrl=this.getElement("inf_tm");tm_ctrl.setValue("");if(this.m_onTMInviteClick){EventHelper.add(tm_ctrl.getNode(),"click",this.m_onTMInviteClick);}}
TmNotification_View.prototype.onTMInviteClick=function(){let rec=this.getRecipientForQuery();var pm=(new TmOutMessage_Controller()).getPublicMethod("tm_invite");pm.setFieldValue("recipient",rec);window.setGlobalWait(true);var self=this;pm.run({"all":function(){window.setGlobalWait(false);},"ok":function(){window.showTempNote("Отправлено приглашение в Telegram",null,5000);self.hideTMInvite();}});}
TmNotification_View.prototype.updateInf=function(refStr){var pm=(new TmOutMessage_Controller()).getPublicMethod("get_recipient_inf");pm.setFieldValue("recipient",refStr);this.hideTMInvite();var self=this;pm.run({"ok":function(resp){var tm_exists=false;var tm_activated=false;var tel="";var m=resp.getModel("ContactDialog_Model");if(m.getNextRow()){tm_exists=m.getFieldValue("tm_exists");tm_activated=m.getFieldValue("tm_activated");tel=CommonHelper.maskFormat(m.getFieldValue("tel"),window.getApp().getPhoneEditMask())}
var msg="";var nd=self.getElement("inf").getNode();if(tm_exists&&tm_activated){DOMHelper.delClass(nd,"text-danger");DOMHelper.addClass(nd,"text-info");msg="Сообщение будет отправлено в Telegram пользователю "+m.getFieldValue("tm_first_name");self.getHistory();var n=document.getElementById("notification:cont:photo")||document.getElementById("notif:photo");if(n){n.src="data:image/png;base64, "+m.getFieldValue("tm_photo");DOMHelper.show(n);}}else if(!tm_exists&&tel&&tel.length){DOMHelper.delClass(nd,"text-danger");DOMHelper.addClass(nd,"text-info");msg="Сообщение будет отправлено в виде СМС на номер: "+tel;self.showTMInvite();}else if(tm_exists&&!tm_activated&&tel.length){DOMHelper.delClass(nd,"text-danger");DOMHelper.addClass(nd,"text-info");msg="Telegram не активирован, сообщение будет отправлено в виде СМС на номер: "+tel;}else if(!tel||!tel.length){DOMHelper.addClass(nd,"text-danger");DOMHelper.delClass(nd,"text-info");msg="Telegram не активирован, телефон не задан, сообщение не будет отправлено";}
self.getElement("inf").setValue(msg);}});} 
function UserChatNotification_View(id,options){options=options||{};options.msgOutControllerClass=UserChat_Controller;options.chatControllerClass=UserChat_Controller;options.chatModelId="UserChatHistory_Model";options.chatFolder="chat";this.m_onClearContactUnviewdMsg=options.onClearContactUnviewdMsg;this.m_onDecTotUnviewdMsg=options.onDecTotUnviewdMsg;UserChatNotification_View.superclass.constructor.call(this,id,options);this.getHistory();}
extend(UserChatNotification_View,Notification_View);UserChatNotification_View.prototype.updateInf=function(refStr){this.getHistory(function(){this.setMsgViewedFromContact(CommonHelper.unserialize(refStr));});}
UserChatNotification_View.prototype.setMsgViewedFromContactCont=function(userId,userUnviewedCnt){this.m_onClearContactUnviewdMsg(userId);this.m_onDecTotUnviewdMsg(userUnviewedCnt);}
UserChatNotification_View.prototype.setMsgViewedFromContact=function(ref){let user_id,user_unviewed_cnt;if(ref){user_id=ref.getKey("id");let user_node=document.getElementById("unviewd_msg_for_"+user_id);if(!user_node||!user_node.textContent.length){return;}
user_unviewed_cnt=parseInt(user_node.textContent,10);if(isNaN(user_unviewed_cnt)||!user_unviewed_cnt){return;}}
let pm=(new UserChatMessageView_Controller()).getPublicMethod("set_all_viewed");if(user_id){pm.setFieldValue("user_id",user_id);}else{pm.unsetFieldValue("user_id");}
let self=this;pm.run({"ok":function(resp){self.setMsgViewedFromContactCont(user_id,user_unviewed_cnt);}});}
UserChatNotification_View.prototype.onSubmit=function(callBack){var msg=this.getElement("message").getValue();if(!msg||!msg.length){this.getElement("message").setNotValid("Не заполнено");if(callBack){callBack(false);}
return;}
this.getElement("message").setValid();var pm=(new this.m_msgOutControllerClass()).getPublicMethod(this.SEND_MSG_PM);if(this.m_ref){pm.setFieldValue("recipient",JSON.stringify(this.m_ref.toJSON()));}else{pm.unsetFieldValue("recipient");}
pm.setFieldValue("message",msg);this.getElement("message").setEnabled(false);window.setGlobalWait(true);var self=this;pm.run({"all":function(){window.setGlobalWait(false);self.getElement("message").setEnabled(true);},"ok":function(){if(!self.m_TM){window.showTempNote("Собщение отправлено",null,5000);}
if(callBack){callBack(true);}}});}
UserChatNotification_View.prototype.sendFileToServer=function(files,caption){let rec;if(this.m_ref&&!this.m_ref.isNull()){rec=CommonHelper.serialize(this.m_ref);}
let pm=(new this.m_msgOutControllerClass()).getPublicMethod(this.SEND_ATT_PM);if(rec){pm.setFieldValue("recipient",rec);}else{pm.unsetFieldValue("recipient");}
pm.setFieldValue("caption",caption);pm.setFieldValue("media_file",files);pm.run({"ok":function(){window.showTempNote("Файлы отправлены",null,5000);}});} 
function SendNotificationCmd(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;options.glyph="glyphicon-send";options.title="Отправить сообщение (СМС, Telegram)";options.caption=" Сообщение ";this.m_entityType=options.entityType;this.m_getEntityId=options.getEntityId;SendNotificationCmd.superclass.constructor.call(this,id,options);}
extend(SendNotificationCmd,GridCmd);SendNotificationCmd.prototype.onCommand=function(e){this.m_grid.setModelToCurrentRow();if(e&&e.stopPropagatio){e.stopPropagation();}
if(e&&e.preventDefault){e.preventDefault();}
window.getApp().sendNotificationToEntity(this.m_entityType,this.m_getEntityId(),this.m_grid.getSelectedRow());} 
function SendNotificationBtn(id,options){options=options||{};options.glyph="glyphicon-send";options.title="Отправить сообщение (СМС, Telegram)";var self=this;options.onClick=function(){self.onClick();}
this.m_getRef=options.getRef;this.m_cmd=options.cmd;SendNotificationBtn.superclass.constructor.call(this,id,options);}
extend(SendNotificationBtn,Button);SendNotificationBtn.prototype.m_grid;SendNotificationBtn.prototype.onClick=function(){var self=this;this.m_getRef(function(ref){window.getApp().sendNotification(ref);});} 
function UserChat_View(id,options){options=options||{};options.template=window.getApp().getTemplate("UserChat_View");options.templateOptions=options.templateOptions||{};options.templateOptions.HEADER="Чат с сотрудниками";this.m_newMsgInControllerClass=UserChat_Controller;this.m_newMsgOutControllerClass=UserChat_Controller;this.m_newMsgInModelId="UserChat_Model";this.m_newMsgOutModelId="UserChat_Model";this.m_msgInEventId="UserChat.insert";this.m_msgOutEventId=null;this.m_statusNodeId="user_chat_status";let self=this;options.addElement=function(){this.addElement(new UserChatUserList(id+":contacts",{"onSelectUser":function(userNode){self.onSelectChat(userNode,true);},"onSetSelectedUserNode":function(userNode){self.setSelectedUserNode(userNode);},"selectedUserClassId":this.SELECTED_USER_CLASS}));this.addElement(new ChatStatusEdit(id+":status",{"value":window.getApp().getChatStatusRef(),"contClassName":"recipEditCont","onSelect":function(fields){let new_id=fields.id.getValue();if(!new_id){return;}
let old_ref=window.getApp().getChatStatusRef();if(old_ref&&old_ref.getKey&&old_ref.getKey()==new_id){return;}
self.setUserStatus(new RefType({"keys":{"id":new_id},"descr":fields.name.getValue()}));}}));this.addElement(new ControlContainer(id+":activeChat","DIV",{}));this.addElement(new Control(id+":toggle","TEMPLATE",{"events":{"click":function(e){self.onToggleClick(e);}}}));}
UserChat_View.superclass.constructor.call(this,id,options);this.showChatHistory();}
extend(UserChat_View,Chat_View);UserChat_View.prototype.SELECTED_USER_CLASS="selected_chat_user";Chat_View.prototype.m_msgInEventId;Chat_View.prototype.m_msgOutEventId;UserChat_View.prototype.m_userList;UserChat_View.prototype.m_selectedUserId;UserChat_View.prototype.m_selectedUserNode;UserChat_View.prototype.showChatHistory=function(recipient){var hist_cont=this.getElement("activeChat");hist_cont.clear();let self=this;hist_cont.addElement(new UserChatNotification_View(this.getId()+":notif",{"ref":recipient,"chatMode":true,"onClearContactUnviewdMsg":function(userId){self.clearContactUnviewdMsg(userId);},"onDecTotUnviewdMsg":function(unviewedMsgCnt){let tot=self.getTotUnviewdMsg()-unviewedMsgCnt;if(tot<0){tot=0;}
self.setTotUnviewdMsg(tot);},"afterMessageSend":(function(histCont){return function(res){if(res===true){var nt=histCont.getElement("notif");nt.getElement("message").reset();}}})(hist_cont)}));hist_cont.elementsToDOM();var notif=hist_cont.getElement("notif");if(notif){notif.getElement("message").focus();}}
UserChat_View.prototype.onSelectChat=function(userNode,interactive){let user_id=userNode.getAttribute("user_id");let recipient;if(user_id==this.m_selectedUserId){DOMHelper.delClass(userNode,this.SELECTED_USER_CLASS);this.m_selectedUserNode=undefined;this.m_selectedUserId=undefined;}else{if(this.m_selectedUserNode){DOMHelper.delClass(this.m_selectedUserNode,this.SELECTED_USER_CLASS);}
DOMHelper.addClass(userNode,this.SELECTED_USER_CLASS);this.m_selectedUserNode=userNode;this.m_selectedUserId=user_id;recipient=new RefType({"keys":{"id":user_id},"descr":""});}
this.showChatHistory(recipient);var notif=this.getElement("activeChat").getElement("notif");notif.setMsgViewedFromContact(recipient);}
UserChat_View.prototype.setUserStatus=function(newStatRef){let pm=(new UserChatStatus_Controller()).getPublicMethod("set");pm.setFieldValue("chat_status_id",newStatRef.getKey());let self=this;pm.run({"ok":function(resp){window.getApp().m_chatStatusRef=newStatRef;window.showTempWarn("Статус обновлен",null,5000);}})}
UserChat_View.prototype.clearContactUnviewdMsg=function(userId){let user_node=document.getElementById("unviewd_msg_for_"+userId);if(!user_node){return;}
DOMHelper.hide(user_node);user_node.textContent="";}
UserChat_View.prototype.addUnviewdMsgToContact=function(userId){let user_node=document.getElementById("unviewd_msg_for_"+userId);if(!user_node){return;}
let user_msg=DOMHelper.getText(user_node);if(user_msg&&user_msg.length){user_msg=parseInt(user_msg,10);}
if(isNaN(user_msg)){user_msg=0;}
user_msg++;DOMHelper.setText(user_node,user_msg);DOMHelper.show(user_node);}
UserChat_View.prototype.show=function(){UserChat_View.superclass.show.call(this);var hist_cont=this.getElement("activeChat");if(!hist_cont){return;}
var notif=hist_cont.getElement("notif");if(!notif){return;}
let msg_ctrl=notif.getElement("message");if(msg_ctrl){msg_ctrl.focus();}
var cont=notif.getElement("history");var chat_n=$(cont.getNode());chat_n.scrollTop(chat_n[0].scrollHeight);notif.setMsgViewedFromContact(this.m_selectedUserId?(new RefType({"keys":{"id":this.m_selectedUserId},"descr":""})):null);}
UserChat_View.prototype.onNewMessage=function(json){if(json.eventId&&json.eventId=="UserChat.common"&&json.params.sender_id&&json.params.sender_id==window.getApp().getServVar("user_id")){return;}
this.msgBeep();if(json.eventId&&json.eventId=="UserChat.common"&&json.params){if(!this.m_selectedUserId){this.onAddNewMessage("in",json);let tot=this.getTotUnviewdMsg();this.setTotUnviewdMsg(++tot);if(this.m_opened){let hist_cont=this.getElement("activeChat");if(hist_cont){let notif=hist_cont.getElement("notif");if(notif){notif.setMsgViewedFromContact(null);}}}}else{let tot=this.getTotUnviewdMsg();this.setTotUnviewdMsg(++tot);}}else if(json.eventId&&json.eventId==window.getApp().getServVar("chat_private_id")&&json.params){if(this.m_selectedUserId&&this.m_selectedUserId==json.params.sender_id){this.onAddNewMessage("in",json);this.addUnviewdMsgToContact(json.params.sender_id);let tot=this.getTotUnviewdMsg();this.setTotUnviewdMsg(++tot);if(this.m_opened){let hist_cont=this.getElement("activeChat");if(hist_cont){let notif=hist_cont.getElement("notif");if(notif){notif.setMsgViewedFromContact(new RefType({"keys":{"id":this.m_selectedUserId}}));}}}}else{this.addUnviewdMsgToContact(json.params.sender_id);let tot=this.getTotUnviewdMsg();this.setTotUnviewdMsg(++tot);}}else if(json.eventId&&json.eventId==window.getApp().getServVar("chat_out_id")&&json.params){this.onAddNewMessage("out",json);}}
UserChat_View.prototype.getLeftPos=function(){return(document.documentElement.clientWidth-(document.documentElement.clientWidth*40/100)-10)+"px";}
UserChat_View.prototype.setSelectedUserNode=function(selectedUserNode){this.m_selectedUserNode=selectedUserNode;}
UserChat_View.prototype.onAddNewMessageCont=function(msgType,json,message){let from_user_descr,to_user_id;if(msgType=="out"){from_user_descr=window.getApp().getServVar("user_name");to_user_id=json.params.receiver_id;}else{to_user_id=window.getApp().getServVar("user_id");from_user_descr=json.params.sender_descr;}
this.addMsgToActiveContact(msgType,json.params.text,to_user_id,from_user_descr,json.params.media_type,message);} 
function UserChatUserList(id,options){options=options||{};options.publicMethod=(new UserChat_Controller()).getPublicMethod("get_user_list");options.autoRefresh=true;options.modelId="UserChatUserList_Model";this.m_onSelectUser=options.onSelectUser;this.m_selectedUserClassId=options.selectedUserClassId;this.m_onSetSelectedUserNode=options.onSetSelectedUserNode;UserChatUserList.superclass.constructor.call(this,id,options);}
extend(UserChatUserList,ViewTemplate);UserChatUserList.prototype.m_onSelectUser;UserChatUserList.prototype.onAfterUpdateHTML=function(resp){let self=this;$(".chat_user").click(function(e){self.m_onSelectUser(e.target);});if(this.m_selectedUserId){let users_n=DOMHelper.getElementsByAttr(this.m_selectedUserId,this.getNode(),"user_id",true);if(users_n&&users_n.length){DOMHelper.addClass(users_n[0],this.m_selectedUserClassId);this.m_onSetSelectedUserNode(users_n[0]);}}}
UserChatUserList.prototype.onBeforeUpdateHTML=function(resp){if(!this.m_modelId){return;}
this.m_model=resp.getModel(this.m_modelId);if(!this.m_model){return;}
this.m_selectedUserId=undefined;let selected_users_n=DOMHelper.getElementsByAttr(this.m_selectedUserClassId,this.getNode(),"class",true);if(selected_users_n&&selected_users_n.length){this.m_selectedUserId=selected_users_n[0].getAttribute("user_id");}
let app=window.getApp();this.m_templateOptions={"rows":[]};while(this.m_model.getNextRow()){let row=[];let fields=this.m_model.getFields();row["name"]=fields["name_short"].getValue();row["user_id"]=fields["id"].getValue();row["status"]=fields["chat_statuses_ref"].getValue().getDescr();row["unviewed_msg_cnt"]=fields["unviewed_msg_cnt"].getValue();if(!row["unviewed_msg_cnt"]){row["no_unviewed"]=true;}
let is_online=fields["is_online"].getValue();let role=app.getEnum("role_types",fields["role_id"].getValue());row["user_title"]=fields["name"].getValue()+", "+role;if(is_online){row["user_title"]+=", в сети";row["user_img"]="img/dot_green.png";}else{row["user_title"]+=", не в сети";row["user_img"]="img/dot_red.png";}
if(row["status"]){row["user_title"]+=", "+row["status"];}
this.m_templateOptions.rows.push(row);}} 
var UserTel={show:function(){var self=this;this.m_view=new ControlContainer("UserTel","DIV",{"elements":[new EditPhone("tel",{"cmdClear":false,"focus":true,"events":{"keydown":function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){self.setTelCtrl();}}}})]});this.m_form=new WindowFormModalBS(CommonHelper.uniqid(),{"cmdCancel":true,"controlCancelCaption":"Отмена","controlCancelTitle":"Отмена","cmdOk":true,"onClickOk":function(){self.setTelCtrl();},"onClickCancel":function(){self.m_form.close();},"content":this.m_view,"contentHead":"Номер телефона"});this.m_form.open();},"setUserData":function(uData){document.cookie='tm_tel='+encodeURIComponent(uData.tel.getValue())+'; Path=/; max-age='+uData.tel_duration_sec.getValue()+';';document.cookie='tm_first_name='+encodeURIComponent(uData.first_name.getValue())+'; Path=/; max-age='+uData.tel_duration_sec.getValue()+';';var n=document.getElementById("Login:submit_login_tm");if(n){DOMHelper.setText(n," Сообщение в Telegram для "+uData.first_name.getValue())}},"setTelCtrl":function(){var tel_ctrl=this.m_view.getElement("tel");var t=tel_ctrl.getValue();if(!t||t.length!=10){tel_ctrl.setNotValid("Неверный номер");return;}
tel_ctrl.setValid();this.setTel(t);},"setTel":function(t){var self=this;var pm=(new User_Controller()).getPublicMethod("tm_check_tel");pm.setFieldValue("tel",t);pm.run({"ok":function(resp){var m=resp.getModel("TmUser_Model");if(m.getNextRow()){self.setUserData(m.getFields());if(self.m_form){self.m_form.close();}
UserCode.show(m.getFieldValue("tel"));}},"fail":function(resp,errCode,errStr){if(self.m_form){self.m_view.getElement("tel").setNotValid(errStr);}else{UserCode.show(t);}}});}} 
var UserCode={show:function(tel){var self=this;this.m_tel=tel;this.m_view=new ControlContainer("UserCode","DIV",{"addElement":function(){this.addElement(new EditNum("UserCode:code",{"cmdClear":false,"maxLength":3,"focus":true,"events":{"keyup":function(e){var c=self.m_view.getElement("code").getValue();if(c&&c.length==3){self.setCode();}}}}));this.addElement(new Control("UserCode:leftTime","DIV"));}});this.m_form=new WindowFormModalBS(CommonHelper.uniqid(),{"content":this.m_view,"contentHead":"Введите код авторизации из Telegram"});this.m_form.open();var self=this;self.m_timeLeft=120;setInterval(function(){self.m_timeLeft--;self.m_view.getElement("leftTime").setValue("Осталось секунд: "+self.m_timeLeft);if(self.m_timeLeft==0){self.m_form.close();}},1000);},"setCode":function(){var self=this;var ctrl=this.m_view.getElement("code");var t=ctrl.getValue();var pm=(new User_Controller()).getPublicMethod("tm_check_code");pm.setFieldValue("code",t);pm.setFieldValue("tel",this.m_tel);this.m_view.setEnabled(false);pm.run({"ok":function(resp){var m=resp.getModel("Auth_Model");if(m.getNextRow()){document.location.href=window.location.href;}},"fail":function(resp,errCode,errStr){self.m_view.setEnabled(true);ctrl.setNotValid(errStr);}});}} 
function LoginTM(id,options){options=options||{};var self=this;options.addElement=function(){this.addElement(new ErrorControl(id+":error"));this.addElement(new Control(id+":userData"));this.addElement(new Control(id+":userPhoto"));this.addElement(new EditPhone(id+":tel",{"cmdClear":false,"focus":true,"editContClassName":"","events":{"keyup":function(){var t=self.getElement("tel").getValue();if(t&&t.length==10){self.setTel(t);}}}}));this.addElement(new ButtonCmd(id+":check_code",{"onClick":function(){self.checkCode();}}));}
LoginTM.superclass.constructor.call(this,id,options);}
extend(LoginTM,ViewAjx);LoginTM.prototype.m_tel;LoginTM.prototype.m_timeLeft;LoginTM.prototype.toDOM=function(p){LoginTM.superclass.toDOM.call(this,parent);var tm_tel=CommonHelper.getCookie("tm_tel");if(tm_tel){var tm_photo;if(window["localStorage"]){tm_photo=localStorage.getItem('tm_photo');}
this.setUserDataCtrl(tm_tel,CommonHelper.getCookie("tm_first_name"),tm_photo);}
const self=this;const inputs=DOMHelper.getElementsByAttr("tmCode",document.body,"class",false);function checkAndSubmit(){if([...inputs].every(input=>input.value.length===1)){self.submitCode();}}
inputs.forEach((input,index)=>{console.log("iterating inputs")
input.addEventListener("keydown",function(event){const key=event.key;event.preventDefault();if(key>="0"&&key<="9"){input.value=key;if(index<inputs.length-1){inputs[index+1].focus();inputs[index+1].select();}
checkAndSubmit();}else if(key==="Backspace"||key==="Delete"){if(input.value===""){if(index>0){inputs[index-1].focus();inputs[index-1].value="";inputs[index-1].select();}}else{input.value="";}}else if(key==="ArrowRight"){if(index<inputs.length-1){inputs[index+1].focus();inputs[index+1].select();}}else if(key==="ArrowLeft"){if(index>0){inputs[index-1].focus();inputs[index-1].select();}}else if(key==="Tab"){if(index<inputs.length-1){inputs[index+1].focus();inputs[index+1].select();}}});});var tm_l=CommonHelper.getCookie("tm_time_left");if(tm_l||CommonHelper.getCookie("tm_code_time_left")){if(tm_l){this.checkCodeContCont();}else{DOMHelper.show(this.getId()+":codeInput");document.getElementById("tm_сode1").focus();this.setSubmitText("Запросить код повторно")}}else if(tm_tel&&tm_tel.length>=10){CommonHelper.unsetCookie("tm_time_left");var pm=(new User_Controller()).getPublicMethod("tm_get_left_time");pm.setFieldValue("tel",tm_tel);pm.run({"ok":function(resp){var m=resp.getModel("TmLeftTime_Model");if(m.getNextRow()){var set_code_left_time=function(m){var c_lt=parseInt(m.getFieldValue("code_left_time"),10);if(c_lt){document.cookie='tm_code_time_left='+c_lt+'; Path=/; max-age='+c_lt+';';}
return c_lt;}
var lt=parseInt(m.getFieldValue("left_time"),10);if(lt){lt+=2;document.cookie='tm_time_left='+lt+'; Path=/; max-age='+lt+';';set_code_left_time(m);self.checkCodeContCont();}else if(set_code_left_time(m)){self.checkCodeContCont();}}},"fail":function(resp,errCode,errStr){self.setError(errStr);}});}}
LoginTM.prototype.setError=function(s){this.getElement("error").setValue(s);}
LoginTM.prototype.setSubmitText=function(t){DOMHelper.setText(this.getId()+":check_code",t);}
LoginTM.prototype.setSubmitLeftTime=function(){var t_m=Math.floor(this.m_timeLeft/60);var t_s=this.m_timeLeft-t_m*60;this.setSubmitText("Запросить код повторно через "+((t_m>9)?t_m.toString():"0"+t_m.toString())+":"+((t_s>9)?t_s.toString():"0"+t_s.toString()));}
LoginTM.prototype.checkCodeCont=function(){var pm=(new User_Controller()).getPublicMethod("tm_send_code");pm.setFieldValue("tel",this.m_tel);var self=this;pm.run({"ok":function(resp){self.checkCodeContCont();},"fail":function(resp,errCode,errStr){self.setError(errStr);self.unsetUserData();}});}
LoginTM.prototype.clearCode=function(){DOMHelper.setText("tm_сode1","");DOMHelper.setText("tm_сode2","");DOMHelper.setText("tm_сode3","");document.getElementById("tm_сode1").focus();}
LoginTM.prototype.checkCodeContCont=function(){var self=this;this.clearCode();DOMHelper.show(this.getId()+":codeInput");this.m_timeLeft=CommonHelper.getCookie("tm_time_left");if(!this.m_timeLeft){this.m_timeLeft=CommonHelper.getCookie("tm_duration_sec");if(!this.m_timeLeft){this.m_timeLeft=120;}}else{CommonHelper.unsetCookie("tm_time_left");}
var ctrl=this.getElement("check_code");this.setSubmitLeftTime();ctrl.setEnabled(false);document.getElementById("tm_сode1").focus();this.m_timeInterval=setInterval(function(){self.m_timeLeft--;var ctrl=self.getElement("check_code");if(self.m_timeLeft==0){clearInterval(self.m_timeInterval);self.setSubmitText("Запросить код повторно");ctrl.setAttr("title","Запросить новый код авторизации");ctrl.setEnabled(true);}else{self.setSubmitLeftTime();}},1000);}
LoginTM.prototype.checkCode=function(){var t=this.getCorrectTel();if(!t){return;}
this.setError("");if(this.m_tel&&this.m_tel!=t){this.setTel(t,function(){self.checkCodeCont();});}else{this.m_tel=t;this.checkCodeCont();}}
LoginTM.prototype.unsetUserData=function(){CommonHelper.unsetCookie("tm_tel");CommonHelper.unsetCookie("tm_first_name");if(window["localStorage"]){localStorage.removeItem('tm_photo');}
CommonHelper.unsetCookie("tm_duration_sec");this.unsetUserDataCtrl();}
LoginTM.prototype.setUserDataCtrl=function(tel,name,photo){this.m_tel=tel;this.getElement("tel").setValue(tel?tel:"");this.getElement("userData").setValue(name?name:"");if(photo){this.getElement("userPhoto").setAttr("src","data:image/png;base64, "+photo);}
this.getElement("userPhoto").setVisible(photo?true:false);}
LoginTM.prototype.unsetUserDataCtrl=function(){this.getElement("userData").setValue("");this.getElement("userPhoto").setAttr("src","");this.getElement("userPhoto").setVisible(false);}
LoginTM.prototype.setUserData=function(uData){var tm_tel=uData.tel.getValue();var tm_first_name=uData.first_name.getValue();var tm_photo=uData.tm_photo.getValue();if(window["localStorage"]){localStorage.setItem('tm_photo',tm_photo);}
CommonHelper.setCookie("tm_tel",tm_tel,uData.tel_duration_sec.getValue());CommonHelper.setCookie("tm_first_name",tm_first_name,uData.tel_duration_sec.getValue());CommonHelper.setCookie("tm_duration_sec",uData.duration_sec.getValue(),uData.tel_duration_sec.getValue());this.setUserDataCtrl(tm_tel,tm_first_name,tm_photo);}
LoginTM.prototype.setTel=function(t,callback){this.setError("");var self=this;var pm=(new User_Controller()).getPublicMethod("tm_check_tel");pm.setFieldValue("tel",t);pm.run({"ok":function(resp){var m=resp.getModel("TmUserData_Model");if(m.getNextRow()){self.setUserData(m.getFields());if(m.getFieldValue("code_exists")=="1"){var lt=parseInt(m.getFieldValue("left_time"),10);if(lt){lt+=2;document.cookie='tm_time_left='+lt+'; Path=/; max-age='+lt+';';}
self.checkCodeContCont();}
if(callback)callback();}},"fail":function(resp,errCode,errStr){self.setError(errStr);self.unsetUserData();}});}
LoginTM.prototype.getCorrectTel=function(){var tel=this.getElement("tel").getValue();if(!tel||tel.length!=10){this.unsetUserData();this.setError("Неверный номер!");return undefined;}
return tel;}
LoginTM.prototype.submitCode=function(){if(!this.m_tel){return;}
var code=DOMHelper.getText("tm_сode1")+DOMHelper.getText("tm_сode2")+DOMHelper.getText("tm_сode3");if(!code||code.length!=3){this.setError("Код не введен");return;}
var pm=(new User_Controller()).getPublicMethod("tm_check_code");pm.setFieldValue("code",code);pm.setFieldValue("tel",this.m_tel);var self=this;pm.run({"ok":function(resp){var m=resp.getModel("Auth_Model");if(m.getNextRow()){document.location.href=window.location.href;}},"fail":function(resp,errCode,errStr){self.setError(errStr);self.clearCode();}});} 
function PostEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Должность:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.keyIds=options.keyIds||["id"];options.selectWinClass=PostList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=Post_Form;options.acMinLengthForQuery=(options.acMinLengthForQuery!=undefined)?options.acMinLengthForQuery:1;options.acController=new Post_Controller();options.acPublicMethod=options.acController.getPublicMethod("complete");options.acModel=new Post_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";PostEdit.superclass.constructor.call(this,id,options);}
extend(PostEdit,EditRef); 
function ContactEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Контакт:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.keyIds=options.keyIds||["id"];options.selectWinClass=ContactList_Form;options.selectDescrIds=options.selectDescrIds||["descr"];options.editWinClass=Contact_Form;options.acMinLengthForQuery=(options.acMinLengthForQuery!=undefined)?options.acMinLengthForQuery:1;options.acController=new Contact_Controller();if(options.tm_activated==true){options.acPublicMethod=options.acController.getPublicMethod("complete_tm");}else{options.acPublicMethod=options.acController.getPublicMethod("complete");}
options.acModel=new ContactList_Model();options.acPatternFieldId=options.acPatternFieldId||"descr";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("descr")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";options.acDescrFunction=function(f){var p_ref=f.posts_ref.getValue();return f["descr"].getValue()+((p_ref&&!p_ref.isNull())?" ("+p_ref.getDescr()+")":"");};options.acOnCompleteTextOut=function(textHTML,modelRow){var pref="";if(modelRow&&modelRow.tm_photo.getValue()){pref="<img class='contactPhoto' src='data:image/png;base64, "+modelRow.tm_photo.getValue()+"'/img>";}
return pref+textHTML;}
ContactEdit.superclass.constructor.call(this,id,options);}
extend(ContactEdit,EditRef); 
function Enum_entity_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"users","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"users"],checked:(options.defaultValue&&options.defaultValue=="users")},{"value":"clients","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"clients"],checked:(options.defaultValue&&options.defaultValue=="clients")},{"value":"suppliers","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"suppliers"],checked:(options.defaultValue&&options.defaultValue=="suppliers")},{"value":"pump_vehicles","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"pump_vehicles"],checked:(options.defaultValue&&options.defaultValue=="pump_vehicles")}];Enum_entity_types.superclass.constructor.call(this,id,options);}
extend(Enum_entity_types,EditSelect);Enum_entity_types.prototype.multyLangValues={"ru_users":"Пользователи","ru_clients":"Клиенты","ru_suppliers":"Поставщики","ru_pump_vehicles":"Насосы"}; 
function EnumGridColumn_entity_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["users"]="Пользователи";options.multyLangValues["ru"]["clients"]="Клиенты";options.multyLangValues["ru"]["suppliers"]="Поставщики";options.multyLangValues["ru"]["pump_vehicles"]="Насосы";options.ctrlClass=options.ctrlClass||Enum_entity_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_entity_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_entity_types,GridColumnEnum); 
function RawMaterialTicketGridCmdIssue(id,options){options=options||{};options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:true;this.m_btn=new RawMaterialTicketIssueBtn(id+"btn",{"cmd":true});options.controls=[this.m_btn]
RawMaterialTicketGridCmdIssue.superclass.constructor.call(this,id,options);}
extend(RawMaterialTicketGridCmdIssue,GridCmd);RawMaterialTicketGridCmdIssue.prototype.setGrid=function(v){RawMaterialTicketGridCmdIssue.superclass.setGrid.call(this,v);this.m_btn.m_grid=v;this.m_grid=v;} 
function RawMaterialTicketIssueBtn(id,options){options=options||{};if(options.cmd){options.colorClass="bg-"+window.getApp().getColorClass();options.className="btn "+options.colorClass+" btn-cmd";options.caption=" Выдать ";}
else{options.className="btn btn-default";}
options.glyph="glyphicon-barcode";options.title="Выдать новые талоны";var self=this;options.onClick=function(){self.onClick();}
this.m_cmd=options.cmd;RawMaterialTicketIssueBtn.superclass.constructor.call(this,id,options);}
extend(RawMaterialTicketIssueBtn,Button);RawMaterialTicketIssueBtn.prototype.m_grid;RawMaterialTicketIssueBtn.prototype.onClick=function(){this.m_grid.setModelToCurrentRow();var f=this.m_grid.getModel().getFields();var id=f.id.getValue();var self=this;this.m_view=new View("dialog:cont",{"elements":[new SupplierEdit("dialog:cont:carriers_ref",{"labelCaption":"Перевозчик:","focus":true}),new QuarryEdit("dialog:cont:quarries_ref",{"labelCaption":"Карьер:"}),new MaterialSelect("dialog:cont:raw_materials_ref",{"labelCaption":"Материал:"}),new EditInt("dialog:cont:quant",{"labelCaption":"Вес, т.:","cmdCalc":false}),new EditDate("dialog:cont:expire_date",{"labelCaption":"Окончание срока:","value":DateHelper.yearEnd(DateHelper.time())}),new EditInt("dialog:cont:barcode_from",{"labelCaption":"Номер с:","onReset":function(){self.calcTicketCount();},"events":{"input":function(){self.calcTicketCount();}},"cmdCalc":false}),new EditInt("dialog:cont:barcode_to",{"labelCaption":"Номер по:","onReset":function(){self.calcTicketCount();},"events":{"input":function(){self.calcTicketCount();}},"cmdCalc":false}),new Control("dialog:cont:inf","DIV",{"attrs":{"class":"help-block text-info"}})]});this.m_form=new WindowFormModalBS("dialog",{"content":this.m_view,"dialogWidth":"20%","cmdCancel":true,"cmdOk":true,"contentHead":"Введите данные для создания талонов","onClickCancel":function(){self.closeSelect();},"onClickOk":(function(productionSiteId){return function(){var carriers_ref=self.m_view.getElement("carriers_ref").getValue();if(!carriers_ref||carriers_ref.isNull()){throw Error("Не задан перевозчик!");}
var quarries_ref=self.m_view.getElement("quarries_ref").getValue();if(!quarries_ref||quarries_ref.isNull()){throw Error("Не задан карьер!");}
var raw_materials_ref=self.m_view.getElement("raw_materials_ref").getValue();if(!raw_materials_ref||raw_materials_ref.isNull()){throw Error("Не задан материал!");}
if(!self.m_view.m_ticketCount){throw Error("Не определено количество талонов!");}
var quant=self.m_view.getElement("quant").getValue();if(!quant){throw Error("Не задан вес!");}
self.closeSelect(carriers_ref.getKey(),quarries_ref.getKey(),raw_materials_ref.getKey(),quant,self.m_view.getElement("barcode_from").getValue(),self.m_view.getElement("barcode_to").getValue(),self.m_view.getElement("expire_date").getValue());}})(id)});this.m_form.open();}
RawMaterialTicketIssueBtn.prototype.doCloseForm=function(){if(this.m_view){this.m_view.delDOM()
delete this.m_view;}
if(this.m_form){this.m_form.delDOM();delete this.m_form;}}
RawMaterialTicketIssueBtn.prototype.closeSelect=function(carrierId,quarryId,rawMaterialId,quant,barcodeFrom,barcodeTo,expireDate){if(carrierId&&rawMaterialId&&quant&&barcodeFrom&&barcodeTo&&this.m_view.m_ticketCount){var pm=(new RawMaterialTicket_Controller()).getPublicMethod("generate");var self=this;pm.setFieldValue("carrier_id",carrierId);pm.setFieldValue("quarry_id",quarryId);pm.setFieldValue("raw_material_id",rawMaterialId);pm.setFieldValue("quant",quant);pm.setFieldValue("barcode_from",barcodeFrom);pm.setFieldValue("barcode_to",barcodeTo);pm.setFieldValue("expire_date",expireDate);window.setGlobalWait(true);pm.run({"ok":function(){self.m_grid.onRefresh(function(){window.showTempNote("Сгенерировано талонов: "+self.m_view.m_ticketCount,null,5000);self.doCloseForm();});},"all":function(){window.setGlobalWait(false);}});}else{this.doCloseForm();}}
RawMaterialTicketIssueBtn.prototype.calcTicketCount=function(){if(!this.m_view){return;}
this.m_view.m_ticketCount=0;var barcode_from=this.m_view.getElement("barcode_from").getValue();if(barcode_from){var barcode_to=this.m_view.getElement("barcode_to").getValue();if(barcode_to){this.m_view.m_ticketCount=barcode_to-barcode_from+1;this.m_view.getElement("inf").setValue("Количество талонов: "+this.m_view.m_ticketCount);}}} 
function ClientSpecificationEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Спецификация:";}
options.cmdInsert=false;options.keyIds=options.keyIds||["id"];options.selectWinClass=ClientSpecificationList_Form;var self=this;options.selectDescrIds=function(f){return self.getSelectDescr(f);}
options.editWinClass=null;options.labelClassName="control-label "+window.getBsCol(2);options.acMinLengthForQuery=1;options.acController=new ClientSpecification_Controller(options.app);options.acCount=100;options.acPublicMethod=options.acController.getPublicMethod("complete_for_client");options.acModel=new ClientSpecificationList_Model();options.acPatternFieldId="search";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.selectWinParams=(function(pm){return function(){var s="cond_fields=client_id@@destination_id@@concrete_type_id&cond_sgns=e@@e@@e&cond_vals="+
pm.getFieldValue("client_id")+"@@"+
pm.getFieldValue("destination_id")+"@@"+
pm.getFieldValue("concrete_type_id")+"&field_sep=@@";return s;}})(options.acPublicMethod);options.acDescrFunction=function(f){return self.getSelectDescr(f);};options.acOnBeforeSendQuery=function(){var pm=this.getPublicMethod()
return(pm.getField("client_id").isSet()&&pm.getField("concrete_type_id").isSet()&&pm.getField("destination_id").isSet());}
options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";ClientSpecificationEdit.superclass.constructor.call(this,id,options);}
extend(ClientSpecificationEdit,EditRef);ClientSpecificationEdit.prototype.getSelectDescr=function(f){return f.contract.getValue()+"/"+f.specification.getValue()+" ("+f.concrete_types_ref.getValue().getDescr()+": "+f.quant_balance.getValue()+" м3)";} 
function VehicleScheduleEdit_View(id,options){options=options||{};var role_id=window.getApp().getServVar("role_id");var self=this;options.addElement=function(){if(role_id!="vehicle_owner"){this.addElement(new VehicleOwnerEdit(id+":vehicle_owner",{}));}
this.addElement(new EditPeriodDate(id+":period",{}));this.addElement(new DriverEdit(id+":tmpl_driver",{}));this.addElement(new ProductionBaseEdit(id+":tmpl_prod_base",{}));this.addElement(new ButtonCmd(id+":cmdApplyTemplate",{"caption":"Применить шаблон","title":"Применить шаблон на выбранные транспортные средства","onClick":function(){self.cmdApplyTemplate();}}));this.addElement(new ButtonCmd(id+":cmdApplyDriver",{"caption":"Установить водителя и базу","title":"Установить выбранного водителя и базу для выбраных транспортных средств в рабочие смены.","onClick":function(){self.cmdApplyDriver();}}));this.addElement(new ButtonCmd(id+":cmdApplyFilter",{"caption":"Заполнить","title":"Построить расписание по выбранному владельцу за период","onClick":function(){self.cmdApplyFilter();}}));}
VehicleScheduleEdit_View.superclass.constructor.call(this,id,options);$(".owner_schedule_day_tmpl").click(function(e){self.switchTmplDay(e.target);});}
extend(VehicleScheduleEdit_View,View);VehicleScheduleEdit_View.prototype.DRIVER_SHORT_CHAR_COUNT=5;VehicleScheduleEdit_View.prototype.PROD_BASE_SHORT_CHAR_COUNT=5;VehicleScheduleEdit_View.prototype.cmdApplyTemplateCont=function(nodes){var drv_ref=this.getElement("tmpl_driver").getValue();var prod_base_ref=this.getElement("tmpl_prod_base").getValue();for(var i=0;i<nodes.length;i++){var drv_nodes=DOMHelper.getElementsByAttr("owner_schedule_driver",nodes[i].node,"class",true);if(drv_nodes&&drv_nodes.length){DOMHelper.delNode(drv_nodes[0]);}
var prod_base_nodes=DOMHelper.getElementsByAttr("owner_schedule_prod_base",nodes[i].node,"class",true);if(prod_base_nodes&&prod_base_nodes.length){DOMHelper.delNode(prod_base_nodes[0]);}
if(nodes[i].shift){DOMHelper.addClass(nodes[i].node,"owner_schedule_shift");this.addDriverNode(nodes[i].node,drv_ref);this.addProdBaseNode(nodes[i].node,prod_base_ref);}else{if(nodes[i].weekend){DOMHelper.addClass(nodes[i].node,"owner_schedule_weekend");}
DOMHelper.delClass(nodes[i].node,"owner_schedule_shift");}}}
VehicleScheduleEdit_View.prototype.cmdApplyTemplate=function(){var vehicles=[];var all_nodes=[];var self=this;$(".owner_schedule_vehicle_mark").each(function(index){if(this.checked){var days=[];var driver_id,prod_base_id;var nodes=DOMHelper.getElementsByAttr("owner_schedule_day",this.parentNode.parentNode,"class",false);for(var i=0;i<nodes.length;i++){var dt=nodes[i].getAttribute("dt");var day=DateHelper.strtotime(dt).getDay();if(day==0){day=7;}
var is_shift=$(document.getElementById(self.getId()+":tmpl:day"+day)).hasClass("owner_schedule_shift");if(is_shift&&!driver_id){var ref=self.getElement("tmpl_driver").getValue();if(!ref||ref.isNull()){self.getElement("tmpl_driver").setNotValid("Не выбран");throw new Error("Необходимо выбрать водителя");}
self.getElement("tmpl_driver").setValid();driver_id=ref.getKey("id");}
if(is_shift&&!prod_base_id){var ref=self.getElement("tmpl_prod_base").getValue();if(!ref||ref.isNull()){self.getElement("tmpl_prod_base").setNotValid("Не выбрана");throw new Error("Необходимо выбрать базу");}
self.getElement("tmpl_prod_base").setValid();prod_base_id=ref.getKey("id");}
days.push({"date":dt,"shift":is_shift,"driver_id":is_shift?driver_id:0,"prod_base_id":is_shift?prod_base_id:0});all_nodes.push({"node":nodes[i],"shift":is_shift,"weekend":(day>=6)});}
vehicles.push({"vehicle_id":this.parentNode.parentNode.getAttribute("vehicle_id"),"days":days});}});this.setScheduleServerCall(vehicles,function(){self.cmdApplyTemplateCont(all_nodes);});}
VehicleScheduleEdit_View.prototype.cmdApplyProdBaseCont=function(nodes,ref){for(i=0;i<nodes.length;i++){nodes[i].setAttribute("prod_base_id",ref.getKey());nodes[i].setAttribute("title",ref.getDescr());nodes[i].textContent=ref.getDescr().substring(0,this.PROD_BASE_SHORT_CHAR_COUNT);}}
VehicleScheduleEdit_View.prototype.cmdApplyDriverCont=function(nodes,ref){for(i=0;i<nodes.length;i++){nodes[i].setAttribute("driver_id",ref.getKey());nodes[i].setAttribute("title",ref.getDescr());nodes[i].textContent=ref.getDescr().substring(0,this.DRIVER_SHORT_CHAR_COUNT);}}
VehicleScheduleEdit_View.prototype.cmdApplyDriver=function(){var drv_ref=this.getElement("tmpl_driver").getValue();if(!drv_ref||drv_ref.isNull()){this.getElement("tmpl_driver").setNotValid("Не выбран");return;}
this.getElement("tmpl_driver").setValid();var prod_base_ref=this.getElement("tmpl_prod_base").getValue();if(!prod_base_ref||prod_base_ref.isNull()){this.getElement("tmpl_prod_base").setNotValid("Не выбрана");return;}
this.getElement("tmpl_prod_base").setValid();var driver_id=drv_ref.getKey();var d_nodes=[];var prod_base_id=prod_base_ref.getKey();var pb_nodes=[];var vehicles=[];$(".owner_schedule_vehicle_mark").each(function(index){if(this.checked){var add_vh=false;var days=[];var nodes=DOMHelper.getElementsByAttr("owner_schedule_day",this.parentNode.parentNode,"class",false);for(var i=0;i<nodes.length;i++){if($(nodes[i]).hasClass("owner_schedule_shift")){var drv_nodes=DOMHelper.getElementsByAttr("owner_schedule_driver",nodes[i],"class",true);if(drv_nodes&&drv_nodes.length){d_nodes.push(drv_nodes[0]);days.push({"date":nodes[i].getAttribute("dt"),"shift":true,"driver_id":driver_id,"prod_base_id":prod_base_id});add_vh=true;}
var prod_base_nodes=DOMHelper.getElementsByAttr("owner_schedule_prod_base",nodes[i],"class",true);if(prod_base_nodes&&prod_base_nodes.length){pb_nodes.push(prod_base_nodes[0]);}}}
if(add_vh){vehicles.push({"vehicle_id":this.parentNode.parentNode.getAttribute("vehicle_id"),"days":days});}}});var self=this;this.setScheduleServerCall(vehicles,function(){self.cmdApplyDriverCont(d_nodes,drv_ref)
self.cmdApplyProdBaseCont(pb_nodes,prod_base_ref)});}
VehicleScheduleEdit_View.prototype.markAll=function(n){$(".owner_schedule_vehicle_mark").each(function(index){this.checked=n.checked;});}
VehicleScheduleEdit_View.prototype.changeDriver=function(forDate,callback){(new WindowFormModalBS(this.getId()+":changeDr",{"contentHead":"Водитель на "+DateHelper.format(forDate,"d/m/Y"),"content":new View(this.getId()+":changeDr:v",{"elements":[new DriverEdit(this.getId()+":changeDr:v:driver",{"required":true,"focus":true})]}),"onClickOk":function(){var view=this.getContent();if(!view.validate()){return;}
callback(view.getElement("driver").getValue());this.close();},"cmdCancel":true})).open();}
VehicleScheduleEdit_View.prototype.changeProdBase=function(forDate,callback){(new WindowFormModalBS(this.getId()+":changePBase",{"contentHead":"База на "+DateHelper.format(forDate,"d/m/Y"),"content":new View(this.getId()+":changePBase:v",{"elements":[new ProductionBaseEdit(this.getId()+":changePBase:v:prod_base",{"required":true,"focus":true})]}),"onClickOk":function(){var view=this.getContent();if(!view.validate()){return;}
callback(view.getElement("prod_base").getValue());this.close();},"cmdCancel":true})).open();}
VehicleScheduleEdit_View.prototype.addDriverNode=function(n,drvRef){var self=this;var tag=document.createElement("SPAN");tag.setAttribute("class","owner_schedule_driver");tag.setAttribute("driver_id",drvRef.getKey("id"));tag.setAttribute("title",drvRef.getDescr());tag.textContent=drvRef.getDescr().substring(0,this.DRIVER_SHORT_CHAR_COUNT);n.appendChild(tag);EventHelper.add(tag,"click",function(e){self.changeDriverClick(e.target);e.stopPropagation();});return tag;}
VehicleScheduleEdit_View.prototype.addProdBaseNode=function(n,prodBaseRef){var self=this;var tag=document.createElement("SPAN");tag.setAttribute("class","owner_schedule_prod_base");tag.setAttribute("prod_base_id",prodBaseRef.getKey("id"));tag.setAttribute("title",prodBaseRef.getDescr());tag.textContent=prodBaseRef.getDescr().substring(0,this.PROD_BASE_SHORT_CHAR_COUNT);n.appendChild(tag);EventHelper.add(tag,"click",function(e){self.changeProdBaseClick(e.target);e.stopPropagation();});return tag;}
VehicleScheduleEdit_View.prototype.markDayOnNode=function(n){var schedule_date=DateHelper.strtotime(n.getAttribute("dt"));var is_busy=!$(n).hasClass("owner_schedule_shift");var vehicle_id=n.parentNode.getAttribute("vehicle_id");if(!is_busy){this.setSchedule([schedule_date],[vehicle_id],0,0,false,function(){$(n).removeClass("owner_schedule_shift");var day=schedule_date.getDay();if(day==0||day==6){$(n).addClass("owner_schedule_weekend");}
$(n).find(".owner_schedule_driver").eq(0).remove();$(n).find(".owner_schedule_prod_base").eq(0).remove();});}else{var drv_n=$(n).find(".owner_schedule_driver").eq(0);var driver_id=drv_n.attr("driver_id");var drv_ref;if(!driver_id){drv_ref=this.getElement("tmpl_driver").getValue();if(drv_ref&&!drv_ref.isNull()){driver_id=drv_ref.getKey("id");}}else{drv_ref=new RefType({"key":{"id":driver_id},"descr":drv_n.attr("title")});}
var pbase_n=$(n).find(".owner_schedule_prod_base").eq(0);var prod_base_id=pbase_n.attr("prod_base_id");var prod_base_ref;if(!prod_base_id){prod_base_ref=this.getElement("tmpl_prod_base").getValue();if(prod_base_ref&&!prod_base_ref.isNull()){prod_base_id=prod_base_ref.getKey("id");}}else{prod_base_ref=new RefType({"key":{"id":prod_base_id},"descr":pbase_n.attr("title")});}
if(driver_id&&prod_base_id){var self=this;this.setSchedule([schedule_date],[vehicle_id],driver_id,prod_base_id,true,function(){self.addDriverNode(n,drv_ref);self.addProdBaseNode(n,prod_base_ref);$(n).addClass("owner_schedule_shift");$(n).removeClass("owner_schedule_weekend");});}else if(driver_id&&!prod_base_id){var self=this;this.changeProdBase(schedule_date,function(prodBaseRef){self.setSchedule([schedule_date],[vehicle_id],driver_id,prodBaseRef.getKey(),true,function(){self.addProdBaseNode(n,prodBaseRef);$(n).addClass("owner_schedule_shift");$(n).removeClass("owner_schedule_weekend");});});}else if(!driver_id&&prod_base_id){var self=this;this.changeDriver(schedule_date,function(drvRef){self.setSchedule([schedule_date],[vehicle_id],drvRef.getKey(),prod_base_id,true,function(){self.addDriverNode(n,drvRef);$(n).addClass("owner_schedule_shift");$(n).removeClass("owner_schedule_weekend");});});}else if(!driver_id&&!prod_base_id){var self=this;this.changeDriver(schedule_date,function(drvRef){self.changeProdBase(schedule_date,function(prodBaseRef){self.setSchedule([schedule_date],[vehicle_id],drvRef.getKey(),prodBaseRef.getKey(),true,function(){self.addDriverNode(n,drvRef);self.addProdBaseNode(n,prodBaseRef);$(n).addClass("owner_schedule_shift");$(n).removeClass("owner_schedule_weekend");});});});}}}
VehicleScheduleEdit_View.prototype.changeDriverClick=function(changeNode){var self=this;var n=changeNode.parentNode;var schedule_date=DateHelper.strtotime(n.getAttribute("dt"));this.changeDriver(schedule_date,function(drvRef){if($(n.parentNode).find(".owner_schedule_vehicle_mark").first().get()[0].checked){var vehicles=[];var d_nodes=[];var is_busy=!$(n).hasClass("owner_schedule_shift");$(".owner_schedule_vehicle_mark").each(function(index){if(this.checked){var nodes=DOMHelper.getElementsByAttr(n.getAttribute("dt"),this.parentNode.parentNode,"dt",true);if(!nodes||!nodes.length){throw new Error("element with dt tag not found");}
var drv_nodes=DOMHelper.getElementsByAttr("owner_schedule_driver",nodes[0],"class",true);if(!drv_nodes||!drv_nodes.length){drv_nodes=[self.addDriverNode(d_nodes[0],drvRef)];}
d_nodes.push(drv_nodes[0]);vehicles.push(nodes[0].parentNode.getAttribute("vehicle_id"));}});self.setSchedule([schedule_date],vehicles,drvRef.getKey(),0,is_busy,function(){for(i=0;i<d_nodes.length;i++){d_nodes[i].setAttribute("driver_id",drvRef.getKey());d_nodes[i].setAttribute("title",drvRef.getDescr());d_nodes[i].textContent=drvRef.getDescr().substring(0,self.DRIVER_SHORT_CHAR_COUNT);}});}else{var vehicle_id=n.parentNode.getAttribute("vehicle_id");var prod_base_id;var n_chld=DOMHelper.getElementsByAttr("owner_schedule_prod_base",n,"class",true);if(n_chld&&n_chld.length){prod_base_id=n_chld[0].getAttribute("prod_base_id");}
self.setSchedule([schedule_date],[vehicle_id],drvRef.getKey(),prod_base_id,true,function(){changeNode.setAttribute("driver_id",drvRef.getKey());changeNode.setAttribute("title",drvRef.getDescr());changeNode.textContent=drvRef.getDescr().substring(0,self.DRIVER_SHORT_CHAR_COUNT);});}});}
VehicleScheduleEdit_View.prototype.changeProdBaseClick=function(changeNode){var self=this;var n=changeNode.parentNode;var schedule_date=DateHelper.strtotime(n.getAttribute("dt"));this.changeProdBase(schedule_date,function(changeRef){if($(n.parentNode).find(".owner_schedule_vehicle_mark").first().get()[0].checked){throw new Error("multy vehicle mode not implemented");}else{var vehicle_id=n.parentNode.getAttribute("vehicle_id");var driver_id;var n_chld=DOMHelper.getElementsByAttr("owner_schedule_driver",n,"class",true);if(n_chld&&n_chld.length){driver_id=n_chld[0].getAttribute("driver_id");}
self.setSchedule([schedule_date],[vehicle_id],driver_id,changeRef.getKey(),true,function(){changeNode.setAttribute("prod_base_id",changeRef.getKey());changeNode.setAttribute("title",changeRef.getDescr());changeNode.textContent=changeRef.getDescr().substring(0,self.PROD_BASE_SHORT_CHAR_COUNT);});}});}
VehicleScheduleEdit_View.prototype.markDayClick=function(n){if($(n.parentNode).find(".owner_schedule_vehicle_mark").first().get()[0].checked){var schedule_date=DateHelper.strtotime(n.getAttribute("dt"));var is_busy=!$(n).hasClass("owner_schedule_shift");var vehicles=[];var d_nodes=[];$(".owner_schedule_vehicle_mark").each(function(index){if(this.checked){var nodes=DOMHelper.getElementsByAttr(n.getAttribute("dt"),this.parentNode.parentNode,"dt",true);if(!nodes||!nodes.length){throw new Error("element with dt tag not found");}
d_nodes.push(nodes[0]);vehicles.push(nodes[0].parentNode.getAttribute("vehicle_id"));}});if(!is_busy){this.setSchedule([schedule_date],vehicles,0,0,false,function(){for(i=0;i<d_nodes.length;i++){$(d_nodes[i]).removeClass("owner_schedule_shift");var day=schedule_date.getDay();if(day==0||day==6){$(d_nodes[i]).addClass("owner_schedule_weekend");}
$(d_nodes[i]).find(".owner_schedule_driver").eq(0).remove();}});}else{var drv_n=$(n).find(".owner_schedule_driver").eq(0);var driver_id=drv_n.attr("driver_id");var drv_ref;if(!driver_id){drv_ref=this.getElement("tmpl_driver").getValue();if(drv_ref&&!drv_ref.isNull()){driver_id=drv_ref.getKey("id");}}else{drv_ref=new RefType({"key":{"id":driver_id},"descr":drv_n.attr("title")});}
if(driver_id){var self=this;this.setSchedule([schedule_date],vehicles,driver_id,0,true,function(){for(i=0;i<d_nodes.length;i++){self.addDriverNode(d_nodes[i],drv_ref);$(d_nodes[i]).addClass("owner_schedule_shift");$(d_nodes[i]).removeClass("owner_schedule_weekend");}});}else{var self=this;this.changeDriver(schedule_date,function(drvRef){self.setSchedule([schedule_date],vehicles,drvRef.getKey(),0,true,function(){for(i=0;i<d_nodes.length;i++){self.addDriverNode(d_nodes[i],drvRef);$(d_nodes[i]).addClass("owner_schedule_shift");$(d_nodes[i]).removeClass("owner_schedule_weekend");}});});}}}else{this.markDayOnNode(n);}}
VehicleScheduleEdit_View.prototype.setScheduleServerCall=function(vehicles,callback){if(!vehicles.length){if(callback)callback();return;}
var pm=(new VehicleSchedule_Controller()).getPublicMethod("set_schedule");pm.setFieldValue("vehicles",CommonHelper.serialize(vehicles));pm.run({"ok":function(){if(callback){callback();}}});}
VehicleScheduleEdit_View.prototype.setSchedule=function(scheduleDates,vehicles,driverId,prodBaseId,isShift,callback){var vehiles_pm=[];for(var i=0;i<vehicles.length;i++){var days=[];for(var n=0;n<scheduleDates.length;n++){days.push({"date":DateHelper.format(scheduleDates[n],"Y-m-d"),"shift":isShift,"driver_id":driverId,"prod_base_id":prodBaseId});}
vehiles_pm.push({"vehicle_id":vehicles[i],"days":days});}
this.setScheduleServerCall(vehiles_pm,callback);}
VehicleScheduleEdit_View.prototype.isFilterValid=function(){var res=true;var role_id=window.getApp().getServVar("role_id");if(role_id!="vehicle_owner"){var owner_ref=this.getElement("vehicle_owner").getValue();if(!owner_ref||owner_ref.isNull()){this.getElement("vehicle_owner").setNotValid("Не задан владелец");res=false;}}
var period=this.getElement("period");var from=period.getControlFrom().getValue();if(!from||!DateHelper.isValidDate(from)){period.getControlFrom().setNotValid("Неверное значение");res=false;}
var to=period.getControlTo().getValue();if(!to||!DateHelper.isValidDate(to)){period.getControlTo().setNotValid("Неверное значение");res=false;}
return res;}
VehicleScheduleEdit_View.prototype.setTemplateContent=function(cont){var target_n=document.getElementById(this.getId()+":schedule");if(!target_n){throw new Error("Report node not found");}
target_n.innerHTML=cont;}
VehicleScheduleEdit_View.prototype.cmdApplyFilterCont=function(resp,from,to){var m=new ModelXML("VehicleOwnerSchedule_Model",{"fields":[new FieldDate("schedule_date"),new FieldJSON("vehicles_ref"),new FieldJSON("drivers_ref"),new FieldJSON("production_bases_ref")],"data":resp.getModelData("VehicleOwnerSchedule_Model")});var tmpl=window.getApp().getTemplate("VehicleScheduleEdit_View");var week_days=["вс","пн","вт","ср","чт","пт","сб"];var tmpl_opts={"DAY_COUNT":0,"DAYS":[],"ROWS":[]};var loop_dt=new Date(from.getTime());while(loop_dt<=to){var day=loop_dt.getDay();tmpl_opts.DAYS.push({"DAY":loop_dt.getDate(),"DOW":week_days[day],"WEEKEND":(day==6||day==0)});loop_dt=new Date(loop_dt.setDate(loop_dt.getDate()+1));}
tmpl_opts.DAY_COUNT=tmpl_opts.DAYS.length;var old_vh="",old_dt,row;while(m.getNextRow()){var dt=m.getFieldValue("schedule_date");var vh=m.getFieldValue("vehicles_ref").getDescr();var dr=m.getFieldValue("drivers_ref").getDescr();var prb=m.getFieldValue("production_bases_ref").getDescr();if(old_vh!=vh){if(old_dt){old_dt=new Date(old_dt.setDate(old_dt.getDate()+1));while(old_dt<=to){var day=old_dt.getDay();row.DAYS.push({"DATE":DateHelper.format(old_dt,"Y-m-d"),"NO_SHIFT":true,"WEEKEND":(day==6||day==0)});old_dt=new Date(old_dt.setDate(old_dt.getDate()+1));}
tmpl_opts.ROWS.push(row);}
row={"DAYS":[],"VEHICLE":vh,"VEHICLE_ID":m.getFieldValue("vehicles_ref").getKey("id")};loop_dt=new Date(from.getTime());while(loop_dt<dt){var day=loop_dt.getDay();row.DAYS.push({"DATE":DateHelper.format(loop_dt,"Y-m-d"),"NO_SHIFT":true,"WEEKEND":(day==6||day==0)})
loop_dt=new Date(loop_dt.setDate(loop_dt.getDate()+1));}
old_vh=vh;}
if(old_dt){loop_dt=new Date(old_dt.setDate(old_dt.getDate()+1));while(loop_dt<dt){var day=old_dt.getDay();row.DAYS.push({"DATE":DateHelper.format(loop_dt,"Y-m-d"),"NO_SHIFT":true,"WEEKEND":(day==6||day==0)});loop_dt=new Date(loop_dt.setDate(loop_dt.getDate()+1));}}
row.DAYS.push({"DATE":DateHelper.format(dt,"Y-m-d"),"SHIFT":true,"DRIVER":dr,"DRIVER_SHORT":dr.substring(0,this.DRIVER_SHORT_CHAR_COUNT),"DRIVER_ID":m.getFieldValue("drivers_ref").getKey("id"),"PROD_BASE":prb,"PROD_BASE_SHORT":prb?prb.substring(0,this.PROD_BASE_SHORT_CHAR_COUNT):"","PROD_BASE_ID":m.getFieldValue("production_bases_ref").getKey("id")});old_dt=dt;}
if(row){old_dt=new Date(old_dt.setDate(old_dt.getDate()+1));while(old_dt<=to){var day=old_dt.getDay();row.DAYS.push({"DATE":DateHelper.format(old_dt,"Y-m-d"),"NO_SHIFT":true,"WEEKEND":(day==6||day==0)})
old_dt=new Date(old_dt.setDate(old_dt.getDate()+1));}
tmpl_opts.ROWS.push(row);}
var mis_veh=new ModelXML("MissingVehicle_Model",{"fields":[new FieldJSON("vehicles_ref")],"data":resp.getModelData("MissingVehicle_Model")});while(mis_veh.getNextRow()){var row={"DAYS":[],"VEHICLE":mis_veh.getFieldValue("vehicles_ref").getDescr(),"VEHICLE_ID":mis_veh.getFieldValue("vehicles_ref").getKey("id")};var loop_dt=new Date(from.getTime());while(loop_dt<=to){var day=loop_dt.getDay();row.DAYS.push({"DATE":DateHelper.format(loop_dt,"Y-m-d"),"NO_SHIFT":true,"WEEKEND":(day==6||day==0)})
loop_dt=new Date(loop_dt.setDate(loop_dt.getDate()+1));}
tmpl_opts.ROWS.push(row);}
Mustache.parse(tmpl);this.setTemplateContent(Mustache.render(tmpl,tmpl_opts));var self=this;$("#owner_schedule_mark_all").change(function(e){self.markAll(e.target);});$(".owner_schedule_day").click(function(e){self.markDayClick(e.target);});$(".owner_schedule_driver").click(function(e){self.changeDriverClick(e.target);e.stopPropagation();});$(".owner_schedule_prod_base").click(function(e){self.changeProdBaseClick(e.target);e.stopPropagation();});}
VehicleScheduleEdit_View.prototype.cmdApplyFilter=function(){if(!this.isFilterValid()){return;}
var owner_ref;var vehicle_owner_ctrl=this.getElement("vehicle_owner");if(vehicle_owner_ctrl){vehicle_owner_ctrl.setValid();owner_ref=this.getElement("vehicle_owner").getValue();}
var period=this.getElement("period");period.getControlFrom().setValid();period.getControlTo().setValid();var from=period.getControlFrom().getValue();var to=period.getControlTo().getValue();window.setGlobalWait(true);this.setTemplateContent("");var self=this;var pm=(new VehicleSchedule_Controller()).getPublicMethod("get_vehicle_owner_schedule");pm.setFieldValue("date_from",from);pm.setFieldValue("date_to",to);pm.setFieldValue("vehicle_owner_id",owner_ref?owner_ref.getKey():0);pm.run({"ok":function(resp){self.cmdApplyFilterCont(resp,from,to);},"all":function(){window.setGlobalWait(false);}})}
VehicleScheduleEdit_View.prototype.switchTmplDay=function(dayNode){if($(dayNode).hasClass("owner_schedule_shift")){$(dayNode).removeClass("owner_schedule_shift");}else{$(dayNode).addClass("owner_schedule_shift");}} 
function VehicleOwnerTotIncomeRep_View(id,options){options=options||{};var role_id=window.getApp().getServVar("role_id");var self=this;options.addElement=function(){if(role_id!="vehicle_owner"){this.addElement(new VehicleOwnerEdit(id+":vehicle_owner",{"labelClassName":"control-label "+window.getBsCol(1),"editContClassName":"input-group "+window.getBsCol(5),}));}
this.addElement(new EditPeriodMonth(id+":date_from",{"template":window.getApp().getTemplate("EditPeriodMonthFromTo")}));this.addElement(new EditPeriodMonth(id+":date_to",{"template":window.getApp().getTemplate("EditPeriodMonthFromTo")}));this.addElement(new ButtonCmd(id+":cmdApplyFilter",{"caption":"Сформировать","title":"Построить отчет за период","onClick":function(){self.cmdApplyFilter();}}));}
VehicleOwnerTotIncomeRep_View.superclass.constructor.call(this,id,options);}
extend(VehicleOwnerTotIncomeRep_View,View);VehicleOwnerTotIncomeRep_View.prototype.UPDATE_DELAY=2000;VehicleOwnerTotIncomeRep_View.prototype.MONEY_THOUSAND_DELIMETER=" ";VehicleOwnerTotIncomeRep_View.prototype.MONEY_DECIMAL_DELIMETER=",";VehicleOwnerTotIncomeRep_View.prototype.COMMON_ITEM_ID_OFFSET=10000;VehicleOwnerTotIncomeRep_View.prototype.ERR_DATE="Неверое значение";VehicleOwnerTotIncomeRep_View.prototype.isFilterValid=function(){var res=true;var owner_ref=this.getElement("vehicle_owner").getValue();if(!owner_ref||owner_ref.isNull()){this.getElement("vehicle_owner").setNotValid("Не задан владелец");res=false;}else{this.getElement("vehicle_owner").setValid();}
var from_ctrl=this.getElement("date_from");var from=from_ctrl.getDateFrom();if(!DateHelper.isValidDate(from)){from_ctrl.setNotValid(this.ERR_DATE);res=false;}
var to_ctrl=this.getElement("date_to");var to=to_ctrl.getDateFrom();if(!DateHelper.isValidDate(to)){to_ctrl.setNotValid(this.ERR_DATE);res=false;}
if(from.getTime()>to.getTime()){from_ctrl.setNotValid(this.ERR_DATE);to_ctrl.setNotValid(this.ERR_DATE);res=false;}
from_ctrl.setValid();to_ctrl.setValid();return res;}
VehicleOwnerTotIncomeRep_View.prototype.getReportNode=function(){return document.getElementById(this.getId()+":report");}
VehicleOwnerTotIncomeRep_View.prototype.setTemplateContent=function(cont){var target_n=this.getReportNode();if(!target_n){throw new Error("Report node not found");}
target_n.innerHTML=cont;}
VehicleOwnerTotIncomeRep_View.prototype.cmdApplyFilterCont=function(resp,from,to){DOMHelper.show(this.getId()+":repPanel");var m=new ModelXML("VehicleOwnerTotIncomeReport_Model",{"fields":[new FieldInt("veh_id"),new FieldString("veh_plate"),new FieldInt("item_id"),new FieldString("item_name"),new FieldBool("item_is_income"),new FieldBool("item_input"),new FieldBool("item_info"),new FieldDate("period"),new FieldFloat("val"),new FieldInt("runs"),new FieldInt("self_runs"),new FieldFloat("avg_quant"),new FieldInt("avg_runs"),new FieldFloat("balance_beg"),new FieldInt("work_day_count")],"data":resp.getModelData("VehicleOwnerTotIncomeReport_Model")});var m_common=new VehicleTotRepCommonItemList_Model({"data":resp.getModelData("VehicleTotRepCommonItemList_Model")});var m_common_vals=new ModelXML("VehicleTotRepCommonItemValList_Model",{"fields":[new FieldInt("item_id"),new FieldString("item_name"),new FieldDate("period"),new FieldBool("is_income"),new FieldFloat("value")],"data":resp.getModelData("VehicleTotRepCommonItemValList_Model")});var common_vals={};while(m_common_vals.getNextRow()){var item_id=m_common_vals.getFieldValue("item_id")+this.COMMON_ITEM_ID_OFFSET;var period=m_common_vals.getFieldValue("period");var ind=item_id.toString()+period.getMonth().toString()+period.getFullYear().toString();common_vals[ind]=m_common_vals.getFieldValue("value");}
stat_vals={"periods":{},"vehicles":{},"items":{},"val_total":0,"self_run_total":0,"run_total":0,"quant_avg_total":0.0};var period_count=0;var vehicle_count=0;this.m_balance_beg=0;while(m.getNextRow()){var id=m.getFieldValue("veh_id");var period_mon=m.getFieldValue("period");this.m_balance_beg=m.getFieldValue("balance_beg");if(!stat_vals.periods[period_mon]){stat_vals.periods[period_mon]={"vehicles":{},"period":period_mon};period_count++;}
if(!stat_vals.vehicles[id]){stat_vals.vehicles[id]={"runs":0,"quant_avg":0,"runs_self":0,"runs_avg":0.0};vehicle_count++;}
if(!stat_vals.periods[period_mon].vehicles[id]){var runs=m.getFieldValue("runs");var runs_avg=Math.round(runs/m.getFieldValue("work_day_count")*100)/100;var quant_avg=m.getFieldValue("avg_quant");var runs_self=m.getFieldValue("self_runs");stat_vals.periods[period_mon].vehicles[id]={"runs":runs,"quant_avg":quant_avg,"runs_self":runs_self,"runs_avg":runs_avg};stat_vals.vehicles[id].runs+=runs;stat_vals.vehicles[id].quant_avg+=quant_avg;stat_vals.vehicles[id].runs_self+=runs_self;stat_vals.vehicles[id].runs_avg+=runs_avg;}}
stat_vals.period_totals=new Array(period_count);stat_vals.period_runs=new Array(period_count);stat_vals.period_avg_runs=new Array(period_count);stat_vals.period_avg_quant=new Array(period_count);stat_vals.period_self_runs=new Array(period_count);var tmpl_opts={"VEHICLES":[]};tmpl_opts.BALANCE_BEG=this.formatFloatValue(this.m_balance_beg);tmpl_opts.BALANCE_END=this.formatFloatValue(0);tmpl_opts.PERIOD_FROM=DateHelper.format(from,"FF Y");var to_descr=new Date(to.getTime());tmpl_opts.PERIOD_TO=DateHelper.format(new Date(to_descr.setMonth(to_descr.getMonth()+1)),"FF Y");var tmpl=window.getApp().getTemplate("VehicleOwnerTotIncomeRep_View");var per_ind={}
var old_veh_id,old_item_id=0;var cur_veh,cur_row;m.reset();while(m.getNextRow()){var veh_id=m.getFieldValue("veh_id");var item_id=m.getFieldValue("item_id");var per=m.getFieldValue("period");if(old_veh_id!=veh_id){cur_veh={"PLATE":m.getFieldValue("veh_plate"),"ROWS":[],"PERIODS":[],"PERIOD_TOTALS":[],"PERIOD_RUNS":[],"PERIOD_AVG_RUNS":[],"PERIOD_AVG_QUANT":[],"PERIOD_SELF_RUNS":[],"RUN_TOTAL":stat_vals.vehicles[veh_id].runs,"SELF_RUN_TOTAL":stat_vals.vehicles[veh_id].runs_self,"AVG_RUN_TOTAL":Math.round(stat_vals.vehicles[veh_id].runs_avg/period_count*100)/100,"AVG_QUANT_TOTAL":Math.round(stat_vals.vehicles[veh_id].quant_avg/period_count*100)/100,"COL_COUNT":0,"VAL_TOTAL_N":0,"VAL_TOTAL":this.formatFloatValue(0),"TOTAL_TABLE":false,"NOT_TOTAL_TABLE":true};tmpl_opts.VEHICLES.push(cur_veh);var loop_dt=new Date(from.getTime());var ind=0;while(loop_dt<=to){var per_ind_v=loop_dt.getMonth().toString()+loop_dt.getFullYear().toString();if(!per_ind[per_ind_v]){per_ind[per_ind_v]=ind;ind++;}
cur_veh.PERIODS.push({"PERIOD":DateHelper.format(loop_dt,"FF y")});cur_veh.PERIOD_TOTALS.push({"VAL_N":0,"VAL":this.formatFloatValue(0)});cur_veh.PERIOD_RUNS.push({"VAL":0});cur_veh.PERIOD_AVG_RUNS.push({"VAL_N":0,"VAL":0});cur_veh.PERIOD_AVG_QUANT.push({"VAL_N":0,"VAL":0});cur_veh.PERIOD_SELF_RUNS.push({"VAL_N":0,"VAL":0});loop_dt=new Date(loop_dt.setMonth(loop_dt.getMonth()+1));}
old_veh_id=veh_id;}
if(old_item_id!=item_id){var item_name=m.getFieldValue("item_name");var item_id=m.getFieldValue("item_id");var item_input=m.getFieldValue("item_input");var item_is_income=m.getFieldValue("item_is_income");var item_class=item_is_income?"veh_owner_tot_income_income":"veh_owner_tot_income_outcome";var item_info=m.getFieldValue("item_info");cur_row={"ITEM_NAME":item_name,"ITEM_ID":item_id,"ITEM_CLASS":item_class,"ITEM_INPUT":item_input,"ITEM_INFO":item_info,"NOT_COMMON_ITEM":true,"PERIODS":[],"VAL_TOTAL_N":0,"VAL_TOTAL":this.formatFloatValue(0)}
var loop_dt=new Date(from.getTime());while(loop_dt<=to){cur_row.PERIODS.push({"val":0});loop_dt=new Date(loop_dt.setMonth(loop_dt.getMonth()+1));}
cur_veh.ROWS.push(cur_row);old_item_id=item_id;if(!stat_vals.items[item_id]){stat_vals.items[item_id]={"ITEM_NAME":item_name,"ITEM_ID":item_id,"ITEM_INPUT":false,"ITEM_INFO":item_info,"NOT_COMMON_ITEM":true,"ITEM_CLASS":item_class+" veh_owner_tot_income_totals","PERIODS":new Array(period_count),"VAL_TOTAL_N":0,"VAL_TOTAL":this.formatFloatValue(0),"item_is_income":item_is_income}
for(p in stat_vals.periods){var period=stat_vals.periods[p].period;var per_ind_v=per_ind[period.getMonth().toString()+period.getFullYear().toString()];stat_vals.items[item_id].PERIODS[per_ind_v]={"VAL_N":0,"ITEM_ID":item_id,"VEH_ID":undefined,"PERIOD":DateHelper.format(period,"Y-m-d")};}}}
var ind=per.getMonth().toString()+per.getFullYear().toString();var per_ind_v=per_ind[ind];var val=m.getFieldValue("val");var val_k=m.getFieldValue("item_is_income")?1:-1;cur_row.PERIODS[per_ind_v].VAL=this.formatFloatValue(val);cur_row.PERIODS[per_ind_v].ITEM_ID=item_id;cur_row.PERIODS[per_ind_v].VEH_ID=veh_id;cur_row.PERIODS[per_ind_v].PERIOD=DateHelper.format(per,"Y-m-d");stat_vals.items[item_id].PERIODS[per_ind_v].VAL_N+=val;stat_vals.items[item_id].PERIODS[per_ind_v].VAL=this.formatFloatValue(stat_vals.items[item_id].PERIODS[per_ind_v].VAL_N);stat_vals.items[item_id].VAL_TOTAL_N+=val;stat_vals.items[item_id].VAL_TOTAL=this.formatFloatValue(stat_vals.items[item_id].VAL_TOTAL_N);if(!stat_vals.period_totals[per_ind_v]){stat_vals.period_totals[per_ind_v]={"VAL_N":0};stat_vals.period_runs[per_ind_v]={"VAL_N":0};stat_vals.period_avg_runs[per_ind_v]={"VAL_N":0};stat_vals.period_avg_quant[per_ind_v]={"VAL_N":0};stat_vals.period_self_runs[per_ind_v]={"VAL_N":0};}
stat_vals.period_totals[per_ind_v].VAL_N+=val;stat_vals.period_totals[per_ind_v].VAL=this.formatFloatValue(stat_vals.period_totals[per_ind_v].VAL_N);stat_vals.val_total+=val;if(!stat_vals.period_totals[per_ind_v].vehicles||!stat_vals.period_totals[per_ind_v].vehicles[veh_id]){stat_vals.period_totals[per_ind_v].vehicles=stat_vals.period_totals[per_ind_v].vehicles||{};stat_vals.period_totals[per_ind_v].vehicles[veh_id]=true;stat_vals.period_runs[per_ind_v].VAL_N+=stat_vals.periods[per].vehicles[veh_id].runs;stat_vals.period_runs[per_ind_v].VAL=stat_vals.period_runs[per_ind_v].VAL_N;stat_vals.run_total+=stat_vals.periods[per].vehicles[veh_id].runs;stat_vals.quant_avg_total+=stat_vals.periods[per].vehicles[veh_id].quant_avg;stat_vals.period_avg_runs[per_ind_v].VAL_N+=stat_vals.periods[per].vehicles[veh_id].runs_avg;stat_vals.period_avg_quant[per_ind_v].VAL_N+=stat_vals.periods[per].vehicles[veh_id].quant_avg;stat_vals.period_self_runs[per_ind_v].VAL_N+=stat_vals.periods[per].vehicles[veh_id].runs_self;stat_vals.period_self_runs[per_ind_v].VAL=stat_vals.period_self_runs[per_ind_v].VAL_N;stat_vals.self_run_total+=stat_vals.periods[per].vehicles[veh_id].runs_self;}
cur_row.VAL_TOTAL_N=cur_row.VAL_TOTAL_N+val;cur_row.VAL_TOTAL=this.formatFloatValue(cur_row.VAL_TOTAL_N);cur_veh.VAL_TOTAL_N=cur_veh.VAL_TOTAL_N+val;cur_veh.VAL_TOTAL=this.formatFloatValue(cur_veh.VAL_TOTAL_N);cur_veh.PERIOD_TOTALS[per_ind_v].VAL_N=cur_veh.PERIOD_TOTALS[per_ind_v].VAL_N+val;cur_veh.PERIOD_TOTALS[per_ind_v].VAL=this.formatFloatValue(cur_veh.PERIOD_TOTALS[per_ind_v].VAL_N);cur_veh.COL_COUNT=cur_veh.PERIOD_TOTALS.length+2;cur_veh.PERIOD_RUNS[per_ind_v].VAL=stat_vals.periods[per].vehicles[veh_id].runs;cur_veh.PERIOD_AVG_RUNS[per_ind_v].VAL=stat_vals.periods[per].vehicles[veh_id].runs_avg;cur_veh.PERIOD_SELF_RUNS[per_ind_v].VAL=stat_vals.periods[per].vehicles[veh_id].runs_self;cur_veh.PERIOD_AVG_QUANT[per_ind_v].VAL=stat_vals.periods[per].vehicles[veh_id].quant_avg;}
var cur_veh={"PLATE":"Итого","ROWS":[],"PERIODS":new Array(period_count),"PERIOD_TOTALS":stat_vals.period_totals,"PERIOD_RUNS":stat_vals.period_runs,"PERIOD_AVG_RUNS":stat_vals.period_avg_runs,"PERIOD_AVG_QUANT":stat_vals.period_avg_quant,"PERIOD_SELF_RUNS":stat_vals.period_self_runs,"RUN_TOTAL":stat_vals.run_total,"AVG_RUN_TOTAL":0,"AVG_QUANT_TOTAL":0,"SELF_RUN_TOTAL":stat_vals.self_run_total,"VAL_TOTAL":this.formatFloatValue(stat_vals.val_total),"VAL_TOTAL_N":stat_vals.val_total,"TOTAL_TABLE":true,"NOT_TOTAL_TABLE":false};for(p in stat_vals.periods){var period=stat_vals.periods[p].period;var per_ind_v=per_ind[period.getMonth().toString()+period.getFullYear().toString()];cur_veh.PERIODS[per_ind_v]={"PERIOD":DateHelper.format(period,"FF y")};cur_veh.PERIOD_AVG_RUNS[per_ind_v].VAL=Math.round(cur_veh.PERIOD_AVG_RUNS[per_ind_v].VAL_N/vehicle_count*100)/100;cur_veh.AVG_RUN_TOTAL+=cur_veh.PERIOD_AVG_RUNS[per_ind_v].VAL;cur_veh.PERIOD_AVG_QUANT[per_ind_v].VAL=Math.round(cur_veh.PERIOD_AVG_QUANT[per_ind_v].VAL_N/vehicle_count*100)/100;cur_veh.AVG_QUANT_TOTAL+=cur_veh.PERIOD_AVG_QUANT[per_ind_v].VAL;}
cur_veh.AVG_RUN_TOTAL=Math.round(cur_veh.AVG_RUN_TOTAL/vehicle_count*100)/100;cur_veh.AVG_QUANT_TOTAL=Math.round(cur_veh.AVG_QUANT_TOTAL/vehicle_count*100)/100;var income_done=false;for(var it in stat_vals.items){if(!income_done&&!stat_vals.items[it].item_is_income){while(m_common.getNextRow()){if(!m_common.getFieldValue("is_income")){break;}
var item_id=m_common.getFieldValue("id")+this.COMMON_ITEM_ID_OFFSET;var periods=new Array(period_count);var val_tot=0;for(p in stat_vals.periods){var period=stat_vals.periods[p].period;var per_ind_v=per_ind[period.getMonth().toString()+period.getFullYear().toString()];periods[per_ind_v]={"VAL_N":0,"VAL":this.formatFloatValue(0),"ITEM_ID":item_id,"VEH_ID":undefined,"PERIOD":DateHelper.format(period,"Y-m-d")};var ind=item_id.toString()+period.getMonth().toString()+period.getFullYear().toString();if(common_vals[ind]){periods[per_ind_v].VAL=this.formatFloatValue(common_vals[ind]);val_tot+=common_vals[ind];cur_veh.PERIOD_TOTALS[per_ind_v].VAL_N=cur_veh.PERIOD_TOTALS[per_ind_v].VAL_N+common_vals[ind];cur_veh.PERIOD_TOTALS[per_ind_v].VAL=this.formatFloatValue(cur_veh.PERIOD_TOTALS[per_ind_v].VAL_N);stat_vals.val_total+=common_vals[ind];cur_veh.VAL_TOTAL_N+=common_vals[ind];cur_veh.VAL_TOTAL=this.formatFloatValue(cur_veh.VAL_TOTAL_N);}}
cur_veh.ROWS.push({"ITEM_NAME":m_common.getFieldValue("name"),"ITEM_ID":item_id,"ITEM_INPUT":false,"NOT_COMMON_ITEM":false,"COMMON_ITEM":true,"ITEM_CLASS":"veh_owner_tot_income_income veh_owner_tot_income_totals","PERIODS":periods,"VAL_TOTAL_N":val_tot,"VAL_TOTAL":this.formatFloatValue(val_tot)});}
income_done=true;}
cur_veh.ROWS.push(stat_vals.items[it]);}
do{var item_id=m_common.getFieldValue("id")+this.COMMON_ITEM_ID_OFFSET;var periods=new Array(period_count);var val_tot=0;for(p in stat_vals.periods){var period=stat_vals.periods[p].period;var per_ind_v=per_ind[period.getMonth().toString()+period.getFullYear().toString()];periods[per_ind_v]={"VAL_N":0,"ITEM_ID":item_id,"VEH_ID":undefined,"PERIOD":DateHelper.format(period,"Y-m-d")};var ind=item_id.toString()+period.getMonth().toString()+period.getFullYear().toString();if(common_vals[ind]){periods[per_ind_v].VAL=this.formatFloatValue(common_vals[ind]);val_tot+=common_vals[ind];cur_veh.PERIOD_TOTALS[per_ind_v].VAL_N=cur_veh.PERIOD_TOTALS[per_ind_v].VAL_N+common_vals[ind];cur_veh.PERIOD_TOTALS[per_ind_v].VAL=this.formatFloatValue(cur_veh.PERIOD_TOTALS[per_ind_v].VAL_N);stat_vals.val_total+=common_vals[ind];cur_veh.VAL_TOTAL_N+=common_vals[ind];cur_veh.VAL_TOTAL=this.formatFloatValue(cur_veh.VAL_TOTAL_N);}}
cur_veh.ROWS.push({"ITEM_NAME":m_common.getFieldValue("name"),"ITEM_ID":item_id,"ITEM_INPUT":false,"NOT_COMMON_ITEM":false,"COMMON_ITEM":true,"ITEM_CLASS":"veh_owner_tot_income_outcome veh_owner_tot_income_totals","PERIODS":periods,"VAL_TOTAL_N":-val_tot,"VAL_TOTAL":this.formatFloatValue(val_tot)});}while(m_common.getNextRow());tmpl_opts.VEHICLES.push(cur_veh);tmpl_opts.BALANCE_END=this.formatFloatValue(this.m_balance_beg+stat_vals.val_total);Mustache.parse(tmpl);this.setTemplateContent(Mustache.render(tmpl,tmpl_opts));this.updateValue(undefined,undefined,undefined,0,this.getBalanceValues(1));this.updateBalanceEnd(this.getTotalTable());var self=this;var inputs=DOMHelper.getElementsByAttr("veh_owner_tot_income_input",this.getReportNode(),"class",false);for(var i=0;i<inputs.length;i++){var t=inputs[i].textContent;DOMHelper.delNode(inputs[i].firstChild);var ed=DOMHelper.hasClass(inputs[i],"veh_owner_tot_income_input_edit");var is_in=DOMHelper.hasClass(inputs[i],"veh_owner_tot_income_income");var is_tot=DOMHelper.hasClass(inputs[i],"veh_owner_tot_income_totals");var title;if(is_tot&&is_in){title="Итог за месяц по статье доходов, рассчитывается автоматическти по всем ТС за период";}else if(is_tot&&!is_in){title="Итог за месяц по статье расходов, рассчитывается автоматическти по всем ТС за период";}else if(ed&&is_in){title="Статья доходов ТС, редактируется вручную";}else if(!ed&&is_in){title="Статья доходов ТС, рассчитывается автоматическти";}else if(ed&&!is_in){title="Статья расходов ТС, редактируется вручную";}else{title="Статья расходов ТС, рассчитывается автоматическти";}
var row=DOMHelper.getParentByTagName(inputs[i],"tr");var el=new EditString(null,{"cmdClear":false,"editContClassName":window.getBsCol(12),"value":t,"enabled":ed,"title":title,"className":("form-control "+(is_in?"moneyEditable":"moneyEditableNeg")),"events":{"input":!ed?null:(function(vehId,itemId,period,rowInd,cellIndex,tableNode){return function(e){self.updateTotals(tableNode,rowInd,cellIndex);self.updateTotalTable(tableNode,rowInd,cellIndex,itemId);var v=self.parseFloatValue(this.getValue());if(v>0&&DOMHelper.hasClass(this.m_node,"moneyEditableNeg")){v=v*-1;}
self.updateValue(vehId,itemId,period,v,self.getBalanceValues(cellIndex));}})(parseInt(inputs[i].getAttribute("vehicle_id"),10),parseInt(inputs[i].getAttribute("item_id"),10),inputs[i].getAttribute("period"),row.rowIndex-1,inputs[i].cellIndex,DOMHelper.getParentByTagName(inputs[i],"TABLE"))}});this.setInputFormatterOptions(el);el.toDOM(inputs[i]);}
var inputs=DOMHelper.getElementsByAttr("veh_owner_tot_income_common_input",this.getReportNode(),"class",false);for(var i=0;i<inputs.length;i++){var t=inputs[i].textContent;DOMHelper.delNode(inputs[i].firstChild);var is_in=DOMHelper.hasClass(inputs[i],"veh_owner_tot_income_income");if(is_in){title="Общая статья доходов, редактируется вручную";}else{title="Общая статья расходов, редактируется вручную";}
var row_index=DOMHelper.getParentByTagName(inputs[i],"tr").rowIndex-1;var cell_index=inputs[i].cellIndex;var item_id=parseInt(inputs[i].getAttribute("item_id"),10);var period=inputs[i].getAttribute("period");var el=new EditString(null,{"cmdClear":false,"editContClassName":window.getBsCol(12),"value":t,"title":title,"className":("form-control "+(is_in?"moneyEditable":"moneyEditableNeg")),"events":{"input":(function(itemId,period,rowIndex,cellIndex){return function(e){var tot_table=self.getTotalTable();self.updateTotals(tot_table,rowIndex,cellIndex);self.updateBalanceEnd(tot_table);var v=self.parseFloatValue(this.getValue());if(v>0&&DOMHelper.hasClass(this.m_node,"moneyEditableNeg")){v=v*-1;}
self.updateCommonValue(itemId,period,v,self.getBalanceValues(cellIndex));}})(item_id,period,row_index,cell_index)}});this.setInputFormatterOptions(el);el.toDOM(inputs[i]);}}
VehicleOwnerTotIncomeRep_View.prototype.setInputFormatterOptions=function(el){el.m_formatterOptions={"numeral":true,"numeralDecimalScale":2,"numeralDecimalMark":this.MONEY_DECIMAL_DELIMETER,"numeralThousandsGroupStyle":"thousand","delimiter":this.MONEY_THOUSAND_DELIMETER,"rawValueTrimPrefix":true,"onValueChanged":(function(elem){return function(e){if(e.target.rawValue>0&&elem&&elem.m_cleave&&DOMHelper.hasClass(elem.m_node,"moneyEditableNeg")){elem.m_cleave.setRawValue(e.target.rawValue*-1);}}})(el)};}
VehicleOwnerTotIncomeRep_View.prototype.getBalanceValues=function(fromCellIndex){var balance_values={};var tot_tb=DOMHelper.getElementsByAttr("veh_owner_tot_income_total_table",this.getNode(),"class",true);var tfeet=tot_tb[0].getElementsByTagName('tfoot');var tbody=tot_tb[0].getElementsByTagName('tbody');var bal=this.m_balance_beg;var tot_cells=tfeet[0].rows[0].cells;for(var col=fromCellIndex;col<tot_cells.length-1;col++){var p=DateHelper.strtotime(tbody[0].rows[0].cells[col].getAttribute("period"));if(!DateHelper.isValidDate(p)){throw new Error('Not valid date');}
for(var body_r=0;body_r<tbody[0].rows.length;body_r++){if(DOMHelper.hasClass(tbody[0].rows[body_r].cells[col],"veh_owner_tot_income_info")){continue;}
var sn=1;if(DOMHelper.hasClass(tbody[0].rows[body_r].cells[col],"veh_owner_tot_income_outcome")){sn=-1;}
var item_v=this.getNodeFloatValue(tbody[0].rows[body_r].cells[col])*sn;bal+=item_v;}
p=DateHelper.monthEnd(p);p.setDate(p.getDate()+1);balance_values[DateHelper.format(p,"Y-m-d")]=bal;}
return balance_values;}
VehicleOwnerTotIncomeRep_View.prototype.updateValueCont=function(callBack){var pm=(new VehicleTotRepItemValue_Controller()).getPublicMethod("update_values");pm.setFieldValue("values",CommonHelper.serialize(this.m_updateValues["values"]));pm.setFieldValue("common_values",CommonHelper.serialize(this.m_updateValues.common_values));pm.setFieldValue("balance_vehicle_owner_id",this.m_updateValues.balance_vehicle_owner_id);pm.setFieldValue("balance_values",CommonHelper.serialize(this.m_updateValues.balance_values));pm.run({"ok":function(){if(callBack){callBack();}}});this.m_updateValuesTimeoutID=undefined;this.m_updateValues=undefined;}
VehicleOwnerTotIncomeRep_View.prototype.formatFloatValue=function(number){return CommonHelper.numberFormat(number,2,this.MONEY_DECIMAL_DELIMETER,this.MONEY_THOUSAND_DELIMETER);}
VehicleOwnerTotIncomeRep_View.prototype.parseFloatValue=function(valueForParse){if(!valueForParse){return 0.0;}
return parseFloat(valueForParse.replaceAll(this.MONEY_THOUSAND_DELIMETER,"").replaceAll(this.MONEY_DECIMAL_DELIMETER,"."));}
VehicleOwnerTotIncomeRep_View.prototype.getNodeFloatValue=function(node){var inputs=node.getElementsByTagName("input");if(inputs&&inputs.length){node=inputs[0];}
var f=0;if(node&&node.rawValue!=undefined){f=node.rawValue;}else{var v_for_parse=0;if(node.value!=undefined){v_for_parse=node.value;}else if(node.textContent){v_for_parse=node.textContent;}
f=parseFloat(v_for_parse.replaceAll(this.MONEY_THOUSAND_DELIMETER,"").replaceAll(this.MONEY_DECIMAL_DELIMETER,"."));}
if(isNaN(f)){f=0;}else if(f<0){f=f*-1.0;}
return f;}
VehicleOwnerTotIncomeRep_View.prototype.setTotalValue=function(node,val){node.textContent=this.formatFloatValue(val);}
VehicleOwnerTotIncomeRep_View.prototype.setInputValue=function(node,val){var inputs=node.getElementsByTagName("input");if(inputs&&inputs.length){inputs[0].value=this.formatFloatValue(val);}}
VehicleOwnerTotIncomeRep_View.prototype.setRowTotal=function(tbody,rowInd,k){var row_tot=0;for(var c=0;c<tbody.rows[rowInd].cells.length-1;c++){row_tot+=this.getNodeFloatValue(tbody.rows[rowInd].cells[c]);}
this.setTotalValue(tbody.rows[rowInd].cells[tbody.rows[rowInd].cells.length-1],row_tot*k);}
VehicleOwnerTotIncomeRep_View.prototype.setColTotal=function(tbody,tfoot,colInd){var col_tot=0;for(var r=0;r<tbody.rows.length;r++){var k=DOMHelper.hasClass(tbody.rows[r].cells[colInd],"veh_owner_tot_income_outcome")?-1:1;col_tot+=this.getNodeFloatValue(tbody.rows[r].cells[colInd])*k;}
this.setTotalValue(tfoot.rows[0].cells[colInd],col_tot);}
VehicleOwnerTotIncomeRep_View.prototype.updateTotals=function(table,rowInd,colInd){var tbodies=table.getElementsByTagName('tbody');if(!tbodies||!tbodies.length){return;}
var tbody=tbodies[0];var tfeet=table.getElementsByTagName('tfoot');if(!tfeet||!tfeet.length){return;}
var tfoot=tfeet[0];var k=DOMHelper.hasClass(tbody.rows[rowInd].cells[colInd],"veh_owner_tot_income_outcome")?-1:1;this.setColTotal(tbody,tfoot,colInd,k);this.setRowTotal(tbody,rowInd,k);this.setColTotal(tbody,tfoot,tbody.rows[rowInd].cells.length-1,1);}
VehicleOwnerTotIncomeRep_View.prototype.getTotalTable=function(){var tot_tables=DOMHelper.getElementsByAttr("veh_owner_tot_income_total_table",this.getNode(),"class",false);if(!tot_tables||!tot_tables.length){return;}
return tot_tables[0];}
VehicleOwnerTotIncomeRep_View.prototype.updateTotalTable=function(table,rowInd,colInd,itemId){var tbodies=table.getElementsByTagName('tbody');if(!tbodies||!tbodies.length){return;}
var tbody=tbodies[0];var k=DOMHelper.hasClass(tbody.rows[rowInd].cells[colInd],"veh_owner_tot_income_outcome")?-1:1;var tot_table=this.getTotalTable();var tot_table_tbodies=tot_table.getElementsByTagName('tbody');if(!tot_table_tbodies||!tot_table_tbodies.length){return;}
var vh_tables=DOMHelper.getElementsByAttr("veh_owner_tot_income_veh_table",this.getNode(),"class",false);var item_tot=0;for(var t=0;t<vh_tables.length;t++){var vh_tbodies=vh_tables[t].getElementsByTagName('tbody');if(!vh_tbodies||!vh_tbodies.length){continue;}
item_tot+=this.getNodeFloatValue(vh_tbodies[0].rows[rowInd].cells[colInd]);}
var tot_table_row=-1;for(var r=0;r<tot_table_tbodies[0].rows.length;r++){if(tot_table_tbodies[0].rows[r].cells[colInd].getAttribute("item_id")==itemId){tot_table_row=r;break;}}
if(tot_table_row>=0){this.setInputValue(tot_table_tbodies[0].rows[r].cells[colInd],item_tot*k);this.updateTotals(tot_table,r,colInd);this.updateBalanceEnd(tot_table);}}
VehicleOwnerTotIncomeRep_View.prototype.updateBalanceEnd=function(totTable){var tot_table_tfeet=totTable.getElementsByTagName('tfoot');if(!tot_table_tfeet||!tot_table_tfeet.length){return;}
var turn_over=0;var tbody=totTable.getElementsByTagName('tbody');var item_info_tot=0;for(var body_r=0;body_r<tbody[0].rows.length;body_r++){for(var body_c=1;body_c<tbody[0].rows[body_r].cells.length-1;body_c++){if(!DOMHelper.hasClass(tbody[0].rows[body_r].cells[body_c],"veh_owner_tot_income_info")){var sn=1;if(DOMHelper.hasClass(tbody[0].rows[body_r].cells[body_c],"veh_owner_tot_income_outcome")){sn=-1;}
var item_v=this.getNodeFloatValue(tbody[0].rows[body_r].cells[body_c])*sn;turn_over+=item_v;}}}
document.getElementById("VehicleOwnerTotIncomeRep:balance_end").value=this.formatFloatValue(this.m_balance_beg+turn_over);}
VehicleOwnerTotIncomeRep_View.prototype.updateValueInit=function(){if(!this.m_updateValues){var owner_ctrl=this.getElement("vehicle_owner").getValue();if(!owner_ctrl||owner_ctrl.isNull()){throw new Error("Не задан владелец!");}
var owner_id=owner_ctrl.getKey();this.m_updateValues={"values":{},"common_values":{},"balance_values":{},"balance_vehicle_owner_id":owner_id};}}
VehicleOwnerTotIncomeRep_View.prototype.updateValueStartTimer=function(){if(this.m_updateValuesTimeoutID){return;}
var self=this;this.m_updateValuesTimeoutID=setTimeout(function(){self.updateValueCont();},this.UPDATE_DELAY);}
VehicleOwnerTotIncomeRep_View.prototype.updateValue=function(vehId,itemId,period,val,balanceValues){this.updateValueInit();if(vehId&&itemId&&period){var key=vehId.toString()+itemId.toString()+period.toString();this.m_updateValues["values"][key]={"vehicle_id":vehId,"item_id":itemId,"period":period,"val":val};}
this.m_updateValues.balance_values=balanceValues;this.updateValueStartTimer();}
VehicleOwnerTotIncomeRep_View.prototype.updateCommonValue=function(itemId,period,val,balanceValues){itemId=itemId-this.COMMON_ITEM_ID_OFFSET;this.updateValueInit();var key=period.toString();var key=itemId.toString()+period.toString();this.m_updateValues.common_values[key]={"period":period,"item_id":itemId,"val":val};this.m_updateValues.balance_values=balanceValues;this.updateValueStartTimer();}
VehicleOwnerTotIncomeRep_View.prototype.cmdApplyFilterSaved=function(){var vehicle_owner_ctrl=this.getElement("vehicle_owner");vehicle_owner_ctrl.setValid();var owner_ref=this.getElement("vehicle_owner").getValue();var owner_id=owner_ref.getKey();window.setGlobalWait(true);this.setTemplateContent("");var self=this;var from=this.getElement("date_from").getDateFrom();var to=this.getElement("date_to").getDateFrom();var pm=(new VehicleOwner_Controller()).getPublicMethod("get_tot_income_report");pm.setFieldValue("date_from",from);pm.setFieldValue("date_to",to);pm.setFieldValue("vehicle_owner_id",owner_id);pm.run({"ok":function(resp){self.cmdApplyFilterCont(resp,from,to);},"all":function(){window.setGlobalWait(false);}})}
VehicleOwnerTotIncomeRep_View.prototype.cmdApplyFilter=function(){if(!this.isFilterValid()){return;}
if(this.m_updateValuesTimeoutID){var self=this;clearTimeout(this.m_updateValuesTimeoutID);this.updateValueCont(function(){self.cmdApplyFilterSaved();});}else{this.cmdApplyFilterSaved();}} 
function TaskImportanceLevelEdit(id,options){options=options||{};options.model=new TaskImportanceLevel_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Уровень важности:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new TaskImportanceLevel_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");TaskImportanceLevelEdit.superclass.constructor.call(this,id,options);}
extend(TaskImportanceLevelEdit,EditSelectRef); 
function Client1cEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Контрагент 1с:";}
if(options.title!=""){options.title=options.title||"Ссылка на контрагента 1с";}
if(options.placeholder!=""){options.placeholder=options.placeholder||"ИНН/наименование контрагента";}
options.cmdInsert=false;options.keyIds=options.keyIds||["ref_1c"];options.selectWinClass=null;options.selectDescrIds=null;options.editWinClass=null;options.acMinLengthForQuery=(options.acMinLengthForQuery!=undefined)?options.acMinLengthForQuery:1;options.acController=new Client1c_Controller();options.acPublicMethod=options.acController.getPublicMethod("complete");options.acModel=new ModelJSON("Client1cList_Model",{"fields":["name","inn","ref"]});options.acPatternFieldId=options.acPatternFieldId||"search";options.acKeyFields=options.acKeyFields||[options.acModel.getField("ref")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name"),options.acModel.getField("inn")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";Client1cEdit.superclass.constructor.call(this,id,options);}
extend(Client1cEdit,EditRef); 
function BuhRBP1cEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Статья рбп 1с:";}
if(options.title!=""){options.title=options.title||"Ссылка на статью расходов будущих периодов 1с";}
if(options.placeholder!=""){options.placeholder=options.placeholder||"Наименование статьи в 1с";}
options.cmdInsert=false;options.keyIds=options.keyIds||["name"];options.selectWinClass=null;options.selectDescrIds=null;options.editWinClass=null;options.acMinLengthForQuery=(options.acMinLengthForQuery!=undefined)?options.acMinLengthForQuery:1;options.acController=new BuhRBP1c_Controller();options.acPublicMethod=options.acController.getPublicMethod("complete");options.acModel=new ModelJSON("BuhRBP1cList_Model",{"fields":["name","date_to","date_from","total"]});const self=this;options.onSelect=function(f){const n=self.getNode();n.setAttribute("date_from",f.date_from.getValue());n.setAttribute("date_to",f.date_to.getValue());n.setAttribute("total",f.total.getValue());}
options.acPatternFieldId=options.acPatternFieldId||"search";options.acKeyFields=options.acKeyFields||[options.acModel.getField("name")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name"),options.acModel.getField("date_from"),options.acModel.getField("date_to")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";BuhRBP1cEdit.superclass.constructor.call(this,id,options);}
extend(BuhRBP1cEdit,EditRef); 
function Firm1cEdit(id,options){options=options||{};options.model=new Firm1cList_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Организация:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("descr")];var contr=new Firm1c_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");Firm1cEdit.superclass.constructor.call(this,id,options);}
extend(Firm1cEdit,EditSelectRef); 
function ChatStatusEdit(id,options){options=options||{};options.model=new ChatStatus_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Статус:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new ChatStatus_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");ChatStatusEdit.superclass.constructor.call(this,id,options);}
extend(ChatStatusEdit,EditSelectRef); 
function ShipmentDocRep_View(id,options){options=options||{};let self=this;options.addElement=function(){this.addElement(new EditPeriodShift(id+":period",{"onChange":function(dateTime){window.setGlobalWait(true);self.cmdApplyFilter(function(){window.setGlobalWait(false);},true);}}));}
ShipmentDocRep_View.superclass.constructor.call(this,id,options);this.cmdApplyFilter();}
extend(ShipmentDocRep_View,View);ShipmentDocRep_View.prototype.getDocContNode=function(){return document.getElementById(this.getId()+":report");}
ShipmentDocRep_View.prototype.setTemplateContent=function(cont){var target_n=this.getDocContNode();if(!target_n){throw new Error("Doc container node not found");}
target_n.innerHTML=cont;}
ShipmentDocRep_View.prototype.cmdApplyFilterCont=function(model,callback){let templateOptions={"VEHICLES":[],"ID":this.getId()};while(model.getNextRow()){let veh=model.getFieldValue("vehicles_ref");let dr=model.getFieldValue("drivers_ref");templateOptions.VEHICLES.push({"ID":this.getId(),"VEHICLE_SCHEDULE_ID":model.getFieldValue("id"),"VEHICLE_DESCR":veh.getDescr(),"DRIVER_DESCR":dr.getDescr()});}
let tmpl=window.getApp().getTemplate("ShipmentDocRep_View");Mustache.parse(tmpl);this.setTemplateContent(Mustache.render(tmpl,templateOptions));let self=this;let cmdCont=document.getElementById(this.getId()+":cmdFetchShipmentList");(new ButtonCmd(this.getId()+":cmdFetchShipmentList",{"caption":"Показать отгрузки","title":"Показать все отгрузки за период по выбранным экипажам","onClick":function(){self.cmdFetchShipmentList();}})).toDOMInstead(cmdCont);window.getApp().addCollapseOnClick();DOMHelper.show(this.getId()+":repPanel");if(callback){callback();}}
ShipmentDocRep_View.prototype.cmdFetchShipmentList=function(){let ids=[];let inputs=DOMHelper.getElementsByAttr("schedule_select",this.getNode(),"class",false,"input");for(let i=0;i<inputs.length;i++){if(!inputs[i].checked){continue;}
ids.push(parseInt(inputs[i].getAttribute("vehicle_schedule_id"),10));}
if(!ids.length){throw new Error("Не выбран ни один экипаж");}
let contr=new Shipment_Controller();let pm=contr.getPublicMethod("get_list_for_doc");let id=this.getId()+":doc_grid";let model=new ShipmentForDocList_Model();if(this.m_grid){this.m_grid.delDOM();}
let self=this;this.m_grid=new GridAjx(id,{"filters":[{field:"vehicle_schedule_id",sign:"incl",val:ids.join(";")}],"model":model,"readPublicMethod":pm,"controller":contr,"editInline":false,"editWinClass":null,"commands":null,"popUpMenu":null,"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:ship_date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("ship_date_time")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:vehicles_ref",{"value":"ТС","columns":[new GridColumnRef({"field":model.getField("vehicles_ref"),"ctrlCalss":VehicleEdit,"searchOptions":{"field":new FieldInt("vehicle_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:drivers_ref",{"value":"Водитель","columns":[new GridColumnRef({"field":model.getField("drivers_ref"),"ctrlCalss":DriverEditRef,"searchOptions":{"field":new FieldInt("driver_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:clients_ref",{"value":"Клиент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlCalss":ClientEdit,"searchOptions":{"field":new FieldInt("client_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:destinations_ref",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("destinations_ref"),"ctrlCalss":DestinationEdit,"searchOptions":{"field":new FieldInt("destination_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:concrete_types_ref",{"value":"Марка","columns":[new GridColumnRef({"field":model.getField("concrete_types_ref"),"ctrlCalss":ConcreteTypeEdit,"searchOptions":{"field":new FieldInt("concrete_type_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:quant",{"value":"Объем","columns":[new GridColumnFloat({"field":model.getField("quant"),"precision":"4"})]}),new GridCellHead(id+":grid:head:docs",{"value":"Документы","columns":[new GridColumn({"formatFunction":function(fields,cell){let btnPrintPL=new PrintPutevoiListBtn(self.getId()+":doc_grid:printPL",{"cmd":"print"});btnPrintPL.m_grid=self.m_grid;cell.getNode().appendChild(btnPrintPL.m_node);let btnPrintTTN=new PrintTTNBtn(self.getId()+":doc_grid:printTTN",{"cmd":"print"});btnPrintTTN.m_grid=self.m_grid;cell.getNode().appendChild(btnPrintTTN.m_node);return"";}})]})]})]}),"pagination":null,"autoRefresh":true,"refreshInterval":null,"rowSelect":false,"focus":false});this.m_grid.toDOM(document.getElementById(this.getId()+":doc_grid_cont"));}
ShipmentDocRep_View.prototype.cmdFetchShipmentListOld=function(){let ids=[];let inputs=DOMHelper.getElementsByAttr("schedule_select",this.getNode(),"class",false,"input");for(let i=0;i<inputs.length;i++){if(!inputs[i].checked){continue;}
ids.push(parseInt(inputs[i].getAttribute("vehicle_schedule_id"),10));}
if(!ids.length){throw new Error("Не выбран ни один экипаж");}
let contr=new Shipment_Controller();let pm=contr.getPublicMethod("get_list_for_doc");pm.setFieldValue(contr.PARAM_COND_FIELDS,"id");pm.setFieldValue(contr.PARAM_COND_SGNS,"incl");pm.setFieldValue(contr.PARAM_COND_VALS,ids.join(";"));pm.setFieldValue(contr.PARAM_COND_ICASE,"0");let self=this;pm.run({"ok":function(resp){self.cmdFetchShipmentListCont(resp.getModel("VehicleScheduleList_Model"));}});}
ShipmentDocRep_View.prototype.cmdApplyFilter=function(callback){let d=this.getElement("period").getDateFrom();let contr=new VehicleSchedule_Controller();let pm=contr.getPublicMethod("get_list");pm.setFieldValue(contr.PARAM_COND_FIELDS,"schedule_date");pm.setFieldValue(contr.PARAM_COND_SGNS,"e");pm.setFieldValue(contr.PARAM_COND_VALS,DateHelper.format(d,"Y-m-dTH:i:s"));pm.setFieldValue(contr.PARAM_COND_ICASE,"0");pm.setFieldValue(contr.PARAM_ORD_FIELDS,"vehicles_ref"+contr.PARAM_FIELD_SEP_VAL+"drivers_ref");let self=this;pm.run({"ok":function(resp){self.cmdApplyFilterCont(resp.getModel("VehicleScheduleList_Model"),callback);}})} 
function InsuranceIssuerEdit(id,options){options=options||{};if(options.labelCaption==undefined){options.labelCaption="Страховщик:";}
options.maxLength=250;options.cmdAutoComplete=true;options.acMinLengthForQuery=1;options.acController=new Vehicle_Controller();options.acModel=new InsuranceIssuerList_Model();options.acPublicMethod=options.acController.getPublicMethod("complete_insurance_issuers")
options.acPatternFieldId=options.acPatternFieldId||"issuer";options.acKeyFields=options.acKeyFields||[options.acModel.getField("issuer")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("issuer")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";InsuranceIssuerEdit.superclass.constructor.call(this,id,options);}
extend(InsuranceIssuerEdit,EditString); 
function LeasorEdit(id,options){options=options||{};if(options.labelCaption==undefined){options.labelCaption="Лизингодатель:";}
options.maxLength=250;options.cmdAutoComplete=true;options.acMinLengthForQuery=1;options.acController=new Vehicle_Controller();options.acModel=new LeasorList_Model();options.acPublicMethod=options.acController.getPublicMethod("complete_leasors")
options.acPatternFieldId=options.acPatternFieldId||"leasor";options.acKeyFields=options.acKeyFields||[options.acModel.getField("leasor")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("leasor")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";LeasorEdit.superclass.constructor.call(this,id,options);}
extend(LeasorEdit,EditString); 
function ClientContract1cEdit(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Договор 1с";}
if(options.title!=""){options.title=options.title||"Договор 1с";}
if(options.placeholder!=""){options.placeholder=options.placeholder||"Договор 1с";}
options.cmdInsert=false;options.keyIds=options.keyIds||["ref"];options.selectWinClass=null;options.selectDescrIds=null;options.editWinClass=null;options.acMinLengthForQuery=(options.acMinLengthForQuery!=undefined)?options.acMinLengthForQuery:1;options.acController=new ClientContract1c_Controller();options.acPublicMethod=options.acController.getPublicMethod("complete_from_1c");options.acModel=new ModelJSON("Contract1cList_Model",{"fields":["name","ref"]});options.acPatternFieldId=options.acPatternFieldId||"search";options.acKeyFields=options.acKeyFields||[options.acModel.getField("ref")];options.acDescrFields=[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";ClientContract1cEdit.superclass.constructor.call(this,id,options);}
extend(ClientContract1cEdit,EditRef);ClientContract1cEdit.prototype.setClientRef1c=function(clientRef1c){const pm=this.getAutoComplete().getPublicMethod("complete_from_1c");pm.setFieldValue("client_ref_1c",clientRef1c);} 
function AttachmentManager(options){this.m_view=options.view;this.m_elementId=options.elementId||"id";this.m_dataType=options.dataType;this.m_attachmentViewName=options.attachmentViewName;}
AttachmentManager.prototype.getRefAsStr=function(){var id;if(typeof(this.m_elementId)=="string"){id=this.m_view.getElement(this.m_elementId).getValue();}else{id=this.m_elementId();}
if(!id){throw new Error("AttachmentManager.getRefAsStr: ID not defined");}
return CommonHelper.serialize(new RefType({"keys":{"id":id},"dataType":this.m_dataType}));}
AttachmentManager.prototype.downloadAttachment=function(fileId){var pm=(new Attachment_Controller()).getPublicMethod("get_file");pm.setFieldValue("ref",this.getRefAsStr());pm.setFieldValue("content_id",fileId);pm.setFieldValue("inline",1);var offset=0;var h=$(window).width()/3*2;var left=$(window).width()/2;var w=left-20;window.getApp().openHrefDownload(window,pm,"ViewXML","noopener=1,location=0,menubar=0,status=0,titlebar=0,top="+(50+offset)+",left="+(left+offset)+",width="+w+",height="+h);}
AttachmentManager.prototype.addAttachmentCont=function(fl,callback){var self=this;var pm=(new Attachment_Controller()).getPublicMethod("add_file");pm.setFieldValue("ref",this.getRefAsStr());pm.setFieldValue("content_info",CommonHelper.serialize({"id":fl.file_id,"name":"","size":0}));pm.setFieldValue("content_data",[fl]);pm.run({"ok":function(resp){var m=resp.getModel("Preview_Model");var preview_data;if(m&&m.getNextRow()){preview_data=m.getFieldValue("cont");}
self.setAttachmentUploaded(fl,preview_data);if(callback){callback();}},"fail":function(resp,errCode,errStr){self.setAttachmentUploadError(fl);throw new Error("Ошибка загрузки файла: "+errStr);}});}
AttachmentManager.prototype.addAttachment=function(fileId,callback){var list=this.m_view.getElement(this.m_attachmentViewName).getFiles();if(!list||!list.length)return;var fl=list[list.length-1];if(!this.m_view.getCmd||this.m_view.getCmd()!="insert"){this.addAttachmentCont(fl,callback);}
else{var self=this;this.m_view.getControlOK().setEnabled(false);this.m_view.getControlSave().setEnabled(false);this.m_view.onSave(function(){self.addAttachmentCont(fl,callback);},null,function(){self.m_view.getControlOK().setEnabled(true);self.m_view.getControlSave().setEnabled(true);});}}
AttachmentManager.prototype.setAttachmentUploaded=function(fl,previewData){var n=document.getElementById(fl.file_id+"-pic");if(n){n.className="glyphicon glyphicon-ok";n.title="Файл прикреплен к документу";}
var n=document.getElementById(fl.file_id+"-href");if(n){n.setAttribute("file_uploaded","true");}
var n=document.getElementById(fl.file_id+"-del");if(n){n.setAttribute("file_uploaded","true");}
fl.uploaded=true;var n=document.getElementById(fl.file_id+"-preview");if(n&&previewData){n.setAttribute("src","data:image/png;base64, "+previewData);}}
AttachmentManager.prototype.setAttachmentUploadError=function(fl){var n=document.getElementById(fl.file_id+"-pic");if(n){n.className="glyphicon glyphicon-remove";n.title="Ошибка загрузки файла";}}
AttachmentManager.prototype.deleteAttachmentCont=function(fileId,callBack){var pm=(new Attachment_Controller()).getPublicMethod("delete_file");pm.setFieldValue("ref",this.getRefAsStr());pm.setFieldValue("content_id",fileId);pm.run({"ok":function(){if(callBack){callBack();}}});}
AttachmentManager.prototype.deleteAttachment=function(fileId,callBack){var self=this;WindowQuestion.show({"text":"Удалить файл?","cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){self.deleteAttachmentCont(fileId,callBack);}}});} 
function ConnectElkonCheck(){this.m_values={};this.m_refreshInterval=0;this.activate();}
ConnectElkonCheck.prototype.DEF_REFRESH=5*60;ConnectElkonCheck.prototype.DEF_REFRESH_AJX=10*60;ConnectElkonCheck.prototype.m_lastValues;ConnectElkonCheck.prototype.PIC_OK="./img/dot_green.png";ConnectElkonCheck.prototype.PIC_ERR="./img/dot_red.png";ConnectElkonCheck.prototype.TITLE_OK="Есть соединение с Elkon";ConnectElkonCheck.prototype.TITLE_ERR="Ошибка соединения с Elkon";ConnectElkonCheck.prototype.addProductionSite=function(id,initValue){this.setValue(id,initValue);}
ConnectElkonCheck.prototype.setRefreshInterval=function(newInterval){var self=this;this.m_refreshInterval=newInterval;if(newInterval>0){this.m_timer=setInterval(function(){self.refresh();},this.m_refreshInterval);}else if(this.m_timer!==undefined){clearInterval(this.m_timer);this.m_timer=undefined;}}
ConnectElkonCheck.prototype.activate=function(){const evSrv=window.getApp().getAppSrv();if(evSrv&&evSrv.connActive()){const self=this;this.m_srvEvents={events:[{"id":"ConnectElkonCheck.update"}],onEvent:function(params){self.onPingElkonChange(params);},onClose:function(params){self.srvEventsOnClose(params)},onSubscribed:function(){self.setRefreshInterval(0);}};this.setRefreshInterval(this.DEF_REFRESH*1000);}else{this.setRefreshInterval(this.DEF_REFRESH_AJX*1000);}
this.refresh();}
ConnectElkonCheck.prototype.deactivate=function(){if(this.m_timer){clearInterval(this.m_timer);this.m_timer=undefined;}}
ConnectElkonCheck.prototype.refresh=function(){const self=this;(new ConnectElkonCheck_Controller()).getPublicMethod("connected").run({"ok":function(resp){const modelData=resp.getModelData("ConnectElkon_Model");const fPong=new FieldBool("pong");const fProdSiteId=new FieldString("production_site_id");const model=new ModelXML("ConnectElkon_Model",{data:modelData,fields:[fPong,fProdSiteId]});while(model.getNextRow()){const id=model.getFieldValue("production_site_id");const pong=model.getFieldValue("pong");self.setValue(id,pong);}}});}
ConnectElkonCheck.prototype.setValue=function(id,pong){const idStr=id.toString();if(!this.m_values[idStr]){const imgNode=document.getElementById("production_site_conn_img_"+idStr);if(imgNode){this.m_values[idStr]={node:imgNode,lastValue:!pong};}}
if(this.m_values[idStr]&&this.m_values[idStr].lastValue!=pong){this.m_values[idStr].node.setAttribute("src",pong?this.PIC_OK:this.PIC_ERR);this.m_values[idStr].node.setAttribute("title",pong?this.TITLE_OK:this.TITLE_ERR);this.m_values[id].lastValue=pong;}}
ConnectElkonCheck.prototype.onPingElkonChange=function(params){if(json.params&&json.params.pong!==undefined&&json.params.production_site_id!==undefined){this.setValue(json.params.production_site_id.toString(),json.params.pong);}}
ConnectElkonCheck.prototype.srvEventsOnClose=function(message){if(message&&message.code>1000){this.setRefreshInterval(this.DEF_REFRESH*1000);}} 
LoginList_View.prototype.HEAD_TITLE="Лог активности пользователей";Login_View.prototype.ER_LOGIN="Неправильный логин или пароль.";Login_View.prototype.CTRL_USER_LAB="Пользователь (email)";Login_View.prototype.CTRL_PWD_LAB="Пароль";PasswordRecovery_View.prototype.SUBMITED="Новый пароль направлен на Вашу электронную почту.";UserList_View.prototype.HEAD_TITLE="Пользолватели";UserProfile_View.prototype.HEAD_TITLE="Профиль пользователя";ShipmentTimeNormList_View.prototype.HEAD_TITLE="Нормы времени отгрузки";ClientComeFromList_View.prototype.HEAD_TITLE="Источники обращения клиентов";ClientTypeList_View.prototype.HEAD_TITLE="Виды клиентов";DriverList_View.prototype.HEAD_TITLE="Водители";VehicleList_View.prototype.HEAD_TITLE="Автомобили";VehicleDialog_View.prototype.HEAD_TITLE="Карточка автомобиля";SupplierList_View.prototype.HEAD_TITLE="Поставщики";SupplierDialog_View.prototype.HEAD_TITLE="Карточка поставщика";ClientList_View.prototype.HEAD_TITLE="Клиенты";ClientDialog_View.prototype.HEAD_TITLE="Карточка клиента";DestinationList_View.prototype.HEAD_TITLE="Объекты";DestinationDialog_View.prototype.HEAD_TITLE="Карточка объекта";PumpVehicleList_View.prototype.HEAD_TITLE="Насосы";PumpPriceList_View.prototype.HEAD_TITLE="Прайсы насосов";ConcreteTypeList_View.prototype.HEAD_TITLE="Марки бетона";OrderList_View.prototype.HEAD_TITLE="Заявки";OrderPumpList_View.prototype.HEAD_TITLE="Заявки (насосы)";VehicleScheduleList_View.prototype.HEAD_TITLE="Расписания работы ТС";RawMaterialProcurUpload_View.prototype.HEAD_TITLE="Загрузка поступлений";RawMaterialList_View.prototype.HEAD_TITLE="Материалы";VehicleStopsReport_View.prototype.HEAD_TITLE="Стоянки ТС";DriverCheatReport_View.prototype.HEAD_TITLE="Повторные поездки по самовывозу";RouteToDestAvgTimeRep_View.prototype.HEAD_TITLE="Среднее время до объектов";VehicleEfficiency_View.prototype.HEAD_TITLE="Эффективность работы ТС";EmployeeList_View.prototype.HEAD_TITLE="Сотрудники";QuarryList_View.prototype.HEAD_TITLE="Карьеры";ShipmentList_View.prototype.HEAD_TITLE="Отгрузки";ShipmentForVehOwnerList_View.prototype.HEAD_TITLE="Наработка (миксеры)";ShipmentTimeList_View.prototype.HEAD_TITLE="Опоздания назначений и отгрузок";ShipmentForClientVehOwnerList_View.prototype.HEAD_TITLE="Самовывоз";VehicleScheduleReportAll_View.prototype.HEAD_TITLE="Печать графиков";ShipQuantForCostGradeList_View.prototype.HEAD_TITLE="Минимальные объемы для расчета стоимости доставки";ShipmentDateList_View.prototype.HEAD_TITLE="Отгрузки (по дням)";AstCallList_View.prototype.HEAD_TITLE="Звонки";DOCMaterialProcurementShiftList_View.prototype.HEAD_TITLE="Поступление материалов";RawMaterialConsRateDateList_View.prototype.HEAD_TITLE="Нормы расхода материалов";SupplierOrderList_View.prototype.HEAD_TITLE="Заявки на поставку";RawMaterialProcurUploadList_View.prototype.HEAD_TITLE="Лог загрузки приходов";RAMaterialConsumptionDateList_View.prototype.HEAD_TITLE="Расход материалов";SMSForSendingList_View.prototype.HEAD_TITLE="СМС сообщения";TrackerZoneControlList_View.prototype.HEAD_TITLE="Запретные зоны";AssignedVehicleList_View.prototype.HEAD_TITLE="Текущие назначения";ClientTelList_View.prototype.HEAD_TITLE="Прорабы клиентов";EmployeeWorkTimeScheduleList_View.prototype.HEAD_TITLE="Табель учета рабочего времени";ClientValidDuplicateList_View.prototype.HEAD_TITLE="Разрешенные повторы контрагентов";SandQuarryValList_View.prototype.HEAD_TITLE="Журнал по песку";StoneQuarryValList_View.prototype.HEAD_TITLE="Журнал по щебню";AstCallManagerReport_View.prototype.HEAD_TITLE="Звонки по менеджерам";LabEntryItemReport_View.prototype.HEAD_TITLE="Показатели по периодам";LabEntryItemOnRatePeriodReport_View.prototype.HEAD_TITLE="Показатели по месяцам";LabEntryAvgReport_View.prototype.HEAD_TITLE="Средние показатели по датам";ShipmentForDriverCostHeaderList_View.prototype.HEAD_TITLE="Прайсы по доставке для водителей";ShipmentForOwnerCostHeaderList_View.prototype.HEAD_TITLE="Прайсы по доставке для собственников";ConcreteCostHeaderList_View.prototype.HEAD_TITLE="Прайсы на бетон";VehicleOwnerList_View.prototype.HEAD_TITLE="Владельцы транспортных средств";ShipmentCancelationList_View.prototype.HEAD_TITLE="Отмененные отгрузки";ShipmentPumpList_View.prototype.HEAD_TITLE="Отгрузки (насосы)";ShipmentPumpForVehOwnerList_View.prototype.HEAD_TITLE="Наработка (насосы)";UserOperatorList_View.prototype.HEAD_TITLE="Список операторов";VehicleOwnerConcretePriceList_View.prototype.HEAD_TITLE="История прайсов по бетону для владельцев";VehicleOwnerClientList_View.prototype.HEAD_TITLE="Клинеты владельцев ТС";VehicleOwnerTotReport_View.prototype.HEAD_TITLE="Итоги";MatTotalList_View.prototype.HEAD_TITLE="Общая таблица";MatCorrectList_View.prototype.HEAD_TITLE="Корректировка расхода материалов";ConcreteTypeMapToProductionList_View.prototype.HEAD_TITLE="Соответствие марок в производстве и в этой программе";RawMaterialMapToProductionList_View.prototype.HEAD_TITLE="Соответствие материалов в производстве и в этой программе";LabEntryList_View.prototype.HEAD_TITLE="Журнал испытания образцов";CementSiloList_View.prototype.HEAD_TITLE="Соответствие силосов";ProductionSiteList_View.prototype.HEAD_TITLE="Список заводов";ProductionSiteForEditList_View.prototype.HEAD_TITLE="Список заводов (редактирование)";ELKONLogList_View.prototype.HEAD_TITLE="Журнал загрузки из ELKON";ProductionList_View.prototype.HEAD_TITLE="Производство ELKON";MaterialFactBalanceCorretionList_View.prototype.HEAD_TITLE="Производство ELKON";MaterialFactConsumptionCorretionList_View.prototype.HEAD_TITLE="Корректировки фактического расхода материалов";CementSiloBalanceResetList_View.prototype.HEAD_TITLE="Обнуление остатков силосов"; 
if(window["LoginList_View"]){LoginList_View.prototype.GRID_USER_COL_CAP="Пользователь";LoginList_View.prototype.GRID_DATE_TIME_IN_COL_CAP="Дата входа";LoginList_View.prototype.GRID_DATE_TIME_OUT_COL_CAP="Дата выхода";LoginList_View.prototype.GRID_SET_DATE_TIME_COL_CAP="Последняя активность";LoginList_View.prototype.GRID_IP_COL_CAP="IP";LoginList_View.prototype.HEAD_TITLE="Сеансы пользователей";}
ViewList_View.prototype.OPEN_TITLE="Открыть объект";ViewList_View.prototype.OPEN_WIN_TITLE="Открыть в новом окне";ViewList_View.prototype.GRID_COL_CAP="Объект";ViewList_View.prototype.HEAD_TITLE="Все формы";ConstantList_View.prototype.GRID_COL_CAP="Константы";ConstantList_View.prototype.HEAD_TITLE="Константы";ViewSectionSelect.prototype.LABEL_CAPTION="Вид объекта:";MainMenuConstructorList_View.prototype.HEAD_TITLE="Конструктор меню";MainMenuConstructorList_View.prototype.GRID_ROLE_ID_COL_CAP="Код роли";MainMenuConstructorList_View.prototype.GRID_ROLE_DESCR_COL_CAP="Роль";MainMenuConstructorList_View.prototype.GRID_USER_DESCR_COL_CAP="Пользователь";About_View.prototype.LB_APP_NAME="Приложение:";About_View.prototype.LB_VERSION="Версия:";About_View.prototype.LB_AUTHOR="Разработчик:";About_View.prototype.LB_DB_NAME="База данных:";About_View.prototype.LB_TECH_MAIL="Тех.поддержка:";About_View.prototype.LB_FW_SERVER_VERSION="Версия платформы (сервер):";About_View.prototype.LB_FW_CLIENT_VERSION="Версия платформы (клиент):";UserList_View.prototype.HEAD_TITLE="Пользователи";   
TRACK_CONSTANTS={IMG_PATH:"img/",POINTER_IMGS:{blue:'pointer_blue.png',red:'pointer_red.png',green:'pointer_green.png'},STOP_IMGS:{blue:'dot_blue.png',red:'dot_red.png',green:'dot_green.png'},DEF_THEME:"blue",FOUND_ZOOM:15,INI_ZOOM:10,VEH_IMG:"img/mixer.png"} 
function NMEAStrToDegree(str){var DEGREE_DIGITS=2;var deg,min;if(str.length){str_source=str;while((str_source.substr(0,1)=='0')&&(str_source.length)){str_source=str_source.slice(1);}
if(!str_source.isNaN){deg=parseFloat(str_source.substr(0,DEGREE_DIGITS));}
if(str_source.length>DEGREE_DIGITS){str_source=str_source.slice(DEGREE_DIGITS);while((str_source.substr(0,1)=='0')&&(str_source.length)){str_source=str_source.slice(1);}
if(!str_source.isNaN)
var min=parseFloat(str_source);return deg+min/60.0;}}}
function ObjMapLayer(map,descr){this.layer=new OpenLayers.Layer.Vector(descr);this.map=map;this.map.addLayer(this.layer);}
ObjMapLayer.prototype.removeLayer=function(){this.map.removeLayer(this.layer);}
ObjMapLayer.prototype.getStyle=function(marker){var style_mark=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style['default']);if(marker.image){var scale=((marker.imageScale==undefined)||(marker.imageScale<=0))?1:marker.imageScale;var img=new Image();img.src=marker.image;style_mark.externalGraphic=marker.image;if(scale!=1){style_mark.graphicHeight=Math.round(img.height*scale);style_mark.graphicWidth=Math.round(img.width*scale);}}
style_mark.graphicTitle=marker.getHint?marker.getHint():null;style_mark.rotation=(marker.imageRotate&&marker.pos_data.heading>0)?marker.pos_data.heading:0;return(style_mark);}
ObjMapLayer.prototype.removeFromLayer=function(featureArray){this.layer.removeFeatures(featureArray);}
ObjMapLayer.prototype.getMapPoint=function(lon,lat){return new OpenLayers.Geometry.Point(lon,lat).transform(new OpenLayers.Projection("EPSG:4326"),this.map.getProjectionObject());}
ObjMapLayer.prototype.getMapPointFromStr=function(lon,lat){return this.getMapPoint(NMEAStrToDegree(lon),NMEAStrToDegree(lat));}
ObjMapLayer.prototype.getLonLatPoint=function(lon,lat){return new OpenLayers.LonLat(lon,lat).transform(new OpenLayers.Projection("EPSG:4326"),this.map.getProjectionObject());}
ObjMapLayer.prototype.getLonLatPointFromStr=function(lon,lat){return this.getLonLatPoint(NMEAStrToDegree(lon),NMEAStrToDegree(lat));}
ObjMapLayer.prototype.moveMapToCoords=function(lon,lat,zoom){this.map.setCenter(new OpenLayers.LonLat(lon,lat).transform(new OpenLayers.Projection("EPSG:4326"),this.map.getProjectionObject()),zoom);}
ObjMapLayer.prototype.moveMapToStrCoords=function(lon,lat,zoom){this.moveMapToCoords(NMEAStrToDegree(lon),NMEAStrToDegree(lat),zoom);}
ObjMapLayer.prototype.addLineFromPoints=function(mapFeatures,points,lineStyle){lineStyle=lineStyle||{strokeColor:"#0074FF",strokeWidth:4,pointRadius:6,pointerEvents:"visiblePainted"}
var point_list=[];for(var i=0;i<points.length;i++){point_list.push((new OpenLayers.Geometry.Point(points[i][1],points[i][0])).transform(new OpenLayers.Projection("EPSG:4326"),this.map.getProjectionObject()));}
mapFeatures.push(new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(point_list),null,lineStyle));} 
function GeoZones(map,objDescr,points,doDraw){GeoZones.superclass.constructor.call(this,map,objDescr);var self=this;if(points&&points.length){this.drawZoneOnCoords(points);}
if(doDraw){this.m_drawControl=new OpenLayers.Control.DrawFeature(this.layer,OpenLayers.Handler.Polygon);this.m_dragControl=new OpenLayers.Control.DragFeature(this.layer,{"onComplete":function(feature,pixel){self.drawComplete(feature);}});this.map.addControl(this.m_drawControl);this.map.addControl(this.m_dragControl);this.layer.events.on({featuresadded:function(event){self.drawComplete(event.features[0]);}});}}
extend(GeoZones,ObjMapLayer);GeoZones.prototype.m_drawControl;GeoZones.prototype.m_dragControl;GeoZones.prototype.m_polygonFeature;GeoZones.prototype.m_drawComplete;GeoZones.prototype.m_drawCompleteContext;GeoZones.prototype.drawZoneOnCoords=function(points){if(points.length%2!=0){return;}
var pointList=[];for(var i=0;i<points.length;i+=2){pointList.push(this.getMapPoint(points[i],points[i+1]));}
var linearRing=new OpenLayers.Geometry.LinearRing(pointList);this.m_polygonFeature=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([linearRing]));this.layer.addFeatures(this.m_polygonFeature);}
GeoZones.prototype.activateDrawing=function(){this.deleteZone();this.m_drawControl.activate();this.m_dragControl.deactivate();}
GeoZones.prototype.activateNavigation=function(){this.m_drawControl.deactivate();this.m_dragControl.deactivate();}
GeoZones.prototype.activateDragging=function(){this.m_drawControl.deactivate();this.m_dragControl.activate();}
GeoZones.prototype.makeBigger=function(){alert("bigger");}
GeoZones.prototype.makeSmaller=function(){alert("smaller");}
GeoZones.prototype.deleteZone=function(){this.layer.removeAllFeatures();if(this.m_drawComplete){this.m_drawComplete.call(this.m_drawCompleteCont,"");}}
GeoZones.prototype.drawComplete=function(feature){var vertices=feature.geometry.getVertices();var coords_str="";for(var i=0;i<vertices.length;i++){var point=new OpenLayers.Geometry.Point(vertices[i]["x"],vertices[i]["y"]).transform(this.map.getProjectionObject(),new OpenLayers.Projection("EPSG:4326"));coords_str+=(coords_str=="")?"":",";coords_str+=point["x"]+" "+point["y"];}
if(this.m_drawComplete){this.m_drawComplete.call(this.m_drawCompleteCont,coords_str);}}
GeoZones.prototype.setDrawComplete=function(onDrawComplete,context){this.m_drawComplete=onDrawComplete;this.m_drawCompleteCont=context;} 
function ZoneDrawingControl(id,options){options=options||{};this.m_onDeleteZone=options.onDeleteZone;var self=this;options.addElement=function(){this.addElement(new ButtonCmd(id+":btn_delete",{"onClick":function(){self.m_zones.deleteZone.call(self.m_zones);if(self.m_onDeleteZone){self.m_onDeleteZone();}},"caption":"Удалить","title":"Удалить зону с карты"}));}
ZoneDrawingControl.superclass.constructor.call(this,id,"DIV",options);}
extend(ZoneDrawingControl,ControlContainer);ZoneDrawingControl.prototype.setZones=function(zones){this.m_zones=zones;}
ZoneDrawingControl.prototype.toDOM=function(parent){ZoneDrawingControl.superclass.toDOM.call(this,parent);var self=this;EventHelper.add(document.getElementById(this.getId()+":drag"),"change",function(){self.m_zones.activateDragging.call(self.m_zones);});EventHelper.add(document.getElementById(this.getId()+":draw"),"change",function(){self.m_zones.activateDrawing.call(self.m_zones);});EventHelper.add(document.getElementById(this.getId()+":navigate"),"change",function(){self.m_zones.activateNavigation.call(self.m_zones);});} 
function VehicleLayer(map,options){options=options||{};VehicleLayer.superclass.constructor.call(this,map,this.LAYER_DESCR);this.m_vehicles=[];this.CURRENT_THEME=options.theme||TRACK_CONSTANTS.DEF_THEME;}
extend(VehicleLayer,ObjMapLayer);VehicleLayer.prototype.LAYER_DESCR="Объекты мониторинга";VehicleLayer.prototype.OBJ_POINTER_SCALE=1;VehicleLayer.prototype.TAIL_MARKER_CURSOR='pointer';VehicleLayer.prototype.TAIL_MARKER_OPACITY=1;VehicleLayer.prototype.TAIL_MARKER_POINT_RADIUS=12;VehicleLayer.prototype.CAR_MARKER_CURSOR='pointer';VehicleLayer.prototype.CAR_MARKER_OPACITY=0.7;VehicleLayer.prototype.CAR_CUR_MARKER_OPACITY=1;VehicleLayer.prototype.CAR_MARKER_POINT_RADIUS=12;VehicleLayer.prototype.flyToObjById=function(id,zoom){if(this.m_vehicles[id]==undefined){throw new Error('Object with id '+id+' not found!');}
this.moveMapToCoords(this.m_vehicles[id].head.pos_data.lon,this.m_vehicles[id].head.pos_data.lat,zoom||this.map.getZoom());}
VehicleLayer.prototype.addVehicle=function(mapMarker,tailMarkers,showPointer,current){if(!mapMarker.pos_data){return;}
var self=this;this.m_vehicles[mapMarker.id]={'head':mapMarker,'tail':tailMarkers,'pointerFeature':null,'currentObjFeature':null};var features=[];mapMarker.feature=new OpenLayers.Feature.Vector(this.getMapPoint(mapMarker.pos_data.lon,mapMarker.pos_data.lat),null,this.getCarStyle(mapMarker,current));mapMarker.feature.carId=mapMarker.id;features.push(mapMarker.feature);if(showPointer){this.m_vehicles[mapMarker.id].pointerFeature=new OpenLayers.Feature.Vector(this.getMapPoint(mapMarker.pos_data.lon,mapMarker.pos_data.lat),null,this.getPointerStyle(mapMarker.pos_data.heading));features.push(this.m_vehicles[mapMarker.id].pointerFeature);}
if(current){this.setCurrentObj(mapMarker.id);}
if(tailMarkers!=undefined){for(var i=0;i<tailMarkers.length;i++){tailMarkers[i].feature=new OpenLayers.Feature.Vector(this.getMapPoint(tailMarkers[i].lon,tailMarkers[i].lat),null,this.getTailStyle(tailMarkers[i]));features.push(tailMarkers[i].feature);}}
this.layer.addFeatures(features);var onMarkerSelect=function(feature){if(feature.carId!=undefined&&self.onCarSelect){self.onCarSelect(feature.carId);}};var selectCtrl=new OpenLayers.Control.SelectFeature(this.layer,{hover:false,highlightOnly:false,renderIntent:"temporary",onSelect:onMarkerSelect});this.map.addControl(selectCtrl);selectCtrl.activate();}
VehicleLayer.prototype.removeVehicle=function(carMarkerId){if(this.m_vehicles[carMarkerId]!=undefined){var features=[];if(this.m_vehicles[carMarkerId].pointerFeature!=undefined){features.push(this.m_vehicles[carMarkerId].pointerFeature);}
if(this.m_vehicles[carMarkerId].head!=undefined){features.push(this.m_vehicles[carMarkerId].head.feature);}
if(this.m_vehicles[carMarkerId].tail!=undefined){for(var i=0;i<this.m_vehicles[carMarkerId].tail.length;i++){features.push(this.m_vehicles[carMarkerId].tail[i].feature);}}
this.removeFromLayer(features);if(this.m_vehicles[carMarkerId].tail!=undefined){for(var i=0;i<this.m_vehicles[carMarkerId].tail.length;i++){delete this.m_vehicles[carMarkerId].tail[i];}}
if(this.m_vehicles[carMarkerId].head!=undefined){delete this.m_vehicles[carMarkerId].head;}
if(this.m_vehicles[carMarkerId]!=undefined){delete this.m_vehicles[carMarkerId];}}}
VehicleLayer.prototype.getPointerStyle=function(direction){var style_mark=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style['default']);if(this.OBJ_POINTER_SCALE!=1){var img=new Image();img.src=TRACK_CONSTANTS.IMG_PATH+TRACK_CONSTANTS.POINTER_IMGS[this.CURRENT_THEME];style_mark.graphicHeight=Math.round(img.height*this.OBJ_POINTER_SCALE);style_mark.graphicWidth=Math.round(img.width*this.OBJ_POINTER_SCALE);}
style_mark.externalGraphic=TRACK_CONSTANTS.IMG_PATH+TRACK_CONSTANTS.POINTER_IMGS[this.CURRENT_THEME];var x_offset,y_offset;if(direction<180){y_offset=-40;}
else{y_offset=-40;}
if(x_offset!=undefined){style_mark.graphicXOffset=x_offset;}
if(y_offset!=undefined){style_mark.graphicYOffset=y_offset;}
style_mark.rotation=direction;style_mark.graphicOpacity=this.CAR_MARKER_OPACITY;style_mark.pointRadius=this.CAR_MARKER_POINT_RADIUS;return(style_mark);}
VehicleLayer.prototype.getCarStyle=function(carMarker,current){var style_mark=this.getStyle(carMarker);style_mark.graphicOpacity=(current)?this.CAR_CUR_MARKER_OPACITY:this.CAR_MARKER_OPACITY;style_mark.cursor=this.CAR_MARKER_CURSOR;style_mark.label=carMarker.getLabel();if(style_mark.label!=undefined){style_mark.labelXOffset=14;style_mark.labelYOffset=14;style_mark.fontSize='12px';}
style_mark.pointRadius=this.CAR_MARKER_POINT_RADIUS;return(style_mark);}
VehicleLayer.prototype.getTailStyle=function(tailMarker){var style_mark=this.getStyle(tailMarker);style_mark.graphicOpacity=this.TAIL_MARKER_OPACITY;style_mark.cursor=this.TAIL_MARKER_CURSOR;style_mark.pointRadius=this.TAIL_MARKER_POINT_RADIUS;return(style_mark);}
VehicleLayer.prototype.setCurrentObj=function(id,zoom){if(this.m_vehicles[id]!=undefined){this.currentObj=id;this.flyToObjById(id,zoom);}}
VehicleLayer.prototype.removeAllVehicles=function(){for(var carMarkerId in this.m_vehicles){this.removeVehicle(carMarkerId);}} 
function MapCarMarker(attrs){for(var id in attrs){this[id]=attrs[id];}
if(this.pos_data&&this.pos_data.period)
this.pos_data.period=DateHelper.strtotime(this.pos_data.period);}
MapCarMarker.prototype.getHint=function(){return DateHelper.format(this.pos_data.period,"d/m H:i:s");}
MapCarMarker.prototype.getLabel=function(){return this.plate;}
MapCarMarker.prototype.getCallOut=function(){return'<div>!!!Checking!!!'+'</div>';}
function MapMoveMarker(attrs){for(var id in attrs){this[id]=attrs[id];}
this.image=TRACK_CONSTANTS.IMG_PATH+TRACK_CONSTANTS.POINTER_IMGS[this.theme||TRACK_CONSTANTS.DEF_THEME];this.imageRotate=true;}
MapMoveMarker.prototype.getLabel=function(){if(this.showLabel&&this.ordNumber){return this.ordNumber;}}
MapMoveMarker.prototype.getHint=function(){if(typeof(this.pos_data.period)=="string"){dt=DateHelper.strtotime(this.pos_data.period);}else{dt=this.pos_data.period;}
return DateHelper.format(dt,"H:i:s")+' ('+this.ordNumber+')';}
MapMoveMarker.prototype.getCallOut=function(){if(typeof(this.pos_data.period)=="string"){dt=DateHelper.strtotime(this.pos_data.period);}else{dt=this.pos_data.period;}
var addRow=function(name,val){return'<div class="row"><div class='+window.getBsCol(6)+'>'+
name+':</div><div class="'+window.getBsCol(6)+'">'+val+'</div></div>';};res='<div class="call_out"><h4>Информация по точке</h4>';res+=addRow('объект',this.plate);res+=addRow('направление',heading_descr(Math.floor(this.pos_data.heading)));res+=addRow('дата/время',DateHelper.format(dt,"d/m H:i:s"));res+=addRow('долгота',this.pos_data.lon);res+=addRow('широта',this.pos_data.lat);res+=addRow('скорость',this.pos_data.speed+' км/ч');res+=addRow('напряжение',this.pos_data.voltage);if(this.pos_data.sensorFuelPresent){res+=addRow('уровень топлива',this.pos_data.sensorFuelState);}
if(this.pos_data.sensorEngPresent){res+=addRow('двигатель',this.pos_data.engine_on_str);}
res+='</div>';return(res);}
function heading_descr(degr){if(degr>340||degr<20){return'север';}
else if(degr>20&&degr<110){return'северо-запад';}
else if(degr>=110&&degr<160){return'юго-запад';}
else if(degr>=160&&degr<200){return'юг';}
else if(degr>=200&&degr<250){return'юго-восток';}
else if(degr>=250&&degr<340){return'северо-восток';}}
function MapStopMarker(attrs){for(var id in attrs){this[id]=attrs[id];}
this.image=TRACK_CONSTANTS.IMG_PATH+
TRACK_CONSTANTS.STOP_IMGS["red"];this.imageRotate=false;}
extend(MapStopMarker,MapMoveMarker);function sec_dif_to_str(sec_dif){var days=0;var hours=0;var minutes=0;var secs=0;var minutes=Math.floor(sec_dif/60);if(minutes<60){secs=sec_dif-(minutes*60);}
else{hours=Math.floor(minutes/60);if(hours<60){minutes=minutes-(hours*60);secs=0;}
else{days=Math.floor(hours/24);hours=hours-(days*24);minutes=0;secs=0;}}
var res='';if(days>0){res=days+' дн.';}
if(hours>0){res+=(res=='')?'':' ';res+=hours+' чс.';}
if(minutes>0){res+=(res=='')?'':' ';res+=minutes+' мн.';}
if(secs>0){res+=(res=='')?'':' ';res+=secs+' сек.';}
return(res);}
function time_dif_to_str(dtime_start,dtime_end){return(dtime_start&&dtime_end)?sec_dif_to_str(Math.floor((dtime_end.getTime()-dtime_start.getTime())/1000)):"";}
function from_now_time_dif(dtime){var res=time_dif_to_str(dtime,new Date())+' назад';return(res);} 
function TrackLayer(map,options){options=options||{};var descr=(options.descr!=undefined)?this.LAYER_DESCR+options.descr:"маршрут";TrackLayer.superclass.constructor.call(this,map,descr);this.points=[];}
extend(TrackLayer,ObjMapLayer);TrackLayer.prototype.popUpWidth=200;TrackLayer.prototype.popUpHeight=100;TrackLayer.prototype.points;TrackLayer.prototype.popUp;TrackLayer.prototype.LAYER_DESCR='Путь для ';TrackLayer.prototype.clearMarkers=function(){var features=[];for(var i=0;i<this.points.length;i++){if(this.points[i].feature!=undefined){features.push(this.points[i].feature);}}
if(this.lineFeature!=undefined){features.push(this.lineFeature);}
if(features.length>0){this.removeFromLayer(features);}}
TrackLayer.prototype.getPointStyle=function(marker){var style_mark=this.getStyle(marker);style_mark.fillOpacity=1;style_mark.cursor='pointer';style_mark.labelXOffset=7;style_mark.labelYOffset=7;style_mark.fontSize='8px';return(style_mark);}
TrackLayer.prototype.addMarkers=function(markers){var self=this;this.clearMarkers();var features=[];this.points=markers;var line_style={strokeColor:"#0074FF",strokeWidth:2,pointRadius:6,pointerEvents:"visiblePainted"};var pointList=[];var point;for(var i=0;i<this.points.length;i++){point=this.getMapPoint(this.points[i].pos_data.lon,this.points[i].pos_data.lat);this.points[i].feature=new OpenLayers.Feature.Vector(point,null,this.getPointStyle(this.points[i]));pointList.push(point);this.points[i].feature.repId=i;features.push(this.points[i].feature);}
this.layer.addFeatures(features);this.lineFeature=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(pointList),null,line_style);this.layer.addFeatures(this.lineFeature);var onDataSelect=function(feature){if(feature.repId!=undefined){var popup=new OpenLayers.Popup.FramedCloud("repPointData",feature.geometry.getBounds().getCenterLonLat(),null,self.points[feature.repId].getCallOut(),null,true);feature.popup=popup;self.map.addPopup(popup);}};var onDataUnSelect=function(feature){if(feature.repId!=undefined){self.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null;}};var selectCtrl=new OpenLayers.Control.SelectFeature(this.layer,{hover:false,toggle:true,clickout:true,highlightOnly:false,renderIntent:"temporary",onSelect:onDataSelect,onUnselect:onDataUnSelect});this.map.addControl(selectCtrl);selectCtrl.activate();}
TrackLayer.prototype.flyToInd=function(ind){if(this.points!=undefined&&ind<this.points.length){var lonLat=this.getLonLatPoint(this.points[ind].pos_data.lon,this.points[ind].pos_data.lat);if(lonLat!=undefined){this.map.setCenter(lonLat,this.map.getZoom());}}}
TrackLayer.prototype.flyToStart=function(){this.flyToInd(0);}
TrackLayer.prototype.flyToEnd=function(){if(this.points!=undefined){this.flyToInd(this.points.length-1);}}
TrackLayer.prototype.zoomToCenter=function(xMax,xMin,yMax,yMin){this.map.setCenter(this.getLonLatPoint((xMax-xMin)/2,(yMax-yMin)/2),this.map.getZoom());var bounds=new OpenLayers.Bounds();bounds.extend(this.getLonLatPoint(xMax,yMax));bounds.extend(this.getLonLatPoint(xMin,yMin));bounds.toBBOX();this.map.zoomToExtent(bounds,true);} 
function ShipmentTimeNorm_Controller(options){options=options||{};options.listModelClass=ShipmentTimeNorm_Model;options.objModelClass=ShipmentTimeNorm_Model;ShipmentTimeNorm_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ShipmentTimeNorm_Controller,ControllerObjServer);ShipmentTimeNorm_Controller.prototype.addInsert=function(){ShipmentTimeNorm_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Объем";options.primaryKey=true;options.required=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Норма минут";options.required=true;var field=new FieldInt("norm_min",options);pm.addField(field);}
ShipmentTimeNorm_Controller.prototype.addUpdate=function(){ShipmentTimeNorm_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Объем";options.primaryKey=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Норма минут";var field=new FieldInt("norm_min",options);pm.addField(field);}
ShipmentTimeNorm_Controller.prototype.addDelete=function(){ShipmentTimeNorm_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Объем";pm.addField(new FieldInt("id",options));}
ShipmentTimeNorm_Controller.prototype.addGetList=function(){ShipmentTimeNorm_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Объем";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Норма минут";pm.addField(new FieldInt("norm_min",f_opts));}
ShipmentTimeNorm_Controller.prototype.addGetObject=function(){ShipmentTimeNorm_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Объем";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function MainMenu_Controller(options){options=options||{};MainMenu_Controller.superclass.constructor.call(this,options);this.addGetList();}
extend(MainMenu_Controller,ControllerObjServer);MainMenu_Controller.prototype.addGetList=function(){MainMenu_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));} 
function MainMenuConstructor_Controller(options){options=options||{};options.listModelClass=MainMenuConstructorList_Model;options.objModelClass=MainMenuConstructorDialog_Model;MainMenuConstructor_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(MainMenuConstructor_Controller,ControllerObjServer);MainMenuConstructor_Controller.prototype.addInsert=function(){MainMenuConstructor_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;options.enumValues='admin,owner,boss,operator,manager,dispatcher,accountant,lab_worker,supplies,sales,plant_director,supervisor,vehicle_owner,client,weighing';var field=new FieldEnum("role_id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Содержание";options.required=true;var field=new FieldText("content",options);pm.addField(field);var options={};options.alias="Содержание для модели,заполняется при записи из контроллера!";var field=new FieldText("model_content",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
MainMenuConstructor_Controller.prototype.addUpdate=function(){MainMenuConstructor_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.enumValues='admin,owner,boss,operator,manager,dispatcher,accountant,lab_worker,supplies,sales,plant_director,supervisor,vehicle_owner,client,weighing';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("role_id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Содержание";var field=new FieldText("content",options);pm.addField(field);var options={};options.alias="Содержание для модели,заполняется при записи из контроллера!";var field=new FieldText("model_content",options);pm.addField(field);}
MainMenuConstructor_Controller.prototype.addDelete=function(){MainMenuConstructor_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
MainMenuConstructor_Controller.prototype.addGetList=function(){MainMenuConstructor_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("role_id",f_opts));var f_opts={};pm.addField(new FieldString("role_descr",f_opts));var f_opts={};pm.addField(new FieldString("user_id",f_opts));var f_opts={};pm.addField(new FieldString("user_descr",f_opts));var f_opts={};pm.addField(new FieldText("content",f_opts));}
MainMenuConstructor_Controller.prototype.addGetObject=function(){MainMenuConstructor_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function MainMenuContent_Controller(options){options=options||{};options.listModelClass=MainMenuContent_Model;options.objModelClass=MainMenuContent_Model;MainMenuContent_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(MainMenuContent_Controller,ControllerObjClient);MainMenuContent_Controller.prototype.addInsert=function(){MainMenuContent_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("descr",options);pm.addField(field);var options={};var field=new FieldInt("viewid",options);pm.addField(field);var options={};var field=new FieldString("viewdescr",options);pm.addField(field);var options={};var field=new FieldBool("default",options);pm.addField(field);var options={};var field=new FieldString("glyphclass",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
MainMenuContent_Controller.prototype.addUpdate=function(){MainMenuContent_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("descr",options);pm.addField(field);var options={};var field=new FieldInt("viewid",options);pm.addField(field);var options={};var field=new FieldString("viewdescr",options);pm.addField(field);var options={};var field=new FieldBool("default",options);pm.addField(field);var options={};var field=new FieldString("glyphclass",options);pm.addField(field);}
MainMenuContent_Controller.prototype.addDelete=function(){MainMenuContent_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
MainMenuContent_Controller.prototype.addGetList=function(){MainMenuContent_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("descr",f_opts));var f_opts={};pm.addField(new FieldInt("viewid",f_opts));var f_opts={};pm.addField(new FieldString("viewdescr",f_opts));var f_opts={};pm.addField(new FieldBool("default",f_opts));var f_opts={};pm.addField(new FieldString("glyphclass",f_opts));}
MainMenuContent_Controller.prototype.addGetObject=function(){MainMenuContent_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function View_Controller(options){options=options||{};options.listModelClass=ViewList_Model;View_Controller.superclass.constructor.call(this,options);this.addGetList();this.addComplete();this.add_get_section_list();}
extend(View_Controller,ControllerObjServer);View_Controller.prototype.addGetList=function(){View_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldText("c",f_opts));var f_opts={};pm.addField(new FieldText("f",f_opts));var f_opts={};pm.addField(new FieldText("t",f_opts));var f_opts={};pm.addField(new FieldText("href",f_opts));var f_opts={};pm.addField(new FieldText("user_descr",f_opts));var f_opts={};pm.addField(new FieldText("section",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("user_descr");}
View_Controller.prototype.addComplete=function(){View_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldText("user_descr",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("user_descr");}
View_Controller.prototype.add_get_section_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_section_list',opts);this.addPublicMethod(pm);} 
function VariantStorage_Controller(options){options=options||{};options.objModelClass=VariantStorage_Model;VariantStorage_Controller.superclass.constructor.call(this,options);this.addInsert();this.add_upsert_filter_data();this.add_upsert_col_visib_data();this.add_upsert_col_order_data();this.add_upsert_all_data();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_filter_data();this.add_get_col_visib_data();this.add_get_col_order_data();this.add_get_all_data();}
extend(VariantStorage_Controller,ControllerObjServer);VariantStorage_Controller.prototype.addInsert=function(){VariantStorage_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldText("storage_name",options);pm.addField(field);var options={};options.required=true;var field=new FieldText("variant_name",options);pm.addField(field);var options={};var field=new FieldBool("default_variant",options);pm.addField(field);var options={};var field=new FieldJSON("filter_data",options);pm.addField(field);var options={};var field=new FieldJSON("col_visib_data",options);pm.addField(field);var options={};var field=new FieldJSON("col_order_data",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
VariantStorage_Controller.prototype.add_upsert_filter_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('upsert_filter_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};options.required=true;pm.addField(new FieldString("variant_name",options));var options={};options.required=true;pm.addField(new FieldJSON("filter_data",options));var options={};options.required=true;pm.addField(new FieldBool("default_variant",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_upsert_col_visib_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('upsert_col_visib_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};options.required=true;pm.addField(new FieldString("variant_name",options));var options={};options.required=true;pm.addField(new FieldJSON("col_visib",options));var options={};options.required=true;pm.addField(new FieldBool("default_variant",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_upsert_col_order_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('upsert_col_order_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};options.required=true;pm.addField(new FieldString("variant_name",options));var options={};options.required=true;pm.addField(new FieldJSON("col_order",options));var options={};options.required=true;pm.addField(new FieldBool("default_variant",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_upsert_all_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('upsert_all_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};options.required=true;pm.addField(new FieldString("variant_name",options));var options={};options.required=true;pm.addField(new FieldJSON("all_data",options));var options={};options.required=true;pm.addField(new FieldBool("default_variant",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.addUpdate=function(){VariantStorage_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldText("storage_name",options);pm.addField(field);var options={};var field=new FieldText("variant_name",options);pm.addField(field);var options={};var field=new FieldBool("default_variant",options);pm.addField(field);var options={};var field=new FieldJSON("filter_data",options);pm.addField(field);var options={};var field=new FieldJSON("col_visib_data",options);pm.addField(field);var options={};var field=new FieldJSON("col_order_data",options);pm.addField(field);}
VariantStorage_Controller.prototype.addDelete=function(){VariantStorage_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
VariantStorage_Controller.prototype.addGetList=function(){VariantStorage_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));}
VariantStorage_Controller.prototype.addGetObject=function(){VariantStorage_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
VariantStorage_Controller.prototype.add_get_filter_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_filter_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_get_col_visib_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_col_visib_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_get_col_order_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_col_order_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_get_all_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_all_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));this.addPublicMethod(pm);} 
function ConstantList_Model(options){var id='ConstantList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldString("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.val=new FieldText("val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.val_type=new FieldText("val_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ctrl_class=new FieldText("ctrl_class",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ctrl_options=new FieldJSON("ctrl_options",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.view_class=new FieldText("view_class",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.view_options=new FieldJSON("view_options",filed_options);ConstantList_Model.superclass.constructor.call(this,id,options);}
extend(ConstantList_Model,ModelXML); 
function View_Model(options){var id='View_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.c=new FieldText("c",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.f=new FieldText("f",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.t=new FieldText("t",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.section=new FieldText("section",filed_options);options.fields.section.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);options.fields.descr.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.limited=new FieldBool("limited",filed_options);View_Model.superclass.constructor.call(this,id,options);}
extend(View_Model,ModelXML); 
function ViewList_Model(options){var id='ViewList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.c=new FieldText("c",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.f=new FieldText("f",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.t=new FieldText("t",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.href=new FieldText("href",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_descr=new FieldText("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.section=new FieldText("section",filed_options);ViewList_Model.superclass.constructor.call(this,id,options);}
extend(ViewList_Model,ModelXML); 
function ViewSectionList_Model(options){var id='ViewSectionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.section=new FieldText("section",filed_options);ViewSectionList_Model.superclass.constructor.call(this,id,options);}
extend(ViewSectionList_Model,ModelXML); 
function MainMenuConstructor_Model(options){var id='MainMenuConstructor_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldEnum("role_id",filed_options);filed_options.enumValues='admin,owner,boss,operator,manager,dispatcher,accountant,lab_worker,supplies,sales,plant_director,supervisor,vehicle_owner,client,weighing';options.fields.role_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Содержание';filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);options.fields.content.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Содержание для модели,заполняется при записи из контроллера!';filed_options.autoInc=false;options.fields.model_content=new FieldText("model_content",filed_options);MainMenuConstructor_Model.superclass.constructor.call(this,id,options);}
extend(MainMenuConstructor_Model,ModelXML); 
function MainMenuConstructorList_Model(options){var id='MainMenuConstructorList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldString("role_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_descr=new FieldString("role_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldString("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);MainMenuConstructorList_Model.superclass.constructor.call(this,id,options);}
extend(MainMenuConstructorList_Model,ModelXML); 
function MainMenuConstructorDialog_Model(options){var id='MainMenuConstructorDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldString("role_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_descr=new FieldString("role_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldString("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);MainMenuConstructorDialog_Model.superclass.constructor.call(this,id,options);}
extend(MainMenuConstructorDialog_Model,ModelXML); 
function MainMenuContent_Model(options){var id='MainMenuContent_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.descr=new FieldString("descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.viewid=new FieldString("viewid",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.viewdescr=new FieldString("viewdescr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields["default"]=new FieldBool("default",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.glyphclass=new FieldString("glyphclass",filed_options);options.tagModel="menu";options.tagRow="menuitem";options.primaryKeyIndex=true;options.markOnDelete=false;options.sequences={"id":0};options.namespace="http://www.katren.org/crm/doc/mainmenu"
MainMenuContent_Model.superclass.constructor.call(this,id,options);}
extend(MainMenuContent_Model,ModelXMLTree);MainMenuContent_Model.prototype.getParentId=function(){var par_id;if(this.m_currentRow&&this.m_currentRow.parentNode&&this.m_currentRow.parentNode!=this.m_node){par_id=this.m_currentRow.parentNode.getAttribute("id");}
return par_id;}
MainMenuContent_Model.prototype.setRowValues=function(row){for(var id in this.m_fields){if(this.m_fields[id].isSet()){row.setAttribute(id,this.m_fields[id].getValue());}}}
MainMenuContent_Model.prototype.makeRow=function(){var row=document.createElement(this.getTagRow());for(var fid in this.m_fields){var cell=document.createElement(fid);var v="";if(this.m_fields[fid].isSet()){v=this.m_fields[fid].getValue();}
row.setAttribute(fid,v);}
return row;}
MainMenuContent_Model.prototype.fetchRow=function(row){var attrs=row.attributes;if(attrs){if(attrs.descr)this.m_fields.descr.setValue(attrs.descr.nodeValue);if(attrs.viewid)this.m_fields.viewid.setValue(attrs.viewid.nodeValue);this.m_fields.glyphclass.setValue((attrs.glyphclass)?attrs.glyphclass.nodeValue:undefined);if(attrs["default"])this.m_fields["default"].setValue(attrs["default"].nodeValue);this.m_fields.viewdescr.setValue(((attrs.viewdescr)?attrs.viewdescr.nodeValue:""));this.m_fields.id.setValue(attrs.id.nodeValue);}
return true;}
ModelXML.prototype.initSequences=function(){for(sid in this.m_sequences){this.m_sequences[sid]=(this.m_sequences[sid]==undefined)?0:this.m_sequences[sid];var rows=this.getRows();for(var r=0;r<rows.length;r++){if(rows[r].attributes&&rows[r].attributes.id){var dv=parseInt(rows[r].attributes.id.nodeValue,10);if(this.m_sequences[sid]<dv){this.m_sequences[sid]=dv;}}}}} 
function VariantStorage_Model(options){var id='VariantStorage_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.storage_name=new FieldText("storage_name",filed_options);options.fields.storage_name.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.variant_name=new FieldText("variant_name",filed_options);options.fields.variant_name.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.default_variant=new FieldBool("default_variant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.filter_data=new FieldJSON("filter_data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.col_visib_data=new FieldJSON("col_visib_data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.col_order_data=new FieldJSON("col_order_data",filed_options);VariantStorage_Model.superclass.constructor.call(this,id,options);}
extend(VariantStorage_Model,ModelXML); 
function VariantStorageList_Model(options){var id='VariantStorageList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.storage_name=new FieldText("storage_name",filed_options);options.fields.storage_name.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.default_variant=new FieldBool("default_variant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.variant_name=new FieldText("variant_name",filed_options);VariantStorageList_Model.superclass.constructor.call(this,id,options);}
extend(VariantStorageList_Model,ModelXML); 
function About_Model(options){var id='About_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.author=new FieldString("author",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tech_mail=new FieldString("tech_mail",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_name=new FieldString("app_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.fw_version=new FieldString("fw_version",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_version=new FieldString("app_version",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.db_name=new FieldString("db_name",filed_options);About_Model.superclass.constructor.call(this,id,options);}
extend(About_Model,ModelXML); 
function User_Model(options){var id='User_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldEnum("role_id",filed_options);filed_options.enumValues='admin,owner,boss,operator,manager,dispatcher,accountant,lab_worker,supplies,sales,plant_director,supervisor,vehicle_owner,client,weighing';options.fields.role_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pwd=new FieldPassword("pwd",filed_options);options.fields.pwd.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel_ext=new FieldString("tel_ext",filed_options);options.fields.tel_ext.getValidator().setMaxLength('5');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Дата создания';filed_options.autoInc=false;options.fields.create_dt=new FieldDateTimeTZ("create_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.banned=new FieldBool("banned",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.time_zone_locale_id=new FieldInt("time_zone_locale_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Не используется, используется справочник user_map_to_production';filed_options.autoInc=false;options.fields.elkon_user_name=new FieldString("elkon_user_name",filed_options);options.fields.elkon_user_name.getValidator().setMaxLength('80');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Для облачной АТС';filed_options.autoInc=false;options.fields.domru_user_name=new FieldString("domru_user_name",filed_options);options.fields.domru_user_name.getValidator().setMaxLength('80');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.params=new FieldJSONB("params",filed_options);User_Model.superclass.constructor.call(this,id,options);}
extend(User_Model,ModelXML); 
function UserList_Model(options){var id='UserList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldEnum("role_id",filed_options);filed_options.enumValues='admin,owner,boss,operator,manager,dispatcher,accountant,lab_worker,supplies,sales,plant_director,supervisor,vehicle_owner,client,weighing';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel_ext=new FieldString("tel_ext",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.banned=new FieldBool("banned",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контакты';filed_options.autoInc=false;options.fields.contact_list=new FieldJSON("contact_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Id list for filter';filed_options.autoInc=false;options.fields.contact_ids=new FieldText("contact_ids",filed_options);UserList_Model.superclass.constructor.call(this,id,options);}
extend(UserList_Model,ModelXML); 
function UserDialog_Model(options){var id='UserDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Имя';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Эл.почта';filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldString("role_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel_ext=new FieldString("tel_ext",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.banned=new FieldBool("banned",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_time_locale=new FieldInt("user_time_locale",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.elkon_user_name=new FieldString("elkon_user_name",filed_options);UserDialog_Model.superclass.constructor.call(this,id,options);}
extend(UserDialog_Model,ModelXML); 
function Client_Model(options){var id='Client_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Полное наименование';filed_options.autoInc=false;options.fields.name_full=new FieldText("name_full",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотовый телефон';filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.manager_comment=new FieldText("manager_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид контрагента';filed_options.autoInc=false;options.fields.client_type_id=new FieldInt("client_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тип контрагента';filed_options.autoInc=false;options.fields.client_kind=new FieldEnum("client_kind",filed_options);filed_options.enumValues='buyer,acc,else';var filed_options={};filed_options.primaryKey=false;filed_options.alias='Источник обращения';filed_options.autoInc=false;options.fields.client_come_from_id=new FieldInt("client_come_from_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Менеджер';filed_options.autoInc=false;options.fields.manager_id=new FieldInt("manager_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.create_date=new FieldDate("create_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);options.fields.inn.getValidator().setMaxLength('12');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kpp=new FieldString("kpp",filed_options);options.fields.kpp.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.address_legal=new FieldText("address_legal",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.address_fact=new FieldText("address_fact",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tels_1c=new FieldText("tels_1c",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Аккаунт';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата начала выборки данных';filed_options.autoInc=false;options.fields.account_from_date=new FieldDate("account_from_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='БИК банка';filed_options.autoInc=false;options.fields.bank_bik=new FieldString("bank_bik",filed_options);options.fields.bank_bik.getValidator().setMaxLength('9');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Банковский счет';filed_options.autoInc=false;options.fields.bank_account=new FieldString("bank_account",filed_options);options.fields.bank_account.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Ссылка на справочник 1с';filed_options.autoInc=false;options.fields.ref_1c=new FieldJSONB("ref_1c",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipment_quant_for_cost=new FieldFloat("shipment_quant_for_cost",filed_options);options.fields.shipment_quant_for_cost.getValidator().setMaxLength('19');Client_Model.superclass.constructor.call(this,id,options);}
extend(Client_Model,ModelXML); 
function ClientList_Model(options){var id='ClientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.manager_comment=new FieldString("manager_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_type_id=new FieldInt("client_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_types_ref=new FieldJSON("client_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Источник';filed_options.autoInc=false;options.fields.client_come_from_ref=new FieldJSON("client_come_from_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_come_from_id=new FieldInt("client_come_from_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наш';filed_options.autoInc=false;options.fields.ours=new FieldString("ours",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид клиента';filed_options.autoInc=false;options.fields.client_kind=new FieldString("client_kind",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Email';filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Первое обращение';filed_options.autoInc=false;options.fields.first_call_date=new FieldDate("first_call_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто завел';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ИНН';filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Аккаунт';filed_options.autoInc=false;options.fields.accounts_ref=new FieldJSON("accounts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контакты';filed_options.autoInc=false;options.fields.contact_list=new FieldJSON("contact_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Ids for filter';filed_options.autoInc=false;options.fields.contact_ids=new FieldText("contact_ids",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldJSON("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ref_1c_exists=new FieldBool("ref_1c_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipment_quant_for_cost=new FieldFloat("shipment_quant_for_cost",filed_options);options.fields.shipment_quant_for_cost.getValidator().setMaxLength('19');ClientList_Model.superclass.constructor.call(this,id,options);}
extend(ClientList_Model,ModelXML); 
function ClientDialog_Model(options){var id='ClientDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Полное наименование';filed_options.autoInc=false;options.fields.name_full=new FieldText("name_full",filed_options);options.fields.name_full.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.manager_comment=new FieldText("manager_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_types_ref=new FieldJSON("client_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_come_from_ref=new FieldJSON("client_come_from_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_kind=new FieldString("client_kind",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Аккаунт';filed_options.autoInc=false;options.fields.accounts_ref=new FieldJSON("accounts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.account_from_date=new FieldDate("account_from_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Банковский счет';filed_options.autoInc=false;options.fields.bank_account=new FieldString("bank_account",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='БИК банка';filed_options.autoInc=false;options.fields.banks_ref=new FieldJSON("banks_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kpp=new FieldString("kpp",filed_options);options.fields.kpp.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.address_legal=new FieldText("address_legal",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.address_fact=new FieldText("address_fact",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ref_1c=new FieldString("ref_1c",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipment_quant_for_cost=new FieldFloat("shipment_quant_for_cost",filed_options);options.fields.shipment_quant_for_cost.getValidator().setMaxLength('19');ClientDialog_Model.superclass.constructor.call(this,id,options);}
extend(ClientDialog_Model,ModelXML); 
function Destination_Model(options){var id='Destination_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Расстояние';filed_options.autoInc=false;options.fields.distance=new FieldFloat("distance",filed_options);options.fields.distance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время';filed_options.autoInc=false;options.fields.time_route=new FieldTime("time_route",filed_options);options.fields.time_route.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.zone=new FieldString("zone",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.special_price=new FieldBool("special_price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.price_for_driver=new FieldFloat("price_for_driver",filed_options);options.fields.price_for_driver.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.near_road_lon=new FieldFloat("near_road_lon",filed_options);options.fields.near_road_lon.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.near_road_lat=new FieldFloat("near_road_lat",filed_options);options.fields.near_road_lat.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Отправлять СМС с маршрутом';filed_options.autoInc=false;options.fields.send_route_sms=new FieldBool("send_route_sms",filed_options);Destination_Model.superclass.constructor.call(this,id,options);}
extend(Destination_Model,ModelXML); 
function DestinationList_Model(options){var id='DestinationList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.distance=new FieldString("distance",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.time_route=new FieldTime("time_route",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.special_price=new FieldBool("special_price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price=new FieldString("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price_for_driver=new FieldFloat("price_for_driver",filed_options);DestinationList_Model.superclass.constructor.call(this,id,options);}
extend(DestinationList_Model,ModelXML); 
function DestinationDialog_Model(options){var id='DestinationDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.distance=new FieldString("distance",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.time_route=new FieldString("time_route",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price_for_driver=new FieldFloat("price_for_driver",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.zone_str=new FieldString("zone_str",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.zone_center_str=new FieldString("zone_center_str",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.special_price=new FieldBool("special_price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.send_route_sms=new FieldBool("send_route_sms",filed_options);DestinationDialog_Model.superclass.constructor.call(this,id,options);}
extend(DestinationDialog_Model,ModelXML); 
function ConcreteType_Model(options){var id='ConcreteType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Код 1С';filed_options.autoInc=false;options.fields.code_1c=new FieldString("code_1c",filed_options);options.fields.code_1c.getValidator().setRequired(true);options.fields.code_1c.getValidator().setMaxLength('11');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Норма давл.';filed_options.autoInc=false;options.fields.pres_norm=new FieldFloat("pres_norm",filed_options);options.fields.pres_norm.getValidator().setRequired(true);options.fields.pres_norm.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кф.МПА';filed_options.autoInc=false;options.fields.mpa_ratio=new FieldFloat("mpa_ratio",filed_options);options.fields.mpa_ratio.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Есть нормы расхода';filed_options.autoInc=false;options.fields.material_cons_rates=new FieldBool("material_cons_rates",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Отображать на сайте';filed_options.autoInc=false;options.fields.show_on_site=new FieldBool("show_on_site",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Официальное наименование для накладной';filed_options.autoInc=false;options.fields.official_name=new FieldString("official_name",filed_options);options.fields.official_name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Прочность для паспорта качества';filed_options.autoInc=false;options.fields.prochnost=new FieldInt("prochnost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='F';filed_options.autoInc=false;options.fields.f_val=new FieldInt("f_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='W';filed_options.autoInc=false;options.fields.w_val=new FieldInt("w_val",filed_options);ConcreteType_Model.superclass.constructor.call(this,id,options);}
extend(ConcreteType_Model,ModelXML); 
function Vehicle_Model(options){var id='Vehicle_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.plate=new FieldString("plate",filed_options);options.fields.plate.getValidator().setRequired(true);options.fields.plate.getValidator().setMaxLength('6');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Регин номера';filed_options.autoInc=false;options.fields.plate_region=new FieldString("plate_region",filed_options);options.fields.plate_region.getValidator().setMaxLength('3');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер число для сортировки';filed_options.autoInc=false;options.fields.plate_n=new FieldInt("plate_n",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Грузоподъемность';filed_options.autoInc=false;options.fields.load_capacity=new FieldFloat("load_capacity",filed_options);options.fields.load_capacity.getValidator().setRequired(true);options.fields.load_capacity.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.make=new FieldString("make",filed_options);options.fields.make.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Свойство';filed_options.autoInc=false;options.fields.feature=new FieldString("feature",filed_options);options.fields.feature.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Трэкер';filed_options.autoInc=false;options.fields.tracker_id=new FieldString("tracker_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Идентификатор SIM карты';filed_options.autoInc=false;options.fields.sim_id=new FieldString("sim_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер телефона SIM карты';filed_options.autoInc=false;options.fields.sim_number=new FieldString("sim_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='УДАЛИТЬ Владелец';filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='История владелецев';filed_options.autoInc=false;options.fields.vehicle_owners=new FieldJSONB("vehicle_owners",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owners_ar=new FieldArray("vehicle_owners_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ord_num=new FieldInt("ord_num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Масса, тонн';filed_options.autoInc=false;options.fields.weight_t=new FieldInt("weight_t",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='VIN';filed_options.autoInc=false;options.fields.vin=new FieldString("vin",filed_options);options.fields.vin.getValidator().setMaxLength('17');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Leasor name';filed_options.autoInc=false;options.fields.leasor=new FieldText("leasor",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.leasing_contract_date=new FieldDate("leasing_contract_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.leasing_contract_num=new FieldText("leasing_contract_num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.leasing_total=new FieldFloat("leasing_total",filed_options);options.fields.leasing_total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Insurance osago data';filed_options.autoInc=false;options.fields.insurance_osago=new FieldJSONB("insurance_osago",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Insurance kasko data';filed_options.autoInc=false;options.fields.insurance_kasko=new FieldJSONB("insurance_kasko",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='УДАЛИТЬ Владелец';filed_options.autoInc=false;options.fields.official_vehicle_owner_id=new FieldInt("official_vehicle_owner_id",filed_options);Vehicle_Model.superclass.constructor.call(this,id,options);}
extend(Vehicle_Model,ModelXML); 
function VehicleDialog_Model(options){var id='VehicleDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.plate=new FieldString("plate",filed_options);options.fields.plate.getValidator().setRequired(true);options.fields.plate.getValidator().setMaxLength('6');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Регион номера';filed_options.autoInc=false;options.fields.plate_region=new FieldString("plate_region",filed_options);options.fields.plate_region.getValidator().setMaxLength('3');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Грузоподъемность';filed_options.autoInc=false;options.fields.load_capacity=new FieldFloat("load_capacity",filed_options);options.fields.load_capacity.getValidator().setRequired(true);options.fields.load_capacity.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.make=new FieldString("make",filed_options);options.fields.make.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSONB("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Свойство';filed_options.autoInc=false;options.fields.feature=new FieldString("feature",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Трэкер';filed_options.autoInc=false;options.fields.tracker_id=new FieldString("tracker_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Идентификатор SIM карты';filed_options.autoInc=false;options.fields.sim_id=new FieldString("sim_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер телефона SIM карты';filed_options.autoInc=false;options.fields.sim_number=new FieldString("sim_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tracker_last_dt=new FieldDateTimeTZ("tracker_last_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tracker_sat_num=new FieldInt("tracker_sat_num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Последний владелец';filed_options.autoInc=false;options.fields.vehicle_owners_ref=new FieldJSONB("vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Последний владелец';filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='История владелецев';filed_options.autoInc=false;options.fields.vehicle_owners=new FieldJSONB("vehicle_owners",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owners_ar=new FieldArray("vehicle_owners_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ord_num=new FieldInt("ord_num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Масса, тонн';filed_options.autoInc=false;options.fields.weight_t=new FieldInt("weight_t",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='VIN';filed_options.autoInc=false;options.fields.vin=new FieldString("vin",filed_options);options.fields.vin.getValidator().setMaxLength('17');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.leasor=new FieldText("leasor",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.leasing_contract_date=new FieldDate("leasing_contract_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.leasing_contract_num=new FieldText("leasing_contract_num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.leasing_total=new FieldFloat("leasing_total",filed_options);options.fields.leasing_total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Insurance osago data';filed_options.autoInc=false;options.fields.insurance_osago=new FieldJSONB("insurance_osago",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Insurance kasko data';filed_options.autoInc=false;options.fields.insurance_kasko=new FieldJSONB("insurance_kasko",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.official_vehicle_owners_ref=new FieldJSON("official_vehicle_owners_ref",filed_options);VehicleDialog_Model.superclass.constructor.call(this,id,options);}
extend(VehicleDialog_Model,ModelXML); 
function Driver_Model(options){var id='Driver_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водительское удостоверение';filed_options.autoInc=false;options.fields.driver_licence=new FieldText("driver_licence",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Класс водительского удостоверения';filed_options.autoInc=false;options.fields.driver_licence_class=new FieldString("driver_licence_class",filed_options);options.fields.driver_licence_class.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Официально устроен';filed_options.autoInc=false;options.fields.employed=new FieldBool("employed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Person inn';filed_options.autoInc=false;options.fields.inn=new FieldText("inn",filed_options);Driver_Model.superclass.constructor.call(this,id,options);}
extend(Driver_Model,ModelXML); 
function RawMaterial_Model(options){var id='RawMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Плановый приход';filed_options.autoInc=false;options.fields.planned_procurement=new FieldFloat("planned_procurement",filed_options);options.fields.planned_procurement.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дней завоза';filed_options.autoInc=false;options.fields.supply_days_count=new FieldInt("supply_days_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.concrete_part=new FieldBool("concrete_part",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ord=new FieldInt("ord",filed_options);options.fields.ord.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объем ТС завоза';filed_options.autoInc=false;options.fields.supply_volume=new FieldInt("supply_volume",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.store_days=new FieldInt("store_days",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.min_end_quant=new FieldFloat("min_end_quant",filed_options);options.fields.min_end_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.max_required_quant_tolerance_percent=new FieldFloat("max_required_quant_tolerance_percent",filed_options);options.fields.max_required_quant_tolerance_percent.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.max_fact_quant_tolerance_percent=new FieldFloat("max_fact_quant_tolerance_percent",filed_options);options.fields.max_fact_quant_tolerance_percent.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Цемент,учет в силосе';filed_options.autoInc=false;options.fields.is_cement=new FieldBool("is_cement",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Учет по местам хранения';filed_options.autoInc=false;options.fields.dif_store=new FieldBool("dif_store",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.deleted=new FieldBool("deleted",filed_options);RawMaterial_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterial_Model,ModelXML); 
function RawMaterialProcurRate_Model(options){var id='RawMaterialProcurRate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.supplier_id=new FieldInt("supplier_id",filed_options);options.fields.supplier_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.rate=new FieldFloat("rate",filed_options);options.fields.rate.getValidator().setMaxLength('19');RawMaterialProcurRate_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialProcurRate_Model,ModelXML); 
function RawMaterialProcurRateList_Model(options){var id='RawMaterialProcurRateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.supplier_id=new FieldInt("supplier_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.supplier_descr=new FieldString("supplier_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.rate=new FieldFloat("rate",filed_options);RawMaterialProcurRateList_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialProcurRateList_Model,ModelXML); 
function RawMaterialProcurUpload_Model(options){var id='RawMaterialProcurUpload_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание ошибки';filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Результат';filed_options.autoInc=false;options.fields.result=new FieldBool("result",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кол-во документов';filed_options.autoInc=false;options.fields.doc_count=new FieldInt("doc_count",filed_options);RawMaterialProcurUpload_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialProcurUpload_Model,ModelXML); 
function RawMaterialProcurUploadView_Model(options){var id='RawMaterialProcurUploadView_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.result=new FieldBool("result",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_count=new FieldInt("doc_count",filed_options);RawMaterialProcurUploadView_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialProcurUploadView_Model,ModelXML); 
function RawMaterialMinQuant_Model(options){var id='RawMaterialMinQuant_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');RawMaterialMinQuant_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialMinQuant_Model,ModelXML); 
function RawMaterialConsRateDate_Model(options){var id='RawMaterialConsRateDate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.dt=new FieldDateTime("dt",filed_options);options.fields.dt.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер подбора';filed_options.autoInc=false;options.fields.code=new FieldInt("code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Элемент-основание';filed_options.autoInc=false;options.fields.base_id=new FieldInt("base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);RawMaterialConsRateDate_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialConsRateDate_Model,ModelXML); 
function RawMaterialConsRate_Model(options){var id='RawMaterialConsRate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.rate_date_id=new FieldInt("rate_date_id",filed_options);options.fields.rate_date_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.alias='Марка бетона';filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.raw_material_id=new FieldInt("raw_material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Расход';filed_options.autoInc=false;options.fields.rate=new FieldFloat("rate",filed_options);options.fields.rate.getValidator().setMaxLength('19');RawMaterialConsRate_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialConsRate_Model,ModelXML); 
function RawMaterialConsRateDateList_Model(options){var id='RawMaterialConsRateDateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dt=new FieldDateTime("dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';filed_options.autoInc=false;options.fields.period=new FieldText("period",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='№ подбора';filed_options.autoInc=false;options.fields.code=new FieldInt("code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод ID';filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);RawMaterialConsRateDateList_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialConsRateDateList_Model,ModelXML); 
function PumpPrice_Model(options){var id='PumpPrice_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('200');PumpPrice_Model.superclass.constructor.call(this,id,options);}
extend(PumpPrice_Model,ModelXML); 
function PumpPriceValue_Model(options){var id='PumpPriceValue_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=true;options.fields.pump_price_id=new FieldInt("pump_price_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_from=new FieldFloat("quant_from",filed_options);options.fields.quant_from.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_to=new FieldFloat("quant_to",filed_options);options.fields.quant_to.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price_m=new FieldFloat("price_m",filed_options);options.fields.price_m.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price_fixed=new FieldFloat("price_fixed",filed_options);options.fields.price_fixed.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Гарантированная сумма (если установлено, и объем превышает, то сначала эта сумма, а потом по шкале остаток кубов)';filed_options.autoInc=false;options.fields.price_garanteed=new FieldBool("price_garanteed",filed_options);PumpPriceValue_Model.superclass.constructor.call(this,id,options);}
extend(PumpPriceValue_Model,ModelXML); 
function PumpVehicle_Model(options){var id='PumpVehicle_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_price_id=new FieldInt("pump_price_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_length=new FieldInt("pump_length",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.deleted=new FieldBool("deleted",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldString("comment_text",filed_options);options.fields.comment_text.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cels=new FieldJSONB("phone_cels",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_prices=new FieldJSONB("pump_prices",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.specialist_inform=new FieldBool("specialist_inform",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_ship_inform=new FieldBool("driver_ship_inform",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Минимальное количество м3 для заявки';filed_options.autoInc=false;options.fields.min_order_quant=new FieldInt("min_order_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Минимальный интервал между заявками';filed_options.autoInc=false;options.fields.min_order_time_interval=new FieldInterval("min_order_time_interval",filed_options);PumpVehicle_Model.superclass.constructor.call(this,id,options);}
extend(PumpVehicle_Model,ModelXML); 
function PumpVehicleList_Model(options){var id='PumpVehicleList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_prices_ref=new FieldJSON("pump_prices_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicles_ref=new FieldJSON("pump_vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owners_ref=new FieldJSON("vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.feature=new FieldString("feature",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.make=new FieldString("make",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.plate=new FieldString("plate",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.deleted=new FieldBool("deleted",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_length=new FieldInt("pump_length",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldString("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cels=new FieldJSONB("phone_cels",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_prices=new FieldJSONB("pump_prices",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owners_ar=new FieldArray("vehicle_owners_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.self_ref=new FieldJSONB("self_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.specialist_inform=new FieldBool("specialist_inform",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контакты';filed_options.autoInc=false;options.fields.contact_list=new FieldJSON("contact_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Ids for search';filed_options.autoInc=false;options.fields.contact_ids=new FieldText("contact_ids",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_ship_inform=new FieldBool("driver_ship_inform",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Минимальное количество м3 для заявки';filed_options.autoInc=false;options.fields.min_order_quant=new FieldInt("min_order_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Минимальный интервал между заявками';filed_options.autoInc=false;options.fields.min_order_time_interval=new FieldInterval("min_order_time_interval",filed_options);PumpVehicleList_Model.superclass.constructor.call(this,id,options);}
extend(PumpVehicleList_Model,ModelXML); 
function Order_Model(options){var id='Order_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='клиент';filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);options.fields.client_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Направление';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);options.fields.destination_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка бетона';filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);options.fields.concrete_type_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Прокачка';filed_options.autoInc=false;options.fields.unload_type=new FieldEnum("unload_type",filed_options);filed_options.enumValues='pump,band,none';var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание';filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время до';filed_options.autoInc=false;options.fields.date_time_to=new FieldDateTime("date_time_to",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сот.телефон';filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Разгрузка куб/ч';filed_options.autoInc=false;options.fields.unload_speed=new FieldFloat("unload_speed",filed_options);options.fields.unload_speed.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Язык';filed_options.autoInc=false;options.fields.lang_id=new FieldInt("lang_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость';filed_options.autoInc=false;options.fields.concrete_price=new FieldFloat("concrete_price",filed_options);options.fields.concrete_price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость дост.';filed_options.autoInc=false;options.fields.destination_price=new FieldFloat("destination_price",filed_options);options.fields.destination_price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость прокачки';filed_options.autoInc=false;options.fields.unload_price=new FieldFloat("unload_price",filed_options);options.fields.unload_price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Насос';filed_options.autoInc=false;options.fields.pump_vehicle_id=new FieldInt("pump_vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Оплата на месте';filed_options.autoInc=false;options.fields.pay_cash=new FieldBool("pay_cash",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.total_edit=new FieldBool("total_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.payed=new FieldBool("payed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.under_control=new FieldBool("under_control",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_user_id=new FieldInt("last_modif_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время последнего изменения';filed_options.autoInc=false;options.fields.last_modif_date_time=new FieldDateTimeTZ("last_modif_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Время создания';filed_options.autoInc=false;options.fields.create_date_time=new FieldDateTimeTZ("create_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Для другого завода';filed_options.autoInc=false;options.fields.ext_production=new FieldBool("ext_production",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контакт';filed_options.autoInc=false;options.fields.contact_id=new FieldInt("contact_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Спецификация';filed_options.autoInc=false;options.fields.client_specification_id=new FieldInt("client_specification_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='F';filed_options.autoInc=false;options.fields.f_val=new FieldInt("f_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='W';filed_options.autoInc=false;options.fields.w_val=new FieldInt("w_val",filed_options);Order_Model.superclass.constructor.call(this,id,options);}
extend(Order_Model,ModelXML); 
function OrderList_Model(options){var id='OrderList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид разгрузки';filed_options.autoInc=false;options.fields.unload_type=new FieldString("unload_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Прораб';filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.orders_ref=new FieldJSON("orders_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contacts_ref=new FieldJSON("contacts_ref",filed_options);OrderList_Model.superclass.constructor.call(this,id,options);}
extend(OrderList_Model,ModelXML); 
function OrderPump_Model(options){var id='OrderPump_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment=new FieldText("comment",filed_options);OrderPump_Model.superclass.constructor.call(this,id,options);}
extend(OrderPump_Model,ModelXML); 
function OrderPumpList_Model(options){var id='OrderPumpList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Подача';filed_options.autoInc=false;options.fields.unload_type=new FieldString("unload_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий заявки';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Прораб';filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment=new FieldText("comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Насос';filed_options.autoInc=false;options.fields.pump_vehicles_ref=new FieldJSON("pump_vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_id=new FieldInt("pump_vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Владелец насоса';filed_options.autoInc=false;options.fields.pump_vehicle_owners_ref=new FieldJSON("pump_vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_owner_id=new FieldInt("pump_vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_owners_ar=new FieldArray("pump_vehicle_owners_ar",filed_options);OrderPumpList_Model.superclass.constructor.call(this,id,options);}
extend(OrderPumpList_Model,ModelXML); 
function Offer_Model(options){var id='Offer_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='клиент';filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);options.fields.client_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Направление';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);options.fields.destination_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка бетона';filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);options.fields.concrete_type_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Прокачка';filed_options.autoInc=false;options.fields.unload_type=new FieldEnum("unload_type",filed_options);filed_options.enumValues='pump,band,none';options.fields.unload_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость';filed_options.autoInc=false;options.fields.concrete_price=new FieldFloat("concrete_price",filed_options);options.fields.concrete_price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость дост.';filed_options.autoInc=false;options.fields.destination_price=new FieldFloat("destination_price",filed_options);options.fields.destination_price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость прокачки';filed_options.autoInc=false;options.fields.unload_price=new FieldFloat("unload_price",filed_options);options.fields.unload_price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Итого';filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Результат';filed_options.autoInc=false;options.fields.offer_result=new FieldEnum("offer_result",filed_options);filed_options.enumValues='no,seems_no,will_think,make_order';var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Насос';filed_options.autoInc=false;options.fields.pump_vehicle_id=new FieldInt("pump_vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ast_call_unique_id=new FieldText("ast_call_unique_id",filed_options);Offer_Model.superclass.constructor.call(this,id,options);}
extend(Offer_Model,ModelXML); 
function OrderMakeList_Model(options){var id='OrderMakeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='F';filed_options.autoInc=false;options.fields.f_val=new FieldInt("f_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='W';filed_options.autoInc=false;options.fields.w_val=new FieldInt("w_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.unload_type=new FieldString("unload_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.unload_speed=new FieldFloat("unload_speed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time_to=new FieldTime("date_time_to",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_rest=new FieldFloat("quant_rest",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_ordered_before_now=new FieldFloat("quant_ordered_before_now",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_shipped_before_now=new FieldFloat("quant_shipped_before_now",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_shipped_day_before_now=new FieldFloat("quant_shipped_day_before_now",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_ordered_day=new FieldFloat("quant_ordered_day",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.no_ship_mark=new FieldBool("no_ship_mark",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.payed=new FieldBool("payed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.under_control=new FieldBool("under_control",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pay_cash=new FieldBool("pay_cash",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_owners_ref=new FieldJSON("pump_vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_length=new FieldInt("pump_vehicle_length",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_comment=new FieldString("pump_vehicle_comment",filed_options);OrderMakeList_Model.superclass.constructor.call(this,id,options);}
extend(OrderMakeList_Model,ModelXML); 
function OrderDialog_Model(options){var id='OrderDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.last_modif_users_ref=new FieldJSON("last_modif_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_price=new FieldFloat("destination_price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_cost=new FieldFloat("destination_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_time_rout=new FieldFloat("destination_time_rout",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_distance=new FieldFloat("destination_distance",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_price=new FieldFloat("concrete_price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_cost=new FieldFloat("concrete_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.unload_type=new FieldString("unload_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.unload_speed=new FieldFloat("unload_speed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.time_to=new FieldTime("time_to",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.langs_ref=new FieldJSON("langs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total_edit=new FieldBool("total_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.payed=new FieldBool("payed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pay_cash=new FieldBool("pay_cash",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.unload_cost=new FieldFloat("unload_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.under_control=new FieldBool("under_control",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_phone_cel=new FieldString("pump_vehicle_phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicles_ref=new FieldJSON("pump_vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_prices_ref=new FieldJSON("pump_prices_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.last_modif_date_time=new FieldDateTimeTZ("last_modif_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.create_date_time=new FieldDateTimeTZ("create_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_production=new FieldBool("ext_production",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_exists=new FieldBool("tm_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_activated=new FieldBool("tm_activated",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_photo=new FieldString("tm_photo",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_id=new FieldInt("tm_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_id=new FieldInt("contact_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Спецификация';filed_options.autoInc=false;options.fields.client_specifications_ref=new FieldJSON("client_specifications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='F';filed_options.autoInc=false;options.fields.f_val=new FieldInt("f_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='W';filed_options.autoInc=false;options.fields.w_val=new FieldInt("w_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Взаиморасчеты';filed_options.autoInc=false;options.fields.client_debt=new FieldFloat("client_debt",filed_options);options.fields.client_debt.getValidator().setMaxLength('15');OrderDialog_Model.superclass.constructor.call(this,id,options);}
extend(OrderDialog_Model,ModelXML); 
function Shipment_Model(options){var id='Shipment_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Заявка';filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);options.fields.order_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Экипаж';filed_options.autoInc=false;options.fields.vehicle_schedule_id=new FieldInt("vehicle_schedule_id",filed_options);options.fields.vehicle_schedule_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Баллы';filed_options.autoInc=false;options.fields.client_mark=new FieldInt("client_mark",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Простой';filed_options.autoInc=false;options.fields.demurrage=new FieldInterval("demurrage",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наличие бланков';filed_options.autoInc=false;options.fields.blanks_exist=new FieldBool("blanks_exist",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.owner_agreed=new FieldBool("owner_agreed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.owner_agreed_date_time=new FieldDateTimeTZ("owner_agreed_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.acc_comment=new FieldText("acc_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.acc_comment_shipment=new FieldText("acc_comment_shipment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.owner_pump_agreed=new FieldBool("owner_pump_agreed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.owner_pump_agreed_date_time=new FieldDateTimeTZ("owner_pump_agreed_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_cost=new FieldFloat("pump_cost",filed_options);options.fields.pump_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.pump_cost_edit=new FieldBool("pump_cost_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ship_cost=new FieldFloat("ship_cost",filed_options);options.fields.ship_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.ship_cost_edit=new FieldBool("ship_cost_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_for_client_cost=new FieldFloat("pump_for_client_cost",filed_options);options.fields.pump_for_client_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.pump_for_client_cost_edit=new FieldBool("pump_for_client_cost_edit",filed_options);Shipment_Model.superclass.constructor.call(this,id,options);}
extend(Shipment_Model,ModelXML); 
function ShipmentList_Model(options){var id='ShipmentList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата отгрузки';filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTime("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автомобиль';filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSON("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Владелец';filed_options.autoInc=false;options.fields.vehicle_owners_ref=new FieldJSON("vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена доставки';filed_options.autoInc=false;options.fields.ship_price=new FieldFloat("ship_price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость доставки';filed_options.autoInc=false;options.fields.cost=new FieldFloat("cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость доставки отредактирована';filed_options.autoInc=false;options.fields.ship_cost_edit=new FieldBool("ship_cost_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость насоса отредактирована';filed_options.autoInc=false;options.fields.pump_cost_edit=new FieldBool("pump_cost_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Простой';filed_options.autoInc=false;options.fields.demurrage=new FieldString("demurrage",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стомость простоя';filed_options.autoInc=false;options.fields.demurrage_cost=new FieldFloat("demurrage_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость насос';filed_options.autoInc=false;options.fields.pump_cost=new FieldFloat("pump_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Насос';filed_options.autoInc=false;options.fields.pump_vehicles_ref=new FieldJSON("pump_vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_id=new FieldInt("pump_vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Насос,владелец';filed_options.autoInc=false;options.fields.pump_vehicle_owners_ref=new FieldJSON("pump_vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий (насос)';filed_options.autoInc=false;options.fields.acc_comment=new FieldText("acc_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий (миксер)';filed_options.autoInc=false;options.fields.acc_comment_shipment=new FieldText("acc_comment_shipment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_owner_id=new FieldInt("pump_vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipped=new FieldBool("shipped",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Оценка';filed_options.autoInc=false;options.fields.client_mark=new FieldInt("client_mark",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наличие бланков';filed_options.autoInc=false;options.fields.blanks_exist=new FieldBool("blanks_exist",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Согласовано миксер';filed_options.autoInc=false;options.fields.owner_agreed=new FieldBool("owner_agreed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата согласования миксер';filed_options.autoInc=false;options.fields.owner_agreed_date_time=new FieldDateTimeTZ("owner_agreed_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Согласовано насос';filed_options.autoInc=false;options.fields.owner_pump_agreed=new FieldBool("owner_pump_agreed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата согласования насос';filed_options.autoInc=false;options.fields.owner_pump_agreed_date_time=new FieldDateTimeTZ("owner_pump_agreed_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_for_client_cost=new FieldFloat("pump_for_client_cost",filed_options);options.fields.pump_for_client_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.pump_for_client_cost_edit=new FieldBool("pump_for_client_cost_edit",filed_options);ShipmentList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentList_Model,ModelXML); 
function ShipmentDialog_Model(options){var id='ShipmentDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Заявка';filed_options.autoInc=false;options.fields.orders_ref=new FieldJSON("orders_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTime("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Экипаж';filed_options.autoInc=false;options.fields.vehicle_schedules_ref=new FieldJSON("vehicle_schedules_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгружен';filed_options.autoInc=false;options.fields.shipped=new FieldBool("shipped",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Оценка';filed_options.autoInc=false;options.fields.client_mark=new FieldInt("client_mark",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Простой';filed_options.autoInc=false;options.fields.demurrage=new FieldString("demurrage",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наличие бланков';filed_options.autoInc=false;options.fields.blanks_exist=new FieldBool("blanks_exist",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий бухгалетрии';filed_options.autoInc=false;options.fields.acc_comment=new FieldText("acc_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий (миксер)';filed_options.autoInc=false;options.fields.acc_comment_shipment=new FieldText("acc_comment_shipment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость насос';filed_options.autoInc=false;options.fields.pump_cost=new FieldFloat("pump_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_cost_default=new FieldFloat("pump_cost_default",filed_options);options.fields.pump_cost_default.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_cost_edit=new FieldBool("pump_cost_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ship_cost=new FieldFloat("ship_cost",filed_options);options.fields.ship_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ship_cost_default=new FieldFloat("ship_cost_default",filed_options);options.fields.ship_cost_default.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ship_cost_edit=new FieldBool("ship_cost_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Насос';filed_options.autoInc=false;options.fields.pump_vehicles_ref=new FieldJSON("pump_vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_last_shipment=new FieldBool("order_last_shipment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_for_client_cost=new FieldFloat("pump_for_client_cost",filed_options);options.fields.pump_for_client_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_for_client_cost_default=new FieldFloat("pump_for_client_cost_default",filed_options);options.fields.pump_for_client_cost_default.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_for_client_cost_edit=new FieldBool("pump_for_client_cost_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Статус';filed_options.autoInc=false;options.fields.vs_state=new FieldString("vs_state",filed_options);ShipmentDialog_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentDialog_Model,ModelXML); 
function ShipmentForOrderList_Model(options){var id='ShipmentForOrderList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Назначен';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгружен';filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTime("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Экипаж';filed_options.autoInc=false;options.fields.vehicle_schedules_ref=new FieldJSON("vehicle_schedules_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Статус';filed_options.autoInc=false;options.fields.vs_state=new FieldString("vs_state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгружен';filed_options.autoInc=false;options.fields.shipped=new FieldBool("shipped",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);ShipmentForOrderList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentForOrderList_Model,ModelXML); 
function ShipmentPumpList_Model(options){var id='ShipmentPumpList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.alias='Заявка';filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.last_ship_id=new FieldInt("last_ship_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер заявки';filed_options.autoInc=false;options.fields.order_number=new FieldString("order_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость';filed_options.autoInc=false;options.fields.pump_cost=new FieldFloat("pump_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автомобиль';filed_options.autoInc=false;options.fields.pump_vehicles_ref=new FieldJSON("pump_vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_id=new FieldInt("pump_vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_owner_id=new FieldInt("pump_vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Владелец';filed_options.autoInc=false;options.fields.pump_vehicle_owners_ref=new FieldJSON("pump_vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий бухгалетрии';filed_options.autoInc=false;options.fields.acc_comment=new FieldText("acc_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Согласовано насос';filed_options.autoInc=false;options.fields.owner_pump_agreed=new FieldBool("owner_pump_agreed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата согласования насос';filed_options.autoInc=false;options.fields.owner_pump_agreed_date_time=new FieldDateTimeTZ("owner_pump_agreed_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);ShipmentPumpList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentPumpList_Model,ModelXML); 
function ShipmentDateList_Model(options){var id='ShipmentDateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.ship_date=new FieldDateTime("ship_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость доставки';filed_options.autoInc=false;options.fields.ship_cost=new FieldFloat("ship_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Простой';filed_options.autoInc=false;options.fields.demurrage=new FieldFloat("demurrage",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='За простой';filed_options.autoInc=false;options.fields.demurrage_cost=new FieldFloat("demurrage_cost",filed_options);ShipmentDateList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentDateList_Model,ModelXML); 
function ShipmentTimeList_Model(options){var id='ShipmentTimeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';filed_options.autoInc=false;options.fields.id=new FieldString("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Код клиента';filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.client_descr=new FieldString("client_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Код объекта';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destination_descr=new FieldString("destination_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Код завода';filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_site_descr=new FieldString("production_site_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объем';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер ТС';filed_options.autoInc=false;options.fields.vehicle_descr=new FieldString("vehicle_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ТС';filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель код';filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.driver_descr=new FieldString("driver_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Назначение';filed_options.autoInc=false;options.fields.assign_date_time=new FieldDateTime("assign_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Назначение';filed_options.autoInc=false;options.fields.assign_date_time_descr=new FieldString("assign_date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгрузка';filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTime("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгрузка';filed_options.autoInc=false;options.fields.ship_date_time_descr=new FieldString("ship_date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Опоздание диспетчара (мин)';filed_options.autoInc=false;options.fields.dispatcher_fail_min=new FieldInt("dispatcher_fail_min",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Норма погрузки (мин)';filed_options.autoInc=false;options.fields.ship_time_norm=new FieldInt("ship_time_norm",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Опоздание оператора (мин)';filed_options.autoInc=false;options.fields.operator_fail_min=new FieldInt("operator_fail_min",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Опоздание общее (мин)';filed_options.autoInc=false;options.fields.total_fail_min=new FieldInt("total_fail_min",filed_options);ShipmentTimeList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentTimeList_Model,ModelXML); 
function ShipmentOperator_Model(options){var id='ShipmentOperator_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSON("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipped=new FieldBool("shipped",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ship_norm_min=new FieldInt("ship_norm_min",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ship_fact_min=new FieldInt("ship_fact_min",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ship_bal_min=new FieldInt("ship_bal_min",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tolerance_exceeded=new FieldBool("tolerance_exceeded",filed_options);ShipmentOperator_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentOperator_Model,ModelXML); 
function VehicleSchedule_Model(options){var id='VehicleSchedule_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.schedule_date=new FieldDate("schedule_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автомобиль';filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);options.fields.vehicle_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);options.fields.driver_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);options.fields.production_base_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто внес данные';filed_options.autoInc=false;options.fields.edit_user_id=new FieldInt("edit_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Когда внес данные';filed_options.autoInc=false;options.fields.edit_date_time=new FieldDateTimeTZ("edit_date_time",filed_options);VehicleSchedule_Model.superclass.constructor.call(this,id,options);}
extend(VehicleSchedule_Model,ModelXML); 
function OutComment_Model(options){var id='OutComment_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_schedule_id=new FieldInt("vehicle_schedule_id",filed_options);options.fields.vehicle_schedule_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);OutComment_Model.superclass.constructor.call(this,id,options);}
extend(OutComment_Model,ModelXML); 
function VehicleScheduleList_Model(options){var id='VehicleScheduleList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.schedule_date=new FieldDate("schedule_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSON("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldEnum("state",filed_options);filed_options.enumValues='shift,free,assigned,busy,left_for_dest,at_dest,left_for_base,out_from_shift,out,shift_added';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_date_time=new FieldDateTime("state_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.out_comment=new FieldString("out_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.load_capacity=new FieldFloat("load_capacity",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owners_ref=new FieldJSON("vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_bases_ref=new FieldJSON("production_bases_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);VehicleScheduleList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleList_Model,ModelXML); 
function VehicleScheduleComplete_Model(options){var id='VehicleScheduleComplete_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_schedule_descr=new FieldString("vehicle_schedule_descr",filed_options);VehicleScheduleComplete_Model.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleComplete_Model,ModelXML); 
function VehicleScheduleState_Model(options){var id='VehicleScheduleState_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Состояние';filed_options.autoInc=false;options.fields.state=new FieldEnum("state",filed_options);filed_options.enumValues='shift,free,assigned,busy,left_for_dest,at_dest,left_for_base,out_from_shift,out,shift_added';options.fields.state.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Расписание';filed_options.autoInc=false;options.fields.schedule_id=new FieldInt("schedule_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгрузка';filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ID производственной базы';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);VehicleScheduleState_Model.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleState_Model,ModelXML); 
function ShipmentRep_Model(options){var id='ShipmentRep_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTime("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Смена';filed_options.autoInc=false;options.fields.shift_descr=new FieldDate("shift_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_id=new FieldInt("concrete_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка бетона';filed_options.autoInc=false;options.fields.concrete_descr=new FieldString("concrete_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.client_descr=new FieldString("client_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destination_descr=new FieldString("destination_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.driver_descr=new FieldString("driver_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автомобиль';filed_options.autoInc=false;options.fields.vehicle_descr=new FieldString("vehicle_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Свойство автом.';filed_options.autoInc=false;options.fields.vehicle_feature=new FieldString("vehicle_feature",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Владелец автом.';filed_options.autoInc=false;options.fields.vehicle_owner=new FieldString("vehicle_owner",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant_shipped=new FieldFloat("quant_shipped",filed_options);ShipmentRep_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentRep_Model,ModelXML); 
function Supplier_Model(options){var id='Supplier_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Полное наименование';filed_options.autoInc=false;options.fields.name_full=new FieldText("name_full",filed_options);options.fields.name_full.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Мобильный телефон';filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Мобильный телефон';filed_options.autoInc=false;options.fields.tel2=new FieldString("tel2",filed_options);options.fields.tel2.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.lang_id=new FieldInt("lang_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_ref_scales=new FieldString("ext_ref_scales",filed_options);options.fields.ext_ref_scales.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.lang_id=new FieldInt("lang_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Уведомлять о заказе';filed_options.autoInc=false;options.fields.order_notification=new FieldBool("order_notification",filed_options);Supplier_Model.superclass.constructor.call(this,id,options);}
extend(Supplier_Model,ModelXML); 
function SupplierList_Model(options){var id='SupplierList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контакты';filed_options.autoInc=false;options.fields.contact_list=new FieldJSON("contact_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контакты';filed_options.autoInc=false;options.fields.contact_ids=new FieldText("contact_ids",filed_options);SupplierList_Model.superclass.constructor.call(this,id,options);}
extend(SupplierList_Model,ModelXML); 
function DOCMaterialProcurement_Model(options){var id='DOCMaterialProcurement_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);options.fields.number.getValidator().setMaxLength('12');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_ref=new FieldString("doc_ref",filed_options);options.fields.doc_ref.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';filed_options.autoInc=false;options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставщик';filed_options.autoInc=false;options.fields.supplier_id=new FieldInt("supplier_id",filed_options);options.fields.supplier_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carrier_id=new FieldInt("carrier_id",filed_options);options.fields.carrier_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.driver=new FieldString("driver",filed_options);options.fields.driver.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='гос.номер';filed_options.autoInc=false;options.fields.vehicle_plate=new FieldString("vehicle_plate",filed_options);options.fields.vehicle_plate.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Силос';filed_options.autoInc=false;options.fields.cement_silos_id=new FieldInt("cement_silos_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Брутто';filed_options.autoInc=false;options.fields.quant_gross=new FieldFloat("quant_gross",filed_options);options.fields.quant_gross.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Нетто';filed_options.autoInc=false;options.fields.quant_net=new FieldFloat("quant_net",filed_options);options.fields.quant_net.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.store=new FieldText("store",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sender_name=new FieldText("sender_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Брутто по документам';filed_options.autoInc=false;options.fields.doc_quant_gross=new FieldFloat("doc_quant_gross",filed_options);options.fields.doc_quant_gross.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Нетто по документам';filed_options.autoInc=false;options.fields.doc_quant_net=new FieldFloat("doc_quant_net",filed_options);options.fields.doc_quant_net.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_user_id=new FieldInt("last_modif_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время последнего изменения';filed_options.autoInc=false;options.fields.last_modif_date_time=new FieldDateTimeTZ("last_modif_date_time",filed_options);DOCMaterialProcurement_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurement_Model,ModelXML); 
function DOCMaterialProcurementList_Model(options){var id='DOCMaterialProcurementList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);options.fields.number.getValidator().setMaxLength('12');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_ref=new FieldString("doc_ref",filed_options);options.fields.doc_ref.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';filed_options.autoInc=false;options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставщик';filed_options.autoInc=false;options.fields.supplier_id=new FieldInt("supplier_id",filed_options);options.fields.supplier_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carrier_id=new FieldInt("carrier_id",filed_options);options.fields.carrier_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.driver=new FieldString("driver",filed_options);options.fields.driver.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='гос.номер';filed_options.autoInc=false;options.fields.vehicle_plate=new FieldString("vehicle_plate",filed_options);options.fields.vehicle_plate.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Силос';filed_options.autoInc=false;options.fields.cement_silos_id=new FieldInt("cement_silos_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Брутто';filed_options.autoInc=false;options.fields.quant_gross=new FieldFloat("quant_gross",filed_options);options.fields.quant_gross.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Нетто';filed_options.autoInc=false;options.fields.quant_net=new FieldFloat("quant_net",filed_options);options.fields.quant_net.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.store=new FieldText("store",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sender_name=new FieldText("sender_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Брутто по документам';filed_options.autoInc=false;options.fields.doc_quant_gross=new FieldFloat("doc_quant_gross",filed_options);options.fields.doc_quant_gross.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Нетто по документам';filed_options.autoInc=false;options.fields.doc_quant_net=new FieldFloat("doc_quant_net",filed_options);options.fields.doc_quant_net.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_user_id=new FieldInt("last_modif_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время последнего изменения';filed_options.autoInc=false;options.fields.last_modif_date_time=new FieldDateTimeTZ("last_modif_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставщик';filed_options.autoInc=false;options.fields.suppliers_ref=new FieldJSON("suppliers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carriers_ref=new FieldJSON("carriers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.materials_ref=new FieldJSON("materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Силос';filed_options.autoInc=false;options.fields.cement_silos_ref=new FieldJSON("cement_silos_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_bases_ref=new FieldJSON("production_bases_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_users_ref=new FieldJSON("last_modif_users_ref",filed_options);DOCMaterialProcurementList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementList_Model,ModelXML); 
function DOCMaterialInventory_Model(options){var id='DOCMaterialInventory_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.number=new FieldInt("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';filed_options.autoInc=false;options.fields.processed=new FieldBool("processed",filed_options);DOCMaterialInventory_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialInventory_Model,ModelXML); 
function DOCMaterialInventoryList_Model(options){var id='DOCMaterialInventoryList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.processed=new FieldString("processed",filed_options);DOCMaterialInventoryList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialInventoryList_Model,ModelXML); 
function DOCMaterialInventoryDOCTMaterial_Model(options){var id='DOCMaterialInventoryDOCTMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');DOCMaterialInventoryDOCTMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialInventoryDOCTMaterial_Model,ModelXML); 
function DOCMaterialInventoryDOCTMaterialList_Model(options){var id='DOCMaterialInventoryDOCTMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';filed_options.autoInc=false;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);DOCMaterialInventoryDOCTMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialInventoryDOCTMaterialList_Model,ModelXML); 
function DOCMaterialInventoryDOCTFMaterial_Model(options){var id='DOCMaterialInventoryDOCTFMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');DOCMaterialInventoryDOCTFMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialInventoryDOCTFMaterial_Model,ModelXML); 
function RGMaterialConsuption_Model(options){var id='RGMaterialConsuption_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество бетона';filed_options.autoInc=false;options.fields.concrete_quant=new FieldFloat("concrete_quant",filed_options);options.fields.concrete_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество материалов';filed_options.autoInc=false;options.fields.material_quant=new FieldFloat("material_quant",filed_options);options.fields.material_quant.getValidator().setMaxLength('19');RGMaterialConsuption_Model.superclass.constructor.call(this,id,options);}
extend(RGMaterialConsuption_Model,ModelXML); 
function RAMaterialConsumption_Model(options){var id='RAMaterialConsumption_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид документа';filed_options.autoInc=false;options.fields.doc_type=new FieldEnum("doc_type",filed_options);filed_options.enumValues='order,material_procurement,shipment,material_fact_consumption,material_fact_consumption_correction,material_fact_balance_correction,cement_silo_reset,cement_silo_balance_reset';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Бетон';filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ТС';filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество бетона';filed_options.autoInc=false;options.fields.concrete_quant=new FieldFloat("concrete_quant",filed_options);options.fields.concrete_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество материалов';filed_options.autoInc=false;options.fields.material_quant=new FieldFloat("material_quant",filed_options);options.fields.material_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество материалов';filed_options.autoInc=false;options.fields.material_quant_norm=new FieldFloat("material_quant_norm",filed_options);options.fields.material_quant_norm.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество материалов';filed_options.autoInc=false;options.fields.material_quant_corrected=new FieldFloat("material_quant_corrected",filed_options);options.fields.material_quant_corrected.getValidator().setMaxLength('19');RAMaterialConsumption_Model.superclass.constructor.call(this,id,options);}
extend(RAMaterialConsumption_Model,ModelXML); 
function RAMaterialConsumptionList_Model(options){var id='RAMaterialConsumptionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldString("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldString("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_descr=new FieldString("concrete_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldString("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_descr=new FieldString("vehicle_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_id=new FieldString("driver_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_descr=new FieldString("driver_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldString("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_quant=new FieldString("material_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_quant=new FieldString("concrete_quant",filed_options);RAMaterialConsumptionList_Model.superclass.constructor.call(this,id,options);}
extend(RAMaterialConsumptionList_Model,ModelXML); 
function RGMaterial_Model(options){var id='RGMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');RGMaterial_Model.superclass.constructor.call(this,id,options);}
extend(RGMaterial_Model,ModelXML); 
function RAMaterial_Model(options){var id='RAMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дебет';filed_options.autoInc=false;options.fields.deb=new FieldBool("deb",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид документа';filed_options.autoInc=false;options.fields.doc_type=new FieldEnum("doc_type",filed_options);filed_options.enumValues='order,material_procurement,shipment,material_fact_consumption,material_fact_consumption_correction,material_fact_balance_correction,cement_silo_reset,cement_silo_balance_reset';options.fields.doc_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);options.fields.production_base_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');RAMaterial_Model.superclass.constructor.call(this,id,options);}
extend(RAMaterial_Model,ModelXML); 
function Shift_Model(options){var id='Shift_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date=new FieldDateTime("date",filed_options);options.fields.date.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Закрыта';filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата закрытия';filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTime("close_date_time",filed_options);Shift_Model.superclass.constructor.call(this,id,options);}
extend(Shift_Model,ModelXML); 
function Lang_Model(options){var id='Lang_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);Lang_Model.superclass.constructor.call(this,id,options);}
extend(Lang_Model,ModelXML); 
function SMSPattern_Model(options){var id='SMSPattern_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Язык';filed_options.autoInc=false;options.fields.lang_id=new FieldInt("lang_id",filed_options);options.fields.lang_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тип SMS';filed_options.autoInc=false;options.fields.sms_type=new FieldEnum("sms_type",filed_options);filed_options.enumValues='order,ship,remind,procur,order_for_pump_ins,order_for_pump_upd,order_for_pump_del,remind_for_pump,client_thank,vehicle_zone_violation,vehicle_tracker_malfunction,efficiency_warn,material_balance,mixer_route,order_cancel,tm_invite,new_pwd';options.fields.sms_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Шаблон';filed_options.autoInc=false;options.fields.pattern=new FieldText("pattern",filed_options);options.fields.pattern.getValidator().setRequired(true);SMSPattern_Model.superclass.constructor.call(this,id,options);}
extend(SMSPattern_Model,ModelXML); 
function SMSPatternList_Model(options){var id='SMSPatternList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sms_type=new FieldString("sms_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.langs_ref=new FieldJSON("langs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pattern=new FieldText("pattern",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_list=new FieldString("user_list",filed_options);SMSPatternList_Model.superclass.constructor.call(this,id,options);}
extend(SMSPatternList_Model,ModelXML); 
function VehicleFeatureList_Model(options){var id='VehicleFeatureList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.feature=new FieldString("feature",filed_options);VehicleFeatureList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleFeatureList_Model,ModelXML); 
function VehicleMakeList_Model(options){var id='VehicleMakeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.make=new FieldString("make",filed_options);VehicleMakeList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleMakeList_Model,ModelXML); 
function VehicleOwnerList_Model(options){var id='VehicleOwnerList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_list=new FieldText("client_list",filed_options);VehicleOwnerList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleOwnerList_Model,ModelXML); 
function LabData_Model(options){var id='LabData_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Отгрузка';filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);options.fields.shipment_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ОК см';filed_options.autoInc=false;options.fields.ok_sm=new FieldFloat("ok_sm",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='масса';filed_options.autoInc=false;options.fields.weight=new FieldFloat("weight",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='масса норм';filed_options.autoInc=false;options.fields.weight_norm=new FieldFloat("weight_norm",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='%';filed_options.autoInc=false;options.fields.percent_1=new FieldFloat("percent_1",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p1';filed_options.autoInc=false;options.fields.p_1=new FieldFloat("p_1",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p2';filed_options.autoInc=false;options.fields.p_2=new FieldFloat("p_2",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p3';filed_options.autoInc=false;options.fields.p_3=new FieldFloat("p_3",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p4';filed_options.autoInc=false;options.fields.p_4=new FieldFloat("p_4",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p7';filed_options.autoInc=false;options.fields.p_7=new FieldFloat("p_7",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p28';filed_options.autoInc=false;options.fields.p_28=new FieldFloat("p_28",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p_norm';filed_options.autoInc=false;options.fields.p_norm=new FieldFloat("p_norm",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='percent_2';filed_options.autoInc=false;options.fields.percent_2=new FieldFloat("percent_2",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.lab_comment=new FieldText("lab_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='№';filed_options.autoInc=false;options.fields.num=new FieldText("num",filed_options);LabData_Model.superclass.constructor.call(this,id,options);}
extend(LabData_Model,ModelXML); 
function LabDataList_Model(options){var id='LabDataList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.ship_date_time_descr=new FieldString("ship_date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Заказчик';filed_options.autoInc=false;options.fields.client_descr=new FieldString("client_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.client_phone=new FieldString("client_phone",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destination_descr=new FieldString("destination_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_type_descr=new FieldString("concrete_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кол-во';filed_options.autoInc=false;options.fields.quant_descr=new FieldString("quant_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='№';filed_options.autoInc=false;options.fields.num=new FieldString("num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.driver_descr=new FieldString("driver_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ОК см';filed_options.autoInc=false;options.fields.ok_sm=new FieldFloat("ok_sm",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='масса';filed_options.autoInc=false;options.fields.weight=new FieldFloat("weight",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='масса норм';filed_options.autoInc=false;options.fields.weight_norm=new FieldFloat("weight_norm",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='%';filed_options.autoInc=false;options.fields.percent_1=new FieldFloat("percent_1",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p1';filed_options.autoInc=false;options.fields.p_1=new FieldFloat("p_1",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p2';filed_options.autoInc=false;options.fields.p_2=new FieldFloat("p_2",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p3';filed_options.autoInc=false;options.fields.p_3=new FieldFloat("p_3",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p4';filed_options.autoInc=false;options.fields.p_4=new FieldFloat("p_4",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p7';filed_options.autoInc=false;options.fields.p_7=new FieldFloat("p_7",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='p_norm';filed_options.autoInc=false;options.fields.p_norm=new FieldFloat("p_norm",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='percent_2';filed_options.autoInc=false;options.fields.percent_2=new FieldFloat("percent_2",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.lab_comment=new FieldText("lab_comment",filed_options);LabDataList_Model.superclass.constructor.call(this,id,options);}
extend(LabDataList_Model,ModelXML); 
function LabEntry_Model(options){var id='LabEntry_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Отгрузка';filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);options.fields.shipment_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Подборы';filed_options.autoInc=false;options.fields.samples=new FieldText("samples",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материалы';filed_options.autoInc=false;options.fields.materials=new FieldText("materials",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='OK2';filed_options.autoInc=false;options.fields.ok2=new FieldText("ok2",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='f';filed_options.autoInc=false;options.fields.f=new FieldText("f",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='w';filed_options.autoInc=false;options.fields.w=new FieldText("w",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время';filed_options.autoInc=false;options.fields.time=new FieldText("time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Подбор';filed_options.autoInc=false;options.fields.rate_date_id=new FieldInt("rate_date_id",filed_options);LabEntry_Model.superclass.constructor.call(this,id,options);}
extend(LabEntry_Model,ModelXML); 
function LabEntryList_Model(options){var id='LabEntryList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Основной ключ! тк. lab_entry может быть NULL';filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Подборы';filed_options.autoInc=false;options.fields.samples_exist=new FieldBool("samples_exist",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ok=new FieldInt("ok",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.weight=new FieldInt("weight",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.p7=new FieldString("p7",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.p28=new FieldString("p28",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Подборы';filed_options.autoInc=false;options.fields.samples=new FieldText("samples",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материалы';filed_options.autoInc=false;options.fields.materials=new FieldText("materials",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Заказчик';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.client_phone=new FieldString("client_phone",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ОК2';filed_options.autoInc=false;options.fields.ok2=new FieldText("ok2",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время';filed_options.autoInc=false;options.fields.time=new FieldText("time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Подбор';filed_options.autoInc=false;options.fields.raw_material_cons_rate_dates_ref=new FieldJSON("raw_material_cons_rate_dates_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.rate_date_id=new FieldInt("rate_date_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Нет добавки';filed_options.autoInc=false;options.fields.no_additive_material=new FieldBool("no_additive_material",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='f';filed_options.autoInc=false;options.fields.f=new FieldText("f",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='w';filed_options.autoInc=false;options.fields.w=new FieldText("w",filed_options);LabEntryList_Model.superclass.constructor.call(this,id,options);}
extend(LabEntryList_Model,ModelXML); 
function LabEntryDetail_Model(options){var id='LabEntryDetail_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id_key=new FieldInt("id_key",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгрузка';filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);options.fields.shipment_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ОК';filed_options.autoInc=false;options.fields.ok=new FieldInt("ok",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Масса';filed_options.autoInc=false;options.fields.weight=new FieldInt("weight",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='КН';filed_options.autoInc=false;options.fields.kn=new FieldInt("kn",filed_options);LabEntryDetail_Model.superclass.constructor.call(this,id,options);}
extend(LabEntryDetail_Model,ModelXML); 
function LabEntryDetailList_Model(options){var id='LabEntryDetailList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id_key=new FieldInt("id_key",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.code=new FieldString("code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTime("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ОК';filed_options.autoInc=false;options.fields.ok=new FieldInt("ok",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Масса';filed_options.autoInc=false;options.fields.weight=new FieldInt("weight",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='П7%';filed_options.autoInc=false;options.fields.p7=new FieldInt("p7",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='П28%';filed_options.autoInc=false;options.fields.p28=new FieldInt("p28",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.p_date=new FieldDate("p_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kn=new FieldInt("kn",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mpa=new FieldString("mpa",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mpa_avg=new FieldString("mpa_avg",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pres_norm=new FieldString("pres_norm",filed_options);LabEntryDetailList_Model.superclass.constructor.call(this,id,options);}
extend(LabEntryDetailList_Model,ModelXML); 
function OrderFromClient_Model(options){var id='OrderFromClient_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type=new FieldString("concrete_type",filed_options);options.fields.concrete_type.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dest=new FieldText("dest",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.pump=new FieldBool("pump",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);OrderFromClient_Model.superclass.constructor.call(this,id,options);}
extend(OrderFromClient_Model,ModelXML); 
function OrderFromClientList_Model(options){var id='OrderFromClientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.tel_descr=new FieldString("tel_descr",filed_options);options.fields.tel_descr.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_type=new FieldString("concrete_type",filed_options);options.fields.concrete_type.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.dest=new FieldText("dest",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';filed_options.autoInc=false;options.fields.total_descr=new FieldString("total_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Есть насос';filed_options.autoInc=false;options.fields.pump=new FieldBool("pump",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);OrderFromClientList_Model.superclass.constructor.call(this,id,options);}
extend(OrderFromClientList_Model,ModelXML); 
function SupplierOrder_Model(options){var id='SupplierOrder_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.date=new FieldDate("date",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.supplier_id=new FieldInt("supplier_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicles=new FieldInt("vehicles",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sms_id=new FieldText("sms_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sms_confirmed=new FieldBool("sms_confirmed",filed_options);SupplierOrder_Model.superclass.constructor.call(this,id,options);}
extend(SupplierOrder_Model,ModelXML); 
function RawMaterialStoreUserData_Model(options){var id='RawMaterialStoreUserData_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('15');RawMaterialStoreUserData_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialStoreUserData_Model,ModelXML); 
function RawMaterialStoreUserDataList_Model(options){var id='RawMaterialStoreUserDataList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('15');RawMaterialStoreUserDataList_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialStoreUserDataList_Model,ModelXML); 
function Employee_Model(options){var id='Employee_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('80');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.employed=new FieldBool("employed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inn=new FieldText("inn",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post=new FieldText("post",filed_options);Employee_Model.superclass.constructor.call(this,id,options);}
extend(Employee_Model,ModelXML); 
function EmployeeWorkTimeSchedule_Model(options){var id='EmployeeWorkTimeSchedule_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);options.fields.employee_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.day=new FieldDate("day",filed_options);options.fields.day.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.hours=new FieldInt("hours",filed_options);options.fields.hours.getValidator().setRequired(true);EmployeeWorkTimeSchedule_Model.superclass.constructor.call(this,id,options);}
extend(EmployeeWorkTimeSchedule_Model,ModelXML); 
function EmployeeWorkTimeScheduleList_Model(options){var id='EmployeeWorkTimeScheduleList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник';filed_options.autoInc=false;options.fields.employee_descr=new FieldString("employee_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.day=new FieldDate("day",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.day_off=new FieldBool("day_off",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Часы';filed_options.autoInc=false;options.fields.hours=new FieldInt("hours",filed_options);EmployeeWorkTimeScheduleList_Model.superclass.constructor.call(this,id,options);}
extend(EmployeeWorkTimeScheduleList_Model,ModelXML); 
function AstCall_Model(options){var id='AstCall_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.unique_id=new FieldText("unique_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.caller_id_num=new FieldString("caller_id_num",filed_options);options.fields.caller_id_num.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext=new FieldString("ext",filed_options);options.fields.ext.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.start_time=new FieldDateTime("start_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_time=new FieldDateTime("end_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.call_type=new FieldEnum("call_type",filed_options);filed_options.enumValues='in,out';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id_to=new FieldInt("user_id_to",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.answer_unique_id=new FieldInt("answer_unique_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dt=new FieldDateTime("dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.manager_comment=new FieldText("manager_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.informed=new FieldBool("informed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.create_date=new FieldString("create_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.record_link=new FieldText("record_link",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.call_status=new FieldText("call_status",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_id=new FieldInt("contact_id",filed_options);AstCall_Model.superclass.constructor.call(this,id,options);}
extend(AstCall_Model,ModelXML); 
function AstCallList_Model(options){var id='AstCallList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.unique_id=new FieldText("unique_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.call_type=new FieldString("call_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.start_time=new FieldDateTime("start_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_time=new FieldDateTime("end_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dur_time=new FieldTime("dur_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.manager_comment=new FieldText("manager_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_comment=new FieldText("client_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_create_date=new FieldString("client_create_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ours=new FieldString("ours",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_type_id=new FieldString("client_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_types_ref=new FieldJSON("client_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_come_from_id=new FieldString("client_come_from_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_come_from_ref=new FieldJSON("client_come_from_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_kind=new FieldString("client_kind",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.caller_id_num=new FieldString("caller_id_num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext=new FieldString("ext",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.num=new FieldString("num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.offer_quant=new FieldFloat("offer_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.offer_total=new FieldFloat("offer_total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.offer_result=new FieldString("offer_result",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.record_link=new FieldText("record_link",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.call_status=new FieldText("call_status",filed_options);AstCallList_Model.superclass.constructor.call(this,id,options);}
extend(AstCallList_Model,ModelXML); 
function AstCallClientHistList_Model(options){var id='AstCallClientHistList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.unique_id=new FieldText("unique_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время';filed_options.autoInc=false;options.fields.dt_descr=new FieldString("dt_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.manager_comment=new FieldText("manager_comment",filed_options);AstCallClientHistList_Model.superclass.constructor.call(this,id,options);}
extend(AstCallClientHistList_Model,ModelXML); 
function AstCallClientShipHistList_Model(options){var id='AstCallClientShipHistList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.unique_id=new FieldText("unique_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время';filed_options.autoInc=false;options.fields.dt_descr=new FieldString("dt_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.manager_comment=new FieldText("manager_comment",filed_options);AstCallClientShipHistList_Model.superclass.constructor.call(this,id,options);}
extend(AstCallClientShipHistList_Model,ModelXML); 
function UserMacAddress_Model(options){var id='UserMacAddress_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mac_address=new FieldString("mac_address",filed_options);options.fields.mac_address.getValidator().setRequired(true);options.fields.mac_address.getValidator().setMaxLength('17');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mac_address_hash=new FieldString("mac_address_hash",filed_options);options.fields.mac_address_hash.getValidator().setMaxLength('32');UserMacAddress_Model.superclass.constructor.call(this,id,options);}
extend(UserMacAddress_Model,ModelXML); 
function UserMacAddressList_Model(options){var id='UserMacAddressList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mac_address=new FieldString("mac_address",filed_options);options.fields.mac_address.getValidator().setRequired(true);options.fields.mac_address.getValidator().setMaxLength('17');UserMacAddressList_Model.superclass.constructor.call(this,id,options);}
extend(UserMacAddressList_Model,ModelXML); 
function ClientTel_Model(options){var id='ClientTel_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ФИО';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setRequired(true);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Эл.почта';filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Должность';filed_options.autoInc=false;options.fields.post=new FieldString("post",filed_options);options.fields.post.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.search=new FieldText("search",filed_options);ClientTel_Model.superclass.constructor.call(this,id,options);}
extend(ClientTel_Model,ModelXML); 
function ClientType_Model(options){var id='ClientType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');ClientType_Model.superclass.constructor.call(this,id,options);}
extend(ClientType_Model,ModelXML); 
function ClientComeFrom_Model(options){var id='ClientComeFrom_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');ClientComeFrom_Model.superclass.constructor.call(this,id,options);}
extend(ClientComeFrom_Model,ModelXML); 
function ClientDebt_Model(options){var id='ClientDebt_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.firm_id=new FieldInt("firm_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_contract_id=new FieldInt("client_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.debt_total=new FieldFloat("debt_total",filed_options);options.fields.debt_total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.update_date=new FieldDateTimeTZ("update_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dogovor_ref_1c=new FieldString("dogovor_ref_1c",filed_options);options.fields.dogovor_ref_1c.getValidator().setMaxLength('36');ClientDebt_Model.superclass.constructor.call(this,id,options);}
extend(ClientDebt_Model,ModelXML); 
function Quarry_Model(options){var id='Quarry_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('50');Quarry_Model.superclass.constructor.call(this,id,options);}
extend(Quarry_Model,ModelXML); 
function SandQuarryVal_Model(options){var id='SandQuarryVal_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.day=new FieldDate("day",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quarry_id=new FieldInt("quarry_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_mkr=new FieldFloat("v_mkr",filed_options);options.fields.v_mkr.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_2_5=new FieldFloat("v_2_5",filed_options);options.fields.v_2_5.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_1_25=new FieldFloat("v_1_25",filed_options);options.fields.v_1_25.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_0_63=new FieldFloat("v_0_63",filed_options);options.fields.v_0_63.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_0_63_2=new FieldFloat("v_0_63_2",filed_options);options.fields.v_0_63_2.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_0_315=new FieldFloat("v_0_315",filed_options);options.fields.v_0_315.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_0_16=new FieldFloat("v_0_16",filed_options);options.fields.v_0_16.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_0_05=new FieldFloat("v_0_05",filed_options);options.fields.v_0_05.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_nasip=new FieldFloat("v_nasip",filed_options);options.fields.v_nasip.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_dno=new FieldFloat("v_dno",filed_options);options.fields.v_dno.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_istin=new FieldFloat("v_istin",filed_options);options.fields.v_istin.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_humid=new FieldFloat("v_humid",filed_options);options.fields.v_humid.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_dust=new FieldFloat("v_dust",filed_options);options.fields.v_dust.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_void=new FieldFloat("v_void",filed_options);options.fields.v_void.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_comment=new FieldText("v_comment",filed_options);SandQuarryVal_Model.superclass.constructor.call(this,id,options);}
extend(SandQuarryVal_Model,ModelXML); 
function SandQuarryValList_Model(options){var id='SandQuarryValList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.day=new FieldDate("day",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.day_descr=new FieldString("day_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quarry_id=new FieldInt("quarry_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quarry_descr=new FieldString("quarry_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_mkr=new FieldFloat("v_mkr",filed_options);options.fields.v_mkr.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_2_5=new FieldFloat("v_2_5",filed_options);options.fields.v_2_5.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_1_25=new FieldFloat("v_1_25",filed_options);options.fields.v_1_25.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_0_63=new FieldFloat("v_0_63",filed_options);options.fields.v_0_63.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_0_16=new FieldFloat("v_0_16",filed_options);options.fields.v_0_16.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_0_05=new FieldFloat("v_0_05",filed_options);options.fields.v_0_05.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_nasip=new FieldFloat("v_nasip",filed_options);options.fields.v_nasip.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_istin=new FieldFloat("v_istin",filed_options);options.fields.v_istin.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_humid=new FieldFloat("v_humid",filed_options);options.fields.v_humid.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_dust=new FieldFloat("v_dust",filed_options);options.fields.v_dust.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_void=new FieldFloat("v_void",filed_options);options.fields.v_void.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_comment=new FieldText("v_comment",filed_options);SandQuarryValList_Model.superclass.constructor.call(this,id,options);}
extend(SandQuarryValList_Model,ModelXML); 
function StoneQuarryVal_Model(options){var id='StoneQuarryVal_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.day=new FieldDate("day",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quarry_id=new FieldInt("quarry_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_nasip=new FieldFloat("v_nasip",filed_options);options.fields.v_nasip.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_istin=new FieldFloat("v_istin",filed_options);options.fields.v_istin.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_dust=new FieldFloat("v_dust",filed_options);options.fields.v_dust.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_humid=new FieldFloat("v_humid",filed_options);options.fields.v_humid.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_void=new FieldFloat("v_void",filed_options);options.fields.v_void.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_comment=new FieldText("v_comment",filed_options);StoneQuarryVal_Model.superclass.constructor.call(this,id,options);}
extend(StoneQuarryVal_Model,ModelXML); 
function StoneQuarryValList_Model(options){var id='StoneQuarryValList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.day=new FieldDate("day",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.day_descr=new FieldString("day_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quarry_id=new FieldInt("quarry_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quarry_descr=new FieldString("quarry_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_nasip=new FieldFloat("v_nasip",filed_options);options.fields.v_nasip.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_istin=new FieldFloat("v_istin",filed_options);options.fields.v_istin.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_dust=new FieldFloat("v_dust",filed_options);options.fields.v_dust.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_humid=new FieldFloat("v_humid",filed_options);options.fields.v_humid.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_void=new FieldFloat("v_void",filed_options);options.fields.v_void.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.v_comment=new FieldText("v_comment",filed_options);StoneQuarryValList_Model.superclass.constructor.call(this,id,options);}
extend(StoneQuarryValList_Model,ModelXML); 
function MaterialObnul_Model(options){var id='MaterialObnul_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.day=new FieldDate("day",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');MaterialObnul_Model.superclass.constructor.call(this,id,options);}
extend(MaterialObnul_Model,ModelXML); 
function SpecialistRequest_Model(options){var id='SpecialistRequest_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment=new FieldText("comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel=new FieldText("tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.manager_comment=new FieldText("manager_comment",filed_options);SpecialistRequest_Model.superclass.constructor.call(this,id,options);}
extend(SpecialistRequest_Model,ModelXML); 
function SpecialistRequestList_Model(options){var id='SpecialistRequestList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time_descr=new FieldDateTime("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ФИО';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment=new FieldText("comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.tel=new FieldText("tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.client_descr=new FieldString("client_descr",filed_options);SpecialistRequestList_Model.superclass.constructor.call(this,id,options);}
extend(SpecialistRequestList_Model,ModelXML); 
function SiteFeedBack_Model(options){var id='SiteFeedBack_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment=new FieldText("comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldText("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);SiteFeedBack_Model.superclass.constructor.call(this,id,options);}
extend(SiteFeedBack_Model,ModelXML); 
function SiteFeedBackList_Model(options){var id='SiteFeedBackList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ФИО';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment=new FieldText("comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Email';filed_options.autoInc=false;options.fields.email=new FieldText("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Просмотрено';filed_options.autoInc=false;options.fields.viewed_descr=new FieldString("viewed_descr",filed_options);SiteFeedBackList_Model.superclass.constructor.call(this,id,options);}
extend(SiteFeedBackList_Model,ModelXML); 
function CarTrackingMalfucntion_Model(options){var id='CarTrackingMalfucntion_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.dt=new FieldDate("dt",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.tracker_id=new FieldString("tracker_id",filed_options);options.fields.tracker_id.getValidator().setMaxLength('15');CarTrackingMalfucntion_Model.superclass.constructor.call(this,id,options);}
extend(CarTrackingMalfucntion_Model,ModelXML); 
function MailForSending_Model(options){var id='MailForSending_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_addr=new FieldString("from_addr",filed_options);options.fields.from_addr.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_name=new FieldString("from_name",filed_options);options.fields.from_name.getValidator().setMaxLength('255');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_addr=new FieldString("to_addr",filed_options);options.fields.to_addr.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_name=new FieldString("to_name",filed_options);options.fields.to_name.getValidator().setMaxLength('255');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reply_addr=new FieldString("reply_addr",filed_options);options.fields.reply_addr.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reply_name=new FieldString("reply_name",filed_options);options.fields.reply_name.getValidator().setMaxLength('255');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.body=new FieldText("body",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sender_addr=new FieldString("sender_addr",filed_options);options.fields.sender_addr.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldString("subject",filed_options);options.fields.subject.getValidator().setMaxLength('255');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.sent=new FieldBool("sent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sent_date_time=new FieldDateTime("sent_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email_type=new FieldEnum("email_type",filed_options);filed_options.enumValues='new_account,reset_pwd';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.error_str=new FieldText("error_str",filed_options);MailForSending_Model.superclass.constructor.call(this,id,options);}
extend(MailForSending_Model,ModelXML); 
function SMSForSending_Model(options){var id='SMSForSending_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.body=new FieldText("body",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.sent=new FieldBool("sent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sent_date_time=new FieldDateTime("sent_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.delivered=new FieldBool("delivered",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.delivered_date_time=new FieldDateTime("delivered_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sms_type=new FieldEnum("sms_type",filed_options);filed_options.enumValues='order,ship,remind,procur,order_for_pump_ins,order_for_pump_upd,order_for_pump_del,remind_for_pump,client_thank,vehicle_zone_violation,vehicle_tracker_malfunction,efficiency_warn,material_balance,mixer_route,order_cancel,tm_invite,new_pwd';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sms_id=new FieldText("sms_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_ref=new FieldJSONB("doc_ref",filed_options);SMSForSending_Model.superclass.constructor.call(this,id,options);}
extend(SMSForSending_Model,ModelXML); 
function EmailTemplate_Model(options){var id='EmailTemplate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тип email';filed_options.autoInc=false;options.fields.email_type=new FieldEnum("email_type",filed_options);filed_options.enumValues='new_account,reset_pwd';options.fields.email_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Шаблон';filed_options.autoInc=false;options.fields.template=new FieldText("template",filed_options);options.fields.template.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);options.fields.comment_text.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тема';filed_options.autoInc=false;options.fields.mes_subject=new FieldText("mes_subject",filed_options);options.fields.mes_subject.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поля';filed_options.autoInc=false;options.fields.fields=new FieldText("fields",filed_options);options.fields.fields.getValidator().setRequired(true);EmailTemplate_Model.superclass.constructor.call(this,id,options);}
extend(EmailTemplate_Model,ModelXML); 
function EmailTemplateList_Model(options){var id='EmailTemplateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email_type=new FieldString("email_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email_type_descr=new FieldString("email_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.template=new FieldText("template",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.fields=new FieldText("fields",filed_options);EmailTemplateList_Model.superclass.constructor.call(this,id,options);}
extend(EmailTemplateList_Model,ModelXML); 
function ClientValidDuplicate_Model(options){var id='ClientValidDuplicate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');ClientValidDuplicate_Model.superclass.constructor.call(this,id,options);}
extend(ClientValidDuplicate_Model,ModelXML); 
function ClientValidDuplicateList_Model(options){var id='ClientValidDuplicateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients=new FieldText("clients",filed_options);ClientValidDuplicateList_Model.superclass.constructor.call(this,id,options);}
extend(ClientValidDuplicateList_Model,ModelXML); 
function ShipmentTimeNorm_Model(options){var id='ShipmentTimeNorm_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Объем';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Норма минут';filed_options.autoInc=false;options.fields.norm_min=new FieldInt("norm_min",filed_options);options.fields.norm_min.getValidator().setRequired(true);ShipmentTimeNorm_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentTimeNorm_Model,ModelXML); 
function ConcretePrice_Model(options){var id='ConcretePrice_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);options.fields.concrete_type_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');ConcretePrice_Model.superclass.constructor.call(this,id,options);}
extend(ConcretePrice_Model,ModelXML); 
function Enum_locales(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"ru","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"ru"],checked:(options.defaultValue&&options.defaultValue=="ru")}];Enum_locales.superclass.constructor.call(this,id,options);}
extend(Enum_locales,EditSelect);Enum_locales.prototype.multyLangValues={"ru_ru":"Русский"}; 
function EnumGridColumn_locales(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["ru"]="Русский";options.ctrlClass=options.ctrlClass||Enum_locales;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_locales.superclass.constructor.call(this,options);}
extend(EnumGridColumn_locales,GridColumnEnum); 
function Enum_role_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"owner","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"owner"],checked:(options.defaultValue&&options.defaultValue=="owner")},{"value":"boss","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"boss"],checked:(options.defaultValue&&options.defaultValue=="boss")},{"value":"operator","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"operator"],checked:(options.defaultValue&&options.defaultValue=="operator")},{"value":"manager","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"manager"],checked:(options.defaultValue&&options.defaultValue=="manager")},{"value":"dispatcher","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"dispatcher"],checked:(options.defaultValue&&options.defaultValue=="dispatcher")},{"value":"accountant","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"accountant"],checked:(options.defaultValue&&options.defaultValue=="accountant")},{"value":"lab_worker","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"lab_worker"],checked:(options.defaultValue&&options.defaultValue=="lab_worker")},{"value":"supplies","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"supplies"],checked:(options.defaultValue&&options.defaultValue=="supplies")},{"value":"sales","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"sales"],checked:(options.defaultValue&&options.defaultValue=="sales")},{"value":"plant_director","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"plant_director"],checked:(options.defaultValue&&options.defaultValue=="plant_director")},{"value":"supervisor","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"supervisor"],checked:(options.defaultValue&&options.defaultValue=="supervisor")},{"value":"vehicle_owner","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"vehicle_owner"],checked:(options.defaultValue&&options.defaultValue=="vehicle_owner")},{"value":"client","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"client"],checked:(options.defaultValue&&options.defaultValue=="client")},{"value":"weighing","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"weighing"],checked:(options.defaultValue&&options.defaultValue=="weighing")}];Enum_role_types.superclass.constructor.call(this,id,options);}
extend(Enum_role_types,EditSelect);Enum_role_types.prototype.multyLangValues={"ru_owner":"Администратор","ru_boss":"Руководитель","ru_operator":"Оператор","ru_manager":"Менеджер","ru_dispatcher":"Диспетчер","ru_accountant":"Бухгалтер","ru_lab_worker":"Лаборант","ru_supplies":"Снабжение","ru_sales":"Реализация","ru_plant_director":"Нач.базы","ru_supervisor":"Специалист","ru_vehicle_owner":"Владелец траспорта","ru_client":"Контрагент","ru_weighing":"Весовщик"}; 
function EnumGridColumn_role_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["owner"]="Администратор";options.multyLangValues["ru"]["boss"]="Руководитель";options.multyLangValues["ru"]["operator"]="Оператор";options.multyLangValues["ru"]["manager"]="Менеджер";options.multyLangValues["ru"]["dispatcher"]="Диспетчер";options.multyLangValues["ru"]["accountant"]="Бухгалтер";options.multyLangValues["ru"]["lab_worker"]="Лаборант";options.multyLangValues["ru"]["supplies"]="Снабжение";options.multyLangValues["ru"]["sales"]="Реализация";options.multyLangValues["ru"]["plant_director"]="Нач.базы";options.multyLangValues["ru"]["supervisor"]="Специалист";options.multyLangValues["ru"]["vehicle_owner"]="Владелец траспорта";options.multyLangValues["ru"]["client"]="Контрагент";options.multyLangValues["ru"]["weighing"]="Весовщик";options.ctrlClass=options.ctrlClass||Enum_role_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_role_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_role_types,GridColumnEnum); 
function Enum_data_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"users","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"users"],checked:(options.defaultValue&&options.defaultValue=="users")},{"value":"clients","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"clients"],checked:(options.defaultValue&&options.defaultValue=="clients")},{"value":"suppliers","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"suppliers"],checked:(options.defaultValue&&options.defaultValue=="suppliers")},{"value":"pump_vehicles","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"pump_vehicles"],checked:(options.defaultValue&&options.defaultValue=="pump_vehicles")},{"value":"drivers","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"drivers"],checked:(options.defaultValue&&options.defaultValue=="drivers")}];Enum_data_types.superclass.constructor.call(this,id,options);}
extend(Enum_data_types,EditSelect);Enum_data_types.prototype.multyLangValues={"ru_users":"Пользователи","ru_clients":"Клиенты","ru_suppliers":"Поставщики","ru_pump_vehicles":"Насосы","ru_drivers":"Водители"}; 
function EnumGridColumn_data_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["users"]="Пользователи";options.multyLangValues["ru"]["clients"]="Клиенты";options.multyLangValues["ru"]["suppliers"]="Поставщики";options.multyLangValues["ru"]["pump_vehicles"]="Насосы";options.multyLangValues["ru"]["drivers"]="Водители";options.ctrlClass=options.ctrlClass||Enum_data_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_data_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_data_types,GridColumnEnum); 
function Enum_role_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"owner","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"owner"],checked:(options.defaultValue&&options.defaultValue=="owner")},{"value":"boss","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"boss"],checked:(options.defaultValue&&options.defaultValue=="boss")},{"value":"operator","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"operator"],checked:(options.defaultValue&&options.defaultValue=="operator")},{"value":"manager","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"manager"],checked:(options.defaultValue&&options.defaultValue=="manager")},{"value":"dispatcher","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"dispatcher"],checked:(options.defaultValue&&options.defaultValue=="dispatcher")},{"value":"accountant","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"accountant"],checked:(options.defaultValue&&options.defaultValue=="accountant")},{"value":"lab_worker","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"lab_worker"],checked:(options.defaultValue&&options.defaultValue=="lab_worker")},{"value":"supplies","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"supplies"],checked:(options.defaultValue&&options.defaultValue=="supplies")},{"value":"sales","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"sales"],checked:(options.defaultValue&&options.defaultValue=="sales")},{"value":"plant_director","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"plant_director"],checked:(options.defaultValue&&options.defaultValue=="plant_director")},{"value":"supervisor","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"supervisor"],checked:(options.defaultValue&&options.defaultValue=="supervisor")},{"value":"vehicle_owner","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"vehicle_owner"],checked:(options.defaultValue&&options.defaultValue=="vehicle_owner")},{"value":"client","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"client"],checked:(options.defaultValue&&options.defaultValue=="client")},{"value":"weighing","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"weighing"],checked:(options.defaultValue&&options.defaultValue=="weighing")}];Enum_role_types.superclass.constructor.call(this,id,options);}
extend(Enum_role_types,EditSelect);Enum_role_types.prototype.multyLangValues={"ru_owner":"Администратор","ru_boss":"Руководитель","ru_operator":"Оператор","ru_manager":"Менеджер","ru_dispatcher":"Диспетчер","ru_accountant":"Бухгалтер","ru_lab_worker":"Лаборант","ru_supplies":"Снабжение","ru_sales":"Реализация","ru_plant_director":"Нач.базы","ru_supervisor":"Специалист","ru_vehicle_owner":"Владелец траспорта","ru_client":"Контрагент","ru_weighing":"Весовщик"}; 
function EnumGridColumn_role_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["owner"]="Администратор";options.multyLangValues["ru"]["boss"]="Руководитель";options.multyLangValues["ru"]["operator"]="Оператор";options.multyLangValues["ru"]["manager"]="Менеджер";options.multyLangValues["ru"]["dispatcher"]="Диспетчер";options.multyLangValues["ru"]["accountant"]="Бухгалтер";options.multyLangValues["ru"]["lab_worker"]="Лаборант";options.multyLangValues["ru"]["supplies"]="Снабжение";options.multyLangValues["ru"]["sales"]="Реализация";options.multyLangValues["ru"]["plant_director"]="Нач.базы";options.multyLangValues["ru"]["supervisor"]="Специалист";options.multyLangValues["ru"]["vehicle_owner"]="Владелец траспорта";options.multyLangValues["ru"]["client"]="Контрагент";options.multyLangValues["ru"]["weighing"]="Весовщик";options.ctrlClass=options.ctrlClass||Enum_role_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_role_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_role_types,GridColumnEnum); 
function Enum_unload_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"pump","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"pump"],checked:(options.defaultValue&&options.defaultValue=="pump")},{"value":"band","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"band"],checked:(options.defaultValue&&options.defaultValue=="band")},{"value":"none","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"none"],checked:(options.defaultValue&&options.defaultValue=="none")}];Enum_unload_types.superclass.constructor.call(this,id,options);}
extend(Enum_unload_types,EditSelect);Enum_unload_types.prototype.multyLangValues={"ru_pump":"насос","ru_band":"лента","ru_none":"нет"}; 
function EnumGridColumn_unload_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["pump"]="насос";options.multyLangValues["ru"]["band"]="лента";options.multyLangValues["ru"]["none"]="нет";options.ctrlClass=options.ctrlClass||Enum_unload_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_unload_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_unload_types,GridColumnEnum); 
function Enum_vehicle_states(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"shift","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"shift"],checked:(options.defaultValue&&options.defaultValue=="shift")},{"value":"free","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"free"],checked:(options.defaultValue&&options.defaultValue=="free")},{"value":"assigned","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"assigned"],checked:(options.defaultValue&&options.defaultValue=="assigned")},{"value":"busy","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"busy"],checked:(options.defaultValue&&options.defaultValue=="busy")},{"value":"left_for_dest","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"left_for_dest"],checked:(options.defaultValue&&options.defaultValue=="left_for_dest")},{"value":"at_dest","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"at_dest"],checked:(options.defaultValue&&options.defaultValue=="at_dest")},{"value":"left_for_base","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"left_for_base"],checked:(options.defaultValue&&options.defaultValue=="left_for_base")},{"value":"out_from_shift","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"out_from_shift"],checked:(options.defaultValue&&options.defaultValue=="out_from_shift")},{"value":"out","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"out"],checked:(options.defaultValue&&options.defaultValue=="out")},{"value":"shift_added","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"shift_added"],checked:(options.defaultValue&&options.defaultValue=="shift_added")}];Enum_vehicle_states.superclass.constructor.call(this,id,options);}
extend(Enum_vehicle_states,EditSelect);Enum_vehicle_states.prototype.multyLangValues={"ru_shift":"смена","ru_free":"на базе","ru_assigned":"назначен","ru_busy":"отгружен","ru_left_for_dest":"едет на объект","ru_at_dest":"на объекте","ru_left_for_base":"едет на базу","ru_out_from_shift":"сошёл со см.","ru_out":"сошёл","ru_shift_added":"доб.смена"}; 
function EnumGridColumn_vehicle_states(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["shift"]="смена";options.multyLangValues["ru"]["free"]="на базе";options.multyLangValues["ru"]["assigned"]="назначен";options.multyLangValues["ru"]["busy"]="отгружен";options.multyLangValues["ru"]["left_for_dest"]="едет на объект";options.multyLangValues["ru"]["at_dest"]="на объекте";options.multyLangValues["ru"]["left_for_base"]="едет на базу";options.multyLangValues["ru"]["out_from_shift"]="сошёл со см.";options.multyLangValues["ru"]["out"]="сошёл";options.multyLangValues["ru"]["shift_added"]="доб.смена";options.ctrlClass=options.ctrlClass||Enum_vehicle_states;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_vehicle_states.superclass.constructor.call(this,options);}
extend(EnumGridColumn_vehicle_states,GridColumnEnum); 
function Enum_sms_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"order","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"order"],checked:(options.defaultValue&&options.defaultValue=="order")},{"value":"ship","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"ship"],checked:(options.defaultValue&&options.defaultValue=="ship")},{"value":"remind","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"remind"],checked:(options.defaultValue&&options.defaultValue=="remind")},{"value":"procur","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"procur"],checked:(options.defaultValue&&options.defaultValue=="procur")},{"value":"order_for_pump_ins","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"order_for_pump_ins"],checked:(options.defaultValue&&options.defaultValue=="order_for_pump_ins")},{"value":"order_for_pump_upd","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"order_for_pump_upd"],checked:(options.defaultValue&&options.defaultValue=="order_for_pump_upd")},{"value":"order_for_pump_del","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"order_for_pump_del"],checked:(options.defaultValue&&options.defaultValue=="order_for_pump_del")},{"value":"order_for_pump_ship","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"order_for_pump_ship"],checked:(options.defaultValue&&options.defaultValue=="order_for_pump_ship")},{"value":"remind_for_pump","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"remind_for_pump"],checked:(options.defaultValue&&options.defaultValue=="remind_for_pump")},{"value":"client_thank","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"client_thank"],checked:(options.defaultValue&&options.defaultValue=="client_thank")},{"value":"vehicle_zone_violation","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"vehicle_zone_violation"],checked:(options.defaultValue&&options.defaultValue=="vehicle_zone_violation")},{"value":"vehicle_tracker_malfunction","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"vehicle_tracker_malfunction"],checked:(options.defaultValue&&options.defaultValue=="vehicle_tracker_malfunction")},{"value":"efficiency_warn","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"efficiency_warn"],checked:(options.defaultValue&&options.defaultValue=="efficiency_warn")},{"value":"material_balance","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"material_balance"],checked:(options.defaultValue&&options.defaultValue=="material_balance")},{"value":"mixer_route","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"mixer_route"],checked:(options.defaultValue&&options.defaultValue=="mixer_route")},{"value":"order_cancel","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"order_cancel"],checked:(options.defaultValue&&options.defaultValue=="order_cancel")},{"value":"tm_invite","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"tm_invite"],checked:(options.defaultValue&&options.defaultValue=="tm_invite")},{"value":"new_pwd","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"new_pwd"],checked:(options.defaultValue&&options.defaultValue=="new_pwd")}];Enum_sms_types.superclass.constructor.call(this,id,options);}
extend(Enum_sms_types,EditSelect);Enum_sms_types.prototype.multyLangValues={"ru_order":"заявка","ru_ship":"отгрузка","ru_remind":"напоминание","ru_procur":"поставка","ru_order_for_pump_ins":"заявка для насоса (новая)","ru_order_for_pump_upd":"заявка для насоса (изменена)","ru_order_for_pump_del":"заявка для насоса (удалена)","ru_order_for_pump_ship":"заявка для насоса (отгружена)","ru_remind_for_pump":"напоминание для насоса","ru_client_thank":"благодарность клиенту","ru_vehicle_zone_violation":"Въезд в запрещенную зону","ru_vehicle_tracker_malfunction":"Нерабочий трекер","ru_efficiency_warn":"Низская эффективность","ru_material_balance":"Остатки материалов","ru_mixer_route":"Маршрут для миксериста","ru_order_cancel":"Отмена заявки","ru_tm_invite":"Приглашение в Telegram","ru_new_pwd":"Новый пароль"}; 
function EnumGridColumn_sms_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["order"]="заявка";options.multyLangValues["ru"]["ship"]="отгрузка";options.multyLangValues["ru"]["remind"]="напоминание";options.multyLangValues["ru"]["procur"]="поставка";options.multyLangValues["ru"]["order_for_pump_ins"]="заявка для насоса (новая)";options.multyLangValues["ru"]["order_for_pump_upd"]="заявка для насоса (изменена)";options.multyLangValues["ru"]["order_for_pump_del"]="заявка для насоса (удалена)";options.multyLangValues["ru"]["order_for_pump_ship"]="заявка для насоса (отгружена)";options.multyLangValues["ru"]["remind_for_pump"]="напоминание для насоса";options.multyLangValues["ru"]["client_thank"]="благодарность клиенту";options.multyLangValues["ru"]["vehicle_zone_violation"]="Въезд в запрещенную зону";options.multyLangValues["ru"]["vehicle_tracker_malfunction"]="Нерабочий трекер";options.multyLangValues["ru"]["efficiency_warn"]="Низская эффективность";options.multyLangValues["ru"]["material_balance"]="Остатки материалов";options.multyLangValues["ru"]["mixer_route"]="Маршрут для миксериста";options.multyLangValues["ru"]["order_cancel"]="Отмена заявки";options.multyLangValues["ru"]["tm_invite"]="Приглашение в Telegram";options.multyLangValues["ru"]["new_pwd"]="Новый пароль";options.ctrlClass=options.ctrlClass||Enum_sms_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_sms_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_sms_types,GridColumnEnum); 
function Enum_email_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"new_account","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"new_account"],checked:(options.defaultValue&&options.defaultValue=="new_account")},{"value":"reset_pwd","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"reset_pwd"],checked:(options.defaultValue&&options.defaultValue=="reset_pwd")}];Enum_email_types.superclass.constructor.call(this,id,options);}
extend(Enum_email_types,EditSelect);Enum_email_types.prototype.multyLangValues={"ru_new_account":"Новая учетная запись","ru_reset_pwd":"Сброс пароля пользователя"}; 
function EnumGridColumn_email_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["new_account"]="Новая учетная запись";options.multyLangValues["ru"]["reset_pwd"]="Сброс пароля пользователя";options.ctrlClass=options.ctrlClass||Enum_email_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_email_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_email_types,GridColumnEnum); 
function Enum_doc_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"order","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"order"],checked:(options.defaultValue&&options.defaultValue=="order")},{"value":"material_procurement","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"material_procurement"],checked:(options.defaultValue&&options.defaultValue=="material_procurement")},{"value":"shipment","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"shipment"],checked:(options.defaultValue&&options.defaultValue=="shipment")},{"value":"material_fact_consumption","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"material_fact_consumption"],checked:(options.defaultValue&&options.defaultValue=="material_fact_consumption")},{"value":"material_fact_consumption_correction","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"material_fact_consumption_correction"],checked:(options.defaultValue&&options.defaultValue=="material_fact_consumption_correction")},{"value":"material_fact_balance_correction","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"material_fact_balance_correction"],checked:(options.defaultValue&&options.defaultValue=="material_fact_balance_correction")},{"value":"cement_silo_reset","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"cement_silo_reset"],checked:(options.defaultValue&&options.defaultValue=="cement_silo_reset")},{"value":"cement_silo_balance_reset","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"cement_silo_balance_reset"],checked:(options.defaultValue&&options.defaultValue=="cement_silo_balance_reset")},{"value":"material_movement","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"material_movement"],checked:(options.defaultValue&&options.defaultValue=="material_movement")}];Enum_doc_types.superclass.constructor.call(this,id,options);}
extend(Enum_doc_types,EditSelect);Enum_doc_types.prototype.multyLangValues={"ru_order":"Заявка","ru_material_procurement":"Поступление материалов","ru_shipment":"Отгрузка","ru_material_fact_consumption":"Фактический расход материалов","ru_material_fact_consumption_correction":"Корректировка фактического расхода материалов","ru_material_fact_balance_correction":"Корректировка остатка материала","ru_cement_silo_reset":"Обнуление силоса","ru_cement_silo_balance_reset":"Обнуление остатка силоса","ru_material_movement":"Перемещение материалов"}; 
function EnumGridColumn_doc_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["order"]="Заявка";options.multyLangValues["ru"]["material_procurement"]="Поступление материалов";options.multyLangValues["ru"]["shipment"]="Отгрузка";options.multyLangValues["ru"]["material_fact_consumption"]="Фактический расход материалов";options.multyLangValues["ru"]["material_fact_consumption_correction"]="Корректировка фактического расхода материалов";options.multyLangValues["ru"]["material_fact_balance_correction"]="Корректировка остатка материала";options.multyLangValues["ru"]["cement_silo_reset"]="Обнуление силоса";options.multyLangValues["ru"]["cement_silo_balance_reset"]="Обнуление остатка силоса";options.multyLangValues["ru"]["material_movement"]="Перемещение материалов";options.ctrlClass=options.ctrlClass||Enum_doc_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_doc_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_doc_types,GridColumnEnum); 
function Enum_reg_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"material","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"material"],checked:(options.defaultValue&&options.defaultValue=="material")},{"value":"material_fact","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"material_fact"],checked:(options.defaultValue&&options.defaultValue=="material_fact")},{"value":"cement","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"cement"],checked:(options.defaultValue&&options.defaultValue=="cement")},{"value":"material_consumption","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"material_consumption"],checked:(options.defaultValue&&options.defaultValue=="material_consumption")}];Enum_reg_types.superclass.constructor.call(this,id,options);}
extend(Enum_reg_types,EditSelect);Enum_reg_types.prototype.multyLangValues={"ru_material":"Учет материалов","ru_material_fact":"Учет материалов по факту","ru_cement":"Учет цемента","ru_material_consumption":"Расход материалов"}; 
function EnumGridColumn_reg_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["material"]="Учет материалов";options.multyLangValues["ru"]["material_fact"]="Учет материалов по факту";options.multyLangValues["ru"]["cement"]="Учет цемента";options.multyLangValues["ru"]["material_consumption"]="Расход материалов";options.ctrlClass=options.ctrlClass||Enum_reg_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_reg_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_reg_types,GridColumnEnum); 
function Enum_call_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"in","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"in"],checked:(options.defaultValue&&options.defaultValue=="in")},{"value":"out","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"out"],checked:(options.defaultValue&&options.defaultValue=="out")}];Enum_call_types.superclass.constructor.call(this,id,options);}
extend(Enum_call_types,EditSelect);Enum_call_types.prototype.multyLangValues={"ru_in":"Входящий","ru_out":"Исходящий"}; 
function EnumGridColumn_call_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["in"]="Входящий";options.multyLangValues["ru"]["out"]="Исходящий";options.ctrlClass=options.ctrlClass||Enum_call_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_call_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_call_types,GridColumnEnum); 
function Enum_client_kinds(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"buyer","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"buyer"],checked:(options.defaultValue&&options.defaultValue=="buyer")},{"value":"acc","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"acc"],checked:(options.defaultValue&&options.defaultValue=="acc")},{"value":"else","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"else"],checked:(options.defaultValue&&options.defaultValue=="else")}];Enum_client_kinds.superclass.constructor.call(this,id,options);}
extend(Enum_client_kinds,EditSelect);Enum_client_kinds.prototype.multyLangValues={"ru_buyer":"Клиент","ru_acc":"Бухгалтерия","ru_else":"Прочие"}; 
function EnumGridColumn_client_kinds(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["buyer"]="Клиент";options.multyLangValues["ru"]["acc"]="Бухгалтерия";options.multyLangValues["ru"]["else"]="Прочие";options.ctrlClass=options.ctrlClass||Enum_client_kinds;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_client_kinds.superclass.constructor.call(this,options);}
extend(EnumGridColumn_client_kinds,GridColumnEnum); 
function Enum_offer_results(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"no","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"no"],checked:(options.defaultValue&&options.defaultValue=="no")},{"value":"seems_no","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"seems_no"],checked:(options.defaultValue&&options.defaultValue=="seems_no")},{"value":"will_think","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"will_think"],checked:(options.defaultValue&&options.defaultValue=="will_think")},{"value":"make_order","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"make_order"],checked:(options.defaultValue&&options.defaultValue=="make_order")}];Enum_offer_results.superclass.constructor.call(this,id,options);}
extend(Enum_offer_results,EditSelect);Enum_offer_results.prototype.multyLangValues={"ru_no":"Нет","ru_seems_no":"Наверное нет","ru_will_think":"Подумаю","ru_make_order":"Оформить заявку"}; 
function EnumGridColumn_offer_results(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["no"]="Нет";options.multyLangValues["ru"]["seems_no"]="Наверное нет";options.multyLangValues["ru"]["will_think"]="Подумаю";options.multyLangValues["ru"]["make_order"]="Оформить заявку";options.ctrlClass=options.ctrlClass||Enum_offer_results;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_offer_results.superclass.constructor.call(this,options);}
extend(EnumGridColumn_offer_results,GridColumnEnum); 
function About_Controller(options){options=options||{};options.objModelClass=About_Model;About_Controller.superclass.constructor.call(this,options);this.addGetObject();}
extend(About_Controller,ControllerObjServer);About_Controller.prototype.addGetObject=function(){About_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function MailForSendingAttachment_Model(options){var id='MailForSendingAttachment_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mail_for_sending_id=new FieldInt("mail_for_sending_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_name=new FieldString("file_name",filed_options);options.fields.file_name.getValidator().setMaxLength('255');MailForSendingAttachment_Model.superclass.constructor.call(this,id,options);}
extend(MailForSendingAttachment_Model,ModelXML); 
function MatTotals_Model(options){var id='MatTotals_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_ordered=new FieldFloat("quant_ordered",filed_options);options.fields.quant_ordered.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_procured=new FieldFloat("quant_procured",filed_options);options.fields.quant_procured.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_balance=new FieldFloat("quant_balance",filed_options);options.fields.quant_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_fact_balance=new FieldFloat("quant_fact_balance",filed_options);options.fields.quant_fact_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_morn_cur_balance=new FieldFloat("quant_morn_cur_balance",filed_options);options.fields.quant_morn_cur_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_morn_fact_cur_balance=new FieldFloat("quant_morn_fact_cur_balance",filed_options);options.fields.quant_morn_fact_cur_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_morn_next_balance=new FieldFloat("quant_morn_next_balance",filed_options);options.fields.quant_morn_next_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.balance_corrected_data=new FieldJSON("balance_corrected_data",filed_options);MatTotals_Model.superclass.constructor.call(this,id,options);}
extend(MatTotals_Model,ModelXML); 
function VehicleScheduleMakeOrderList_Model(options){var id='VehicleScheduleMakeOrderList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicles_count=new FieldInt("vehicles_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSON("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_tel=new FieldString("driver_tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.owner=new FieldString("owner",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owners_ref=new FieldJSON("vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.load_capacity=new FieldInt("load_capacity",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldString("state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inf_on_return=new FieldText("inf_on_return",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.runs=new FieldInt("runs",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.is_late=new FieldBool("is_late",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.is_late_at_dest=new FieldBool("is_late_at_dest",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inf_on_return=new FieldString("inf_on_return",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tracker_no_data=new FieldBool("tracker_no_data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.schedule_date=new FieldDate("schedule_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.no_tracker=new FieldBool("no_tracker",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_schedules_ref=new FieldJSON("vehicle_schedules_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tracker_id=new FieldText("tracker_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.veh_id=new FieldInt("veh_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_bases_ref=new FieldJSON("production_bases_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_base_distance=new FieldJSON("production_base_distance",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_base_name=new FieldString("production_base_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_name=new FieldString("destination_name",filed_options);VehicleScheduleMakeOrderList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleScheduleMakeOrderList_Model,ModelXML); 
function VehFeaturesOnDateList_Model(options){var id='VehFeaturesOnDateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.feature=new FieldString("feature",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cnt=new FieldInt("cnt",filed_options);VehFeaturesOnDateList_Model.superclass.constructor.call(this,id,options);}
extend(VehFeaturesOnDateList_Model,ModelXML); 
function OrderClient_Model(options){var id='OrderClient_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldString("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldInt("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_debt=new FieldFloat("client_debt",filed_options);OrderClient_Model.superclass.constructor.call(this,id,options);}
extend(OrderClient_Model,ModelXML); 
function OrderAvailSpots_Model(options){var id='OrderAvailSpots_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.avail_date_time=new FieldDateTime("avail_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.avail_speed=new FieldFloat("avail_speed",filed_options);OrderAvailSpots_Model.superclass.constructor.call(this,id,options);}
extend(OrderAvailSpots_Model,ModelXML); 
function OrderDescr_Model(options){var id='OrderDescr_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldString("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldInt("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.langs_ref=new FieldJSON("langs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_tels_ref=new FieldJSON("client_tels_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_exists=new FieldBool("tm_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_activated=new FieldBool("tm_activated",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_id=new FieldInt("contact_id",filed_options);OrderDescr_Model.superclass.constructor.call(this,id,options);}
extend(OrderDescr_Model,ModelXML); 
function OperatorList_Model(options){var id='OperatorList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Назначен';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгружен';filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTime("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Опреатор';filed_options.autoInc=false;options.fields.operators_ref=new FieldJSON("operators_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSON("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ТС';filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгружен';filed_options.autoInc=false;options.fields.shipped=new FieldBool("shipped",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Норма отгр.';filed_options.autoInc=false;options.fields.ship_norm_min=new FieldInt("ship_norm_min",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Норма факт.';filed_options.autoInc=false;options.fields.ship_fact_min=new FieldInt("ship_fact_min",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Остаток';filed_options.autoInc=false;options.fields.ship_bal_min=new FieldInt("ship_bal_min",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Список производств elkon';filed_options.autoInc=false;options.fields.production_list=new FieldJSON("production_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество по данным всех производств';filed_options.autoInc=false;options.fields.production_quant=new FieldFloat("production_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tolerance_exceeded=new FieldBool("tolerance_exceeded",filed_options);options.calcHash=true;OperatorList_Model.superclass.constructor.call(this,id,options);}
extend(OperatorList_Model,ModelXML); 
function VehicleRun_Model(options){var id='VehicleRun_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.veh_id=new FieldInt("veh_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.st_free_start=new FieldDateTime("st_free_start",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.st_assigned=new FieldDateTime("st_assigned",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.st_shipped=new FieldDateTime("st_shipped",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.st_at_dest=new FieldDateTime("st_at_dest",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.st_left_for_base=new FieldDateTime("st_left_for_base",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.st_free_end=new FieldDateTime("st_free_end",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.run_time=new FieldDateTime("run_time",filed_options);VehicleRun_Model.superclass.constructor.call(this,id,options);}
extend(VehicleRun_Model,ModelXML); 
function TimeZoneLocale_Model(options){var id='TimeZoneLocale_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание';filed_options.autoInc=false;options.fields.descr=new FieldString("descr",filed_options);options.fields.descr.getValidator().setRequired(true);options.fields.descr.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Смещение в часах';filed_options.autoInc=false;options.fields.hour_dif=new FieldInt("hour_dif",filed_options);options.fields.hour_dif.getValidator().setRequired(true);TimeZoneLocale_Model.superclass.constructor.call(this,id,options);}
extend(TimeZoneLocale_Model,ModelXML); 
function UserProfile_Model(options){var id='UserProfile_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Имя';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Эл.почта';filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Моб.телефон';filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('15');UserProfile_Model.superclass.constructor.call(this,id,options);}
extend(UserProfile_Model,ModelXML); 
function Captcha_Controller(options){options=options||{};Captcha_Controller.superclass.constructor.call(this,options);this.add_get();}
extend(Captcha_Controller,ControllerObjServer);Captcha_Controller.prototype.add_get=function(){var opts={"controller":this};var pm=new PublicMethodServer('get',opts);this.addPublicMethod(pm);} 
function ProductionSite_Controller(options){options=options||{};options.listModelClass=ProductionSite_Model;options.objModelClass=ProductionSiteForEditList_Model;ProductionSite_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_list_for_edit();}
extend(ProductionSite_Controller,ControllerObjServer);ProductionSite_Controller.prototype.addInsert=function(){ProductionSite_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldJSONB("elkon_connection",options);pm.addField(field);var options={};var field=new FieldJSONB("elkon_params",options);pm.addField(field);var options={};options.alias="Активен";var field=new FieldBool("active",options);pm.addField(field);var options={};var field=new FieldInt("last_elkon_production_id",options);pm.addField(field);var options={};var field=new FieldArray("missing_elkon_production_ids",options);pm.addField(field);var options={};options.alias="Зона";var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="Вид завода";options.enumValues='elkon,ammann';var field=new FieldEnum("production_plant_type",options);pm.addField(field);var options={};options.alias="База";var field=new FieldInt("production_base_id",options);pm.addField(field);var options={};options.alias="Диспетчер (ТТН)";var field=new FieldInt("dispatcher_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ProductionSite_Controller.prototype.addUpdate=function(){ProductionSite_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldJSONB("elkon_connection",options);pm.addField(field);var options={};var field=new FieldJSONB("elkon_params",options);pm.addField(field);var options={};options.alias="Активен";var field=new FieldBool("active",options);pm.addField(field);var options={};var field=new FieldInt("last_elkon_production_id",options);pm.addField(field);var options={};var field=new FieldArray("missing_elkon_production_ids",options);pm.addField(field);var options={};options.alias="Зона";var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="Вид завода";options.enumValues='elkon,ammann';var field=new FieldEnum("production_plant_type",options);pm.addField(field);var options={};options.alias="База";var field=new FieldInt("production_base_id",options);pm.addField(field);var options={};options.alias="Диспетчер (ТТН)";var field=new FieldInt("dispatcher_id",options);pm.addField(field);}
ProductionSite_Controller.prototype.addDelete=function(){ProductionSite_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ProductionSite_Controller.prototype.addGetList=function(){ProductionSite_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldJSONB("elkon_connection",f_opts));var f_opts={};pm.addField(new FieldJSONB("elkon_params",f_opts));var f_opts={};f_opts.alias="Активен";pm.addField(new FieldBool("active",f_opts));var f_opts={};pm.addField(new FieldInt("last_elkon_production_id",f_opts));var f_opts={};pm.addField(new FieldArray("missing_elkon_production_ids",f_opts));var f_opts={};f_opts.alias="Зона";pm.addField(new FieldInt("destination_id",f_opts));var f_opts={};f_opts.alias="Вид завода";pm.addField(new FieldEnum("production_plant_type",f_opts));var f_opts={};f_opts.alias="База";pm.addField(new FieldInt("production_base_id",f_opts));var f_opts={};f_opts.alias="Диспетчер (ТТН)";pm.addField(new FieldInt("dispatcher_id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
ProductionSite_Controller.prototype.addGetObject=function(){ProductionSite_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
ProductionSite_Controller.prototype.add_get_list_for_edit=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_list_for_edit',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);} 
function ProductionSite_Model(options){var id='ProductionSite_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.elkon_connection=new FieldJSONB("elkon_connection",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.elkon_params=new FieldJSONB("elkon_params",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Активен';filed_options.autoInc=false;options.fields.active=new FieldBool("active",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.last_elkon_production_id=new FieldInt("last_elkon_production_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.missing_elkon_production_ids=new FieldArray("missing_elkon_production_ids",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Зона';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид завода';filed_options.autoInc=false;options.fields.production_plant_type=new FieldEnum("production_plant_type",filed_options);filed_options.enumValues='elkon,ammann';var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Диспетчер (ТТН)';filed_options.autoInc=false;options.fields.dispatcher_id=new FieldInt("dispatcher_id",filed_options);ProductionSite_Model.superclass.constructor.call(this,id,options);}
extend(ProductionSite_Model,ModelXML); 
function ShipQuantForCostGrade_Model(options){var id='ShipQuantForCostGrade_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объем';filed_options.autoInc=false;options.fields.quant=new FieldInt("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_to=new FieldInt("quant_to",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.distance_from=new FieldFloat("distance_from",filed_options);options.fields.distance_from.getValidator().setMaxLength('12');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.distance_to=new FieldFloat("distance_to",filed_options);options.fields.distance_to.getValidator().setMaxLength('12');ShipQuantForCostGrade_Model.superclass.constructor.call(this,id,options);}
extend(ShipQuantForCostGrade_Model,ModelXML); 
function ShipQuantForCostGrade_Controller(options){options=options||{};options.listModelClass=ShipQuantForCostGrade_Model;options.objModelClass=ShipQuantForCostGrade_Model;ShipQuantForCostGrade_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ShipQuantForCostGrade_Controller,ControllerObjServer);ShipQuantForCostGrade_Controller.prototype.addInsert=function(){ShipQuantForCostGrade_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Объем";var field=new FieldInt("quant",options);pm.addField(field);var options={};var field=new FieldInt("quant_to",options);pm.addField(field);var options={};var field=new FieldFloat("distance_from",options);pm.addField(field);var options={};var field=new FieldFloat("distance_to",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ShipQuantForCostGrade_Controller.prototype.addUpdate=function(){ShipQuantForCostGrade_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Объем";var field=new FieldInt("quant",options);pm.addField(field);var options={};var field=new FieldInt("quant_to",options);pm.addField(field);var options={};var field=new FieldFloat("distance_from",options);pm.addField(field);var options={};var field=new FieldFloat("distance_to",options);pm.addField(field);}
ShipQuantForCostGrade_Controller.prototype.addDelete=function(){ShipQuantForCostGrade_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ShipQuantForCostGrade_Controller.prototype.addGetList=function(){ShipQuantForCostGrade_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Объем";pm.addField(new FieldInt("quant",f_opts));var f_opts={};pm.addField(new FieldInt("quant_to",f_opts));var f_opts={};pm.addField(new FieldFloat("distance_from",f_opts));var f_opts={};pm.addField(new FieldFloat("distance_to",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("quant");}
ShipQuantForCostGrade_Controller.prototype.addGetObject=function(){ShipQuantForCostGrade_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function DOCMaterialProcurementShiftList_Model(options){var id='DOCMaterialProcurementShiftList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shift_date_time=new FieldDateTime("shift_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shift_date_time_end=new FieldDateTime("shift_date_time_end",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);DOCMaterialProcurementShiftList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementShiftList_Model,ModelXML); 
function RAMaterialConsumptionDateList_Model(options){var id='RAMaterialConsumptionDateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.shift=new FieldDateTime("shift",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shift_to=new FieldDateTime("shift_to",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shift_descr=new FieldString("shift_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shift_from_descr=new FieldString("shift_from_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shift_to_descr=new FieldString("shift_to_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_quant=new FieldFloat("concrete_quant",filed_options);RAMaterialConsumptionDateList_Model.superclass.constructor.call(this,id,options);}
extend(RAMaterialConsumptionDateList_Model,ModelXML); 
function SMSForSending_Controller(options){options=options||{};options.listModelClass=SMSForSending_Model;SMSForSending_Controller.superclass.constructor.call(this,options);this.addGetList();}
extend(SMSForSending_Controller,ControllerObjServer);SMSForSending_Controller.prototype.addGetList=function(){SMSForSending_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("tel",f_opts));var f_opts={};pm.addField(new FieldText("body",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldBool("sent",f_opts));var f_opts={};pm.addField(new FieldDateTime("sent_date_time",f_opts));var f_opts={};pm.addField(new FieldBool("delivered",f_opts));var f_opts={};pm.addField(new FieldDateTime("delivered_date_time",f_opts));var f_opts={};pm.addField(new FieldEnum("sms_type",f_opts));var f_opts={};pm.addField(new FieldText("sms_id",f_opts));var f_opts={};pm.addField(new FieldJSONB("doc_ref",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");} 
function SMSForSendingList_Model(options){var id='SMSForSendingList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.body=new FieldText("body",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.sent=new FieldBool("sent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sent_date_time=new FieldDateTime("sent_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.delivered=new FieldBool("delivered",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.delivered_date_time=new FieldDateTime("delivered_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sms_type=new FieldEnum("sms_type",filed_options);filed_options.enumValues='order,ship,remind,procur,order_for_pump_ins,order_for_pump_upd,order_for_pump_del,remind_for_pump,client_thank,vehicle_zone_violation';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sms_id=new FieldText("sms_id",filed_options);SMSForSendingList_Model.superclass.constructor.call(this,id,options);}
extend(SMSForSendingList_Model,ModelXML); 
function SMSPatternUserPhone_Model(options){var id='SMSPatternUserPhone_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sms_pattern_id=new FieldInt("sms_pattern_id",filed_options);options.fields.sms_pattern_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);SMSPatternUserPhone_Model.superclass.constructor.call(this,id,options);}
extend(SMSPatternUserPhone_Model,ModelXML); 
function SMSPatternUserPhone_Controller(options){options=options||{};options.listModelClass=SMSPatternUserPhoneList_Model;options.objModelClass=SMSPatternUserPhoneList_Model;SMSPatternUserPhone_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(SMSPatternUserPhone_Controller,ControllerObjServer);SMSPatternUserPhone_Controller.prototype.addInsert=function(){SMSPatternUserPhone_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("sms_pattern_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("user_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
SMSPatternUserPhone_Controller.prototype.addUpdate=function(){SMSPatternUserPhone_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("sms_pattern_id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);}
SMSPatternUserPhone_Controller.prototype.addDelete=function(){SMSPatternUserPhone_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
SMSPatternUserPhone_Controller.prototype.addGetList=function(){SMSPatternUserPhone_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("sms_pattern_id",f_opts));var f_opts={};pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};pm.addField(new FieldString("user_tel",f_opts));}
SMSPatternUserPhone_Controller.prototype.addGetObject=function(){SMSPatternUserPhone_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function SMSPatternUserPhoneList_Model(options){var id='SMSPatternUserPhoneList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sms_pattern_id=new FieldInt("sms_pattern_id",filed_options);options.fields.sms_pattern_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_tel=new FieldString("user_tel",filed_options);SMSPatternUserPhoneList_Model.superclass.constructor.call(this,id,options);}
extend(SMSPatternUserPhoneList_Model,ModelXML); 
function TrackerZoneControl_Controller(options){options=options||{};options.listModelClass=TrackerZoneControlList_Model;options.objModelClass=TrackerZoneControlList_Model;TrackerZoneControl_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(TrackerZoneControl_Controller,ControllerObjServer);TrackerZoneControl_Controller.prototype.addInsert=function(){TrackerZoneControl_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("destination_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
TrackerZoneControl_Controller.prototype.addUpdate=function(){TrackerZoneControl_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("destination_id",options);pm.addField(field);}
TrackerZoneControl_Controller.prototype.addDelete=function(){TrackerZoneControl_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
TrackerZoneControl_Controller.prototype.addGetList=function(){TrackerZoneControl_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("destinations_ref",f_opts));}
TrackerZoneControl_Controller.prototype.addGetObject=function(){TrackerZoneControl_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function TrackerZoneControl_Model(options){var id='TrackerZoneControl_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);TrackerZoneControl_Model.superclass.constructor.call(this,id,options);}
extend(TrackerZoneControl_Model,ModelXML); 
function TrackerZoneControlList_Model(options){var id='TrackerZoneControlList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);TrackerZoneControlList_Model.superclass.constructor.call(this,id,options);}
extend(TrackerZoneControlList_Model,ModelXML); 
function AssignedVehicleList_Model(options){var id='AssignedVehicleList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Назначен';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSON("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ТС';filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);AssignedVehicleList_Model.superclass.constructor.call(this,id,options);}
extend(AssignedVehicleList_Model,ModelXML); 
function Weather_Model(options){var id='Weather_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.update_dt=new FieldDateTime("update_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content_details=new FieldText("content_details",filed_options);Weather_Model.superclass.constructor.call(this,id,options);}
extend(Weather_Model,ModelXML); 
function Weather_Controller(options){options=options||{};Weather_Controller.superclass.constructor.call(this,options);this.add_get_current();}
extend(Weather_Controller,ControllerObjServer);Weather_Controller.prototype.add_get_current=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_current',opts);this.addPublicMethod(pm);} 
function AstCallActiveList_Model(options){var id='AstCallActiveList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.unique_id=new FieldText("unique_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext=new FieldString("ext",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.num=new FieldString("num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ring_time=new FieldDateTime("ring_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.answer_time=new FieldDateTime("answer_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.hangup_time=new FieldDateTime("hangup_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_kind=new FieldString("client_kind",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.manager_comment=new FieldText("manager_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.informed=new FieldBool("informed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_name=new FieldString("contact_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.debt=new FieldFloat("debt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_manager_descr=new FieldString("client_manager_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_types_ref=new FieldJSON("client_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_come_from_ref=new FieldJSON("client_come_from_ref",filed_options);AstCallActiveList_Model.superclass.constructor.call(this,id,options);}
extend(AstCallActiveList_Model,ModelXML); 
function AstCallClientCallHistoryList_Model(options){var id='AstCallClientCallHistoryList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.unique_id=new FieldText("unique_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время';filed_options.autoInc=false;options.fields.dt=new FieldDateTime("dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.manager_comment=new FieldText("manager_comment",filed_options);AstCallClientCallHistoryList_Model.superclass.constructor.call(this,id,options);}
extend(AstCallClientCallHistoryList_Model,ModelXML); 
function AstCallClientShipHistoryList_Model(options){var id='AstCallClientShipHistoryList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.unique_id=new FieldText("unique_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldText("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.orders_ref=new FieldJSON("orders_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);AstCallClientShipHistoryList_Model.superclass.constructor.call(this,id,options);}
extend(AstCallClientShipHistoryList_Model,ModelXML); 
function AstCallCurrent_Model(options){var id='AstCallCurrent_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.unique_id=new FieldText("unique_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext=new FieldString("ext",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_tel=new FieldString("contact_tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ring_time=new FieldDateTime("ring_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.answer_time=new FieldDateTime("answer_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.hangup_time=new FieldDateTime("hangup_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_kind=new FieldString("client_kind",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.manager_comment=new FieldText("manager_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.informed=new FieldBool("informed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_name=new FieldString("contact_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_id=new FieldInt("contact_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_email=new FieldString("contact_email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_post_name=new FieldString("contact_post_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.debt=new FieldFloat("debt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_manager_descr=new FieldString("client_manager_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_types_ref=new FieldJSON("client_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_come_from_ref=new FieldJSON("client_come_from_ref",filed_options);AstCallCurrent_Model.superclass.constructor.call(this,id,options);}
extend(AstCallCurrent_Model,ModelXML); 
function ClientTelList_Model(options){var id='ClientTelList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ФИО';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Эл.почта';filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Должность';filed_options.autoInc=false;options.fields.post=new FieldString("post",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.search=new FieldString("search",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_exists=new FieldBool("tm_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_activated=new FieldBool("tm_activated",filed_options);ClientTelList_Model.superclass.constructor.call(this,id,options);}
extend(ClientTelList_Model,ModelXML); 
function VehicleDriverForSchedGen_Controller(options){options=options||{};options.listModelClass=VehicleDriverForSchedGen_Model;options.objModelClass=VehicleDriverForSchedGen_Model;VehicleDriverForSchedGen_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(VehicleDriverForSchedGen_Controller,ControllerObjClient);VehicleDriverForSchedGen_Controller.prototype.addInsert=function(){VehicleDriverForSchedGen_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldJSON("vehicle",options);pm.addField(field);var options={};var field=new FieldJSON("driver",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
VehicleDriverForSchedGen_Controller.prototype.addUpdate=function(){VehicleDriverForSchedGen_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldJSON("vehicle",options);pm.addField(field);var options={};var field=new FieldJSON("driver",options);pm.addField(field);}
VehicleDriverForSchedGen_Controller.prototype.addDelete=function(){VehicleDriverForSchedGen_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
VehicleDriverForSchedGen_Controller.prototype.addGetList=function(){VehicleDriverForSchedGen_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("vehicle",f_opts));var f_opts={};pm.addField(new FieldJSON("driver",f_opts));}
VehicleDriverForSchedGen_Controller.prototype.addGetObject=function(){VehicleDriverForSchedGen_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function VehicleDriverForSchedGen_Model(options){var id='VehicleDriverForSchedGen_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle=new FieldJSON("vehicle",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver=new FieldJSON("driver",filed_options);VehicleDriverForSchedGen_Model.superclass.constructor.call(this,id,options);}
extend(VehicleDriverForSchedGen_Model,ModelJSON); 
function PumpVehicleWorkList_Model(options){var id='PumpVehicleWorkList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_prices_ref=new FieldJSON("pump_prices_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicles_ref=new FieldJSON("pump_vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_owner_id=new FieldInt("pump_vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owners_ref=new FieldJSON("vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.feature=new FieldString("feature",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.make=new FieldString("make",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.plate=new FieldString("plate",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_length=new FieldInt("pump_length",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cels=new FieldJSONB("phone_cels",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_prices=new FieldJSONB("pump_prices",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_owners_ar=new FieldArray("pump_vehicle_owners_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Минимальное количество м3 для заявки';filed_options.autoInc=false;options.fields.min_order_quant=new FieldInt("min_order_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Минимальный интервал между заявками';filed_options.autoInc=false;options.fields.min_order_time_interval=new FieldInterval("min_order_time_interval",filed_options);PumpVehicleWorkList_Model.superclass.constructor.call(this,id,options);}
extend(PumpVehicleWorkList_Model,ModelXML); 
function ShipmentForDriverCostHeader_Model(options){var id='ShipmentForDriverCostHeader_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.date=new FieldDate("date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);ShipmentForDriverCostHeader_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentForDriverCostHeader_Model,ModelXML); 
function ShipmentForDriverCost_Model(options){var id='ShipmentForDriverCost_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date=new FieldDate("date",filed_options);options.fields.date.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.distance_to=new FieldFloat("distance_to",filed_options);options.fields.distance_to.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');ShipmentForDriverCost_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentForDriverCost_Model,ModelXML); 
function ShipmentForOwnerCostHeader_Model(options){var id='ShipmentForOwnerCostHeader_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.date=new FieldDate("date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);ShipmentForOwnerCostHeader_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentForOwnerCostHeader_Model,ModelXML); 
function ShipmentForOwnerCost_Model(options){var id='ShipmentForOwnerCost_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date=new FieldDate("date",filed_options);options.fields.date.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.distance_to=new FieldFloat("distance_to",filed_options);options.fields.distance_to.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');ShipmentForOwnerCost_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentForOwnerCost_Model,ModelXML); 
function ShipmentForDriverCostHeader_Controller(options){options=options||{};options.listModelClass=ShipmentForDriverCostHeader_Model;options.objModelClass=ShipmentForDriverCostHeader_Model;ShipmentForDriverCostHeader_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ShipmentForDriverCostHeader_Controller,ControllerObjServer);ShipmentForDriverCostHeader_Controller.prototype.addInsert=function(){ShipmentForDriverCostHeader_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldDate("date",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);}
ShipmentForDriverCostHeader_Controller.prototype.addUpdate=function(){ShipmentForDriverCostHeader_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldDate("date",options);pm.addField(field);field=new FieldDate("old_date",{});pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);}
ShipmentForDriverCostHeader_Controller.prototype.addDelete=function(){ShipmentForDriverCostHeader_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldDate("date",options));}
ShipmentForDriverCostHeader_Controller.prototype.addGetList=function(){ShipmentForDriverCostHeader_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldDate("date",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date");}
ShipmentForDriverCostHeader_Controller.prototype.addGetObject=function(){ShipmentForDriverCostHeader_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldDate("date",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ShipmentForDriverCost_Controller(options){options=options||{};options.listModelClass=ShipmentForDriverCost_Model;options.objModelClass=ShipmentForDriverCost_Model;ShipmentForDriverCost_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ShipmentForDriverCost_Controller,ControllerObjServer);ShipmentForDriverCost_Controller.prototype.addInsert=function(){ShipmentForDriverCost_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldDate("date",options);pm.addField(field);var options={};var field=new FieldFloat("distance_to",options);pm.addField(field);var options={};var field=new FieldFloat("price",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ShipmentForDriverCost_Controller.prototype.addUpdate=function(){ShipmentForDriverCost_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDate("date",options);pm.addField(field);var options={};var field=new FieldFloat("distance_to",options);pm.addField(field);var options={};var field=new FieldFloat("price",options);pm.addField(field);}
ShipmentForDriverCost_Controller.prototype.addDelete=function(){ShipmentForDriverCost_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ShipmentForDriverCost_Controller.prototype.addGetList=function(){ShipmentForDriverCost_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDate("date",f_opts));var f_opts={};pm.addField(new FieldFloat("distance_to",f_opts));var f_opts={};pm.addField(new FieldFloat("price",f_opts));}
ShipmentForDriverCost_Controller.prototype.addGetObject=function(){ShipmentForDriverCost_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ShipmentForOwnerCostHeader_Controller(options){options=options||{};options.listModelClass=ShipmentForOwnerCostHeader_Model;options.objModelClass=ShipmentForOwnerCostHeader_Model;ShipmentForOwnerCostHeader_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ShipmentForOwnerCostHeader_Controller,ControllerObjServer);ShipmentForOwnerCostHeader_Controller.prototype.addInsert=function(){ShipmentForOwnerCostHeader_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldDate("date",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);}
ShipmentForOwnerCostHeader_Controller.prototype.addUpdate=function(){ShipmentForOwnerCostHeader_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldDate("date",options);pm.addField(field);field=new FieldDate("old_date",{});pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);}
ShipmentForOwnerCostHeader_Controller.prototype.addDelete=function(){ShipmentForOwnerCostHeader_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldDate("date",options));}
ShipmentForOwnerCostHeader_Controller.prototype.addGetList=function(){ShipmentForOwnerCostHeader_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldDate("date",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));}
ShipmentForOwnerCostHeader_Controller.prototype.addGetObject=function(){ShipmentForOwnerCostHeader_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldDate("date",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ShipmentForOwnerCost_Controller(options){options=options||{};options.listModelClass=ShipmentForOwnerCost_Model;options.objModelClass=ShipmentForOwnerCost_Model;ShipmentForOwnerCost_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ShipmentForOwnerCost_Controller,ControllerObjServer);ShipmentForOwnerCost_Controller.prototype.addInsert=function(){ShipmentForOwnerCost_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldDate("date",options);pm.addField(field);var options={};var field=new FieldFloat("distance_to",options);pm.addField(field);var options={};var field=new FieldFloat("price",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ShipmentForOwnerCost_Controller.prototype.addUpdate=function(){ShipmentForOwnerCost_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDate("date",options);pm.addField(field);var options={};var field=new FieldFloat("distance_to",options);pm.addField(field);var options={};var field=new FieldFloat("price",options);pm.addField(field);}
ShipmentForOwnerCost_Controller.prototype.addDelete=function(){ShipmentForOwnerCost_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ShipmentForOwnerCost_Controller.prototype.addGetList=function(){ShipmentForOwnerCost_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDate("date",f_opts));var f_opts={};pm.addField(new FieldFloat("distance_to",f_opts));var f_opts={};pm.addField(new FieldFloat("price",f_opts));}
ShipmentForOwnerCost_Controller.prototype.addGetObject=function(){ShipmentForOwnerCost_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ConcreteCostHeader_Model(options){var id='ConcreteCostHeader_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.date=new FieldDate("date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ar=new FieldArray("clients_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_list=new FieldJSONB("clients_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);ConcreteCostHeader_Model.superclass.constructor.call(this,id,options);}
extend(ConcreteCostHeader_Model,ModelXML); 
function ConcreteCost_Model(options){var id='ConcreteCost_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_costs_h_id=new FieldInt("concrete_costs_h_id",filed_options);options.fields.concrete_costs_h_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');ConcreteCost_Model.superclass.constructor.call(this,id,options);}
extend(ConcreteCost_Model,ModelXML); 
function ConcreteCostHeader_Controller(options){options=options||{};options.listModelClass=ConcreteCostHeader_Model;options.objModelClass=ConcreteCostHeader_Model;ConcreteCostHeader_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_client_price_list();}
extend(ConcreteCostHeader_Controller,ControllerObjServer);ConcreteCostHeader_Controller.prototype.addInsert=function(){ConcreteCostHeader_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldDate("date",options);pm.addField(field);var options={};var field=new FieldArray("clients_ar",options);pm.addField(field);var options={};var field=new FieldJSONB("clients_list",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ConcreteCostHeader_Controller.prototype.addUpdate=function(){ConcreteCostHeader_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldDate("date",options);pm.addField(field);field=new FieldDate("old_date",{});pm.addField(field);var options={};var field=new FieldArray("clients_ar",options);pm.addField(field);var options={};var field=new FieldJSONB("clients_list",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);}
ConcreteCostHeader_Controller.prototype.addDelete=function(){ConcreteCostHeader_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));var options={"required":true};pm.addField(new FieldDate("date",options));}
ConcreteCostHeader_Controller.prototype.addGetList=function(){ConcreteCostHeader_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDate("date",f_opts));var f_opts={};pm.addField(new FieldArray("clients_ar",f_opts));var f_opts={};pm.addField(new FieldJSONB("clients_list",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date");}
ConcreteCostHeader_Controller.prototype.addGetObject=function(){ConcreteCostHeader_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDate("date",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
ConcreteCostHeader_Controller.prototype.add_get_client_price_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_client_price_list',opts);var options={};pm.addField(new FieldInt("client_id",options));this.addPublicMethod(pm);} 
function ConcreteCost_Controller(options){options=options||{};options.listModelClass=ConcreteCostList_Model;options.objModelClass=ConcreteCostList_Model;ConcreteCost_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ConcreteCost_Controller,ControllerObjServer);ConcreteCost_Controller.prototype.addInsert=function(){ConcreteCost_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("concrete_costs_h_id",options);pm.addField(field);var options={};var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};var field=new FieldFloat("price",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ConcreteCost_Controller.prototype.addUpdate=function(){ConcreteCost_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("concrete_costs_h_id",options);pm.addField(field);var options={};var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};var field=new FieldFloat("price",options);pm.addField(field);}
ConcreteCost_Controller.prototype.addDelete=function(){ConcreteCost_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ConcreteCost_Controller.prototype.addGetList=function(){ConcreteCost_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("concrete_costs_h_id",f_opts));var f_opts={};pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};pm.addField(new FieldFloat("price",f_opts));}
ConcreteCost_Controller.prototype.addGetObject=function(){ConcreteCost_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ConcreteCostList_Model(options){var id='ConcreteCostList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_costs_h_id=new FieldInt("concrete_costs_h_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');ConcreteCostList_Model.superclass.constructor.call(this,id,options);}
extend(ConcreteCostList_Model,ModelXML); 
function ConcreteTypeList_Model(options){var id='ConcreteTypeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Код 1С';filed_options.autoInc=false;options.fields.code_1c=new FieldString("code_1c",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Норма давл.';filed_options.autoInc=false;options.fields.pres_norm=new FieldFloat("pres_norm",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кф.МПА';filed_options.autoInc=false;options.fields.mpa_ratio=new FieldFloat("mpa_ratio",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Есть нормы расхода';filed_options.autoInc=false;options.fields.material_cons_rates=new FieldBool("material_cons_rates",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отображать на сайте';filed_options.autoInc=false;options.fields.show_on_site=new FieldBool("show_on_site",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Официальное наименование для накладной';filed_options.autoInc=false;options.fields.official_name=new FieldString("official_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Прочность для паспорта качества';filed_options.autoInc=false;options.fields.prochnost=new FieldInt("prochnost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='F';filed_options.autoInc=false;options.fields.f_val=new FieldInt("f_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='W';filed_options.autoInc=false;options.fields.w_val=new FieldInt("w_val",filed_options);ConcreteTypeList_Model.superclass.constructor.call(this,id,options);}
extend(ConcreteTypeList_Model,ModelXML); 
function VehicleOwner_Model(options){var id='VehicleOwner_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('150');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);VehicleOwner_Model.superclass.constructor.call(this,id,options);}
extend(VehicleOwner_Model,ModelXML); 
function VehicleOwner_Controller(options){options=options||{};options.listModelClass=VehicleOwnerList_Model;options.objModelClass=VehicleOwnerList_Model;VehicleOwner_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_get_tot_report();this.add_get_tot_income_report();this.add_get_tot_income_report_all();}
extend(VehicleOwner_Controller,ControllerObjServer);VehicleOwner_Controller.prototype.addInsert=function(){VehicleOwner_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
VehicleOwner_Controller.prototype.addUpdate=function(){VehicleOwner_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);}
VehicleOwner_Controller.prototype.addDelete=function(){VehicleOwner_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
VehicleOwner_Controller.prototype.addGetList=function(){VehicleOwner_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldText("client_list",f_opts));}
VehicleOwner_Controller.prototype.addGetObject=function(){VehicleOwner_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
VehicleOwner_Controller.prototype.addComplete=function(){VehicleOwner_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
VehicleOwner_Controller.prototype.add_get_tot_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_tot_report',opts);var options={};pm.addField(new FieldDate("date",options));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldInt("vehicle_owner_id",options));this.addPublicMethod(pm);}
VehicleOwner_Controller.prototype.add_get_tot_income_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_tot_income_report',opts);var options={};pm.addField(new FieldDate("date_from",options));var options={};pm.addField(new FieldDate("date_to",options));var options={};pm.addField(new FieldInt("vehicle_owner_id",options));this.addPublicMethod(pm);}
VehicleOwner_Controller.prototype.add_get_tot_income_report_all=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_tot_income_report_all',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldInt("inline",options));this.addPublicMethod(pm);} 
function ShipmentCancelations_Model(options){var id='ShipmentCancelations_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Заявка';filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);options.fields.order_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Экипаж';filed_options.autoInc=false;options.fields.vehicle_schedule_id=new FieldInt("vehicle_schedule_id",filed_options);options.fields.vehicle_schedule_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Заявка';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);options.fields.comment_text.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);ShipmentCancelations_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentCancelations_Model,ModelXML); 
function ShipmentCancelation_Controller(options){options=options||{};options.listModelClass=ShipmentCancelationList_Model;options.objModelClass=ShipmentCancelationList_Model;ShipmentCancelation_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ShipmentCancelation_Controller,ControllerObjServer);ShipmentCancelation_Controller.prototype.addInsert=function(){ShipmentCancelation_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};options.alias="Дата отгрузки";var field=new FieldDateTimeTZ("ship_date_time",options);pm.addField(field);var options={};options.alias="Дата назначения";var field=new FieldDateTimeTZ("assign_date_time",options);pm.addField(field);var options={};options.alias="Заявка";options.required=true;var field=new FieldInt("order_id",options);pm.addField(field);var options={};options.alias="Экипаж";options.required=true;var field=new FieldInt("vehicle_schedule_id",options);pm.addField(field);var options={};options.alias="Комментарий";options.required=true;var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Пользователь";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ShipmentCancelation_Controller.prototype.addUpdate=function(){ShipmentCancelation_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};options.alias="Дата отгрузки";var field=new FieldDateTimeTZ("ship_date_time",options);pm.addField(field);var options={};options.alias="Дата назначения";var field=new FieldDateTimeTZ("assign_date_time",options);pm.addField(field);var options={};options.alias="Заявка";var field=new FieldInt("order_id",options);pm.addField(field);var options={};options.alias="Экипаж";var field=new FieldInt("vehicle_schedule_id",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Пользователь";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);}
ShipmentCancelation_Controller.prototype.addDelete=function(){ShipmentCancelation_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
ShipmentCancelation_Controller.prototype.addGetList=function(){ShipmentCancelation_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};f_opts.alias="Дата отгрузки";pm.addField(new FieldDateTimeTZ("ship_date_time",f_opts));var f_opts={};f_opts.alias="Дата назначения";pm.addField(new FieldDateTimeTZ("assign_date_time",f_opts));var f_opts={};pm.addField(new FieldInt("order_id",f_opts));var f_opts={};f_opts.alias="Заявка";pm.addField(new FieldJSON("orders_ref",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_schedule_id",f_opts));var f_opts={};f_opts.alias="ТС,водитель";pm.addField(new FieldJSON("vehicle_schedules_ref",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("comment_text",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Пользователь";pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));}
ShipmentCancelation_Controller.prototype.addGetObject=function(){ShipmentCancelation_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ShipmentCancelation_Model(options){var id='ShipmentCancelation_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата отгрузки';filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTimeTZ("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата назначения';filed_options.autoInc=false;options.fields.assign_date_time=new FieldDateTimeTZ("assign_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Заявка';filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);options.fields.order_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Экипаж';filed_options.autoInc=false;options.fields.vehicle_schedule_id=new FieldInt("vehicle_schedule_id",filed_options);options.fields.vehicle_schedule_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);options.fields.comment_text.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');ShipmentCancelation_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentCancelation_Model,ModelXML); 
function ShipmentCancelationList_Model(options){var id='ShipmentCancelationList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата отгрузки';filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTimeTZ("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата назначения';filed_options.autoInc=false;options.fields.assign_date_time=new FieldDateTimeTZ("assign_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Заявка';filed_options.autoInc=false;options.fields.orders_ref=new FieldJSON("orders_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_schedule_id=new FieldInt("vehicle_schedule_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ТС,водитель';filed_options.autoInc=false;options.fields.vehicle_schedules_ref=new FieldJSON("vehicle_schedules_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);ShipmentCancelationList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentCancelationList_Model,ModelXML); 
function ShipmentPumpForVehOwnerList_Model(options){var id='ShipmentPumpForVehOwnerList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.last_ship_id=new FieldInt("last_ship_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость';filed_options.autoInc=false;options.fields.pump_cost=new FieldFloat("pump_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автомобиль';filed_options.autoInc=false;options.fields.pump_vehicles_ref=new FieldJSON("pump_vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_id=new FieldInt("pump_vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_owner_id=new FieldInt("pump_vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Владелец';filed_options.autoInc=false;options.fields.pump_vehicle_owners_ref=new FieldJSON("pump_vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий бухгалетрии';filed_options.autoInc=false;options.fields.acc_comment=new FieldText("acc_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Согласовано насос';filed_options.autoInc=false;options.fields.owner_pump_agreed=new FieldBool("owner_pump_agreed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата согласования насос';filed_options.autoInc=false;options.fields.owner_pump_agreed_date_time=new FieldDateTimeTZ("owner_pump_agreed_date_time",filed_options);ShipmentPumpForVehOwnerList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentPumpForVehOwnerList_Model,ModelXML); 
function ShipmentForVehOwnerList_Model(options){var id='ShipmentForVehOwnerList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата отгрузки';filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTime("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автомобиль';filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSON("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Владелец';filed_options.autoInc=false;options.fields.vehicle_owners_ref=new FieldJSON("vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость доставки';filed_options.autoInc=false;options.fields.cost=new FieldFloat("cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость доставки для водителя';filed_options.autoInc=false;options.fields.cost_for_driver=new FieldFloat("cost_for_driver",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость доставки отредактирована';filed_options.autoInc=false;options.fields.ship_cost_edit=new FieldBool("ship_cost_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Простой';filed_options.autoInc=false;options.fields.demurrage=new FieldString("demurrage",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стомость простоя';filed_options.autoInc=false;options.fields.demurrage_cost=new FieldFloat("demurrage_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий бухгалетрии';filed_options.autoInc=false;options.fields.acc_comment_shipment=new FieldText("acc_comment_shipment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Согласовано миксер';filed_options.autoInc=false;options.fields.owner_agreed=new FieldBool("owner_agreed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата согласования миксер';filed_options.autoInc=false;options.fields.owner_agreed_date_time=new FieldDateTimeTZ("owner_agreed_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_bases_ref=new FieldJSON("production_bases_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);ShipmentForVehOwnerList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentForVehOwnerList_Model,ModelXML); 
function UserOperatorList_Model(options){var id='UserOperatorList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контакты';filed_options.autoInc=false;options.fields.contact_list=new FieldJSON("contact_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контакты';filed_options.autoInc=false;options.fields.contact_ids=new FieldText("contact_ids",filed_options);UserOperatorList_Model.superclass.constructor.call(this,id,options);}
extend(UserOperatorList_Model,ModelXML); 
function ShipmentForClientVehOwnerList_Model(options){var id='ShipmentForClientVehOwnerList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата отгрузки';filed_options.autoInc=false;options.fields.ship_date=new FieldDateTime("ship_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость доставки';filed_options.autoInc=false;options.fields.cost_shipment=new FieldFloat("cost_shipment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость бетон';filed_options.autoInc=false;options.fields.cost_concrete=new FieldFloat("cost_concrete",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость чужего насоса';filed_options.autoInc=false;options.fields.cost_other_owner_pump=new FieldFloat("cost_other_owner_pump",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость простоя';filed_options.autoInc=false;options.fields.cost_demurrage=new FieldFloat("cost_demurrage",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость итого';filed_options.autoInc=false;options.fields.cost_total=new FieldFloat("cost_total",filed_options);ShipmentForClientVehOwnerList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentForClientVehOwnerList_Model,ModelXML); 
function ConcreteCostForOwnerHeader_Controller(options){options=options||{};options.listModelClass=ConcreteCostForOwnerHeader_Model;options.objModelClass=ConcreteCostForOwnerHeader_Model;ConcreteCostForOwnerHeader_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ConcreteCostForOwnerHeader_Controller,ControllerObjServer);ConcreteCostForOwnerHeader_Controller.prototype.addInsert=function(){ConcreteCostForOwnerHeader_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDate("create_date",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ConcreteCostForOwnerHeader_Controller.prototype.addUpdate=function(){ConcreteCostForOwnerHeader_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDate("create_date",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);}
ConcreteCostForOwnerHeader_Controller.prototype.addDelete=function(){ConcreteCostForOwnerHeader_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ConcreteCostForOwnerHeader_Controller.prototype.addGetList=function(){ConcreteCostForOwnerHeader_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDate("create_date",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));}
ConcreteCostForOwnerHeader_Controller.prototype.addGetObject=function(){ConcreteCostForOwnerHeader_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ConcreteCostForOwner_Controller(options){options=options||{};options.listModelClass=ConcreteCostForOwnerList_Model;options.objModelClass=ConcreteCostForOwnerList_Model;ConcreteCostForOwner_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ConcreteCostForOwner_Controller,ControllerObjServer);ConcreteCostForOwner_Controller.prototype.addInsert=function(){ConcreteCostForOwner_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("header_id",options);pm.addField(field);var options={};var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};var field=new FieldFloat("price",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ConcreteCostForOwner_Controller.prototype.addUpdate=function(){ConcreteCostForOwner_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("header_id",options);pm.addField(field);var options={};var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};var field=new FieldFloat("price",options);pm.addField(field);}
ConcreteCostForOwner_Controller.prototype.addDelete=function(){ConcreteCostForOwner_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ConcreteCostForOwner_Controller.prototype.addGetList=function(){ConcreteCostForOwner_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("header_id",f_opts));var f_opts={};pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};pm.addField(new FieldFloat("price",f_opts));}
ConcreteCostForOwner_Controller.prototype.addGetObject=function(){ConcreteCostForOwner_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ConcreteCostForOwnerHeader_Model(options){var id='ConcreteCostForOwnerHeader_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.create_date=new FieldDate("create_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);ConcreteCostForOwnerHeader_Model.superclass.constructor.call(this,id,options);}
extend(ConcreteCostForOwnerHeader_Model,ModelXML); 
function ConcreteCostForOwner_Model(options){var id='ConcreteCostForOwner_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.header_id=new FieldInt("header_id",filed_options);options.fields.header_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');ConcreteCostForOwner_Model.superclass.constructor.call(this,id,options);}
extend(ConcreteCostForOwner_Model,ModelXML); 
function ConcreteCostForOwnerList_Model(options){var id='ConcreteCostForOwnerList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.header_id=new FieldInt("header_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');ConcreteCostForOwnerList_Model.superclass.constructor.call(this,id,options);}
extend(ConcreteCostForOwnerList_Model,ModelXML); 
function VehicleOwnerConcretePrice_Model(options){var id='VehicleOwnerConcretePrice_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);options.fields.vehicle_owner_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);options.fields.client_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.date=new FieldDate("date",filed_options);options.fields.date.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_costs_for_owner_h_id=new FieldInt("concrete_costs_for_owner_h_id",filed_options);VehicleOwnerConcretePrice_Model.superclass.constructor.call(this,id,options);}
extend(VehicleOwnerConcretePrice_Model,ModelXML); 
function VehicleOwnerConcretePrice_Controller(options){options=options||{};options.listModelClass=VehicleOwnerConcretePriceList_Model;options.objModelClass=VehicleOwnerConcretePriceList_Model;VehicleOwnerConcretePrice_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(VehicleOwnerConcretePrice_Controller,ControllerObjServer);VehicleOwnerConcretePrice_Controller.prototype.addInsert=function(){VehicleOwnerConcretePrice_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("vehicle_owner_id",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("client_id",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldDate("date",options);pm.addField(field);var options={};var field=new FieldInt("concrete_costs_for_owner_h_id",options);pm.addField(field);}
VehicleOwnerConcretePrice_Controller.prototype.addUpdate=function(){VehicleOwnerConcretePrice_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("vehicle_owner_id",options);pm.addField(field);field=new FieldInt("old_vehicle_owner_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("client_id",options);pm.addField(field);field=new FieldInt("old_client_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldDate("date",options);pm.addField(field);field=new FieldDate("old_date",{});pm.addField(field);var options={};var field=new FieldInt("concrete_costs_for_owner_h_id",options);pm.addField(field);}
VehicleOwnerConcretePrice_Controller.prototype.addDelete=function(){VehicleOwnerConcretePrice_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("vehicle_owner_id",options));var options={"required":true};pm.addField(new FieldInt("client_id",options));var options={"required":true};pm.addField(new FieldDate("date",options));}
VehicleOwnerConcretePrice_Controller.prototype.addGetList=function(){VehicleOwnerConcretePrice_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("vehicle_owner_id",f_opts));var f_opts={};pm.addField(new FieldDate("date",f_opts));var f_opts={};pm.addField(new FieldJSON("vehicle_owners_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("concrete_costs_for_owner_h_ref",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));}
VehicleOwnerConcretePrice_Controller.prototype.addGetObject=function(){VehicleOwnerConcretePrice_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("vehicle_owner_id",f_opts));var f_opts={};pm.addField(new FieldDate("date",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function VehicleOwnerConcretePriceList_Model(options){var id='VehicleOwnerConcretePriceList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.date=new FieldDate("date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owners_ref=new FieldJSON("vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_costs_for_owner_h_ref=new FieldJSON("concrete_costs_for_owner_h_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);VehicleOwnerConcretePriceList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleOwnerConcretePriceList_Model,ModelXML); 
function VehicleOwnerClient_Model(options){var id='VehicleOwnerClient_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);options.fields.vehicle_owner_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);options.fields.client_id.getValidator().setRequired(true);VehicleOwnerClient_Model.superclass.constructor.call(this,id,options);}
extend(VehicleOwnerClient_Model,ModelXML); 
function VehicleOwnerClient_Controller(options){options=options||{};options.listModelClass=VehicleOwnerClientList_Model;options.objModelClass=VehicleOwnerClientList_Model;VehicleOwnerClient_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(VehicleOwnerClient_Controller,ControllerObjServer);VehicleOwnerClient_Controller.prototype.addInsert=function(){VehicleOwnerClient_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("vehicle_owner_id",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("client_id",options);pm.addField(field);}
VehicleOwnerClient_Controller.prototype.addUpdate=function(){VehicleOwnerClient_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("vehicle_owner_id",options);pm.addField(field);field=new FieldInt("old_vehicle_owner_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("client_id",options);pm.addField(field);field=new FieldInt("old_client_id",{});pm.addField(field);}
VehicleOwnerClient_Controller.prototype.addDelete=function(){VehicleOwnerClient_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("vehicle_owner_id",options));var options={"required":true};pm.addField(new FieldInt("client_id",options));}
VehicleOwnerClient_Controller.prototype.addGetList=function(){VehicleOwnerClient_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("vehicle_owner_id",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};pm.addField(new FieldJSON("vehicle_owners_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("last_concrete_costs_for_owner_h_ref",f_opts));}
VehicleOwnerClient_Controller.prototype.addGetObject=function(){VehicleOwnerClient_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("vehicle_owner_id",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function VehicleOwnerClientList_Model(options){var id='VehicleOwnerClientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owners_ref=new FieldJSON("vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.last_concrete_costs_for_owner_h_ref=new FieldJSON("last_concrete_costs_for_owner_h_ref",filed_options);VehicleOwnerClientList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleOwnerClientList_Model,ModelXML); 
function Login_Controller(options){options=options||{};options.listModelClass=LoginList_Model;options.objModelClass=LoginList_Model;Login_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();}
extend(Login_Controller,ControllerObjServer);Login_Controller.prototype.addGetList=function(){Login_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Дата входа";pm.addField(new FieldDateTimeTZ("date_time_in",f_opts));var f_opts={};f_opts.alias="Дата выхода";pm.addField(new FieldDateTimeTZ("date_time_out",f_opts));var f_opts={};f_opts.alias="IP адрес";pm.addField(new FieldString("ip",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Пользователь";pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};pm.addField(new FieldString("pub_key",f_opts));var f_opts={};f_opts.alias="Время создания сессии";pm.addField(new FieldDateTimeTZ("set_date_time",f_opts));var f_opts={};f_opts.alias="Время последнего обращения";pm.addField(new FieldDateTimeTZ("session_set_time",f_opts));var f_opts={};pm.addField(new FieldText("user_agent",f_opts));var f_opts={};pm.addField(new FieldText("header_user_agent",f_opts));}
Login_Controller.prototype.addGetObject=function(){Login_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function Login_Model(options){var id='Login_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time_in=new FieldDateTimeTZ("date_time_in",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time_out=new FieldDateTimeTZ("date_time_out",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ip=new FieldString("ip",filed_options);options.fields.ip.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.session_id=new FieldString("session_id",filed_options);options.fields.session_id.getValidator().setMaxLength('128');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pub_key=new FieldString("pub_key",filed_options);options.fields.pub_key.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.set_date_time=new FieldDateTimeTZ("set_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.headers=new FieldText("headers",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_agent=new FieldJSONB("user_agent",filed_options);Login_Model.superclass.constructor.call(this,id,options);}
extend(Login_Model,ModelXML); 
function LoginList_Model(options){var id='LoginList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата входа';filed_options.autoInc=false;options.fields.date_time_in=new FieldDateTimeTZ("date_time_in",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата выхода';filed_options.autoInc=false;options.fields.date_time_out=new FieldDateTimeTZ("date_time_out",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='IP адрес';filed_options.autoInc=false;options.fields.ip=new FieldString("ip",filed_options);options.fields.ip.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pub_key=new FieldString("pub_key",filed_options);options.fields.pub_key.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время создания сессии';filed_options.autoInc=false;options.fields.set_date_time=new FieldDateTimeTZ("set_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время последнего обращения';filed_options.autoInc=false;options.fields.session_set_time=new FieldDateTimeTZ("session_set_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_agent=new FieldText("user_agent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.header_user_agent=new FieldText("header_user_agent",filed_options);LoginList_Model.superclass.constructor.call(this,id,options);}
extend(LoginList_Model,ModelXML); 
function Session_Model(options){var id='Session_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldString("id",filed_options);options.fields.id.getValidator().setMaxLength('128');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.set_time=new FieldDateTimeTZ("set_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.data=new FieldText("data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.session_key=new FieldString("session_key",filed_options);options.fields.session_key.getValidator().setMaxLength('128');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pub_key=new FieldString("pub_key",filed_options);options.fields.pub_key.getValidator().setMaxLength('15');Session_Model.superclass.constructor.call(this,id,options);}
extend(Session_Model,ModelXML); 
function ShippedVehicleList_Model(options){var id='ShippedVehicleList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгружен';filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTime("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSON("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ТС';filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);ShippedVehicleList_Model.superclass.constructor.call(this,id,options);}
extend(ShippedVehicleList_Model,ModelXML); 
function TelList_Model(options){var id='TelList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');TelList_Model.superclass.constructor.call(this,id,options);}
extend(TelList_Model,ModelJSON); 
function RAMaterialConsumptionDocList_Model(options){var id='RAMaterialConsumptionDocList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_descr=new FieldString("date_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_type_descr=new FieldString("concrete_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ТС';filed_options.autoInc=false;options.fields.vehicle_descr=new FieldString("vehicle_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.driver_descr=new FieldString("driver_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объем';filed_options.autoInc=false;options.fields.concrete_quant=new FieldFloat("concrete_quant",filed_options);RAMaterialConsumptionDocList_Model.superclass.constructor.call(this,id,options);}
extend(RAMaterialConsumptionDocList_Model,ModelXML); 
function TelList_Controller(options){options=options||{};options.listModelClass=TelList_Model;options.objModelClass=TelList_Model;TelList_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(TelList_Controller,ControllerObjClient);TelList_Controller.prototype.addInsert=function(){TelList_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("tel",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
TelList_Controller.prototype.addUpdate=function(){TelList_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("tel",options);pm.addField(field);}
TelList_Controller.prototype.addDelete=function(){TelList_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
TelList_Controller.prototype.addGetList=function(){TelList_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("tel",f_opts));}
TelList_Controller.prototype.addGetObject=function(){TelList_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ConcreteTypeMapToProduction_Model(options){var id='ConcreteTypeMapToProduction_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_descr=new FieldString("production_descr",filed_options);options.fields.production_descr.getValidator().setRequired(true);options.fields.production_descr.getValidator().setMaxLength('100');ConcreteTypeMapToProduction_Model.superclass.constructor.call(this,id,options);}
extend(ConcreteTypeMapToProduction_Model,ModelXML); 
function RawMaterialMapToProduction_Model(options){var id='RawMaterialMapToProduction_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raw_material_id=new FieldInt("raw_material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_descr=new FieldString("production_descr",filed_options);options.fields.production_descr.getValidator().setRequired(true);options.fields.production_descr.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);RawMaterialMapToProduction_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialMapToProduction_Model,ModelXML); 
function MaterialFactConsumption_Model(options){var id='MaterialFactConsumption_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);options.fields.production_site_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.upload_date_time=new FieldDateTimeTZ("upload_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.upload_user_id=new FieldInt("upload_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_production_descr=new FieldString("concrete_type_production_descr",filed_options);options.fields.concrete_type_production_descr.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raw_material_production_descr=new FieldString("raw_material_production_descr",filed_options);options.fields.raw_material_production_descr.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raw_material_id=new FieldInt("raw_material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_production_descr=new FieldString("vehicle_production_descr",filed_options);options.fields.vehicle_production_descr.getValidator().setMaxLength('6');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_schedule_state_id=new FieldInt("vehicle_schedule_state_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_quant=new FieldFloat("concrete_quant",filed_options);options.fields.concrete_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_quant=new FieldFloat("material_quant",filed_options);options.fields.material_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_quant_req=new FieldFloat("material_quant_req",filed_options);options.fields.material_quant_req.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cement_silo_id=new FieldInt("cement_silo_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_id=new FieldString("production_id",filed_options);options.fields.production_id.getValidator().setMaxLength('36');MaterialFactConsumption_Model.superclass.constructor.call(this,id,options);}
extend(MaterialFactConsumption_Model,ModelXML); 
function ConcreteTypeMapToProduction_Controller(options){options=options||{};options.listModelClass=ConcreteTypeMapToProductionList_Model;options.objModelClass=ConcreteTypeMapToProductionList_Model;ConcreteTypeMapToProduction_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ConcreteTypeMapToProduction_Controller,ControllerObjServer);ConcreteTypeMapToProduction_Controller.prototype.addInsert=function(){ConcreteTypeMapToProduction_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("production_descr",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ConcreteTypeMapToProduction_Controller.prototype.addUpdate=function(){ConcreteTypeMapToProduction_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};var field=new FieldString("production_descr",options);pm.addField(field);}
ConcreteTypeMapToProduction_Controller.prototype.addDelete=function(){ConcreteTypeMapToProduction_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ConcreteTypeMapToProduction_Controller.prototype.addGetList=function(){ConcreteTypeMapToProduction_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};pm.addField(new FieldString("production_descr",f_opts));}
ConcreteTypeMapToProduction_Controller.prototype.addGetObject=function(){ConcreteTypeMapToProduction_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function RawMaterialMapToProduction_Controller(options){options=options||{};options.listModelClass=RawMaterialMapToProductionList_Model;options.objModelClass=RawMaterialMapToProductionList_Model;RawMaterialMapToProduction_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(RawMaterialMapToProduction_Controller,ControllerObjServer);RawMaterialMapToProduction_Controller.prototype.addInsert=function(){RawMaterialMapToProduction_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldInt("raw_material_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("production_descr",options);pm.addField(field);var options={};var field=new FieldInt("order_id",options);pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
RawMaterialMapToProduction_Controller.prototype.addUpdate=function(){RawMaterialMapToProduction_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldInt("raw_material_id",options);pm.addField(field);var options={};var field=new FieldString("production_descr",options);pm.addField(field);var options={};var field=new FieldInt("order_id",options);pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);}
RawMaterialMapToProduction_Controller.prototype.addDelete=function(){RawMaterialMapToProduction_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
RawMaterialMapToProduction_Controller.prototype.addGetList=function(){RawMaterialMapToProduction_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldJSON("raw_materials_ref",f_opts));var f_opts={};pm.addField(new FieldString("production_descr",f_opts));var f_opts={};pm.addField(new FieldInt("order_id",f_opts));var f_opts={};pm.addField(new FieldInt("raw_material_id",f_opts));var f_opts={};pm.addField(new FieldInt("raw_material_ord",f_opts));var f_opts={};pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));}
RawMaterialMapToProduction_Controller.prototype.addGetObject=function(){RawMaterialMapToProduction_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function RawMaterialMapToProductionList_Model(options){var id='RawMaterialMapToProductionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raw_materials_ref=new FieldJSON("raw_materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_descr=new FieldString("production_descr",filed_options);options.fields.production_descr.getValidator().setRequired(true);options.fields.production_descr.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raw_material_id=new FieldInt("raw_material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raw_material_ord=new FieldInt("raw_material_ord",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);RawMaterialMapToProductionList_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialMapToProductionList_Model,ModelXML); 
function ConcreteTypeMapToProductionList_Model(options){var id='ConcreteTypeMapToProductionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_descr=new FieldString("production_descr",filed_options);options.fields.production_descr.getValidator().setRequired(true);options.fields.production_descr.getValidator().setMaxLength('100');ConcreteTypeMapToProductionList_Model.superclass.constructor.call(this,id,options);}
extend(ConcreteTypeMapToProductionList_Model,ModelXML); 
function MaterialFactConsumption_Controller(options){options=options||{};options.listModelClass=MaterialFactConsumptionList_Model;options.objModelClass=MaterialFactConsumptionList_Model;MaterialFactConsumption_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.add_get_rolled_list();this.addGetObject();this.add_upload_production_file();this.add_upload_production_file_auto();this.add_get_report();this.add_delete_material();}
extend(MaterialFactConsumption_Controller,ControllerObjServer);MaterialFactConsumption_Controller.prototype.addInsert=function(){MaterialFactConsumption_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("upload_date_time",options);pm.addField(field);var options={};var field=new FieldInt("upload_user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldString("concrete_type_production_descr",options);pm.addField(field);var options={};var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};var field=new FieldString("raw_material_production_descr",options);pm.addField(field);var options={};var field=new FieldInt("raw_material_id",options);pm.addField(field);var options={};var field=new FieldString("vehicle_production_descr",options);pm.addField(field);var options={};var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};var field=new FieldInt("vehicle_schedule_state_id",options);pm.addField(field);var options={};var field=new FieldFloat("concrete_quant",options);pm.addField(field);var options={};var field=new FieldFloat("material_quant",options);pm.addField(field);var options={};var field=new FieldFloat("material_quant_req",options);pm.addField(field);var options={};var field=new FieldInt("cement_silo_id",options);pm.addField(field);var options={};var field=new FieldString("production_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
MaterialFactConsumption_Controller.prototype.addUpdate=function(){MaterialFactConsumption_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("upload_date_time",options);pm.addField(field);var options={};var field=new FieldInt("upload_user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldString("concrete_type_production_descr",options);pm.addField(field);var options={};var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};var field=new FieldString("raw_material_production_descr",options);pm.addField(field);var options={};var field=new FieldInt("raw_material_id",options);pm.addField(field);var options={};var field=new FieldString("vehicle_production_descr",options);pm.addField(field);var options={};var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};var field=new FieldInt("vehicle_schedule_state_id",options);pm.addField(field);var options={};var field=new FieldFloat("concrete_quant",options);pm.addField(field);var options={};var field=new FieldFloat("material_quant",options);pm.addField(field);var options={};var field=new FieldFloat("material_quant_req",options);pm.addField(field);var options={};var field=new FieldInt("cement_silo_id",options);pm.addField(field);var options={};var field=new FieldString("production_id",options);pm.addField(field);}
MaterialFactConsumption_Controller.prototype.addDelete=function(){MaterialFactConsumption_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
MaterialFactConsumption_Controller.prototype.addGetList=function(){MaterialFactConsumption_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldDateTime("production_dt_end",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("upload_date_time",f_opts));var f_opts={};pm.addField(new FieldJSON("upload_users_ref",f_opts));var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));var f_opts={};pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("orders_ref",f_opts));var f_opts={};pm.addField(new FieldString("shipments_inf",f_opts));var f_opts={};pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};pm.addField(new FieldInt("concrete_type_id",f_opts));var f_opts={};pm.addField(new FieldString("concrete_type_production_descr",f_opts));var f_opts={};pm.addField(new FieldJSON("raw_materials_ref",f_opts));var f_opts={};pm.addField(new FieldString("raw_material_production_descr",f_opts));var f_opts={};pm.addField(new FieldJSON("vehicles_ref",f_opts));var f_opts={};pm.addField(new FieldString("vehicle_production_descr",f_opts));var f_opts={};pm.addField(new FieldFloat("concrete_quant",f_opts));var f_opts={};pm.addField(new FieldFloat("material_quant",f_opts));var f_opts={};pm.addField(new FieldFloat("material_quant_req",f_opts));var f_opts={};pm.addField(new FieldFloat("material_quant_shipped",f_opts));var f_opts={};pm.addField(new FieldBool("material_quant_tolerance_exceeded",f_opts));var f_opts={};pm.addField(new FieldBool("err_concrete_type",f_opts));var f_opts={};pm.addField(new FieldJSON("order_concrete_types_ref",f_opts));var f_opts={};pm.addField(new FieldString("production_id",f_opts));var f_opts={};pm.addField(new FieldJSON("shipments_ref",f_opts));var f_opts={};pm.addField(new FieldInt("production_key",f_opts));}
MaterialFactConsumption_Controller.prototype.add_get_rolled_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_rolled_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
MaterialFactConsumption_Controller.prototype.addGetObject=function(){MaterialFactConsumption_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
MaterialFactConsumption_Controller.prototype.add_upload_production_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('upload_production_file',opts);pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.required=true;pm.addField(new FieldInt("production_site_id",options));var options={};pm.addField(new FieldText("production_file",options));this.addPublicMethod(pm);}
MaterialFactConsumption_Controller.prototype.add_upload_production_file_auto=function(){var opts={"controller":this};var pm=new PublicMethodServer('upload_production_file_auto',opts);pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.required=true;pm.addField(new FieldInt("production_site_id",options));var options={};pm.addField(new FieldText("production_file",options));this.addPublicMethod(pm);}
MaterialFactConsumption_Controller.prototype.add_get_report=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_report',opts);var options={};options.required=true;pm.addField(new FieldInt("production_site_id",options));var options={};pm.addField(new FieldText("production_file",options));this.addPublicMethod(pm);}
MaterialFactConsumption_Controller.prototype.add_delete_material=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_material',opts);var options={};options.required=true;pm.addField(new FieldInt("production_site_id",options));var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("production_id",options));var options={};options.required=true;pm.addField(new FieldInt("raw_material_id",options));var options={};pm.addField(new FieldInt("cement_silo_id",options));this.addPublicMethod(pm);} 
function MaterialFactConsumptionList_Model(options){var id='MaterialFactConsumptionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_dt_end=new FieldDateTime("production_dt_end",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.upload_date_time=new FieldDateTimeTZ("upload_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.upload_users_ref=new FieldJSON("upload_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.orders_ref=new FieldJSON("orders_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipments_inf=new FieldString("shipments_inf",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_production_descr=new FieldString("concrete_type_production_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raw_materials_ref=new FieldJSON("raw_materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raw_material_production_descr=new FieldString("raw_material_production_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_production_descr=new FieldString("vehicle_production_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_quant=new FieldFloat("concrete_quant",filed_options);options.fields.concrete_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_quant=new FieldFloat("material_quant",filed_options);options.fields.material_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_quant_req=new FieldFloat("material_quant_req",filed_options);options.fields.material_quant_req.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_quant_shipped=new FieldFloat("material_quant_shipped",filed_options);options.fields.material_quant_shipped.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_quant_tolerance_exceeded=new FieldBool("material_quant_tolerance_exceeded",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.err_concrete_type=new FieldBool("err_concrete_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_concrete_types_ref=new FieldJSON("order_concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_id=new FieldString("production_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipments_ref=new FieldJSON("shipments_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_key=new FieldInt("production_key",filed_options);MaterialFactConsumptionList_Model.superclass.constructor.call(this,id,options);}
extend(MaterialFactConsumptionList_Model,ModelXML); 
function MaterialFactConsumptionRolledList_Model(options){var id='MaterialFactConsumptionRolledList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.upload_date_time=new FieldDateTimeTZ("upload_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.upload_users_ref=new FieldJSON("upload_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.orders_ref=new FieldJSON("orders_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipments_inf=new FieldString("shipments_inf",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_production_descr=new FieldString("concrete_type_production_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raw_material_production_descr=new FieldString("raw_material_production_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_production_descr=new FieldString("vehicle_production_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_quant=new FieldFloat("concrete_quant",filed_options);options.fields.concrete_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.materials=new FieldJSONB("materials",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.err_concrete_type=new FieldBool("err_concrete_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_concrete_types_ref=new FieldJSON("order_concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_id=new FieldString("production_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_tolerance_violated=new FieldBool("material_tolerance_violated",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipments_ref=new FieldJSON("shipments_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_key=new FieldInt("production_key",filed_options);MaterialFactConsumptionRolledList_Model.superclass.constructor.call(this,id,options);}
extend(MaterialFactConsumptionRolledList_Model,ModelXML); 
function RawMaterialConsRateList_Model(options){var id='RawMaterialConsRateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.rate_date_id=new FieldInt("rate_date_id",filed_options);options.fields.rate_date_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_descr=new FieldString("concrete_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat1_id=new FieldInt("mat1_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat2_id=new FieldInt("mat2_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat3_id=new FieldInt("mat3_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat4_id=new FieldInt("mat4_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat5_id=new FieldInt("mat5_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat6_id=new FieldInt("mat6_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat7_id=new FieldInt("mat7_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat8_id=new FieldInt("mat8_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat9_id=new FieldInt("mat9_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat10_id=new FieldInt("mat10_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat1_rate=new FieldFloat("mat1_rate",filed_options);options.fields.mat1_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat2_rate=new FieldFloat("mat2_rate",filed_options);options.fields.mat2_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat3_rate=new FieldFloat("mat3_rate",filed_options);options.fields.mat3_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat4_rate=new FieldFloat("mat4_rate",filed_options);options.fields.mat4_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat5_rate=new FieldFloat("mat5_rate",filed_options);options.fields.mat5_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat6_rate=new FieldFloat("mat6_rate",filed_options);options.fields.mat6_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat7_rate=new FieldFloat("mat7_rate",filed_options);options.fields.mat7_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat8_rate=new FieldFloat("mat8_rate",filed_options);options.fields.mat8_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat9_rate=new FieldFloat("mat9_rate",filed_options);options.fields.mat9_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat10_rate=new FieldFloat("mat10_rate",filed_options);options.fields.mat10_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat11_rate=new FieldFloat("mat11_rate",filed_options);options.fields.mat11_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat12_rate=new FieldFloat("mat12_rate",filed_options);options.fields.mat12_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat13_rate=new FieldFloat("mat13_rate",filed_options);options.fields.mat13_rate.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mat14_rate=new FieldFloat("mat14_rate",filed_options);options.fields.mat14_rate.getValidator().setMaxLength('19');RawMaterialConsRateList_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialConsRateList_Model,ModelXML); 
function OrderMakeForLabList_Model(options){var id='OrderMakeForLabList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='F';filed_options.autoInc=false;options.fields.f_val=new FieldInt("f_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='W';filed_options.autoInc=false;options.fields.w_val=new FieldInt("w_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.unload_type=new FieldString("unload_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.unload_speed=new FieldFloat("unload_speed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time_to=new FieldTime("date_time_to",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_rest=new FieldFloat("quant_rest",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_ordered_before_now=new FieldFloat("quant_ordered_before_now",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_shipped_before_now=new FieldFloat("quant_shipped_before_now",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_shipped_day_before_now=new FieldFloat("quant_shipped_day_before_now",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_ordered_day=new FieldFloat("quant_ordered_day",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.no_ship_mark=new FieldBool("no_ship_mark",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.payed=new FieldBool("payed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.under_control=new FieldBool("under_control",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pay_cash=new FieldBool("pay_cash",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_owners_ref=new FieldJSON("pump_vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_length=new FieldInt("pump_vehicle_length",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_comment=new FieldString("pump_vehicle_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.is_needed=new FieldBool("is_needed",filed_options);OrderMakeForLabList_Model.superclass.constructor.call(this,id,options);}
extend(OrderMakeForLabList_Model,ModelXML); 
function LabEntry30DaysList_Model(options){var id='LabEntry30DaysList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_type_descr=new FieldString("concrete_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Всего машин';filed_options.autoInc=false;options.fields.cnt=new FieldInt("cnt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Всего по будням';filed_options.autoInc=false;options.fields.day_cnt=new FieldInt("day_cnt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отбор по будням';filed_options.autoInc=false;options.fields.selected_cnt=new FieldInt("selected_cnt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отбор по будням';filed_options.autoInc=false;options.fields.selected_avg_cnt=new FieldJSON("selected_avg_cnt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Надо еще';filed_options.autoInc=false;options.fields.need_cnt=new FieldInt("need_cnt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ОК';filed_options.autoInc=false;options.fields.ok=new FieldInt("ok",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='П7%';filed_options.autoInc=false;options.fields.p7=new FieldInt("p7",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='П28%';filed_options.autoInc=false;options.fields.p28=new FieldInt("p28",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отбор';filed_options.autoInc=false;options.fields.selected_cnt2=new FieldInt("selected_cnt2",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ОК';filed_options.autoInc=false;options.fields.ok2=new FieldInt("ok2",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='П7%';filed_options.autoInc=false;options.fields.p72=new FieldInt("p72",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='П28%';filed_options.autoInc=false;options.fields.p282=new FieldInt("p282",filed_options);LabEntry30DaysList_Model.superclass.constructor.call(this,id,options);}
extend(LabEntry30DaysList_Model,ModelXML); 
function CementSilo_Model(options){var id='CementSilo_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_descr=new FieldString("production_descr",filed_options);options.fields.production_descr.getValidator().setRequired(true);options.fields.production_descr.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.weigh_app_name=new FieldString("weigh_app_name",filed_options);options.fields.weigh_app_name.getValidator().setRequired(true);options.fields.weigh_app_name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.load_capacity=new FieldFloat("load_capacity",filed_options);options.fields.load_capacity.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.visible=new FieldBool("visible",filed_options);CementSilo_Model.superclass.constructor.call(this,id,options);}
extend(CementSilo_Model,ModelXML); 
function RGCement_Model(options){var id='RGCement_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cement_silos_id=new FieldInt("cement_silos_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');RGCement_Model.superclass.constructor.call(this,id,options);}
extend(RGCement_Model,ModelXML); 
function RACement_Model(options){var id='RACement_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дебет';filed_options.autoInc=false;options.fields.deb=new FieldBool("deb",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид документа';filed_options.autoInc=false;options.fields.doc_type=new FieldEnum("doc_type",filed_options);filed_options.enumValues='order,material_procurement,shipment,material_fact_consumption,material_fact_consumption_correction,material_fact_balance_correction,cement_silo_reset,cement_silo_balance_reset';options.fields.doc_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cement_silos_id=new FieldInt("cement_silos_id",filed_options);options.fields.cement_silos_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');RACement_Model.superclass.constructor.call(this,id,options);}
extend(RACement_Model,ModelXML); 
function RGMaterialFact_Model(options){var id='RGMaterialFact_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');RGMaterialFact_Model.superclass.constructor.call(this,id,options);}
extend(RGMaterialFact_Model,ModelXML); 
function RAMaterialFact_Model(options){var id='RAMaterialFact_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дебет';filed_options.autoInc=false;options.fields.deb=new FieldBool("deb",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид документа';filed_options.autoInc=false;options.fields.doc_type=new FieldEnum("doc_type",filed_options);filed_options.enumValues='order,material_procurement,shipment,material_fact_consumption,material_fact_consumption_correction,material_fact_balance_correction,cement_silo_reset,cement_silo_balance_reset';options.fields.doc_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');RAMaterialFact_Model.superclass.constructor.call(this,id,options);}
extend(RAMaterialFact_Model,ModelXML); 
function CementSilo_Controller(options){options=options||{};options.listModelClass=CementSiloList_Model;options.objModelClass=CementSiloList_Model;CementSilo_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_reset_balance();}
extend(CementSilo_Controller,ControllerObjServer);CementSilo_Controller.prototype.addInsert=function(){CementSilo_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("production_descr",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("weigh_app_name",options);pm.addField(field);var options={};var field=new FieldFloat("load_capacity",options);pm.addField(field);var options={};var field=new FieldBool("visible",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
CementSilo_Controller.prototype.addUpdate=function(){CementSilo_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};var field=new FieldString("production_descr",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldString("weigh_app_name",options);pm.addField(field);var options={};var field=new FieldFloat("load_capacity",options);pm.addField(field);var options={};var field=new FieldBool("visible",options);pm.addField(field);}
CementSilo_Controller.prototype.addDelete=function(){CementSilo_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
CementSilo_Controller.prototype.addGetList=function(){CementSilo_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};pm.addField(new FieldString("production_descr",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldString("weigh_app_name",f_opts));var f_opts={};pm.addField(new FieldFloat("load_capacity",f_opts));var f_opts={};pm.addField(new FieldBool("visible",f_opts));}
CementSilo_Controller.prototype.addGetObject=function(){CementSilo_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
CementSilo_Controller.prototype.add_reset_balance=function(){var opts={"controller":this};var pm=new PublicMethodServer('reset_balance',opts);var options={};options.required=true;pm.addField(new FieldInt("cement_silo_id",options));var options={};options.maxlength="500";pm.addField(new FieldString("comment_text",options));this.addPublicMethod(pm);} 
function CementSiloList_Model(options){var id='CementSiloList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_descr=new FieldString("production_descr",filed_options);options.fields.production_descr.getValidator().setRequired(true);options.fields.production_descr.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.weigh_app_name=new FieldString("weigh_app_name",filed_options);options.fields.weigh_app_name.getValidator().setRequired(true);options.fields.weigh_app_name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.load_capacity=new FieldFloat("load_capacity",filed_options);options.fields.load_capacity.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.visible=new FieldBool("visible",filed_options);CementSiloList_Model.superclass.constructor.call(this,id,options);}
extend(CementSiloList_Model,ModelXML); 
function VehicleOwnerHistory_Model(options){var id='VehicleOwnerHistory_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);options.fields.vehicle_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);options.fields.vehicle_owner_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_from=new FieldDateTime("date_from",filed_options);options.fields.date_from.getValidator().setRequired(true);VehicleOwnerHistory_Model.superclass.constructor.call(this,id,options);}
extend(VehicleOwnerHistory_Model,ModelXML); 
function VehicleOwnerHistoryList_Model(options){var id='VehicleOwnerHistoryList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_owners_ref=new FieldJSON("vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_from=new FieldDateTime("date_from",filed_options);VehicleOwnerHistoryList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleOwnerHistoryList_Model,ModelXML); 
function OwnerList_Controller(options){options=options||{};options.listModelClass=OwnerList_Model;options.objModelClass=OwnerList_Model;OwnerList_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(OwnerList_Controller,ControllerObjClient);OwnerList_Controller.prototype.addInsert=function(){OwnerList_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTime("dt_from",options);pm.addField(field);var options={};var field=new FieldJSONB("owner",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
OwnerList_Controller.prototype.addUpdate=function(){OwnerList_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTime("dt_from",options);pm.addField(field);var options={};var field=new FieldJSONB("owner",options);pm.addField(field);}
OwnerList_Controller.prototype.addDelete=function(){OwnerList_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
OwnerList_Controller.prototype.addGetList=function(){OwnerList_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTime("dt_from",f_opts));var f_opts={};pm.addField(new FieldJSONB("owner",f_opts));}
OwnerList_Controller.prototype.addGetObject=function(){OwnerList_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function OwnerList_Model(options){var id='OwnerList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dt_from=new FieldDateTime("dt_from",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.owner=new FieldJSONB("owner",filed_options);OwnerList_Model.superclass.constructor.call(this,id,options);}
extend(OwnerList_Model,ModelJSON); 
function PumpVehiclePriceList_Controller(options){options=options||{};options.listModelClass=PumpVehiclePriceList_Model;options.objModelClass=PumpVehiclePriceList_Model;PumpVehiclePriceList_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(PumpVehiclePriceList_Controller,ControllerObjClient);PumpVehiclePriceList_Controller.prototype.addInsert=function(){PumpVehiclePriceList_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTime("dt_from",options);pm.addField(field);var options={};var field=new FieldJSONB("pump_price",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
PumpVehiclePriceList_Controller.prototype.addUpdate=function(){PumpVehiclePriceList_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTime("dt_from",options);pm.addField(field);var options={};var field=new FieldJSONB("pump_price",options);pm.addField(field);}
PumpVehiclePriceList_Controller.prototype.addDelete=function(){PumpVehiclePriceList_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
PumpVehiclePriceList_Controller.prototype.addGetList=function(){PumpVehiclePriceList_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTime("dt_from",f_opts));var f_opts={};pm.addField(new FieldJSONB("pump_price",f_opts));}
PumpVehiclePriceList_Controller.prototype.addGetObject=function(){PumpVehiclePriceList_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function PumpVehiclePriceList_Model(options){var id='PumpVehiclePriceList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dt_from=new FieldDateTime("dt_from",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_price=new FieldJSONB("pump_price",filed_options);PumpVehiclePriceList_Model.superclass.constructor.call(this,id,options);}
extend(PumpVehiclePriceList_Model,ModelJSON); 
function CementSiloForOrderList_Model(options){var id='CementSiloForOrderList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.load_capacity=new FieldFloat("load_capacity",filed_options);options.fields.load_capacity.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.balance=new FieldFloat("balance",filed_options);options.fields.balance.getValidator().setMaxLength('19');CementSiloForOrderList_Model.superclass.constructor.call(this,id,options);}
extend(CementSiloForOrderList_Model,ModelXML); 
function ELKONServer_Controller(options){options=options||{};options.listModelClass=ELKONServer_Model;options.objModelClass=ELKONServer_Model;ELKONServer_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ELKONServer_Controller,ControllerObjServer);ELKONServer_Controller.prototype.addInsert=function(){ELKONServer_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование базы данных";options.required=true;var field=new FieldString("data_base_name",options);pm.addField(field);var options={};options.alias="Имя пользователя";options.required=true;var field=new FieldString("user_name",options);pm.addField(field);var options={};options.alias="Пароль пользователя";options.required=true;var field=new FieldString("user_password",options);pm.addField(field);var options={};options.alias="IP хоста";options.required=true;var field=new FieldString("host",options);pm.addField(field);var options={};options.alias="Порт хоста";options.required=true;var field=new FieldInt("port",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ELKONServer_Controller.prototype.addUpdate=function(){ELKONServer_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование базы данных";var field=new FieldString("data_base_name",options);pm.addField(field);var options={};options.alias="Имя пользователя";var field=new FieldString("user_name",options);pm.addField(field);var options={};options.alias="Пароль пользователя";var field=new FieldString("user_password",options);pm.addField(field);var options={};options.alias="IP хоста";var field=new FieldString("host",options);pm.addField(field);var options={};options.alias="Порт хоста";var field=new FieldInt("port",options);pm.addField(field);}
ELKONServer_Controller.prototype.addDelete=function(){ELKONServer_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
ELKONServer_Controller.prototype.addGetList=function(){ELKONServer_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование базы данных";pm.addField(new FieldString("data_base_name",f_opts));var f_opts={};f_opts.alias="Имя пользователя";pm.addField(new FieldString("user_name",f_opts));var f_opts={};f_opts.alias="Пароль пользователя";pm.addField(new FieldString("user_password",f_opts));var f_opts={};f_opts.alias="IP хоста";pm.addField(new FieldString("host",f_opts));var f_opts={};f_opts.alias="Порт хоста";pm.addField(new FieldInt("port",f_opts));}
ELKONServer_Controller.prototype.addGetObject=function(){ELKONServer_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function ELKONServer_Model(options){var id='ELKONServer_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование базы данных';filed_options.autoInc=false;options.fields.data_base_name=new FieldString("data_base_name",filed_options);options.fields.data_base_name.getValidator().setRequired(true);options.fields.data_base_name.getValidator().setMaxLength('150');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Имя пользователя';filed_options.autoInc=false;options.fields.user_name=new FieldString("user_name",filed_options);options.fields.user_name.getValidator().setRequired(true);options.fields.user_name.getValidator().setMaxLength('150');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пароль пользователя';filed_options.autoInc=false;options.fields.user_password=new FieldString("user_password",filed_options);options.fields.user_password.getValidator().setRequired(true);options.fields.user_password.getValidator().setMaxLength('150');var filed_options={};filed_options.primaryKey=false;filed_options.alias='IP хоста';filed_options.autoInc=false;options.fields.host=new FieldString("host",filed_options);options.fields.host.getValidator().setRequired(true);options.fields.host.getValidator().setMaxLength('150');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Порт хоста';filed_options.autoInc=false;options.fields.port=new FieldInt("port",filed_options);options.fields.port.getValidator().setRequired(true);ELKONServer_Model.superclass.constructor.call(this,id,options);}
extend(ELKONServer_Model,ModelXML); 
function ELKONLog_Controller(options){options=options||{};options.listModelClass=ELKONLogList_Model;options.objModelClass=ELKONLogList_Model;ELKONLog_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();}
extend(ELKONLog_Controller,ControllerObjServer);ELKONLog_Controller.prototype.addGetList=function(){ELKONLog_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};pm.addField(new FieldText("message",f_opts));var f_opts={};pm.addField(new FieldInt("level",f_opts));var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
ELKONLog_Controller.prototype.addGetObject=function(){ELKONLog_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ELKONLog_Model(options){var id='ELKONLog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.message=new FieldText("message",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.level=new FieldInt("level",filed_options);ELKONLog_Model.superclass.constructor.call(this,id,options);}
extend(ELKONLog_Model,ModelXML); 
function Production_Model(options){var id='Production_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Elkon production ID';filed_options.autoInc=false;options.fields.production_id=new FieldString("production_id",filed_options);options.fields.production_id.getValidator().setRequired(true);options.fields.production_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Начало производства в Elkon';filed_options.autoInc=false;options.fields.production_dt_start=new FieldDateTimeTZ("production_dt_start",filed_options);options.fields.production_dt_start.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Окончание производства в Elkon';filed_options.autoInc=false;options.fields.production_dt_end=new FieldDateTimeTZ("production_dt_end",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь Elkon';filed_options.autoInc=false;options.fields.production_user=new FieldString("production_user",filed_options);options.fields.production_user.getValidator().setMaxLength('150');var filed_options={};filed_options.primaryKey=false;filed_options.alias='ТС в Elkon';filed_options.autoInc=false;options.fields.production_vehicle_descr=new FieldString("production_vehicle_descr",filed_options);options.fields.production_vehicle_descr.getValidator().setRequired(true);options.fields.production_vehicle_descr.getValidator().setMaxLength('5');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.dt_start_set=new FieldDateTimeTZ("dt_start_set",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dt_end_set=new FieldDateTimeTZ("dt_end_set",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);options.fields.production_site_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_schedule_state_id=new FieldInt("vehicle_schedule_state_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_concrete_type_descr=new FieldText("production_concrete_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.material_tolerance_violated=new FieldBool("material_tolerance_violated",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.concrete_quant=new FieldFloat("concrete_quant",filed_options);options.fields.concrete_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Ручное исправление';filed_options.autoInc=false;options.fields.manual_correction=new FieldBool("manual_correction",filed_options);Production_Model.superclass.constructor.call(this,id,options);}
extend(Production_Model,ModelXML); 
function Production_Controller(options){options=options||{};options.listModelClass=ProductionList_Model;options.objModelClass=ProductionList_Model;Production_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_check_data();this.add_check_production();this.add_get_production_material_list();this.add_get_ship_prod_quant_dif();}
extend(Production_Controller,ControllerObjServer);Production_Controller.prototype.addInsert=function(){Production_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Elkon production ID";options.required=true;var field=new FieldString("production_id",options);pm.addField(field);var options={};options.alias="Начало производства в Elkon";options.required=true;var field=new FieldDateTimeTZ("production_dt_start",options);pm.addField(field);var options={};options.alias="Окончание производства в Elkon";var field=new FieldDateTimeTZ("production_dt_end",options);pm.addField(field);var options={};options.alias="Пользователь Elkon";var field=new FieldString("production_user",options);pm.addField(field);var options={};options.alias="ТС в Elkon";options.required=true;var field=new FieldString("production_vehicle_descr",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("dt_start_set",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("dt_end_set",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};var field=new FieldInt("shipment_id",options);pm.addField(field);var options={};var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};var field=new FieldInt("vehicle_schedule_state_id",options);pm.addField(field);var options={};var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};var field=new FieldText("production_concrete_type_descr",options);pm.addField(field);var options={};var field=new FieldBool("material_tolerance_violated",options);pm.addField(field);var options={};var field=new FieldFloat("concrete_quant",options);pm.addField(field);var options={};options.alias="Ручное исправление";var field=new FieldBool("manual_correction",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Production_Controller.prototype.addUpdate=function(){Production_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Elkon production ID";var field=new FieldString("production_id",options);pm.addField(field);var options={};options.alias="Начало производства в Elkon";var field=new FieldDateTimeTZ("production_dt_start",options);pm.addField(field);var options={};options.alias="Окончание производства в Elkon";var field=new FieldDateTimeTZ("production_dt_end",options);pm.addField(field);var options={};options.alias="Пользователь Elkon";var field=new FieldString("production_user",options);pm.addField(field);var options={};options.alias="ТС в Elkon";var field=new FieldString("production_vehicle_descr",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("dt_start_set",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("dt_end_set",options);pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};var field=new FieldInt("shipment_id",options);pm.addField(field);var options={};var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};var field=new FieldInt("vehicle_schedule_state_id",options);pm.addField(field);var options={};var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};var field=new FieldText("production_concrete_type_descr",options);pm.addField(field);var options={};var field=new FieldBool("material_tolerance_violated",options);pm.addField(field);var options={};var field=new FieldFloat("concrete_quant",options);pm.addField(field);var options={};options.alias="Ручное исправление";var field=new FieldBool("manual_correction",options);pm.addField(field);}
Production_Controller.prototype.addDelete=function(){Production_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Production_Controller.prototype.addGetList=function(){Production_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("production_id",f_opts));var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("production_dt_start",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("production_dt_end",f_opts));var f_opts={};pm.addField(new FieldString("production_user",f_opts));var f_opts={};pm.addField(new FieldString("production_vehicle_descr",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("dt_start_set",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("dt_end_set",f_opts));var f_opts={};pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("shipments_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("vehicle_schedules_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("orders_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};pm.addField(new FieldText("production_concrete_type_descr",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_id",f_opts));var f_opts={};pm.addField(new FieldInt("concrete_type_id",f_opts));var f_opts={};pm.addField(new FieldInt("order_id",f_opts));var f_opts={};pm.addField(new FieldBool("material_tolerance_violated",f_opts));var f_opts={};pm.addField(new FieldFloat("concrete_quant",f_opts));}
Production_Controller.prototype.addGetObject=function(){Production_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Production_Controller.prototype.add_check_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('check_data',opts);this.addPublicMethod(pm);}
Production_Controller.prototype.add_check_production=function(){var opts={"controller":this};var pm=new PublicMethodServer('check_production',opts);var options={};options.required=true;pm.addField(new FieldInt("production_site_id",options));var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("production_id",options));this.addPublicMethod(pm);}
Production_Controller.prototype.add_get_production_material_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_production_material_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);}
Production_Controller.prototype.add_get_ship_prod_quant_dif=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_ship_prod_quant_dif',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldInt("inline",options));this.addPublicMethod(pm);} 
function ProductionList_Model(options){var id='ProductionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_id=new FieldString("production_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_dt_start=new FieldDateTimeTZ("production_dt_start",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_dt_end=new FieldDateTimeTZ("production_dt_end",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_user=new FieldString("production_user",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_vehicle_descr=new FieldString("production_vehicle_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dt_start_set=new FieldDateTimeTZ("dt_start_set",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dt_end_set=new FieldDateTimeTZ("dt_end_set",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipments_ref=new FieldJSON("shipments_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_schedules_ref=new FieldJSON("vehicle_schedules_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.orders_ref=new FieldJSON("orders_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_concrete_type_descr=new FieldText("production_concrete_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_tolerance_violated=new FieldBool("material_tolerance_violated",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_quant=new FieldFloat("concrete_quant",filed_options);ProductionList_Model.superclass.constructor.call(this,id,options);}
extend(ProductionList_Model,ModelXML); 
function ProductionSiteList_Model(options){var id='ProductionSiteList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);ProductionSiteList_Model.superclass.constructor.call(this,id,options);}
extend(ProductionSiteList_Model,ModelXML); 
function ProductionSiteForEditList_Model(options){var id='ProductionSiteForEditList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.elkon_connection=new FieldJSONB("elkon_connection",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Активен';filed_options.autoInc=false;options.fields.active=new FieldBool("active",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.last_elkon_production_id=new FieldInt("last_elkon_production_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.missing_elkon_production_ids=new FieldArray("missing_elkon_production_ids",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид завода';filed_options.autoInc=false;options.fields.production_plant_type=new FieldString("production_plant_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_bases_ref=new FieldJSON("production_bases_ref",filed_options);ProductionSiteForEditList_Model.superclass.constructor.call(this,id,options);}
extend(ProductionSiteForEditList_Model,ModelXML); 
function ProductionBase_Model(options){var id='ProductionBase_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Геозона';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);options.fields.destination_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Адрес';filed_options.autoInc=false;options.fields.address=new FieldText("address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Deleted';filed_options.autoInc=false;options.fields.deleted=new FieldBool("deleted",filed_options);ProductionBase_Model.superclass.constructor.call(this,id,options);}
extend(ProductionBase_Model,ModelXML); 
function ELKONLogList_Model(options){var id='ELKONLogList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.message=new FieldText("message",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.level=new FieldInt("level",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);ELKONLogList_Model.superclass.constructor.call(this,id,options);}
extend(ELKONLogList_Model,ModelXML); 
function UserMapToProduction_Model(options){var id='UserMapToProduction_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_descr=new FieldString("production_descr",filed_options);options.fields.production_descr.getValidator().setRequired(true);options.fields.production_descr.getValidator().setMaxLength('100');UserMapToProduction_Model.superclass.constructor.call(this,id,options);}
extend(UserMapToProduction_Model,ModelXML); 
function UserMapToProductionList_Model(options){var id='UserMapToProductionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_descr=new FieldString("production_descr",filed_options);UserMapToProductionList_Model.superclass.constructor.call(this,id,options);}
extend(UserMapToProductionList_Model,ModelXML); 
function UserMapToProduction_Controller(options){options=options||{};options.listModelClass=UserMapToProductionList_Model;options.objModelClass=UserMapToProductionList_Model;UserMapToProduction_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(UserMapToProduction_Controller,ControllerObjServer);UserMapToProduction_Controller.prototype.addInsert=function(){UserMapToProduction_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("production_descr",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
UserMapToProduction_Controller.prototype.addUpdate=function(){UserMapToProduction_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldString("production_descr",options);pm.addField(field);}
UserMapToProduction_Controller.prototype.addDelete=function(){UserMapToProduction_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
UserMapToProduction_Controller.prototype.addGetList=function(){UserMapToProduction_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};pm.addField(new FieldString("production_descr",f_opts));}
UserMapToProduction_Controller.prototype.addGetObject=function(){UserMapToProduction_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function MaterialFactConsumptionCorretion_Controller(options){options=options||{};options.listModelClass=MaterialFactConsumptionCorretionList_Model;options.objModelClass=MaterialFactConsumptionCorretionList_Model;MaterialFactConsumptionCorretion_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_operator_insert_correction();this.add_operator_add_material_to_production();}
extend(MaterialFactConsumptionCorretion_Controller,ControllerObjServer);MaterialFactConsumptionCorretion_Controller.prototype.addInsert=function(){MaterialFactConsumptionCorretion_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};options.required=true;var field=new FieldDateTimeTZ("date_time_set",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldInt("material_id",options);pm.addField(field);var options={};var field=new FieldInt("cement_silo_id",options);pm.addField(field);var options={};var field=new FieldString("production_id",options);pm.addField(field);var options={};var field=new FieldInt("elkon_id",options);pm.addField(field);var options={};var field=new FieldFloat("quant",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
MaterialFactConsumptionCorretion_Controller.prototype.addUpdate=function(){MaterialFactConsumptionCorretion_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time_set",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldInt("material_id",options);pm.addField(field);var options={};var field=new FieldInt("cement_silo_id",options);pm.addField(field);var options={};var field=new FieldString("production_id",options);pm.addField(field);var options={};var field=new FieldInt("elkon_id",options);pm.addField(field);var options={};var field=new FieldFloat("quant",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);}
MaterialFactConsumptionCorretion_Controller.prototype.addDelete=function(){MaterialFactConsumptionCorretion_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
MaterialFactConsumptionCorretion_Controller.prototype.addGetList=function(){MaterialFactConsumptionCorretion_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));var f_opts={};f_opts.alias="Завод";pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};f_opts.alias="Дата внесения";pm.addField(new FieldDateTimeTZ("date_time_set",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Пользователь";pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldJSON("materials_ref",f_opts));var f_opts={};pm.addField(new FieldInt("cement_silo_id",f_opts));var f_opts={};f_opts.alias="Силос";pm.addField(new FieldJSON("cement_silos_ref",f_opts));var f_opts={};f_opts.alias="Производство Elkon";pm.addField(new FieldString("production_id",f_opts));var f_opts={};f_opts.alias="Номер записи Elkon";pm.addField(new FieldInt("elkon_id",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("comment_text",f_opts));}
MaterialFactConsumptionCorretion_Controller.prototype.addGetObject=function(){MaterialFactConsumptionCorretion_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
MaterialFactConsumptionCorretion_Controller.prototype.add_operator_insert_correction=function(){var opts={"controller":this};var pm=new PublicMethodServer('operator_insert_correction',opts);pm.setRequestType('post');var options={};options.required=true;pm.addField(new FieldInt("production_site_id",options));var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("production_id",options));var options={};options.required=true;pm.addField(new FieldInt("material_id",options));var options={};pm.addField(new FieldInt("cement_silo_id",options));var options={};options.required=true;options.maxlength="19";pm.addField(new FieldFloat("cor_quant",options));var options={};options.maxlength="500";pm.addField(new FieldString("comment_text",options));this.addPublicMethod(pm);}
MaterialFactConsumptionCorretion_Controller.prototype.add_operator_add_material_to_production=function(){var opts={"controller":this};var pm=new PublicMethodServer('operator_add_material_to_production',opts);pm.setRequestType('post');var options={};options.required=true;pm.addField(new FieldInt("production_site_id",options));var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("production_id",options));var options={};options.required=true;pm.addField(new FieldInt("material_id",options));var options={};pm.addField(new FieldInt("cement_silo_id",options));var options={};options.maxlength="19";pm.addField(new FieldFloat("cor_quant",options));var options={};options.maxlength="500";pm.addField(new FieldText("comment_text",options));this.addPublicMethod(pm);} 
function MaterialFactConsumptionCorretion_Model(options){var id='MaterialFactConsumptionCorretion_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);options.fields.production_site_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time_set=new FieldDateTimeTZ("date_time_set",filed_options);options.fields.date_time_set.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cement_silo_id=new FieldInt("cement_silo_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_id=new FieldString("production_id",filed_options);options.fields.production_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.elkon_id=new FieldInt("elkon_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);MaterialFactConsumptionCorretion_Model.superclass.constructor.call(this,id,options);}
extend(MaterialFactConsumptionCorretion_Model,ModelXML); 
function MaterialFactConsumptionCorretionList_Model(options){var id='MaterialFactConsumptionCorretionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата внесения';filed_options.autoInc=false;options.fields.date_time_set=new FieldDateTimeTZ("date_time_set",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.materials_ref=new FieldJSON("materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cement_silo_id=new FieldInt("cement_silo_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Силос';filed_options.autoInc=false;options.fields.cement_silos_ref=new FieldJSON("cement_silos_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Производство Elkon';filed_options.autoInc=false;options.fields.production_id=new FieldString("production_id",filed_options);options.fields.production_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер записи Elkon';filed_options.autoInc=false;options.fields.elkon_id=new FieldInt("elkon_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);MaterialFactConsumptionCorretionList_Model.superclass.constructor.call(this,id,options);}
extend(MaterialFactConsumptionCorretionList_Model,ModelXML); 
function ProductionMaterialList_Model(options){var id='ProductionMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер производства Elkon';filed_options.autoInc=false;options.fields.production_id=new FieldString("production_id",filed_options);options.fields.production_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.cement_silo_id=new FieldInt("cement_silo_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгрузка';filed_options.autoInc=false;options.fields.shipments_ref=new FieldJSON("shipments_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.materials_ref=new FieldJSON("materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Силос';filed_options.autoInc=false;options.fields.cement_silos_ref=new FieldJSON("cement_silos_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество по подбору';filed_options.autoInc=false;options.fields.quant_consuption=new FieldFloat("quant_consuption",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество факт';filed_options.autoInc=false;options.fields.quant_fact=new FieldFloat("quant_fact",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество факт треб.';filed_options.autoInc=false;options.fields.quant_fact_req=new FieldFloat("quant_fact_req",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество испр.вручную';filed_options.autoInc=false;options.fields.quant_corrected=new FieldFloat("quant_corrected",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Идентификатор исправления Elkon';filed_options.autoInc=false;options.fields.elkon_correction_id=new FieldString("elkon_correction_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто исправил';filed_options.autoInc=false;options.fields.correction_users_ref=new FieldJSON("correction_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Когда исправил';filed_options.autoInc=false;options.fields.correction_date_time_set=new FieldDateTime("correction_date_time_set",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Разница';filed_options.autoInc=false;options.fields.quant_dif=new FieldFloat("quant_dif",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Разница';filed_options.autoInc=false;options.fields.quant_req_dif=new FieldFloat("quant_req_dif",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_quant=new FieldFloat("material_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Превышение';filed_options.autoInc=false;options.fields.dif_violation=new FieldBool("dif_violation",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Превышение';filed_options.autoInc=false;options.fields.req_dif_violation=new FieldBool("req_dif_violation",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Идентификатор строки фактического расхода';filed_options.autoInc=false;options.fields.material_fact_consumption_id=new FieldInt("material_fact_consumption_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.production_comment=new FieldJSON("production_comment",filed_options);ProductionMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(ProductionMaterialList_Model,ModelXML); 
function MaterialFactBalanceCorretion_Model(options){var id='MaterialFactBalanceCorretion_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);options.fields.production_site_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.balance_date_time=new FieldDateTime("balance_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.required_balance_quant=new FieldFloat("required_balance_quant",filed_options);options.fields.required_balance_quant.getValidator().setRequired(true);options.fields.required_balance_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_user_id=new FieldInt("last_modif_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время последнего изменения';filed_options.autoInc=false;options.fields.last_modif_date_time=new FieldDateTimeTZ("last_modif_date_time",filed_options);MaterialFactBalanceCorretion_Model.superclass.constructor.call(this,id,options);}
extend(MaterialFactBalanceCorretion_Model,ModelXML); 
function MaterialFactBalanceCorretionList_Model(options){var id='MaterialFactBalanceCorretionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);options.fields.production_site_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.balance_date_time=new FieldDateTime("balance_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.required_balance_quant=new FieldFloat("required_balance_quant",filed_options);options.fields.required_balance_quant.getValidator().setRequired(true);options.fields.required_balance_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_user_id=new FieldInt("last_modif_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время последнего изменения';filed_options.autoInc=false;options.fields.last_modif_date_time=new FieldDateTimeTZ("last_modif_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.materials_ref=new FieldJSON("materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_users_ref=new FieldJSON("last_modif_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_dif=new FieldFloat("quant_dif",filed_options);options.fields.quant_dif.getValidator().setMaxLength('19');MaterialFactBalanceCorretionList_Model.superclass.constructor.call(this,id,options);}
extend(MaterialFactBalanceCorretionList_Model,ModelXML); 
function MaterialFactBalanceCorretion_Controller(options){options=options||{};options.listModelClass=MaterialFactBalanceCorretionList_Model;options.objModelClass=MaterialFactBalanceCorretionList_Model;MaterialFactBalanceCorretion_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(MaterialFactBalanceCorretion_Controller,ControllerObjServer);MaterialFactBalanceCorretion_Controller.prototype.addInsert=function(){MaterialFactBalanceCorretion_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};var field=new FieldDateTime("balance_date_time",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldFloat("required_balance_quant",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Кто последний вносил изменения";var field=new FieldInt("last_modif_user_id",options);pm.addField(field);var options={};options.alias="Время последнего изменения";var field=new FieldDateTimeTZ("last_modif_date_time",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
MaterialFactBalanceCorretion_Controller.prototype.addUpdate=function(){MaterialFactBalanceCorretion_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};var field=new FieldDateTime("balance_date_time",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldInt("material_id",options);pm.addField(field);var options={};var field=new FieldFloat("required_balance_quant",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Кто последний вносил изменения";var field=new FieldInt("last_modif_user_id",options);pm.addField(field);var options={};options.alias="Время последнего изменения";var field=new FieldDateTimeTZ("last_modif_date_time",options);pm.addField(field);}
MaterialFactBalanceCorretion_Controller.prototype.addDelete=function(){MaterialFactBalanceCorretion_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
MaterialFactBalanceCorretion_Controller.prototype.addGetList=function(){MaterialFactBalanceCorretion_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));var f_opts={};pm.addField(new FieldDateTime("balance_date_time",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};pm.addField(new FieldFloat("required_balance_quant",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));var f_opts={};f_opts.alias="Кто последний вносил изменения";pm.addField(new FieldInt("last_modif_user_id",f_opts));var f_opts={};f_opts.alias="Время последнего изменения";pm.addField(new FieldDateTimeTZ("last_modif_date_time",f_opts));}
MaterialFactBalanceCorretion_Controller.prototype.addGetObject=function(){MaterialFactBalanceCorretion_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function CementSiloBalanceReset_Controller(options){options=options||{};options.listModelClass=CementSiloBalanceResetList_Model;options.objModelClass=CementSiloBalanceResetList_Model;CementSiloBalanceReset_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(CementSiloBalanceReset_Controller,ControllerObjServer);CementSiloBalanceReset_Controller.prototype.addInsert=function(){CementSiloBalanceReset_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("cement_silo_id",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Требуемое количество";var field=new FieldFloat("quant_required",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
CementSiloBalanceReset_Controller.prototype.addUpdate=function(){CementSiloBalanceReset_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldInt("cement_silo_id",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Требуемое количество";var field=new FieldFloat("quant_required",options);pm.addField(field);}
CementSiloBalanceReset_Controller.prototype.addDelete=function(){CementSiloBalanceReset_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
CementSiloBalanceReset_Controller.prototype.addGetList=function(){CementSiloBalanceReset_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldInt("cement_silo_id",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));var f_opts={};f_opts.alias="Требуемое количество";pm.addField(new FieldFloat("quant_required",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
CementSiloBalanceReset_Controller.prototype.addGetObject=function(){CementSiloBalanceReset_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function CementSiloBalanceReset_Model(options){var id='CementSiloBalanceReset_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cement_silo_id=new FieldInt("cement_silo_id",filed_options);options.fields.cement_silo_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Требуемое количество';filed_options.autoInc=false;options.fields.quant_required=new FieldFloat("quant_required",filed_options);options.fields.quant_required.getValidator().setMaxLength('19');CementSiloBalanceReset_Model.superclass.constructor.call(this,id,options);}
extend(CementSiloBalanceReset_Model,ModelXML); 
function CementSiloBalanceResetList_Model(options){var id='CementSiloBalanceResetList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cement_silo_id=new FieldInt("cement_silo_id",filed_options);options.fields.cement_silo_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Требуемое количество';filed_options.autoInc=false;options.fields.quant_required=new FieldFloat("quant_required",filed_options);options.fields.quant_required.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Силос';filed_options.autoInc=false;options.fields.cement_silos_ref=new FieldJSON("cement_silos_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldText("quant",filed_options);CementSiloBalanceResetList_Model.superclass.constructor.call(this,id,options);}
extend(CementSiloBalanceResetList_Model,ModelXML); 
function MaterialActionList_Model(options){var id='MaterialActionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.is_cement=new FieldBool("is_cement",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.material_name=new FieldString("material_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Начальный остаток';filed_options.autoInc=false;options.fields.quant_start=new FieldFloat("quant_start",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Приход';filed_options.autoInc=false;options.fields.quant_deb=new FieldFloat("quant_deb",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Расход';filed_options.autoInc=false;options.fields.quant_kred=new FieldFloat("quant_kred",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Корректировка';filed_options.autoInc=false;options.fields.quant_correction=new FieldFloat("quant_correction",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Конечный остаток';filed_options.autoInc=false;options.fields.quant_end=new FieldFloat("quant_end",filed_options);MaterialActionList_Model.superclass.constructor.call(this,id,options);}
extend(MaterialActionList_Model,ModelXML); 
function ProductionVehicleCorrection_Model(options){var id='ProductionVehicleCorrection_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);options.fields.production_site_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.production_id=new FieldString("production_id",filed_options);options.fields.production_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);options.fields.vehicle_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);ProductionVehicleCorrection_Model.superclass.constructor.call(this,id,options);}
extend(ProductionVehicleCorrection_Model,ModelXML); 
function ProductionVehicleCorrection_Controller(options){options=options||{};options.listModelClass=ProductionVehicleCorrectionList_Model;options.objModelClass=ProductionVehicleCorrectionList_Model;ProductionVehicleCorrection_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ProductionVehicleCorrection_Controller,ControllerObjServer);ProductionVehicleCorrection_Controller.prototype.addInsert=function(){ProductionVehicleCorrection_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldString("production_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);}
ProductionVehicleCorrection_Controller.prototype.addUpdate=function(){ProductionVehicleCorrection_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("production_site_id",options);pm.addField(field);field=new FieldInt("old_production_site_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldString("production_id",options);pm.addField(field);field=new FieldString("old_production_id",{});pm.addField(field);var options={};var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);}
ProductionVehicleCorrection_Controller.prototype.addDelete=function(){ProductionVehicleCorrection_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("production_site_id",options));var options={"required":true};pm.addField(new FieldString("production_id",options));}
ProductionVehicleCorrection_Controller.prototype.addGetList=function(){ProductionVehicleCorrection_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));var f_opts={};f_opts.alias="Завод";pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};f_opts.alias="Номер производства";pm.addField(new FieldString("production_id",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_id",f_opts));var f_opts={};f_opts.alias="ТС";pm.addField(new FieldJSON("vehicles_ref",f_opts));var f_opts={};f_opts.alias="Дата установки";pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Пользователь";pm.addField(new FieldJSON("users_ref",f_opts));}
ProductionVehicleCorrection_Controller.prototype.addGetObject=function(){ProductionVehicleCorrection_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));var f_opts={};f_opts.alias="Номер производства";pm.addField(new FieldString("production_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ProductionVehicleCorrectionList_Model(options){var id='ProductionVehicleCorrectionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер производства';filed_options.autoInc=false;options.fields.production_id=new FieldString("production_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ТС';filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата установки';filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);ProductionVehicleCorrectionList_Model.superclass.constructor.call(this,id,options);}
extend(ProductionVehicleCorrectionList_Model,ModelXML); 
function ProductionComment_Controller(options){options=options||{};options.listModelClass=ProductionComment_Model;options.objModelClass=ProductionComment_Model;ProductionComment_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ProductionComment_Controller,ControllerObjServer);ProductionComment_Controller.prototype.addInsert=function(){ProductionComment_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldString("production_id",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);}
ProductionComment_Controller.prototype.addUpdate=function(){ProductionComment_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("production_site_id",options);pm.addField(field);field=new FieldInt("old_production_site_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldString("production_id",options);pm.addField(field);field=new FieldString("old_production_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("material_id",options);pm.addField(field);field=new FieldInt("old_material_id",{});pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);}
ProductionComment_Controller.prototype.addDelete=function(){ProductionComment_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("production_site_id",options));var options={"required":true};pm.addField(new FieldString("production_id",options));var options={"required":true};pm.addField(new FieldInt("material_id",options));}
ProductionComment_Controller.prototype.addGetList=function(){ProductionComment_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));var f_opts={};pm.addField(new FieldString("production_id",f_opts));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));}
ProductionComment_Controller.prototype.addGetObject=function(){ProductionComment_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));var f_opts={};pm.addField(new FieldString("production_id",f_opts));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function MaterialConsToleranceViolationList_Model(options){var id='MaterialConsToleranceViolationList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.materials_ref=new FieldJSON("materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_ord=new FieldInt("material_ord",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Расход нормативный';filed_options.autoInc=false;options.fields.norm_quant=new FieldFloat("norm_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Расход фактический';filed_options.autoInc=false;options.fields.fact_quant=new FieldFloat("fact_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отклонение (факт-норм)';filed_options.autoInc=false;options.fields.diff_quant=new FieldFloat("diff_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отклонение, %';filed_options.autoInc=false;options.fields.diff_percent=new FieldFloat("diff_percent",filed_options);MaterialConsToleranceViolationList_Model.superclass.constructor.call(this,id,options);}
extend(MaterialConsToleranceViolationList_Model,ModelXML); 
function ProductionComment_Model(options){var id='ProductionComment_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);options.fields.production_site_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.production_id=new FieldString("production_id",filed_options);options.fields.production_id.getValidator().setRequired(true);options.fields.production_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);ProductionComment_Model.superclass.constructor.call(this,id,options);}
extend(ProductionComment_Model,ModelXML); 
function ClientLocalList_Controller(options){options=options||{};options.listModelClass=ClientLocalList_Model;options.objModelClass=ClientLocalList_Model;ClientLocalList_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ClientLocalList_Controller,ControllerObjClient);ClientLocalList_Controller.prototype.addInsert=function(){ClientLocalList_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldJSONB("client",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ClientLocalList_Controller.prototype.addUpdate=function(){ClientLocalList_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldJSONB("client",options);pm.addField(field);}
ClientLocalList_Controller.prototype.addDelete=function(){ClientLocalList_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ClientLocalList_Controller.prototype.addGetList=function(){ClientLocalList_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSONB("client",f_opts));}
ClientLocalList_Controller.prototype.addGetObject=function(){ClientLocalList_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ClientLocalList_Model(options){var id='ClientLocalList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client=new FieldJSONB("client",filed_options);ClientLocalList_Model.superclass.constructor.call(this,id,options);}
extend(ClientLocalList_Model,ModelJSON); 
function ShipmentForClientList_Model(options){var id='ShipmentForClientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер заявки';filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Идентификатор клиента';filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата отгрузки';filed_options.autoInc=false;options.fields.ship_date=new FieldDate("ship_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Есть насос';filed_options.autoInc=false;options.fields.pump_exists=new FieldBool("pump_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество,м3';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость бетона,руб';filed_options.autoInc=false;options.fields.concrete_cost=new FieldFloat("concrete_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость доставки,руб';filed_options.autoInc=false;options.fields.deliv_cost=new FieldFloat("deliv_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость насоса,руб';filed_options.autoInc=false;options.fields.pump_cost=new FieldFloat("pump_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость всего,руб';filed_options.autoInc=false;options.fields.total_cost=new FieldFloat("total_cost",filed_options);ShipmentForClientList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentForClientList_Model,ModelXML); 
function OrderForClientList_Model(options){var id='OrderForClientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер заявки';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата заявки';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер заявки';filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Идентификатор клиента';filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кол-во в заявке,м3';filed_options.autoInc=false;options.fields.quant_ordered=new FieldFloat("quant_ordered",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кол-во отгружено,м3';filed_options.autoInc=false;options.fields.quant_shipped=new FieldFloat("quant_shipped",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кол-во остаток,м3';filed_options.autoInc=false;options.fields.quant_balance=new FieldFloat("quant_balance",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Опоздание отгрузки';filed_options.autoInc=false;options.fields.no_ship_mark=new FieldBool("no_ship_mark",filed_options);OrderForClientList_Model.superclass.constructor.call(this,id,options);}
extend(OrderForClientList_Model,ModelXML); 
function RawMaterialPrice_Controller(options){options=options||{};options.listModelClass=RawMaterialPriceList_Model;options.objModelClass=RawMaterialPriceList_Model;RawMaterialPrice_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(RawMaterialPrice_Controller,ControllerObjServer);RawMaterialPrice_Controller.prototype.addInsert=function(){RawMaterialPrice_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";options.required=true;var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Материал";options.required=true;var field=new FieldInt("raw_material_id",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Дата установки";var field=new FieldDateTime("set_date_time",options);pm.addField(field);var options={};options.alias="Пользователь";var field=new FieldInt("user_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
RawMaterialPrice_Controller.prototype.addUpdate=function(){RawMaterialPrice_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("raw_material_id",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Дата установки";var field=new FieldDateTime("set_date_time",options);pm.addField(field);var options={};options.alias="Пользователь";var field=new FieldInt("user_id",options);pm.addField(field);}
RawMaterialPrice_Controller.prototype.addDelete=function(){RawMaterialPrice_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
RawMaterialPrice_Controller.prototype.addGetList=function(){RawMaterialPrice_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldInt("raw_material_id",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldJSON("raw_materials_ref",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Дата установки";pm.addField(new FieldDateTime("set_date_time",f_opts));var f_opts={};f_opts.alias="Пользователь";pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldJSON("users_ref",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
RawMaterialPrice_Controller.prototype.addGetObject=function(){RawMaterialPrice_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function RawMaterialPrice_Model(options){var id='RawMaterialPrice_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.raw_material_id=new FieldInt("raw_material_id",filed_options);options.fields.raw_material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Дата установки';filed_options.autoInc=false;options.fields.set_date_time=new FieldDateTime("set_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);RawMaterialPrice_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialPrice_Model,ModelXML); 
function RawMaterialPriceList_Model(options){var id='RawMaterialPriceList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raw_material_id=new FieldInt("raw_material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.raw_materials_ref=new FieldJSON("raw_materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата установки';filed_options.autoInc=false;options.fields.set_date_time=new FieldDateTime("set_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);RawMaterialPriceList_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialPriceList_Model,ModelXML); 
function RawMaterialPriceForNorm_Controller(options){options=options||{};options.listModelClass=RawMaterialPriceForNormList_Model;options.objModelClass=RawMaterialPriceForNormList_Model;RawMaterialPriceForNorm_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(RawMaterialPriceForNorm_Controller,ControllerObjServer);RawMaterialPriceForNorm_Controller.prototype.addInsert=function(){RawMaterialPriceForNorm_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";options.required=true;var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Материал";options.required=true;var field=new FieldInt("raw_material_id",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Дата установки";var field=new FieldDateTime("set_date_time",options);pm.addField(field);var options={};options.alias="Пользователь";var field=new FieldInt("user_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
RawMaterialPriceForNorm_Controller.prototype.addUpdate=function(){RawMaterialPriceForNorm_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("raw_material_id",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Дата установки";var field=new FieldDateTime("set_date_time",options);pm.addField(field);var options={};options.alias="Пользователь";var field=new FieldInt("user_id",options);pm.addField(field);}
RawMaterialPriceForNorm_Controller.prototype.addDelete=function(){RawMaterialPriceForNorm_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
RawMaterialPriceForNorm_Controller.prototype.addGetList=function(){RawMaterialPriceForNorm_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldInt("raw_material_id",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldJSON("raw_materials_ref",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Дата установки";pm.addField(new FieldDateTime("set_date_time",f_opts));var f_opts={};f_opts.alias="Пользователь";pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldJSON("users_ref",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
RawMaterialPriceForNorm_Controller.prototype.addGetObject=function(){RawMaterialPriceForNorm_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function RawMaterialPriceForNorm_Model(options){var id='RawMaterialPriceForNorm_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.raw_material_id=new FieldInt("raw_material_id",filed_options);options.fields.raw_material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Дата установки';filed_options.autoInc=false;options.fields.set_date_time=new FieldDateTime("set_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);RawMaterialPriceForNorm_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialPriceForNorm_Model,ModelXML); 
function RawMaterialPriceForNormList_Model(options){var id='RawMaterialPriceForNormList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raw_material_id=new FieldInt("raw_material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.raw_materials_ref=new FieldJSON("raw_materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата установки';filed_options.autoInc=false;options.fields.set_date_time=new FieldDateTime("set_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);RawMaterialPriceForNormList_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialPriceForNormList_Model,ModelXML); 
function GPSTracker_Model(options){var id='GPSTracker_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldString("id",filed_options);options.fields.id.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sim_number=new FieldString("sim_number",filed_options);options.fields.sim_number.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sim_id=new FieldString("sim_id",filed_options);options.fields.sim_id.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.puk=new FieldString("puk",filed_options);options.fields.puk.getValidator().setMaxLength('8');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_date=new FieldDate("from_date",filed_options);GPSTracker_Model.superclass.constructor.call(this,id,options);}
extend(GPSTracker_Model,ModelXML); 
function GPSTracker_Controller(options){options=options||{};options.listModelClass=GPSTracker_Model;options.objModelClass=GPSTracker_Model;GPSTracker_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();}
extend(GPSTracker_Controller,ControllerObjServer);GPSTracker_Controller.prototype.addInsert=function(){GPSTracker_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("id",options);pm.addField(field);var options={};var field=new FieldString("sim_number",options);pm.addField(field);var options={};var field=new FieldString("sim_id",options);pm.addField(field);var options={};var field=new FieldString("puk",options);pm.addField(field);var options={};var field=new FieldDate("from_date",options);pm.addField(field);}
GPSTracker_Controller.prototype.addUpdate=function(){GPSTracker_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("id",options);pm.addField(field);field=new FieldString("old_id",{});pm.addField(field);var options={};var field=new FieldString("sim_number",options);pm.addField(field);var options={};var field=new FieldString("sim_id",options);pm.addField(field);var options={};var field=new FieldString("puk",options);pm.addField(field);var options={};var field=new FieldDate("from_date",options);pm.addField(field);}
GPSTracker_Controller.prototype.addDelete=function(){GPSTracker_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("id",options));}
GPSTracker_Controller.prototype.addGetList=function(){GPSTracker_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldString("id",f_opts));var f_opts={};pm.addField(new FieldString("sim_number",f_opts));var f_opts={};pm.addField(new FieldString("sim_id",f_opts));var f_opts={};pm.addField(new FieldString("puk",f_opts));var f_opts={};pm.addField(new FieldDate("from_date",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("id");}
GPSTracker_Controller.prototype.addGetObject=function(){GPSTracker_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
GPSTracker_Controller.prototype.addComplete=function(){GPSTracker_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("id");} 
function StoreMapToProductionSite_Model(options){var id='StoreMapToProductionSite_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Склад весов';filed_options.autoInc=false;options.fields.store=new FieldText("store",filed_options);options.fields.store.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Масса загружаемого материала,т.';filed_options.autoInc=false;options.fields.load_capacity=new FieldInt("load_capacity",filed_options);StoreMapToProductionSite_Model.superclass.constructor.call(this,id,options);}
extend(StoreMapToProductionSite_Model,ModelXML); 
function StoreMapToProductionSite_Controller(options){options=options||{};options.listModelClass=StoreMapToProductionSiteList_Model;options.objModelClass=StoreMapToProductionSiteList_Model;StoreMapToProductionSite_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(StoreMapToProductionSite_Controller,ControllerObjServer);StoreMapToProductionSite_Controller.prototype.addInsert=function(){StoreMapToProductionSite_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Склад весов";options.required=true;var field=new FieldText("store",options);pm.addField(field);var options={};options.alias="Завод";var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};options.alias="Масса загружаемого материала,т.";var field=new FieldInt("load_capacity",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
StoreMapToProductionSite_Controller.prototype.addUpdate=function(){StoreMapToProductionSite_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Склад весов";var field=new FieldText("store",options);pm.addField(field);var options={};options.alias="Завод";var field=new FieldInt("production_site_id",options);pm.addField(field);var options={};options.alias="Масса загружаемого материала,т.";var field=new FieldInt("load_capacity",options);pm.addField(field);}
StoreMapToProductionSite_Controller.prototype.addDelete=function(){StoreMapToProductionSite_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
StoreMapToProductionSite_Controller.prototype.addGetList=function(){StoreMapToProductionSite_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Склад весов";pm.addField(new FieldText("store",f_opts));var f_opts={};f_opts.alias="Завод";pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};f_opts.alias="Масса загружаемого материала,т.";pm.addField(new FieldInt("load_capacity",f_opts));}
StoreMapToProductionSite_Controller.prototype.addGetObject=function(){StoreMapToProductionSite_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function StoreMapToProductionSiteList_Model(options){var id='StoreMapToProductionSiteList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Склад весов';filed_options.autoInc=false;options.fields.store=new FieldText("store",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Масса загружаемого материала,т.';filed_options.autoInc=false;options.fields.load_capacity=new FieldInt("load_capacity",filed_options);StoreMapToProductionSiteList_Model.superclass.constructor.call(this,id,options);}
extend(StoreMapToProductionSiteList_Model,ModelXML); 
function MaterialStoreForOrderList_Model(options){var id='MaterialStoreForOrderList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.load_capacity=new FieldFloat("load_capacity",filed_options);options.fields.load_capacity.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.balance=new FieldFloat("balance",filed_options);options.fields.balance.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);MaterialStoreForOrderList_Model.superclass.constructor.call(this,id,options);}
extend(MaterialStoreForOrderList_Model,ModelXML); 
function SessionVar_Controller(options){options=options||{};SessionVar_Controller.superclass.constructor.call(this,options);this.add_set_value();this.add_get_values();}
extend(SessionVar_Controller,ControllerObjServer);SessionVar_Controller.prototype.add_set_value=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_value',opts);var options={};options.required=true;pm.addField(new FieldString("id",options));var options={};pm.addField(new FieldString("val",options));this.addPublicMethod(pm);}
SessionVar_Controller.prototype.add_get_values=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_values',opts);var options={};pm.addField(new FieldString("id_list",options));var options={};options.maxlength="1";pm.addField(new FieldString("field_sep",options));this.addPublicMethod(pm);} 
function DestinationForOrderList_Model(options){var id='DestinationForOrderList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.distance=new FieldString("distance",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.time_route=new FieldTime("time_route",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.price=new FieldString("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_dest=new FieldBool("client_dest",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.is_address=new FieldBool("is_address",filed_options);DestinationForOrderList_Model.superclass.constructor.call(this,id,options);}
extend(DestinationForOrderList_Model,ModelXML); 
function VehicleRouteCashe_Model(options){var id='VehicleRouteCashe_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Трэкер';filed_options.autoInc=false;options.fields.tracker_id=new FieldString("tracker_id",filed_options);options.fields.tracker_id.getValidator().setRequired(true);options.fields.tracker_id.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=true;filed_options.alias='Отгрузка';filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);options.fields.shipment_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.alias='Состояние ТС';filed_options.autoInc=false;options.fields.vehicle_state=new FieldEnum("vehicle_state",filed_options);filed_options.enumValues='shift,free,assigned,busy,left_for_dest,at_dest,left_for_base,out_from_shift,out,shift_added';options.fields.vehicle_state.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время последнего обновления';filed_options.autoInc=false;options.fields.update_dt=new FieldDateTimeTZ("update_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Данные маршрута OSRM';filed_options.autoInc=false;options.fields.route=new FieldJSONB("route",filed_options);options.fields.route.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество построений маршрута';filed_options.autoInc=false;options.fields.update_cnt=new FieldInt("update_cnt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.route_line=new FieldGeometry("route_line",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Клиентский маршрут окончен';filed_options.autoInc=false;options.fields.client_route_done=new FieldBool("client_route_done",filed_options);VehicleRouteCashe_Model.superclass.constructor.call(this,id,options);}
extend(VehicleRouteCashe_Model,ModelXML); 
function LoginDevice_Controller(options){options=options||{};options.listModelClass=LoginDeviceList_Model;LoginDevice_Controller.superclass.constructor.call(this,options);this.addGetList();this.add_switch_banned();}
extend(LoginDevice_Controller,ControllerObjServer);LoginDevice_Controller.prototype.addGetList=function(){LoginDevice_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldText("user_agent",f_opts));var f_opts={};f_opts.alias="Имя пользователя";pm.addField(new FieldString("user_descr",f_opts));var f_opts={};f_opts.alias="Дата входа";pm.addField(new FieldDateTimeTZ("date_time_in",f_opts));var f_opts={};f_opts.alias="Вход запрещен";pm.addField(new FieldBool("banned",f_opts));var f_opts={};pm.addField(new FieldString("ban_hash",f_opts));}
LoginDevice_Controller.prototype.add_switch_banned=function(){var opts={"controller":this};var pm=new PublicMethodServer('switch_banned',opts);var options={};options.required=true;pm.addField(new FieldBool("banned",options));var options={};options.required=true;options.maxlength="32";pm.addField(new FieldString("hash",options));var options={};options.required=true;pm.addField(new FieldInt("user_id",options));this.addPublicMethod(pm);} 
function LoginDeviceList_Model(options){var id='LoginDeviceList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_agent=new FieldText("user_agent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Имя пользователя';filed_options.autoInc=false;options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата входа';filed_options.autoInc=false;options.fields.date_time_in=new FieldDateTimeTZ("date_time_in",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вход запрещен';filed_options.autoInc=false;options.fields.banned=new FieldBool("banned",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ban_hash=new FieldString("ban_hash",filed_options);LoginDeviceList_Model.superclass.constructor.call(this,id,options);}
extend(LoginDeviceList_Model,ModelXML); 
function LoginDeviceBan_Model(options){var id='LoginDeviceBan_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.hash=new FieldString("hash",filed_options);options.fields.hash.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Дата создания';filed_options.autoInc=false;options.fields.create_dt=new FieldDateTimeTZ("create_dt",filed_options);LoginDeviceBan_Model.superclass.constructor.call(this,id,options);}
extend(LoginDeviceBan_Model,ModelXML); 
function LoginDeviceBan_Controller(options){options=options||{};options.listModelClass=LoginDeviceBan_Model;options.objModelClass=LoginDeviceBan_Model;LoginDeviceBan_Controller.superclass.constructor.call(this,options);this.addInsert();this.addDelete();this.addGetList();this.addGetObject();}
extend(LoginDeviceBan_Controller,ControllerObjServer);LoginDeviceBan_Controller.prototype.addInsert=function(){LoginDeviceBan_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldString("hash",options);pm.addField(field);var options={};options.alias="Дата создания";var field=new FieldDateTimeTZ("create_dt",options);pm.addField(field);}
LoginDeviceBan_Controller.prototype.addDelete=function(){LoginDeviceBan_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("user_id",options));var options={"required":true};pm.addField(new FieldString("hash",options));}
LoginDeviceBan_Controller.prototype.addGetList=function(){LoginDeviceBan_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldString("hash",f_opts));var f_opts={};f_opts.alias="Дата создания";pm.addField(new FieldDateTimeTZ("create_dt",f_opts));}
LoginDeviceBan_Controller.prototype.addGetObject=function(){LoginDeviceBan_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldString("hash",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function Event_Model(options){var id='Event_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Идентификатор';filed_options.autoInc=false;options.fields.id=new FieldString("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Параметры';filed_options.autoInc=false;options.fields.params=new FieldJSON("params",filed_options);Event_Model.superclass.constructor.call(this,id,options);}
extend(Event_Model,ModelJSON); 
function DOCMaterialProcurementDriverList_Model(options){var id='DOCMaterialProcurementDriverList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.driver=new FieldString("driver",filed_options);DOCMaterialProcurementDriverList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementDriverList_Model,ModelXML); 
function DOCMaterialProcurementVehicleList_Model(options){var id='DOCMaterialProcurementVehicleList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='ТС';filed_options.autoInc=false;options.fields.vehicle_plate=new FieldString("vehicle_plate",filed_options);DOCMaterialProcurementVehicleList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementVehicleList_Model,ModelXML); 
function DOCMaterialProcurementStoreList_Model(options){var id='DOCMaterialProcurementStoreList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Склад';filed_options.autoInc=false;options.fields.store=new FieldString("store",filed_options);DOCMaterialProcurementStoreList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementStoreList_Model,ModelXML); 
function ConcreteTypeForSiteList_Model(options){var id='ConcreteTypeForSiteList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);ConcreteTypeForSiteList_Model.superclass.constructor.call(this,id,options);}
extend(ConcreteTypeForSiteList_Model,ModelXML); 
function DestinationForSiteList_Model(options){var id='DestinationForSiteList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.address=new FieldString("address",filed_options);DestinationForSiteList_Model.superclass.constructor.call(this,id,options);}
extend(DestinationForSiteList_Model,ModelXML); 
function VehicleTemplateRoute_Model(options){var id='VehicleTemplateRoute_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Объект откуда';filed_options.autoInc=false;options.fields.destination_from_id=new FieldInt("destination_from_id",filed_options);options.fields.destination_from_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.alias='Объект куда';filed_options.autoInc=false;options.fields.destination_to_id=new FieldInt("destination_to_id",filed_options);options.fields.destination_to_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Данные маршрута OSRM (encoded(5) polyline)';filed_options.autoInc=false;options.fields.route_osrm=new Fieldgeometry("route_osrm",filed_options);options.fields.route_osrm.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время обновления';filed_options.autoInc=false;options.fields.update_dt=new FieldDateTimeTZ("update_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество точек маршрута';filed_options.autoInc=false;options.fields.point_cnt=new FieldInt("point_cnt",filed_options);VehicleTemplateRoute_Model.superclass.constructor.call(this,id,options);}
extend(VehicleTemplateRoute_Model,ModelXML); 
function ClientDestination_Model(options){var id='ClientDestination_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);options.fields.client_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);options.fields.destination_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.lon=new FieldFloat("lon",filed_options);options.fields.lon.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.lat=new FieldFloat("lat",filed_options);options.fields.lat.getValidator().setMaxLength('15');ClientDestination_Model.superclass.constructor.call(this,id,options);}
extend(ClientDestination_Model,ModelXML); 
function Enum_production_plant_type(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"elkon","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"elkon"],checked:(options.defaultValue&&options.defaultValue=="elkon")},{"value":"ammann","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"ammann"],checked:(options.defaultValue&&options.defaultValue=="ammann")}];Enum_production_plant_type.superclass.constructor.call(this,id,options);}
extend(Enum_production_plant_type,EditSelect);Enum_production_plant_type.prototype.multyLangValues={"ru_elkon":"Elkon","ru_ammann":"Ammann"}; 
function EnumGridColumn_production_plant_type(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["elkon"]="Elkon";options.multyLangValues["ru"]["ammann"]="Ammann";options.ctrlClass=options.ctrlClass||Enum_production_plant_type;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_production_plant_type.superclass.constructor.call(this,options);}
extend(EnumGridColumn_production_plant_type,GridColumnEnum); 
function Enum_production_plant_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"elkon","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"elkon"],checked:(options.defaultValue&&options.defaultValue=="elkon")},{"value":"ammann","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"ammann"],checked:(options.defaultValue&&options.defaultValue=="ammann")}];Enum_production_plant_types.superclass.constructor.call(this,id,options);}
extend(Enum_production_plant_types,EditSelect);Enum_production_plant_types.prototype.multyLangValues={"ru_elkon":"Elkon","ru_ammann":"Ammann"}; 
function EnumGridColumn_production_plant_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["elkon"]="Elkon";options.multyLangValues["ru"]["ammann"]="Ammann";options.ctrlClass=options.ctrlClass||Enum_production_plant_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_production_plant_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_production_plant_types,GridColumnEnum); 
function RouteRest_Model(options){var id='RouteRest_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.tracker_id=new FieldString("tracker_id",filed_options);options.fields.tracker_id.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.route_rest=new FieldText("route_rest",filed_options);RouteRest_Model.superclass.constructor.call(this,id,options);}
extend(RouteRest_Model,ModelXML); 
function GornyiCarrierMatch_Controller(options){options=options||{};options.listModelClass=GornyiCarrierMatchList_Model;options.objModelClass=GornyiCarrierMatchList_Model;GornyiCarrierMatch_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(GornyiCarrierMatch_Controller,ControllerObjServer);GornyiCarrierMatch_Controller.prototype.addInsert=function(){GornyiCarrierMatch_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Перевозчик";var field=new FieldInt("carrier_id",options);pm.addField(field);var options={};var field=new FieldString("plate",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
GornyiCarrierMatch_Controller.prototype.addUpdate=function(){GornyiCarrierMatch_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Перевозчик";var field=new FieldInt("carrier_id",options);pm.addField(field);var options={};var field=new FieldString("plate",options);pm.addField(field);}
GornyiCarrierMatch_Controller.prototype.addDelete=function(){GornyiCarrierMatch_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
GornyiCarrierMatch_Controller.prototype.addGetList=function(){GornyiCarrierMatch_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Перевозчик";pm.addField(new FieldInt("carrier_id",f_opts));var f_opts={};f_opts.alias="Перевозчик";pm.addField(new FieldJSON("carriers_ref",f_opts));var f_opts={};pm.addField(new FieldString("plate",f_opts));}
GornyiCarrierMatch_Controller.prototype.addGetObject=function(){GornyiCarrierMatch_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function GornyiCarrierMatch_Model(options){var id='GornyiCarrierMatch_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carrier_id=new FieldInt("carrier_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.plate=new FieldString("plate",filed_options);options.fields.plate.getValidator().setMaxLength('8');GornyiCarrierMatch_Model.superclass.constructor.call(this,id,options);}
extend(GornyiCarrierMatch_Model,ModelXML); 
function GornyiCarrierMatchList_Model(options){var id='GornyiCarrierMatchList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carrier_id=new FieldInt("carrier_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carriers_ref=new FieldJSON("carriers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.plate=new FieldString("plate",filed_options);options.fields.plate.getValidator().setMaxLength('8');GornyiCarrierMatchList_Model.superclass.constructor.call(this,id,options);}
extend(GornyiCarrierMatchList_Model,ModelXML); 
function AddressDistance_Model(options){var id='AddressDistance_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='address md5';filed_options.autoInc=false;options.fields.hash=new FieldString("hash",filed_options);options.fields.hash.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Адрес';filed_options.autoInc=false;options.fields.address=new FieldText("address",filed_options);options.fields.address.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.route=new Fieldgeometry("route",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Расстояние';filed_options.autoInc=false;options.fields.distance=new FieldFloat("distance",filed_options);options.fields.distance.getValidator().setMaxLength('15');AddressDistance_Model.superclass.constructor.call(this,id,options);}
extend(AddressDistance_Model,ModelXML); 
function RoleViewRestriction_Model(options){var id='RoleViewRestriction_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Роль';filed_options.autoInc=false;options.fields.role_id=new FieldEnum("role_id",filed_options);filed_options.enumValues='admin,owner,boss,operator,manager,dispatcher,accountant,lab_worker,supplies,sales,plant_director,supervisor,vehicle_owner,client,weighing';var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сколько дней разрешено для просмотра назад';filed_options.autoInc=false;options.fields.back_days_allowed=new FieldInt("back_days_allowed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сколько дней разрешено для просмотра вперед';filed_options.autoInc=false;options.fields.front_days_allowed=new FieldInt("front_days_allowed",filed_options);RoleViewRestriction_Model.superclass.constructor.call(this,id,options);}
extend(RoleViewRestriction_Model,ModelXML); 
function RoleViewRestriction_Controller(options){options=options||{};options.listModelClass=RoleViewRestriction_Model;options.objModelClass=RoleViewRestriction_Model;RoleViewRestriction_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(RoleViewRestriction_Controller,ControllerObjServer);RoleViewRestriction_Controller.prototype.addInsert=function(){RoleViewRestriction_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Роль";options.primaryKey=true;options.enumValues='admin,owner,boss,operator,manager,dispatcher,accountant,lab_worker,supplies,sales,plant_director,supervisor,vehicle_owner,client,weighing';var field=new FieldEnum("role_id",options);pm.addField(field);var options={};options.alias="Сколько дней разрешено для просмотра назад";var field=new FieldInt("back_days_allowed",options);pm.addField(field);var options={};options.alias="Сколько дней разрешено для просмотра вперед";var field=new FieldInt("front_days_allowed",options);pm.addField(field);}
RoleViewRestriction_Controller.prototype.addUpdate=function(){RoleViewRestriction_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Роль";options.primaryKey=true;options.enumValues='admin,owner,boss,operator,manager,dispatcher,accountant,lab_worker,supplies,sales,plant_director,supervisor,vehicle_owner,client,weighing';var field=new FieldEnum("role_id",options);pm.addField(field);field=new FieldEnum("old_role_id",{});pm.addField(field);var options={};options.alias="Сколько дней разрешено для просмотра назад";var field=new FieldInt("back_days_allowed",options);pm.addField(field);var options={};options.alias="Сколько дней разрешено для просмотра вперед";var field=new FieldInt("front_days_allowed",options);pm.addField(field);}
RoleViewRestriction_Controller.prototype.addDelete=function(){RoleViewRestriction_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Роль";pm.addField(new FieldEnum("role_id",options));}
RoleViewRestriction_Controller.prototype.addGetList=function(){RoleViewRestriction_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Роль";pm.addField(new FieldEnum("role_id",f_opts));var f_opts={};f_opts.alias="Сколько дней разрешено для просмотра назад";pm.addField(new FieldInt("back_days_allowed",f_opts));var f_opts={};f_opts.alias="Сколько дней разрешено для просмотра вперед";pm.addField(new FieldInt("front_days_allowed",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("role_id");}
RoleViewRestriction_Controller.prototype.addGetObject=function(){RoleViewRestriction_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Роль";pm.addField(new FieldEnum("role_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ExcelTemplate_Controller(options){options=options||{};options.listModelClass=ExcelTemplateList_Model;options.objModelClass=ExcelTemplateDialog_Model;ExcelTemplate_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_download_excel_file();this.add_delete_excel_file();}
extend(ExcelTemplate_Controller,ControllerObjServer);ExcelTemplate_Controller.prototype.addInsert=function(){ExcelTemplate_Controller.superclass.addInsert.call(this);var pm=this.getInsert();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Описание шаблона";var field=new FieldText("name",options);pm.addField(field);var options={};var field=new FieldText("file_content",options);pm.addField(field);var options={};var field=new FieldJSON("file_info",options);pm.addField(field);var options={};var field=new FieldText("sql_query",options);pm.addField(field);var options={};var field=new FieldJSON("cell_matching",options);pm.addField(field);var options={};var field=new FieldJSON("image_sql",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("update_dt",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};pm.addField(new FieldText("excel_file",options));}
ExcelTemplate_Controller.prototype.addUpdate=function(){ExcelTemplate_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Описание шаблона";var field=new FieldText("name",options);pm.addField(field);var options={};var field=new FieldText("file_content",options);pm.addField(field);var options={};var field=new FieldJSON("file_info",options);pm.addField(field);var options={};var field=new FieldText("sql_query",options);pm.addField(field);var options={};var field=new FieldJSON("cell_matching",options);pm.addField(field);var options={};var field=new FieldJSON("image_sql",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("update_dt",options);pm.addField(field);var options={};pm.addField(new FieldText("excel_file",options));}
ExcelTemplate_Controller.prototype.addDelete=function(){ExcelTemplate_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
ExcelTemplate_Controller.prototype.addGetList=function(){ExcelTemplate_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Описание шаблона";pm.addField(new FieldText("name",f_opts));var f_opts={};pm.addField(new FieldJSONB("file_info",f_opts));}
ExcelTemplate_Controller.prototype.addGetObject=function(){ExcelTemplate_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
ExcelTemplate_Controller.prototype.add_download_excel_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_excel_file',opts);var options={};options.required=true;pm.addField(new FieldInt("excel_template_id",options));this.addPublicMethod(pm);}
ExcelTemplate_Controller.prototype.add_delete_excel_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_excel_file',opts);var options={};options.required=true;pm.addField(new FieldInt("excel_template_id",options));this.addPublicMethod(pm);} 
function ExcelTemplate_Model(options){var id='ExcelTemplate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание шаблона';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_content=new FieldText("file_content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_info=new FieldJSON("file_info",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sql_query=new FieldText("sql_query",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cell_matching=new FieldJSON("cell_matching",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.image_sql=new FieldJSON("image_sql",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.update_dt=new FieldDateTimeTZ("update_dt",filed_options);ExcelTemplate_Model.superclass.constructor.call(this,id,options);}
extend(ExcelTemplate_Model,ModelXML); 
function ExcelTemplateList_Model(options){var id='ExcelTemplateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание шаблона';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_info=new FieldJSONB("file_info",filed_options);ExcelTemplateList_Model.superclass.constructor.call(this,id,options);}
extend(ExcelTemplateList_Model,ModelXML); 
function ExcelTemplateDialog_Model(options){var id='ExcelTemplateDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание шаблона';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_info=new FieldJSON("file_info",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sql_query=new FieldText("sql_query",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.image_sql=new FieldJSON("image_sql",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cell_matching=new FieldJSON("cell_matching",filed_options);ExcelTemplateDialog_Model.superclass.constructor.call(this,id,options);}
extend(ExcelTemplateDialog_Model,ModelXML); 
function ExcelTemplateFieldMatch_Model(options){var id='ExcelTemplateFieldMatch_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.field=new FieldString("field",filed_options);options.fields.field.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cell=new FieldString("cell",filed_options);options.fields.cell.getValidator().setMaxLength('20');ExcelTemplateFieldMatch_Model.superclass.constructor.call(this,id,options);}
extend(ExcelTemplateFieldMatch_Model,ModelJSON); 
function ExcelTemplateFieldMatch_Controller(options){options=options||{};options.listModelClass=ExcelTemplateFieldMatch_Model;options.objModelClass=ExcelTemplateFieldMatch_Model;ExcelTemplateFieldMatch_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ExcelTemplateFieldMatch_Controller,ControllerObjClient);ExcelTemplateFieldMatch_Controller.prototype.addInsert=function(){ExcelTemplateFieldMatch_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("field",options);pm.addField(field);var options={};var field=new FieldString("cell",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ExcelTemplateFieldMatch_Controller.prototype.addUpdate=function(){ExcelTemplateFieldMatch_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("field",options);pm.addField(field);var options={};var field=new FieldString("cell",options);pm.addField(field);}
ExcelTemplateFieldMatch_Controller.prototype.addDelete=function(){ExcelTemplateFieldMatch_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ExcelTemplateFieldMatch_Controller.prototype.addGetList=function(){ExcelTemplateFieldMatch_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("field",f_opts));var f_opts={};pm.addField(new FieldString("cell",f_opts));}
ExcelTemplateFieldMatch_Controller.prototype.addGetObject=function(){ExcelTemplateFieldMatch_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function Bank_Controller(options){options=options||{};options.listModelClass=BankList_Model;options.objModelClass=BankList_Model;Bank_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();this.addComplete();}
extend(Bank_Controller,ControllerObjServer);Bank_Controller.prototype.addGetList=function(){Bank_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="БИК";pm.addField(new FieldString("bik",f_opts));var f_opts={};pm.addField(new FieldString("codegr",f_opts));var f_opts={};f_opts.alias="Регион";pm.addField(new FieldString("gr_descr",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldText("name",f_opts));var f_opts={};f_opts.alias="Кoр.счет";pm.addField(new FieldString("korshet",f_opts));var f_opts={};f_opts.alias="Адрес";pm.addField(new FieldText("adres",f_opts));var f_opts={};f_opts.alias="Город";pm.addField(new FieldText("gor",f_opts));var f_opts={};pm.addField(new FieldInt("tgoup",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("codegr,bik");}
Bank_Controller.prototype.addGetObject=function(){Bank_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="БИК";pm.addField(new FieldString("bik",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Bank_Controller.prototype.addComplete=function(){Bank_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("bik",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("bik");} 
function Bank_Model(options){var id='Bank_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.bik=new FieldString("bik",filed_options);options.fields.bik.getValidator().setMaxLength('9');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.codegr=new FieldString("codegr",filed_options);options.fields.codegr.getValidator().setMaxLength('9');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.korshet=new FieldString("korshet",filed_options);options.fields.korshet.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.adres=new FieldText("adres",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.gor=new FieldText("gor",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tgroup=new FieldBool("tgroup",filed_options);Bank_Model.superclass.constructor.call(this,id,options);}
extend(Bank_Model,ModelXML); 
function BankList_Model(options){var id='BankList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='БИК';filed_options.autoInc=false;options.fields.bik=new FieldString("bik",filed_options);options.fields.bik.getValidator().setMaxLength('9');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.codegr=new FieldString("codegr",filed_options);options.fields.codegr.getValidator().setMaxLength('9');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Регион';filed_options.autoInc=false;options.fields.gr_descr=new FieldString("gr_descr",filed_options);options.fields.gr_descr.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кoр.счет';filed_options.autoInc=false;options.fields.korshet=new FieldString("korshet",filed_options);options.fields.korshet.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Адрес';filed_options.autoInc=false;options.fields.adres=new FieldText("adres",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Город';filed_options.autoInc=false;options.fields.gor=new FieldText("gor",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tgoup=new FieldInt("tgoup",filed_options);options.fields.tgoup.getValidator().setMaxLength('31');BankList_Model.superclass.constructor.call(this,id,options);}
extend(BankList_Model,ModelXML); 
function ProductionBase_Model(options){var id='ProductionBase_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Геозона';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);options.fields.destination_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Адрес';filed_options.autoInc=false;options.fields.address=new FieldText("address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Deleted';filed_options.autoInc=false;options.fields.deleted=new FieldBool("deleted",filed_options);ProductionBase_Model.superclass.constructor.call(this,id,options);}
extend(ProductionBase_Model,ModelXML); 
function ProductionBase_Controller(options){options=options||{};options.listModelClass=ProductionBaseList_Model;options.objModelClass=ProductionBaseList_Model;ProductionBase_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ProductionBase_Controller,ControllerObjServer);ProductionBase_Controller.prototype.addInsert=function(){ProductionBase_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Геозона";options.required=true;var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="Адрес";var field=new FieldText("address",options);pm.addField(field);var options={};options.alias="Deleted";var field=new FieldBool("deleted",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ProductionBase_Controller.prototype.addUpdate=function(){ProductionBase_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Геозона";var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="Адрес";var field=new FieldText("address",options);pm.addField(field);var options={};options.alias="Deleted";var field=new FieldBool("deleted",options);pm.addField(field);}
ProductionBase_Controller.prototype.addDelete=function(){ProductionBase_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ProductionBase_Controller.prototype.addGetList=function(){ProductionBase_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Геозона";pm.addField(new FieldJSON("destinations_ref",f_opts));var f_opts={};f_opts.alias="Адрес";pm.addField(new FieldText("address",f_opts));var f_opts={};f_opts.alias="Deleted";pm.addField(new FieldBool("deleted",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
ProductionBase_Controller.prototype.addGetObject=function(){ProductionBase_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ProductionBaseList_Model(options){var id='ProductionBaseList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Геозона';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Адрес';filed_options.autoInc=false;options.fields.address=new FieldText("address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Deleted';filed_options.autoInc=false;options.fields.deleted=new FieldBool("deleted",filed_options);ProductionBaseList_Model.superclass.constructor.call(this,id,options);}
extend(ProductionBaseList_Model,ModelXML); 
function PeriodValue_Model(options){var id='PeriodValue_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид значения';filed_options.autoInc=false;options.fields.period_value_type=new FieldEnum("period_value_type",filed_options);filed_options.enumValues='destination_price,destination_price_for_driver,demurrage_cost_per_hour,water_ship_cost';options.fields.period_value_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Ключ';filed_options.autoInc=false;options.fields.key=new FieldInt("key",filed_options);options.fields.key.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.val=new FieldText("val",filed_options);PeriodValue_Model.superclass.constructor.call(this,id,options);}
extend(PeriodValue_Model,ModelXML); 
function Enum_period_value_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"destination_price","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"destination_price"],checked:(options.defaultValue&&options.defaultValue=="destination_price")},{"value":"destination_price_for_driver","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"destination_price_for_driver"],checked:(options.defaultValue&&options.defaultValue=="destination_price_for_driver")},{"value":"demurrage_cost_per_hour","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"demurrage_cost_per_hour"],checked:(options.defaultValue&&options.defaultValue=="demurrage_cost_per_hour")},{"value":"water_ship_cost","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"water_ship_cost"],checked:(options.defaultValue&&options.defaultValue=="water_ship_cost")},{"value":"min_quant_for_ship_cost","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"min_quant_for_ship_cost"],checked:(options.defaultValue&&options.defaultValue=="min_quant_for_ship_cost")}];Enum_period_value_types.superclass.constructor.call(this,id,options);}
extend(Enum_period_value_types,EditSelect);Enum_period_value_types.prototype.multyLangValues={"ru_destination_price":"Цена доставки","ru_destination_price_for_driver":"Цена для водителей","ru_demurrage_cost_per_hour":"Стоимость простоя","ru_water_ship_cost":"Стоимость доставки воды","ru_min_quant_for_ship_cost":"Минимальное количество куб для доставки"}; 
function EnumGridColumn_period_value_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["destination_price"]="Цена доставки";options.multyLangValues["ru"]["destination_price_for_driver"]="Цена для водителей";options.multyLangValues["ru"]["demurrage_cost_per_hour"]="Стоимость простоя";options.multyLangValues["ru"]["water_ship_cost"]="Стоимость доставки воды";options.multyLangValues["ru"]["min_quant_for_ship_cost"]="Минимальное количество куб для доставки";options.ctrlClass=options.ctrlClass||Enum_period_value_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_period_value_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_period_value_types,GridColumnEnum); 
function PeriodValue_Controller(options){options=options||{};options.listModelClass=PeriodValue_Model;options.objModelClass=PeriodValue_Model;PeriodValue_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_last_val();}
extend(PeriodValue_Controller,ControllerObjServer);PeriodValue_Controller.prototype.addInsert=function(){PeriodValue_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Вид значения";options.required=true;options.enumValues='destination_price,destination_price_for_driver,demurrage_cost_per_hour,water_ship_cost';var field=new FieldEnum("period_value_type",options);pm.addField(field);var options={};options.alias="Ключ";options.required=true;var field=new FieldInt("key",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldText("val",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
PeriodValue_Controller.prototype.addUpdate=function(){PeriodValue_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Вид значения";options.enumValues='destination_price,destination_price_for_driver,demurrage_cost_per_hour,water_ship_cost';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("period_value_type",options);pm.addField(field);var options={};options.alias="Ключ";var field=new FieldInt("key",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldText("val",options);pm.addField(field);}
PeriodValue_Controller.prototype.addDelete=function(){PeriodValue_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
PeriodValue_Controller.prototype.addGetList=function(){PeriodValue_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Вид значения";pm.addField(new FieldEnum("period_value_type",f_opts));var f_opts={};f_opts.alias="Ключ";pm.addField(new FieldInt("key",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldText("val",f_opts));}
PeriodValue_Controller.prototype.addGetObject=function(){PeriodValue_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
PeriodValue_Controller.prototype.add_get_last_val=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_last_val',opts);var options={};options.required=true;pm.addField(new FieldEnum("period_value_type",options));var options={};options.required=true;pm.addField(new FieldInt("key",options));this.addPublicMethod(pm);} 
function DestinationPriceForDriverPeriodValueList_Model(options){var id='DestinationPriceForDriverPeriodValueList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.val=new FieldFloat("val",filed_options);options.fields.val.getValidator().setMaxLength('15');DestinationPriceForDriverPeriodValueList_Model.superclass.constructor.call(this,id,options);}
extend(DestinationPriceForDriverPeriodValueList_Model,ModelXML); 
function DemurrageCostPerHourPeriodValueList_Model(options){var id='DemurrageCostPerHourPeriodValueList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.val=new FieldFloat("val",filed_options);options.fields.val.getValidator().setMaxLength('15');DemurrageCostPerHourPeriodValueList_Model.superclass.constructor.call(this,id,options);}
extend(DemurrageCostPerHourPeriodValueList_Model,ModelXML); 
function WaterShipCostPeriodValueList_Model(options){var id='WaterShipCostPeriodValueList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.val=new FieldFloat("val",filed_options);options.fields.val.getValidator().setMaxLength('15');WaterShipCostPeriodValueList_Model.superclass.constructor.call(this,id,options);}
extend(WaterShipCostPeriodValueList_Model,ModelXML); 
function TmUserList_Controller(options){options=options||{};options.listModelClass=TmUserList_Model;options.objModelClass=TmUserList_Model;TmUserList_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();this.addComplete();this.addUpdate();}
extend(TmUserList_Controller,ControllerObjServer);TmUserList_Controller.prototype.addGetList=function(){TmUserList_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("tm_id",f_opts));var f_opts={};pm.addField(new FieldString("tm_first_name",f_opts));var f_opts={};pm.addField(new FieldJSONB("ext_obj",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("tm_first_name");}
TmUserList_Controller.prototype.addGetObject=function(){TmUserList_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
TmUserList_Controller.prototype.addComplete=function(){TmUserList_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("tm_first_name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("tm_first_name");}
TmUserList_Controller.prototype.addUpdate=function(){TmUserList_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};options.required=true;pm.addField(new FieldString("ext_obj_type",options));var options={};options.required=true;pm.addField(new FieldInt("ext_obj_int",options));} 
function TmUserList_Model(options){var id='TmUserList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_id=new FieldString("tm_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_first_name=new FieldString("tm_first_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_obj=new FieldJSONB("ext_obj",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_id=new FieldInt("app_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_contact_id=new FieldInt("ext_contact_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_contact_tel=new FieldString("ext_contact_tel",filed_options);TmUserList_Model.superclass.constructor.call(this,id,options);}
extend(TmUserList_Model,ModelXML); 
function TmUser_Controller(options){options=options||{};options.listModelClass=TmUserPhotoList_Model;options.objModelClass=TmUserDialog_Model;TmUser_Controller.superclass.constructor.call(this,options);this.addDelete();this.addGetList();this.addGetObject();this.add_get_full_photo();this.addComplete();this.addUpdate();}
extend(TmUser_Controller,ControllerObjServer);TmUser_Controller.prototype.addDelete=function(){TmUser_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
TmUser_Controller.prototype.addGetList=function(){TmUser_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("tm_id",f_opts));var f_opts={};pm.addField(new FieldString("tm_first_name",f_opts));var f_opts={};pm.addField(new FieldInt("ext_contact_id",f_opts));var f_opts={};pm.addField(new FieldJSON("ext_contacts_ref",f_opts));var f_opts={};pm.addField(new FieldString("ext_contacts_tel",f_opts));var f_opts={};pm.addField(new FieldInt("app_id",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldString("tm_photo",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
TmUser_Controller.prototype.addGetObject=function(){TmUser_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
TmUser_Controller.prototype.add_get_full_photo=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_full_photo',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
TmUser_Controller.prototype.addComplete=function(){TmUser_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("tm_first_name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("tm_first_name");}
TmUser_Controller.prototype.addUpdate=function(){TmUser_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("ext_contact_id",options);pm.addField(field);} 
function TmOutMessage_Controller(options){options=options||{};options.listModelClass=TmOutMessageList_Model;options.objModelClass=TmOutMessageList_Model;TmOutMessage_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();this.add_send();this.add_send_media();this.add_tm_invite();this.add_tm_invite_contact();this.add_get_recipient_inf();}
extend(TmOutMessage_Controller,ControllerObjServer);TmOutMessage_Controller.prototype.addGetList=function(){TmOutMessage_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("app_id",f_opts));var f_opts={};pm.addField(new FieldJSONB("message",f_opts));var f_opts={};pm.addField(new FieldDateTime("sent_date_time",f_opts));var f_opts={};pm.addField(new FieldBool("sent",f_opts));var f_opts={};pm.addField(new FieldJSON("ext_obj",f_opts));var f_opts={};pm.addField(new FieldString("first_name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("sent_date_time");}
TmOutMessage_Controller.prototype.addGetObject=function(){TmOutMessage_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
TmOutMessage_Controller.prototype.add_send=function(){var opts={"controller":this};var pm=new PublicMethodServer('send',opts);var options={};options.required=true;options.maxlength="500";pm.addField(new FieldString("recipient",options));var options={};options.required=true;options.maxlength="1000";pm.addField(new FieldString("message",options));this.addPublicMethod(pm);}
TmOutMessage_Controller.prototype.add_send_media=function(){var opts={"controller":this};var pm=new PublicMethodServer('send_media',opts);pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.required=true;options.maxlength="500";pm.addField(new FieldString("recipient",options));var options={};options.maxlength="1000";pm.addField(new FieldString("caption",options));var options={};pm.addField(new FieldText("media_file",options));this.addPublicMethod(pm);}
TmOutMessage_Controller.prototype.add_tm_invite=function(){var opts={"controller":this};var pm=new PublicMethodServer('tm_invite',opts);var options={};options.required=true;options.maxlength="500";pm.addField(new FieldString("recipient",options));this.addPublicMethod(pm);}
TmOutMessage_Controller.prototype.add_tm_invite_contact=function(){var opts={"controller":this};var pm=new PublicMethodServer('tm_invite_contact',opts);var options={};options.required=true;pm.addField(new FieldInt("contact_id",options));this.addPublicMethod(pm);}
TmOutMessage_Controller.prototype.add_get_recipient_inf=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_recipient_inf',opts);var options={};options.required=true;options.maxlength="500";pm.addField(new FieldString("recipient",options));this.addPublicMethod(pm);} 
function TmOutMessageList_Model(options){var id='TmOutMessageList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_id=new FieldInt("app_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.message=new FieldJSONB("message",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sent_date_time=new FieldDateTime("sent_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.sent=new FieldBool("sent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_obj=new FieldJSON("ext_obj",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.first_name=new FieldString("first_name",filed_options);TmOutMessageList_Model.superclass.constructor.call(this,id,options);}
extend(TmOutMessageList_Model,ModelXML); 
function EmployeeList_Model(options){var id='EmployeeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('80');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employed=new FieldBool("employed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inn=new FieldText("inn",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post=new FieldText("post",filed_options);EmployeeList_Model.superclass.constructor.call(this,id,options);}
extend(EmployeeList_Model,ModelXML); 
function TmInMessage_Controller(options){options=options||{};options.listModelClass=TmInMessageList_Model;options.objModelClass=TmInMessageList_Model;TmInMessage_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();}
extend(TmInMessage_Controller,ControllerObjServer);TmInMessage_Controller.prototype.addGetList=function(){TmInMessage_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("app_id",f_opts));var f_opts={};pm.addField(new FieldJSONB("message",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldJSON("contacts_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("entity",f_opts));}
TmInMessage_Controller.prototype.addGetObject=function(){TmInMessage_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function TmInMessage_Model(options){var id='TmInMessage_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_id=new FieldInt("app_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.message=new FieldJSONB("message",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);TmInMessage_Model.superclass.constructor.call(this,id,options);}
extend(TmInMessage_Model,ModelXML); 
function TmInMessageList_Model(options){var id='TmInMessageList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_id=new FieldInt("app_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.message=new FieldJSONB("message",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contacts_ref=new FieldJSON("contacts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.entity=new FieldJSON("entity",filed_options);TmInMessageList_Model.superclass.constructor.call(this,id,options);}
extend(TmInMessageList_Model,ModelXML); 
function Chat_Controller(options){options=options||{};Chat_Controller.superclass.constructor.call(this,options);this.add_get_history();}
extend(Chat_Controller,ControllerObjServer);Chat_Controller.prototype.add_get_history=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_history',opts);var options={};options.required=true;options.maxlength="500";pm.addField(new FieldString("recipient",options));this.addPublicMethod(pm);} 
function Chat_Model(options){var id='Chat_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tp=new FieldString("tp",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_user=new FieldJSONB("from_user",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user=new FieldJSONB("to_user",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user=new FieldJSONB("to_user",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.text=new FieldText("text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.media_type=new FieldText("media_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.message=new FieldJSONB("message",filed_options);Chat_Model.superclass.constructor.call(this,id,options);}
extend(Chat_Model,ModelXML); 
function Post_Controller(options){options=options||{};options.listModelClass=Post_Model;options.objModelClass=Post_Model;Post_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();}
extend(Post_Controller,ControllerObjServer);Post_Controller.prototype.addInsert=function(){Post_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Post_Controller.prototype.addUpdate=function(){Post_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);}
Post_Controller.prototype.addDelete=function(){Post_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Post_Controller.prototype.addGetList=function(){Post_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Post_Controller.prototype.addGetObject=function(){Post_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Post_Controller.prototype.addComplete=function(){Post_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function Post_Model(options){var id='Post_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('250');Post_Model.superclass.constructor.call(this,id,options);}
extend(Post_Model,ModelXML); 
function Contact_Model(options){var id='Contact_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Должность';filed_options.autoInc=false;options.fields.post_id=new FieldInt("post_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Email';filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('11');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Добавочный номер';filed_options.autoInc=false;options.fields.tel_ext=new FieldString("tel_ext",filed_options);options.fields.tel_ext.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание для поиска';filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);Contact_Model.superclass.constructor.call(this,id,options);}
extend(Contact_Model,ModelXML); 
function ContactList_Model(options){var id='ContactList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.posts_ref=new FieldJSON("posts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Email';filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Добавочный номер';filed_options.autoInc=false;options.fields.tel_ext=new FieldString("tel_ext",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание для поиска';filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_photo=new FieldText("tm_photo",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_first_name=new FieldString("tm_first_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_exists=new FieldBool("tm_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_activated=new FieldBool("tm_activated",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_id=new FieldInt("ext_id",filed_options);ContactList_Model.superclass.constructor.call(this,id,options);}
extend(ContactList_Model,ModelXML); 
function Contact_Controller(options){options=options||{};options.listModelClass=ContactList_Model;options.objModelClass=ContactDialog_Model;Contact_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_complete_tm();this.add_upsert();}
extend(Contact_Controller,ControllerObjServer);Contact_Controller.prototype.addInsert=function(){Contact_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Должность";var field=new FieldInt("post_id",options);pm.addField(field);var options={};options.alias="Email";var field=new FieldString("email",options);pm.addField(field);var options={};options.alias="Телефон";var field=new FieldString("tel",options);pm.addField(field);var options={};options.alias="Добавочный номер";var field=new FieldString("tel_ext",options);pm.addField(field);var options={};options.alias="Описание для поиска";var field=new FieldText("descr",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Contact_Controller.prototype.addUpdate=function(){Contact_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Должность";var field=new FieldInt("post_id",options);pm.addField(field);var options={};options.alias="Email";var field=new FieldString("email",options);pm.addField(field);var options={};options.alias="Телефон";var field=new FieldString("tel",options);pm.addField(field);var options={};options.alias="Добавочный номер";var field=new FieldString("tel_ext",options);pm.addField(field);var options={};options.alias="Описание для поиска";var field=new FieldText("descr",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);}
Contact_Controller.prototype.addDelete=function(){Contact_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Contact_Controller.prototype.addGetList=function(){Contact_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldJSON("posts_ref",f_opts));var f_opts={};f_opts.alias="Email";pm.addField(new FieldString("email",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("tel",f_opts));var f_opts={};f_opts.alias="Добавочный номер";pm.addField(new FieldString("tel_ext",f_opts));var f_opts={};f_opts.alias="Описание для поиска";pm.addField(new FieldText("descr",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("comment_text",f_opts));var f_opts={};pm.addField(new FieldText("tm_photo",f_opts));var f_opts={};pm.addField(new FieldString("tm_first_name",f_opts));var f_opts={};pm.addField(new FieldBool("tm_exists",f_opts));var f_opts={};pm.addField(new FieldBool("tm_activated",f_opts));var f_opts={};pm.addField(new FieldInt("ext_id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("descr");}
Contact_Controller.prototype.addGetObject=function(){Contact_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
Contact_Controller.prototype.addComplete=function(){Contact_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldText("descr",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("descr");}
Contact_Controller.prototype.add_complete_tm=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_tm',opts);var options={};options.maxlength="200";pm.addField(new FieldString("descr",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Contact_Controller.prototype.add_upsert=function(){var opts={"controller":this};var pm=new PublicMethodServer('upsert',opts);var options={};options.required=true;options.maxlength="250";pm.addField(new FieldString("name",options));var options={};options.required=true;options.maxlength="11";pm.addField(new FieldString("tel",options));var options={};options.required=true;options.maxlength="100";pm.addField(new FieldString("email",options));var options={};options.required=true;options.maxlength="20";pm.addField(new FieldString("tel_ext",options));this.addPublicMethod(pm);} 
function EntityContact_Model(options){var id='EntityContact_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.entity_type=new FieldEnum("entity_type",filed_options);filed_options.enumValues='users,clients,suppliers,pump_vehicles,drivers';options.fields.entity_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.entity_id=new FieldInt("entity_id",filed_options);options.fields.entity_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_id=new FieldInt("contact_id",filed_options);options.fields.contact_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.mod_date_time=new FieldDateTimeTZ("mod_date_time",filed_options);options.fields.mod_date_time.getValidator().setRequired(true);EntityContact_Model.superclass.constructor.call(this,id,options);}
extend(EntityContact_Model,ModelXML); 
function EntityContactList_Model(options){var id='EntityContactList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.entity_type=new FieldString("entity_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.entity_id=new FieldInt("entity_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.entities_ref=new FieldJSON("entities_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_id=new FieldInt("contact_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_name=new FieldString("contact_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_attrs=new FieldJSON("contact_attrs",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contacts_ref=new FieldJSON("contacts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_exists=new FieldBool("tm_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_activated=new FieldBool("tm_activated",filed_options);EntityContactList_Model.superclass.constructor.call(this,id,options);}
extend(EntityContactList_Model,ModelXML); 
function EntityContact_Controller(options){options=options||{};options.listModelClass=EntityContactList_Model;options.objModelClass=EntityContactList_Model;EntityContact_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(EntityContact_Controller,ControllerObjServer);EntityContact_Controller.prototype.addInsert=function(){EntityContact_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;options.enumValues='users,clients,suppliers,pump_vehicles,drivers';var field=new FieldEnum("entity_type",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("entity_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("contact_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldDateTimeTZ("mod_date_time",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
EntityContact_Controller.prototype.addUpdate=function(){EntityContact_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.enumValues='users,clients,suppliers,pump_vehicles,drivers';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("entity_type",options);pm.addField(field);var options={};var field=new FieldInt("entity_id",options);pm.addField(field);var options={};var field=new FieldInt("contact_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("mod_date_time",options);pm.addField(field);}
EntityContact_Controller.prototype.addDelete=function(){EntityContact_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
EntityContact_Controller.prototype.addGetList=function(){EntityContact_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("entity_type",f_opts));var f_opts={};pm.addField(new FieldInt("entity_id",f_opts));var f_opts={};pm.addField(new FieldJSON("entities_ref",f_opts));var f_opts={};pm.addField(new FieldInt("contact_id",f_opts));var f_opts={};pm.addField(new FieldString("contact_name",f_opts));var f_opts={};pm.addField(new FieldJSON("contact_attrs",f_opts));var f_opts={};pm.addField(new FieldJSON("contacts_ref",f_opts));var f_opts={};pm.addField(new FieldBool("tm_exists",f_opts));var f_opts={};pm.addField(new FieldBool("tm_activated",f_opts));}
EntityContact_Controller.prototype.addGetObject=function(){EntityContact_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function TmUserPhotoList_Model(options){var id='TmUserPhotoList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_id=new FieldString("tm_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_first_name=new FieldString("tm_first_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_contact_id=new FieldInt("ext_contact_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_contacts_ref=new FieldJSON("ext_contacts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_contacts_tel=new FieldString("ext_contacts_tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_id=new FieldInt("app_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_photo=new FieldString("tm_photo",filed_options);TmUserPhotoList_Model.superclass.constructor.call(this,id,options);}
extend(TmUserPhotoList_Model,ModelXML); 
function TmUserDialog_Model(options){var id='TmUserDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_id=new FieldString("tm_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_first_name=new FieldString("tm_first_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_obj=new FieldJSONB("ext_obj",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_id=new FieldInt("app_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_photo=new FieldString("tm_photo",filed_options);TmUserDialog_Model.superclass.constructor.call(this,id,options);}
extend(TmUserDialog_Model,ModelXML); 
function ContactDialog_Model(options){var id='ContactDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.posts_ref=new FieldJSON("posts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Email';filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Добавочный номер';filed_options.autoInc=false;options.fields.tel_ext=new FieldString("tel_ext",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_exists=new FieldBool("tm_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_activated=new FieldBool("tm_activated",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_photo=new FieldString("tm_photo",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_id=new FieldInt("ext_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_first_name=new FieldString("tm_first_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_first_name=new FieldString("tm_first_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.attachments_list=new FieldJSON("attachments_list",filed_options);ContactDialog_Model.superclass.constructor.call(this,id,options);}
extend(ContactDialog_Model,ModelXML); 
function DriverList_Model(options){var id='DriverList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водительское удостоверение';filed_options.autoInc=false;options.fields.driver_licence=new FieldText("driver_licence",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Класс водительского удостоверения';filed_options.autoInc=false;options.fields.driver_licence_class=new FieldString("driver_licence_class",filed_options);options.fields.driver_licence_class.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контакты';filed_options.autoInc=false;options.fields.contact_list=new FieldJSON("contact_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контакты';filed_options.autoInc=false;options.fields.contact_ids=new FieldText("contact_ids",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Официально устроен';filed_options.autoInc=false;options.fields.employed=new FieldBool("employed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ИНН водителя';filed_options.autoInc=false;options.fields.inn=new FieldText("inn",filed_options);DriverList_Model.superclass.constructor.call(this,id,options);}
extend(DriverList_Model,ModelXML); 
function RawMaterialTicket_Model(options){var id='RawMaterialTicket_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carrier_id=new FieldInt("carrier_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.raw_material_id=new FieldInt("raw_material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Карьер';filed_options.autoInc=false;options.fields.quarry_id=new FieldInt("quarry_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Штрихкод';filed_options.autoInc=false;options.fields.barcode=new FieldString("barcode",filed_options);options.fields.barcode.getValidator().setMaxLength('13');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вес, т';filed_options.autoInc=false;options.fields.quant=new FieldInt("quant",filed_options);options.fields.quant.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.issue_date_time=new FieldDateTimeTZ("issue_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.close_user_id=new FieldInt("close_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.issue_user_id=new FieldInt("issue_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата окончания срока';filed_options.autoInc=false;options.fields.expire_date=new FieldDate("expire_date",filed_options);RawMaterialTicket_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialTicket_Model,ModelXML); 
function RawMaterialTicket_Controller(options){options=options||{};options.listModelClass=RawMaterialTicketList_Model;options.objModelClass=RawMaterialTicketDialog_Model;RawMaterialTicket_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_generate();this.add_close_ticket();this.add_get_carrier_agg_list();}
extend(RawMaterialTicket_Controller,ControllerObjServer);RawMaterialTicket_Controller.prototype.addInsert=function(){RawMaterialTicket_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Перевозчик";var field=new FieldInt("carrier_id",options);pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("raw_material_id",options);pm.addField(field);var options={};options.alias="Карьер";var field=new FieldInt("quarry_id",options);pm.addField(field);var options={};options.alias="Штрихкод";var field=new FieldString("barcode",options);pm.addField(field);var options={};options.alias="Вес, т";options.required=true;var field=new FieldInt("quant",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("issue_date_time",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("close_date_time",options);pm.addField(field);var options={};options.alias="Пользователь";var field=new FieldInt("close_user_id",options);pm.addField(field);var options={};options.alias="Пользователь";var field=new FieldInt("issue_user_id",options);pm.addField(field);var options={};options.alias="Дата окончания срока";var field=new FieldDate("expire_date",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
RawMaterialTicket_Controller.prototype.addUpdate=function(){RawMaterialTicket_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Перевозчик";var field=new FieldInt("carrier_id",options);pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("raw_material_id",options);pm.addField(field);var options={};options.alias="Карьер";var field=new FieldInt("quarry_id",options);pm.addField(field);var options={};options.alias="Штрихкод";var field=new FieldString("barcode",options);pm.addField(field);var options={};options.alias="Вес, т";var field=new FieldInt("quant",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("issue_date_time",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("close_date_time",options);pm.addField(field);var options={};options.alias="Пользователь";var field=new FieldInt("close_user_id",options);pm.addField(field);var options={};options.alias="Пользователь";var field=new FieldInt("issue_user_id",options);pm.addField(field);var options={};options.alias="Дата окончания срока";var field=new FieldDate("expire_date",options);pm.addField(field);}
RawMaterialTicket_Controller.prototype.addDelete=function(){RawMaterialTicket_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
RawMaterialTicket_Controller.prototype.addGetList=function(){RawMaterialTicket_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Перевозчик";pm.addField(new FieldInt("carrier_id",f_opts));var f_opts={};f_opts.alias="Перевозчик";pm.addField(new FieldJSON("carriers_ref",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldInt("raw_material_id",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldJSON("raw_materials_ref",f_opts));var f_opts={};f_opts.alias="Карьер";pm.addField(new FieldInt("quarry_id",f_opts));var f_opts={};f_opts.alias="Карьер";pm.addField(new FieldJSON("quarries_ref",f_opts));var f_opts={};f_opts.alias="Штрихкод";pm.addField(new FieldString("barcode",f_opts));var f_opts={};f_opts.alias="Вес, т";pm.addField(new FieldInt("quant",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("issue_date_time",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("close_date_time",f_opts));var f_opts={};f_opts.alias="Кто выпустил";pm.addField(new FieldJSON("issue_users_ref",f_opts));var f_opts={};pm.addField(new FieldInt("issue_user_id",f_opts));var f_opts={};f_opts.alias="Кто погасил";pm.addField(new FieldJSON("close_users_ref",f_opts));var f_opts={};pm.addField(new FieldInt("close_user_id",f_opts));var f_opts={};f_opts.alias="Дата окончания срока";pm.addField(new FieldDate("expire_date",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("issue_date_time");}
RawMaterialTicket_Controller.prototype.addGetObject=function(){RawMaterialTicket_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
RawMaterialTicket_Controller.prototype.add_generate=function(){var opts={"controller":this};var pm=new PublicMethodServer('generate',opts);var options={};options.required=true;pm.addField(new FieldInt("carrier_id",options));var options={};options.required=true;pm.addField(new FieldInt("raw_material_id",options));var options={};options.required=true;pm.addField(new FieldInt("quarry_id",options));var options={};options.required=true;pm.addField(new FieldInt("quant",options));var options={};options.required=true;pm.addField(new FieldInt("barcode_from",options));var options={};options.required=true;pm.addField(new FieldInt("barcode_to",options));var options={};options.required=true;pm.addField(new FieldDate("expire_date",options));this.addPublicMethod(pm);}
RawMaterialTicket_Controller.prototype.add_close_ticket=function(){var opts={"controller":this};var pm=new PublicMethodServer('close_ticket',opts);var options={};options.required=true;pm.addField(new FieldInt("barcode",options));this.addPublicMethod(pm);}
RawMaterialTicket_Controller.prototype.add_get_carrier_agg_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_carrier_agg_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldInt("inline",options));this.addPublicMethod(pm);} 
function RawMaterialTicketList_Model(options){var id='RawMaterialTicketList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carrier_id=new FieldInt("carrier_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carriers_ref=new FieldJSON("carriers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.raw_material_id=new FieldInt("raw_material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.raw_materials_ref=new FieldJSON("raw_materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Карьер';filed_options.autoInc=false;options.fields.quarry_id=new FieldInt("quarry_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Карьер';filed_options.autoInc=false;options.fields.quarries_ref=new FieldJSON("quarries_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Штрихкод';filed_options.autoInc=false;options.fields.barcode=new FieldString("barcode",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вес, т';filed_options.autoInc=false;options.fields.quant=new FieldInt("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.issue_date_time=new FieldDateTimeTZ("issue_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто выпустил';filed_options.autoInc=false;options.fields.issue_users_ref=new FieldJSON("issue_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.issue_user_id=new FieldInt("issue_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто погасил';filed_options.autoInc=false;options.fields.close_users_ref=new FieldJSON("close_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_user_id=new FieldInt("close_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата окончания срока';filed_options.autoInc=false;options.fields.expire_date=new FieldDate("expire_date",filed_options);RawMaterialTicketList_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialTicketList_Model,ModelXML); 
function RawMaterialTicketCarrierAggList_Model(options){var id='RawMaterialTicketCarrierAggList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carriers_ref=new FieldJSON("carriers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.raw_materials_ref=new FieldJSON("raw_materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Карьер';filed_options.autoInc=false;options.fields.quarries_ref=new FieldJSON("quarries_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вес, т';filed_options.autoInc=false;options.fields.quant=new FieldInt("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.ticket_count=new FieldInt("ticket_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вес, т';filed_options.autoInc=false;options.fields.quant_tot=new FieldInt("quant_tot",filed_options);RawMaterialTicketCarrierAggList_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialTicketCarrierAggList_Model,ModelXML); 
function TmUser_Model(options){var id='TmUser_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_contact_id=new FieldInt("ext_contact_id",filed_options);TmUser_Model.superclass.constructor.call(this,id,options);}
extend(TmUser_Model,ModelXML); 
function LabChart_Controller(options){options=options||{};LabChart_Controller.superclass.constructor.call(this,options);this.add_get_lab_chart1();this.add_get_lab_chart2();}
extend(LabChart_Controller,ControllerObjServer);LabChart_Controller.prototype.add_get_lab_chart1=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_lab_chart1',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
LabChart_Controller.prototype.add_get_lab_chart2=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_lab_chart2',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var options={};pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);} 
function ClientSpecification_Controller(options){options=options||{};options.listModelClass=ClientSpecificationList_Model;options.objModelClass=ClientSpecificationList_Model;ClientSpecification_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_complete_for_client();}
extend(ClientSpecification_Controller,ControllerObjServer);ClientSpecification_Controller.prototype.addInsert=function(){ClientSpecification_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Контрагент";var field=new FieldInt("client_id",options);pm.addField(field);var options={};var field=new FieldString("client_contract_1c_ref",options);pm.addField(field);var options={};options.alias="Объект";var field=new FieldInt("client_contract_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldDate("specification_date",options);pm.addField(field);var options={};options.alias="Договор";var field=new FieldText("contract",options);pm.addField(field);var options={};options.alias="Спецификация";var field=new FieldText("specification",options);pm.addField(field);var options={};options.alias="Марка";var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};options.alias="Объект";var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ClientSpecification_Controller.prototype.addUpdate=function(){ClientSpecification_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Контрагент";var field=new FieldInt("client_id",options);pm.addField(field);var options={};var field=new FieldString("client_contract_1c_ref",options);pm.addField(field);var options={};options.alias="Объект";var field=new FieldInt("client_contract_id",options);pm.addField(field);var options={};var field=new FieldDate("specification_date",options);pm.addField(field);var options={};options.alias="Договор";var field=new FieldText("contract",options);pm.addField(field);var options={};options.alias="Спецификация";var field=new FieldText("specification",options);pm.addField(field);var options={};options.alias="Марка";var field=new FieldInt("concrete_type_id",options);pm.addField(field);var options={};options.alias="Объект";var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);}
ClientSpecification_Controller.prototype.addDelete=function(){ClientSpecification_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ClientSpecification_Controller.prototype.addGetList=function(){ClientSpecification_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};pm.addField(new FieldString("client_ref_1c",f_opts));var f_opts={};pm.addField(new FieldDate("specification_date",f_opts));var f_opts={};f_opts.alias="Договор";pm.addField(new FieldText("contract",f_opts));var f_opts={};f_opts.alias="Спецификация";pm.addField(new FieldText("specification",f_opts));var f_opts={};pm.addField(new FieldInt("concrete_type_id",f_opts));var f_opts={};pm.addField(new FieldInt("destination_id",f_opts));var f_opts={};f_opts.alias="Контрагент";pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};f_opts.alias="Contract";pm.addField(new FieldJSON("client_contracts_1c_ref",f_opts));var f_opts={};pm.addField(new FieldInt("client_contract_1c_id",f_opts));var f_opts={};f_opts.alias="Марка";pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};f_opts.alias="Объект";pm.addField(new FieldJSON("destinations_ref",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Остаток";pm.addField(new FieldInt("quant_balance",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Сумма";pm.addField(new FieldFloat("total",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("specification_date");}
ClientSpecification_Controller.prototype.addGetObject=function(){ClientSpecification_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
ClientSpecification_Controller.prototype.add_complete_for_client=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_for_client',opts);var options={};options.required=true;pm.addField(new FieldInt("client_id",options));var options={};options.required=true;pm.addField(new FieldInt("concrete_type_id",options));var options={};options.required=true;pm.addField(new FieldInt("destination_id",options));var options={};options.maxlength="100";pm.addField(new FieldString("search",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);} 
function ClientSpecificationFlow_Controller(options){options=options||{};options.listModelClass=ClientSpecificationFlowList_Model;ClientSpecificationFlow_Controller.superclass.constructor.call(this,options);this.addGetList();}
extend(ClientSpecificationFlow_Controller,ControllerObjServer);ClientSpecificationFlow_Controller.prototype.addGetList=function(){ClientSpecificationFlow_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("client_specification_id",f_opts));var f_opts={};pm.addField(new FieldInt("shipment_id",f_opts));var f_opts={};f_opts.alias="Спецификация";pm.addField(new FieldJSON("client_specifications_ref",f_opts));var f_opts={};f_opts.alias="Отгрузка";pm.addField(new FieldJSON("shipments_ref",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));} 
function ClientSpecification_Model(options){var id='ClientSpecification_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контрагент';filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_contract_1c_ref=new FieldString("client_contract_1c_ref",filed_options);options.fields.client_contract_1c_ref.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.client_contract_id=new FieldInt("client_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.specification_date=new FieldDate("specification_date",filed_options);options.fields.specification_date.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Договор';filed_options.autoInc=false;options.fields.contract=new FieldText("contract",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Спецификация';filed_options.autoInc=false;options.fields.specification=new FieldText("specification",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');ClientSpecification_Model.superclass.constructor.call(this,id,options);}
extend(ClientSpecification_Model,ModelXML); 
function ClientSpecificationList_Model(options){var id='ClientSpecificationList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_ref_1c=new FieldString("client_ref_1c",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.specification_date=new FieldDate("specification_date",filed_options);options.fields.specification_date.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Договор';filed_options.autoInc=false;options.fields.contract=new FieldText("contract",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Спецификация';filed_options.autoInc=false;options.fields.specification=new FieldText("specification",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контрагент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Contract';filed_options.autoInc=false;options.fields.client_contracts_1c_ref=new FieldJSON("client_contracts_1c_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_contract_1c_id=new FieldInt("client_contract_1c_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Остаток';filed_options.autoInc=false;options.fields.quant_balance=new FieldInt("quant_balance",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');ClientSpecificationList_Model.superclass.constructor.call(this,id,options);}
extend(ClientSpecificationList_Model,ModelXML); 
function ClientSpecificationFlow_Model(options){var id='ClientSpecificationFlow_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Спецификация';filed_options.autoInc=false;options.fields.client_specification_id=new FieldInt("client_specification_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='Отгрузка';filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');ClientSpecificationFlow_Model.superclass.constructor.call(this,id,options);}
extend(ClientSpecificationFlow_Model,ModelXML); 
function ClientSpecificationFlowList_Model(options){var id='ClientSpecificationFlowList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.client_specification_id=new FieldInt("client_specification_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Спецификация';filed_options.autoInc=false;options.fields.client_specifications_ref=new FieldJSON("client_specifications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отгрузка';filed_options.autoInc=false;options.fields.shipments_ref=new FieldJSON("shipments_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');ClientSpecificationFlowList_Model.superclass.constructor.call(this,id,options);}
extend(ClientSpecificationFlowList_Model,ModelXML); 
function MatTotals1_Model(options){var id='MatTotals1_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_ordered=new FieldFloat("quant_ordered",filed_options);options.fields.quant_ordered.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_procured=new FieldFloat("quant_procured",filed_options);options.fields.quant_procured.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_balance=new FieldFloat("quant_balance",filed_options);options.fields.quant_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_fact_balance=new FieldFloat("quant_fact_balance",filed_options);options.fields.quant_fact_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_morn_cur_balance=new FieldFloat("quant_morn_cur_balance",filed_options);options.fields.quant_morn_cur_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_morn_fact_cur_balance=new FieldFloat("quant_morn_fact_cur_balance",filed_options);options.fields.quant_morn_fact_cur_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_morn_next_balance=new FieldFloat("quant_morn_next_balance",filed_options);options.fields.quant_morn_next_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.balance_corrected_data=new FieldJSON("balance_corrected_data",filed_options);MatTotals1_Model.superclass.constructor.call(this,id,options);}
extend(MatTotals1_Model,ModelXML); 
function MatTotals2_Model(options){var id='MatTotals2_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_ordered=new FieldFloat("quant_ordered",filed_options);options.fields.quant_ordered.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_procured=new FieldFloat("quant_procured",filed_options);options.fields.quant_procured.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_balance=new FieldFloat("quant_balance",filed_options);options.fields.quant_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_fact_balance=new FieldFloat("quant_fact_balance",filed_options);options.fields.quant_fact_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_morn_cur_balance=new FieldFloat("quant_morn_cur_balance",filed_options);options.fields.quant_morn_cur_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_morn_fact_cur_balance=new FieldFloat("quant_morn_fact_cur_balance",filed_options);options.fields.quant_morn_fact_cur_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant_morn_next_balance=new FieldFloat("quant_morn_next_balance",filed_options);options.fields.quant_morn_next_balance.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.balance_corrected_data=new FieldJSON("balance_corrected_data",filed_options);MatTotals2_Model.superclass.constructor.call(this,id,options);}
extend(MatTotals2_Model,ModelXML); 
function DestinationProdBasePrice_Controller(options){options=options||{};options.listModelClass=DestinationProdBasePriceList_Model;options.objModelClass=DestinationProdBasePriceList_Model;DestinationProdBasePrice_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DestinationProdBasePrice_Controller,ControllerObjServer);DestinationProdBasePrice_Controller.prototype.addInsert=function(){DestinationProdBasePrice_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Объект";var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="База";var field=new FieldInt("production_base_id",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DestinationProdBasePrice_Controller.prototype.addUpdate=function(){DestinationProdBasePrice_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Объект";var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="База";var field=new FieldInt("production_base_id",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);}
DestinationProdBasePrice_Controller.prototype.addDelete=function(){DestinationProdBasePrice_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
DestinationProdBasePrice_Controller.prototype.addGetList=function(){DestinationProdBasePrice_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("destination_id",f_opts));var f_opts={};pm.addField(new FieldInt("production_base_id",f_opts));var f_opts={};f_opts.alias="База";pm.addField(new FieldJSON("production_bases_ref",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));}
DestinationProdBasePrice_Controller.prototype.addGetObject=function(){DestinationProdBasePrice_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function DestinationProdBasePrice_Model(options){var id='DestinationProdBasePrice_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');DestinationProdBasePrice_Model.superclass.constructor.call(this,id,options);}
extend(DestinationProdBasePrice_Model,ModelXML); 
function DestinationProdBasePriceList_Model(options){var id='DestinationProdBasePriceList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_bases_ref=new FieldJSON("production_bases_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');DestinationProdBasePriceList_Model.superclass.constructor.call(this,id,options);}
extend(DestinationProdBasePriceList_Model,ModelXML); 
function DestinationProdBaseDriverPrice_Controller(options){options=options||{};options.listModelClass=DestinationProdBaseDriverPriceList_Model;options.objModelClass=DestinationProdBaseDriverPriceList_Model;DestinationProdBaseDriverPrice_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DestinationProdBaseDriverPrice_Controller,ControllerObjServer);DestinationProdBaseDriverPrice_Controller.prototype.addInsert=function(){DestinationProdBaseDriverPrice_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Объект";var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="База";var field=new FieldInt("production_base_id",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DestinationProdBaseDriverPrice_Controller.prototype.addUpdate=function(){DestinationProdBaseDriverPrice_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Объект";var field=new FieldInt("destination_id",options);pm.addField(field);var options={};options.alias="База";var field=new FieldInt("production_base_id",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);}
DestinationProdBaseDriverPrice_Controller.prototype.addDelete=function(){DestinationProdBaseDriverPrice_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
DestinationProdBaseDriverPrice_Controller.prototype.addGetList=function(){DestinationProdBaseDriverPrice_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("destination_id",f_opts));var f_opts={};pm.addField(new FieldInt("production_base_id",f_opts));var f_opts={};f_opts.alias="База";pm.addField(new FieldJSON("production_bases_ref",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));}
DestinationProdBaseDriverPrice_Controller.prototype.addGetObject=function(){DestinationProdBaseDriverPrice_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function DestinationProdBaseDriverPrice_Model(options){var id='DestinationProdBaseDriverPrice_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');DestinationProdBaseDriverPrice_Model.superclass.constructor.call(this,id,options);}
extend(DestinationProdBaseDriverPrice_Model,ModelXML); 
function DestinationProdBaseDriverPriceList_Model(options){var id='DestinationProdBaseDriverPriceList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_bases_ref=new FieldJSON("production_bases_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';filed_options.autoInc=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');DestinationProdBaseDriverPriceList_Model.superclass.constructor.call(this,id,options);}
extend(DestinationProdBaseDriverPriceList_Model,ModelXML); 
function OrderMakeForLabDialog_Model(options){var id='OrderMakeForLabDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);OrderMakeForLabDialog_Model.superclass.constructor.call(this,id,options);}
extend(OrderMakeForLabDialog_Model,ModelXML); 
function UserOperation_Controller(options){options=options||{};options.listModelClass=UserOperation_Model;options.objModelClass=UserOperation_Model;UserOperation_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(UserOperation_Controller,ControllerObjServer);UserOperation_Controller.prototype.addInsert=function(){UserOperation_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldString("operation_id",options);pm.addField(field);var options={};var field=new FieldText("operation",options);pm.addField(field);var options={};var field=new FieldText("status",options);pm.addField(field);var options={};var field=new FieldInt("percent",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldText("error_text",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time_end",options);pm.addField(field);}
UserOperation_Controller.prototype.addUpdate=function(){UserOperation_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("user_id",options);pm.addField(field);field=new FieldInt("old_user_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldString("operation_id",options);pm.addField(field);field=new FieldString("old_operation_id",{});pm.addField(field);var options={};var field=new FieldText("operation",options);pm.addField(field);var options={};var field=new FieldText("status",options);pm.addField(field);var options={};var field=new FieldInt("percent",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldText("error_text",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time_end",options);pm.addField(field);}
UserOperation_Controller.prototype.addDelete=function(){UserOperation_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("user_id",options));var options={"required":true};pm.addField(new FieldString("operation_id",options));}
UserOperation_Controller.prototype.addGetList=function(){UserOperation_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldString("operation_id",f_opts));var f_opts={};pm.addField(new FieldText("operation",f_opts));var f_opts={};pm.addField(new FieldText("status",f_opts));var f_opts={};pm.addField(new FieldInt("percent",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldText("error_text",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time_end",f_opts));}
UserOperation_Controller.prototype.addGetObject=function(){UserOperation_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldString("operation_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function UserOperation_Model(options){var id='UserOperation_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.operation_id=new FieldString("operation_id",filed_options);options.fields.operation_id.getValidator().setRequired(true);options.fields.operation_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.operation=new FieldText("operation",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.status=new FieldText("status",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.percent=new FieldInt("percent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.error_text=new FieldText("error_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time_end=new FieldDateTimeTZ("date_time_end",filed_options);UserOperation_Model.superclass.constructor.call(this,id,options);}
extend(UserOperation_Model,ModelXML); 
function VehicleTotRepItem_Model(options){var id='VehicleTotRepItem_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.code=new FieldInt("code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Текст запроса SQL, если задан рассчитывается автоматически';filed_options.autoInc=false;options.fields.query=new FieldText("query",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.is_income=new FieldBool("is_income",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.info=new FieldBool("info",filed_options);VehicleTotRepItem_Model.superclass.constructor.call(this,id,options);}
extend(VehicleTotRepItem_Model,ModelXML); 
function VehicleTotRepItemValue_Model(options){var id='VehicleTotRepItemValue_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.vehicle_tot_rep_item_id=new FieldInt("vehicle_tot_rep_item_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='First date of month';filed_options.autoInc=false;options.fields.period=new FieldDate("period",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Ручное значение';filed_options.autoInc=false;options.fields.value=new FieldFloat("value",filed_options);options.fields.value.getValidator().setMaxLength('15');VehicleTotRepItemValue_Model.superclass.constructor.call(this,id,options);}
extend(VehicleTotRepItemValue_Model,ModelXML); 
function VehicleTotRepItem_Controller(options){options=options||{};options.listModelClass=VehicleTotRepItemList_Model;options.objModelClass=VehicleTotRepItem_Model;VehicleTotRepItem_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(VehicleTotRepItem_Controller,ControllerObjServer);VehicleTotRepItem_Controller.prototype.addInsert=function(){VehicleTotRepItem_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("code",options);pm.addField(field);var options={};var field=new FieldText("name",options);pm.addField(field);var options={};options.alias="Текст запроса SQL, если задан рассчитывается автоматически";var field=new FieldText("query",options);pm.addField(field);var options={};var field=new FieldBool("is_income",options);pm.addField(field);var options={};var field=new FieldBool("info",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
VehicleTotRepItem_Controller.prototype.addUpdate=function(){VehicleTotRepItem_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("code",options);pm.addField(field);var options={};var field=new FieldText("name",options);pm.addField(field);var options={};options.alias="Текст запроса SQL, если задан рассчитывается автоматически";var field=new FieldText("query",options);pm.addField(field);var options={};var field=new FieldBool("is_income",options);pm.addField(field);var options={};var field=new FieldBool("info",options);pm.addField(field);}
VehicleTotRepItem_Controller.prototype.addDelete=function(){VehicleTotRepItem_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
VehicleTotRepItem_Controller.prototype.addGetList=function(){VehicleTotRepItem_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("code",f_opts));var f_opts={};pm.addField(new FieldText("name",f_opts));var f_opts={};pm.addField(new FieldBool("is_income",f_opts));var f_opts={};pm.addField(new FieldBool("info",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("is_income,code");}
VehicleTotRepItem_Controller.prototype.addGetObject=function(){VehicleTotRepItem_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function VehicleTotRepItemValue_Controller(options){options=options||{};options.listModelClass=VehicleTotRepItemValue_Model;options.objModelClass=VehicleTotRepItemValue_Model;VehicleTotRepItemValue_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_update_values();}
extend(VehicleTotRepItemValue_Controller,ControllerObjServer);VehicleTotRepItemValue_Controller.prototype.addInsert=function(){VehicleTotRepItemValue_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("vehicle_tot_rep_item_id",options);pm.addField(field);var options={};options.alias="First date of month";options.primaryKey=true;var field=new FieldDate("period",options);pm.addField(field);var options={};options.alias="Ручное значение";var field=new FieldFloat("value",options);pm.addField(field);}
VehicleTotRepItemValue_Controller.prototype.addUpdate=function(){VehicleTotRepItemValue_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("vehicle_id",options);pm.addField(field);field=new FieldInt("old_vehicle_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("vehicle_tot_rep_item_id",options);pm.addField(field);field=new FieldInt("old_vehicle_tot_rep_item_id",{});pm.addField(field);var options={};options.alias="First date of month";options.primaryKey=true;var field=new FieldDate("period",options);pm.addField(field);field=new FieldDate("old_period",{});pm.addField(field);var options={};options.alias="Ручное значение";var field=new FieldFloat("value",options);pm.addField(field);}
VehicleTotRepItemValue_Controller.prototype.addDelete=function(){VehicleTotRepItemValue_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("vehicle_id",options));var options={"required":true};pm.addField(new FieldInt("vehicle_tot_rep_item_id",options));var options={"required":true};options.alias="First date of month";pm.addField(new FieldDate("period",options));}
VehicleTotRepItemValue_Controller.prototype.addGetList=function(){VehicleTotRepItemValue_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("vehicle_id",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_tot_rep_item_id",f_opts));var f_opts={};f_opts.alias="First date of month";pm.addField(new FieldDate("period",f_opts));var f_opts={};f_opts.alias="Ручное значение";pm.addField(new FieldFloat("value",f_opts));}
VehicleTotRepItemValue_Controller.prototype.addGetObject=function(){VehicleTotRepItemValue_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("vehicle_id",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_tot_rep_item_id",f_opts));var f_opts={};f_opts.alias="First date of month";pm.addField(new FieldDate("period",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
VehicleTotRepItemValue_Controller.prototype.add_update_values=function(){var opts={"controller":this};var pm=new PublicMethodServer('update_values',opts);var options={};pm.addField(new FieldText("values",options));var options={};pm.addField(new FieldText("common_values",options));var options={};options.alias="Владелец ТС для остатка";pm.addField(new FieldInt("balance_vehicle_owner_id",options));var options={};options.alias="Периоды со значениями остатков";pm.addField(new FieldText("balance_values",options));this.addPublicMethod(pm);} 
function VehicleTotRepItemList_Model(options){var id='VehicleTotRepItemList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.code=new FieldInt("code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.is_income=new FieldBool("is_income",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.info=new FieldBool("info",filed_options);VehicleTotRepItemList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleTotRepItemList_Model,ModelXML); 
function DOCMaterialProcurementSenderNameList_Model(options){var id='DOCMaterialProcurementSenderNameList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Пункт отправления';filed_options.autoInc=false;options.fields.sender_name=new FieldString("sender_name",filed_options);DOCMaterialProcurementSenderNameList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementSenderNameList_Model,ModelXML); 
function TaskImportanceLevel_Controller(options){options=options||{};options.listModelClass=TaskImportanceLevel_Model;options.objModelClass=TaskImportanceLevel_Model;TaskImportanceLevel_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(TaskImportanceLevel_Controller,ControllerObjServer);TaskImportanceLevel_Controller.prototype.addInsert=function(){TaskImportanceLevel_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Код";options.required=true;var field=new FieldInt("code",options);pm.addField(field);var options={};options.alias="Наименование";var field=new FieldText("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
TaskImportanceLevel_Controller.prototype.addUpdate=function(){TaskImportanceLevel_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Код";var field=new FieldInt("code",options);pm.addField(field);var options={};options.alias="Наименование";var field=new FieldText("name",options);pm.addField(field);}
TaskImportanceLevel_Controller.prototype.addDelete=function(){TaskImportanceLevel_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
TaskImportanceLevel_Controller.prototype.addGetList=function(){TaskImportanceLevel_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("code",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldText("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("code");}
TaskImportanceLevel_Controller.prototype.addGetObject=function(){TaskImportanceLevel_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function TaskImportanceLevel_Model(options){var id='TaskImportanceLevel_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Код';filed_options.autoInc=false;options.fields.code=new FieldInt("code",filed_options);options.fields.code.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);TaskImportanceLevel_Model.superclass.constructor.call(this,id,options);}
extend(TaskImportanceLevel_Model,ModelXML); 
function Task_Model(options){var id='Task_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник, создавший';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Уровень важности';filed_options.autoInc=false;options.fields.task_importance_level_id=new FieldInt("task_importance_level_id",filed_options);options.fields.task_importance_level_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тема';filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.create_date_time=new FieldDateTimeTZ("create_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник для кого создали';filed_options.autoInc=false;options.fields.to_user_id=new FieldInt("to_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.till_date_time=new FieldDateTimeTZ("till_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Информировать по email';filed_options.autoInc=false;options.fields.inform_email=new FieldBool("inform_email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Информировать по sms';filed_options.autoInc=false;options.fields.inform_sms=new FieldBool("inform_sms",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Информировать по whatsup';filed_options.autoInc=false;options.fields.inform_whatsup=new FieldBool("inform_whatsup",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Информировать по telegram';filed_options.autoInc=false;options.fields.inform_telegram=new FieldBool("inform_telegram",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Содержимое';filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Просмотрена';filed_options.autoInc=false;options.fields.open_date_time=new FieldDateTimeTZ("open_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Закрыта';filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);Task_Model.superclass.constructor.call(this,id,options);}
extend(Task_Model,ModelXML); 
function Enum_inform_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;options.options=[{"value":"email","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"email"],checked:(options.defaultValue&&options.defaultValue=="email")},{"value":"telegram","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"telegram"],checked:(options.defaultValue&&options.defaultValue=="telegram")},{"value":"whatsup","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"whatsup"],checked:(options.defaultValue&&options.defaultValue=="whatsup")},{"value":"sms","descr":this.multyLangValues[window.getApp().getLocale()+"_"+"sms"],checked:(options.defaultValue&&options.defaultValue=="sms")}];Enum_inform_types.superclass.constructor.call(this,id,options);}
extend(Enum_inform_types,EditSelect);Enum_inform_types.prototype.multyLangValues={"ru_email":"Электронная почта","ru_telegram":"Telegram","ru_whatsup":"What's up","ru_sms":"СМС"}; 
function EnumGridColumn_inform_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["email"]="Электронная почта";options.multyLangValues["ru"]["telegram"]="Telegram";options.multyLangValues["ru"]["whatsup"]="What's up";options.multyLangValues["ru"]["sms"]="СМС";options.ctrlClass=options.ctrlClass||Enum_inform_types;options.searchOptions=options.searchOptions||{};options.searchOptions.searchType=options.searchOptions.searchType||"on_match";options.searchOptions.typeChange=(options.searchOptions.typeChange!=undefined)?options.searchOptions.typeChange:false;EnumGridColumn_inform_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_inform_types,GridColumnEnum); 
App.prototype.m_enums={"locales":{"ru_ru":"Русский"},"data_types":{"ru_users":"Пользователи","ru_clients":"Клиенты","ru_suppliers":"Поставщики","ru_pump_vehicles":"Насосы","ru_drivers":"Водители"},"role_types":{"ru_owner":"Администратор","ru_boss":"Руководитель","ru_operator":"Оператор","ru_manager":"Менеджер","ru_dispatcher":"Диспетчер","ru_accountant":"Бухгалтер","ru_lab_worker":"Лаборант","ru_supplies":"Снабжение","ru_sales":"Реализация","ru_plant_director":"Нач.базы","ru_supervisor":"Специалист","ru_vehicle_owner":"Владелец траспорта","ru_client":"Контрагент","ru_weighing":"Весовщик"},"unload_types":{"ru_pump":"насос","ru_band":"лента","ru_none":"нет"},"vehicle_states":{"ru_shift":"смена","ru_free":"на базе","ru_assigned":"назначен","ru_busy":"отгружен","ru_left_for_dest":"едет на объект","ru_at_dest":"на объекте","ru_left_for_base":"едет на базу","ru_out_from_shift":"сошёл со см.","ru_out":"сошёл","ru_shift_added":"доб.смена"},"sms_types":{"ru_order":"заявка","ru_ship":"отгрузка","ru_remind":"напоминание","ru_procur":"поставка","ru_order_for_pump_ins":"заявка для насоса (новая)","ru_order_for_pump_upd":"заявка для насоса (изменена)","ru_order_for_pump_del":"заявка для насоса (удалена)","ru_order_for_pump_ship":"заявка для насоса (отгружена)","ru_remind_for_pump":"напоминание для насоса","ru_client_thank":"благодарность клиенту","ru_vehicle_zone_violation":"Въезд в запрещенную зону","ru_vehicle_tracker_malfunction":"Нерабочий трекер","ru_efficiency_warn":"Низская эффективность","ru_material_balance":"Остатки материалов","ru_mixer_route":"Маршрут для миксериста","ru_order_cancel":"Отмена заявки","ru_tm_invite":"Приглашение в Telegram","ru_new_pwd":"Новый пароль"},"email_types":{"ru_new_account":"Новая учетная запись","ru_reset_pwd":"Сброс пароля пользователя"},"doc_types":{"ru_order":"Заявка","ru_material_procurement":"Поступление материалов","ru_shipment":"Отгрузка","ru_material_fact_consumption":"Фактический расход материалов","ru_material_fact_consumption_correction":"Корректировка фактического расхода материалов","ru_material_fact_balance_correction":"Корректировка остатка материала","ru_cement_silo_reset":"Обнуление силоса","ru_cement_silo_balance_reset":"Обнуление остатка силоса","ru_material_movement":"Перемещение материалов"},"reg_types":{"ru_material":"Учет материалов","ru_material_fact":"Учет материалов по факту","ru_cement":"Учет цемента","ru_material_consumption":"Расход материалов"},"call_types":{"ru_in":"Входящий","ru_out":"Исходящий"},"client_kinds":{"ru_buyer":"Клиент","ru_acc":"Бухгалтерия","ru_else":"Прочие"},"offer_results":{"ru_no":"Нет","ru_seems_no":"Наверное нет","ru_will_think":"Подумаю","ru_make_order":"Оформить заявку"},"production_plant_types":{"ru_elkon":"Elkon","ru_ammann":"Ammann"},"period_value_types":{"ru_destination_price":"Цена доставки","ru_destination_price_for_driver":"Цена для водителей","ru_demurrage_cost_per_hour":"Стоимость простоя","ru_water_ship_cost":"Стоимость доставки воды","ru_min_quant_for_ship_cost":"Минимальное количество куб для доставки"},"inform_types":{"ru_email":"Электронная почта","ru_telegram":"Telegram","ru_whatsup":"What's up","ru_sms":"СМС"}}; 
function Task_Controller(options){options=options||{};options.listModelClass=Task_Model;options.objModelClass=Task_Model;Task_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(Task_Controller,ControllerObjServer);Task_Controller.prototype.addInsert=function(){Task_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Сотрудник, создавший";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Уровень важности";options.required=true;var field=new FieldInt("task_importance_level_id",options);pm.addField(field);var options={};options.alias="Тема";var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("create_date_time",options);pm.addField(field);var options={};options.alias="Сотрудник для кого создали";var field=new FieldInt("to_user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("till_date_time",options);pm.addField(field);var options={};options.alias="Информировать по email";var field=new FieldBool("inform_email",options);pm.addField(field);var options={};options.alias="Информировать по sms";var field=new FieldBool("inform_sms",options);pm.addField(field);var options={};options.alias="Информировать по whatsup";var field=new FieldBool("inform_whatsup",options);pm.addField(field);var options={};options.alias="Информировать по telegram";var field=new FieldBool("inform_telegram",options);pm.addField(field);var options={};options.alias="Содержимое";var field=new FieldText("content",options);pm.addField(field);var options={};options.alias="Просмотрена";var field=new FieldDateTimeTZ("open_date_time",options);pm.addField(field);var options={};options.alias="Закрыта";var field=new FieldDateTimeTZ("close_date_time",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Task_Controller.prototype.addUpdate=function(){Task_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Сотрудник, создавший";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Уровень важности";var field=new FieldInt("task_importance_level_id",options);pm.addField(field);var options={};options.alias="Тема";var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("create_date_time",options);pm.addField(field);var options={};options.alias="Сотрудник для кого создали";var field=new FieldInt("to_user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("till_date_time",options);pm.addField(field);var options={};options.alias="Информировать по email";var field=new FieldBool("inform_email",options);pm.addField(field);var options={};options.alias="Информировать по sms";var field=new FieldBool("inform_sms",options);pm.addField(field);var options={};options.alias="Информировать по whatsup";var field=new FieldBool("inform_whatsup",options);pm.addField(field);var options={};options.alias="Информировать по telegram";var field=new FieldBool("inform_telegram",options);pm.addField(field);var options={};options.alias="Содержимое";var field=new FieldText("content",options);pm.addField(field);var options={};options.alias="Просмотрена";var field=new FieldDateTimeTZ("open_date_time",options);pm.addField(field);var options={};options.alias="Закрыта";var field=new FieldDateTimeTZ("close_date_time",options);pm.addField(field);}
Task_Controller.prototype.addDelete=function(){Task_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Task_Controller.prototype.addGetList=function(){Task_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Сотрудник, создавший";pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Уровень важности";pm.addField(new FieldInt("task_importance_level_id",f_opts));var f_opts={};f_opts.alias="Тема";pm.addField(new FieldText("subject",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("create_date_time",f_opts));var f_opts={};f_opts.alias="Сотрудник для кого создали";pm.addField(new FieldInt("to_user_id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("till_date_time",f_opts));var f_opts={};f_opts.alias="Информировать по email";pm.addField(new FieldBool("inform_email",f_opts));var f_opts={};f_opts.alias="Информировать по sms";pm.addField(new FieldBool("inform_sms",f_opts));var f_opts={};f_opts.alias="Информировать по whatsup";pm.addField(new FieldBool("inform_whatsup",f_opts));var f_opts={};f_opts.alias="Информировать по telegram";pm.addField(new FieldBool("inform_telegram",f_opts));var f_opts={};f_opts.alias="Содержимое";pm.addField(new FieldText("content",f_opts));var f_opts={};f_opts.alias="Просмотрена";pm.addField(new FieldDateTimeTZ("open_date_time",f_opts));var f_opts={};f_opts.alias="Закрыта";pm.addField(new FieldDateTimeTZ("close_date_time",f_opts));}
Task_Controller.prototype.addGetObject=function(){Task_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function TaskDetail_Controller(options){options=options||{};options.listModelClass=TaskDetail_Model;options.objModelClass=TaskDetail_Model;TaskDetail_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(TaskDetail_Controller,ControllerObjServer);TaskDetail_Controller.prototype.addInsert=function(){TaskDetail_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Шапка задачи";var field=new FieldInt("task_id",options);pm.addField(field);var options={};options.alias="Сотрудник";var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("create_date_time",options);pm.addField(field);var options={};options.alias="Информировать по email";var field=new FieldBool("inform_email",options);pm.addField(field);var options={};options.alias="Информировать по sms";var field=new FieldBool("inform_sms",options);pm.addField(field);var options={};options.alias="Информировать по whatsup";var field=new FieldBool("inform_whatsup",options);pm.addField(field);var options={};options.alias="Информировать по telegram";var field=new FieldBool("inform_telegram",options);pm.addField(field);var options={};options.alias="Содержимое";var field=new FieldText("content",options);pm.addField(field);var options={};options.alias="Просмотрена";var field=new FieldDateTimeTZ("open_date_time",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
TaskDetail_Controller.prototype.addUpdate=function(){TaskDetail_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Шапка задачи";var field=new FieldInt("task_id",options);pm.addField(field);var options={};options.alias="Сотрудник";var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("create_date_time",options);pm.addField(field);var options={};options.alias="Информировать по email";var field=new FieldBool("inform_email",options);pm.addField(field);var options={};options.alias="Информировать по sms";var field=new FieldBool("inform_sms",options);pm.addField(field);var options={};options.alias="Информировать по whatsup";var field=new FieldBool("inform_whatsup",options);pm.addField(field);var options={};options.alias="Информировать по telegram";var field=new FieldBool("inform_telegram",options);pm.addField(field);var options={};options.alias="Содержимое";var field=new FieldText("content",options);pm.addField(field);var options={};options.alias="Просмотрена";var field=new FieldDateTimeTZ("open_date_time",options);pm.addField(field);}
TaskDetail_Controller.prototype.addDelete=function(){TaskDetail_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
TaskDetail_Controller.prototype.addGetList=function(){TaskDetail_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Шапка задачи";pm.addField(new FieldInt("task_id",f_opts));var f_opts={};f_opts.alias="Сотрудник";pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("create_date_time",f_opts));var f_opts={};f_opts.alias="Информировать по email";pm.addField(new FieldBool("inform_email",f_opts));var f_opts={};f_opts.alias="Информировать по sms";pm.addField(new FieldBool("inform_sms",f_opts));var f_opts={};f_opts.alias="Информировать по whatsup";pm.addField(new FieldBool("inform_whatsup",f_opts));var f_opts={};f_opts.alias="Информировать по telegram";pm.addField(new FieldBool("inform_telegram",f_opts));var f_opts={};f_opts.alias="Содержимое";pm.addField(new FieldText("content",f_opts));var f_opts={};f_opts.alias="Просмотрена";pm.addField(new FieldDateTimeTZ("open_date_time",f_opts));}
TaskDetail_Controller.prototype.addGetObject=function(){TaskDetail_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function Attachment_Model(options){var id='Attachment_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ref=new FieldJSONB("ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content_info=new FieldJSONB("content_info",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content_data=new FieldBytea("content_data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content_preview=new FieldBytea("content_preview",filed_options);Attachment_Model.superclass.constructor.call(this,id,options);}
extend(Attachment_Model,ModelXML); 
function AttachmentList_Model(options){var id='AttachmentList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ref=new FieldJSONB("ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content_info=new FieldJSONB("content_info",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content_preview=new FieldString("content_preview",filed_options);AttachmentList_Model.superclass.constructor.call(this,id,options);}
extend(AttachmentList_Model,ModelXML); 
function TaskDetail_Model(options){var id='TaskDetail_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Шапка задачи';filed_options.autoInc=false;options.fields.task_id=new FieldInt("task_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.create_date_time=new FieldDateTimeTZ("create_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Информировать по email';filed_options.autoInc=false;options.fields.inform_email=new FieldBool("inform_email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Информировать по sms';filed_options.autoInc=false;options.fields.inform_sms=new FieldBool("inform_sms",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Информировать по whatsup';filed_options.autoInc=false;options.fields.inform_whatsup=new FieldBool("inform_whatsup",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Информировать по telegram';filed_options.autoInc=false;options.fields.inform_telegram=new FieldBool("inform_telegram",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Содержимое';filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Просмотрена';filed_options.autoInc=false;options.fields.open_date_time=new FieldDateTimeTZ("open_date_time",filed_options);TaskDetail_Model.superclass.constructor.call(this,id,options);}
extend(TaskDetail_Model,ModelXML); 
function Attachment_Controller(options){options=options||{};Attachment_Controller.superclass.constructor.call(this,options);this.add_delete_file();this.add_get_file();this.add_add_file();}
extend(Attachment_Controller,ControllerObjServer);Attachment_Controller.prototype.add_delete_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_file',opts);var options={};options.required=true;pm.addField(new FieldString("ref",options));var options={};options.required=true;pm.addField(new FieldString("content_id",options));this.addPublicMethod(pm);}
Attachment_Controller.prototype.add_get_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file',opts);var options={};options.required=true;pm.addField(new FieldString("ref",options));var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("content_id",options));var options={};pm.addField(new FieldInt("inline",options));this.addPublicMethod(pm);}
Attachment_Controller.prototype.add_add_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('add_file',opts);pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.required=true;pm.addField(new FieldString("ref",options));var options={};pm.addField(new FieldText("content_data",options));var options={};options.required=true;options.maxlength="500";pm.addField(new FieldString("content_info",options));this.addPublicMethod(pm);} 
function TaskList_Model(options){var id='TaskList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник, создавший';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user_id=new FieldInt("to_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник для кого создали';filed_options.autoInc=false;options.fields.to_users_ref=new FieldJSON("to_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.task_importance_level_id=new FieldInt("task_importance_level_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Уровень важности';filed_options.autoInc=false;options.fields.task_importance_levels_ref=new FieldJSON("task_importance_levels_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тема';filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.create_date_time=new FieldDateTimeTZ("create_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.till_date_time=new FieldDateTimeTZ("till_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Просмотрена';filed_options.autoInc=false;options.fields.open_date_time=new FieldDateTimeTZ("open_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Закрыта';filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);TaskList_Model.superclass.constructor.call(this,id,options);}
extend(TaskList_Model,ModelXML); 
function TaskDialog_Model(options){var id='TaskDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник, создавший';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user_id=new FieldInt("to_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник для кого создали';filed_options.autoInc=false;options.fields.to_users_ref=new FieldJSON("to_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.task_importance_level_id=new FieldInt("task_importance_level_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Уровень важности';filed_options.autoInc=false;options.fields.task_importance_levels_ref=new FieldJSON("task_importance_levels_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тема';filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.create_date_time=new FieldDateTimeTZ("create_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.till_date_time=new FieldDateTimeTZ("till_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Просмотрена';filed_options.autoInc=false;options.fields.open_date_time=new FieldDateTimeTZ("open_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Закрыта';filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.attachments_list=new FieldJSON("attachments_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Содержимое';filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);TaskDialog_Model.superclass.constructor.call(this,id,options);}
extend(TaskDialog_Model,ModelXML); 
function ProgUpdate_Model(options){var id='ProgUpdate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.create_date_time=new FieldDateTimeTZ("create_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.release=new FieldString("release",filed_options);options.fields.release.getValidator().setMaxLength('30');ProgUpdate_Model.superclass.constructor.call(this,id,options);}
extend(ProgUpdate_Model,ModelXML); 
function ProgUpdateDetail_Model(options){var id='ProgUpdateDetail_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Код сортирвки';filed_options.autoInc=false;options.fields.code=new FieldInt("code",filed_options);options.fields.code.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Обновление';filed_options.autoInc=false;options.fields.prog_update_id=new FieldInt("prog_update_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание';filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Техническое описание';filed_options.autoInc=false;options.fields.description_tech=new FieldText("description_tech",filed_options);ProgUpdateDetail_Model.superclass.constructor.call(this,id,options);}
extend(ProgUpdateDetail_Model,ModelXML); 
function ProgUpdate_Controller(options){options=options||{};options.listModelClass=ProgUpdate_Model;options.objModelClass=ProgUpdate_Model;ProgUpdate_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ProgUpdate_Controller,ControllerObjServer);ProgUpdate_Controller.prototype.addInsert=function(){ProgUpdate_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Сотрудник";var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("create_date_time",options);pm.addField(field);var options={};var field=new FieldString("release",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ProgUpdate_Controller.prototype.addUpdate=function(){ProgUpdate_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Сотрудник";var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("create_date_time",options);pm.addField(field);var options={};var field=new FieldString("release",options);pm.addField(field);}
ProgUpdate_Controller.prototype.addDelete=function(){ProgUpdate_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ProgUpdate_Controller.prototype.addGetList=function(){ProgUpdate_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Сотрудник";pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("create_date_time",f_opts));var f_opts={};pm.addField(new FieldString("release",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("release");}
ProgUpdate_Controller.prototype.addGetObject=function(){ProgUpdate_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ProgUpdateDetail_Controller(options){options=options||{};options.listModelClass=ProgUpdateDetail_Model;options.objModelClass=ProgUpdateDetail_Model;ProgUpdateDetail_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_for_user();}
extend(ProgUpdateDetail_Controller,ControllerObjServer);ProgUpdateDetail_Controller.prototype.addInsert=function(){ProgUpdateDetail_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Код сортирвки";options.required=true;var field=new FieldInt("code",options);pm.addField(field);var options={};options.alias="Обновление";var field=new FieldInt("prog_update_id",options);pm.addField(field);var options={};options.alias="Описание";var field=new FieldText("description",options);pm.addField(field);var options={};options.alias="Техническое описание";var field=new FieldText("description_tech",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ProgUpdateDetail_Controller.prototype.addUpdate=function(){ProgUpdateDetail_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Код сортирвки";var field=new FieldInt("code",options);pm.addField(field);var options={};options.alias="Обновление";var field=new FieldInt("prog_update_id",options);pm.addField(field);var options={};options.alias="Описание";var field=new FieldText("description",options);pm.addField(field);var options={};options.alias="Техническое описание";var field=new FieldText("description_tech",options);pm.addField(field);}
ProgUpdateDetail_Controller.prototype.addDelete=function(){ProgUpdateDetail_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ProgUpdateDetail_Controller.prototype.addGetList=function(){ProgUpdateDetail_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Код сортирвки";pm.addField(new FieldInt("code",f_opts));var f_opts={};f_opts.alias="Обновление";pm.addField(new FieldInt("prog_update_id",f_opts));var f_opts={};f_opts.alias="Описание";pm.addField(new FieldText("description",f_opts));var f_opts={};f_opts.alias="Техническое описание";pm.addField(new FieldText("description_tech",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("code");}
ProgUpdateDetail_Controller.prototype.addGetObject=function(){ProgUpdateDetail_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
ProgUpdateDetail_Controller.prototype.add_get_for_user=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_for_user',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);} 
function VehicleTotRepCommonItem_Model(options){var id='VehicleTotRepCommonItem_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.code=new FieldInt("code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.is_income=new FieldBool("is_income",filed_options);VehicleTotRepCommonItem_Model.superclass.constructor.call(this,id,options);}
extend(VehicleTotRepCommonItem_Model,ModelXML); 
function VehicleTotRepCommonItemList_Model(options){var id='VehicleTotRepCommonItemList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.code=new FieldInt("code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.is_income=new FieldBool("is_income",filed_options);VehicleTotRepCommonItemList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleTotRepCommonItemList_Model,ModelXML); 
function VehicleTotRepCommonItemValue_Model(options){var id='VehicleTotRepCommonItemValue_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.vehicle_tot_rep_common_item_id=new FieldInt("vehicle_tot_rep_common_item_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='First date of month';filed_options.autoInc=false;options.fields.period=new FieldDate("period",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Ручное значение';filed_options.autoInc=false;options.fields.value=new FieldFloat("value",filed_options);VehicleTotRepCommonItemValue_Model.superclass.constructor.call(this,id,options);}
extend(VehicleTotRepCommonItemValue_Model,ModelXML); 
function VehicleTotRepCommonItem_Controller(options){options=options||{};options.listModelClass=VehicleTotRepCommonItemList_Model;options.objModelClass=VehicleTotRepCommonItemList_Model;VehicleTotRepCommonItem_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(VehicleTotRepCommonItem_Controller,ControllerObjServer);VehicleTotRepCommonItem_Controller.prototype.addInsert=function(){VehicleTotRepCommonItem_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("code",options);pm.addField(field);var options={};var field=new FieldText("name",options);pm.addField(field);var options={};var field=new FieldBool("is_income",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
VehicleTotRepCommonItem_Controller.prototype.addUpdate=function(){VehicleTotRepCommonItem_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("code",options);pm.addField(field);var options={};var field=new FieldText("name",options);pm.addField(field);var options={};var field=new FieldBool("is_income",options);pm.addField(field);}
VehicleTotRepCommonItem_Controller.prototype.addDelete=function(){VehicleTotRepCommonItem_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
VehicleTotRepCommonItem_Controller.prototype.addGetList=function(){VehicleTotRepCommonItem_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("code",f_opts));var f_opts={};pm.addField(new FieldText("name",f_opts));var f_opts={};pm.addField(new FieldBool("is_income",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("is_income,code");}
VehicleTotRepCommonItem_Controller.prototype.addGetObject=function(){VehicleTotRepCommonItem_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function VehicleTotRepCommonItemValue_Controller(options){options=options||{};options.listModelClass=VehicleTotRepCommonItemValue_Model;options.objModelClass=VehicleTotRepCommonItemValue_Model;VehicleTotRepCommonItemValue_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_update_values();}
extend(VehicleTotRepCommonItemValue_Controller,ControllerObjServer);VehicleTotRepCommonItemValue_Controller.prototype.addInsert=function(){VehicleTotRepCommonItemValue_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("vehicle_owner_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("vehicle_tot_rep_common_item_id",options);pm.addField(field);var options={};options.alias="First date of month";options.primaryKey=true;var field=new FieldDate("period",options);pm.addField(field);var options={};options.alias="Ручное значение";var field=new FieldFloat("value",options);pm.addField(field);}
VehicleTotRepCommonItemValue_Controller.prototype.addUpdate=function(){VehicleTotRepCommonItemValue_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("vehicle_owner_id",options);pm.addField(field);field=new FieldInt("old_vehicle_owner_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("vehicle_tot_rep_common_item_id",options);pm.addField(field);field=new FieldInt("old_vehicle_tot_rep_common_item_id",{});pm.addField(field);var options={};options.alias="First date of month";options.primaryKey=true;var field=new FieldDate("period",options);pm.addField(field);field=new FieldDate("old_period",{});pm.addField(field);var options={};options.alias="Ручное значение";var field=new FieldFloat("value",options);pm.addField(field);}
VehicleTotRepCommonItemValue_Controller.prototype.addDelete=function(){VehicleTotRepCommonItemValue_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("vehicle_owner_id",options));var options={"required":true};pm.addField(new FieldInt("vehicle_tot_rep_common_item_id",options));var options={"required":true};options.alias="First date of month";pm.addField(new FieldDate("period",options));}
VehicleTotRepCommonItemValue_Controller.prototype.addGetList=function(){VehicleTotRepCommonItemValue_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("vehicle_owner_id",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_tot_rep_common_item_id",f_opts));var f_opts={};f_opts.alias="First date of month";pm.addField(new FieldDate("period",f_opts));var f_opts={};f_opts.alias="Ручное значение";pm.addField(new FieldFloat("value",f_opts));}
VehicleTotRepCommonItemValue_Controller.prototype.addGetObject=function(){VehicleTotRepCommonItemValue_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("vehicle_owner_id",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_tot_rep_common_item_id",f_opts));var f_opts={};f_opts.alias="First date of month";pm.addField(new FieldDate("period",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
VehicleTotRepCommonItemValue_Controller.prototype.add_update_values=function(){var opts={"controller":this};var pm=new PublicMethodServer('update_values',opts);var options={};pm.addField(new FieldText("values",options));this.addPublicMethod(pm);} 
function VehicleTotRepBalance_Controller(options){options=options||{};options.listModelClass=VehicleTotRepBalanceList_Model;options.objModelClass=VehicleTotRepBalanceList_Model;VehicleTotRepBalance_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(VehicleTotRepBalance_Controller,ControllerObjServer);VehicleTotRepBalance_Controller.prototype.addInsert=function(){VehicleTotRepBalance_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("vehicle_owner_id",options);pm.addField(field);var options={};options.alias="First date of month";options.primaryKey=true;var field=new FieldDate("period",options);pm.addField(field);var options={};options.alias="Ручное значение";var field=new FieldFloat("value",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
VehicleTotRepBalance_Controller.prototype.addUpdate=function(){VehicleTotRepBalance_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("vehicle_owner_id",options);pm.addField(field);field=new FieldInt("old_vehicle_owner_id",{});pm.addField(field);var options={};options.alias="First date of month";options.primaryKey=true;var field=new FieldDate("period",options);pm.addField(field);field=new FieldDate("old_period",{});pm.addField(field);var options={};options.alias="Ручное значение";var field=new FieldFloat("value",options);pm.addField(field);}
VehicleTotRepBalance_Controller.prototype.addDelete=function(){VehicleTotRepBalance_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));var options={"required":true};pm.addField(new FieldInt("vehicle_owner_id",options));var options={"required":true};options.alias="First date of month";pm.addField(new FieldDate("period",options));}
VehicleTotRepBalance_Controller.prototype.addGetList=function(){VehicleTotRepBalance_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_owner_id",f_opts));var f_opts={};f_opts.alias="First date of month";pm.addField(new FieldDate("period",f_opts));var f_opts={};f_opts.alias="Собственник";pm.addField(new FieldJSON("vehicle_owners_ref",f_opts));var f_opts={};f_opts.alias="Ручное значение";pm.addField(new FieldFloat("value",f_opts));}
VehicleTotRepBalance_Controller.prototype.addGetObject=function(){VehicleTotRepBalance_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("vehicle_owner_id",f_opts));var f_opts={};f_opts.alias="First date of month";pm.addField(new FieldDate("period",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function VehicleTotRepBalance_Model(options){var id='VehicleTotRepBalance_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='First date of month';filed_options.autoInc=false;options.fields.period=new FieldDate("period",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Ручное значение';filed_options.autoInc=false;options.fields.value=new FieldFloat("value",filed_options);options.fields.value.getValidator().setMaxLength('15');VehicleTotRepBalance_Model.superclass.constructor.call(this,id,options);}
extend(VehicleTotRepBalance_Model,ModelXML); 
function VehicleTotRepBalanceList_Model(options){var id='VehicleTotRepBalanceList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.vehicle_owner_id=new FieldInt("vehicle_owner_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='First date of month';filed_options.autoInc=false;options.fields.period=new FieldDate("period",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Собственник';filed_options.autoInc=false;options.fields.vehicle_owners_ref=new FieldJSON("vehicle_owners_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Ручное значение';filed_options.autoInc=false;options.fields.value=new FieldFloat("value",filed_options);options.fields.value.getValidator().setMaxLength('15');VehicleTotRepBalanceList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleTotRepBalanceList_Model,ModelXML); 
function QualityPassport_Model(options){var id='QualityPassport_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='F';filed_options.autoInc=false;options.fields.f_val=new FieldInt("f_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='W';filed_options.autoInc=false;options.fields.w_val=new FieldInt("w_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Гост вида смеси';filed_options.autoInc=false;options.fields.vid_smesi_gost=new FieldText("vid_smesi_gost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Место укладки';filed_options.autoInc=false;options.fields.uklad=new FieldText("uklad",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sohran_udobouklad=new FieldText("sohran_udobouklad",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kf_prochnosti=new FieldText("kf_prochnosti",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.prochnost=new FieldInt("prochnost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.naim_dobavki=new FieldText("naim_dobavki",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.aeff=new FieldText("aeff",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.krupnost=new FieldText("krupnost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vidan=new FieldDate("vidan",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.smes_num=new FieldText("smes_num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_nomer_dekl=new FieldText("reg_nomer_dekl",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);QualityPassport_Model.superclass.constructor.call(this,id,options);}
extend(QualityPassport_Model,ModelXML); 
function QualityPassport_Controller(options){options=options||{};options.listModelClass=QualityPassportList_Model;options.objModelClass=QualityPassport_Model;QualityPassport_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_object_or_last();this.add_complete_vid_smesi_gost();this.add_complete_uklad();this.add_complete_sohran_udobouklad();this.add_complete_kf_prochnosti();this.add_complete_prochnost();this.add_complete_naim_dobavki();this.add_complete_aeff();this.add_complete_krupnost();this.add_complete_reg_nomer_dekl();}
extend(QualityPassport_Controller,ControllerObjServer);QualityPassport_Controller.prototype.addInsert=function(){QualityPassport_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="F";var field=new FieldInt("f_val",options);pm.addField(field);var options={};options.alias="W";var field=new FieldInt("w_val",options);pm.addField(field);var options={};options.alias="Гост вида смеси";var field=new FieldText("vid_smesi_gost",options);pm.addField(field);var options={};options.alias="Место укладки";var field=new FieldText("uklad",options);pm.addField(field);var options={};var field=new FieldText("sohran_udobouklad",options);pm.addField(field);var options={};var field=new FieldText("kf_prochnosti",options);pm.addField(field);var options={};var field=new FieldInt("prochnost",options);pm.addField(field);var options={};var field=new FieldText("naim_dobavki",options);pm.addField(field);var options={};var field=new FieldText("aeff",options);pm.addField(field);var options={};var field=new FieldText("krupnost",options);pm.addField(field);var options={};var field=new FieldDate("vidan",options);pm.addField(field);var options={};var field=new FieldInt("shipment_id",options);pm.addField(field);var options={};var field=new FieldText("smes_num",options);pm.addField(field);var options={};var field=new FieldInt("order_id",options);pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);var options={};var field=new FieldText("reg_nomer_dekl",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
QualityPassport_Controller.prototype.addUpdate=function(){QualityPassport_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="F";var field=new FieldInt("f_val",options);pm.addField(field);var options={};options.alias="W";var field=new FieldInt("w_val",options);pm.addField(field);var options={};options.alias="Гост вида смеси";var field=new FieldText("vid_smesi_gost",options);pm.addField(field);var options={};options.alias="Место укладки";var field=new FieldText("uklad",options);pm.addField(field);var options={};var field=new FieldText("sohran_udobouklad",options);pm.addField(field);var options={};var field=new FieldText("kf_prochnosti",options);pm.addField(field);var options={};var field=new FieldInt("prochnost",options);pm.addField(field);var options={};var field=new FieldText("naim_dobavki",options);pm.addField(field);var options={};var field=new FieldText("aeff",options);pm.addField(field);var options={};var field=new FieldText("krupnost",options);pm.addField(field);var options={};var field=new FieldDate("vidan",options);pm.addField(field);var options={};var field=new FieldInt("shipment_id",options);pm.addField(field);var options={};var field=new FieldText("smes_num",options);pm.addField(field);var options={};var field=new FieldInt("order_id",options);pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);var options={};var field=new FieldText("reg_nomer_dekl",options);pm.addField(field);}
QualityPassport_Controller.prototype.addDelete=function(){QualityPassport_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
QualityPassport_Controller.prototype.addGetList=function(){QualityPassport_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="F";pm.addField(new FieldInt("f_val",f_opts));var f_opts={};f_opts.alias="W";pm.addField(new FieldInt("w_val",f_opts));var f_opts={};f_opts.alias="Гост вида смеси";pm.addField(new FieldText("vid_smesi_gost",f_opts));var f_opts={};f_opts.alias="Место укладки";pm.addField(new FieldText("uklad",f_opts));var f_opts={};pm.addField(new FieldText("sohran_udobouklad",f_opts));var f_opts={};pm.addField(new FieldText("kf_prochnosti",f_opts));var f_opts={};pm.addField(new FieldInt("prochnost",f_opts));var f_opts={};pm.addField(new FieldText("naim_dobavki",f_opts));var f_opts={};pm.addField(new FieldText("aeff",f_opts));var f_opts={};pm.addField(new FieldInt("krupnost",f_opts));var f_opts={};pm.addField(new FieldDate("vidan",f_opts));var f_opts={};pm.addField(new FieldText("smes_num",f_opts));var f_opts={};pm.addField(new FieldJSON("orders_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("shipments_list",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("vidan");}
QualityPassport_Controller.prototype.addGetObject=function(){QualityPassport_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
QualityPassport_Controller.prototype.add_get_object_or_last=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_object_or_last',opts);var options={};options.required=true;pm.addField(new FieldInt("shipment_id",options));this.addPublicMethod(pm);}
QualityPassport_Controller.prototype.add_complete_vid_smesi_gost=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_vid_smesi_gost',opts);var options={};pm.addField(new FieldText("vid_smesi_gost",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);}
QualityPassport_Controller.prototype.add_complete_uklad=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_uklad',opts);var options={};pm.addField(new FieldText("uklad",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);}
QualityPassport_Controller.prototype.add_complete_sohran_udobouklad=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_sohran_udobouklad',opts);var options={};pm.addField(new FieldText("sohran_udobouklad",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);}
QualityPassport_Controller.prototype.add_complete_kf_prochnosti=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_kf_prochnosti',opts);var options={};pm.addField(new FieldText("kf_prochnosti",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);}
QualityPassport_Controller.prototype.add_complete_prochnost=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_prochnost',opts);var options={};pm.addField(new FieldInt("prochnost",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);}
QualityPassport_Controller.prototype.add_complete_naim_dobavki=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_naim_dobavki',opts);var options={};pm.addField(new FieldText("naim_dobavki",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);}
QualityPassport_Controller.prototype.add_complete_aeff=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_aeff',opts);var options={};pm.addField(new FieldText("aeff",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);}
QualityPassport_Controller.prototype.add_complete_krupnost=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_krupnost',opts);var options={};pm.addField(new FieldInt("krupnost",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);}
QualityPassport_Controller.prototype.add_complete_reg_nomer_dekl=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_reg_nomer_dekl',opts);var options={};pm.addField(new FieldInt("reg_nomer_dekl",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));var options={};pm.addField(new FieldInt("count",options));this.addPublicMethod(pm);} 
function Client1c_Controller(options){options=options||{};Client1c_Controller.superclass.constructor.call(this,options);this.addComplete();this.add_get_leasor_on_pp();}
extend(Client1c_Controller,ControllerObjServer);Client1c_Controller.prototype.addComplete=function(){Client1c_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldText("search",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("search");}
Client1c_Controller.prototype.add_get_leasor_on_pp=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_leasor_on_pp',opts);var options={};options.maxlength="20";pm.addField(new FieldString("pp_num",options));this.addPublicMethod(pm);} 
function Client1cList_Model(options){var id='Client1cList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.search=new FieldText("search",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ref=new FieldJSON("ref",filed_options);Client1cList_Model.superclass.constructor.call(this,id,options);}
extend(Client1cList_Model,ModelXML); 
function Firm1c_Model(options){var id='Firm1c_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Ссылка на справочник 1с';filed_options.autoInc=false;options.fields.ref_1c=new FieldJSONB("ref_1c",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ИНН';filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);options.fields.inn.getValidator().setMaxLength('12');Firm1c_Model.superclass.constructor.call(this,id,options);}
extend(Firm1c_Model,ModelXML); 
function Firm1cList_Model(options){var id='Firm1cList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);options.fields.inn.getValidator().setMaxLength('12');Firm1cList_Model.superclass.constructor.call(this,id,options);}
extend(Firm1cList_Model,ModelXML); 
function Firm1c_Controller(options){options=options||{};options.listModelClass=Firm1cList_Model;options.objModelClass=Firm1cList_Model;Firm1c_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();}
extend(Firm1c_Controller,ControllerObjServer);Firm1c_Controller.prototype.addGetList=function(){Firm1c_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldText("descr",f_opts));var f_opts={};pm.addField(new FieldString("inn",f_opts));}
Firm1c_Controller.prototype.addGetObject=function(){Firm1c_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ClientDebtList_Model(options){var id='ClientDebtList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.firm_id=new FieldInt("firm_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.firms_ref=new FieldJSON("firms_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.debt_total=new FieldFloat("debt_total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.update_date=new FieldDate("update_date",filed_options);ClientDebtList_Model.superclass.constructor.call(this,id,options);}
extend(ClientDebtList_Model,ModelXML); 
function ClientDebt_Controller(options){options=options||{};options.listModelClass=ClientDebtList_Model;options.objModelClass=ClientDebtList_Model;ClientDebt_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();this.add_update_from_1c();}
extend(ClientDebt_Controller,ControllerObjServer);ClientDebt_Controller.prototype.addGetList=function(){ClientDebt_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("firm_id",f_opts));var f_opts={};pm.addField(new FieldJSON("firms_ref",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};pm.addField(new FieldInt("client_contract_id",f_opts));var f_opts={};pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("client_contracts_ref",f_opts));var f_opts={};pm.addField(new FieldFloat("debt_total",f_opts));var f_opts={};pm.addField(new FieldDate("update_date",f_opts));}
ClientDebt_Controller.prototype.addGetObject=function(){ClientDebt_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
ClientDebt_Controller.prototype.add_update_from_1c=function(){var opts={"controller":this};var pm=new PublicMethodServer('update_from_1c',opts);this.addPublicMethod(pm);} 
function QualityPassportList_Model(options){var id='QualityPassportList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.num=new FieldString("num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='F';filed_options.autoInc=false;options.fields.f_val=new FieldInt("f_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='W';filed_options.autoInc=false;options.fields.w_val=new FieldInt("w_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Гост вида смеси';filed_options.autoInc=false;options.fields.vid_smesi_gost=new FieldText("vid_smesi_gost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Место укладки';filed_options.autoInc=false;options.fields.uklad=new FieldText("uklad",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sohran_udobouklad=new FieldText("sohran_udobouklad",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kf_prochnosti=new FieldText("kf_prochnosti",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.prochnost=new FieldInt("prochnost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.naim_dobavki=new FieldText("naim_dobavki",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.aeff=new FieldText("aeff",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.krupnost=new FieldInt("krupnost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vidan=new FieldDate("vidan",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.smes_num=new FieldText("smes_num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.orders_ref=new FieldJSON("orders_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipments_list=new FieldJSON("shipments_list",filed_options);QualityPassportList_Model.superclass.constructor.call(this,id,options);}
extend(QualityPassportList_Model,ModelXML); 
function ShipmentMedia_Model(options){var id='ShipmentMedia_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);options.fields.driver_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.message_id=new FieldInt("message_id",filed_options);ShipmentMedia_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentMedia_Model,ModelXML); 
function ShipmentMedia_Controller(options){options=options||{};options.listModelClass=ShipmentMediaList_Model;options.objModelClass=ShipmentMediaList_Model;ShipmentMedia_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();}
extend(ShipmentMedia_Controller,ControllerObjServer);ShipmentMedia_Controller.prototype.addGetList=function(){ShipmentMedia_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("driver_id",f_opts));var f_opts={};pm.addField(new FieldJSON("drivers_ref",f_opts));var f_opts={};pm.addField(new FieldInt("shipment_id",f_opts));var f_opts={};pm.addField(new FieldJSON("shipments_ref",f_opts));var f_opts={};pm.addField(new FieldInt("order_id",f_opts));var f_opts={};pm.addField(new FieldJSON("orders_ref",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldJSONB("message",f_opts));}
ShipmentMedia_Controller.prototype.addGetObject=function(){ShipmentMedia_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ShipmentMediaList_Model(options){var id='ShipmentMediaList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSON("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipment_id=new FieldInt("shipment_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipments_ref=new FieldJSON("shipments_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.orders_ref=new FieldJSON("orders_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.message=new FieldJSONB("message",filed_options);ShipmentMediaList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentMediaList_Model,ModelXML); 
function ChatStatus_Model(options){var id='ChatStatus_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('250');ChatStatus_Model.superclass.constructor.call(this,id,options);}
extend(ChatStatus_Model,ModelXML); 
function ChatStatus_Controller(options){options=options||{};options.listModelClass=ChatStatus_Model;options.objModelClass=ChatStatus_Model;ChatStatus_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ChatStatus_Controller,ControllerObjServer);ChatStatus_Controller.prototype.addInsert=function(){ChatStatus_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ChatStatus_Controller.prototype.addUpdate=function(){ChatStatus_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
ChatStatus_Controller.prototype.addDelete=function(){ChatStatus_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ChatStatus_Controller.prototype.addGetList=function(){ChatStatus_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));}
ChatStatus_Controller.prototype.addGetObject=function(){ChatStatus_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function UserChatStatus_Controller(options){options=options||{};UserChatStatus_Controller.superclass.constructor.call(this,options);this.add_set();this.add_get_select_list();}
extend(UserChatStatus_Controller,ControllerObjServer);UserChatStatus_Controller.prototype.add_set=function(){var opts={"controller":this};var pm=new PublicMethodServer('set',opts);var options={};pm.addField(new FieldInt("chat_status_id",options));this.addPublicMethod(pm);}
UserChatStatus_Controller.prototype.add_get_select_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_select_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));this.addPublicMethod(pm);} 
function UserChatStatusSelectList_Model(options){var id='UserChatStatusSelectList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.is_user_chat_status=new FieldBool("is_user_chat_status",filed_options);UserChatStatusSelectList_Model.superclass.constructor.call(this,id,options);}
extend(UserChatStatusSelectList_Model,ModelXML); 
function UserChatStatus_Model(options){var id='UserChatStatus_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.chat_status_id=new FieldInt("chat_status_id",filed_options);UserChatStatus_Model.superclass.constructor.call(this,id,options);}
extend(UserChatStatus_Model,ModelXML); 
function UserChat_Controller(options){options=options||{};options.objModelClass=UserChat_Model;UserChat_Controller.superclass.constructor.call(this,options);this.addGetObject();this.add_get_user_list();this.add_send();this.add_send_media();this.add_get_history();}
extend(UserChat_Controller,ControllerObjServer);UserChat_Controller.prototype.addGetObject=function(){UserChat_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
UserChat_Controller.prototype.add_get_user_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_user_list',opts);this.addPublicMethod(pm);}
UserChat_Controller.prototype.add_send=function(){var opts={"controller":this};var pm=new PublicMethodServer('send',opts);var options={};pm.addField(new FieldText("recipient",options));var options={};options.required=true;options.maxlength="1000";pm.addField(new FieldString("message",options));this.addPublicMethod(pm);}
UserChat_Controller.prototype.add_send_media=function(){var opts={"controller":this};var pm=new PublicMethodServer('send_media',opts);pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};pm.addField(new FieldText("recipient",options));var options={};options.maxlength="1000";pm.addField(new FieldString("caption",options));var options={};pm.addField(new FieldText("media_file",options));this.addPublicMethod(pm);}
UserChat_Controller.prototype.add_get_history=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_history',opts);var options={};pm.addField(new FieldText("recipient",options));this.addPublicMethod(pm);} 
function UserChatList_Model(options){var id='UserChatList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователm ФИО';filed_options.autoInc=false;options.fields.name_short=new FieldString("name_short",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Статус';filed_options.autoInc=false;options.fields.chat_statuses_ref=new FieldJSON("chat_statuses_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Роль';filed_options.autoInc=false;options.fields.role_id=new FieldString("role_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='В сети';filed_options.autoInc=false;options.fields.is_online=new FieldBool("is_online",filed_options);UserChatList_Model.superclass.constructor.call(this,id,options);}
extend(UserChatList_Model,ModelXML); 
function UserChat_Model(options){var id='UserChat_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_user_id=new FieldInt("from_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user_id=new FieldInt("to_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.media_type=new FieldText("media_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.message=new FieldJSONB("message",filed_options);UserChat_Model.superclass.constructor.call(this,id,options);}
extend(UserChat_Model,ModelXML); 
function UserChatMessage_Controller(options){options=options||{};options.listModelClass=UserChatMessage_Model;options.objModelClass=UserChatMessage_Model;UserChatMessage_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(UserChatMessage_Controller,ControllerObjServer);UserChatMessage_Controller.prototype.addInsert=function(){UserChatMessage_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldJSONB("from_user",options);pm.addField(field);var options={};var field=new FieldJSONB("to_user",options);pm.addField(field);var options={};var field=new FieldText("media_type",options);pm.addField(field);var options={};var field=new FieldJSONB("message",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
UserChatMessage_Controller.prototype.addUpdate=function(){UserChatMessage_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldJSONB("from_user",options);pm.addField(field);var options={};var field=new FieldJSONB("to_user",options);pm.addField(field);var options={};var field=new FieldText("media_type",options);pm.addField(field);var options={};var field=new FieldJSONB("message",options);pm.addField(field);}
UserChatMessage_Controller.prototype.addDelete=function(){UserChatMessage_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
UserChatMessage_Controller.prototype.addGetList=function(){UserChatMessage_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldJSONB("from_user",f_opts));var f_opts={};pm.addField(new FieldJSONB("to_user",f_opts));var f_opts={};pm.addField(new FieldText("media_type",f_opts));var f_opts={};pm.addField(new FieldJSONB("message",f_opts));}
UserChatMessage_Controller.prototype.addGetObject=function(){UserChatMessage_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function UserChatMessage_Model(options){var id='UserChatMessage_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_user=new FieldJSONB("from_user",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user=new FieldJSONB("to_user",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.media_type=new FieldText("media_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.message=new FieldJSONB("message",filed_options);UserChatMessage_Model.superclass.constructor.call(this,id,options);}
extend(UserChatMessage_Model,ModelXML); 
function UserChatUserList_Model(options){var id='UserChatUserList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователm ФИО';filed_options.autoInc=false;options.fields.name_short=new FieldString("name_short",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Статус';filed_options.autoInc=false;options.fields.chat_statuses_ref=new FieldJSON("chat_statuses_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Роль';filed_options.autoInc=false;options.fields.role_id=new FieldString("role_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='В сети';filed_options.autoInc=false;options.fields.is_online=new FieldBool("is_online",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Непрочитанные сообщения';filed_options.autoInc=false;options.fields.unviewed_msg_cnt=new FieldInt("unviewed_msg_cnt",filed_options);UserChatUserList_Model.superclass.constructor.call(this,id,options);}
extend(UserChatUserList_Model,ModelXML); 
function UserChatLastOpen_Model(options){var id='UserChatLastOpen_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.with_user_id=new FieldInt("with_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);UserChatLastOpen_Model.superclass.constructor.call(this,id,options);}
extend(UserChatLastOpen_Model,ModelXML); 
function UserChatMessageView_Model(options){var id='UserChatMessageView_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_chat_id=new FieldInt("user_chat_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);UserChatMessageView_Model.superclass.constructor.call(this,id,options);}
extend(UserChatMessageView_Model,ModelXML); 
function UserChatLastOpen_Controller(options){options=options||{};UserChatLastOpen_Controller.superclass.constructor.call(this,options);this.addUpdate();}
extend(UserChatLastOpen_Controller,ControllerObjServer);UserChatLastOpen_Controller.prototype.addUpdate=function(){UserChatLastOpen_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();} 
function UserChatMessageView_Controller(options){options=options||{};UserChatMessageView_Controller.superclass.constructor.call(this,options);this.add_set_all_viewed();}
extend(UserChatMessageView_Controller,ControllerObjServer);UserChatMessageView_Controller.prototype.add_set_all_viewed=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_all_viewed',opts);var options={};pm.addField(new FieldInt("user_id",options));this.addPublicMethod(pm);} 
function UserChatHistory_Model(options){var id='UserChatHistory_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tp=new FieldString("tp",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_user=new FieldJSONB("from_user",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user=new FieldJSONB("to_user",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.text=new FieldText("text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.media_type=new FieldText("media_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.message=new FieldJSONB("message",filed_options);UserChatHistory_Model.superclass.constructor.call(this,id,options);}
extend(UserChatHistory_Model,ModelXML); 
function DOCMaterialProcurementDialog_Model(options){var id='DOCMaterialProcurementDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);options.fields.number.getValidator().setMaxLength('11');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_ref=new FieldString("doc_ref",filed_options);options.fields.doc_ref.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';filed_options.autoInc=false;options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставщик';filed_options.autoInc=false;options.fields.supplier_id=new FieldInt("supplier_id",filed_options);options.fields.supplier_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carrier_id=new FieldInt("carrier_id",filed_options);options.fields.carrier_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.driver=new FieldString("driver",filed_options);options.fields.driver.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='гос.номер';filed_options.autoInc=false;options.fields.vehicle_plate=new FieldString("vehicle_plate",filed_options);options.fields.vehicle_plate.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Силос';filed_options.autoInc=false;options.fields.cement_silos_id=new FieldInt("cement_silos_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Брутто';filed_options.autoInc=false;options.fields.quant_gross=new FieldFloat("quant_gross",filed_options);options.fields.quant_gross.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Нетто';filed_options.autoInc=false;options.fields.quant_net=new FieldFloat("quant_net",filed_options);options.fields.quant_net.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.store=new FieldText("store",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sender_name=new FieldText("sender_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_base_id=new FieldInt("production_base_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Брутто по документам';filed_options.autoInc=false;options.fields.doc_quant_gross=new FieldFloat("doc_quant_gross",filed_options);options.fields.doc_quant_gross.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Нетто по документам';filed_options.autoInc=false;options.fields.doc_quant_net=new FieldFloat("doc_quant_net",filed_options);options.fields.doc_quant_net.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_user_id=new FieldInt("last_modif_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время последнего изменения';filed_options.autoInc=false;options.fields.last_modif_date_time=new FieldDateTimeTZ("last_modif_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставщик';filed_options.autoInc=false;options.fields.suppliers_ref=new FieldJSON("suppliers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carriers_ref=new FieldJSON("carriers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.materials_ref=new FieldJSON("materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Силос';filed_options.autoInc=false;options.fields.cement_silos_ref=new FieldJSON("cement_silos_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='База';filed_options.autoInc=false;options.fields.production_bases_ref=new FieldJSON("production_bases_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_users_ref=new FieldJSON("last_modif_users_ref",filed_options);DOCMaterialProcurementDialog_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementDialog_Model,ModelXML); 
function OrderGarbage_Model(options){var id='OrderGarbage_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='клиент';filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);options.fields.client_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Направление';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);options.fields.destination_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка бетона';filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);options.fields.concrete_type_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Прокачка';filed_options.autoInc=false;options.fields.unload_type=new FieldEnum("unload_type",filed_options);filed_options.enumValues='pump,band,none';var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание';filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время до';filed_options.autoInc=false;options.fields.date_time_to=new FieldDateTime("date_time_to",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сот.телефон';filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Разгрузка куб/ч';filed_options.autoInc=false;options.fields.unload_speed=new FieldFloat("unload_speed",filed_options);options.fields.unload_speed.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Язык';filed_options.autoInc=false;options.fields.lang_id=new FieldInt("lang_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость';filed_options.autoInc=false;options.fields.concrete_price=new FieldFloat("concrete_price",filed_options);options.fields.concrete_price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость дост.';filed_options.autoInc=false;options.fields.destination_price=new FieldFloat("destination_price",filed_options);options.fields.destination_price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость прокачки';filed_options.autoInc=false;options.fields.unload_price=new FieldFloat("unload_price",filed_options);options.fields.unload_price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Насос';filed_options.autoInc=false;options.fields.pump_vehicle_id=new FieldInt("pump_vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Оплата на месте';filed_options.autoInc=false;options.fields.pay_cash=new FieldBool("pay_cash",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.total_edit=new FieldBool("total_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.payed=new FieldBool("payed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.under_control=new FieldBool("under_control",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_user_id=new FieldInt("last_modif_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время последнего изменения';filed_options.autoInc=false;options.fields.last_modif_date_time=new FieldDateTimeTZ("last_modif_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Время создания';filed_options.autoInc=false;options.fields.create_date_time=new FieldDateTimeTZ("create_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Для другого завода';filed_options.autoInc=false;options.fields.ext_production=new FieldBool("ext_production",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Контакт';filed_options.autoInc=false;options.fields.contact_id=new FieldInt("contact_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Спецификация';filed_options.autoInc=false;options.fields.client_specification_id=new FieldInt("client_specification_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='F';filed_options.autoInc=false;options.fields.f_val=new FieldInt("f_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='W';filed_options.autoInc=false;options.fields.w_val=new FieldInt("w_val",filed_options);OrderGarbage_Model.superclass.constructor.call(this,id,options);}
extend(OrderGarbage_Model,ModelXML); 
function OrderGarbage_Controller(options){options=options||{};options.listModelClass=OrderGarbageList_Model;options.objModelClass=OrderGarbageDialog_Model;OrderGarbage_Controller.superclass.constructor.call(this,options);this.addDelete();this.addGetList();this.addGetObject();}
extend(OrderGarbage_Controller,ControllerObjServer);OrderGarbage_Controller.prototype.addDelete=function(){OrderGarbage_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
OrderGarbage_Controller.prototype.addGetList=function(){OrderGarbage_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("number",f_opts));var f_opts={};f_opts.alias="Клиент";pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};f_opts.alias="Объект";pm.addField(new FieldJSON("destinations_ref",f_opts));var f_opts={};pm.addField(new FieldInt("destination_id",f_opts));var f_opts={};f_opts.alias="Марка";pm.addField(new FieldJSON("concrete_types_ref",f_opts));var f_opts={};pm.addField(new FieldInt("concrete_type_id",f_opts));var f_opts={};f_opts.alias="Вид разгрузки";pm.addField(new FieldString("unload_type",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("comment_text",f_opts));var f_opts={};f_opts.alias="Прораб";pm.addField(new FieldText("descr",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("phone_cel",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Сотрудник";pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldJSON("orders_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("contacts_ref",f_opts));}
OrderGarbage_Controller.prototype.addGetObject=function(){OrderGarbage_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function OrderGarbageList_Model(options){var id='OrderGarbageList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид разгрузки';filed_options.autoInc=false;options.fields.unload_type=new FieldString("unload_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Прораб';filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотрудник';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.orders_ref=new FieldJSON("orders_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contacts_ref=new FieldJSON("contacts_ref",filed_options);OrderGarbageList_Model.superclass.constructor.call(this,id,options);}
extend(OrderGarbageList_Model,ModelXML); 
function OrderGarbageDialog_Model(options){var id='OrderGarbageDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.last_modif_users_ref=new FieldJSON("last_modif_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_price=new FieldFloat("destination_price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_cost=new FieldFloat("destination_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_time_rout=new FieldFloat("destination_time_rout",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.destination_distance=new FieldFloat("destination_distance",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_price=new FieldFloat("concrete_price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.concrete_cost=new FieldFloat("concrete_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.unload_type=new FieldString("unload_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.unload_speed=new FieldFloat("unload_speed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.time_to=new FieldTime("time_to",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.langs_ref=new FieldJSON("langs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total_edit=new FieldBool("total_edit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.payed=new FieldBool("payed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pay_cash=new FieldBool("pay_cash",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.unload_cost=new FieldFloat("unload_cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.under_control=new FieldBool("under_control",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicle_phone_cel=new FieldString("pump_vehicle_phone_cel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_vehicles_ref=new FieldJSON("pump_vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pump_prices_ref=new FieldJSON("pump_prices_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.last_modif_date_time=new FieldDateTimeTZ("last_modif_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.create_date_time=new FieldDateTimeTZ("create_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_production=new FieldBool("ext_production",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_exists=new FieldBool("tm_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_activated=new FieldBool("tm_activated",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_photo=new FieldString("tm_photo",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tm_id=new FieldInt("tm_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_id=new FieldInt("contact_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Спецификация';filed_options.autoInc=false;options.fields.client_specifications_ref=new FieldJSON("client_specifications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='F';filed_options.autoInc=false;options.fields.f_val=new FieldInt("f_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='W';filed_options.autoInc=false;options.fields.w_val=new FieldInt("w_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Взаиморасчеты';filed_options.autoInc=false;options.fields.client_debt=new FieldFloat("client_debt",filed_options);options.fields.client_debt.getValidator().setMaxLength('15');OrderGarbageDialog_Model.superclass.constructor.call(this,id,options);}
extend(OrderGarbageDialog_Model,ModelXML); 
function RawMaterialTicketDialog_Model(options){var id='RawMaterialTicketDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carrier_id=new FieldInt("carrier_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Перевозчик';filed_options.autoInc=false;options.fields.carriers_ref=new FieldJSON("carriers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.raw_material_id=new FieldInt("raw_material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';filed_options.autoInc=false;options.fields.raw_materials_ref=new FieldJSON("raw_materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Карьер';filed_options.autoInc=false;options.fields.quarry_id=new FieldInt("quarry_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Карьер';filed_options.autoInc=false;options.fields.quarries_ref=new FieldJSON("quarries_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Штрихкод';filed_options.autoInc=false;options.fields.barcode=new FieldString("barcode",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вес, т';filed_options.autoInc=false;options.fields.quant=new FieldInt("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.issue_date_time=new FieldDateTimeTZ("issue_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто выпустил';filed_options.autoInc=false;options.fields.issue_users_ref=new FieldJSON("issue_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.issue_user_id=new FieldInt("issue_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто погасил';filed_options.autoInc=false;options.fields.close_users_ref=new FieldJSON("close_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_user_id=new FieldInt("close_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата окончания срока';filed_options.autoInc=false;options.fields.expire_date=new FieldDate("expire_date",filed_options);RawMaterialTicketDialog_Model.superclass.constructor.call(this,id,options);}
extend(RawMaterialTicketDialog_Model,ModelXML); 
function CementSiloMaterial_Model(options){var id='CementSiloMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cement_silo_id=new FieldInt("cement_silo_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);CementSiloMaterial_Model.superclass.constructor.call(this,id,options);}
extend(CementSiloMaterial_Model,ModelXML); 
function CementSiloMaterialList_Model(options){var id='CementSiloMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cement_silo_id=new FieldInt("cement_silo_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cement_silos_ref=new FieldJSON("cement_silos_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.materials_ref=new FieldJSON("materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);CementSiloMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(CementSiloMaterialList_Model,ModelXML); 
function CementSiloMaterial_Controller(options){options=options||{};options.listModelClass=CementSiloMaterialList_Model;options.objModelClass=CementSiloMaterialList_Model;CementSiloMaterial_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(CementSiloMaterial_Controller,ControllerObjServer);CementSiloMaterial_Controller.prototype.addInsert=function(){CementSiloMaterial_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("cement_silo_id",options);pm.addField(field);var options={};var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
CementSiloMaterial_Controller.prototype.addUpdate=function(){CementSiloMaterial_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("cement_silo_id",options);pm.addField(field);var options={};var field=new FieldInt("material_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);}
CementSiloMaterial_Controller.prototype.addDelete=function(){CementSiloMaterial_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
CementSiloMaterial_Controller.prototype.addGetList=function(){CementSiloMaterial_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("cement_silo_id",f_opts));var f_opts={};pm.addField(new FieldJSON("cement_silos_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("materials_ref",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));}
CementSiloMaterial_Controller.prototype.addGetObject=function(){CementSiloMaterial_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function ShipmentForDocList_Model(options){var id='ShipmentForDocList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата отгрузки';filed_options.autoInc=false;options.fields.ship_date_time=new FieldDateTime("ship_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Завод';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destination_id=new FieldInt("destination_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_type_id=new FieldInt("concrete_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автомобиль';filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автомобиль';filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSON("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Водитель';filed_options.autoInc=false;options.fields.driver_id=new FieldInt("driver_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.vehicle_schedule_id=new FieldInt("vehicle_schedule_id",filed_options);ShipmentForDocList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentForDocList_Model,ModelXML); 
function InsuranceList_Controller(options){options=options||{};options.listModelClass=InsuranceList_Model;options.objModelClass=InsuranceList_Model;InsuranceList_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(InsuranceList_Controller,ControllerObjClient);InsuranceList_Controller.prototype.addInsert=function(){InsuranceList_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDate("dt_from",options);pm.addField(field);var options={};var field=new FieldDate("dt_to",options);pm.addField(field);var options={};var field=new FieldText("issuer",options);pm.addField(field);var options={};var field=new FieldFloat("total",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
InsuranceList_Controller.prototype.addUpdate=function(){InsuranceList_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDate("dt_from",options);pm.addField(field);var options={};var field=new FieldDate("dt_to",options);pm.addField(field);var options={};var field=new FieldText("issuer",options);pm.addField(field);var options={};var field=new FieldFloat("total",options);pm.addField(field);}
InsuranceList_Controller.prototype.addDelete=function(){InsuranceList_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
InsuranceList_Controller.prototype.addGetList=function(){InsuranceList_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDate("dt_from",f_opts));var f_opts={};pm.addField(new FieldDate("dt_to",f_opts));var f_opts={};pm.addField(new FieldText("issuer",f_opts));var f_opts={};pm.addField(new FieldFloat("total",f_opts));}
InsuranceList_Controller.prototype.addGetObject=function(){InsuranceList_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function InsuranceList_Model(options){var id='InsuranceList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dt_from=new FieldDate("dt_from",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dt_to=new FieldDate("dt_to",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.issuer=new FieldText("issuer",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');InsuranceList_Model.superclass.constructor.call(this,id,options);}
extend(InsuranceList_Model,ModelJSON); 
function InsuranceIssuerList_Model(options){var id='InsuranceIssuerList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.issuer=new FieldString("issuer",filed_options);InsuranceIssuerList_Model.superclass.constructor.call(this,id,options);}
extend(InsuranceIssuerList_Model,ModelXML); 
function LeasorList_Model(options){var id='LeasorList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.leasor=new FieldString("leasor",filed_options);LeasorList_Model.superclass.constructor.call(this,id,options);}
extend(LeasorList_Model,ModelXML); 
function BuhRBP1c_Controller(options){options=options||{};BuhRBP1c_Controller.superclass.constructor.call(this,options);this.addComplete();}
extend(BuhRBP1c_Controller,ControllerObjServer);BuhRBP1c_Controller.prototype.addComplete=function(){BuhRBP1c_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldText("search",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("search");} 
function BuhRBP1cList_Model(options){var id='BuhRBP1cList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_from=new FieldText("date_from",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_to=new FieldText("date_to",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total=new FieldText("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.search=new FieldText("search",filed_options);BuhRBP1cList_Model.superclass.constructor.call(this,id,options);}
extend(BuhRBP1cList_Model,ModelXML); 
function VehicleMileage_Model(options){var id='VehicleMileage_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ТС';filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);options.fields.vehicle_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.for_date=new FieldDateTimeTZ("for_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пробег';filed_options.autoInc=false;options.fields.mileage=new FieldInt("mileage",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Who set value';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);VehicleMileage_Model.superclass.constructor.call(this,id,options);}
extend(VehicleMileage_Model,ModelXML); 
function VehicleMileage_Controller(options){options=options||{};options.listModelClass=VehicleMileageList_Model;options.objModelClass=VehicleMileageList_Model;VehicleMileage_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(VehicleMileage_Controller,ControllerObjServer);VehicleMileage_Controller.prototype.addInsert=function(){VehicleMileage_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="ТС";options.required=true;var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTimeTZ("for_date",options);pm.addField(field);var options={};options.alias="Пробег";var field=new FieldInt("mileage",options);pm.addField(field);var options={};options.alias="Who set value";var field=new FieldInt("user_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
VehicleMileage_Controller.prototype.addUpdate=function(){VehicleMileage_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="ТС";var field=new FieldInt("vehicle_id",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTimeTZ("for_date",options);pm.addField(field);var options={};options.alias="Пробег";var field=new FieldInt("mileage",options);pm.addField(field);var options={};options.alias="Who set value";var field=new FieldInt("user_id",options);pm.addField(field);}
VehicleMileage_Controller.prototype.addDelete=function(){VehicleMileage_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
VehicleMileage_Controller.prototype.addGetList=function(){VehicleMileage_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};f_opts.alias="ТС";pm.addField(new FieldInt("vehicle_id",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTimeTZ("for_date",f_opts));var f_opts={};f_opts.alias="Пробег";pm.addField(new FieldInt("mileage",f_opts));var f_opts={};f_opts.alias="Who set value";pm.addField(new FieldJSON("users_ref",f_opts));}
VehicleMileage_Controller.prototype.addGetObject=function(){VehicleMileage_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="ТС";pm.addField(new FieldInt("vehicle_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function VehicleMileageList_Model(options){var id='VehicleMileageList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='ТС';filed_options.autoInc=false;options.fields.vehicle_id=new FieldInt("vehicle_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.for_date=new FieldDateTimeTZ("for_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пробег';filed_options.autoInc=false;options.fields.mileage=new FieldInt("mileage",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Who set value';filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);VehicleMileageList_Model.superclass.constructor.call(this,id,options);}
extend(VehicleMileageList_Model,ModelXML); 
function MinQuantForShipCostPeriodValueList_Model(options){var id='MinQuantForShipCostPeriodValueList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.val=new FieldFloat("val",filed_options);options.fields.val.getValidator().setMaxLength('15');MinQuantForShipCostPeriodValueList_Model.superclass.constructor.call(this,id,options);}
extend(MinQuantForShipCostPeriodValueList_Model,ModelXML); 
function ClientContract1c_Model(options){var id='ClientContract1c_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Ссылка на справочник 1с';filed_options.autoInc=false;options.fields.ref_1c=new FieldJSONB("ref_1c",filed_options);ClientContract1c_Model.superclass.constructor.call(this,id,options);}
extend(ClientContract1c_Model,ModelXML); 
function ClientContract1c_Controller(options){options=options||{};options.listModelClass=ClientDebtList_Model;options.objModelClass=ClientDebtList_Model;ClientContract1c_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();this.add_complete_from_1c();}
extend(ClientContract1c_Controller,ControllerObjServer);ClientContract1c_Controller.prototype.addGetList=function(){ClientContract1c_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("firm_id",f_opts));var f_opts={};pm.addField(new FieldJSON("firms_ref",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};pm.addField(new FieldInt("client_contract_id",f_opts));var f_opts={};pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("client_contracts_ref",f_opts));var f_opts={};pm.addField(new FieldFloat("debt_total",f_opts));var f_opts={};pm.addField(new FieldDate("update_date",f_opts));}
ClientContract1c_Controller.prototype.addGetObject=function(){ClientContract1c_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}
ClientContract1c_Controller.prototype.add_complete_from_1c=function(){var opts={"controller":this};var pm=new PublicMethodServer('complete_from_1c',opts);var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));var options={};options.maxlength="36";pm.addField(new FieldString("client_ref_1c",options));var options={};options.maxlength="100";pm.addField(new FieldString("search",options));this.addPublicMethod(pm);} 
function ClientContract1cList_Model(options){var id='ClientContract1cList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ref_1c=new FieldString("ref_1c",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.search=new FieldText("search",filed_options);ClientContract1cList_Model.superclass.constructor.call(this,id,options);}
extend(ClientContract1cList_Model,ModelXML); 
function Connect1cCheck_Controller(options){options=options||{};Connect1cCheck_Controller.superclass.constructor.call(this,options);this.add_connected();}
extend(Connect1cCheck_Controller,ControllerObjServer);Connect1cCheck_Controller.prototype.add_connected=function(){var opts={"controller":this};var pm=new PublicMethodServer('connected',opts);this.addPublicMethod(pm);} 
function BuhDoc_Model(options){var id='BuhDoc_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.nomer=new FieldText("nomer",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Formatted document datetime';filed_options.autoInc=false;options.fields.data=new FieldText("data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.faktura_nomer=new FieldText("faktura_nomer",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Formatted document datetime';filed_options.autoInc=false;options.fields.faktura_data=new FieldText("faktura_data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ref_1c=new FieldString("ref_1c",filed_options);options.fields.ref_1c.getValidator().setMaxLength('36');BuhDoc_Model.superclass.constructor.call(this,id,options);}
extend(BuhDoc_Model,ModelXML); 
function OperatorForTranspNakl_Model(options){var id='OperatorForTranspNakl_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);OperatorForTranspNakl_Model.superclass.constructor.call(this,id,options);}
extend(OperatorForTranspNakl_Model,ModelXML); 
function OperatorForTranspNakl_Controller(options){options=options||{};options.listModelClass=OperatorForTranspNaklList_Model;options.objModelClass=OperatorForTranspNaklList_Model;OperatorForTranspNakl_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(OperatorForTranspNakl_Controller,ControllerObjServer);OperatorForTranspNakl_Controller.prototype.addInsert=function(){OperatorForTranspNakl_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);}
OperatorForTranspNakl_Controller.prototype.addUpdate=function(){OperatorForTranspNakl_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("user_id",options);pm.addField(field);field=new FieldInt("old_user_id",{});pm.addField(field);var options={};var field=new FieldInt("production_site_id",options);pm.addField(field);}
OperatorForTranspNakl_Controller.prototype.addDelete=function(){OperatorForTranspNakl_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("user_id",options));}
OperatorForTranspNakl_Controller.prototype.addGetList=function(){OperatorForTranspNakl_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldInt("production_site_id",f_opts));var f_opts={};pm.addField(new FieldJSON("production_sites_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("users_ref",f_opts));}
OperatorForTranspNakl_Controller.prototype.addGetObject=function(){OperatorForTranspNakl_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("user_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function OperatorForTranspNaklList_Model(options){var id='OperatorForTranspNaklList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_site_id=new FieldInt("production_site_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);OperatorForTranspNaklList_Model.superclass.constructor.call(this,id,options);}
extend(OperatorForTranspNaklList_Model,ModelXML); 
function ExcelTemplateImageSQL_Model(options){var id='ExcelTemplateImageSQL_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sql_query=new FieldString("sql_query",filed_options);options.fields.sql_query.getValidator().setMaxLength('5000');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.w=new FieldInt("w",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.h=new FieldInt("h",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.offset_x=new FieldInt("offset_x",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.offset_y=new FieldInt("offset_y",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldString("comment_text",filed_options);options.fields.comment_text.getValidator().setMaxLength('5000');ExcelTemplateImageSQL_Model.superclass.constructor.call(this,id,options);}
extend(ExcelTemplateImageSQL_Model,ModelJSON); 
function ExcelTemplateImageSQL_Controller(options){options=options||{};options.listModelClass=ExcelTemplateImageSQL_Model;options.objModelClass=ExcelTemplateImageSQL_Model;ExcelTemplateImageSQL_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ExcelTemplateImageSQL_Controller,ControllerObjClient);ExcelTemplateImageSQL_Controller.prototype.addInsert=function(){ExcelTemplateImageSQL_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldString("sql_query",options);pm.addField(field);var options={};var field=new FieldInt("w",options);pm.addField(field);var options={};var field=new FieldInt("h",options);pm.addField(field);var options={};var field=new FieldInt("offset_x",options);pm.addField(field);var options={};var field=new FieldInt("offset_y",options);pm.addField(field);var options={};var field=new FieldString("comment_text",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ExcelTemplateImageSQL_Controller.prototype.addUpdate=function(){ExcelTemplateImageSQL_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldString("sql_query",options);pm.addField(field);var options={};var field=new FieldInt("w",options);pm.addField(field);var options={};var field=new FieldInt("h",options);pm.addField(field);var options={};var field=new FieldInt("offset_x",options);pm.addField(field);var options={};var field=new FieldInt("offset_y",options);pm.addField(field);var options={};var field=new FieldString("comment_text",options);pm.addField(field);}
ExcelTemplateImageSQL_Controller.prototype.addDelete=function(){ExcelTemplateImageSQL_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ExcelTemplateImageSQL_Controller.prototype.addGetList=function(){ExcelTemplateImageSQL_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldString("sql_query",f_opts));var f_opts={};pm.addField(new FieldInt("w",f_opts));var f_opts={};pm.addField(new FieldInt("h",f_opts));var f_opts={};pm.addField(new FieldInt("offset_x",f_opts));var f_opts={};pm.addField(new FieldInt("offset_y",f_opts));var f_opts={};pm.addField(new FieldString("comment_text",f_opts));}
ExcelTemplateImageSQL_Controller.prototype.addGetObject=function(){ExcelTemplateImageSQL_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function OrderForTranspNaklList_Model(options){var id='OrderForTranspNaklList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер заявки';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата заявки';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Order';filed_options.autoInc=false;options.fields.orders_ref=new FieldJSON("orders_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Order num';filed_options.autoInc=false;options.fields.order_num=new FieldString("order_num",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';filed_options.autoInc=false;options.fields.client_descr=new FieldString("client_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_ref_1c_exists=new FieldBool("client_ref_1c_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Объект';filed_options.autoInc=false;options.fields.destinations_ref=new FieldJSON("destinations_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Марка';filed_options.autoInc=false;options.fields.concrete_types_ref=new FieldJSON("concrete_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кол-во в заявке,м3';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);OrderForTranspNaklList_Model.superclass.constructor.call(this,id,options);}
extend(OrderForTranspNaklList_Model,ModelXML); 
function ShipmentBuhDoc_Model(options){var id='ShipmentBuhDoc_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.ref_1c=new FieldString("ref_1c",filed_options);options.fields.ref_1c.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.nomer=new FieldText("nomer",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Formatted document datetime';filed_options.autoInc=false;options.fields.data=new FieldText("data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.faktura_nomer=new FieldText("faktura_nomer",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Formatted document datetime';filed_options.autoInc=false;options.fields.faktura_data=new FieldText("faktura_data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.shipment_ids=new FieldArray("shipment_ids",filed_options);ShipmentBuhDoc_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentBuhDoc_Model,ModelXML); 
function ShipmentForTranspNaklList_Model(options){var id='ShipmentForTranspNaklList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Order ID';filed_options.autoInc=false;options.fields.order_id=new FieldInt("order_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Shipment';filed_options.autoInc=false;options.fields.shipments_ref=new FieldJSON("shipments_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Production site';filed_options.autoInc=false;options.fields.production_sites_ref=new FieldJSON("production_sites_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Vehicle';filed_options.autoInc=false;options.fields.vehicles_ref=new FieldJSON("vehicles_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Driver';filed_options.autoInc=false;options.fields.drivers_ref=new FieldJSON("drivers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Driver sig';filed_options.autoInc=false;options.fields.driver_sig_exists=new FieldBool("driver_sig_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Operator';filed_options.autoInc=false;options.fields.operators_ref=new FieldJSON("operators_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Operator sig';filed_options.autoInc=false;options.fields.operator_sig_exists=new FieldBool("operator_sig_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Carrier';filed_options.autoInc=false;options.fields.carriers_ref=new FieldJSON("carriers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.carrier_ref_1c_exists=new FieldBool("carrier_ref_1c_exists",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кол-во,м3';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);ShipmentForTranspNaklList_Model.superclass.constructor.call(this,id,options);}
extend(ShipmentForTranspNaklList_Model,ModelXML); 
function ConnectElkonCheck_Controller(options){options=options||{};ConnectElkonCheck_Controller.superclass.constructor.call(this,options);this.add_connected();}
extend(ConnectElkonCheck_Controller,ControllerObjServer);ConnectElkonCheck_Controller.prototype.add_connected=function(){var opts={"controller":this};var pm=new PublicMethodServer('connected',opts);this.addPublicMethod(pm);} 
function UserAllowedMaterialCorrection_Model(options){var id='UserAllowedMaterialCorrection_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);UserAllowedMaterialCorrection_Model.superclass.constructor.call(this,id,options);}
extend(UserAllowedMaterialCorrection_Model,ModelXML); 
function UserAllowedMaterialCorrection_Controller(options){options=options||{};options.listModelClass=UserAllowedMaterialCorrectionList_Model;options.objModelClass=UserAllowedMaterialCorrectionList_Model;UserAllowedMaterialCorrection_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(UserAllowedMaterialCorrection_Controller,ControllerObjServer);UserAllowedMaterialCorrection_Controller.prototype.addInsert=function(){UserAllowedMaterialCorrection_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("user_id",options);pm.addField(field);}
UserAllowedMaterialCorrection_Controller.prototype.addUpdate=function(){UserAllowedMaterialCorrection_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("user_id",options);pm.addField(field);field=new FieldInt("old_user_id",{});pm.addField(field);}
UserAllowedMaterialCorrection_Controller.prototype.addDelete=function(){UserAllowedMaterialCorrection_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("user_id",options));}
UserAllowedMaterialCorrection_Controller.prototype.addGetList=function(){UserAllowedMaterialCorrection_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldJSON("users_ref",f_opts));}
UserAllowedMaterialCorrection_Controller.prototype.addGetObject=function(){UserAllowedMaterialCorrection_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("user_id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));} 
function UserAllowedMaterialCorrectionList_Model(options){var id='UserAllowedMaterialCorrectionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);UserAllowedMaterialCorrectionList_Model.superclass.constructor.call(this,id,options);}
extend(UserAllowedMaterialCorrectionList_Model,ModelXML); 
function DOCMaterialMovement_Model(options){var id='DOCMaterialMovement_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';filed_options.autoInc=false;options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);options.fields.number.getValidator().setMaxLength('11');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_base_from_id=new FieldInt("production_base_from_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_base_to_id=new FieldInt("production_base_to_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Carrier';filed_options.autoInc=false;options.fields.carrier_id=new FieldInt("carrier_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Vehicle plate';filed_options.autoInc=false;options.fields.vehicle_plate=new FieldString("vehicle_plate",filed_options);options.fields.vehicle_plate.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_user_id=new FieldInt("last_modif_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время последнего изменения';filed_options.autoInc=false;options.fields.last_modif_date_time=new FieldDateTimeTZ("last_modif_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);DOCMaterialMovement_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialMovement_Model,ModelXML); 
function DOCMaterialMovementList_Model(options){var id='DOCMaterialMovementList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_base_from_id=new FieldInt("production_base_from_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_base_to_id=new FieldInt("production_base_to_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_bases_from_ref=new FieldJSON("production_bases_from_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.production_bases_to_ref=new FieldJSON("production_bases_to_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.materials_ref=new FieldJSON("materials_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';filed_options.autoInc=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.carriers_ref=new FieldJSON("carriers_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Vehicle plate';filed_options.autoInc=false;options.fields.vehicle_plate=new FieldString("vehicle_plate",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кто последний вносил изменения';filed_options.autoInc=false;options.fields.last_modif_users_ref=new FieldJSON("last_modif_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время последнего изменения';filed_options.autoInc=false;options.fields.last_modif_date_time=new FieldDateTimeTZ("last_modif_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);DOCMaterialMovementList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialMovementList_Model,ModelXML); 
function DOCMaterialMovement_Controller(options){options=options||{};options.listModelClass=DOCMaterialMovementList_Model;options.objModelClass=DOCMaterialMovementList_Model;DOCMaterialMovement_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DOCMaterialMovement_Controller,ControllerObjServer);DOCMaterialMovement_Controller.prototype.addInsert=function(){DOCMaterialMovement_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldString("number",options);pm.addField(field);var options={};var field=new FieldInt("material_id",options);pm.addField(field);var options={};var field=new FieldInt("production_base_from_id",options);pm.addField(field);var options={};var field=new FieldInt("production_base_to_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Carrier";var field=new FieldInt("carrier_id",options);pm.addField(field);var options={};options.alias="Vehicle plate";var field=new FieldString("vehicle_plate",options);pm.addField(field);var options={};options.alias="Кто последний вносил изменения";var field=new FieldInt("last_modif_user_id",options);pm.addField(field);var options={};options.alias="Время последнего изменения";var field=new FieldDateTimeTZ("last_modif_date_time",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DOCMaterialMovement_Controller.prototype.addUpdate=function(){DOCMaterialMovement_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldString("number",options);pm.addField(field);var options={};var field=new FieldInt("material_id",options);pm.addField(field);var options={};var field=new FieldInt("production_base_from_id",options);pm.addField(field);var options={};var field=new FieldInt("production_base_to_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Carrier";var field=new FieldInt("carrier_id",options);pm.addField(field);var options={};options.alias="Vehicle plate";var field=new FieldString("vehicle_plate",options);pm.addField(field);var options={};options.alias="Кто последний вносил изменения";var field=new FieldInt("last_modif_user_id",options);pm.addField(field);var options={};options.alias="Время последнего изменения";var field=new FieldDateTimeTZ("last_modif_date_time",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);}
DOCMaterialMovement_Controller.prototype.addDelete=function(){DOCMaterialMovement_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DOCMaterialMovement_Controller.prototype.addGetList=function(){DOCMaterialMovement_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));pm.addField(new FieldString(this.PARAM_FIELD_LSN));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("number",f_opts));var f_opts={};pm.addField(new FieldInt("production_base_from_id",f_opts));var f_opts={};pm.addField(new FieldInt("production_base_to_id",f_opts));var f_opts={};pm.addField(new FieldJSON("production_bases_from_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("production_bases_to_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("materials_ref",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};pm.addField(new FieldJSON("users_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("carriers_ref",f_opts));var f_opts={};f_opts.alias="Vehicle plate";pm.addField(new FieldString("vehicle_plate",f_opts));var f_opts={};f_opts.alias="Кто последний вносил изменения";pm.addField(new FieldJSON("last_modif_users_ref",f_opts));var f_opts={};f_opts.alias="Время последнего изменения";pm.addField(new FieldDateTimeTZ("last_modif_date_time",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
DOCMaterialMovement_Controller.prototype.addGetObject=function(){DOCMaterialMovement_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));pm.addField(new FieldString("lsn"));}